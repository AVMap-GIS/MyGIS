<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Scripts\digitizer_Obfs.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><a href="..&#x2F;index.html"><img src="..&#x2F;assets/css/logo.png" title=""></a></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for MyGIS version 2.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/mygis.Admin.html">mygis.Admin</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.AppManager.html">mygis.Admin.AppManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.AppManager.Apps.html">mygis.Admin.AppManager.Apps</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.AppManager.Maps.html">mygis.Admin.AppManager.Maps</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.AppManager.Styles.html">mygis.Admin.AppManager.Styles</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.AppManager.URLs.html">mygis.Admin.AppManager.URLs</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.LayerManager.html">mygis.Admin.LayerManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.LogManager.html">mygis.Admin.LogManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.html">mygis.Admin.MapManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.Layers.html">mygis.Admin.MapManager.Layers</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.Macros.html">mygis.Admin.MapManager.Macros</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.Maps.html">mygis.Admin.MapManager.Maps</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.Permissions.html">mygis.Admin.MapManager.Permissions</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.MapManager.QuickSearches.html">mygis.Admin.MapManager.QuickSearches</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.UI.html">mygis.Admin.UI</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.UserManager.html">mygis.Admin.UserManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Admin.Utilities.html">mygis.Admin.Utilities</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Drawing.html">mygis.Drawing</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Drawing.Editing.html">mygis.Drawing.Editing</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Drawing.Exporting.html">mygis.Drawing.Exporting</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Drawing.Importing.html">mygis.Drawing.Importing</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Drawing.Styling.html">mygis.Drawing.Styling</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Map.html">mygis.Map</a></li>
            
                <li><a href="..&#x2F;classes/mygis.OLOverrides.html">mygis.OLOverrides</a></li>
            
                <li><a href="..&#x2F;classes/mygis.OLOverrides.mygis_Control.html">mygis.OLOverrides.mygis_Control</a></li>
            
                <li><a href="..&#x2F;classes/mygis.OLOverrides.mygis_Control.mygis_GetFeature.html">mygis.OLOverrides.mygis_Control.mygis_GetFeature</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Printing.html">mygis.Printing</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Query.html">mygis.Query</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Storage.html">mygis.Storage</a></li>
            
                <li><a href="..&#x2F;classes/mygis.UI.html">mygis.UI</a></li>
            
                <li><a href="..&#x2F;classes/mygis.UI.Help.html">mygis.UI.Help</a></li>
            
                <li><a href="..&#x2F;classes/mygis.UI.Hooks.html">mygis.UI.Hooks</a></li>
            
                <li><a href="..&#x2F;classes/mygis.UI.Macros.html">mygis.UI.Macros</a></li>
            
                <li><a href="..&#x2F;classes/mygis.UI.MediaManager.html">mygis.UI.MediaManager</a></li>
            
                <li><a href="..&#x2F;classes/mygis.User.html">mygis.User</a></li>
            
                <li><a href="..&#x2F;classes/mygis.User.Hooks.html">mygis.User.Hooks</a></li>
            
                <li><a href="..&#x2F;classes/mygis.User.ProfileInfo.html">mygis.User.ProfileInfo</a></li>
            
                <li><a href="..&#x2F;classes/mygis.User.UI.html">mygis.User.UI</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Utilities.html">mygis.Utilities</a></li>
            
                <li><a href="..&#x2F;classes/mygis.Utilities.projections.html">mygis.Utilities.projections</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: Scripts\digitizer_Obfs.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

&#x2F;********************************************************************&#x2F;
&#x2F;*                                                                  *&#x2F;
&#x2F;*  Copyright (c) 2005-2011 DAMIANI                                 *&#x2F;
&#x2F;*                                                                  *&#x2F;
&#x2F;*  This obfuscated code was created by Jasob 4.0 Trial Version.    *&#x2F;
&#x2F;*  The code may be used for evaluation purposes only.              *&#x2F;
&#x2F;*  To obtain full rights to the obfuscated code you have to        *&#x2F;
&#x2F;*  purchase the license key (http:&#x2F;&#x2F;www.jasob.com&#x2F;Purchase.html).  *&#x2F;
&#x2F;*                                                                  *&#x2F;
&#x2F;********************************************************************&#x2F;

String.prototype.format=function(){var args=arguments;return this.replace(&#x2F;{(\d+)}&#x2F;g,function(match,number){return typeof args[number]!=&#x27;\x75nd\x65fi\x6e\x65d&#x27;?args[number]:&#x27;{&#x27;+number+&#x27;}&#x27;;});};function bU(input,search_value,argStrict){var search=typeof search_value!==&#x27;u\x6edef\x69\x6ee\x64&#x27;,tmp_arr=[],strict= ! !argStrict,include=true,key=&#x27;&#x27;;if(input&amp;&amp;typeof input===&#x27;ob\x6a\x65\x63t&#x27;&amp;&amp;input.change_key_case){return input.keys(search_value,argStrict);}for(key in input){if(input.hasOwnProperty(key)){include=true;if(search){if(strict&amp;&amp;input[key]!==search_value){include=false;}else{if(input[key]!=search_value){include=false;}}}if(include){tmp_arr[tmp_arr.length]=key;}}}return tmp_arr;};function aF(lonLat){var lat=lonLat.lat;var lon=lonLat.lon;var ns=OpenLayers.Util.getFormattedLonLat(lat);var ew=OpenLayers.Util.getFormattedLonLat(lon,&#x27;lo\x6e&#x27;);return ns+&#x27;,\x20&#x27;+ew+&#x27;\x20(&#x27;+(Math.round(lat*10000)&#x2F;10000)+&#x27;\x2c &#x27;+(Math.round(lon*10000)&#x2F;10000)+&#x27;)&#x27;;};var outsideUrl=&quot;http\x3a\x2f\x2f\x6d\x79g\x69s\x64ev\x65lop\x2eav\x6d\x61p\x2e\x67r&#x2F;&quot;;var appPath;var layerlist;var digimap;var criteriaMap;var digiContainer;var drawMode;var drawControls;var infoControls;var naviControls;var lastCritIndex;var digimapOverlays=[];var countMarkers,countPolygons,countPolylines;var digiOutLoc;var geoXml;var postbackurl;var extra;var myguid;var current;var cosmeticLayer;var selectionLayer;var selectionWMSLayer;var selectionFlasher={timer:null,count:null};var drawingManager;var mapContainerPosition;var panTimer;var lastX;var lastY;var rainTimer;var extraToolsTimer;var leftButtonDown;var toolbarToggling=false;var filledMode=2;var geocoder=null;var directionsService=null;var coo;var polyShape;var polyPoints=[];var cur=0;var plmcur=0;var polygonstyles=[];var polylinestyles=[];var placemarks=[];var polygonDepth=&quot;0&quot;;var dirpointstart;var dirpointend;var directionsDisplay;var oldpoint;var destinations=[];var waypts=[];var editMode=false;var real_editMode=false;var autopanListener;var rightmenuOpen=false;var infoWindows;var autocomplete;var saveFlasher;var toolsEnabled={allTools:false,toolbar:false,search:false,maps:false,layers:false,marker:false,filledRect:false,openRect:false,filledCircle:false,openCircle:false,openPolygon:false,filledPolygon:false,polyLine:false,polyLineDirections:false,database:false,undo:false};var latLngToPixel;var cmenu;var objcmenu;var rightClickedObj;var mygis=namespace(&quot;A\x56Map\x2e\x6dy\x67\x69s&quot;);var testSLDLayer;mygis.Map={setDigiVars:function(contID,tools,misc){digiContainer=document.getElementById(contID);if(misc){try{if(misc[0]){appPath=misc[0];}if(misc[1]){layerlist=document.getElementById(misc[1]);}if(misc[2]){postbackurl=misc[2];}if(misc[3]){extra=misc[3];}if(misc[4]){myguid=misc[4];}if(misc[5]){postbackurl=misc[5];}}catch(Error){}}if(tools){for(var i=0;i&lt;tools.length;i++){switch(tools[i]){case 0:toolsEnabled.allTools=true;break;case 1:toolsEnabled.toolbar=true;break;case 2:toolsEnabled.search=true;break;case 3:toolsEnabled.maps=true;break;case 4:toolsEnabled.layers=true;break;case 5:toolsEnabled.marker=true;break;case 6:toolsEnabled.filledRect=true;break;case 7:toolsEnabled.openRect=true;break;case 8:toolsEnabled.filledCircle=true;break;case 9:toolsEnabled.openCircle=true;break;case 10:toolsEnabled.openPolygon=true;break;case 11:toolsEnabled.filledPolygon=true;break;case 12:toolsEnabled.polyLine=true;break;case 13:toolsEnabled.polyLineDirections=true;break;case 14:toolsEnabled.database=true;break;}}}mygis.Map.initMap();},initMap:function(){naviControls={navigation:new OpenLayers.Control.Navigation({handleRightClicks:false,autoActive:true,dragPanOptions:{enableKinetic:false}}),zoomBox:new OpenLayers.Control.ZoomBox()};var mapserver=new OpenLayers.Layer.WMS(&quot;\x4fp\x65\x6e\x4c\x61ye\x72s WMS&quot;,&quot;\x68\x74tp\x3a\x2f&#x2F;vm\x61p\x30\x2et\x69l\x65\x73.o\x73geo.\x6fr\x67&#x2F;w\x6d\x73\x2f\x76map0&quot;,{layers:&#x27;b\x61s\x69c&#x27;,gutter:0,buffer:0,isBaseLayer:true,transitionEffect:&#x27;\x72\x65si\x7ae&#x27;,units:&quot;\x64d&quot;,maxExtent:new OpenLayers.Bounds(-180.000000,-90.000000,180.000000,90.000000),projection:new OpenLayers.Projection(&quot;E\x50SG\x3a\x3432\x36&quot;.toUpperCase()),sphericalMercator:false,visibility:false,attribution:&#x27;P\x72\x6f\x76ide\x64\x20\x62\x79\x20\x3ca h\x72\x65\x66\x3d&quot;htt\x70:&#x2F;&#x2F;\x77w\x77.o\x73ge\x6f\x2eor\x67&quot;\x20ta\x72\x67e\x74\x3d\x22_blank&quot;&gt;O\x53\x47eo\x3c&#x2F;\x61\x3e&#x27;});digimap=new OpenLayers.Map(digiContainer.id,{&#x27;t\x69\x6c\x65Siz\x65&#x27;:new OpenLayers.Size(256,256),fractionalZoom:true,controls:[new OpenLayers.Control.ScaleLine({bottomOutUnits:&quot;&quot;,bottomInUnits:&quot;&quot;,&#x27;\x64iv&#x27;:OpenLayers.Util.getElement(&#x27;\x6flS\x63\x61\x6ceL\x69\x6e\x65_wr\x61\x70per&#x27;)}),new OpenLayers.Control.Permalink({&#x27;\x69d&#x27;:&#x27;pe\x72ma\x6c\x69n\x6b&#x27;,&#x27;el\x65\x6d\x65nt&#x27;:OpenLayers.Util.getElement(&#x27;\x70erm\x61\x45l\x65m&#x27;),&#x27;d\x69v&#x27;:OpenLayers.Util.getElement(&#x27;\x70\x65rma\x43o\x6et\x61i\x6eer&#x27;)}),new OpenLayers.Control.Attribution({template:&#x27;\x43op\x79r\x69g\x68t My\x47IS\x2020\x312\x2c \x24\x7bla\x79\x65r\x73\x7d&#x27;,&#x27;\x64iv&#x27;:OpenLayers.Util.getElement(&#x27;\x63us\x74omA\x74\x74r\x69bu\x74i\x6f\x6e&#x27;)}),new OpenLayers.Control.MousePosition({&#x27;d\x69v&#x27;:OpenLayers.Util.getElement(&#x27;l\x6c\x5f\x6do\x75se&#x27;),id:&#x27;ll\x5f\x6do\x75\x73e&#x27;,formatOutput:aF})]});digimap.addControl(naviControls.navigation);digimap.addControl(naviControls.zoomBox);var ktimatologio=new OpenLayers.Layer.WMS(strings.BackgroundLayers.ktimatologio_name,&quot;h\x74\x74p:&#x2F;&#x2F;gi\x73\x2e\x6b\x74iman\x65\x74\x2egr&#x2F;w\x6d\x73\x2fwm\x73op\x65n&#x2F;\x77\x6ds\x73\x65r\x76er\x2e\x61sp\x78&quot;,{layers:&#x27;\x4bTBAS\x45M\x41\x50&#x27;,transparent:false},{isBaseLayer:true,iformat:&#x27;i\x6dag\x65&#x2F;\x70\x6eg&#x27;,numZoomLevels:20,visibility:false,attribution:strings.BackgroundLayers.ktimatologio_attribution});ktimatologio.mg_MinScale=0;ktimatologio.mg_MaxScale=30000;var nasa=new OpenLayers.Layer.WMS(strings.BackgroundLayers.landsat_name,&quot;h\x74\x74p:\x2f\x2fi\x63eds\x2e\x67e\x2eucl\x2e\x61c.u\x6b\x2fcgi\x2dbi\x6e&#x2F;i\x63\x65d\x73w\x6d\x73&quot;,{layers:&quot;\x6can\x64\x73at\x35&quot;},{isBaseLayer:true,attribution:strings.BackgroundLayers.landsat_attribution,numZoomLevels:20});nasa.mg_MinScale=30000;nasa.mg_MaxScale= -1;digimap.addLayers([nasa,ktimatologio]);naviControls.overview=new OpenLayers.Control.OverviewMap({&#x27;d\x69v&#x27;:OpenLayers.Util.getElement(&#x27;cu\x73to\x6dO\x76erv\x69\x65\x77&#x27;),size:new OpenLayers.Size(114,105),layers:[mapserver.clone()],mapOptions:{zoom:5}});digimap.addControl(naviControls.overview);digimap.events.register(&quot;z\x6fo\x6de\x6ed&quot;,digimap,function(){document.getElementById(&#x27;\x63\x75\x72r\x65\x6etScale&#x27;).innerHTML=&quot;&lt;spa\x6e\x20c\x6cas\x73=&#x27;sc\x61l\x65\x70\x61rt1&#x27;&gt;1&lt;\x2f\x73pan&gt;&lt;span\x20cl\x61\x73\x73=\x27s\x63ale\x70\x61\x72t\x32&#x27;&gt;\x3a&lt;&#x2F;\x73p\x61\x6e&gt;\x3c\x73\x70\x61\x6e \x63\x6c\x61\x73s=\x27s\x63\x61\x6ce\x70art3\x27\x3e\x20&quot;+mygis.V.addCommas(digimap.getScale().toFixed(0))+&quot;&lt;&#x2F;\x73p\x61n\x3e&quot;;document.getElementById(&#x27;\x63urr\x65\x6etSca\x6c\x65&#x27;).innerHTML=&quot;1:\x20&quot;+mygis.V.addCommas(digimap.getScale().toFixed(0));mygis.Map.checkScaleConstraints();});mygis.UI.createContextMenu(&quot;m\x61p&quot;);cosmeticLayer=new OpenLayers.Layer.Vector(&quot;\x43\x6fsm\x65\x74\x69c Lay\x65r&quot;);selectionLayer=new OpenLayers.Layer.Vector(&quot;\x53\x65le\x63\x74ion\x20L\x61ye\x72&quot;);digimap.addLayers([cosmeticLayer,selectionLayer]);var defaultPointStyle=OpenLayers.Util.applyDefaults(defaultPointStyle,OpenLayers.Feature.Vector.style[&#x27;te\x6d\x70or\x61\x72y&#x27;]);drawControls={marker:new OpenLayers.Control.DrawFeature(cosmeticLayer,OpenLayers.Handler.Point,{handlerOptions:{style:mygis.O.H.getOLStyle(&#x27;\x70\x6fint&#x27;)},featureAdded:function(feature){feature.style=mygis.O.H.getOLStyle(&#x27;poi\x6e\x74&#x27;);feature.overlaytype=&quot;\x6dar\x6b\x65r&quot;;mygis.UI.increaseMarkers(feature);this.layer.redraw();}}),polyline:new OpenLayers.Control.DrawFeature(cosmeticLayer,OpenLayers.Handler.Path,{handlerOptions:{style:mygis.O.H.getOLStyle(&#x27;\x6c\x69ne&#x27;)},featureAdded:function(feature){feature.style=mygis.O.H.getOLStyle(&#x27;\x6ci\x6ee&#x27;);feature.overlaytype=&quot;p\x6f\x6cyl\x69\x6ee&quot;;mygis.UI.increasePolylines(feature);this.layer.redraw();}}),polygon:new OpenLayers.Control.DrawFeature(cosmeticLayer,OpenLayers.Handler.Polygon,{handlerOptions:{style:mygis.O.H.getOLStyle(&#x27;p\x6f\x6cyg\x6fn&#x27;)},featureAdded:function(feature){feature.style=mygis.O.H.getOLStyle(&#x27;\x70o\x6cy\x67on&#x27;);feature.overlaytype=&quot;p\x6fl\x79go\x6e&quot;;mygis.UI.increasePolygons(feature);this.layer.redraw();}}),rectangle:new OpenLayers.Control.DrawFeature(cosmeticLayer,OpenLayers.Handler.RegularPolygon,{handlerOptions:{sides:4,irregular:true,style:mygis.O.H.getOLStyle(&#x27;p\x6fl\x79go\x6e&#x27;)},featureAdded:function(feature){feature.style=mygis.O.H.getOLStyle(&#x27;pol\x79g\x6f\x6e&#x27;);feature.overlaytype=&quot;r\x65cta\x6eg\x6c\x65&quot;;mygis.UI.increasePolygons(feature);this.layer.redraw();}}),modify:new OpenLayers.Control.ModifyFeature(cosmeticLayer,{mode:OpenLayers.Control.ModifyFeature.RESHAPE,createVertices:true}),selection:new OpenLayers.Control.DrawFeature(selectionLayer,OpenLayers.Handler.Point,{handlerOptions:{style:mygis.O.H.getOLStyle(&#x27;\x70\x6fint&#x27;)},featureAdded:function(feature){feature.style=mygis.O.H.getOLStyle(&#x27;\x70o\x69nt&#x27;);this.layer.redraw();}})};for(var key in drawControls){digimap.addControl(drawControls[key]);}var selectCtrl=new OpenLayers.Control.SelectFeature(cosmeticLayer,{clickout:true});mygis.UI.setProjectionTip();mygis.V.googleAutoComplete();mygis.UI.createEditableInfo();mygis.Map.infoInit();},ZoomOut:function(){digimap.zoomTo(digimap.getZoom()-1);},infoInit:function(){infoControls={click:new OpenLayers.Control.WMSGetFeatureInfo({url:&#x27;\x2f\x6da\x70ser\x76e\x72&#x2F;\x77ms&#x27;,title:&#x27;\x49d\x65\x6e\x74i\x66y fe\x61tur\x65s by c\x6ci\x63\x6b\x69\x6e\x67&#x27;,drillDown:true,infoFormat:&quot;text&#x2F;\x68\x74\x6d\x6c&quot;,maxFeatures:10,layers:[digimap.layers[2]],vendorParams:{EXCEPTIONS:&#x27;XM\x4c&#x27;}}),select:new OpenLayers.Control.GetFeature({protocol:null,box:true,hover:false,multipleKey:&quot;sh\x69\x66t\x4b\x65y&quot;,toggleKey:&quot;\x63t\x72\x6cKey&quot;})};infoControls.click.events.register(&quot;\x67e\x74f\x65a\x74\x75rei\x6efo&quot;,this,mygis.Map.showInfo2);infoControls.select.events.register(&quot;\x66e\x61t\x75r\x65\x73s\x65lect\x65d&quot;,this,function(e){var layersTotal=[];for(var i=0;i&lt;e.features.length;i++){layersTotal.push(e.features[i].type);}var layerUnique=mygis.V.arrayUnique(layersTotal);F(&quot;\x46\x6fund\x3a &quot;+e.features.length+&quot; \x6fbje\x63\x74s \x69\x6e &quot;+layerUnique.length+&quot; l\x61\x79e\x72s&quot;);});infoControls.select.events.register(&quot;f\x65\x61\x74urese\x6c\x65\x63te\x64&quot;,this,function(e){selectionLayer.addFeatures([e.feature]);});infoControls.select.events.register(&quot;\x66\x65at\x75reu\x6es\x65l\x65c\x74\x65d&quot;,this,function(e){selectionLayer.removeFeatures([e.feature]);});for(var i in infoControls){digimap.addControl(infoControls[i]);}},elementPosition:function(param){var x=0,y=0;var obj=(typeof param==&quot;\x73\x74r\x69ng&quot;)?document.getElementById(param):param;if(obj){x=obj.offsetLeft;y=obj.offsetTop;var body=document.getElementsByTagName(&#x27;\x62o\x64y&#x27;)[0];while(obj.offsetParent&amp;&amp;obj!=body){x+=obj.offsetParent.offsetLeft;y+=obj.offsetParent.offsetTop;obj=obj.offsetParent;}}var retobj={};retobj.x=x;retobj.y=y;mapContainerPosition=retobj;},createLogo:function(){var retobj=document.createElement(&quot;D\x49V&quot;);var btnAVMap=document.createElement(&quot;\x49N\x50UT&quot;);btnAVMap.id=&quot;A\x56Log\x6f\x42\x74n&quot;;btnAVMap.type=&quot;\x62ut\x74o\x6e&quot;;$(btnAVMap).bind(&#x27;cli\x63\x6b&#x27;,function(){window.open(&quot;\x68tt\x70:\x2f&#x2F;w\x77\x77.a\x76\x6dap.\x67\x72&#x2F;&quot;);});retobj.appendChild(btnAVMap);$(retobj).css({&quot;p\x6f\x73\x69tio\x6e&quot;:&quot;\x61bs\x6f\x6c\x75te&quot;,&quot;\x62ot\x74\x6fm&quot;:0,&quot;z\x2di\x6ed\x65x&quot;:999,&quot;l\x65\x66t&quot;:10});return retobj;},drawTools:function(){var mytitlebar=document.createElement(&quot;DI\x56&quot;);var mytoolbar=document.createElement(&quot;D\x49V&quot;);var mysearchbar=document.createElement(&quot;D\x49V&quot;);var mymiscbar=document.createElement(&quot;\x44IV&quot;);var mylayersbox=document.createElement(&quot;DI\x56&quot;);mytoolbar=document.getElementById(&quot;map\x54\x6f\x6flb\x61\x72&quot;);mysearchbar.id=&quot;s\x65\x61\x72\x63hbar&quot;;mysearchbar.setAttribute(&quot;c\x6c\x61ss&quot;,&quot;t\x6f\x6flba\x72&quot;);mysearchbar.className=&quot;tool\x62\x61\x72&quot;;mymiscbar.id=&quot;m\x69s\x63ba\x72&quot;;mymiscbar.setAttribute(&quot;c\x6ca\x73s&quot;,&quot;t\x6fol\x62\x61r&quot;);mymiscbar.className=&quot;t\x6fol\x62\x61r&quot;;mylayersbox.id=&quot;\x6ca\x79e\x72sbo\x78&quot;;mylayersbox.setAttribute(&quot;c\x6ca\x73s&quot;,&quot;\x6ca\x79\x65rs\x62ox&quot;);mylayersbox.className=&quot;\x6cay\x65rs\x62\x6fx&quot;;if(toolsEnabled.search||toolsEnabled.allTools){var ctrl=mygis.Map.createTool(&quot;\x73\x65a\x72ch&quot;);mysearchbar.appendChild(ctrl);}if(toolsEnabled.marker||toolsEnabled.allTools){var ctrl=mygis.Map.createTool(&quot;\x6da\x72\x6ber&quot;);ctrl.title=tip_marker;mytoolbar.appendChild(ctrl);}if(toolsEnabled.polyLine||toolsEnabled.allTools){var ctrl=mygis.Map.createTool(&quot;po\x6cyl\x69\x6e\x65&quot;);ctrl.title=tip_polyline;mytoolbar.appendChild(ctrl);}if(toolsEnabled.filledPolygon||toolsEnabled.allTools){var ctrl=mygis.Map.createTool(&quot;\x70\x6f\x6cygon&quot;);ctrl.id=&quot;\x70\x72\x6f\x62lem\x61\x74ic\x62ut\x74on&quot;;ctrl.title=tip_polygon;mytoolbar.appendChild(ctrl);}if(false){var ctrl=mygis.Map.createTool(&quot;c\x69\x72c\x6ce&quot;);ctrl.id=&quot;\x70\x72o\x62l\x65\x6da\x74i\x63b\x75tton&quot;;ctrl.title=tip_polygon;mytoolbar.appendChild(ctrl);}if(true){var ctrl=mygis.Map.createTool(&quot;\x72e\x63\x74angl\x65&quot;);ctrl.id=&quot;pr\x6f\x62l\x65\x6d\x61t\x69cb\x75t\x74on&quot;;ctrl.title=tip_polygon;mytoolbar.appendChild(ctrl);}if(toolsEnabled.polyLineDirections||toolsEnabled.allTools){var ctrl=mygis.Map.createTool(&quot;d\x72i\x76e&quot;);ctrl.id=&quot;dr\x69v\x65&quot;;ctrl.title=tip_drive;mytoolbar.appendChild(ctrl);}var defTools=mygis.Map.createDefaultTools();mytoolbar.appendChild(defTools);var toggleToolBtn=mygis.Map.createToggleButton(&quot;\x74\x6fols&quot;);var toggleMiscBtn=mygis.Map.createToggleButton(&quot;\x6dis\x63&quot;);var toggleSearchBtn=mygis.Map.createToggleButton(&quot;\x73ea\x72\x63h&quot;);var toggleLayerBtn=mygis.Map.createToggleButton(&quot;l\x61y\x65\x72s&quot;);var ultraholder=document.createElement(&quot;D\x49V&quot;);var toggleHolder=document.createElement(&quot;DI\x56&quot;);var toolbarholder;if(toolsEnabled.toolbar||toolsEnabled.allTools){var toolbarholder=document.createElement(&quot;D\x49V&quot;);$(toolbarholder).css({&quot;\x70o\x73i\x74i\x6fn&quot;:&quot;a\x62sol\x75\x74\x65&quot;,&quot;\x74op&quot;:&quot;1p\x78&quot;,&quot;\x7a-i\x6e\x64ex&quot;:999});toggleHolder.appendChild(toggleToolBtn);}var atleastone=false;if(toolsEnabled.layers||toolsEnabled.allTools){toggleHolder.appendChild(mygis.Map.createToggleButton(&quot;lay\x65\x72\x73&quot;));atleastone=true;}},createToggleButton:function(mybar){var retobj=document.createElement(&quot;DI\x56&quot;);var myname;retobj.className=&quot;to\x67gleBu\x74\x74o\x6esC\x6fnt\x61\x69\x6e\x65\x72&quot;;switch(mybar){case &quot;to\x6fl\x73&quot;:var btn=document.createElement(&quot;INP\x55\x54&quot;);btn.onclick=mygis.UI.toggleToolbar;btn.id=&quot;t\x6fg\x67\x6ceTool\x62\x61\x721&quot;;btn.type=&quot;bu\x74\x74\x6fn&quot;;btn.title=tip_btnErgaleia;retobj.appendChild(btn);break;case &quot;\x6d\x69sc&quot;:var btn=document.createElement(&quot;\x49\x4ePUT&quot;);btn.onclick=mygis.UI.toggleToolbar3;btn.id=&quot;t\x6fg\x67l\x65T\x6fo\x6cbar\x33&quot;;btn.type=&quot;b\x75\x74to\x6e&quot;;btn.title=tip_btnErgaleia;retobj.appendChild(btn);break;case &quot;s\x65a\x72\x63h&quot;:var btn=document.createElement(&quot;\x49NP\x55T&quot;);btn.onclick=mygis.UI.toggleToolbar2;btn.id=&quot;tog\x67\x6c\x65\x54ool\x62ar\x32&quot;;btn.type=&quot;b\x75\x74\x74on&quot;;btn.title=tip_btnAnazitisi;retobj.appendChild(btn);break;case &quot;\x6c\x61\x79ers&quot;:var btn=document.createElement(&quot;\x49NPU\x54&quot;);btn.id=&quot;la\x79\x65rsBu\x74t\x6f\x6e&quot;;btn.onclick=function(){bC(&quot;la\x79\x65\x72s&quot;,btn.id);};btn.type=&quot;\x62u\x74t\x6fn&quot;;btn.title=tip_btnLayers;retobj.appendChild(btn);break;case &quot;\x6d\x61ps&quot;:var btn=document.createElement(&quot;I\x4ePU\x54&quot;);btn.id=&quot;\x6da\x70s\x42u\x74t\x6fn&quot;;btn.onclick=function(){bC(&quot;m\x61\x70s&quot;,btn.id);};btn.type=&quot;bu\x74\x74o\x6e&quot;;btn.className=&quot;b\x74nTo\x6f\x6c&quot;;btn.title=tip_btnMaps;retobj.appendChild(btn);retobj.className=&quot;&quot;;break;}return retobj;},createDefaultTools:function(){var retobj=document.createElement(&quot;DI\x56&quot;);retobj.setAttribute(&quot;\x63l\x61ss&quot;,&quot;\x64ef\x61ultT\x6f\x6fl\x73&quot;);retobj.className=&quot;\x64efau\x6c\x74\x54oo\x6cs&quot;;var ctrl=mygis.Map.createTool(&quot;\x65\x64\x69\x74mode&quot;);ctrl.id=&quot;\x65\x64it\x6dod\x65&quot;;ctrl.childNodes[0].title=tip_editmode;retobj.appendChild(ctrl.childNodes[0]);var btnReset=document.createElement(&quot;\x49NP\x55T&quot;);btnReset.id=&quot;bt\x6e\x52es\x65\x74&quot;;btnReset.type=&quot;b\x75\x74\x74on&quot;;btnReset.setAttribute(&quot;c\x6c\x61ss&quot;,&quot;b\x74nTo\x6f\x6c&quot;);btnReset.setAttribute(&quot;\x63\x6c\x61\x73sName&quot;,&quot;bt\x6eT\x6f\x6fl&quot;);btnReset.onclick=mygis.Map.clearMap;btnReset.title=tip_trash;retobj.appendChild(btnReset);return retobj;},createTool:function(what){var retobj=document.createElement(&quot;D\x49V&quot;);switch(what){case &quot;t\x69tl\x65&quot;:retobj.setAttribute(&quot;\x63las\x73&quot;,&quot;t\x69\x74leC\x6fn\x74\x61ine\x72&quot;);retobj.setAttribute(&quot;c\x6cas\x73N\x61m\x65&quot;,&quot;t\x69t\x6c\x65Co\x6et\x61\x69ner&quot;);break;case &quot;\x73e\x61\x72ch&quot;:retobj.setAttribute(&quot;\x63l\x61ss&quot;,&quot;sear\x63h\x43o\x6e\x74\x61i\x6ee\x72&quot;);retobj.setAttribute(&quot;\x63l\x61\x73s\x4eame&quot;,&quot;s\x65\x61r\x63\x68\x43onta\x69\x6eer&quot;);var btn=document.createElement(&quot;i\x6epu\x74&quot;);btn.type=&quot;\x74e\x78t&quot;;btn.id=&quot;\x73ea\x72\x63\x68Btn&quot;;btn.value=msg_searchPrompt;btn.onfocus=function(){if(btn.value==msg_searchPrompt){btn.value=&quot;&quot;;}};btn.onblur=function(){if(btn.value==&quot;&quot;){btn.value=msg_searchPrompt;}};btn.onkeypress=mygis.V.checkKeypress;break;case &quot;e\x64\x69t\x6d\x6fde&quot;:var btn=document.createElement(&quot;in\x70u\x74&quot;);btn.type=&quot;\x62u\x74t\x6fn&quot;;btn.id=what+&quot;\x42\x75\x74ton&quot;;btn.setAttribute(&quot;\x63\x6cass&quot;,&quot;bt\x6e\x54\x6fol&quot;);btn.setAttribute(&quot;c\x6cassN\x61\x6d\x65&quot;,&quot;bt\x6e\x54\x6fol&quot;);btn.onclick=function(){mygis.UI.toggleEditMode();};break;case &quot;\x70ol\x79g\x6fn&quot;:var btn=document.createElement(&quot;\x69n\x70ut&quot;);btn.type=&quot;\x62\x75\x74ton&quot;;btn.id=what+&quot;\x42u\x74t\x6fn&quot;;btn.setAttribute(&quot;\x63l\x61ss&quot;,&quot;\x62t\x6eTo\x6fl\x20&quot;+btn.id);btn.setAttribute(&quot;\x63l\x61s\x73N\x61me&quot;,&quot;bt\x6e\x54\x6f\x6fl &quot;+btn.id);btn.onmouseup=function(){clearTimeout(extraToolsTimer);mygis.UI.setTool(what,this);};break;default:var btn=document.createElement(&quot;i\x6e\x70ut&quot;);btn.type=&quot;\x62\x75\x74ton&quot;;btn.id=what+&quot;But\x74\x6f\x6e&quot;;btn.setAttribute(&quot;cla\x73\x73&quot;,&quot;\x62tn\x54\x6fol\x20&quot;+btn.id);btn.setAttribute(&quot;cl\x61\x73\x73Na\x6de&quot;,&quot;\x62tnT\x6f\x6fl\x20&quot;+btn.id);switch(what){case &quot;i\x6ef\x6f&quot;:btn.onclick=mygis.UI.slideMe2;break;case &quot;k\x6dl&quot;:btn.onclick=mygis.UI.slideMe;break;case &quot;p\x6flyg\x6f\x6eC\x69rc\x6c\x65&quot;:btn.onmousedown=function(){filledMode=4;document.getElementById(&quot;\x70oly\x67\x6f\x6eB\x75tt\x6fn&quot;).style.backgroundImage=&quot;\x75\x72l(&quot;+appPath+&quot;\x2f\x49\x6d\x61ges\x2fcircle\x5ffi\x6c\x6c.\x70n\x67\x29&quot;;};break;case &quot;p\x6fl\x79gonR\x65\x63\x74an\x67\x6ce&quot;:btn.onmousedown=function(){filledMode=5;document.getElementById(&quot;po\x6cyg\x6f\x6eBu\x74\x74o\x6e&quot;).style.backgroundImage=&quot;\x75\x72l(&quot;+appPath+&quot;\x2f\x49m\x61ges\x2frec\x74\x61\x6egl\x65_fill\x2e\x70\x6e\x67)&quot;;};break;case &quot;p\x6f\x6cy\x67on\x31&quot;:btn.onmousedown=function(){filledMode=2;document.getElementById(&quot;p\x6f\x6cygo\x6eB\x75t\x74\x6fn&quot;).style.backgroundImage=&quot;\x75rl\x28&quot;+appPath+&quot;\x2f\x49m\x61g\x65s&#x2F;polyg\x6f\x6e\x5ffil\x6c.p\x6e\x67\x29&quot;;};break;default:btn.onmouseup=function(){mygis.UI.setTool(what,this);};break;}break;}if(what!=&quot;\x74i\x74le&quot;){retobj.appendChild(btn);}return retobj;},createDropDownList:function(sender){var newdiv=document.createElement(&quot;d\x69v&quot;);newdiv.setAttribute(&quot;\x63l\x61ss&quot;,&quot;\x64\x72opd\x6f\x77nPo\x6cy\x67o\x6es&quot;);newdiv.setAttribute(&quot;\x63\x6cassN\x61\x6de&quot;,&quot;d\x72\x6fp\x64\x6fwnP\x6fly\x67on\x73&quot;);newdiv.onmouseout=function(e){var targ;var ctrl=document.getElementById(&quot;pr\x6f\x62le\x6dat\x69c\x62\x75t\x74o\x6e&quot;);if(mygis.V.isMouseLeaveOrEnter(e,newdiv)){while(ctrl.childNodes[1]){ctrl.removeChild(ctrl.childNodes[1]);}}};var btn1=mygis.Map.createTool(&quot;\x70ol\x79\x67on\x43ir\x63l\x65&quot;);var btn2=mygis.Map.createTool(&quot;\x70o\x6c\x79\x67onRe\x63tan\x67l\x65&quot;);var btn3=mygis.Map.createTool(&quot;\x70ol\x79\x67\x6fn1&quot;);newdiv.appendChild(btn1);newdiv.appendChild(btn2);newdiv.appendChild(btn3);sender.parentNode.appendChild(newdiv);},styleButton:function(){$(&quot;\x23\x65d\x69t\x6d\x6f\x64eBut\x74on&quot;).button();},showAddress:function(address){if(geocoder){geocoder.geocode({&quot;add\x72e\x73\x73&quot;:address},function(results){if(!results){alert(address+msg_errAddressNotFound);}else{var mapZoom=digimap.getZoom();var point=results[0].geometry.location;digimap.setCenter(point,mapZoom);mygis.O.createmarker(point);var previousmode=drawMode;drawMode=3;drawMode=previousmode;}});}},clearMap:function(){try{mygis.Map.deleteOverlays();mygis.Map.clearSelection();}catch(Error){}mygis.UI.clearCosmetic();cur=0;plmcur=0;placemarks=[];polyPoints=[];dirpointstart=null;dirpointend=null;waypts=[];destinations=[];},clearSelection:function(initialLoad){selectionLayer.removeAllFeatures();infoWindows=[];if(!infoWindowInitialized){bG();}if(initialLoad){$(&quot;\x23in\x66\x6fL\x65ftL\x69s\x74&quot;).jqxListBox({source:layerSource,displayMember:&#x27;lay\x65\x72N\x41M\x45&#x27;,valueMember:&#x27;l\x61\x79\x65rID&#x27;});}},deleteOverlays:function(){var layer;var i=0;var foundOne=false;while(i&lt;digimap.getNumLayers()){layer=digimap.layers[i];layer.events.remove(&quot;l\x6fad\x65n\x64&quot;);if(!(layer.isBaseLayer||layer.name==&quot;\x43\x6fsm\x65\x74ic \x4ca\x79er&quot;||layer.name==&quot;S\x65l\x65ct\x69\x6f\x6e L\x61ye\x72&quot;)){try{layer.destroy(false);}catch(err){}}else{i++;}}},selectObject:function(index){if(digimapOverlays[index].overlaytype==&quot;m\x61\x72k\x65r&quot;){digimapOverlays[index].setAnimation(google.maps.Animation.BOUNCE);}else{mygis.O.H.setLayerPreviousOpts(index);mygis.UI.flashPolyshape(digimapOverlays[index],parseInt(digimapOverlays[index].strokeOpacity));}},deselectObject:function(index){if(digimapOverlays[index].overlaytype==&quot;\x6d\x61rk\x65r&quot;){digimapOverlays[index].setAnimation(null);}else{if(digimapOverlays[index].flashTimer){clearTimeout(digimapOverlays[index].flashTimer);}digimapOverlays[index].setOptions({strokeOpacity:digimapOverlays[index].previousStrokeOpacity});}},getMapServerLayer:function(layername,map,mapExtent){var retvalue;var extentArray=mapExtent.split(&quot;,&quot;);retvalue=new OpenLayers.Layer.WMS(layername,&quot;&#x2F;mapse\x72\x76\x65r\x2fw\x6d\x73&quot;,{layers:layername,EXCEPTIONS:&#x27;\x42L\x41NK&#x27;,CRS:&#x27;\x45PS\x47:4\x332\x36&#x27;,FORMAT:&#x27;\x69\x6d\x61ge\x2fpng&#x27;,tiled:true,&quot;t\x72\x61\x6esp\x61ren\x74&quot;:&quot;t\x72u\x65&quot;,VERSION:&quot;\x31.\x31.1&quot;},{&#x27;\x69\x73B\x61se\x4c\x61yer&#x27;:false,&#x27;a\x6cp\x68a&#x27;:true,maxExtent:new OpenLayers.Bounds(-180.000000,-90.000000,180.000000,90.000000),singleTile:true,ratio:1,transitionEffect:&#x27;\x72esi\x7a\x65&#x27;,buffer:2,attribution:strings.Coding.badAttribution});return retvalue;},infoRequest:function(evt){var x=evt.request;},markSelectionPoint:function(point,eraseAll){if(eraseAll){selectionLayer.removeAllFeatures();}if(point){var defaultPointStyle=OpenLayers.Util.applyDefaults(defaultPointStyle,OpenLayers.Feature.Vector.style[&#x27;t\x65m\x70ora\x72\x79&#x27;]);var markerPoint=new OpenLayers.Geometry.Point(point.lon,point.lat);var markerFeature=new OpenLayers.Feature.Vector(markerPoint,null,defaultPointStyle);defaultPointStyle.externalGraphic=&quot;\x2fDesk\x74\x6f\x70M\x6f\x64\x75les&#x2F;A\x56\x4dap.\x4da\x70\x44i\x67i\x74ize\x72_v2&#x2F;I\x6dag\x65\x73\x2f\x74ar\x67\x65t2\x2ep\x6e\x67&quot;;defaultPointStyle.graphicWidth=64;defaultPointStyle.graphicHeight=64;defaultPointStyle.graphicOpacity=1;selectionLayer.addFeatures(markerFeature);}},layerHasProperty:function(name,property){var retvalue=false;var i=0;var found=false;var checkitem;while(!found&amp;&amp;i&lt;layerSource.records.length){checkitem=layerSource.records[i];if(checkitem.layerTABLE==name){found=true;}else{i++;}}if(found){switch(property){case &quot;s\x65\x6c\x65c\x74ab\x6ce&quot;:retvalue=checkitem.Selectable;break;case &quot;\x65di\x74ab\x6c\x65&quot;:retvalue=checkitem.Editable;break;case &quot;\x6co\x63ke\x64&quot;:retvalue=checkitem.Locked;break;}}return retvalue;},showInfo:function(evt){var dump=evt.text;var parts=dump.split(&quot;\x3c\x2fhtml\x3e&quot;);var lonlat=digimap.getLonLatFromPixel(evt.xy);mygis.Map.markSelectionPoint(lonlat,true);var realText;var layernames=[];infoWindows=[];$(&quot;#in\x66\x6fRi\x67\x68tG\x72\x69d&quot;).hide();$(&quot;\x23i\x6efoL\x65f\x74Li\x73\x74&quot;).hide();for(var i=0;i&lt;parts.length-1;i++){var startIndex=parts[i].indexOf(&quot;\x3ctabl\x65\x3e&quot;);var endIndex=parts[i].indexOf(&quot;&lt;\x2f\x74a\x62l\x65&gt;&quot;)+8;var layerIDs=&quot;&quot;;var layername;var featuresFound=0;realText=parts[i].substring(startIndex,endIndex).trim();var jTable=$(realText);var jRows=jTable.find(&quot;t\x72&quot;);jRows.each(function(i,v){var cells=$(v).find(&quot;\x74d&quot;);if(i==0){layername=$($(v).find(&quot;\x74d&quot;)[0]).html();layernames.push(layername);}if(i&gt;0){layerIDs+=&quot;,&quot;;}layerIDs+=$(cells[2]).html();featuresFound+=1;});var myurl=&quot;&#x2F;\x6dg\x72\x65q.\x61spx\x3fqtype\x3dG\x65tF\x65atu\x72\x65\x4ci\x73t\x26q\x43o\x6e\x74e\x6et\x73\x3d&quot;+escape(layername+&quot;$&quot;+layerIDs);var prevText=layernames[layernames.length-1];layernames[layernames.length-1]={};layernames[layernames.length-1].text=prevText;layernames[layernames.length-1].dataurl=myurl;}$(&quot;\x23\x62o\x74\x74o\x6dTa\x62C\x6f\x6etain\x65r&quot;).jqxTabs(&#x27;\x73e\x6cec\x74&#x27;,1);if(!infoWindowInitialized){bG();}var qItem={};qItem.text=strings.Info.infoAt+lonlat.lon+&quot; ,\x20&quot;+lonlat.lat;ad(qItem.text);qItem.value= -1;qItem.isInitialized=true;qItem.linkedResults=layernames;qItem.isDBQuery=false;qItem.centerPoint=lonlat;querySource.push(qItem);var source={localdata:querySource,datatype:&quot;\x6co\x63al&quot;,datafields:[{name:&#x27;\x74ex\x74&#x27;},{name:&#x27;va\x6c\x75e&#x27;},{name:&#x27;isIn\x69\x74\x69a\x6ciz\x65\x64&#x27;},{name:&#x27;l\x69nke\x64Re\x73\x75\x6ct\x73&#x27;},{name:&#x27;\x69s\x44BQu\x65r\x79&#x27;}]};var dataAdapter=new $.jqx.dataAdapter(source,{async:false});dataAdapter.dataBind();var leftList=$(&quot;\x23i\x6ef\x6fL\x65\x66tLis\x74&quot;);leftList.die();leftList.jqxListBox({source:dataAdapter,displayMember:&quot;\x74e\x78t&quot;,valueMember:&quot;\x76al\x75e&quot;});leftList.show();leftList.live(&#x27;\x73ele\x63\x74&#x27;,bc);leftList.live(&#x27;\x63lic\x6b&#x27;,bk);var itemCount=leftList.jqxListBox(&#x27;\x67etIt\x65\x6d\x73&#x27;).length;leftList.jqxListBox(&#x27;\x73el\x65c\x74\x49nde\x78&#x27;,itemCount-1);},showInfo2:function(evt){var dump=evt.text;var parts=dump.split(&quot;\x3c&#x2F;\x74\x61\x62le&gt;&quot;);var lonlat=digimap.getLonLatFromPixel(evt.xy);mygis.Map.markSelectionPoint(lonlat,true);var realText;var layernames=[];infoWindows=[];$(&quot;#i\x6ef\x6fR\x69\x67h\x74\x47rid&quot;).hide();$(&quot;#in\x66\x6fLe\x66\x74\x4ci\x73t&quot;).hide();for(var i=0;i&lt;parts.length-1;i++){var startIndex=parts[i].indexOf(&quot;\x3ct\x61bl\x65&quot;);if(startIndex&gt; -1){var layerIDs=&quot;&quot;;var layername;var featuresFound=0;realText=parts[i].substring(startIndex).trim()+&quot;&lt;\x2fta\x62\x6ce\x3e&quot;;var jTable=$(realText);var jRows=jTable.find(&quot;t\x72&quot;);layername=jTable.find(&#x27;\x63a\x70t\x69on&#x27;).html();if(mygis.Map.layerHasProperty(layername,&quot;s\x65l\x65cta\x62\x6c\x65&quot;)){layernames.push(layername);jRows.each(function(i,v){var cells=$(v).find(&quot;t\x64&quot;);if(i&gt;=1){if(i&gt;1){layerIDs+=&quot;,&quot;;}layerIDs+=$(cells[1]).html();featuresFound+=1;}});var myurl=&quot;&#x2F;mg\x72\x65q.\x61spx\x3fqty\x70e\x3d\x47\x65\x74\x46\x65at\x75reL\x69s\x74&amp;\x71C\x6f\x6ete\x6e\x74s=&quot;+escape(layername+&quot;$&quot;+layerIDs);var prevText=layernames[layernames.length-1];layernames[layernames.length-1]={};layernames[layernames.length-1].text=prevText;layernames[layernames.length-1].dataurl=myurl;}}}$(&quot;\x23bott\x6fm\x54a\x62Con\x74a\x69\x6e\x65\x72&quot;).jqxTabs(&#x27;\x73e\x6cec\x74&#x27;,1);if(!infoWindowInitialized){bG();}var qItem={};qItem.text=strings.Info.infoAt+lonlat.lon+&quot; \x2c &quot;+lonlat.lat;ad(qItem.text);qItem.value= -1;qItem.isInitialized=true;qItem.linkedResults=layernames;qItem.isDBQuery=false;qItem.centerPoint=lonlat;querySource.push(qItem);var source={localdata:querySource,datatype:&quot;\x6co\x63al&quot;,datafields:[{name:&#x27;\x74e\x78t&#x27;},{name:&#x27;val\x75\x65&#x27;},{name:&#x27;\x69sIn\x69\x74\x69al\x69\x7aed&#x27;},{name:&#x27;li\x6eke\x64\x52\x65sul\x74\x73&#x27;},{name:&#x27;\x69sDB\x51\x75\x65ry&#x27;}]};var dataAdapter=new $.jqx.dataAdapter(source,{async:false});dataAdapter.dataBind();var leftList=$(&quot;#in\x66o\x4c\x65ft\x4c\x69\x73t&quot;);leftList.die();leftList.jqxListBox({source:dataAdapter,displayMember:&quot;t\x65\x78t&quot;,valueMember:&quot;v\x61\x6cue&quot;});leftList.show();leftList.live(&#x27;se\x6c\x65c\x74&#x27;,bc);leftList.live(&#x27;c\x6cic\x6b&#x27;,bk);var itemCount=leftList.jqxListBox(&#x27;g\x65\x74It\x65m\x73&#x27;).length;leftList.jqxListBox(&#x27;sele\x63t\x49\x6e\x64e\x78&#x27;,itemCount-1);},checkScaleConstraints:function(){var layerlist=$(&#x27;\x23\x6cayer\x73\x4ci\x73t&#x27;);var currentScale=digimap.getScale();var baselayer=digimap.baseLayer;var almostLast=layergridSource.localdata[layergridSource.localdata.length-2].Name==baselayer.name;var mod=almostLast?1: -1;var layerID=almostLast?layergridSource.localdata.length-2:layergridSource.localdata.length-1;var baseIndex=digimap.getLayerIndex(baselayer);var otherlayer=digimap.layers[baseIndex+mod];var switchBackgrounds=false;var atLeastOne=false;if(currentScale&lt;baselayer.mg_MinScale&amp;&amp;currentScale&gt;=otherlayer.mg_MinScale){switchBackgrounds=true;}if(currentScale&gt;baselayer.mg_MaxScale&amp;&amp;(currentScale&lt;=otherlayer.mg_MaxScale||otherlayer.mg_MaxScale== -1)){switchBackgrounds=true;}if(switchBackgrounds){digimap.baseLayer.setVisibility(false);digimap.setBaseLayer(otherlayer);digimap.baseLayer.setVisibility(true);layergridSource.localdata[layerID][&quot;#&quot;]=&quot;-&quot;;layergridSource.localdata[layerID+mod][&quot;#&quot;]=layerSource.records.length+1;layergridSource.localdata[layerID].Visible=false;layergridSource.localdata[layerID+mod].Visible=true;F(strings.MapControl.info_switch_backgrounds);}for(var i=0;i&lt;layerSource.records.length;i++){var item=layerSource.records[i];if(!item.manualVisibility){if(item.hidden){if(currentScale&gt;=item.layerMinScale&amp;&amp;(currentScale&lt;item.layerMaxScale||item.layerMaxScale== -1)){item.hidden=false;atLeastOne=true;}}else{if(currentScale&lt;item.layerMinScale||(currentScale&gt;item.layerMaxScale&amp;&amp;item.layerMaxScale!= -1)){item.hidden=true;atLeastOne=true;}}}}if(atLeastOne){var mapItem=$(&quot;#\x6d\x61psL\x69\x73t&quot;).jqxListBox(&#x27;\x67\x65t\x53e\x6cect\x65\x64It\x65m&#x27;).originalItem;K(mapItem);}if(switchBackgrounds||atLeastOne){mygis.UI.updateLayerGrid();}},getLayerSLD:function(name){OpenLayers.Request.GET({url:&quot;&#x2F;m\x61\x70s\x65rv\x65\x72&#x2F;s\x74yle\x73\x2f&quot;+name+&quot;\x2es\x6cd&quot;,headers:{&quot;Cont\x65\x6et\x2dTy\x70\x65&quot;:&quot;\x74ex\x74&#x2F;x\x6d\x6c;c\x68\x61r\x73e\x74=u\x74\x66-8&quot;},success:function(req){mygis.Map.getLayerSLDComplete(req,name);}});},getLayerSLDComplete:function(req,layername){var format=new OpenLayers.Format.SLD();layerStyles[layername]=format.read(req.responseXML||req.responseText);},combineLayerSLDs:function(){var retvalue={};retvalue.version=&quot;\x31.0.\x30&quot;;retvalue.namedLayers={};var recs=layerSource.records;for(var i=recs.length-1;i&gt;=0;i--){if(!(Boolean(recs[i].hidden)===true)){var name=recs[i].layerTABLE;retvalue.namedLayers[name]=layerStyles[name].namedLayers[name];}}return retvalue;},buildSLDArray:function(){var recs=layerSource.records;layerStyles={};for(var i=recs.length-1;i&gt;=0;i--){if(!(Boolean(recs[i].hidden)===true)){mygis.Map.getLayerSLD(recs[i].layerTABLE);}}},getUniqueGraphics:function(){var retvalue=[];var retitem;$.each(layerStyles,function(i,v){var examine=v.namedLayers[i].userStyles[0];for(var j=0;j&lt;examine.rules.length;j++){var symbolizer=examine.rules[j].symbolizer;for(var name in symbolizer){if(name.toString()==&#x27;Po\x69\x6et&#x27;){if(symbolizer[name].graphic){retitem={};retitem.layer=i;retitem.graphicUrl=symbolizer[name].externalGraphic;retvalue.push(retitem);}}}}});return retvalue;}};mygis.O={H:{polyStyle:{strokeColor:&quot;\x23\x46F0\x3000&quot;,fillColor:&quot;#FF\x30\x30\x300&quot;,strokeOpacity:1,fillOpacity:0.5,strokeWidth:3},lineStyle:{color:&quot;#\x46F00\x30\x30&quot;,width:3,opacity:1},pointStyle:{icon:&quot;&#x2F;\x44\x65\x73k\x74\x6f\x70\x4do\x64ules\x2fA\x56Map.\x4da\x70\x44\x69\x67iti\x7ae\x72&#x2F;\x49\x6da\x67es&#x2F;S\x74y\x6ces\x2fma\x72k\x65\x72\x2fl\x6fc\x61\x74ion.\x70ng&quot;,size:32,defaultIcon:&quot;\x2fDes\x6bt\x6fpMod\x75l\x65s\x2f\x41VM\x61\x70\x2e\x4dap\x44ig\x69t\x69\x7aer\x2fI\x6da\x67es\x2fS\x74yles\x2f\x6da\x72k\x65r\x2fl\x6f\x63\x61ti\x6f\x6e.\x70ng&quot;},setLayerPreviousOpts:function(e,force){if(!digimapOverlays[e].previousStrokeColor||force){digimapOverlays[e].previousStrokeColor=digimapOverlays[e].strokeColor;}if(!digimapOverlays[e].previousStrokeWeight||force){digimapOverlays[e].previousStrokeWeight=digimapOverlays[e].strokeWeight;}if(!digimapOverlays[e].previousStrokeOpacity||force){digimapOverlays[e].previousStrokeOpacity=digimapOverlays[e].strokeOpacity;}},getOLStyle:function(type){var retvalue;switch(type){case &#x27;p\x6fi\x6et&#x27;:var defaultPointStyle=OpenLayers.Util.applyDefaults(defaultPointStyle,OpenLayers.Feature.Vector.style[&#x27;temp\x6f\x72\x61\x72y&#x27;]);defaultPointStyle.externalGraphic=mygis.O.H.pointStyle.icon;defaultPointStyle.graphicWidth=mygis.O.H.pointStyle.size;defaultPointStyle.graphicHeight=mygis.O.H.pointStyle.size;defaultPointStyle.graphicOpacity=1;defaultPointStyle.graphicXOffset= -16;defaultPointStyle.graphicYOffset= -32;retvalue=defaultPointStyle;break;case &#x27;li\x6e\x65&#x27;:var defaultLineStyle=OpenLayers.Util.applyDefaults(defaultLineStyle,OpenLayers.Feature.Vector.style[&#x27;\x74e\x6dpor\x61\x72y&#x27;]);defaultLineStyle.strokeColor=mygis.O.H.lineStyle.color;defaultLineStyle.strokeOpacity=mygis.O.H.lineStyle.opacity;defaultLineStyle.strokeWidth=mygis.O.H.lineStyle.width;defaultLineStyle.strokeDashstyle=&quot;lo\x6egd\x61\x73\x68do\x74&quot;;retvalue=defaultLineStyle;break;case &#x27;poly\x67\x6f\x6e&#x27;:var defaultPolyStyle=OpenLayers.Util.applyDefaults(defaultPolyStyle,OpenLayers.Feature.Vector.style[&#x27;te\x6dp\x6fr\x61\x72y&#x27;]);defaultPolyStyle.fillColor=mygis.O.H.polyStyle.fillColor;defaultPolyStyle.fillOpacity=mygis.O.H.polyStyle.fillOpacity;defaultPolyStyle.strokeColor=mygis.O.H.polyStyle.strokeColor;defaultPolyStyle.strokeOpacity=mygis.O.H.polyStyle.strokeOpacity;defaultPolyStyle.strokeWidth=mygis.O.H.polyStyle.strokeWidth;retvalue=defaultPolyStyle;break;case &#x27;s\x65l\x65ct\x50\x6flyg\x6f\x6e&#x27;:var defaultPolyStyle=OpenLayers.Util.applyDefaults(defaultPolyStyle,OpenLayers.Feature.Vector.style[&#x27;tem\x70\x6fr\x61r\x79&#x27;]);defaultPolyStyle.strokeColor=&quot;#\x300\x300\x300&quot;;defaultPolyStyle.fillColor=&quot;#\x46F0\x30F\x46&quot;;defaultPolyStyle.strokeOpacity=1;defaultPolyStyle.fillOpacity=0.5;defaultPolyStyle.strokeWidth=0.7;retvalue=defaultPolyStyle;break;case &#x27;\x73el\x65\x63\x74Li\x6ee&#x27;:var defaultLineStyle=OpenLayers.Util.applyDefaults(defaultLineStyle,OpenLayers.Feature.Vector.style[&#x27;\x74\x65mp\x6frar\x79&#x27;]);defaultLineStyle.strokeColor=&quot;\x23FF0\x30\x300&quot;;defaultLineStyle.fillColor=&quot;\x23FF\x300\x300&quot;;defaultLineStyle.strokeOpacity=1;defaultLineStyle.fillOpacity=0.7;defaultLineStyle.strokeWidth=0.7;retvalue=defaultLineStyle;break;case &#x27;\x73el\x65ctP\x6f\x69\x6et&#x27;:var defaultPointStyle=OpenLayers.Util.applyDefaults(defaultPointStyle,OpenLayers.Feature.Vector.style[&#x27;t\x65mpo\x72\x61r\x79&#x27;]);defaultPointStyle.strokeColor=&quot;#0\x300\x300\x30&quot;;defaultPointStyle.fillColor=&quot;#\x30\x30\x30000&quot;;defaultPointStyle.fillOpacity=0.7;retvalue=defaultPointStyle;break;}return retvalue;},getSymbolizer:function(type){var retvalue={};var inner;switch(type){case &quot;Poi\x6e\x74&quot;:inner={};inner.strokeColor=&quot;&quot;;inner.strokeOpacity=1;inner.strokeWidth=1;inner.strokeLinecap=&quot;\x73\x71u\x61re&quot;;inner.fillColor=&quot;#FF\x300\x30\x30&quot;;inner.fillOpacity=1;inner.pointRadius=5;inner.externalGraphic=&quot;&quot;;inner.graphicWidth=16;inner.graphicHeight=16;inner.graphicOpacity=1;inner.graphicXOffset=0;inner.graphicYOffset=0;inner.rotation=0;inner.graphicName=&quot;&quot;;break;case &quot;\x4c\x69ne&quot;:inner={};inner.strokeColor=&quot;\x23\x46\x460000&quot;;inner.strokeOpacity=1;inner.strokeWidth=1;inner.strokeLinecap=&quot;\x73\x71\x75are&quot;;break;case &quot;Po\x6cy\x67\x6fn&quot;:inner={};inner.strokeColor=&quot;\x23F\x46000\x30&quot;;inner.strokeOpacity=1;inner.strokeWidth=1;inner.strokeLinecap=&quot;\x73q\x75a\x72e&quot;;inner.fillColor=&quot;#\x46F0\x300\x30&quot;;inner.fillOpacity=1;break;}retvalue[type]=inner;return retvalue;},createSLD:function(name){var sld={version:&quot;1\x2e\x30.0&quot;,namedLayers:{}};var sldString;var retvalue={};retvalue.name=name;retvalue.userStyles=[];retvalue.userStyles[0]={rules:[]};retvalue.userStyles[0].rules.push(new mygis.O.H.createSLDRule(&quot;&quot;,&quot;\x50o\x69nt&quot;));retvalue.userStyles[0].rules.push(new mygis.O.H.createSLDRule(&quot;&quot;,&quot;L\x69\x6ee&quot;));retvalue.userStyles[0].rules.push(new mygis.O.H.createSLDRule(&quot;&quot;,&quot;Pol\x79\x67\x6fn&quot;));sld.namedLayers[name]=retvalue;return sld;},createSLDRule:function(name,geometryType){var retvalue;var assignedName;if(name){assignedName=name;}else{switch(geometryType){case &quot;Po\x69\x6et&quot;:assignedName=&quot;\x44efa\x75lt r\x75\x6c\x65 \x66\x6f\x72 P\x6fint\x73&quot;;break;case &quot;\x4c\x69ne&quot;:assignedName=&quot;\x44e\x66au\x6ct rul\x65\x20f\x6f\x72\x20Li\x6ee\x73&quot;;break;case &quot;\x50\x6fl\x79gon&quot;:assignedName=&quot;Defa\x75\x6ct \x72\x75le\x20for\x20P\x6fly\x67\x6f\x6e\x73&quot;;break;case &quot;\x54e\x78t&quot;:assignedName=&quot;D\x65\x66\x61ult\x20rule\x20f\x6f\x72\x20la\x62el\x73&quot;;break;default:assignedName=&quot;Def\x61\x75\x6c\x74\x20rule&quot;;}}if(geometryType){var assignedSymbolizer=new mygis.O.H.getSymbolizer(geometryType);retvalue=new OpenLayers.Rule({name:assignedName,title:assignedName,description:&#x27;&#x27;,symbolizer:assignedSymbolizer,filter:mygis.O.H.getSLDFilter(&quot;\x45Q&quot;,&quot;\x47eo\x6d\x65\x74ry&quot;,geometryType)});}else{retvalue=new OpenLayers.Rule({name:assignedName,title:assignedName,description:&#x27;&#x27;});}return retvalue;},getSLDFilter:function(comparison,property,value){var retvalue;var comptype;switch(comparison){case &quot;\x45Q&quot;:comptype=OpenLayers.Filter.Comparison.EQUAL_TO;break;case &quot;L\x49K\x45&quot;:comptype=OpenLayers.Filter.Comparison.LIKE;break;case &quot;\x4eEQ&quot;:comptype=OpenLayers.Filter.Comparison.NOT_EQUAL_TO;break;case &quot;G\x45Q&quot;:comptype=OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO;break;case &quot;G\x54&quot;:comptype=OpenLayers.Filter.Comparison.GREATER_THAN;break;case &quot;\x4cT&quot;:comptype=OpenLayers.Filter.Comparison.LESS_THAN;break;case &quot;\x4cEQ&quot;:comptype=OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO;break;}if(property==&quot;\x47e\x6fm\x65t\x72y&quot;&amp;&amp;value!=&quot;P\x6f\x69nt&quot;){switch(value){case &quot;Pol\x79\x67\x6fn&quot;:retvalue=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR,filters:[new OpenLayers.Filter.Comparison({type:comptype,property:property,value:value}),new OpenLayers.Filter.Comparison({type:comptype,property:property,value:&#x27;Mu\x6ct\x69Po\x6c\x79\x67on&#x27;})]});break;case &quot;L\x69\x6ee&quot;:retvalue=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR,filters:[new OpenLayers.Filter.Comparison({type:comptype,property:property,value:&#x27;Li\x6ee\x53\x74\x72i\x6eg&#x27;}),new OpenLayers.Filter.Comparison({type:comptype,property:property,value:&#x27;Mul\x74i\x4c\x69\x6ee\x53\x74ri\x6eg&#x27;})]});break;}}else{retvalue=new OpenLayers.Filter.Comparison({type:comptype,property:property,value:value});}return retvalue;}},Exporting:{logHeader:function(){var docuname=strings.Export.defaultDocumentTitle;var docudesc=strings.Export.defaultDocumentDescription;var top=&#x27;&lt;?\x78ml\x20v\x65rsio\x6e\x3d&quot;\x31.\x30\x22 \x65n\x63\x6f\x64in\x67=\x22UTF\x2d\x38&quot;\x3f&gt;\n&#x27;+&#x27;\x3c\x6b\x6dl\x20\x78mlns=&quot;ht\x74p\x3a\x2f&#x2F;www.\x6f\x70\x65ng\x69\x73\x2enet\x2fk\x6d\x6c&#x2F;2.\x32\x22\x3e\n&#x27;+&#x27;&lt;Do\x63\x75ment\x3e&lt;n\x61\x6d\x65\x3e&#x27;+docuname+&#x27;&lt;\x2fn\x61me\x3e\n&#x27;+&#x27;&lt;d\x65s\x63r\x69p\x74\x69on\x3e&#x27;+docudesc+&#x27;\x3c&#x2F;\x64es\x63\x72\x69pt\x69on&gt;\n&#x27;;return top;},logStyles:function(){var last=&quot;&quot;;var styles=&quot;&quot;;var style_polygon=new mygis.O.H.polystyle();var style_polyline=new mygis.O.H.linestyle();if(polygonstyles.length&gt;1){for(var i=0;i&lt;polygonstyles.length;i++){if(polygonstyles[i].name!=last){styles+=&#x27;\x3cS\x74\x79l\x65 \x69d=&quot;&#x27;+polygonstyles[i].name+&#x27;\x22&gt;\n&#x27;+&#x27;&lt;\x4cin\x65\x53\x74y\x6c\x65\x3e&lt;co\x6cor&gt;&#x27;+polygonstyles[i].kmlcolor+&#x27;\x3c&#x2F;\x63olo\x72\x3e\x3cwid\x74h\x3e&#x27;+polygonstyles[i].width+&#x27;&lt;\x2fwidth&gt;\x3c&#x2F;\x4ci\x6e\x65\x53\x74yl\x65\x3e\n&#x27;+&#x27;&lt;\x50o\x6cyS\x74yl\x65&gt;&lt;\x63o\x6c\x6fr\x3e&#x27;+polygonstyles[i].kmlfill+&#x27;&lt;&#x2F;c\x6f\x6co\x72\x3e\x3c&#x2F;\x50o\x6cy\x53t\x79le&gt;\n&#x27;+&#x27;&lt;\x2f\x53t\x79l\x65&gt;\n&#x27;;last=polygonstyles[i].name;}}for(i=0;i&lt;polygonstyles.length;i++){if(polylinestyles[i].name!=last){styles+=&#x27;\x3cSt\x79l\x65\x20id\x3d&quot;&#x27;+polylinestyles[i].name+&#x27;\x22&gt;\n&#x27;+&#x27;\x3c\x4cineSt\x79l\x65&gt;\x3c\x63\x6flo\x72&gt;&#x27;+polylinestyles[i].kmlcolor+&#x27;&lt;&#x2F;\x63\x6f\x6cor&gt;\x3c\x77\x69d\x74h&gt;&#x27;+polylinestyles[i].width+&#x27;\x3c\x2fwi\x64th\x3e\x3c\x2fLine\x53ty\x6c\x65&gt;\n&#x27;+&#x27;&lt;&#x2F;S\x74y\x6c\x65\x3e\n&#x27;;last=polylinestyles[i].name;}}}else{var markerIcon;if(mygis.O.H.pointStyle.icon==mygis.O.H.pointStyle.defaultIcon){markerIcon=outsideUrl+mygis.O.H.pointStyle.icon;}else{markerIcon=mygis.O.H.pointStyle.icon;}styles+=&#x27;\x3c\x53t\x79\x6ce i\x64=&quot;m\x61\x72ke\x72S\x74y\x6c\x65&quot;&gt;\n&#x27;+&#x27;\x3cI\x63\x6f\x6eStyle\x3e&lt;sca\x6ce\x3e\x31\x3c\x2f\x73\x63ale&gt;&lt;I\x63\x6f\x6e&gt;&#x27;+&#x27;\x3ch\x72e\x66&gt;&#x27;+markerIcon+&#x27;&lt;&#x2F;\x68\x72\x65f&gt;&#x27;+&#x27;\x3c&#x2F;\x49\x63on&gt;\x3c&#x2F;\x49co\x6eSt\x79l\x65\x3e&#x27;+&#x27;\x3c&#x2F;S\x74\x79l\x65&gt;\n&#x27;+&#x27;\x3cSty\x6ce\x20i\x64\x3d&quot;&#x27;+style_polygon.name+&#x27;\x22&gt;\n&#x27;+&#x27;\x3cL\x69\x6eeSt\x79l\x65&gt;&lt;\x63olo\x72\x3e&#x27;+mygis.V.opacityToHex(mygis.O.H.polyStyle.strokeOpacity)+mygis.V.cutHex(mygis.O.H.polyStyle.strokeColor)+&#x27;\x3c&#x2F;c\x6f\x6c\x6fr&gt;&#x27;+&#x27;\x3cw\x69\x64th&gt;&#x27;+mygis.O.H.polyStyle.strokeWidth+&#x27;&lt;\x2f\x77\x69dth\x3e\x3c\x2fLi\x6eeSty\x6c\x65&gt;\n&#x27;+&#x27;\x3cPo\x6cy\x53\x74\x79\x6c\x65&gt;&lt;colo\x72&gt;&#x27;+mygis.V.opacityToHex(mygis.O.H.polyStyle.fillOpacity)+mygis.V.cutHex(mygis.O.H.polyStyle.fillColor)+&#x27;&lt;&#x2F;\x63o\x6c\x6fr&gt;&lt;\x2fP\x6fl\x79\x53t\x79l\x65&gt;\n&#x27;+&#x27;\x3c\x2f\x53tyl\x65&gt;\n&#x27;+&#x27;\x3cStyle\x20\x69\x64\x3d&quot;&#x27;+style_polyline.name+&#x27;&quot;\x3e\n&#x27;+&#x27;&lt;L\x69n\x65Styl\x65\x3e&lt;\x63ol\x6f\x72\x3e&#x27;+mygis.V.opacityToHex(mygis.O.H.lineStyle.opacity)+mygis.V.cutHex(mygis.O.H.lineStyle.color)+&#x27;\x3c&#x2F;co\x6co\x72\x3e&#x27;+&#x27;&lt;w\x69dt\x68\x3e&#x27;+mygis.O.H.lineStyle.width+&#x27;&lt;&#x2F;wi\x64t\x68&gt;\x3c\x2fL\x69n\x65\x53\x74\x79le&gt;\n&#x27;+&#x27;&lt;\x2f\x53\x74\x79le&gt;\n&#x27;;}return styles;},generateKML:function(){var output=document.getElementById(&quot;KML\x6fu\x74\x70u\x74&quot;);var kml_text;kml_text=mygis.O.Exporting.logHeader();kml_text+=mygis.O.Exporting.logStyles();for(var i=0;i&lt;digimapOverlays.length;i++){var layer=digimapOverlays[i];switch(layer.overlaytype){case &quot;m\x61rk\x65\x72&quot;:var markerheader=&#x27;\x3c\x50l\x61\x63ema\x72k&gt;\n&#x27;+&#x27;&lt;n\x61\x6d\x65&gt;&#x27;+cosmeticList.get_items().getItem(i).get_text()+&#x27;&lt;\x2fn\x61m\x65&gt;\n&#x27;+&#x27;&lt;\x73\x74yle\x55\x72\x6c\x3e#m\x61rk\x65rSt\x79\x6ce\x3c\x2fsty\x6ce\x55rl\x3e\n&#x27;+&#x27;\n\x3c\x50\x6fi\x6e\x74\x3e\n&lt;coordin\x61t\x65\x73&gt;&#x27;;var markerfooter=&#x27;&lt;\x2fcoo\x72di\x6ea\x74e\x73&gt;\n\x3c&#x2F;Po\x69\x6e\x74\x3e\n&lt;&#x2F;Pl\x61\x63\x65m\x61r\x6b&gt;\n&#x27;;var plmtext=&quot;&quot;;lat=layer.getPosition().lat();longi=layer.getPosition().lng();plmtext+=mygis.V.roundVal(longi)+&quot;,&quot;+mygis.V.roundVal(lat)+&quot;,0\x20\n&quot;;kml_text+=markerheader+plmtext+markerfooter;break;case &quot;\x70ol\x79\x6ci\x6ee&quot;:var lineheader=&#x27;\x3cPla\x63em\x61\x72\x6b&gt;\n&#x27;+&#x27;&lt;n\x61\x6d\x65&gt;&#x27;+cosmeticList.get_items().getItem(i).get_text()+&#x27;\x3c&#x2F;na\x6de\x3e\n&#x27;+&#x27;\n&#x27;+&#x27;&lt;\x73tyl\x65U\x72\x6c&gt;#li\x6e\x65c\x6f\x6c\x6fur&lt;&#x2F;s\x74\x79\x6ceU\x72l\x3e\n&#x27;+&#x27;\x3cLi\x6ee\x53trin\x67&gt;\n\x3cc\x6for\x64\x69n\x61\x74\x65s&gt;\n&#x27;;var linefooter=&#x27;&lt;\x2f\x63\x6f\x6fr\x64\x69n\x61te\x73\x3e\n\x3c\x2f\x4cin\x65St\x72\x69ng&gt;\n\x3c\x2fPlacemark\x3e\n&#x27;;var plmtext=&quot;&quot;;var polypath=layer.getPath();for(var j=0;j&lt;polypath.getLength();j++){var point=polypath.getAt(j);var lat=point.lat();var longi=point.lng();plmtext+=mygis.V.roundVal(longi)+&quot;,&quot;+mygis.V.roundVal(lat)+&quot;,&quot;+polygonDepth+&quot; \n&quot;;}kml_text+=lineheader+plmtext+linefooter;break;case &quot;c\x69\x72cl\x65&quot;:break;case &quot;re\x63\x74a\x6egl\x65&quot;:var polygonheader=&#x27;\x3cPl\x61cema\x72\x6b\x3e\n&#x27;;polygonheader+=&#x27;&lt;\x6eam\x65\x3e&#x27;+cosmeticList.get_items().getItem(i).get_text()+&#x27;\x3c&#x2F;n\x61\x6de&gt;\n&#x27;;polygonheader+=&#x27;\x3cs\x74\x79leUrl\x3e\x23r\x61\x6e\x67\x65\x63\x6fl\x6fur&lt;\x2fs\x74y\x6ceUrl&gt;\n&#x27;;polygonheader+=&#x27;&lt;P\x6fly\x67\x6f\x6e&gt;\n&#x27;;polygonheader+=&#x27;&lt;\x6fut\x65r\x42oun\x64aryI\x73&gt;&lt;\x4c\x69\x6eea\x72\x52ing\x3e\x3cc\x6f\x6f\x72\x64i\x6ea\x74e\x73&gt;\n&#x27;;var plmtext=&quot;&quot;;var polygonfooter=&#x27;&lt;&#x2F;\x50ol\x79go\x6e\x3e\n&lt;\x2f\x50la\x63e\x6da\x72\x6b&gt;\n&#x27;;var polygoncoordsend=&quot;&lt;\x2f\x63\x6f\x6frd\x69na\x74e\x73&gt;\x3c\x2fLi\x6eear\x52i\x6e\x67&gt;&lt;\x2fou\x74e\x72\x42\x6fundar\x79I\x73&gt;\n&quot;;var rect=layer.getBounds();var sw=rect.getSouthWest();var ne=rect.getNorthEast();var nw={};nw.lat=function(){return ne.lat();};nw.lng=function(){return sw.lng();};var se={};se.lat=function(){return sw.lat();};se.lng=function(){return ne.lng();};plmtext+=mygis.V.roundVal(nw.lng())+&quot;,&quot;+mygis.V.roundVal(nw.lat())+&quot;,&quot;+polygonDepth+&quot; \n&quot;;plmtext+=mygis.V.roundVal(ne.lng())+&quot;,&quot;+mygis.V.roundVal(ne.lat())+&quot;,&quot;+polygonDepth+&quot; \n&quot;;plmtext+=mygis.V.roundVal(se.lng())+&quot;,&quot;+mygis.V.roundVal(se.lat())+&quot;,&quot;+polygonDepth+&quot; \n&quot;;plmtext+=mygis.V.roundVal(sw.lng())+&quot;,&quot;+mygis.V.roundVal(sw.lat())+&quot;,&quot;+polygonDepth+&quot; \n&quot;;kml_text+=polygonheader+plmtext+polygoncoordsend+polygonfooter;break;case &quot;\x70ol\x79g\x6fn&quot;:var polygonheader=&#x27;\x3c\x50la\x63\x65ma\x72k&gt;\n&#x27;;polygonheader+=&#x27;&lt;\x6ea\x6de\x3e&#x27;+cosmeticList.get_items().getItem(i).get_text()+&#x27;\x3c&#x2F;n\x61me\x3e\n&#x27;;polygonheader+=&#x27;&lt;s\x74y\x6ceU\x72l&gt;\x23ran\x67\x65c\x6flo\x75r\x3c&#x2F;\x73tyl\x65\x55\x72\x6c\x3e\n&#x27;;polygonheader+=&#x27;&lt;Pol\x79\x67\x6fn\x3e\n&#x27;;polygonheader+=&#x27;\x3cou\x74\x65\x72Bou\x6ed\x61r\x79Is\x3e&lt;\x4ci\x6e\x65ar\x52\x69ng\x3e&lt;coor\x64\x69\x6e\x61te\x73&gt;\n&#x27;;var plmtext=&quot;&quot;;var polygonfooter=&#x27;&lt;\x2fPo\x6c\x79g\x6f\x6e&gt;\n&lt;\x2fPl\x61c\x65m\x61r\x6b&gt;\n&#x27;;var polygoncoordsend=&quot;&lt;&#x2F;coo\x72\x64inates&gt;\x3c\x2fL\x69n\x65\x61r\x52i\x6e\x67&gt;\x3c\x2fo\x75\x74\x65\x72Bo\x75n\x64ary\x49s\x3e\n&quot;;var polypath=layer.getPath();for(var j=0;j&lt;polypath.getLength();j++){var point=polypath.getAt(j);var lat=point.lat();var longi=point.lng();plmtext+=mygis.V.roundVal(longi)+&quot;,&quot;+mygis.V.roundVal(lat)+&quot;,&quot;+polygonDepth+&quot; \n&quot;;}kml_text+=polygonheader+plmtext+polygoncoordsend+polygonfooter;break;}}kml_text+=&quot;&lt;&#x2F;\x44\x6f\x63\x75\x6de\x6et\x3e\n&lt;&#x2F;kml\x3e&quot;;output.value=kml_text;},layerToJSON:function(layer){var retvalue=&quot;&quot;;var features=layer.features;var writer=new OpenLayers.Format.GeoJSON();retvalue=writer.write(features);return retvalue;},layerToWKT:function(layer){var retvalue=&quot;&quot;;var features=layer.features;var writer=new OpenLayers.Format.WKT();for(var i=0;i&lt;features.length;i++){if(i&gt;0){retvalue+=&quot;$&quot;;}retvalue+=writer.write(features[i]);}return retvalue;},saveDigitizing:function(){var elem=document.getElementById(&#x27;\x6da\x70A\x63ti\x6f\x6e_Sav\x65&#x27;);if(!elem.ex_HasClassName(&#x27;\x64i\x73abl\x65\x64&#x27;)){mygis.O.Exporting.attachInfoToFeature();$(&#x27;#edi\x74\x61\x62\x6ceI\x6e\x66o&#x27;).dialog(&#x27;c\x6cos\x65&#x27;);var layername=&#x27;\x79\x61\x73\x5fP\x41TR\x41_2011_\x305\x5f\x312&#x27;;var postObject={};var featuresAttr=&quot;&quot;;$.each(cosmeticLayer.features,function(i,v){if(i&gt;0){featuresAttr+=&quot;$&quot;;}var counter=0;$.each(v.attributes,function(j,vv){if(counter&gt;0){featuresAttr+=&quot;#&quot;;}featuresAttr+=j.toString()+&quot;%\x325&quot;+vv.toString();counter+=1;});});postObject[&quot;\x6c\x61ye\x72nam\x65&quot;]=layername;postObject[&quot;\x66eatu\x72e\x41\x74t\x72&quot;]=featuresAttr;postObject[&quot;\x67eom\x65t\x72\x79&quot;]=mygis.O.Exporting.layerToWKT(cosmeticLayer);postObject[&quot;c\x72s&quot;]=digimap.projection;postObject[&quot;\x6det\x68\x6fd&quot;]=&quot;in\x73\x65\x72t&quot;;$.ajax({type:&#x27;\x50O\x53T&#x27;,url:&quot;\x2fmgreq\x2ea\x73\x70x?\x71t\x79p\x65=Sa\x76\x65\x44igi\x74i\x7ai\x6e\x67&quot;,data:postObject,success:mygis.UI.saveDigiResults});}else{}},updateStyle:function(){var postObject={};postObject[&quot;l\x61y\x65r&quot;]=layername;postObject[&quot;sl\x64&quot;]=null;$.ajax({type:&#x27;P\x4f\x53T&#x27;,url:&quot;\x2fmg\x72eq.\x61sp\x78?\x71t\x79\x70\x65\x3dupd\x61\x74eSt\x79l\x65&quot;,data:postObject,success:null});},attachInfoToFeature:function(){var properties=cosmeticLayer.features[cosmeticLayer.features.length-1].attributes;var editwindow=$(&quot;\x23\x65d\x69t\x61b\x6ce\x49nfo&quot;);var fieldsToAttach=editwindow.find(&quot;.inf\x6f\x46\x69\x65lds\x20s\x70\x61n&quot;);var fieldValues=editwindow.find(&quot;.i\x6efo\x46i\x65\x6c\x64s\x20\x69n\x70ut&quot;);$.each(fieldValues,function(i,v){properties[$(fieldsToAttach[i]).html()]=v.value;v.value=&quot;&quot;;});F(&quot;N\x65w o\x62\x6a\x65\x63t \x74\x65mpo\x72\x61r\x69ly a\x64\x64ed t\x6f\x20la\x79e\x72\x20&quot;+&quot;\x79\x61s\x5f\x50ATRA\x5f\x3201\x31\x5f0\x35_12&quot;);}},Importing:{loadKML:function(kmlstring,layername){var realParse=function(nodes,options){};var format=new OpenLayers.Format.KML({&#x27;\x69n\x74e\x72\x6e\x61l\x50roje\x63tio\x6e&#x27;:digimap.baseLayer.projection,&#x27;\x65xte\x72\x6eal\x50\x72\x6f\x6aecti\x6fn&#x27;:new OpenLayers.Projection(&quot;\x45\x50S\x47:4\x3326&quot;),&#x27;\x65\x78\x74rac\x74Sty\x6c\x65s&#x27;:true,&#x27;e\x78tr\x61ct\x41\x74tr\x69b\x75\x74e\x73&#x27;:true});var newLayer=new OpenLayers.Layer.Vector(layername);setTimeout(function(){newLayer.addFeatures(format.read(kmlstring));},25);digimap.addLayers([newLayer]);},copyKmlRef:function(){var added_kml;if(geoXml){added_kml=geoXml.docs[geoXml.docs.length-1];}if(added_kml){if(added_kml.placemarks){for(var i=0;i&lt;added_kml.placemarks.length;i++){var imageurl;var ovtype;var item=added_kml.placemarks[i];var recognized=false;if(item.Point){item.marker.overlaytype=&quot;\x6d\x61\x72ker&quot;;mygis.UI.increaseMarkers(item.marker);google.maps.event.addListener(item.marker,&#x27;r\x69\x67h\x74c\x6cic\x6b&#x27;,mygis.UI.objRClickHandler);}if(item.Polygon||item.LineString){if(item.Polygon){polyShape=item.polygon;polyShape.overlaytype=&quot;\x70ol\x79go\x6e&quot;;mygis.UI.increasePolygons(polyShape);}if(item.LineString){polyShape=item.polyline;polyShape.overlaytype=&quot;p\x6fl\x79\x6cin\x65&quot;;mygis.UI.increasePolylines(polyShape);}google.maps.event.addListener(polyShape,&#x27;ri\x67\x68\x74cl\x69c\x6b&#x27;,mygis.UI.objRClickHandler);}}}}}},mapClick:function(section){cmenu.close();var ctrl=document.getElementById(&quot;proble\x6dati\x63\x62\x75\x74\x74\x6f\x6e&quot;);while(ctrl.childNodes[1]){ctrl.removeChild(ctrl.childNodes[1]);}clickedPoint=section.latLng;if(!editMode){}else{if(drawMode==4){mygis.O.drawDirections(clickedPoint);}}},drawDirections:function(point){if(dirpointstart==null){dirpointstart=point;plmcur+=1;var dirline=plmcur;directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true,preserveViewport:true});}else{directionsDisplay.setOptions({polylineOptions:{strokeColor:mygis.O.H.lineStyle.color,strokeOpacity:mygis.O.H.lineStyle.opacity,strokeWeight:mygis.O.H.lineStyle.width}});if(dirpointend==0){var request={origin:dirpointstart,destination:point,travelMode:google.maps.DirectionsTravelMode.DRIVING};oldpoint=point;destinations.push(request.destination);mygis.O.calcRoute(request);dirpointend=1;dircountstart=plmcur+1;}else{if(oldpoint)waypts.push({location:oldpoint,stopover:true});request={origin:dirpointstart,destination:point,waypoints:waypts,travelMode:google.maps.DirectionsTravelMode.DRIVING};oldpoint=point;destinations.push(request.destination);mygis.O.calcRoute(request);}}},calcRoute:function(request){directionsService.route(request,mygis.O.RenderCustomDirections);},RenderCustomDirections:function(response,status){if(status==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(response);polyPoints=[];pointsArray=[];pointsArrayKml=[];markersArray=[];markersArrayKml=[];addresssArray=[];var result=directionsDisplay.getDirections().routes[0];for(var i=0;i&lt;result.overview_path.length;i++){polyPoints.push(result.overview_path[i]);}polyShape=new google.maps.Polyline({&quot;p\x61t\x68&quot;:polyPoints,&quot;\x73\x74r\x6f\x6beC\x6flor&quot;:mygis.O.H.lineStyle.color,&quot;\x73tro\x6beW\x65\x69gh\x74&quot;:mygis.O.H.lineStyle.width,&quot;s\x74r\x6fke\x4f\x70ac\x69t\x79&quot;:mygis.O.H.lineStyle.opacity});polyShape.overlaytype=&quot;\x70ol\x79li\x6e\x65&quot;;polyShape.setMap(digimap);google.maps.event.addListener(polyShape,&#x27;ri\x67\x68t\x63\x6c\x69ck&#x27;,mygis.UI.objRClickHandler);if(polyPoints.length&gt;1){mygis.UI.increasePolylines(polyShape);}}else alert(status);},checkPolyBuffer:function(gevent,caller){if(real_editMode&amp;&amp; !leftButtonDown){digiOutLoc=gevent.latLng;google.maps.event.addListener(digimap,&quot;\x6dou\x73\x65\x6dove&quot;,function(gevent2){if(real_editMode&amp;&amp; !leftButtonDown){var worldCoordinate1=digimap.getProjection().fromLatLngToPoint(digiOutLoc);var pixel1=new google.maps.Point(worldCoordinate1.x*Math.pow(2,digimap.getZoom()),worldCoordinate1.y*Math.pow(2,digimap.getZoom()));var worldCoordinate2=digimap.getProjection().fromLatLngToPoint(gevent2.latLng);var pixel2=new google.maps.Point(worldCoordinate2.x*Math.pow(2,digimap.getZoom()),worldCoordinate2.y*Math.pow(2,digimap.getZoom()));var sq_distance=Math.pow(pixel2.x-pixel1.x,2)+Math.pow(pixel2.y-pixel1.y,2);if(Math.sqrt(sq_distance)&gt;20){google.maps.event.clearListeners(digimap,&quot;\x6do\x75se\x6d\x6fve&quot;);caller.stopEdit();caller.pk_runningedit=false;}}});}},addEditListeners:function(theshape){google.maps.event.addListener(theshape,&quot;\x6dous\x65ov\x65\x72&quot;,function(gevent){var alreadyRun= !(typeof(theshape.pk_runningedit)===&quot;un\x64e\x66i\x6ee\x64&quot;|| !theshape.pk_runningedit);if(real_editMode&amp;&amp; !alreadyRun){theshape.runEdit(true);theshape.pk_runningedit=true;}});google.maps.event.addListener(theshape,&quot;m\x6f\x75se\x6f\x75t&quot;,function(gevent){if(real_editMode){mygis.O.checkPolyBuffer(gevent,theshape);return false;}else{theshape.pk_runningedit=false;}});},pushpoint:function(point){var normalMode=true;var holemode=false;if(normalMode===true){if(holemode){holePoints.push(point);}else{polyPoints.push(point);}mygis.O.drawCoordinates();}else{if(circlemode)clickforCircle(point);if(rectanglemode)collectrectanglepoints(point);if(option1mode)option1(point);if(option2mode)option2(point);}},createstyleobjects:function(){var polygonstyle=new mygis.O.H.polystyle();polygonstyles.push(polygonstyle);var polylinestyle=new mygis.O.H.linestyle();polylinestyles.push(polylinestyle);},createplacemarkobject:function(){var thisplacemark=new mygis.O.H.placemarkobject();placemarks.push(thisplacemark);}};mygis.UI={togglePointMode:function(elem){var checked;if(elem){checked=$(elem);}else{checked=$(&#x27;i\x6e\x70u\x74\x5b\x6e\x61\x6de=Po\x69n\x74Mo\x64e\x5d:ch\x65c\x6bed&#x27;,&#x27;\x23p\x6fi\x6etM\x6f\x64eCo\x6e\x74a\x69n\x65r&#x27;);}var checkMode=checked.val();if(checkMode==0){$(&quot;#mo\x64\x65\x4fpti\x6fn\x73\x5f0&quot;).css(&quot;d\x69spl\x61\x79&quot;,&quot;\x62lo\x63k&quot;);$(&quot;\x23mo\x64\x65\x4fpt\x69ons\x5f1&quot;).css(&quot;d\x69\x73pla\x79&quot;,&quot;n\x6fn\x65&quot;);var fontSelect=document.getElementById(&quot;\x70\x6fin\x74Fo\x6etF\x61\x6dil\x79&quot;);var font=fontSelect.options[fontSelect.selectedIndex].value;mygis.UI.populatePointIcons(&#x27;\x66on\x74&#x27;,font);}else{$(&quot;\x23mode\x4f\x70\x74io\x6es_\x30&quot;).css(&quot;\x64ispl\x61\x79&quot;,&quot;n\x6f\x6ee&quot;);$(&quot;\x23m\x6f\x64\x65Op\x74io\x6es_1&quot;).css(&quot;\x64isp\x6ca\x79&quot;,&quot;bl\x6f\x63k&quot;);mygis.UI.populatePointIcons(&#x27;l\x69\x62r\x61ry&#x27;);}},initializeStyler:function(layername){var style=layerStyles[layername].namedLayers[layername].userStyles[0];var markerStyle,lineStyle,polyStyle;var rules=style.rules.length;switch(rules){case 3:markerStyle=style.rules[0].symbolizer.Point;lineStyle=style.rules[1].symbolizer.Line;polyStyle=style.rules[2].symbolizer.Polygon;break;case 1:var symbolizer=style.rules[0].symbolizer;for(var name in symbolizer){switch(name.toString()){case &quot;Poi\x6e\x74&quot;:markerStyle=symbolizer[name];break;case &quot;\x4cin\x65&quot;:lineStyle=symbolizer[name];break;case &quot;\x50ol\x79g\x6fn&quot;:polyStyle=symbolizer[name];break;}}break;default:break;}var ms=markerStyle;var actual;if(ms){$(&quot;#\x6d\x61\x72k\x65rPrev\x69\x65w&quot;).html(&quot;&lt;\x69m\x67 sty\x6ce\x3d&#x27;wi\x64\x74h: \x310\x30\x25; \x68e\x69g\x68\x74\x3a \x31\x300%;&#x27; \x73\x72c\x3d\x27&quot;+ms.externalGraphic+&quot;&#x27; \x2f\x3e&quot;);if(ms.pointRadius){actual=parseFloat(ms.pointRadius)*2;}else{actual=8;}$(&#x27;\x23\x6dark\x65\x72Siz\x65S\x6ci\x64\x65r&#x27;).slider(&#x27;\x76\x61lue&#x27;,actual);markerSizeText.set_value(actual.toString());}var ls=lineStyle;if(ls){var actual;if(ls.strokeOpacity){actual=parseFloat(ls.strokeOpacity);}else{actual=1.0;}$(&#x27;#\x6c\x69\x6eeS\x74rokeOp\x61c\x69\x74\x79\x53l\x69\x64er&#x27;).slider(&#x27;\x76al\x75e&#x27;,actual);lineOpacityText.set_value(actual.toString());if(ls.strokeWidth){actual=parseFloat(ls.strokeWidth);}else{actual=1.0;}$(&#x27;#\x6c\x69ne\x53tr\x6fke\x57\x65ight\x53li\x64\x65\x72&#x27;).slider(&#x27;va\x6cu\x65&#x27;,actual);lineWeightText.set_value(actual.toString());$(&#x27;#p\x6fl\x79lin\x65\x53tro\x6b\x65\x43o\x6c\x6fr&#x27;).mSetInputColor(ls.strokeColor);mygis.UI.updateLinePreview(true);}var ps=polyStyle;var actual;if(ps){if(ps.strokeOpacity){actual=parseFloat(ps.strokeOpacity);$(&#x27;#p\x6fl\x79\x67o\x6eSt\x72o\x6beO\x70acit\x79\x53l\x69d\x65\x72&#x27;).slider(&#x27;va\x6cu\x65&#x27;,actual);polygonStrokeOpacityText.set_value(actual.toString());}if(ps.fillOpacity){actual=parseFloat(ps.fillOpacity);$(&#x27;\x23p\x6f\x6cyg\x6f\x6e\x46illO\x70ac\x69\x74\x79\x53lider&#x27;).slider(&#x27;v\x61lu\x65&#x27;,actual);polygonFillOpacityText.set_value(actual.toString());}if(ps.strokeWidth){actual=parseFloat(ps.strokeWidth);}else{actual=1.0;}$(&#x27;#\x70o\x6c\x79\x67onStro\x6beW\x65i\x67\x68tS\x6c\x69\x64e\x72&#x27;).slider(&#x27;va\x6c\x75e&#x27;,actual);polygonStrokeWeightText.set_value(actual.toString());$(&quot;#\x70o\x6c\x79\x67onS\x74\x72okeC\x6fl\x6f\x72&quot;).mSetInputColor(ps.strokeColor);$(&quot;#\x70ol\x79go\x6eFil\x6c\x43\x6f\x6c\x6fr&quot;).mSetInputColor(ps.fillColor);mygis.UI.updatePolyPreview(true);}},getStyleChanges:function(){var rowIndex=$(&#x27;\x23la\x79\x65rs\x4c\x69st&#x27;).jqxGrid(&#x27;ge\x74\x73e\x6c\x65c\x74ed\x72\x6fw\x69nde\x78&#x27;);var layername=layerSource.records[rowIndex].layerTABLE;var styleToApply=mygis.O.H.createSLD(layername);var pointRule=styleToApply.namedLayers[layername].userStyles[0].rules[0].symbolizer;var lineRule=styleToApply.namedLayers[layername].userStyles[0].rules[1].symbolizer;var polygonRule=styleToApply.namedLayers[layername].userStyles[0].rules[2].symbolizer;var selectedItem=null;var newValue;var newSize;if(selectedItem){newValue=selectedItem.get_value();newSize=markerSizeText.get_value();if(newValue){pointRule.Point.externalGraphic=newValue.indexOf(&quot;ht\x74\x70&quot;)==0?newValue:&quot;ht\x74\x70\x3a&#x2F;&#x2F;&quot;+window.location.host+newValue;pointRule.Point.graphicWidth=newSize;pointRule.Point.graphicHeight=newSize;pointRule.Point.pointRadius=newSize;}}var color=document.getElementById(&quot;pol\x79\x6c\x69n\x65St\x72\x6f\x6beC\x6f\x6cor&quot;).value;var lineOpacity=lineOpacityText.get_value();var lineWeight=lineWeightText.get_value();lineRule.Line.strokeWidth=lineWeight;lineRule.Line.strokeOpacity=lineOpacity;lineRule.Line.strokeColor=color;var strokeColor=document.getElementById(&quot;pol\x79g\x6f\x6e\x53\x74ro\x6beC\x6f\x6cor&quot;).value;var fillColor=document.getElementById(&quot;po\x6cy\x67on\x46i\x6c\x6cCo\x6c\x6fr&quot;).value;var strokeOpacity=polygonStrokeOpacityText.get_value();var fillOpacity=polygonFillOpacityText.get_value();var strokeWidth=polygonStrokeWeightText.get_value();polygonRule.Polygon.fillColor=fillColor;polygonRule.Polygon.fillOpacity=fillOpacity;polygonRule.Polygon.strokeColor=strokeColor;polygonRule.Polygon.strokeOpacity=strokeOpacity;polygonRule.Polygon.strokeWidth=strokeWidth;return[styleToApply,layername];},saveLayerStyle:function(){},previewLayerStyle:function(){var changeTo=mygis.UI.getStyleChanges();var styleToApply=changeTo[0];var layername=changeTo[1];layerStyles[layername]=styleToApply;var completeSLD=mygis.Map.combineLayerSLDs();var frmt=new OpenLayers.Format.SLD();var sldString=frmt.write(completeSLD);sldString=sldString.replace(&#x2F;&lt;ogc:PropertyName&gt;Geometry&lt;\&#x2F;ogc:PropertyName&gt;&#x2F;g,&quot;&lt;\x6fg\x63:\x46\x75nct\x69\x6fn na\x6d\x65\x3d\&quot;\x67eome\x74ry\x54\x79\x70e\&quot;\x3e&lt;ogc\x3aPr\x6fpe\x72ty\x4eam\x65\x3eGe\x6fm\x65try\x3c\x2f\x6fgc:P\x72opert\x79Nam\x65\x3e\x3c&#x2F;\x6f\x67\x63:\x46\x75nc\x74\x69\x6f\x6e\x3e&quot;);mygis.J.highlightSelection(null,sldString);digimap.layers[2].setVisibility(false);},clearPreviewLayer:function(){selectionWMSLayer.mergeNewParams({sld_body:null});digimap.layers[2].setVisibility(true);},toggleLayerConstraint:function(mode){var row=$(&quot;#vi\x73i\x62\x6c\x65&quot;+mode);var btn=row.find(&quot;\x2evis\x69b\x6c\x65&quot;+mode+&quot;Bt\x6e&quot;)[0];var input=row.find(&quot;.\x6c\x61ye\x72Vis\x69b\x6c\x65\x49\x6eput&quot;)[0];var layer=layerSource.records[$(&#x27;\x23l\x61y\x65r\x73Lis\x74&#x27;).jqxGrid(&#x27;ge\x74sel\x65\x63t\x65\x64row\x69n\x64\x65\x78&#x27;)];var actualValue=input.value.replace(&#x2F;\.&#x2F;g,&quot;&quot;);if(btn.ex_HasClassName(&quot;pr\x65\x73s\x65d&quot;)){btn.ex_RemoveClassName(&quot;pr\x65ss\x65\x64&quot;);layer.manualVisibility=true;}else{if(actualValue){btn.ex_AddClassName(&quot;pre\x73s\x65\x64&quot;);layer.manualVisibility=false;if(mode==&quot;Fr\x6f\x6d&quot;){layer.layerMinScale=parseFloat(actualValue);}else{layer.layerMaxScale=parseFloat(actualValue);}}else{L(strings.LayerControl.visibleRangeNotFilled);}}mygis.Map.checkScaleConstraints();R(null,true);},createEditableInfo:function(){if($(&quot;\x23e\x64\x69\x74a\x62leI\x6efo&quot;).length==0){var infoWin=$(&quot;&lt;\x64\x69v &#x2F;\x3e&quot;);var infoDetachCont=$(&quot;&lt;\x64iv\x20\x2f&gt;&quot;);infoDetachCont.attr(&quot;\x63l\x61ss&quot;,&quot;i\x6e\x66o\x44\x65tac\x68C\x6fnt&quot;);infoWin.attr(&quot;\x73t\x79le&quot;,&quot;\x77\x69d\x74h:\x33\x307\x70\x78\x3bhe\x69gh\x74:371\x70x&quot;);infoWin.attr(&quot;\x69d&quot;,&quot;\x65ditab\x6c\x65\x49n\x66o&quot;);infoWin.append(infoDetachCont);T(&quot;i\x6e\x66\x6fDetach\x43o\x6e\x74&quot;,function(){var mapCont=$(&quot;#\x6d\x61p\x43o\x6et\x61ine\x72&quot;);var dialogX=mapCont.width()-300;var dialogY=mapCont.offset().top;var dialogHeight=mapCont.height()-2;infoWin.dialog({modal:false,resizable:true,position:[dialogX,dialogY],width:327,height:dialogHeight,autoOpen:false,closeOnEscape:false,title:&quot;\x4eew i\x74e\x6d\x20\x69n\x66o&quot;,open:mygis.UI.fixEditableInfo});},infoDetachCont,true);}},toggleEditableInfo:function(){var btn=$(&quot;\x23\x6d\x61p\x46in\x61lToo\x6cba\x72&quot;).find(&#x27;\x2e\x73how\x49nfoO\x6e\x45\x64i\x74&#x27;)[0];showInfoOnEdit= !showInfoOnEdit;if(!showInfoOnEdit){$(&quot;#\x65\x64\x69table\x49\x6e\x66o&quot;).dialog(&#x27;clo\x73\x65&#x27;);btn.ex_RemoveClassName(&#x27;\x62\x74nTool\x5f\x73\x65\x6cecte\x64&#x27;);}else{btn.ex_AddClassName(&#x27;b\x74\x6eT\x6fo\x6c\x5fsel\x65cte\x64&#x27;);}},showEditableInfo:function(){if(showInfoOnEdit){$(&quot;#\x65\x64i\x74ableI\x6e\x66\x6f&quot;).dialog(&#x27;\x6f\x70en&#x27;);}},fixEditableInfo:function(){var infoWin=$(&quot;\x23e\x64i\x74\x61bl\x65\x49nfo&quot;);if(infoWin){var detachCont=infoWin.find(&quot;.\x69\x6e\x66o\x44et\x61chCo\x6e\x74&quot;)[0];if($(detachCont).is(&quot;:\x65mp\x74\x79&quot;)){setTimeout(mygis.UI.fixEditableInfo,500);}else{$(detachCont).removeData();$(detachCont).jqxTabs({width:&#x27;\x3328\x70x&#x27;,height:&#x27;\x33\x350px&#x27;,theme:&#x27;pk\x5f\x6d\x67_whi\x74\x65&#x27;,scrollable:true,scrollPosition:&#x27;r\x69gh\x74&#x27;,selectionTracker:true,showCloseButtons:false});var titleBar=$(&quot;#\x75\x69\x2d\x64ialog-\x74i\x74\x6ce\x2d\x65dit\x61ble\x49n\x66\x6f&quot;).parent();titleBar.css({&quot;\x62\x61c\x6b\x67r\x6fund&quot;:&quot;u\x72\x6c\x28\x27&#x2F;D\x65s\x6bto\x70\x4do\x64\x75\x6ces&#x2F;AVMa\x70.Ma\x70\x44\x69g\x69\x74iz\x65\x72_v2&#x2F;I\x6da\x67es&#x2F;\x66i\x6ce_\x65\x64\x69t.p\x6eg\x27) \x23\x46\x36A82\x38 n\x6f\x2d\x72\x65p\x65\x61t 1\x32\x70x 2p\x78&quot;,&quot;bac\x6bgr\x6fun\x64\x2d\x73\x69\x7ae&quot;:&quot;a\x75\x74\x6f\x2025px&quot;});titleBar.find(&quot;.u\x69\x2ddi\x61\x6cog-ti\x74le\x62\x61\x72\x2dcl\x6f\x73e&quot;).css({&quot;v\x69\x73\x69bili\x74\x79&quot;:&quot;\x68i\x64\x64en&quot;});var dialogWindow=titleBar.parent();var dialogContent=$(dialogWindow.find(&quot;\x23\x65di\x74\x61ble\x49nf\x6f&quot;)[0]);dialogWindow.css({&quot;w\x69d\x74h&quot;:&quot;\x330\x32px&quot;});dialogContent.css({&quot;\x70addi\x6e\x67&quot;:&quot;0&quot;,&quot;margi\x6e-\x6c\x65\x66\x74&quot;:&quot;-\x35p\x78&quot;,&quot;\x6fv\x65rf\x6co\x77&quot;:&quot;hi\x64\x64\x65n&quot;});var mapCont=$(&quot;\x23ma\x70Co\x6et\x61in\x65\x72&quot;);var dialogX=mapCont.width()-300;var dialogY=mapCont.offset().top;var dialogHeight=mapCont.height()-2;infoWin.dialog(&quot;o\x70\x74i\x6fn&quot;,&quot;posi\x74\x69\x6f\x6e&quot;,[dialogX,dialogY]);}}else{setTimeout(mygis.UI.fixEditableInfo,500);}},activateControl:function(name){var cname;for(var i=0;i&lt;4;i++){switch(i){case 0:cname=&quot;#dra\x67\x50\x61n\x42\x74n&quot;;break;case 1:cname=&quot;#z\x6fom\x42\x6fxB\x74\x6e&quot;;break;case 2:cname=&quot;\x23zo\x6f\x6dO\x75\x74Btn&quot;;break;case 3:cname=&quot;#to\x67\x67le\x49\x6efo\x42\x74n&quot;;break;}$(cname)[0].ex_RemoveClassName(&quot;se\x6ce\x63t\x65\x64&quot;);}switch(name){case &quot;\x64\x72ag&quot;:naviControls.navigation.activate();naviControls.zoomBox.deactivate();$(&quot;#\x64\x72agP\x61n\x42\x74n&quot;)[0].ex_AddClassName(&quot;\x73e\x6c\x65c\x74ed&quot;);break;case &quot;\x7ao\x6fmB\x6fx&quot;:naviControls.zoomBox.activate();$(&quot;\x23zo\x6f\x6d\x42\x6fxBtn&quot;)[0].ex_AddClassName(&quot;se\x6cec\x74\x65\x64&quot;);break;}mygis.UI.stopDigitize();$(&quot;#\x6da\x70C\x6f\x6eta\x69ne\x72&quot;).css(&#x27;cur\x73\x6f\x72&#x27;,&#x27;de\x66\x61ul\x74&#x27;);},toggleOverview:function(){var overview=$(&quot;#\x63us\x74\x6fm\x4fve\x72\x76\x69ew&quot;);if(overview.is(&quot;:\x76\x69s\x69\x62le&quot;)){overview.hide();$(&quot;#t\x6fg\x67l\x65O\x76\x65\x72\x76\x69ewBtn&quot;)[0].ex_RemoveClassName(&quot;\x73\x65l\x65ct\x65d&quot;);}else{overview.show();$(&quot;#t\x6f\x67gl\x65Ov\x65\x72v\x69e\x77\x42tn&quot;)[0].ex_AddClassName(&quot;\x73\x65le\x63t\x65d&quot;);}},toggleInfoBtn:function(){var isInfoActive=false;if(infoControls){if(infoControls.click.active){isInfoActive=true;}}mygis.UI.clearInfoButtons();if(!isInfoActive){infoControls.click.events.unregister(&quot;g\x65\x74f\x65at\x75\x72\x65info&quot;,this,mygis.Map.showInfo2);digimap.removeControl(infoControls.click);infoControls.click=new OpenLayers.Control.WMSGetFeatureInfo({url:&#x27;&#x2F;m\x61ps\x65r\x76\x65r&#x2F;\x77\x6ds&#x27;,title:&#x27;\x49de\x6eti\x66\x79 \x66\x65\x61\x74\x75res\x20by\x20\x63lic\x6bing&#x27;,drillDown:true,infoFormat:&quot;\x74e\x78\x74&#x2F;ht\x6dl&quot;,maxFeatures:10,layers:[digimap.layers[2]],vendorParams:{EXCEPTIONS:&#x27;\x58ML&#x27;}});infoControls.click.events.register(&quot;get\x66e\x61\x74\x75rei\x6ef\x6f&quot;,this,mygis.Map.showInfo2);digimap.addControl(infoControls.click);infoControls.click.activate();$(&quot;\x23\x74\x6fg\x67leI\x6efo\x42tn&quot;)[0].ex_AddClassName(&quot;s\x65l\x65c\x74e\x64&quot;);mygis.UI.stopDigitize();}else{infoControls.click.deactivate();mygis.Map.clearSelection();$(&quot;#t\x6fgg\x6ce\x49\x6e\x66oBt\x6e&quot;)[0].ex_RemoveClassName(&quot;s\x65\x6c\x65ct\x65d&quot;);}},toggleSelectBtn:function(mode){var boxmode;switch(mode){case &quot;\x70\x6fint&quot;:boxmode=false;break;case &quot;r\x65\x63\x74a\x6egle&quot;:boxmode=true;break;}var alreadyActive=infoControls.select.active&amp;&amp;infoControls.select.box==boxmode;mygis.UI.clearInfoButtons();if(!alreadyActive){mygis.UI.clearInfoButtons();var layerToSelect=[];for(var i=0;i&lt;layerSource.records.length;i++){var checkname=layerSource.records[i].layerTABLE;if(mygis.Map.layerHasProperty(checkname,&#x27;\x73\x65\x6cec\x74\x61ble&#x27;)){layerToSelect.push(checkname);}}infoControls.select.protocol=new OpenLayers.Protocol.WFS({version:&quot;1.1\x2e\x30&quot;,url:&quot;&#x2F;\x6d\x61pserv\x65r\x2fw\x6d\x73&quot;,featureType:layerToSelect,featureNS:&quot;\x68\x74tp:&#x2F;&#x2F;\x6dg\x6dapse\x72ve\x72\x2eavmap.g\x72\x3a\x38\x30\x38\x31\x2fg\x65\x6f\x73erv\x65\x72&#x2F;c\x68\x69\x6fs&quot;,geometryName:&quot;\x47e\x6f\x6detr\x79&quot;});infoControls.select.box=boxmode;infoControls.select.activate();if(!boxmode){document.getElementById(&quot;i\x6ef\x6fPo\x69\x6et&quot;).ex_AddClassName(&quot;b\x74\x6eToo\x6c\x5f\x73e\x6ce\x63ted&quot;);}else{document.getElementById(&quot;i\x6ef\x6fRe\x63\x74&quot;).ex_AddClassName(&quot;b\x74nT\x6fol\x5f\x73e\x6ce\x63\x74ed&quot;);}}},clearInfoButtons:function(){for(var i in infoControls){infoControls[i].deactivate();}document.getElementById(&quot;\x69n\x66\x6fPoin\x74&quot;).ex_RemoveClassName(&quot;\x62\x74nT\x6f\x6fl_s\x65\x6c\x65cted&quot;);document.getElementById(&quot;i\x6e\x66o\x52ec\x74&quot;).ex_RemoveClassName(&quot;\x62\x74n\x54\x6fol\x5f\x73elect\x65d&quot;);document.getElementById(&quot;\x74\x6fgg\x6ceI\x6e\x66o\x42tn&quot;).ex_RemoveClassName(&quot;\x73\x65l\x65c\x74ed&quot;);mygis.Map.clearSelection();},ToggleFullLegend:function(){var layers=mygis.V.getVisibleLayerString(currentAppName,true);document.getElementById(&quot;\x74e\x73t\x4ce\x67e\x6ed&quot;).src=&quot;&#x2F;m\x61\x70s\x65r\x76e\x72&#x2F;\x77ms&quot;+&quot;?la\x79\x65r\x3d&quot;+layers+&quot;\x26R\x45\x51U\x45S\x54\x3dGe\x74Leg\x65nd\x47rap\x68\x69\x63&amp;\x56\x45\x52SION=1\x2e0\x2e\x30\x26FOR\x4d\x41\x54\x3di\x6da\x67e\x2f\x70\x6eg\x26WIDT\x48=20&amp;H\x45\x49\x47HT=\x320&quot;;$(&quot;#t\x65\x73tL\x65\x67e\x6ed&quot;).dialog();},GetSingleLegend:function(layername){var img=document.createElement(&quot;im\x67&quot;);layername=mygis.V.nameToUnderscore(layername);img.src=&quot;\x2fmap\x73\x65\x72ver\x2f\x77ms&quot;+&quot;?\x6c\x61ye\x72=&quot;+layername+&quot;&amp;R\x45QU\x45\x53\x54=\x47e\x74Lege\x6edG\x72aph\x69c&amp;\x74\x72\x61n\x73\x70\x61\x72en\x74\x3dtru\x65\x26VER\x53\x49\x4fN\x3d\x31\x2e0\x2e0&amp;\x46\x4f\x52MAT\x3d\x69mag\x65&#x2F;png&amp;WID\x54H\x3d\x32\x30\x26H\x45IGH\x54=\x320&quot;;return img;},ToggleLayerVisibleProperty:function(elem){var rowindex=$(&#x27;\x23la\x79er\x73L\x69\x73t&#x27;).jqxGrid(&#x27;\x67e\x74selecte\x64\x72\x6f\x77i\x6e\x64\x65x&#x27;);mygis.UI.ToggleLayerVisible(null,rowindex);if(elem.ex_HasClassName(&#x27;\x70re\x73se\x64&#x27;)){elem.ex_RemoveClassName(&#x27;p\x72e\x73se\x64&#x27;);}else{elem.ex_AddClassName(&#x27;\x70re\x73se\x64&#x27;);}},ToggleLayerVisible:function(layername,rowIndex){$(&#x27;#\x69\x6e\x69tialL\x6fa\x64&#x27;).find(&quot;\x2emy\x67\x69s_\x6c\x6fgo&quot;).hide();$(&#x27;#\x69ni\x74\x69\x61lLoa\x64&#x27;).find(&quot;.my\x67\x69\x73_l\x6f\x61de\x72&quot;).attr({&quot;s\x74y\x6ce&quot;:&quot;margi\x6e\x2d\x74o\x70\x3a14\x30\x70x\x3b&quot;});$.blockUI({message:$(&#x27;#\x69niti\x61\x6c\x4coa\x64&#x27;),css:{backgroundColor:&#x27;t\x72\x61\x6espa\x72\x65nt&#x27;},overlayCSS:{opacity:0}});var mapItem=$(&quot;#\x6d\x61p\x73Li\x73t&quot;).jqxListBox(&#x27;\x67e\x74S\x65\x6cect\x65\x64It\x65m&#x27;).originalItem;var layerlist=$(&#x27;\x23\x6c\x61ye\x72sLis\x74&#x27;);if(layername){var layerID;layerSource.records.forEach(function(element,index,array){if(array[index].layerNAME==layername){if(index){layerID=index;}}});}else{var layerID=rowIndex;}if(layerID&gt;layerSource.records.length-1){var name=layergridSource.localdata[layerID].Name;var baselayer=digimap.getLayersByName(name)[0];var mod=(layerID==layergridSource.localdata.length-1)? -1:1;var baseIndex=digimap.getLayerIndex(baselayer);var otherlayer=digimap.layers[baseIndex+mod];if(baselayer){if(layergridSource.localdata[layerID].Visible){digimap.baseLayer.setVisibility(false);digimap.setBaseLayer(baselayer);digimap.baseLayer.setVisibility(true);layergridSource.localdata[layerID][&quot;#&quot;]=layerSource.records.length+1;layergridSource.localdata[layerID+mod][&quot;#&quot;]=&quot;-&quot;;layergridSource.localdata[layerID+mod].Visible=false;}else{digimap.baseLayer.setVisibility(false);digimap.setBaseLayer(otherlayer);digimap.baseLayer.setVisibility(true);layergridSource.localdata[layerID][&quot;#&quot;]=&quot;-&quot;;layergridSource.localdata[layerID+mod][&quot;#&quot;]=layerSource.records.length+1;layergridSource.localdata[layerID+mod].Visible=true;}}}else{layerSource.records[layerID].hidden= !Boolean(layerSource.records[layerID].hidden);layerSource.records[layerID].manualVisibility=true;K(mapItem);}mygis.UI.updateLayerGrid();},ToggleLayerSelectable:function(index){var rowIndex=index!=null?index:$(&#x27;\x23l\x61\x79ers\x4c\x69st&#x27;).jqxGrid(&#x27;\x67\x65ts\x65lec\x74\x65\x64r\x6f\x77in\x64ex&#x27;);layerSource.records[rowIndex].Selectable= !layerSource.records[rowIndex].Selectable;mygis.UI.updateLayerGrid();},ToggleLayerEditable:function(index){var rowIndex=index!=null?index:$(&#x27;#\x6cayer\x73\x4ci\x73\x74&#x27;).jqxGrid(&#x27;\x67e\x74\x73e\x6c\x65ct\x65dr\x6fwi\x6ed\x65x&#x27;);var item=layerSource.records[rowIndex];if(!item.Editable){mygis.UI.clearEditable();item.Editable=true;}else{item.Editable=false;}mygis.UI.updateLayerGrid();},clearEditable:function(){for(var i=0;i&lt;layerSource.records.length;i++){layerSource.records[i].Editable=false;}},updateLayerGrid:function(){var layerlist=$(&#x27;#\x6ca\x79er\x73\x4cis\x74&#x27;);layergridSource={localdata:ba(layerSource,&#x27;la\x79\x65\x72s&#x27;),datatype:&#x27;\x61r\x72ay&#x27;};layerlist.jqxGrid({source:layergridSource});layerlist.jqxGrid(&#x27;\x72e\x66r\x65shd\x61\x74a&#x27;);},zoomToLayer:function(index){var index2=$(&#x27;\x23l\x61\x79\x65\x72sList&#x27;).jqxGrid(&#x27;\x67\x65\x74selec\x74\x65d\x72\x6fwi\x6ed\x65x&#x27;);var lay=layerSource.records[index2].layerEXTENTS.split(&quot;$&quot;);var x,y,mx,my;x=parseFloat(lay[0].replace(&quot;,&quot;,&quot;.&quot;));y=parseFloat(lay[1].replace(&quot;,&quot;,&quot;.&quot;));mx=parseFloat(lay[2].replace(&quot;,&quot;,&quot;.&quot;));my=parseFloat(lay[3].replace(&quot;,&quot;,&quot;.&quot;));digimap.zoomToExtent([x,y,mx,my],false);R();},moveLayerCustom:function(oldindex,newindex){if(newindex&gt;=0&amp;&amp;newindex&lt;=layerSource.records.length-1){var layerlist=$(&#x27;\x23\x6ca\x79ers\x4ci\x73t&#x27;);layerlist.jqxGrid(&#x27;h\x69d\x65\x72owde\x74a\x69\x6cs&#x27;,oldindex);var params=[];params.push(oldindex);params.push(newindex);bv(function(cl_params){layerSource.records=mygis.V.arrayMove(layerSource.records,cl_params[0],cl_params[1]);mygis.UI.updateLayerGrid();K();layerlist.jqxGrid(&#x27;\x72ef\x72es\x68d\x61\x74a&#x27;);},params,0);}},moveLayerUp:function(index){var layerlist=$(&#x27;#\x6c\x61ye\x72s\x4cis\x74&#x27;);var index2=layerlist.jqxGrid(&#x27;\x67ets\x65\x6cec\x74e\x64r\x6fw\x69\x6e\x64ex&#x27;);var step_value=document.getElementById(&quot;m\x6f\x76e\x4cay\x65\x72\x53tep&quot;).value;bv(function(i){layerSource.records=mygis.V.arrayMove(layerSource.records,i,i-step_value);mygis.UI.updateLayerGrid();K();R();},index2,0);},moveLayerDown:function(index){var layerlist=$(&#x27;#\x6ca\x79\x65rs\x4cis\x74&#x27;);var index2=layerlist.jqxGrid(&#x27;\x67\x65t\x73e\x6c\x65c\x74edro\x77\x69\x6edex&#x27;);var step_value=document.getElementById(&quot;mov\x65\x4c\x61\x79erSt\x65\x70&quot;).value;bv(function(i){layerSource.records=mygis.V.arrayMove(layerSource.records,i,i+step_value);mygis.UI.updateLayerGrid();K();R();},index2,0);},removeLayer:function(index){var positiveConfirm=function(){var layerlist=$(&#x27;#\x6c\x61\x79\x65rsLi\x73t&#x27;);var index2=layerlist.jqxGrid(&#x27;get\x73\x65\x6c\x65c\x74edr\x6f\x77ind\x65\x78&#x27;);bv(function(i){layerSource.records.splice(i,1);mygis.UI.updateLayerGrid();K();R();},index2,0);};bF(strings.ConfirmBox.msg_lc_removemap,positiveConfirm);},layerGrouping:function(element){var value=element.value;if(value==&quot;Na\x6d\x65&quot;){$(&#x27;\x23\x6c\x61\x79ersL\x69st&#x27;).jqxGrid(&#x27;\x72e\x6dov\x65\x67r\x6fup&#x27;,&#x27;\x54\x79pe&#x27;);}else{$(&#x27;\x23lay\x65\x72\x73L\x69st&#x27;).jqxGrid(&#x27;ad\x64\x67\x72o\x75p&#x27;,&#x27;T\x79p\x65&#x27;);}},setProjectionTip:function(){var proj=digimap.getProjection();$(&quot;\x23m\x61p_\x70r\x6fj\x65\x63t\x69\x6fn\x5fnode&quot;).html(proj);params=[];var msg;switch(proj){case mygis.V.projections.wgs84:msg=mygis.V.format(&quot;\x50roje\x63tion\x3a\x20{0\x7d\x3cbr\x2f&gt;E\x6cl\x69pso\x69\x64\x3a {1\x7d&lt;\x62r\x2f\x3e\x44at\x75\x6d\x3a \x7b\x32}&quot;,&quot;lo\x6eg\x6ca\x74&quot;,&quot;\x57G\x53 \x3198\x34&quot;,&quot;\x57GS\x20\x31\x3984&quot;);break;case mygis.V.projections.google:msg=mygis.V.format(&quot;\x50r\x6f\x6aec\x74io\x6e\x3a \x7b\x30}&lt;b\x72&#x2F;\x3eSph\x65\x72oid\x3a\x20\x7b1}&lt;br&#x2F;\x3eD\x61t\x75\x6d\x3a {\x32\x7d&quot;,&quot;\x73i\x6dp\x6ce\x20merc\x61\x74o\x72&quot;,&quot;\x57G\x53 \x31\x3984&quot;,&quot;W\x47S 1\x39\x38\x34&quot;);break;}params.push(msg);aA(&#x27;p\x72\x6f\x6ae\x63ti\x6fn&#x27;,params);},stopDigitize:function(){mygis.UI.clearmygis();mygis.UI.clearDrawingMode();},objRClickHandler:function(event){cmenu.close();rightClickedObj=this;event.pixel=mygis.V.latlngToPoint(digimap,event.latLng,digimap.getZoom());current=event;objcmenu.open(event,&quot;ha\x63k\x4d\x65&quot;);},flashPolyshape:function(polyshape,initialOpacity,rising){var newOpac;if(polyshape.flashTimer){clearTimeout(polyshape.flashTimer);}if(rising==null){rising=initialOpacity&gt;0.5?true:false;}if(rising===true){newOpac=initialOpacity+0.1;if(newOpac&gt;1){newOpac=1;rising=false;}}else{newOpac=initialOpacity-0.1;if(newOpac&lt;0.1){newOpac=0.1;rising=true;}}polyshape.setOptions({strokeOpacity:newOpac});polyshape.flashTimer=setTimeout(function(){mygis.UI.flashPolyshape(polyshape,newOpac,rising)},10);},createContextMenu:function(caller){switch(caller){case &quot;m\x61p&quot;:cmenu=new contextMenu($(digiContainer));cmenu.add(strings.MapRMenu.zoomin,&#x27;zo\x6f\x6d\x49n&#x27;,function(){var center=digimap.getLonLatFromLayerPx(new OpenLayers.Pixel(current.layerX,current.layerY));digimap.setCenter(center,digimap.getZoom()+1);cmenu.close();});cmenu.add(strings.MapRMenu.zoomout,&#x27;zo\x6f\x6dO\x75t&#x27;,function(){var center=digimap.getLonLatFromLayerPx(new OpenLayers.Pixel(current.layerX,current.layerY));digimap.setCenter(center,digimap.getZoom()-1);cmenu.close();});cmenu.add(strings.MapRMenu.center,&#x27;\x63en\x74\x65rH\x65\x72e&#x27;,function(){var center=digimap.getLonLatFromLayerPx(new OpenLayers.Pixel(current.layerX,current.layerY));digimap.setCenter(center);cmenu.close();});digimap.div.oncontextmenu=function(event){current=event;cmenu.open(event);return false;};break;case &quot;m\x61p\x4fbje\x63\x74&quot;:objcmenu=new contextMenu($(digiContainer));objcmenu.add(&#x27;&#x27;,&#x27;\x6fbj\x65c\x74Title\x52\x4d\x65\x6eu&#x27;,function(){if(rightClickedObj.overlaytype==&quot;ma\x72k\x65\x72&quot;){rightClickedObj.setDraggable(!rightClickedObj.getDraggable());}else{rightClickedObj.setOptions({editable: !rightClickedObj.getEditable()});}});objcmenu.add(strings.ObjRMenu.edit,&#x27;\x6fb\x6aR_\x65d\x69t&#x27;,function(){if(rightClickedObj.overlaytype==&quot;\x6dar\x6be\x72&quot;){rightClickedObj.setDraggable(!rightClickedObj.getDraggable());}else{rightClickedObj.setOptions({editable: !rightClickedObj.getEditable()});}});objcmenu.add(strings.ObjRMenu.deleteMe,&#x27;ob\x6aR_\x64\x65\x6cet\x65M\x65&#x27;,function(){mygis.UI.deleteObject(rightClickedObj);});objcmenu.add(strings.ObjRMenu.styleMe,&#x27;o\x62jR\x5fst\x79\x6ce\x4de&#x27;,function(){mygis.UI.editObjectStyle(rightClickedObj.overlaytype);});objcmenu.add(strings.ObjRMenu.zoomin,&#x27;o\x62j\x52_\x7a\x6fom\x49n&#x27;,function(){digimap.setCenter(current.latLng);digimap.setZoom(digimap.getZoom()+1);objcmenu.close();});objcmenu.add(strings.ObjRMenu.zoomout,&#x27;o\x62\x6aR_zo\x6f\x6d\x4fut&#x27;,function(){digimap.setCenter(current.latLng);digimap.setZoom(digimap.getZoom()-1);objcmenu.close();});objcmenu.add(strings.ObjRMenu.fitBounds,&#x27;o\x62jR\x5ff\x69tB\x6f\x75n\x64s&#x27;,function(){digimap.fitBounds(rightClickedObj.bounds);objcmenu.close();});break;}},deleteObject:function(obj){obj.setMap(null);obj.underDelete=true;var newdigi=[];mygis.UI.clearCosmetic();countMarkers=0;countPolylines=0;countPolygons=0;for(var i=0;i&lt;digimapOverlays.length;i++){if(!digimapOverlays[i].underDelete){newdigi.push(digimapOverlays[i]);mygis.UI.cosmeticPush(digimapOverlays[i]);switch(digimapOverlays[i].overlaytype){case &quot;m\x61rk\x65\x72&quot;:countMarkers+=1;break;case &quot;\x70\x6flyl\x69\x6ee&quot;:countPolylines+=1;break;case &quot;p\x6fly\x67\x6fn&quot;:case &quot;\x72\x65c\x74a\x6egle&quot;:countPolygons+=1;break;}}}digimapOverlays=newdigi;},editObjectStyle:function(type){switch(type){case &quot;\x6d\x61rk\x65r&quot;:$(&quot;#mark\x65rCho\x6f\x73\x65S\x74\x79\x6c\x65&quot;).dialog({modal:true,resizable:false,title:strings.ObjRMenu.styleMe,width:380}).show();break;case &quot;pol\x79\x6c\x69n\x65&quot;:$(&quot;\x23\x70\x6fly\x6ci\x6eeCho\x6fs\x65\x53\x74yle&quot;).dialog({modal:true,resizable:false,title:strings.ObjRMenu.styleMe}).show();break;case &quot;\x72\x65c\x74\x61ngle&quot;:case &quot;p\x6fl\x79\x67on&quot;:$(&quot;#p\x6f\x6cyg\x6fnC\x68\x6fo\x73e\x53t\x79l\x65&quot;).dialog({modal:true,resizable:false,title:strings.ObjRMenu.styleMe}).show();break;}},selectMarkerStyle:function(disablePreview){var sItem=markerStyleList.get_selectedItem();var sItemUrl=sItem.get_value();if(sItemUrl){$(&quot;#mar\x6be\x72Pr\x65\x76\x69e\x77&quot;).html(&quot;\x3cim\x67 s\x74y\x6ce\x3d\x27w\x69d\x74h:\x20\x3100%\x3b \x68\x65\x69gh\x74\x3a 100\x25;\x27\x20src=\x27&quot;+sItemUrl+&quot;&#x27;\x20&#x2F;\x3e&quot;);}if(!disablePreview){mygis.UI.previewLayerStyle();}},changeMarkerSize:function(event,ui){var curr=ui.value;markerSizeText.set_value(curr);mygis.UI.previewLayerStyle();},changeLineOpacity:function(event,ui){var curr=ui.value;lineOpacityText.set_value(curr);mygis.UI.updateLinePreview();},changeLineWeight:function(event,ui){var curr=ui.value;lineWeightText.set_value(curr);mygis.UI.updateLinePreview();},changePolyStrokeOpacity:function(event,ui){var curr=ui.value;polygonStrokeOpacityText.set_value(curr);mygis.UI.updatePolyPreview();},changePolyFillOpacity:function(event,ui){var curr=ui.value;polygonFillOpacityText.set_value(curr);mygis.UI.updatePolyPreview();},changePolyWeight:function(event,ui){var curr=ui.value;polygonStrokeWeightText.set_value(curr);mygis.UI.updatePolyPreview();},updateLinePreview:function(disablePreview){var color=document.getElementById(&quot;p\x6f\x6cy\x6ci\x6eeS\x74r\x6fkeCo\x6c\x6f\x72&quot;).value;var lineOpacity=lineOpacityText.get_value();var lineWeight=lineWeightText.get_value();$(&quot;#p\x6fly\x6ci\x6ee\x50\x72e\x76\x69ew&quot;).css({&quot;bac\x6b\x67r\x6f\x75n\x64-\x63\x6flor&quot;:color,&quot;\x6fp\x61\x63ity&quot;:lineOpacity,&quot;\x68\x65i\x67ht&quot;:2+&quot;\x70x&quot;,&quot;ma\x72\x67\x69\x6e\x2dtop&quot;:((38-2)&#x2F;2)+&quot;p\x78&quot;,&quot;\x6darg\x69n\x2db\x6f\x74to\x6d&quot;:((38-2)&#x2F;2)+&quot;p\x78&quot;});if(!disablePreview){mygis.UI.previewLayerStyle();}},updatePolyPreview:function(disablePreview){var strokeColor=document.getElementById(&quot;p\x6f\x6cy\x67onStr\x6f\x6b\x65C\x6flo\x72&quot;).value;var fillColor=document.getElementById(&quot;p\x6fly\x67\x6f\x6e\x46i\x6clCo\x6cor&quot;).value;var strokeOpacity=polygonStrokeOpacityText.get_value();var fillOpacity=polygonFillOpacityText.get_value();var strokeWidth=polygonStrokeWeightText.get_value();var borderColor=mygis.V.hexToRGB(strokeColor);fillColor=mygis.V.hexToRGB(fillColor);var rgbaString=&quot;r\x67\x62a(&quot;+borderColor[0]+&quot;,&quot;+borderColor[1]+&quot;,&quot;+borderColor[2]+&quot;,&quot;+strokeOpacity+&quot;)&quot;;var rgbaString2=&quot;r\x67b\x61(&quot;+fillColor[0]+&quot;,&quot;+fillColor[1]+&quot;,&quot;+fillColor[2]+&quot;,&quot;+fillOpacity+&quot;)&quot;;$(&quot;\x23\x70\x6fly\x67on\x50\x72evi\x65w&quot;).css({&quot;\x62ack\x67r\x6fu\x6ed-c\x6f\x6co\x72&quot;:rgbaString2,&quot;border\x2d\x63\x6f\x6co\x72&quot;:rgbaString,&quot;b\x6fr\x64\x65r\x2dwi\x64th&quot;:5+&quot;p\x78&quot;});if(!disablePreview){mygis.UI.previewLayerStyle();}},populateMarkerIcons:function(level,sublevel){var listItem;var items;var err=false;markerStyleList.trackChanges();$(&quot;#mar\x6be\x72Pr\x65v\x69\x65\x77&quot;).empty();items=markerStyleList.get_items();items.clear();switch(level){case &quot;D\x65\x66a\x75lt&quot;:listItem=new Telerik.Web.UI.RadListBoxItem();listItem.set_text(&quot;D\x65fau\x6c\x74&quot;);listItem.set_value(mygis.O.H.pointStyle.defaultIcon);listItem.set_imageUrl(mygis.O.H.pointStyle.defaultIcon);items.add(listItem);break;case &quot;G\x6f\x6fgl\x65&quot;:var gurl=&quot;http\x3a&#x2F;&#x2F;\x6d\x61p\x73.\x67o\x6f\x67le.c\x6fm&#x2F;\x6da\x70file\x73\x2f\x6b\x6d\x6c\x2f&quot;;var folder,filename,finalurl;switch(sublevel){case &quot;\x50\x61le\x74te\x202&quot;:folder=&quot;\x70\x61l2&#x2F;&quot;;break;case &quot;P\x61le\x74\x74\x65 3&quot;:folder=&quot;p\x61l\x33&#x2F;&quot;;break;case &quot;Pa\x6c\x65tt\x65\x204&quot;:folder=&quot;p\x61l4\x2f&quot;;break;case &quot;Pal\x65\x74t\x65 \x35&quot;:folder=&quot;\x70a\x6c5&#x2F;&quot;;break;}for(var i=0;i&lt;64;i++){filename=&quot;\x69\x63on&quot;+i.toString();finalurl=gurl+folder+filename+&quot;.\x70\x6eg&quot;;listItem=new Telerik.Web.UI.RadListBoxItem();listItem.set_text(filename);listItem.set_value(finalurl);listItem.set_imageUrl(finalurl);items.add(listItem);}break;case &quot;\x4dy\x20up\x6c\x6fad\x73&quot;:case &quot;M\x79\x20m\x61ps&quot;:listItem=new Telerik.Web.UI.RadListBoxItem();listItem.set_text(strings.Login.notLoggedIn);items.add(listItem);err=true;break;}if(items.get_count()&gt;=1&amp;&amp; !err){items.getItem(0).select();items.getItem(0).scrollIntoView();}markerStyleList.commitChanges();},setPointFont:function(charcode,elem){var coords=charcode.split(&quot;_&quot;);var cellvalue=$(&quot;#p\x6fi\x6etI\x63\x6f\x6es&quot;).jqxGrid(&#x27;\x67et\x63\x65llva\x6c\x75e&#x27;,coords[0],&quot;_&quot;+coords[1]);var fontSelect=document.getElementById(&quot;p\x6f\x69\x6et\x46ontF\x61\x6d\x69ly&quot;);var font=fontSelect.options[fontSelect.selectedIndex].value;var pointPreview=$(&quot;#m\x61r\x6b\x65\x72\x50rev\x69ew&quot;);var bgposition=$(elem).css(&#x27;back\x67\x72oun\x64\x2dp\x6f\x73\x69\x74i\x6fn&#x27;);pointPreview.html(&quot;&quot;);pointPreview.attr(&quot;c\x6ca\x73s&quot;,font);pointPreview.css(&quot;\x62\x61\x63k\x67\x72ound-\x70\x6f\x73i\x74ion&quot;,bgposition);ad(&quot;\x63o\x64e\x3a &quot;+cellvalue);},setPointImg:function(params,elem){var parts=params.split(&quot;#&quot;);var layername=parts[0];var url=parts[1];var img=$(&quot;&lt;i\x6d\x67 \x2f&gt;&quot;);img.attr(&quot;sr\x63&quot;,url);img.attr(&quot;cl\x61s\x73&quot;,&quot;ge\x6fl\x69n\x6b&quot;);var pointPreview=$(&quot;\x23ma\x72k\x65\x72Pre\x76ie\x77&quot;);pointPreview.attr(&quot;\x63la\x73s&quot;,&quot;&quot;);pointPreview.html(&quot;&quot;);pointPreview.append(img);},populatePointIcons:function(callingMode,params){var mode;var colNumber=$(&#x27;\x23\x70o\x69\x6etColum\x6e\x73&#x27;).jqxNumberInput(&#x27;g\x65t\x44\x65\x63\x69mal&#x27;);var thegrid=$(&quot;#\x70oi\x6etI\x63\x6f\x6es&quot;);var pointSource=[];var fontSelect=document.getElementById(&quot;poin\x74F\x6f\x6e\x74F\x61\x6dil\x79&quot;);var font=fontSelect.options[fontSelect.selectedIndex].value;var librarySelect=document.getElementById(&quot;\x70\x6fint\x4dyI\x63o\x6eFol\x64e\x72\x73&quot;);var library=librarySelect.options[librarySelect.selectedIndex].value;var renderer;switch(callingMode){case &quot;prim\x69\x74i\x76\x65&quot;:mode=&#x27;im\x61g\x65&#x27;;break;case &quot;f\x6fn\x74&quot;:mode=&#x27;im\x61\x67e&#x27;;pointSource=aI(font,colNumber);break;case &quot;l\x69b\x72a\x72y&quot;:mode=&#x27;i\x6dag\x65&#x27;;pointSource=aD(library,colNumber);break;}var imagerenderer=function(row,datafield,value){var class1=&quot;&quot;;var class2=&quot;&quot;;var action=&quot;&quot;;var posX,posY;var extraStyle=&quot;&quot;;switch(callingMode){case &quot;p\x72\x69m\x69t\x69ve&quot;:break;case &quot;\x66on\x74&quot;:class1=&#x27;\x66on\x74\x6c\x69nk&#x27;;class2=params;action=&quot;mygis\x2e\x55I.\x73\x65t\x50\x6fint\x46\x6fn\x74(\x27&quot;+row.toString()+datafield+&quot;&#x27;,\x74\x68is\x29;ret\x75\x72n\x20\x66a\x6c\x73e;&quot;;switch(params){case &quot;w\x69\x6egd\x69\x6egs&quot;:var col=parseInt(datafield.split(&quot;_&quot;)[1]);var picrow=parseInt((((row)*colNumber)+col)&#x2F;16);var piccol=(((row)*colNumber)+col)%16;posX=(5+(47*piccol))* -1;posY=0+(34*(picrow)* -1);break;}break;case &quot;\x6cib\x72a\x72y&quot;:class1=&#x27;\x67eo\x6cin\x6b&#x27;;posX=0;posY=0;if(value){var imgsrc=value.split(&quot;#&quot;)[1];extraStyle=mygis.V.format(&quot;\x62\x61\x63\x6bg\x72\x6fund-i\x6d\x61\x67e:\x20\x75r\x6c(&#x27;{0\x7d&#x27;);&quot;,imgsrc);}action=&quot;\x6d\x79gis.U\x49\x2e\x73e\x74Poin\x74\x49\x6dg(\x27&quot;+value+&quot;&#x27;,thi\x73\x29;re\x74u\x72\x6e \x66\x61ls\x65\x3b&quot;;break;}var returnString=mygis.V.format(&#x27;\x3ca h\x72\x65f=&quot;#\x22 \x6fn\x63l\x69c\x6b\x3d&quot;{0}ret\x75rn \x66\x61l\x73\x65\x3b\x22 \x63\x6c\x61\x73s\x3d&quot;{1\x7d {2\x7d\x22\x20\x73\x74\x79le\x3d&quot;\x62\x61c\x6b\x67ro\x75\x6ed\x2d\x70ositi\x6f\x6e\x3a {\x33\x7dp\x78\x20\x7b4}px;{5}\x22&gt;&lt;&#x2F;a\x3e&#x27;,action,class1,class2,posX,posY,extraStyle);return returnString;};renderer=mode==&#x27;im\x61\x67e&#x27;?imagerenderer:null;var pointgridSource={localdata:pointSource,datatype:&#x27;arr\x61\x79&#x27;};var columnArray=[];for(var i=1;i&lt;=colNumber;i++){var colItem={};colItem.text=&quot;&quot;;colItem.datafield=&quot;_&quot;+i.toString();colItem.width=40;colItem.cellsrenderer=renderer;columnArray.push(colItem);}thegrid.jqxGrid({source:pointgridSource,width:(40*colNumber)+20,height:200,autoheight:false,theme:&#x27;pk\x5f\x6dg&#x27;,enableanimations:true,rowdetails:false,sortable:true,groupable:false,showheader:false,showgroupsheader:false,editable:false,selectionmode:&#x27;sin\x67\x6ce\x63\x65\x6cl&#x27;,columns:columnArray,rowsheight:34});},propagateStyleChanges:function(){var ov,cosm_item;for(var i=0;i&lt;digimapOverlays.length;i++){ov=digimapOverlays[i];switch(ov.overlaytype){case &quot;ma\x72\x6b\x65r&quot;:var newSize=mygis.O.H.pointStyle.size;var markerimage=new google.maps.MarkerImage(mygis.O.H.pointStyle.icon,new google.maps.Size(newSize,newSize),new google.maps.Point(0,0),new google.maps.Point(Math.floor(newSize&#x2F;2),newSize),new google.maps.Size(newSize,newSize));ov.setIcon(markerimage);break;case &quot;\x70o\x6c\x79\x6cine&quot;:ov.setOptions({strokeColor:mygis.O.H.lineStyle.color,strokeOpacity:mygis.O.H.lineStyle.opacity,strokeWeight:mygis.O.H.lineStyle.width});mygis.O.H.setLayerPreviousOpts(i,true);break;case &quot;\x72ec\x74a\x6egl\x65&quot;:case &quot;po\x6cy\x67o\x6e&quot;:ov.setOptions({fillColor:mygis.O.H.polyStyle.fillColor,fillOpacity:mygis.O.H.polyStyle.fillOpacity,strokeColor:mygis.O.H.polyStyle.strokeColor,strokeOpacity:mygis.O.H.polyStyle.strokeOpacity,strokeWeight:mygis.O.H.polyStyle.strokeWidth});mygis.O.H.setLayerPreviousOpts(i,true);break;}}var cosm_items=cosmeticList.get_items();for(var i=0;i&lt;cosm_items.get_count();i++){cosm_item=cosm_items.getItem(i);if(cosm_item.get_value()==&quot;\x6d\x61rk\x65r&quot;){cosm_item.set_imageUrl(mygis.O.H.pointStyle.icon);}}},clearCosmetic:function(){if(cosmeticList){cosmeticList.trackChanges();cosmeticList.get_items().clear();cosmeticList.commitChanges();}cosmeticLayer.destroyFeatures();countMarkers=0;countPolygons=0;countPolylines=0;},toggleEditMode:function(force_off,params){real_editMode= !real_editMode;if(drawControls.modify.active){drawControls.modify.deactivate();$(&quot;\x23m\x61pC\x6f\x6et\x61ine\x72&quot;).css(&#x27;\x63urs\x6f\x72&#x27;,&#x27;\x64efau\x6c\x74&#x27;);}else{mygis.V.checkAuthorization(&#x27;d\x69g\x69t\x69z\x65&#x27;,params);}},cosmeticPush:function(overlay){var imageurl;var listBox=cosmeticList;switch(overlay.overlaytype){case &quot;m\x61\x72ke\x72&quot;:imageurl=mygis.O.H.pointStyle.icon;break;case &quot;p\x6flyg\x6f\x6e&quot;:case &quot;\x72\x65c\x74angl\x65&quot;:imageurl=&quot;&#x2F;\x44e\x73k\x74\x6fpMo\x64\x75\x6ces&#x2F;AV\x4dap.\x4dap\x44i\x67\x69ti\x7aer\x2f\x49m\x61\x67e\x73\x2f\x44\x72\x61wi\x6eg&#x2F;\x70\x6fly\x67o\x6e\x5ffill\x2e\x70ng&quot;;break;case &quot;\x70o\x6c\x79l\x69ne&quot;:imageurl=&quot;&#x2F;De\x73\x6bt\x6fpMod\x75l\x65\x73&#x2F;\x41VMa\x70.\x4dapDigi\x74\x69ze\x72\x2f\x49ma\x67e\x73&#x2F;\x44\x72aw\x69n\x67\x2fpo\x6c\x79l\x69n\x65\x2ep\x6e\x67&quot;;break;}listBox.trackChanges();var listItem=new Telerik.Web.UI.RadListBoxItem();listItem.set_text(mygis.V.getOverlayTitle(overlay));listItem.set_value(overlay.overlaytype);listItem.set_imageUrl(imageurl);listBox.get_items().add(listItem);var listBtn=document.createElement(&quot;a&quot;);$(listBtn).addClass(&quot;\x63\x6fsm\x65tic\x44\x65l\x65\x74\x65Btn&quot;).insertBefore(listItem.get_imageElement()).bind(&#x27;cli\x63\x6b&#x27;,{ov:overlay},function(event){mygis.UI.deleteObject(event.data.ov);});var listBtn=document.createElement(&quot;a&quot;);$(listBtn).addClass(&quot;c\x6fs\x6deti\x63\x45\x64\x69tB\x74n&quot;).insertBefore(listItem.get_imageElement());listBox.commitChanges();mygis.UI.showEditableInfo();if(cosmeticList.get_items().get_count()&gt;1){mygis.O.Exporting.attachInfoToFeature();}var getFirstEditable=$($(&quot;\x23\x65\x64i\x74able\x49\x6efo&quot;).find(&quot;\x2ein\x66oFiel\x64\x73 \x73p\x61\x6e&quot;)[0]);if(getFirstEditable.html()==&quot;\x74i\x74le&quot;){$(getFirstEditable.parent().find(&quot;in\x70\x75t&quot;)[0])[0].value=cosmeticList.getItem(cosmeticLayer.features.length-1).get_text();}mygis.UI.notifyUnsaved();},notifyUnsaved:function(){var elem=document.getElementById(&#x27;\x6dapA\x63ti\x6f\x6e\x5f\x53ave&#x27;);elem.ex_RemoveClassName(&#x27;d\x69\x73\x61ble\x64&#x27;);clearInterval(saveFlasher);saveFlasher=setInterval(function(){var elem=document.getElementById(&#x27;\x6dapActio\x6e\x5f\x53\x61\x76e&#x27;);if(elem.ex_HasClassName(&#x27;f\x6cas\x68&#x27;)){elem.ex_RemoveClassName(&#x27;fla\x73\x68&#x27;);}else{elem.ex_AddClassName(&#x27;\x66l\x61sh&#x27;);}},500);},disableNotifyUnsaved:function(){var elem=document.getElementById(&#x27;m\x61p\x41\x63ti\x6fn_S\x61v\x65&#x27;);clearInterval(saveFlasher);if(elem.ex_HasClassName(&#x27;\x66l\x61sh&#x27;)){elem.ex_RemoveClassName(&#x27;\x66las\x68&#x27;);}elem.ex_AddClassName(&quot;\x64\x69\x73able\x64&quot;);},clearmygis:function(exceptme){var object;var myname;for(var i=0;i&lt;6;i++){switch(i){case 0:myname=&quot;\x6da\x72k\x65r&quot;;break;case 1:myname=&quot;p\x6fly\x6ci\x6e\x65&quot;;break;case 2:myname=&quot;p\x6fl\x79\x67on&quot;;break;case 3:myname=&quot;\x63ir\x63\x6ce&quot;;break;case 4:myname=&quot;re\x63\x74\x61n\x67le&quot;;break;case 5:myname=&quot;d\x72\x69ve&quot;;break;}if(myname!=exceptme){object=document.getElementById(myname+&quot;B\x75\x74\x74on&quot;);if(object){if(object.ex_HasClassName(&quot;btn\x54\x6fol\x5fs\x65l\x65\x63te\x64&quot;)){object.ex_RemoveClassName(&quot;b\x74n\x54\x6fol\x5f\x73elec\x74e\x64&quot;);}}}}},clearDrawingMode:function(){drawMode=0;editMode=false;for(key in drawControls){var control=drawControls[key];control.deactivate();}},setTool:function(toolname,object){var params=[];params.push(toolname);params.push(object);if(object.ex_HasClassName(&quot;btnTo\x6f\x6c_\x73e\x6ce\x63\x74e\x64&quot;)){object.ex_RemoveClassName(&quot;btnT\x6fol_\x73\x65l\x65c\x74\x65\x64&quot;);mygis.UI.clearDrawingMode();}else{mygis.UI.toggleEditMode(true,params);}},activateTool:function(params){var toolname=params[0];var object=params[1];drawControls.modify.activate();$(&quot;#\x6dap\x43on\x74a\x69\x6ee\x72&quot;).css(&#x27;\x63\x75\x72sor&#x27;,&#x27;cro\x73\x73ha\x69\x72&#x27;);drawMode=100;switch(toolname){case &quot;\x70o\x6cy\x67on&quot;:mygis.UI.clearmygis(toolname);break;case &quot;\x63ir\x63\x6ce&quot;:mygis.UI.clearmygis(toolname);break;case &quot;rec\x74\x61ng\x6c\x65&quot;:mygis.UI.clearmygis(toolname);break;case &quot;\x70oly\x6ci\x6e\x65&quot;:mygis.UI.clearmygis(toolname);break;case &quot;\x6d\x61rke\x72&quot;:mygis.UI.clearmygis(toolname);break;case &quot;\x64\x72ive&quot;:mygis.UI.clearmygis(toolname);drawMode=4;editMode=true;break;}for(key in drawControls){var control=drawControls[key];if(toolname==key){control.activate();}else{control.deactivate();}}object.ex_AddClassName(&quot;\x62\x74\x6eTo\x6fl_sel\x65c\x74\x65d&quot;);},toggleToolbar:function(){if(!toolbarToggling){toolbarToggling=true;if($(&quot;#ma\x70\x54\x6fol\x62a\x72&quot;).is(&quot;:\x76i\x73\x69\x62le&quot;)){$(&quot;#\x6dapTo\x6f\x6c\x62\x61r&quot;).hide();toolbarToggling=false;document.getElementById(&quot;\x6dap\x41\x63\x74ion\x5fTo\x6f\x6cs&quot;).setAttribute(&quot;c\x6cas\x73&quot;,&quot;&quot;);document.getElementById(&quot;\x6dap\x41ctio\x6e\x5fTo\x6f\x6c\x73&quot;).setAttribute(&quot;cl\x61ssN\x61\x6d\x65&quot;,&quot;&quot;);bH(false);}else{bH(true);$(&quot;\x23ma\x70T\x6fol\x62\x61r&quot;).show();toolbarToggling=false;document.getElementById(&quot;\x6dapAc\x74i\x6f\x6e\x5fTo\x6f\x6cs&quot;).setAttribute(&quot;c\x6ca\x73s&quot;,&quot;\x70\x72ess\x65d&quot;);document.getElementById(&quot;m\x61\x70Ac\x74ion\x5f\x54\x6f\x6fls&quot;).setAttribute(&quot;\x63lass\x4e\x61m\x65&quot;,&quot;pr\x65s\x73e\x64&quot;);}}return false;},toggleToolbar2:function(){if(!toolbarToggling){toolbarToggling=true;var sender=document.getElementById(&quot;\x74o\x67\x67\x6c\x65Tool\x62ar2&quot;);if($(&quot;\x23s\x65a\x72c\x68ba\x72&quot;).is(&quot;:vi\x73\x69\x62\x6ce&quot;)){$(&quot;\x23\x73\x65ar\x63\x68bar&quot;).hide(&quot;sl\x69d\x65&quot;,{direction:&quot;l\x65f\x74&quot;},1000,function(){toolbarToggling=false;});document.getElementById(&quot;tog\x67le\x54\x6f\x6fl\x62a\x722&quot;).setAttribute(&quot;c\x6ca\x73s&quot;,&quot;\x70r\x65sse\x64&quot;);document.getElementById(&quot;\x74og\x67le\x54oo\x6c\x62\x61r2&quot;).setAttribute(&quot;\x63\x6cas\x73N\x61me&quot;,&quot;p\x72es\x73\x65d&quot;);}else{$(&quot;#se\x61r\x63h\x62\x61\x72&quot;).show(&quot;s\x6c\x69de&quot;,{direction:&quot;\x6c\x65ft&quot;},1000,function(){toolbarToggling=false;});document.getElementById(&quot;tog\x67le\x54\x6f\x6f\x6cba\x722&quot;).setAttribute(&quot;c\x6c\x61ss&quot;,&quot;&quot;);document.getElementById(&quot;\x74o\x67g\x6ce\x54\x6fo\x6cbar2&quot;).setAttribute(&quot;\x63l\x61ssNa\x6d\x65&quot;,&quot;&quot;);}}return false;},toggleToolbar3:function(){if(!toolbarToggling){toolbarToggling=true;var sender=document.getElementById(&quot;to\x67\x67\x6ceT\x6folba\x72\x33&quot;);if($(&quot;\x23m\x69\x73cba\x72&quot;).is(&quot;:vis\x69\x62\x6c\x65&quot;)){$(&quot;\x23\x6dis\x63ba\x72&quot;).hide(&quot;sl\x69d\x65&quot;,{direction:&quot;\x6ce\x66t&quot;},1000,function(){toolbarToggling=false;});document.getElementById(&quot;\x74o\x67gle\x54\x6fol\x62\x61r3&quot;).setAttribute(&quot;\x63l\x61ss&quot;,&quot;p\x72\x65\x73sed&quot;);document.getElementById(&quot;\x74og\x67le\x54\x6fo\x6c\x62ar3&quot;).setAttribute(&quot;\x63l\x61ss\x4e\x61me&quot;,&quot;p\x72ess\x65\x64&quot;);}else{$(&quot;#\x6d\x69\x73cba\x72&quot;).show(&quot;\x73\x6cide&quot;,{direction:&quot;l\x65\x66t&quot;},1000,function(){toolbarToggling=false;});document.getElementById(&quot;tog\x67l\x65T\x6f\x6flb\x61\x723&quot;).setAttribute(&quot;\x63las\x73&quot;,&quot;&quot;);document.getElementById(&quot;to\x67g\x6c\x65\x54\x6folb\x61r3&quot;).setAttribute(&quot;c\x6c\x61ss\x4eam\x65&quot;,&quot;&quot;);}}return false;},closeToolbars:function(exceptme){for(var i=0;i&lt;2;i++){var barname;var btnname=&quot;\x74\x6fggleT\x6fo\x6c\x62\x61r&quot;+(i+1).toString();switch(i){case 0:barname=&quot;m\x61p\x54ool\x62\x61\x72&quot;;break;case 1:barname=&quot;sear\x63h\x62\x61\x72&quot;;break;}if(barname!=exceptme){if($(&quot;#&quot;+barname).is(&quot;\x3a\x76\x69si\x62le&quot;)){$(&quot;#&quot;+barname).hide();document.getElementById(btnname).setAttribute(&quot;\x63las\x73&quot;,&quot;p\x72es\x73e\x64&quot;);document.getElementById(btnname).setAttribute(&quot;cl\x61\x73sNa\x6d\x65&quot;,&quot;\x70r\x65ss\x65d&quot;);}}}},increaseMarkers:function(overlay){countMarkers++;digimapOverlays.push(overlay);mygis.UI.cosmeticPush(overlay);},increasePolygons:function(overlay){countPolygons++;digimapOverlays.push(overlay);mygis.UI.cosmeticPush(overlay);},increasePolylines:function(overlay){countPolylines++;digimapOverlays.push(overlay);mygis.UI.cosmeticPush(overlay);},scaleTo:function(scaleText){var element=document.getElementById(&quot;\x6fl\x53c\x61l\x65_\x77r\x61ppe\x72&quot;);var previousHandler=element.onchange;element.onchange=null;element.selectedIndex=0;element.onchange=previousHandler;var scalevalue=scaleText.substring(scaleText.indexOf(&quot;:&quot;)+1);scalevalue=scalevalue.replace(&#x2F;\.&#x2F;g,&#x27;&#x27;);digimap.zoomToScale(scalevalue);},createCriteriaMap:function(){if(!criteriaMap){criteriaMap=new OpenLayers.Map(&quot;c\x72i\x74\x65ri\x61Ma\x70&quot;,{fractionalZoom:true,controls:[new OpenLayers.Control.Navigation({handleRightClicks:true,autoActive:true,dragPanOptions:{enableKinetic:false}})]});var selectElem=document.getElementById(&quot;crite\x72\x69\x61M\x61pB\x67\x53\x65\x6cec\x74&quot;);var selectBackgrounds=[];var arrItem={};arrItem[&quot;n\x61m\x65&quot;]=strings.Coding.noBackground;arrItem[&quot;\x76alu\x65&quot;]=&quot;&quot;;selectBackgrounds.push(arrItem);criteriaMap.countBackgrounds=0;for(var i=0;i&lt;digimap.layers.length;i++){var item=digimap.layers[i];if(item.isBaseLayer){var arrItem={};arrItem[&quot;\x6e\x61me&quot;]=strings.LayerControl.labelBackground+item.name;arrItem[&quot;v\x61l\x75e&quot;]=item.name;selectBackgrounds.push(arrItem);criteriaMap.addLayer(item.clone());criteriaMap.countBackgrounds+=1;}}mygis.V.populateSelect(selectElem,selectBackgrounds,true);selectElem.selectedIndex=1;selectElem.onchange=function(){var sel=document.getElementById(&quot;cr\x69\x74\x65\x72ia\x4dap\x42gS\x65\x6cec\x74&quot;);if(sel.selectedIndex&gt;0){criteriaMap.baseLayer.setVisibility(false);criteriaMap.setBaseLayer(criteriaMap.layers[sel.selectedIndex-1]);criteriaMap.baseLayer.setVisibility(true);}else{criteriaMap.baseLayer.setVisibility(false);}};criteriaMap.setCenter(digimap.getCenter(),digimap.getZoom());}},updateCriteriaMap:function(select,layername){var changeTo=select.selectedIndex;if(lastCritIndex!=changeTo){lastCritIndex=changeTo;var getTop=wmsHighlight? -2: -1;if(changeTo&gt;0){var layername=select.options[changeTo].value;layername=mygis.V.nameToUnderscore(layername);if((getTop== -2&amp;&amp;criteriaMap.layers.length&lt;criteriaMap.countBackgrounds+2)||criteriaMap.layers.length==criteriaMap.countBackgrounds){var layer=mygis.Map.getMapServerLayer(layername,currentMapPath,currentMapMaxExtent);criteriaMap.addLayer(layer);}else{criteriaMap.layers[criteriaMap.layers.length+getTop].mergeNewParams({layers:layername});}criteriaMap.layers[criteriaMap.layers.length+getTop].setVisibility(true);}else{criteriaMap.layers[criteriaMap.layers.length+getTop].setVisibility(false);}}},getCriteriaLayerString:function(){var fullLayerString=&quot;&quot;;var fullLayers=[];var layername;var searchContainer=$(&quot;\x23c\x72iteri\x61\x50a\x6e\x65l\x73&quot;);var selectArray=searchContainer.find(&quot;.d\x62\x54ab\x6c\x65Nam\x65&quot;);$.each(selectArray,function(i,v){if(v.selectedIndex&gt;0){layername=v.options[v.selectedIndex].value;layername=mygis.V.nameToUnderscore(layername);fullLayers.push(layername);}});fullLayerString=fullLayers.join(&quot;,&quot;);return fullLayerString;},dbPopulateDistinct:function(element){var thisRow=$(element).parent();var selectFrom=thisRow.find(&quot;.db\x46i\x65\x6c\x64Na\x6de&quot;)[0];var fieldname=selectFrom.options[selectFrom.selectedIndex].value;var checkstring=fieldname;if(checkstring.substr(checkstring.length-2)==&quot;\x25s&quot;){checkstring=checkstring.split(&quot;%&quot;)[0];}var tableSelect=thisRow.parent().find(&quot;\x2e\x64\x62T\x61bleN\x61me&quot;)[0];var layername=tableSelect.options[tableSelect.selectedIndex].value;var selectTo=thisRow.find(&quot;.d\x62Valu\x65\x44\x69s\x74i\x6e\x63t&quot;)[0];if(layername&amp;&amp;fieldname){var customUrl=&quot;\x2fm\x67\x72\x65\x71\x2ea\x73px?qtype\x3d\x47etL\x61\x79erD\x69sti\x6e\x63\x74&amp;\x71C\x6fn\x74\x65n\x74s=&quot;+escape(layername.replace(&#x2F; &#x2F;g,&quot;_&quot;)+&quot;$&quot;+checkstring);$.ajax({type:&quot;G\x45T&quot;,url:customUrl,success:function(data){var datacolumns=[];var row;try{var realResults=eval(data);$.each(realResults,function(index,value){row={};row[&quot;\x6ea\x6de&quot;]=value;row[&quot;\x76alu\x65&quot;]=value;datacolumns.push(row);});mygis.V.populateSelect(selectTo,datacolumns);$(selectTo).css({&quot;\x64is\x70la\x79&quot;:&quot;\x69n\x6cin\x65&quot;});thisRow.find(&quot;.dbF\x69e\x6cd\x56a\x6c\x75\x65&quot;)[0].value=&quot;&quot;;}catch(err){L(data);}}});}},dbGetFromDistinct:function(element){var thisRow=$(element).parent();thisRow.find(&quot;\x2e\x64b\x46ield\x56\x61\x6cue&quot;)[0].value=element.options[element.selectedIndex].value;},dbFieldPopulate:function(element){var container=$(&quot;#da\x74\x61b\x61se\x41n\x61\x6cys\x69\x73&quot;);var tableRow=$(element).parent();var currentPanel=tableRow.parent();var secondRow=currentPanel.find(&quot;\x2ecr\x69\x74eriaS\x65c\x6fn\x64\x52\x6fw&quot;);var selectTo=secondRow.find(&quot;.\x64\x62\x46\x69e\x6cdName&quot;);var critButton=tableRow.find(&#x27;.\x61n\x64B\x75tt\x6f\x6e&#x27;)[0];if(secondRow.length&gt;1){secondRow.slice(1).remove();}secondRow.find(&quot;.d\x62V\x61\x6cu\x65\x44ist\x69n\x63t&quot;).css({&quot;\x64i\x73p\x6cay&quot;:&quot;n\x6fn\x65&quot;});mygis.UI.updateCriteriaMap(element);if(element.selectedIndex&gt;0){critButton.ex_RemoveClassName(&#x27;d\x69\x73\x61bl\x65d&#x27;);var layername=element.options[element.selectedIndex].value;var customUrl=&quot;\x2f\x6d\x67\x72eq\x2e\x61\x73px?q\x74ype=\x47\x65t\x4cay\x65\x72F\x69eld\x73&amp;\x71C\x6fn\x74en\x74s=&quot;+escape(layername.replace(&#x2F; &#x2F;g,&quot;_&quot;));$.ajax({type:&quot;GE\x54&quot;,url:customUrl,success:function(data){var datacolumns=mygis.J.resultLayerDetails(data);$.each(selectTo,function(i,v){mygis.V.populateSelect(v,datacolumns);});}});}else{critButton.ex_AddClassName(&quot;di\x73\x61bl\x65\x64&quot;);secondRow.css({&quot;\x64is\x70la\x79&quot;:&quot;n\x6f\x6ee&quot;});critButton.ex_RemoveClassName(&quot;\x70re\x73se\x64&quot;);}},dbCriteriaClick:function(element){var container=$(&quot;#\x63\x72it\x65r\x69\x61Pa\x6eel\x73&quot;);var containerChildren=container.children();var innertext=element.className.split(&quot; &quot;)[0];switch(innertext){case &quot;b\x41n\x64&quot;:case &quot;\x62Or&quot;:case &quot;\x62X\x6fr&quot;:case &quot;b\x4e\x6ft&quot;:var actionRow=$(element).parent();var prevPressed=actionRow.find(&quot;.p\x72e\x73s\x65\x64&quot;)[0];if(prevPressed!=element){prevPressed.ex_RemoveClassName(&quot;pr\x65\x73s\x65d&quot;);}element.ex_AddClassName(&quot;pre\x73\x73e\x64&quot;);mygis.UI.dbCriteriaUpdateDescription();break;case &quot;a\x64d\x50an\x65\x6c&quot;:var actionRow=$(element).parent();var currentPanel=actionRow.parent();var getACopy=currentPanel.clone(true);getACopy.find(&quot;.cl\x6fs\x65Pa\x6e\x65\x6c&quot;).css({&quot;di\x73p\x6ca\x79&quot;:&quot;in\x6c\x69\x6ee&quot;});getACopy.find(&quot;.cr\x69te\x72i\x61\x53eco\x6ed\x52\x6f\x77&quot;).slice(1).remove();getACopy.find(&quot;\x2edbF\x69\x65\x6cdNa\x6de&quot;)[0].selectedIndex= -1;getACopy.find(&quot;\x2e\x64\x62Fi\x65ldO\x70er\x61\x74or&quot;)[0].selectedIndex= -1;getACopy.find(&quot;\x2ed\x62\x46\x69\x65\x6cdValue&quot;)[0].value=&quot;&quot;;getACopy.find(&quot;\x2e\x64bValu\x65\x44\x69s\x74i\x6ect&quot;).css({&quot;\x64\x69s\x70lay&quot;:&quot;\x6eon\x65&quot;});getACopy.find(&quot;\x2e\x63r\x69t\x65ri\x61Wra\x70\x70er\x4cege\x6e\x64&quot;).html(strings.QBuilder.panelTitle);container.append(getACopy);break;case &quot;\x61\x6ed\x42ut\x74on&quot;:case &quot;\x63\x72\x69\x74Dup\x6c\x69cate&quot;:var actionRow=$(element).parent();var currentPanel=actionRow.parent().parent();var criteriaRow=$(currentPanel.find(&quot;.c\x72i\x74er\x69\x61\x53ec\x6f\x6edR\x6fw&quot;)[0]);var currentIndex=containerChildren.index(currentPanel);if(innertext==&quot;a\x6e\x64B\x75t\x74on&quot;&amp;&amp; !element.ex_HasClassName(&quot;\x64is\x61\x62\x6ced&quot;)){if(element.ex_HasClassName(&quot;pre\x73\x73e\x64&quot;)){var getACopy=criteriaRow.clone(true);getACopy.find(&quot;\x2edb\x46i\x65ld\x4ea\x6de&quot;)[0].selectedIndex= -1;getACopy.find(&quot;.d\x62F\x69eldOpe\x72\x61\x74\x6f\x72&quot;)[0].selectedIndex= -1;getACopy.find(&quot;\x2e\x64\x62Fie\x6cdVa\x6cu\x65&quot;)[0].value=&quot;&quot;;getACopy.find(&quot;.d\x62Va\x6cue\x44is\x74\x69\x6e\x63t&quot;).css({&quot;dis\x70\x6c\x61y&quot;:&quot;\x6eo\x6ee&quot;});getACopy.find(&quot;.c\x72i\x74\x65ri\x61\x4dOD&quot;).css({&quot;di\x73p\x6ca\x79&quot;:&quot;\x62l\x6fck&quot;});getACopy.find(&quot;.\x63\x72\x69\x74Remo\x76e&quot;).css({&quot;\x64isp\x6c\x61y&quot;:&quot;\x69\x6eli\x6ee&quot;});currentPanel.append(getACopy);}else{criteriaRow.css({&quot;dis\x70l\x61\x79&quot;:&quot;b\x6co\x63k&quot;});element.ex_AddClassName(&quot;\x70re\x73se\x64&quot;);}}else{var thisRow=actionRow.parent();var getACopy=thisRow.clone(true);getACopy.find(&quot;.d\x62\x46iel\x64Na\x6d\x65&quot;)[0].selectedIndex=thisRow.find(&quot;.\x64bF\x69e\x6c\x64Nam\x65&quot;)[0].selectedIndex;getACopy.find(&quot;.dbF\x69\x65\x6cd\x4f\x70\x65r\x61tor&quot;)[0].selectedIndex=thisRow.find(&quot;.db\x46\x69e\x6c\x64Ope\x72\x61t\x6fr&quot;)[0].selectedIndex;getACopy.find(&quot;.\x63\x72i\x74\x65riaMO\x44&quot;).css({&quot;d\x69\x73pla\x79&quot;:&quot;\x62lo\x63k&quot;});getACopy.find(&quot;\x2e\x64bVa\x6c\x75eDi\x73\x74\x69nct&quot;).css({&quot;dis\x70\x6c\x61y&quot;:&quot;\x6e\x6fne&quot;});getACopy.find(&quot;.c\x72\x69\x74\x52emov\x65&quot;).css({&quot;d\x69sp\x6c\x61y&quot;:&quot;i\x6e\x6c\x69ne&quot;});getACopy.insertAfter(thisRow);}break;case &quot;\x73e\x61r\x63h&quot;:var toSend=document.getElementById(&quot;c\x72iter\x69\x61\x55\x52L&quot;).value;var queryname=document.getElementById(&quot;crit\x46\x72\x69e\x6e\x64lyN\x61\x6de&quot;).value;if(toSend){var myurl=&quot;\x2f\x6d\x67re\x71\x2easpx\x3fq\x74y\x70\x65\x3dDire\x63tQ\x75ery\x26\x71\x43\x6f\x6ete\x6ets=&quot;+escape(toSend);$.ajax({type:&quot;GE\x54&quot;,url:myurl,success:function(data){var response=eval(data);if(typeof response==&quot;\x6fbj\x65c\x74&quot;){$(&quot;#bo\x74to\x6d\x54\x61bC\x6fn\x74a\x69\x6e\x65r&quot;).jqxTabs(&#x27;\x73e\x6cec\x74&#x27;,1);var qItem={};qItem.text=queryname;ad(strings.QBuilder.feed_SearchSuccess+qItem.text);qItem.value= -1;qItem.isInitialized=true;qItem.linkedResults=response;qItem.isDBQuery=true;querySource.push(qItem);var source={localdata:querySource,datatype:&quot;l\x6f\x63al&quot;,datafields:[{name:&#x27;te\x78\x74&#x27;},{name:&#x27;va\x6cu\x65&#x27;},{name:&#x27;i\x73\x49nit\x69a\x6ciz\x65\x64&#x27;},{name:&#x27;l\x69nkedR\x65\x73\x75l\x74\x73&#x27;},{name:&#x27;i\x73\x44B\x51u\x65ry&#x27;}]};var dataAdapter=new $.jqx.dataAdapter(source,{async:false});dataAdapter.dataBind();var leftList=$(&quot;#i\x6e\x66o\x4c\x65ft\x4c\x69st&quot;);leftList.jqxListBox({source:dataAdapter,displayMember:&quot;t\x65\x78t&quot;,valueMember:&quot;v\x61l\x75e&quot;});$(&quot;#\x64atab\x61\x73eAn\x61\x6c\x79\x73i\x73&quot;).dialog(&#x27;clo\x73\x65&#x27;);var itemCount=leftList.jqxListBox(&#x27;get\x49\x74e\x6d\x73&#x27;).length;leftList.jqxListBox(&#x27;\x73ele\x63\x74\x49nd\x65x&#x27;,itemCount-1);}else{alert(response);}}});}else{L(&quot;No q\x75er\x79\x20\x79e\x74&quot;);}break;case &quot;c\x6co\x73\x65P\x61\x6eel&quot;:var addPanel=$(element).parent().parent();addPanel.remove();mygis.UI.dbCriteriaUpdateDescription();break;case &quot;cr\x69\x74R\x65m\x6f\x76e&quot;:var actionRow=$(element).parent().parent();actionRow.remove();mygis.UI.dbCriteriaUpdateDescription();break;}},dbCriteriaReset:function(){var container=$(&quot;\x23crite\x72\x69\x61Pa\x6e\x65\x6cs&quot;);var containerChildren=container.children();if(containerChildren.length&gt;1){containerChildren.slice(1).remove();}var topPanel=$(containerChildren[0]);var getCriteria=topPanel.find(&quot;.\x63\x72i\x74e\x72ia\x53eco\x6e\x64Ro\x77&quot;);if(getCriteria.length&gt;1){getCriteria.slice(1).remove();}var secondRow=topPanel.find(&quot;.\x63r\x69te\x72i\x61S\x65\x63ondR\x6f\x77&quot;);var fieldName=secondRow.find(&quot;.db\x46ie\x6cdN\x61\x6d\x65&quot;)[0];var fieldOP=secondRow.find(&quot;\x2ed\x62Fie\x6c\x64Op\x65rat\x6f\x72&quot;)[0];var fieldVal=secondRow.find(&quot;.\x64b\x46ie\x6c\x64Val\x75\x65&quot;)[0];fieldVal.value=&quot;&quot;;fieldOP.selectedIndex=0;fieldName.selectedIndex=0;mygis.UI.dbSelectChanged(fieldOP);mygis.UI.dbSelectChanged(fieldName);secondRow.css({&quot;d\x69s\x70l\x61y&quot;:&quot;\x6eo\x6ee&quot;});var firstRow=topPanel.find(&quot;.\x63ri\x74\x65\x72\x69a\x46irs\x74\x52ow&quot;);var tableSelect=firstRow.find(&quot;\x2e\x64\x62Tab\x6c\x65Name&quot;)[0];var addCritBtn=firstRow.find(&quot;.\x61\x6e\x64B\x75\x74ton&quot;)[0];addCritBtn.ex_RemoveClassName(&quot;p\x72ess\x65\x64&quot;);tableSelect.selectedIndex=0;mygis.UI.dbFieldPopulate(tableSelect);mygis.UI.dbCriteriaUpdateDescription();wmsHighlight=null;},dbSelectChanged:function(element){var secondRow=$(element).parent().parent();var innerText=element.className.split(&quot; &quot;)[0];var target=&quot;&quot;;switch(innerText){case &quot;\x64bF\x69eld\x4ea\x6d\x65&quot;:target=&quot;\x2ed\x62F\x69eldO\x70\x65\x72\x61tor&quot;;secondRow.find(&quot;.d\x62V\x61l\x75eD\x69s\x74\x69n\x63t&quot;).css({&quot;di\x73p\x6c\x61y&quot;:&quot;n\x6f\x6ee&quot;});break;case &quot;d\x62\x46\x69el\x64\x4f\x70er\x61tor&quot;:target=&quot;.\x64bFi\x65\x6cd\x56al\x75\x65&quot;;break;}var targetElement=secondRow.find(target)[0];if(element.selectedIndex&gt;0){$(targetElement).removeAttr(&quot;d\x69sa\x62l\x65\x64&quot;);}else{$(targetElement).attr(&quot;d\x69sa\x62l\x65\x64&quot;,&quot;d\x69sa\x62\x6ce\x64&quot;);}},dbCriteriaUpdateDescription:function(){$(&quot;\x23cri\x74S\x65a\x72\x63hD\x65sc\x72i\x70\x74\x69on&quot;).empty();var resultText=&quot;&quot;;var qUrl=&quot;&quot;;var panels=$(&quot;\x23c\x72\x69\x74eria\x50\x61ne\x6cs&quot;).children();var queries=[];$.each(panels,function(i,singlePanel){var panelText=&quot;&quot;;var whereText=&quot;&quot;;var panelQ=&quot;&quot;;var panelQW=&quot;&quot;;var atLeastOneWhere=false;var selectedTable=$(singlePanel).find(&quot;\x2ed\x62Tab\x6ceN\x61\x6de&quot;)[0];if(selectedTable.selectedIndex&gt;0){panelText+=&quot;&lt;s\x70\x61\x6e \x63l\x61s\x73=\x27s\x71lKe\x79\x77ord\x27&gt;&quot;;panelText+=strings.QBuilder.keywordSELECT;panelText+=&quot;\x3c\x2fspa\x6e&gt;&quot;;panelText+=mygis.V.format(&quot; \x7b\x30} &quot;,strings.QBuilder.keywordALL);panelText+=&quot;&lt;\x73p\x61n c\x6c\x61ss\x3d\x27s\x71l\x4bey\x77ord\x27\x3e&quot;;panelText+=mygis.V.format(&quot;\x7b0\x7d &quot;,strings.QBuilder.keywordFROM);panelText+=&quot;\x3c&#x2F;spa\x6e\x3e&quot;;panelText+=selectedTable.options[selectedTable.selectedIndex].text;panelQ+=mygis.V.nameToUnderscore(selectedTable.options[selectedTable.selectedIndex].value);var whereClauses=$(singlePanel).find(&quot;.\x63\x72ite\x72iaSec\x6f\x6e\x64\x52\x6fw&quot;);$.each(whereClauses,function(j,singleWhere){var fieldName=$(singleWhere).find(&quot;.dbFi\x65\x6c\x64\x4eam\x65&quot;)[0];var fieldOp=$(singleWhere).find(&quot;\x2edb\x46\x69\x65ld\x4fp\x65ra\x74or&quot;)[0];var fieldValue=$(singleWhere).find(&quot;.\x64\x62Fi\x65\x6cdV\x61l\x75e&quot;)[0];if(fieldName.selectedIndex&gt;0&amp;&amp;fieldOp.selectedIndex&gt;0&amp;&amp;fieldValue.value!=&quot;&quot;){if(j&gt;0&amp;&amp;atLeastOneWhere){var fieldMOD=$(singleWhere).find(&quot;\x2ecrite\x72\x69a\x4dO\x44&quot;).find(&quot;\x2ep\x72e\x73\x73ed&quot;)[0];var fieldMODtext=$(fieldMOD).html();var fieldMODvalue=fieldMOD.className.split(&quot; &quot;)[0];whereText+=&quot;\x3cs\x70\x61\x6e \x63\x6c\x61ss\x3d\x27s\x71l\x4beyword&#x27;&gt;&quot;;whereText+=fieldMODtext+&quot; &quot;;whereText+=&quot;&lt;&#x2F;s\x70\x61\x6e&gt;&quot;;panelQW+=&quot;%&quot;+fieldMODvalue;}if(!atLeastOneWhere){whereText+=&quot;\x3cspa\x6e\x20c\x6c\x61s\x73\x3d\x27sq\x6cKe\x79word\x27&gt;&quot;;whereText+=mygis.V.format(&quot;{\x30}\x20&quot;,strings.QBuilder.keywordWHERE);whereText+=&quot;&lt;\x2fs\x70an\x3e&quot;;atLeastOneWhere=true;}whereText+=fieldName.options[fieldName.selectedIndex].text;whereText+=&quot; &quot;;whereText+=&quot;\x3c\x73\x70an c\x6c\x61\x73s=&#x27;sq\x6cK\x65ywo\x72\x64\x27&gt;&quot;;whereText+=fieldOp.options[fieldOp.selectedIndex].text;whereText+=&quot;&lt;&#x2F;\x73pa\x6e\x3e&quot;;whereText+=&quot; &quot;;whereText+=&quot;&lt;\x73\x70an \x63la\x73\x73\x3d\x27sq\x6c\x56alue&#x27;\x3e&quot;;whereText+=fieldValue.value;whereText+=&quot;&lt;\x2fs\x70a\x6e&gt;&quot;;whereText+=&quot; &quot;;var formattedInput;var formattedField;var checkstring=fieldName.options[fieldName.selectedIndex].value;if(checkstring.substr(checkstring.length-2)==&quot;%\x73&quot;&amp;&amp;checkstring[0]!=&quot;\&quot;&quot;&amp;&amp;checkstring[checkstring.length-1]!=&quot;\&quot;&quot;){formattedInput=mygis.V.format(&quot;\&quot;{0\x7d\&quot;&quot;,fieldValue.value);}else{formattedInput=fieldValue.value;}if(checkstring.substr(checkstring.length-2)==&quot;%\x73&quot;){formattedField=checkstring.split(&quot;%&quot;)[0];}else{formattedField=checkstring;}panelQW+=mygis.V.format(&quot;#{0}\x23\x7b1\x7d#{\x32\x7d&quot;,formattedField,fieldOp.options[fieldOp.selectedIndex].value,formattedInput);}});if(atLeastOneWhere){panelText+=&quot; &quot;+whereText;panelQ+=panelQW;}}if(panelText){if(resultText){resultText+=&quot;\x3c\x62r\x20&#x2F;&gt;&quot;;resultText+=&quot;&lt;s\x70a\x6e \x63\x6ca\x73s\x3d&#x27;s\x71lKe\x79w\x6f\x72d\x27&gt;&quot;;resultText+=strings.QBuilder.keywordALSO;resultText+=&quot;&lt;&#x2F;sp\x61\x6e\x3e&quot;;resultText+=&quot;&lt;b\x72\x20\x2f&gt;&quot;;qUrl+=&quot;$&quot;;}resultText+=panelText;qUrl+=panelQ;queries.push(panelQ);}});if(resultText){document.getElementById(&quot;c\x72ite\x72i\x61U\x52\x4c&quot;).value=qUrl;$(&quot;\x23c\x72i\x74S\x65\x61\x72c\x68Des\x63ripti\x6f\x6e&quot;).html(resultText);}},dbResultsSelect:function(element,on){var tab=$(element).parent().parent().parent();var grid=$(tab.find(&quot;\x2ej\x71\x78\x2dgrid&quot;)[0]);if(on){var alreadySelected=grid.jqxGrid(&#x27;\x73\x65le\x63t\x65\x64r\x6fwinde\x78\x65s&#x27;);var gridLength=grid.jqxGrid(&#x27;\x73\x6f\x75rce&#x27;).records.length;grid.unbind(&#x27;row\x73\x65l\x65\x63t&#x27;);for(var i=0;i&lt;gridLength;i++){if(alreadySelected.indexOf(i)== -1)grid.jqxGrid(&#x27;s\x65le\x63\x74r\x6fw&#x27;,i);}grid.bind(&#x27;r\x6f\x77sel\x65\x63t&#x27;,aw);}else{grid.jqxGrid(&#x27;cle\x61\x72\x73\x65l\x65ctio\x6e&#x27;);}},dbResultsOnMap:function(element){var tab=$(element).parent().parent().parent();var grid=$(tab.find(&quot;\x2ejqx\x2d\x67ri\x64&quot;)[0]);var gridName=grid.data(&#x27;\x67\x72\x69\x64Ta\x62\x6ceName&#x27;).trim();var alreadySelected=grid.jqxGrid(&#x27;sele\x63t\x65dr\x6f\x77\x69n\x64ex\x65\x73&#x27;);var resultString=&quot;&quot;;gridName=mygis.V.nameToUnderscore(gridName);var count=0;resultString=gridName+&quot;#&quot;;for(var i=0;i&lt;alreadySelected.length;i++){count+=1;if(count&gt;1){resultString+=&quot;%bO\x72\x23&quot;;}var item=grid.jqxGrid(&#x27;\x67et\x72\x6fwd\x61t\x61&#x27;,alreadySelected[i]);resultString+=mygis.V.format(&quot;O\x49D\x23\x45Q#\x7b0\x7d&quot;,item.OID);}if(resultString[resultString.length-1]!=&quot;#&quot;){mygis.J.highlightSelection([resultString]);$(&quot;\x23\x69n\x66oA\x6eal\x79si\x73&quot;).dialog(&#x27;\x63los\x65&#x27;);}else{L(&quot;You mu\x73\x74 se\x6c\x65ct at\x20l\x65a\x73\x74\x20\x6f\x6e\x65 \x72e\x63o\x72\x64!&quot;);}},saveDigiResults:function(response){var responseParts=response.split(&quot;$&quot;);var responseType=responseParts[0];var responseMessage=responseParts[1];switch(responseType){case &quot;s\x75\x63c\x65ss&quot;:ad(responseMessage);mygis.UI.disableNotifyUnsaved();mygis.UI.clearCosmetic();mygis.V.nudgeMap();break;case &quot;\x65\x72ror&quot;:L(responseMessage);break;}},getScale:function(element){var currentScale=Math.round(digimap.getScale());var container=$(element).parent();container.find(&quot;\x69np\x75t&quot;)[0].value=mygis.V.addCommas(currentScale);}};mygis.J={highlightSelection:function(queryArray,manualSLD){var sld;if(manualSLD){sld=&#x27;&lt;\x3f\x78ml \x76e\x72\x73i\x6fn\x3d&quot;1.0\x22 e\x6e\x63o\x64ing=&quot;\x75\x74\x66-\x38\x22\x3f&gt;&#x27;+manualSLD.replace(&#x2F;#&#x2F;g,&quot;%\x323&quot;);}else{sld=&#x27;\x3c?x\x6dl \x76ersio\x6e\x3d&quot;\x31\x2e0&quot; \x65\x6ec\x6f\x64i\x6eg\x3d\x22\x75t\x66-\x38&quot;?&gt;&#x27;+mygis.J.getSLDBody(queryArray).replace(&#x2F;#&#x2F;g,&quot;\x2523&quot;);}var wms_url=&quot;&#x2F;map\x73\x65r\x76\x65r\x2fw\x6ds&quot;;if(!selectionWMSLayer){selectionWMSLayer=new OpenLayers.Layer.WMS(&quot;H\x69g\x68l\x69\x67htWM\x53&quot;,wms_url,{&#x27;\x66\x6f\x72mat&#x27;:&#x27;pn\x67&#x27;,EXCEPTIONS:&#x27;\x49\x4eIMAG\x45&#x27;,CRS:&#x27;E\x50S\x47\x3a432\x36&#x27;,FORMAT:&#x27;i\x6d\x61g\x65&#x2F;pn\x67&#x27;,transparent:true,sld_body:sld},{&#x27;\x76\x69s\x69b\x69\x6city&#x27;:true,&#x27;is\x42a\x73\x65L\x61y\x65r&#x27;:false,&#x27;\x61\x6cpha&#x27;:true,singleTile:true,ratio:1});digimap.addLayer(selectionWMSLayer);}else{selectionWMSLayer.mergeNewParams({sld_body:sld});}if(!selectionFlasher.timer&amp;&amp; !manualSLD){selectionFlasher.count=0;selectionFlasher.timer=setInterval(function(){selectionFlasher.count+=1;if(selectionFlasher.count&gt;10){clearInterval(selectionFlasher.timer);selectionFlasher.timer=null;}else{selectionWMSLayer.setVisibility(!selectionWMSLayer.getVisibility());}},500);}},highlightAll:function(queryArray){var sld=&#x27;&lt;?xm\x6c v\x65r\x73i\x6fn\x3d&quot;\x31.0&quot; \x65\x6ec\x6fdin\x67\x3d&quot;\x75\x74\x66\x2d8&quot;\x3f\x3e&#x27;+mygis.J.getSLDBody(queryArray).replace(&#x2F;#&#x2F;g,&quot;%\x323&quot;);var wms_url=&quot;\x2fm\x61p\x73\x65rve\x72&#x2F;wm\x73&quot;;var addFlag=false;if(!wmsHighlight){addFlag=true;wmsHighlight=new OpenLayers.Layer.WMS(&quot;\x48i\x67hli\x67\x68tW\x4dS&quot;,wms_url,{&#x27;f\x6f\x72ma\x74&#x27;:&#x27;pn\x67&#x27;,EXCEPTIONS:&#x27;I\x4eI\x4d\x41GE&#x27;,CRS:&#x27;\x45P\x53\x47:432\x36&#x27;,FORMAT:&#x27;\x69\x6dage\x2fpn\x67&#x27;,transparent:true,sld_body:sld},{&#x27;vis\x69\x62\x69l\x69t\x79&#x27;:true,&#x27;is\x42\x61se\x4c\x61\x79er&#x27;:false,&#x27;a\x6cph\x61&#x27;:true,singleTile:true,ratio:1});criteriaMap.addLayers([wmsHighlight]);}else{wmsHighlight.mergeNewParams({sld_body:sld});}},getSLDBody:function(queryArray){var sld={version:&quot;\x31.0.\x30&quot;,namedLayers:{}};for(var i=0;i&lt;queryArray.length;i++){var getSingleSld=mygis.J.getTableFilter(queryArray[i]);sld.namedLayers[getSingleSld.name]=getSingleSld;}var frmt=new OpenLayers.Format.SLD();return frmt.write(sld);},getCombinedFilter:function(combination,filters){var retvalue;var combType;switch(combination){case &quot;\x62A\x6ed&quot;:combType=OpenLayers.Filter.Logical.AND;break;case &quot;b\x4fr&quot;:combType=OpenLayers.Filter.Logical.OR;break;case &quot;\x62\x4eot&quot;:combType=OpenLayers.Filter.Logical.NOT;break;}retvalue=new OpenLayers.Filter.Logical({type:combType,filters:filters});return retvalue;},getTableFilter:function(querystring){var retvalue;var tableName;var conditions=querystring.split(&quot;%&quot;);var filters_AND=[];var OR_FLAG=false;var finalFilters=[];var singleFilter;var single;for(var i=0;i&lt;conditions.length;i++){var qParts=conditions[i].split(&quot;#&quot;);var mod_op;var prop,op,val;if(i==0){tableName=qParts[0];}else{mod_op=qParts[0];}prop=qParts[1];op=qParts[2];val=qParts[3];if(val){if(val.indexOf(&quot;\\&quot;)==0){val=val.substring(3,val.length-6);}}if(prop!=null&amp;&amp;op!=null&amp;&amp;val!=null){singleFilter=mygis.O.H.getSLDFilter(op,prop,val);}else{singleFilter=null;}if(i==0){if(mygis.J.peek(conditions,i+1)==&quot;b\x4fr&quot;){finalFilters.push(singleFilter);}else{filters_AND.push(singleFilter);}}else{switch(mod_op){case &quot;\x62No\x74&quot;:var negFilter=mygis.J.getCombinedFilter(mod_op,[singleFilter]);filters_AND.push(negFilter);break;case &quot;b\x41n\x64&quot;:filters_AND.push(singleFilter);break;case &quot;b\x4fr&quot;:if(filters_AND.length&gt;0){finalFilters.push(mygis.J.getCombinedFilter(&quot;bA\x6e\x64&quot;,filters_AND));}if(i==conditions.length-1||mygis.J.peek(conditions,i+1)==&quot;\x62Or&quot;){finalFilters.push(singleFilter);}else{filters_AND=[];filters_AND.push(singleFilter);}OR_FLAG=true;break;}}}if(conditions.length==1){if(singleFilter){singleRule=new OpenLayers.Rule({symbolizer:mygis.J.getSLDSymbolizer(),filter:singleFilter});}else{singleRule=new OpenLayers.Rule({symbolizer:mygis.J.getSLDSymbolizer()});}}else{if(filters_AND.length&gt;0&amp;&amp;OR_FLAG){finalFilters.push(mygis.J.getCombinedFilter(&quot;\x62A\x6ed&quot;,filters_AND));}var resultFilter=OR_FLAG?mygis.J.getCombinedFilter(&quot;b\x4fr&quot;,finalFilters):mygis.J.getCombinedFilter(&quot;bA\x6e\x64&quot;,filters_AND);singleRule=new OpenLayers.Rule({symbolizer:mygis.J.getSLDSymbolizer(),filter:resultFilter});}var namedLayer={name:tableName,userStyles:[]};namedLayer.userStyles[0]={rules:[]};namedLayer.userStyles[0].rules.push(singleRule);retvalue=namedLayer;return retvalue;},getSLDSymbolizer:function(){var retvalue={};retvalue[&#x27;Pol\x79\x67o\x6e&#x27;]={fillColor:&#x27;#FF\x30\x30\x300&#x27;,stroke:false},retvalue[&#x27;Li\x6e\x65&#x27;]={strokeColor:&#x27;\x23FF\x30\x3000&#x27;,strokeWidth:2},retvalue[&#x27;P\x6fi\x6et&#x27;]={graphicName:&#x27;s\x71\x75a\x72e&#x27;,fillColor:&#x27;#\x46\x460\x3000&#x27;,pointRadius:5};return retvalue;},peek:function(conditions,index){try{var items=conditions[index].split(&quot;#&quot;);return items[0];}catch(err){return &quot;&quot;;}},getLayerDetails:function(index,forID){var layername=layerSource.records[index].layerTABLE;$.ajax({type:&quot;\x47ET&quot;,url:&quot;\x2fm\x67\x72\x65q.as\x70x?q\x74y\x70e\x3dG\x65t\x4c\x61\x79\x65\x72\x46ie\x6cds&amp;q\x43o\x6eten\x74s=&quot;+escape(layername.replace(&#x2F; &#x2F;g,&quot;_&quot;)),success:function(data){var datacolumns=mygis.J.resultLayerDetails(data);if(forID==&quot;\x65ditable\x49\x6e\x66\x6f&quot;){var firstField=false;var fieldCount=0;var section1=$(&quot;#\x65\x64i\x74a\x62leI\x6ef\x6f&quot;).find(&quot;\x2ei\x6efoF\x69\x65ld\x73&quot;);var section2=$(&quot;\x23\x65\x64itabl\x65\x49nf\x6f&quot;).find(&quot;.i\x6efoI\x6da\x67\x65\x73&quot;);var section3=$(&quot;\x23edita\x62\x6ce\x49\x6e\x66o&quot;).find(&quot;.i\x6ef\x6f\x46\x69les\x20&quot;);var section4=$(&quot;#e\x64\x69\x74\x61\x62\x6ceInfo&quot;).find(&quot;\x2e\x69\x6e\x66oLin\x6bs &quot;);var DBFields=$(&quot;&lt;d\x69\x76 &#x2F;\x3e&quot;);var DBImages=$(&quot;\x3cd\x69v &#x2F;\x3e&quot;);var DBFiles=$(&quot;&lt;d\x69v \x2f\x3e&quot;);var DBLinks=$(&quot;\x3c\x64iv \x2f&gt;&quot;);var imageFields=0;var fileFields=0;var linkFields=0;section1.empty();section2.empty();section3.empty();section4.empty();$.each(datacolumns,function(i,v){var skipField=false;if(v.name.indexOf(&quot;_\x5f&quot;)==0){skipField=true;var nameParts=v.name.substring(2).split(&quot;_&quot;);var type=nameParts[0];switch(type){case &#x27;\x49MG&#x27;:imageFields+=1;break;case &#x27;L\x4eK&#x27;:linkFields+=1;break;case &#x27;\x46I\x4cE&#x27;:fileFields+=1;break;}}if(v.name==&quot;\x47\x65o\x6d\x65try&quot;||v.name==&quot;O\x49D&quot;||v.name==&quot;Ce\x6et\x65\x72\x5fX&quot;||v.name==&quot;Cen\x74\x65\x72_\x59&quot;)skipField=true;if(!skipField){var newLine=$(&quot;\x3cdi\x76 &#x2F;\x3e&quot;);var newHead=$(&quot;\x3cs\x70a\x6e\x20&#x2F;&gt;&quot;);var newValue=$(&quot;&lt;i\x6e\x70\x75t\x20typ\x65=&#x27;te\x78t\x27 \x2f\x3e&quot;);newHead.html(v.name);newHead.addClass(&quot;fe\x61\x74\x75r\x65\x48Cell&quot;);newValue.addClass(&quot;fe\x61tu\x72\x65VC\x65l\x6c&quot;);newLine.append(newHead);newLine.append(newValue);DBFields.append(newLine);if(!firstField){firstField=true;}else{}fieldCount+=1;}});section1.append(DBFields);var existingImgTitle=mygis.V.format(&quot;\x7b\x30} \x7b\x31} {2\x7d&quot;,&quot;Up\x20t\x6f&quot;,imageFields,&quot;im\x61\x67\x65 \x66\x69\x65lds ha\x76\x65\x20al\x72ead\x79 be\x65\x6e\x20cre\x61t\x65\x64&quot;);var existingLinkTitle=mygis.V.format(&quot;{0} {\x31\x7d\x20\x7b\x32}&quot;,&quot;\x55p t\x6f&quot;,linkFields,&quot;l\x69nk\x20\x66ields\x20h\x61ve alre\x61d\x79\x20\x62e\x65\x6e\x20\x63\x72e\x61t\x65\x64&quot;);var existingFileTitle=mygis.V.format(&quot;\x7b0\x7d\x20{\x31\x7d {2}&quot;,&quot;\x55p\x20to&quot;,fileFields,&quot;\x66\x69le fi\x65l\x64\x73\x20h\x61v\x65\x20\x61\x6cr\x65a\x64y \x62ee\x6e c\x72ea\x74ed&quot;);var imagePrompt=$(&quot;&lt;\x64i\x76 \x2f&gt;&quot;).append(existingImgTitle);var linkPrompt=$(&quot;\x3c\x64i\x76 &#x2F;&gt;&quot;).append(existingLinkTitle);var filePrompt=$(&quot;&lt;d\x69\x76 \x2f&gt;&quot;).append(existingFileTitle);DBImages.append(imagePrompt);DBFiles.append(filePrompt);DBLinks.append(linkPrompt);var actionbar=$(&quot;&lt;di\x76\x20c\x6ca\x73s\x3d&#x27;\x75\x70load\x41\x63t\x69o\x6e\x42a\x72\x27 &#x2F;&gt;&quot;);var actionBtnAdd=$(&quot;\x3ca h\x72\x65f=\x27#\x27 \x63lass=&#x27;a\x64dN\x65w&#x27;\x20\x6f\x6e\x63lic\x6b\x3d&#x27;\x64isplay\x45\x72\x72or(\&#x27;\x4e\x6ft\x20a\x75\x74h\x6f\x72i\x7a\x65\x64\&#x27;\x29;\x72\x65tu\x72\x6e \x66alse\x3b\x27\x20&#x2F;&gt;&quot;);actionBtnAdd.html(&quot;A\x64\x64 n\x65w&quot;);for(var i=0;i&lt;imageFields;i++){var newLine=$(&quot;&lt;\x64\x69v \x2f&gt;&quot;);var newHead=$(&quot;&lt;sp\x61\x6e\x20\x2f&gt;&quot;);var newValue=$(&quot;&lt;inpu\x74 t\x79\x70e\x3d\x27\x66i\x6ce\x27\x20\x61cc\x65pt\x3d&#x27;i\x6dag\x65\x2f\x6ap\x67\x2cim\x61\x67\x65&#x2F;gi\x66&#x27; \x2f&gt;&quot;);newHead.html(&quot;\x41\x64d \x69\x6dage&quot;);newHead.addClass(&quot;f\x65\x61tu\x72eHCe\x6c\x6c&quot;);newValue.addClass(&quot;f\x65\x61t\x75reV\x43e\x6cl&quot;);newLine.append(newHead);newLine.append(newValue);}for(var i=0;i&lt;linkFields;i++){var newLine=$(&quot;&lt;di\x76 \x2f\x3e&quot;);var newHead=$(&quot;&lt;\x73p\x61n \x2f\x3e&quot;);var newValue=$(&quot;\x3ci\x6eput\x20\x74\x79pe\x3d&#x27;t\x65\x78t&#x27;\x20&#x2F;&gt;&quot;);newHead.html(&quot;\x41\x64\x64 li\x6ek&quot;);newHead.addClass(&quot;\x66eat\x75re\x48Ce\x6c\x6c&quot;);newValue.addClass(&quot;fe\x61tur\x65\x56C\x65l\x6c&quot;);newLine.append(newHead);newLine.append(newValue);DBLinks.append(newLine);}for(var i=0;i&lt;fileFields;i++){var newLine=$(&quot;\x3cd\x69v\x20&#x2F;&gt;&quot;);var newHead=$(&quot;\x3c\x73pan \x2f\x3e&quot;);var newValue=$(&quot;&lt;i\x6e\x70u\x74\x20\x74\x79pe\x3d\x27fi\x6ce&#x27; \x61c\x63ep\x74=&#x27;im\x61g\x65\x2f\x6ap\x67\x2cim\x61g\x65&#x2F;g\x69f\x27\x20&#x2F;&gt;&quot;);newHead.html(&quot;\x41dd\x20\x69ma\x67e&quot;);newHead.addClass(&quot;\x66e\x61tureHC\x65\x6c\x6c&quot;);newValue.addClass(&quot;fe\x61\x74ure\x56C\x65\x6cl&quot;);newLine.append(newHead);newLine.append(newValue);}var iframeUploader=$(&quot;&lt;\x69\x66\x72a\x6de \x2f&gt;&quot;);iframeUploader.attr(&quot;s\x72c&quot;,&quot;\x2f\x63us\x74\x6f\x6d\x55plo\x61d.as\x70x&quot;);iframeUploader.attr(&quot;h\x65\x69g\x68t&quot;,&quot;2\x356\x70x&quot;);iframeUploader.attr(&quot;\x77idt\x68&quot;,&quot;\x3280\x70x&quot;);DBImages.append(iframeUploader);section2.append(DBImages);section3.append(DBFiles);section4.append(DBLinks);section2.append(actionbar.clone());section3.append(actionbar.clone());section4.append(actionbar.clone());}}});},resultLayerDetails:function(data){var datacolumns=[];var row;var realResults=eval(data);$.each(realResults,function(index,value){row={};row[&quot;\x6ea\x6de&quot;]=value.fieldNAME;if(value.fieldTYPE.indexOf(&quot;\x63\x68ar&quot;)&gt; -1||value.fieldTYPE.indexOf(&quot;\x6ec\x68ar&quot;)&gt; -1||value.fieldTYPE.indexOf(&quot;\x76a\x72ch\x61r&quot;)&gt; -1||value.fieldTYPE.indexOf(&quot;\x6eva\x72\x63h\x61r&quot;)&gt; -1||value.fieldTYPE.indexOf(&quot;T\x65x\x74&quot;)&gt; -1){row[&quot;v\x61l\x75e&quot;]=value.fieldNAME+&quot;\x25s&quot;;}else{row[&quot;val\x75\x65&quot;]=value.fieldNAME;}datacolumns.push(row);});return datacolumns;}};mygis.V={checkAuthorization:function(operation,params){var mycallback=function(closureData){return function(data){var realResults=eval(data);if(realResults.type==&quot;\x73uc\x63e\x73s&quot;){switch(realResults.operation){case &quot;d\x69\x67\x69\x74ize&quot;:mygis.UI.activateTool(closureData);mygis.J.getLayerDetails(0,&quot;ed\x69ta\x62\x6ce\x49nf\x6f&quot;);break;}}else{L(realResults.message);}}};$.ajax({url:&quot;\x2fmg\x72\x65q\x2e\x61s\x70x?qt\x79p\x65\x3d\x69\x73Au\x74hori\x7aed\x26\x71\x43onte\x6et\x73=&quot;+operation,type:&quot;GE\x54&quot;,success:mycallback(params)});},arrayUnique:function(array){var o={},i,l=array.length,r=[];for(i=0;i&lt;l;i+=1)o[array[i]]=array[i];for(i in o)r.push(o[i]);return r;},arrayMove:function(arrayObj,old_index,new_index){while(old_index&lt;0){old_index+=arrayObj.length;}while(new_index&lt;0){new_index+=arrayObj.length;}if(new_index&gt;=arrayObj.length){var k=new_index-arrayObj.length;while((k--)+1){arrayObj.push(undefined);}}arrayObj.splice(new_index,0,arrayObj.splice(old_index,1)[0]);return arrayObj;},isNumeric:function(input){var inp=input.toString();return(inp-0)==inp&amp;&amp;inp.length&gt;0;},populateSelect:function(el,items,noFirst){el.options.length=0;if((items.length&gt;0)&amp;&amp;(!noFirst))el.options[0]=new Option(&#x27;&#x27;,&#x27;&#x27;);$.each(items,function(){el.options[el.options.length]=new Option(this.name,this.value);});},addCommas:function(nStr){nStr+=&#x27;&#x27;;x=nStr.split(&#x27;.&#x27;);x1=x[0];x2=x.length&gt;1?&#x27;.&#x27;+x[1]:&#x27;&#x27;;var rgx=&#x2F;(\d+)(\d{3})&#x2F;;while(rgx.test(x1)){x1=x1.replace(rgx,&#x27;\x241&#x27;+&#x27;.&#x27;+&#x27;$\x32&#x27;);}return x1+x2;},ConvertJsonToTable:function(parsedJson,tableId,tableClassName,linkText){var italic=&#x27;&lt;\x69&gt;{\x30}&lt;\x2f\x69\x3e&#x27;;var link=linkText?&#x27;\x3ca\x20h\x72ef=\x22{\x30}&quot;\x3e&#x27;+linkText+&#x27;&lt;\x2f\x61&gt;&#x27;:&#x27;\x3c\x61 href\x3d&quot;{\x30}&quot;&gt;\x7b\x30\x7d&lt;\x2f\x61&gt;&#x27;;var idMarkup=tableId?&#x27; \x69d\x3d&quot;&#x27;+tableId+&#x27;&quot;&#x27;:&#x27;&#x27;;var classMarkup=tableClassName?&#x27;\x20c\x6cass\x3d\x22&#x27;+tableClassName+&#x27;&quot;&#x27;:&#x27;&#x27;;var tbl=&#x27;\x3ct\x61ble b\x6fr\x64\x65r=&quot;1\x22 cel\x6c\x70\x61\x64din\x67\x3d&quot;1&quot;\x20\x63e\x6c\x6c\x73\x70\x61cin\x67=&quot;\x31\x22&#x27;+idMarkup+classMarkup+&#x27;&gt;{\x30\x7d{\x31\x7d&lt;\x2fta\x62l\x65&gt;&#x27;;var th=&#x27;&lt;t\x68e\x61\x64\x3e{0}\x3c\x2fthe\x61d\x3e&#x27;;var tb=&#x27;&lt;t\x62o\x64\x79&gt;\x7b0\x7d\x3c&#x2F;\x74b\x6fdy&gt;&#x27;;var tr=&#x27;&lt;t\x72&gt;\x7b0}&lt;\x2f\x74r\x3e&#x27;;var thRow=&#x27;&lt;t\x68\x3e{0\x7d\x3c&#x2F;t\x68&gt;&#x27;;var tdRow=&#x27;\x3c\x74d\x3e{\x30}&lt;&#x2F;\x74d&gt;&#x27;;var thCon=&#x27;&#x27;;var tbCon=&#x27;&#x27;;var trCon=&#x27;&#x27;;if(parsedJson){var isStringArray=typeof(parsedJson[0])==&#x27;st\x72\x69n\x67&#x27;;var headers;if(isStringArray)thCon+=thRow.format(&#x27;va\x6c\x75e&#x27;);else{if(typeof(parsedJson[0])==&#x27;o\x62\x6aec\x74&#x27;){headers=bU(parsedJson[0]);for(i=0;i&lt;headers.length;i++)thCon+=thRow.format(headers[i]);}}th=th.format(tr.format(thCon));if(isStringArray){for(i=0;i&lt;parsedJson.length;i++){tbCon+=tdRow.format(parsedJson[i]);trCon+=tr.format(tbCon);tbCon=&#x27;&#x27;;}}else{if(headers){var urlRegExp=new RegExp(&#x2F;(\b(https?|ftp|file):\&#x2F;\&#x2F;[-A-Z0-9+&amp;@#\&#x2F;%?=~_|!:,.;]*[-A-Z0-9+&amp;@#\&#x2F;%=~_|])&#x2F;ig);var javascriptRegExp=new RegExp(&#x2F;(^javascript:[\s\S]*;$)&#x2F;ig);for(i=0;i&lt;parsedJson.length;i++){for(j=0;j&lt;headers.length;j++){var value=parsedJson[i][headers[j]];var isUrl=urlRegExp.test(value)||javascriptRegExp.test(value);if(isUrl)tbCon+=tdRow.format(link.format(value));else{if(value)tbCon+=tdRow.format(value);else tbCon+=tdRow.format(italic.format(value).toUpperCase());}}trCon+=tr.format(tbCon);tbCon=&#x27;&#x27;;}}}tb=tb.format(trCon);tbl=tbl.format(th,tb);return tbl;}return null;},nameToUnderscore:function(name){if(name.indexOf(&quot; &quot;)&gt;0){var nameparts=name.split(&quot; &quot;);name=nameparts.join(&quot;_&quot;);}return name;},getVisibleLayerString:function(appname,legend){var fullLayerString=&quot;&quot;;var recs=layerSource.records;var fullLayers=[];for(var i=recs.length-1;i&gt;=0;i--){if(!(Boolean(recs[i].hidden)===true)){layername=recs[i].layerTABLE;layername=mygis.V.nameToUnderscore(layername);fullLayers.push(layername);}}var separator=legend?&quot;+&quot;:&quot;,&quot;;fullLayerString=fullLayers.join(separator);return fullLayerString;},getOverlayTitle:function(overlay){if(overlay){var retvalue=overlay.attributes.title;if(!retvalue){retvalue=strings.LayerControl.noObjectTitle+(digimapOverlays.length).toString();overlay.attributes.title=retvalue;}return retvalue;}else{return null;}},format:function(str){for(i=1;i&lt;arguments.length;i++){str=str.replace(&#x27;{&#x27;+(i-1)+&#x27;}&#x27;,arguments[i]);}return str;},roundVal:function(val){if(val.toString().length&lt;9){return val;}else{var dec=6;var result=Math.round(val*Math.pow(10,dec))&#x2F;Math.pow(10,dec);return result;}},checkKeypress:function(e){var keynum;if(window.event){keynum=e.keyCode}else if(e.which){keynum=e.which}if(keynum==13){if(document.getElementById(&quot;sea\x72\x63\x68\x42tn&quot;).value==&#x27;le\x74\x20\x69t ra\x69\x6e&#x27;){mygis.V.rain();}else if(document.getElementById(&quot;\x73ear\x63hB\x74\x6e&quot;).value==&#x27;l\x65t i\x74\x20s\x74\x6fp&#x27;){mygis.V.stopRain();}else{mygis.Map.showAddress(document.getElementById(&quot;\x73ear\x63\x68B\x74n&quot;).value);}return false;}},isMouseLeaveOrEnter:function(e,handler){if(e.type!=&#x27;\x6d\x6fu\x73\x65out&#x27;&amp;&amp;e.type!=&#x27;\x6do\x75s\x65ove\x72&#x27;)return false;var reltg=e.relatedTarget?e.relatedTarget:e.type==&#x27;\x6do\x75seo\x75\x74&#x27;?e.toElement:e.fromElement;while(reltg&amp;&amp;reltg!=handler)reltg=reltg.parentNode;return(reltg!=handler);},latlngToPoint:function(map,latlng,z){var normalizedPoint=map.getProjection().fromLatLngToPoint(latlng);var pixelCoordinate=normalizedPoint;return pixelCoordinate;},deg2rad:function(angle){return(angle&#x2F;180)*Math.PI;},circle2polygon:function(centerpoint,radius){var lat1=mygis.V.deg2rad(centerpoint.lat());var long1=mygis.V.deg2rad(centerpoint.lng());var d_rad=radius&#x2F;6378137;var radial;var lat_rad;var dlon_rad;var lon_rad;for(var i=0;i&lt;=360;i++){radial=mygis.V.deg2rad(i);lat_rad=Math.asin}},logMapCoords:function(gevent){var thepoint=gevent.latLng;document.getElementById(&quot;m\x69nfo\x5f\x78&quot;).innerHTML=Math.round(thepoint.lng()*1000000)&#x2F;1000000;document.getElementById(&quot;\x6dinf\x6f\x5fy&quot;).innerHTML=Math.round(thepoint.lat()*1000000)&#x2F;1000000;},randomXToY:function(minVal,maxVal,floatVal){var randVal=minVal+(Math.random()*(maxVal-minVal));return typeof floatVal==&#x27;unde\x66\x69n\x65\x64&#x27;?Math.round(randVal):randVal.toFixed(floatVal);},opacityToHex:function(degOpacity){var retvalue;if(degOpacity&lt;=1&amp;&amp;degOpacity&gt;=0){var preHex=Math.floor(degOpacity*255);retvalue=preHex.toString(16);if(retvalue.length==1){retvalue=&quot;0&quot;+retvalue;}}return retvalue;},cutHex:function(hexValue){return(hexValue.charAt(0)==&quot;#&quot;)?hexValue.substring(1,7):hexValue;},hexToRGB:function(hexValue){var retArray=[];var r,g,b;var h=mygis.V.cutHex(hexValue);r=parseInt(h.substring(0,2),16);g=parseInt(h.substring(2,4),16);b=parseInt(h.substring(4,6),16);retArray.push(r);retArray.push(g);retArray.push(b);return retArray;},projections:{google:&quot;\x45\x50S\x47\x3a9009\x313&quot;,wgs84:&quot;E\x50\x53\x47:\x34326&quot;},rain:function(){if(!rainTimer){rainTimer=setInterval(function(){var bounds=digimap.getBounds();var ne=bounds.getNorthEast();var sw=bounds.getSouthWest();var min_x=sw.lat();var max_x=ne.lat();var min_y=sw.lng();var max_y=ne.lng();var newpoint=new google.maps.LatLng(mygis.V.randomXToY(min_x,max_x,6),mygis.V.randomXToY(min_y,max_y,6));var image=new google.maps.MarkerImage(mygis.O.H.pointStyle.icon,new google.maps.Size(mygis.O.H.pointStyle.size,mygis.O.H.pointStyle.size),new google.maps.Point(0,0),new google.maps.Point(16,32),new google.maps.Size(mygis.O.H.pointStyle.size,mygis.O.H.pointStyle.size));var realmarker=new google.maps.Marker({position:newpoint,title:&quot;\x6da\x72k\x65r\x20ob\x6aec\x74&quot;,animation:google.maps.Animation.DROP,icon:image});realmarker.setMap(digimap);mygis.UI.cosmeticPush(realmarker);},100);}},stopRain:function(){clearInterval(rainTimer);},googleAutoComplete:function(){$(&quot;#\x61u\x74oCo\x6dp\x6ce\x74\x65&quot;).attr(&quot;\x70lac\x65ho\x6cd\x65\x72&quot;,strings.QuickJump.placeholder);var defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(-33.8902,151.1759),new google.maps.LatLng(-33.8474,151.2631));var input=document.getElementById(&#x27;\x61\x75to\x43\x6fm\x70lete&#x27;);var options={bounds:defaultBounds,componentRestrictions:{country:&#x27;\x67r&#x27;}};autocomplete=new google.maps.places.Autocomplete(input,options);google.maps.event.addListener(autocomplete,&#x27;\x70\x6c\x61ce_ch\x61\x6eg\x65d&#x27;,function(){var place=autocomplete.getPlace();if(place.geometry){var center=place.geometry.location;digimap.setCenter(new OpenLayers.LonLat(center.lng(),center.lat()));}});},nudgeMap:function(){var center=digimap.getCenter();digimap.panTo(new OpenLayers.LonLat(center.lon+0.0000000001,center.lat));}};function namespace(namespaceString){var parts=namespaceString.split(&#x27;.&#x27;),parent=window,currentPart=&#x27;&#x27;;for(var i=0,length=parts.length;i&lt;length;i++){currentPart=parts[i];parent[currentPart]=parent[currentPart]||{};parent=parent[currentPart];}return parent;};Element.prototype.ex_HasClassName=function(strClass){if(this.className){var arrList=this.className.split(&#x27; &#x27;);var strClassUpper=strClass.toUpperCase();for(var i=0;i&lt;arrList.length;i++){if(arrList[i].toUpperCase()==strClassUpper){return true;}}}return false;};Element.prototype.ex_AddClassName=function(strClass,blnMayAlreadyExist){if(this.className){var arrList=this.className.split(&#x27; &#x27;);if(blnMayAlreadyExist){var strClassUpper=strClass.toUpperCase();for(var i=0;i&lt;arrList.length;i++){if(arrList[i].toUpperCase()==strClassUpper){arrList.splice(i,1);i--;}}}arrList[arrList.length]=strClass;this.className=arrList.join(&#x27; &#x27;);}else{this.className=strClass;}};Element.prototype.ex_RemoveClassName=function(strClass){if(this.className){var arrList=this.className.split(&#x27; &#x27;);var strClassUpper=strClass.toUpperCase();for(var i=0;i&lt;arrList.length;i++){if(arrList[i].toUpperCase()==strClassUpper){arrList.splice(i,1);i--;}}this.className=arrList.join(&#x27; &#x27;);}};$(window).resize(function(){setTimeout(bd,1000);});function contextMenu($div){var that=this,ts=null;this.$div=$div;this.items=[];this.create=function(item){var $item=$(&#x27;&lt;\x64\x69v c\x6c\x61\x73s=\x22it\x65m\x20&#x27;+item.cl+&#x27;&quot;\x3e&#x27;+item.label+&#x27;\x3c&#x2F;d\x69\x76&gt;&#x27;);$item.click(function(){if(typeof(item.fnc)===&#x27;\x66u\x6ect\x69o\x6e&#x27;){item.fnc.apply($(this),[]);}}).hover(function(){$(this).addClass(&#x27;\x68ov\x65r&#x27;);},function(){$(this).removeClass(&#x27;h\x6f\x76er&#x27;);});return $item;};this.clearTs=function(){if(ts){clearTimeout(ts);ts=null;}};this.initTs=function(t){ts=setTimeout(function(){that.close()},t);};};contextMenu.prototype.add=function(label,cl,fnc){this.items.push({label:label,fnc:fnc,cl:cl});};contextMenu.prototype.open=function(event,hack){this.close();var k,that=this,offset={x:0,y:0},$menu=$(&#x27;&lt;\x64i\x76 \x69d=&quot;\x72i\x67\x68\x74-menu\x22\x3e\x3c&#x2F;\x64i\x76&gt;&#x27;);for(var k=0;k&lt;this.items.length;k++){$menu.append(this.create(this.items[k]));}$menu.hover(function(){that.clearTs();},function(){that.initTs(3000);});$menu.css({&#x27;to\x70&#x27;:event.layerY,&#x27;\x6cef\x74&#x27;:event.layerX,&#x27;\x70o\x73i\x74\x69on&#x27;:&#x27;ab\x73\x6f\x6cut\x65&#x27;});rightmenuOpen=true;$(digiContainer).append($menu);this.initTs(5000);return false;};contextMenu.prototype.close=function(){this.clearTs();rightmenuOpen=false;$(&quot;\x23ri\x67h\x74\x2dme\x6eu&quot;).remove();}
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
