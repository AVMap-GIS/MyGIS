var OpenLayers={VERSION_NUMBER:"Release 2.12-rc4",singleFile:!0,_getScriptLocation:function(){for(var a=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,b=document.getElementsByTagName("script"),c,d="",e=0,f=b.length;e<f;e++)if(c=b[e].getAttribute("src"))if(c=c.match(a)){d=c[1];break}return function(){return d}}(),ImgPath:"",Class:function(){var a=arguments.length,b=arguments[0],c=arguments[a-1],d="function"==typeof c.initialize?c.initialize:function(){b.prototype.initialize.apply(this,arguments)};1<a?
(a=[d,b].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c),OpenLayers.inherit.apply(null,a)):d.prototype=c;return d},inherit:function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;var d,e,c=2;for(d=arguments.length;c<d;c++)e=arguments[c],"function"===typeof e&&(e=e.prototype),OpenLayers.Util.extend(a.prototype,e)}};OpenLayers.Util=OpenLayers.Util||{};
OpenLayers.Util.extend=function(a,b){a=a||{};if(b){for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}"function"==typeof window.Event&&b instanceof window.Event||!b.hasOwnProperty||!b.hasOwnProperty("toString")||(a.toString=b.toString)}return a};
OpenLayers.String={startsWith:function(a,b){return 0==a.indexOf(b)},contains:function(a,b){return-1!=a.indexOf(b)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(a){a=a.split("-");for(var b=a[0],c=1,d=a.length;c<d;c++)var e=a[c],b=b+(e.charAt(0).toUpperCase()+e.substring(1));return b},format:function(a,b,c){b||(b=window);return a.replace(OpenLayers.String.tokenRegEx,function(a,e){for(var f,g=e.split(/\.+/),h=0;h<g.length;h++)0==h&&(f=b),f=f[g[h]];"function"==
typeof f&&(f=c?f.apply(null,c):f());return"undefined"==typeof f?"undefined":f})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(a,b){var c=a;!0===b&&null!=a&&a.replace&&(a=a.replace(/^\s*|\s*$/g,""));return OpenLayers.String.isNumeric(a)?parseFloat(a):c}};
OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,b){var c=0;0<b&&(c=parseFloat(a.toPrecision(b)));return c},format:function(a,b,c,d){b="undefined"!=typeof b?b:0;c="undefined"!=typeof c?c:OpenLayers.Number.thousandsSeparator;d="undefined"!=typeof d?d:OpenLayers.Number.decimalSeparator;null!=b&&(a=parseFloat(a.toFixed(b)));var e=a.toString().split(".");1==e.length&&null==b&&(b=0);a=e[0];if(c)for(var f=/(-?[0-9]+)([0-9]{3})/;f.test(a);)a=a.replace(f,"$1"+c+"$2");
0==b?b=a:(c=1<e.length?e[1]:"0",null!=b&&(c+=Array(b-c.length+1).join("0")),b=a+d+c);return b}};OpenLayers.Function={bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}},bindAsEventListener:function(a,b){return function(c){return a.call(b,c||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};
OpenLayers.Array={filter:function(a,b,c){var d=[];if(Array.prototype.filter)d=a.filter(b,c);else{var e=a.length;if("function"!=typeof b)throw new TypeError;for(var f=0;f<e;f++)if(f in a){var g=a[f];b.call(c,g,f,a)&&d.push(g)}}return d}};
OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(a,b,c,d){OpenLayers.Util.isArray(a)&&(d=a[3],c=a[2],b=a[1],a=a[0]);null!=a&&(this.left=OpenLayers.Util.toFloat(a));null!=b&&(this.bottom=OpenLayers.Util.toFloat(b));null!=c&&(this.right=OpenLayers.Util.toFloat(c));null!=d&&(this.top=OpenLayers.Util.toFloat(d))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(a){var b=!1;null!=
a&&(b=this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom);return b},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(a){return!0===a?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(a,b){null==a&&(a=6);var c=Math.pow(10,a),d=Math.round(this.left*c)/c,e=Math.round(this.bottom*c)/c,f=Math.round(this.right*c)/c,c=Math.round(this.top*c)/c;return!0===b?e+","+d+","+c+","+f:d+
","+e+","+f+","+c},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},
getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2));return this.centerLonLat},scale:function(a,b){null==b&&(b=this.getCenterLonLat());var c,d;"OpenLayers.LonLat"==b.CLASS_NAME?(c=b.lon,d=b.lat):(c=b.x,d=b.y);return new OpenLayers.Bounds((this.left-c)*a+c,(this.bottom-d)*a+d,(this.right-c)*a+c,(this.top-d)*a+
d)},add:function(a,b){if(null==a||null==b)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+a,this.bottom+b,this.right+a,this.top+b)},extend:function(a){var b=null;if(a){switch(a.CLASS_NAME){case "OpenLayers.LonLat":b=new OpenLayers.Bounds(a.lon,a.lat,a.lon,a.lat);break;case "OpenLayers.Geometry.Point":b=new OpenLayers.Bounds(a.x,a.y,a.x,a.y);break;case "OpenLayers.Bounds":b=a}if(b){this.centerLonLat=null;if(null==this.left||b.left<this.left)this.left=
b.left;if(null==this.bottom||b.bottom<this.bottom)this.bottom=b.bottom;if(null==this.right||b.right>this.right)this.right=b.right;if(null==this.top||b.top>this.top)this.top=b.top}}},containsLonLat:function(a,b){"boolean"===typeof b&&(b={inclusive:b});b=b||{};var c=this.contains(a.lon,a.lat,b.inclusive),d=b.worldBounds;d&&!c&&(c=d.getWidth(),d=Math.round((a.lon-(d.left+d.right)/2)/c),c=this.containsLonLat({lon:a.lon-d*c,lat:a.lat},{inclusive:b.inclusive}));return c},containsPixel:function(a,b){return this.contains(a.x,
a.y,b)},contains:function(a,b,c){null==c&&(c=!0);if(null==a||null==b)return!1;a=OpenLayers.Util.toFloat(a);b=OpenLayers.Util.toFloat(b);var d=!1;return d=c?a>=this.left&&a<=this.right&&b>=this.bottom&&b<=this.top:a>this.left&&a<this.right&&b>this.bottom&&b<this.top},intersectsBounds:function(a,b){"boolean"===typeof b&&(b={inclusive:b});b=b||{};if(b.worldBounds){var c=this.wrapDateLine(b.worldBounds);a=a.wrapDateLine(b.worldBounds)}else c=this;null==b.inclusive&&(b.inclusive=!0);var d=!1,e=c.left==
a.right||c.right==a.left||c.top==a.bottom||c.bottom==a.top;if(b.inclusive||!e)var d=a.top>=c.bottom&&a.top<=c.top||c.top>a.bottom&&c.top<a.top,e=a.left>=c.left&&a.left<=c.right||c.left>=a.left&&c.left<=a.right,f=a.right>=c.left&&a.right<=c.right||c.right>=a.left&&c.right<=a.right,d=(a.bottom>=c.bottom&&a.bottom<=c.top||c.bottom>=a.bottom&&c.bottom<=a.top||d)&&(e||f);if(b.worldBounds&&!d){var g=b.worldBounds,e=g.getWidth(),f=!g.containsBounds(c),g=!g.containsBounds(a);f&&!g?(a=a.add(-e,0),d=c.intersectsBounds(a,
{inclusive:b.inclusive})):g&&!f&&(c=c.add(-e,0),d=a.intersectsBounds(c,{inclusive:b.inclusive}))}return d},containsBounds:function(a,b,c){null==b&&(b=!1);null==c&&(c=!0);var d=this.contains(a.left,a.bottom,c),e=this.contains(a.right,a.bottom,c),f=this.contains(a.left,a.top,c);a=this.contains(a.right,a.top,c);return b?d||e||f||a:d&&e&&f&&a},determineQuadrant:function(a){var b="",c=this.getCenterLonLat(),b=b+(a.lat<c.lat?"b":"t");return b+=a.lon<c.lon?"l":"r"},transform:function(a,b){this.centerLonLat=
null;var c=OpenLayers.Projection.transform({x:this.left,y:this.bottom},a,b),d=OpenLayers.Projection.transform({x:this.right,y:this.bottom},a,b),e=OpenLayers.Projection.transform({x:this.left,y:this.top},a,b),f=OpenLayers.Projection.transform({x:this.right,y:this.top},a,b);this.left=Math.min(c.x,e.x);this.bottom=Math.min(c.y,d.y);this.right=Math.max(d.x,f.x);this.top=Math.max(e.y,f.y);return this},wrapDateLine:function(a,b){b=b||{};var c=b.leftTolerance||0,d=b.rightTolerance||0,e=this.clone();if(a){for(var f=
a.getWidth();e.left<a.left&&e.right-d<=a.left;)e=e.add(f,0);for(;e.left+c>=a.right&&e.right>a.right;)e=e.add(-f,0);c=e.left+c;c<a.right&&c>a.left&&e.right-d>a.right&&(e=e.add(-f,0))}return e},CLASS_NAME:"OpenLayers.Bounds"});OpenLayers.Bounds.fromString=function(a,b){var c=a.split(",");return OpenLayers.Bounds.fromArray(c,b)};OpenLayers.Bounds.fromArray=function(a,b){return!0===b?new OpenLayers.Bounds(a[1],a[0],a[3],a[2]):new OpenLayers.Bounds(a[0],a[1],a[2],a[3])};
OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)};OpenLayers.Bounds.oppositeQuadrant=function(a){var b;b=""+("t"==a.charAt(0)?"b":"t");return b+="l"==a.charAt(1)?"r":"l"};
OpenLayers.Element={visible:function(a){return"none"!=OpenLayers.Util.getElement(a).style.display},toggle:function(){for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]),d=OpenLayers.Element.visible(c)?"none":"";c.style.display=d}},remove:function(a){a=OpenLayers.Util.getElement(a);a.parentNode.removeChild(a)},getHeight:function(a){a=OpenLayers.Util.getElement(a);return a.offsetHeight},hasClass:function(a,b){var c=a.className;return!!c&&RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},
addClass:function(a,b){OpenLayers.Element.hasClass(a,b)||(a.className+=(a.className?" ":"")+b);return a},removeClass:function(a,b){var c=a.className;c&&(a.className=OpenLayers.String.trim(c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")));return a},toggleClass:function(a,b){OpenLayers.Element.hasClass(a,b)?OpenLayers.Element.removeClass(a,b):OpenLayers.Element.addClass(a,b);return a},getStyle:function(a,b){a=OpenLayers.Util.getElement(a);var c=null;if(a&&a.style){c=a.style[OpenLayers.String.camelize(b)];
c||(document.defaultView&&document.defaultView.getComputedStyle?c=(c=document.defaultView.getComputedStyle(a,null))?c.getPropertyValue(b):null:a.currentStyle&&(c=a.currentStyle[OpenLayers.String.camelize(b)]));var d=["left","top","right","bottom"];window.opera&&-1!=OpenLayers.Util.indexOf(d,b)&&"static"==OpenLayers.Element.getStyle(a,"position")&&(c="auto")}return"auto"==c?null:c}};
OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(a,b){OpenLayers.Util.isArray(a)&&(b=a[1],a=a[0]);this.lon=OpenLayers.Util.toFloat(a);this.lat=OpenLayers.Util.toFloat(b)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(a,b){if(null==a||null==b)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+
OpenLayers.Util.toFloat(a),this.lat+OpenLayers.Util.toFloat(b))},equals:function(a){var b=!1;null!=a&&(b=this.lon==a.lon&&this.lat==a.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(a.lon)&&isNaN(a.lat));return b},transform:function(a,b){var c=OpenLayers.Projection.transform({x:this.lon,y:this.lat},a,b);this.lon=c.x;this.lat=c.y;return this},wrapDateLine:function(a){var b=this.clone();if(a){for(;b.lon<a.left;)b.lon+=a.getWidth();for(;b.lon>a.right;)b.lon-=a.getWidth()}return b},CLASS_NAME:"OpenLayers.LonLat"});
OpenLayers.LonLat.fromString=function(a){a=a.split(",");return new OpenLayers.LonLat(a[0],a[1])};OpenLayers.LonLat.fromArray=function(a){var b=OpenLayers.Util.isArray(a);return new OpenLayers.LonLat(b&&a[0],b&&a[1])};
OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a);this.y=parseFloat(b)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=!1;null!=a&&(b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y));return b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if(null==a||null==b)throw new TypeError("Pixel.add cannot receive null values");
return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();a&&(b=this.add(a.x,a.y));return b},CLASS_NAME:"OpenLayers.Pixel"});
OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a);this.h=parseFloat(b)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(a){var b=!1;null!=a&&(b=this.w==a.w&&this.h==a.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(a.w)&&isNaN(a.h));return b},CLASS_NAME:"OpenLayers.Size"});
OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"};
(function(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;b<c;++b)if(-1!=a[b].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}})();
OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){OpenLayers.Lang.code||OpenLayers.Lang.setCode();return OpenLayers.Lang.code},setCode:function(a){var b;a||(a="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language);a=a.split("-");a[0]=a[0].toLowerCase();"object"==typeof OpenLayers.Lang[a[0]]&&(b=a[0]);if(a[1]){var c=a[0]+"-"+a[1].toUpperCase();"object"==typeof OpenLayers.Lang[c]&&(b=c)}b||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language"),
b=OpenLayers.Lang.defaultCode);OpenLayers.Lang.code=b},translate:function(a,b){var c=OpenLayers.Lang[OpenLayers.Lang.getCode()];(c=c&&c[a])||(c=a);b&&(c=OpenLayers.String.format(c,b));return c}};OpenLayers.i18n=OpenLayers.Lang.translate;OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.getElement=function(){for(var a=[],b=0,c=arguments.length;b<c;b++){var d=arguments[b];"string"==typeof d&&(d=document.getElementById(d));if(1==arguments.length)return d;a.push(d)}return a};
OpenLayers.Util.isElement=function(a){return!(!a||1!==a.nodeType)};OpenLayers.Util.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};"undefined"===typeof window.$&&(window.$=OpenLayers.Util.getElement);OpenLayers.Util.removeItem=function(a,b){for(var c=a.length-1;0<=c;c--)a[c]==b&&a.splice(c,1);return a};OpenLayers.Util.indexOf=function(a,b){if("function"==typeof a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c;return-1};
OpenLayers.Util.dotless=/\./g;OpenLayers.Util.modifyDOMElement=function(a,b,c,d,e,f,g,h){b&&(a.id=b.replace(OpenLayers.Util.dotless,"_"));c&&(a.style.left=c.x+"px",a.style.top=c.y+"px");d&&(a.style.width=d.w+"px",a.style.height=d.h+"px");e&&(a.style.position=e);f&&(a.style.border=f);g&&(a.style.overflow=g);0<=parseFloat(h)&&1>parseFloat(h)?(a.style.filter="alpha(opacity="+100*h+")",a.style.opacity=h):1==parseFloat(h)&&(a.style.filter="",a.style.opacity="")};
OpenLayers.Util.createDiv=function(a,b,c,d,e,f,g,h){var k=document.createElement("div");d&&(k.style.backgroundImage="url("+d+")");a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));e||(e="absolute");OpenLayers.Util.modifyDOMElement(k,a,b,c,e,f,g,h);return k};
OpenLayers.Util.createImage=function(a,b,c,d,e,f,g,h){var k=document.createElement("img");a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));e||(e="relative");OpenLayers.Util.modifyDOMElement(k,a,b,c,e,f,null,g);h&&(k.style.display="none",b=function(){k.style.display="";OpenLayers.Event.stopObservingElement(k)},OpenLayers.Event.observe(k,"load",b),OpenLayers.Event.observe(k,"error",b));k.style.alt=a;k.galleryImg="no";d&&(k.src=d);return k};OpenLayers.IMAGE_RELOAD_ATTEMPTS=0;
OpenLayers.Util.alphaHackNeeded=null;OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var a=navigator.appVersion.split("MSIE"),a=parseFloat(a[1]),b=!1;try{b=!!document.body.filters}catch(c){}OpenLayers.Util.alphaHackNeeded=b&&5.5<=a&&7>a}return OpenLayers.Util.alphaHackNeeded};
OpenLayers.Util.modifyAlphaImageDiv=function(a,b,c,d,e,f,g,h,k){OpenLayers.Util.modifyDOMElement(a,b,c,d,f,null,null,k);b=a.childNodes[0];e&&(b.src=e);OpenLayers.Util.modifyDOMElement(b,a.id+"_innerImage",null,d,"relative",g);OpenLayers.Util.alphaHack()&&("none"!=a.style.display&&(a.style.display="inline-block"),null==h&&(h="scale"),a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='"+h+"')",0<=parseFloat(a.style.opacity)&&1>parseFloat(a.style.opacity)&&
(a.style.filter+=" alpha(opacity="+100*a.style.opacity+")"),b.style.filter="alpha(opacity=0)")};OpenLayers.Util.createAlphaImageDiv=function(a,b,c,d,e,f,g,h,k){var l=OpenLayers.Util.createDiv();k=OpenLayers.Util.createImage(null,null,null,null,null,null,null,k);k.className="olAlphaImg";l.appendChild(k);OpenLayers.Util.modifyAlphaImageDiv(l,a,b,c,d,e,f,g,h);return l};OpenLayers.Util.upperCaseObject=function(a){var b={},c;for(c in a)b[c.toUpperCase()]=a[c];return b};
OpenLayers.Util.applyDefaults=function(a,b){a=a||{};var c="function"==typeof window.Event&&b instanceof window.Event,d;for(d in b)if(void 0===a[d]||!c&&b.hasOwnProperty&&b.hasOwnProperty(d)&&!a.hasOwnProperty(d))a[d]=b[d];!c&&b&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&!a.hasOwnProperty("toString")&&(a.toString=b.toString);return a};
OpenLayers.Util.getParameterString=function(a){var b=[],c;for(c in a){var d=a[c];if(null!=d&&"function"!=typeof d){if("object"==typeof d&&d.constructor==Array){for(var e=[],f,g=0,h=d.length;g<h;g++)f=d[g],e.push(encodeURIComponent(null===f||void 0===f?"":f));d=e.join(",")}else d=encodeURIComponent(d);b.push(encodeURIComponent(c)+"="+d)}}return b.join("&")};OpenLayers.Util.urlAppend=function(a,b){var c=a;if(b)var d=(a+" ").split(/[?&]/),c=c+(" "===d.pop()?b:d.length?"&"+b:"?"+b);return c};
OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"};OpenLayers.Util.getImageLocation=function(a){return OpenLayers.Util.getImagesLocation()+a};OpenLayers.Util.Try=function(){for(var a=null,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a};
OpenLayers.Util.getXmlNodeValue=function(a){var b=null;OpenLayers.Util.Try(function(){b=a.text;b||(b=a.textContent);b||(b=a.firstChild.nodeValue)},function(){b=a.textContent});return b};OpenLayers.Util.mouseLeft=function(a,b){for(var c=a.relatedTarget?a.relatedTarget:a.toElement;c!=b&&null!=c;)c=c.parentNode;return c!=b};OpenLayers.Util.DEFAULT_PRECISION=14;OpenLayers.Util.toFloat=function(a,b){null==b&&(b=OpenLayers.Util.DEFAULT_PRECISION);"number"!==typeof a&&(a=parseFloat(a));return 0===b?a:parseFloat(a.toPrecision(b))};
OpenLayers.Util.rad=function(a){return a*Math.PI/180};OpenLayers.Util.deg=function(a){return 180*a/Math.PI};OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563};
OpenLayers.Util.distVincenty=function(a,b){for(var c=OpenLayers.Util.VincentyConstants,d=c.a,e=c.b,c=c.f,f=OpenLayers.Util.rad(b.lon-a.lon),g=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(a.lat))),h=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(b.lat))),k=Math.sin(g),g=Math.cos(g),l=Math.sin(h),h=Math.cos(h),m=f,n=2*Math.PI,p=20;1.0E-12<Math.abs(m-n)&&0<--p;){var q=Math.sin(m),r=Math.cos(m),s=Math.sqrt(h*q*h*q+(g*l-k*h*r)*(g*l-k*h*r));if(0==s)return 0;var r=k*l+g*h*r,t=Math.atan2(s,r),u=Math.asin(g*
h*q/s),v=Math.cos(u)*Math.cos(u),q=r-2*k*l/v,w=c/16*v*(4+c*(4-3*v)),n=m,m=f+(1-w)*c*Math.sin(u)*(t+w*s*(q+w*r*(-1+2*q*q)))}if(0==p)return NaN;d=v*(d*d-e*e)/(e*e);c=d/1024*(256+d*(-128+d*(74-47*d)));return(e*(1+d/16384*(4096+d*(-768+d*(320-175*d))))*(t-c*s*(q+c/4*(r*(-1+2*q*q)-c/6*q*(-3+4*s*s)*(-3+4*q*q))))).toFixed(3)/1E3};
OpenLayers.Util.destinationVincenty=function(a,b,c){var d=OpenLayers.Util,e=d.VincentyConstants,f=e.a,g=e.b,h=e.f,e=a.lon;a=a.lat;var k=d.rad(b);b=Math.sin(k);k=Math.cos(k);a=(1-h)*Math.tan(d.rad(a));var l=1/Math.sqrt(1+a*a),m=a*l,n=Math.atan2(a,k);a=l*b;for(var p=1-a*a,f=p*(f*f-g*g)/(g*g),q=1+f/16384*(4096+f*(-768+f*(320-175*f))),r=f/1024*(256+f*(-128+f*(74-47*f))),f=c/(g*q),s=2*Math.PI;1.0E-12<Math.abs(f-s);)var t=Math.cos(2*n+f),u=Math.sin(f),v=Math.cos(f),w=r*u*(t+r/4*(v*(-1+2*t*t)-r/6*t*(-3+
4*u*u)*(-3+4*t*t))),s=f,f=c/(g*q)+w;c=m*u-l*v*k;g=Math.atan2(m*v+l*u*k,(1-h)*Math.sqrt(a*a+c*c));b=Math.atan2(u*b,l*v-m*u*k);k=h/16*p*(4+h*(4-3*p));t=b-(1-k)*h*a*(f+k*u*(t+k*v*(-1+2*t*t)));Math.atan2(a,-c);return new OpenLayers.LonLat(e+d.deg(t),d.deg(g))};
OpenLayers.Util.getParameters=function(a){a=null===a||void 0===a?window.location.href:a;var b="";if(OpenLayers.String.contains(a,"?"))var b=a.indexOf("?")+1,c=OpenLayers.String.contains(a,"#")?a.indexOf("#"):a.length,b=a.substring(b,c);a={};for(var b=b.split(/[&;]/),c=0,d=b.length;c<d;++c){var e=b[c].split("=");if(e[0]){var f=e[0];try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}e=(e[1]||"").replace(/\+/g," ");try{e=decodeURIComponent(e)}catch(h){e=unescape(e)}e=e.split(",");1==e.length&&(e=e[0]);
a[f]=e}}return a};OpenLayers.Util.lastSeqID=0;OpenLayers.Util.createUniqueID=function(a){a=null==a?"id_":a.replace(OpenLayers.Util.dotless,"_");OpenLayers.Util.lastSeqID+=1;return a+OpenLayers.Util.lastSeqID};OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches;OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd;OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m;
OpenLayers.METERS_PER_INCH=0.0254000508001016;
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:0.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:0.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:0.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:0.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:0.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:0.0254/OpenLayers.METERS_PER_INCH,MicroInch:2.54E-5/OpenLayers.METERS_PER_INCH,Mil:2.54E-8/OpenLayers.METERS_PER_INCH,
Centimeter:0.01/OpenLayers.METERS_PER_INCH,Kilometer:1E3/OpenLayers.METERS_PER_INCH,Yard:0.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:0.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:0.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:0.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:0.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:0.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:0.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:0.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:0.3047996/
OpenLayers.METERS_PER_INCH,IndianFt75:0.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:0.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:0.1/OpenLayers.METERS_PER_INCH,Millimeter:0.0010/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,
Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:0.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:0.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:0.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:0.20116782494375873/OpenLayers.METERS_PER_INCH,
SearsLink:0.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:0.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:0.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:0.304812252984506/
OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5E4/OpenLayers.METERS_PER_INCH,"150kilometers":15E4/OpenLayers.METERS_PER_INCH});
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1E3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1E3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,
"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH});OpenLayers.DOTS_PER_INCH=72;OpenLayers.Util.normalizeScale=function(a){return 1<a?1/a:a};OpenLayers.Util.getResolutionFromScale=function(a,b){var c;a&&(null==b&&(b="degrees"),c=1/(OpenLayers.Util.normalizeScale(a)*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH));return c};
OpenLayers.Util.getScaleFromResolution=function(a,b){null==b&&(b="degrees");return a*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH};
OpenLayers.Util.pagePosition=function(a){var b=[0,0],c=OpenLayers.Util.getViewportElement();if(!a||a==window||a==c)return b;var d=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(a,"position")&&(""==a.style.top||""==a.style.left),e=null;if(a.getBoundingClientRect)a=a.getBoundingClientRect(),e=c.scrollTop,b[0]=a.left+c.scrollLeft,b[1]=a.top+e;else if(document.getBoxObjectFor&&!d)a=document.getBoxObjectFor(a),c=document.getBoxObjectFor(c),b[0]=a.screenX-c.screenX,
b[1]=a.screenY-c.screenY;else{b[0]=a.offsetLeft;b[1]=a.offsetTop;e=a.offsetParent;if(e!=a)for(;e;)b[0]+=e.offsetLeft,b[1]+=e.offsetTop,e=e.offsetParent;c=OpenLayers.BROWSER_NAME;if("opera"==c||"safari"==c&&"absolute"==OpenLayers.Element.getStyle(a,"position"))b[1]-=document.body.offsetTop;for(e=a.offsetParent;e&&e!=document.body;){b[0]-=e.scrollLeft;if("opera"!=c||"TR"!=e.tagName)b[1]-=e.scrollTop;e=e.offsetParent}}return b};
OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;void 0==a&&(a="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=a);return a};
OpenLayers.Util.isEquivalentUrl=function(a,b,c){c=c||{};OpenLayers.Util.applyDefaults(c,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0});a=OpenLayers.Util.createUrlObject(a,c);b=OpenLayers.Util.createUrlObject(b,c);for(var d in a)if("args"!==d&&a[d]!=b[d])return!1;for(d in a.args){if(a.args[d]!=b.args[d])return!1;delete b.args[d]}for(d in b.args)return!1;return!0};
OpenLayers.Util.createUrlObject=function(a,b){b=b||{};if(!/^\w+:\/\//.test(a)){var c=window.location,d=c.port?":"+c.port:"",d=c.protocol+"//"+c.host.split(":").shift()+d;0===a.indexOf("/")?a=d+a:(c=c.pathname.split("/"),c.pop(),a=d+c.join("/")+"/"+a)}b.ignoreCase&&(a=a.toLowerCase());c=document.createElement("a");c.href=a;d={};d.host=c.host.split(":").shift();d.protocol=c.protocol;d.port=b.ignorePort80?"80"==c.port||"0"==c.port?"":c.port:""==c.port||"0"==c.port?"80":c.port;d.hash=b.ignoreHash||"#"===
c.hash?"":c.hash;var e=c.search;e||(e=a.indexOf("?"),e=-1!=e?a.substr(e):"");d.args=OpenLayers.Util.getParameters(e);d.pathname="/"==c.pathname.charAt(0)?c.pathname:"/"+c.pathname;return d};OpenLayers.Util.removeTail=function(a){var b=null,b=a.indexOf("?"),c=a.indexOf("#");return b=-1==b?-1!=c?a.substr(0,c):a:-1!=c?a.substr(0,Math.min(b,c)):a.substr(0,b)};OpenLayers.IS_GECKO=function(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("webkit")&&-1!=a.indexOf("gecko")}();
OpenLayers.CANVAS_SUPPORTED=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}();OpenLayers.BROWSER_NAME=function(){var a="",b=navigator.userAgent.toLowerCase();-1!=b.indexOf("opera")?a="opera":-1!=b.indexOf("msie")?a="msie":-1!=b.indexOf("safari")?a="safari":-1!=b.indexOf("mozilla")&&(a=-1!=b.indexOf("firefox")?"firefox":"mozilla");return a}();OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME};
OpenLayers.Util.getRenderedDimensions=function(a,b,c){var d,e,f=document.createElement("div");f.style.visibility="hidden";var g=c&&c.containerElement?c.containerElement:document.body;b&&(b.w?(d=b.w,f.style.width=d+"px"):b.h&&(e=b.h,f.style.height=e+"px"));c&&c.displayClass&&(f.className=c.displayClass);b=document.createElement("div");b.innerHTML=a;b.style.overflow="visible";if(b.childNodes)for(a=0,c=b.childNodes.length;a<c;a++)b.childNodes[a].style&&(b.childNodes[a].style.overflow="visible");f.appendChild(b);
g.appendChild(f);a=!1;for(c=f.parentNode;c&&"body"!=c.tagName.toLowerCase();){var h=OpenLayers.Element.getStyle(c,"position");if("absolute"==h){a=!0;break}else if(h&&"static"!=h)break;c=c.parentNode}a||(f.style.position="absolute");d||(d=parseInt(b.scrollWidth),f.style.width=d+"px");e||(e=parseInt(b.scrollHeight));f.removeChild(b);g.removeChild(f);return new OpenLayers.Size(d,e)};
OpenLayers.Util.getScrollbarWidth=function(){var a=OpenLayers.Util._scrollbarWidth;if(null==a){var b=null,c=null,b=a=0,b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="hidden";c=document.createElement("div");c.style.width="100%";c.style.height="200px";b.appendChild(c);document.body.appendChild(b);a=c.offsetWidth;b.style.overflow="scroll";b=c.offsetWidth;document.body.removeChild(document.body.lastChild);
OpenLayers.Util._scrollbarWidth=a-b;a=OpenLayers.Util._scrollbarWidth}return a};
OpenLayers.Util.getFormattedLonLat=function(a,b,c){c||(c="dms");a=(a+540)%360-180;var d=Math.abs(a),e=Math.floor(d),f=d=(d-e)/(1/60),d=Math.floor(d),f=Math.round((f-d)/(1/60)*10),f=f/10;60<=f&&(f-=60,d+=1,60<=d&&(d-=60,e+=1));10>e&&(e="0"+e);e+="\u00b0";0<=c.indexOf("dm")&&(10>d&&(d="0"+d),e+=d+"'",0<=c.indexOf("dms")&&(10>f&&(f="0"+f),e+=f+'"'));return e="lon"==b?e+(0>a?OpenLayers.i18n("W"):OpenLayers.i18n("E")):e+(0>a?OpenLayers.i18n("S"):OpenLayers.i18n("N"))};
OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a},destroy:function(){},read:function(a){throw Error("Read not implemented.");},write:function(a){throw Error("Write not implemented.");},CLASS_NAME:"OpenLayers.Format"});
OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(a){window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"));OpenLayers.Format.prototype.initialize.apply(this,[a]);this.namespaces=OpenLayers.Util.extend({},this.namespaces);this.namespaceAlias={};for(var b in this.namespaces)this.namespaceAlias[this.namespaces[b]]=b},destroy:function(){this.xmldom=null;OpenLayers.Format.prototype.destroy.apply(this,
arguments)},setNamespace:function(a,b){this.namespaces[a]=b;this.namespaceAlias[b]=a},read:function(a){var b=a.indexOf("<");0<b&&(a=a.substring(b));b=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var b;b=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom;b.loadXML(a);return b},this),function(){return(new DOMParser).parseFromString(a,"text/xml")},function(){var b=new XMLHttpRequest;b.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(a),!1);b.overrideMimeType&&
b.overrideMimeType("text/xml");b.send(null);return b.responseXML});this.keepData&&(this.data=b);return b},write:function(a){if(this.xmldom)a=a.xml;else{var b=new XMLSerializer;if(1==a.nodeType){var c=document.implementation.createDocument("","",null);c.importNode&&(a=c.importNode(a,!0));c.appendChild(a);a=b.serializeToString(c)}else a=b.serializeToString(a)}return a},createElementNS:function(a,b){return this.xmldom?"string"==typeof a?this.xmldom.createNode(1,b,a):this.xmldom.createNode(1,b,""):document.createElementNS(a,
b)},createTextNode:function(a){"string"!==typeof a&&(a=String(a));return this.xmldom?this.xmldom.createTextNode(a):document.createTextNode(a)},getElementsByTagNameNS:function(a,b,c){var d=[];if(a.getElementsByTagNameNS)d=a.getElementsByTagNameNS(b,c);else{a=a.getElementsByTagName("*");for(var e,f,g=0,h=a.length;g<h;++g)if(e=a[g],f=e.prefix?e.prefix+":"+c:c,"*"==c||f==e.nodeName)"*"!=b&&b!=e.namespaceURI||d.push(e)}return d},getAttributeNodeNS:function(a,b,c){var d=null;if(a.getAttributeNodeNS)d=a.getAttributeNodeNS(b,
c);else{a=a.attributes;for(var e,f,g=0,h=a.length;g<h;++g)if(e=a[g],e.namespaceURI==b&&(f=e.prefix?e.prefix+":"+c:c,f==e.nodeName)){d=e;break}}return d},getAttributeNS:function(a,b,c){var d="";if(a.getAttributeNS)d=a.getAttributeNS(b,c)||"";else if(a=this.getAttributeNodeNS(a,b,c))d=a.nodeValue;return d},getChildValue:function(a,b){var c=b||"";if(a)for(var d=a.firstChild;d;d=d.nextSibling)switch(d.nodeType){case 3:case 4:c+=d.nodeValue}return c},isSimpleContent:function(a){var b=!0;for(a=a.firstChild;a;a=
a.nextSibling)if(1===a.nodeType){b=!1;break}return b},contentType:function(a){var b=!1,c=!1,d=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(a=a.firstChild;a;a=a.nextSibling){switch(a.nodeType){case 1:c=!0;break;case 8:break;default:b=!0}if(c&&b)break}if(c&&b)d=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(c)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(b)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return d},hasAttributeNS:function(a,b,c){var d=!1;return d=a.hasAttributeNS?a.hasAttributeNS(b,
c):!!this.getAttributeNodeNS(a,b,c)},setAttributeNS:function(a,b,c,d){if(a.setAttributeNS)a.setAttributeNS(b,c,d);else if(this.xmldom)b?(b=a.ownerDocument.createNode(2,c,b),b.nodeValue=d,a.setAttributeNode(b)):a.setAttribute(c,d);else throw"setAttributeNS not implemented";},createElementNSPlus:function(a,b){b=b||{};var c=b.uri||this.namespaces[b.prefix];c||(c=a.indexOf(":"),c=this.namespaces[a.substring(0,c)]);c||(c=this.namespaces[this.defaultPrefix]);c=this.createElementNS(c,a);b.attributes&&this.setAttributes(c,
b.attributes);var d=b.value;null!=d&&c.appendChild(this.createTextNode(d));return c},setAttributes:function(a,b){var c,d,e;for(e in b)null!=b[e]&&b[e].toString&&(c=b[e].toString(),d=this.namespaces[e.substring(0,e.indexOf(":"))]||null,this.setAttributeNS(a,d,e,c))},readNode:function(a,b){b||(b={});var c=this.readers[a.namespaceURI?this.namespaceAlias[a.namespaceURI]:this.defaultPrefix];if(c){var d=a.localName||a.nodeName.split(":").pop();(c=c[d]||c["*"])&&c.apply(this,[a,b])}return b},readChildNodes:function(a,
b){b||(b={});for(var c=a.childNodes,d,e=0,f=c.length;e<f;++e)d=c[e],1==d.nodeType&&this.readNode(d,b);return b},writeNode:function(a,b,c){var d,e=a.indexOf(":");0<e?(d=a.substring(0,e),a=a.substring(e+1)):d=c?this.namespaceAlias[c.namespaceURI]:this.defaultPrefix;b=this.writers[d][a].apply(this,[b]);c&&c.appendChild(b);return b},getChildEl:function(a,b,c){return a&&this.getThisOrNextEl(a.firstChild,b,c)},getNextEl:function(a,b,c){return a&&this.getThisOrNextEl(a.nextSibling,b,c)},getThisOrNextEl:function(a,
b,c){a:for(;a;a=a.nextSibling)switch(a.nodeType){case 1:if(!(b&&b!==(a.localName||a.nodeName.split(":").pop())||c&&c!==a.namespaceURI))break a;a=null;break a;case 3:if(/^\s*$/.test(a.nodeValue))break;case 4:case 6:case 12:case 10:case 11:a=null;break a}return a||null},lookupNamespaceURI:function(a,b){var c=null;if(a)if(a.lookupNamespaceURI)c=a.lookupNamespaceURI(b);else a:switch(a.nodeType){case 1:if(null!==a.namespaceURI&&a.prefix===b){c=a.namespaceURI;break a}if(c=a.attributes.length)for(var d,
e=0;e<c;++e)if(d=a.attributes[e],"xmlns"===d.prefix&&d.name==="xmlns:"+b){c=d.value||null;break a}else if("xmlns"===d.name&&null===b){c=d.value||null;break a}c=this.lookupNamespaceURI(a.parentNode,b);break a;case 2:c=this.lookupNamespaceURI(a.ownerElement,b);break a;case 9:c=this.lookupNamespaceURI(a.documentElement,b);break a;case 6:case 12:case 10:case 11:break a;default:c=this.lookupNamespaceURI(a.parentNode,b)}return c},getXMLDoc:function(){OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&
document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")));return OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"});OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3};OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype);
OpenLayers.Format.XML.document=null;
OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){if("toISOString"in Date.prototype)return function(a){return a.toISOString()};var a=function(a,c){for(var d=a+"";d.length<c;)d="0"+d;return d};return function(b){return isNaN(b.getTime())?"Invalid Date":b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1,2)+"-"+a(b.getUTCDate(),2)+"T"+a(b.getUTCHours(),2)+":"+a(b.getUTCMinutes(),2)+":"+a(b.getUTCSeconds(),
2)+"."+a(b.getUTCMilliseconds(),3)+"Z"}}(),parse:function(a){var b;if((a=a.match(this.dateRegEx))&&(a[1]||a[7])){b=parseInt(a[1],10)||0;var c=parseInt(a[2],10)-1||0,d=parseInt(a[3],10)||1;b=new Date(Date.UTC(b,c,d));if(c=a[7]){var d=parseInt(a[4],10),e=parseInt(a[5],10),f=parseFloat(a[6]),g=f|0,f=Math.round(1E3*(f-g));b.setUTCHours(d,e,g,f);"Z"!==c&&(c=parseInt(c,10),a=parseInt(a[8],10)||0,a=-1E3*(3600*c+60*a),b=new Date(b.getTime()+a))}}else b=new Date("invalid");return b}};
OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(a,b,c){this.layer=a;this.lonlat=b;this.data=null!=c?c:{};this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup);null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker);this.data=this.lonlat=this.id=this.layer=null;null!=this.marker&&
(this.destroyMarker(this.marker),this.marker=null);null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var a=!1;null!=this.layer&&null!=this.layer.map&&(a=this.layer.map.getExtent().containsLonLat(this.lonlat));return a},createMarker:function(){null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon));return this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(a){null!=this.lonlat&&(this.popup||(this.popup=new (this.popupClass?
this.popupClass:OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,a)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this);return this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"});OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};
OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(a,b,c){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,b]);this.lonlat=null;this.geometry=a?a:null;this.state=null;this.attributes={};b&&(this.attributes=OpenLayers.Util.extend(this.attributes,b));this.style=c?c:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=
null);this.modified=this.geometry=null;OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(a){var b=!1;this.layer&&this.layer.map&&(b=this.layer.map.getExtent(),a?(a=this.geometry.getBounds(),b=b.intersectsBounds(a)):b=b.toGeometry().intersects(this.geometry));return b},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||
this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(a,b,c){var d=!1;this.geometry&&(d=this.geometry.atPoint(a,b,c));return d},destroyPopup:function(){},move:function(a){if(this.layer&&this.geometry.move){a="OpenLayers.LonLat"==a.CLASS_NAME?this.layer.getViewPortPxFromLonLat(a):a;var b=
this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),c=this.layer.map.getResolution();this.geometry.move(c*(a.x-b.x),c*(b.y-a.y));this.layer.drawFeature(this);return b}},toState:function(a){if(a==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=a}else if(a==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=a}else if(a==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=
a}else a==OpenLayers.State.UNKNOWN&&(this.state=a)},CLASS_NAME:"OpenLayers.Feature.Vector"});
OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:0.4,
hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:0.2,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#66cccc",strokeOpacity:1,
strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}};
OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(a){a&&(this.bounds=a.clone())},clearBounds:function(){this.bounds=null;this.parent&&this.parent.clearBounds()},extendBounds:function(a){this.getBounds()?this.bounds.extend(a):this.setBounds(a)},getBounds:function(){null==this.bounds&&this.calculateBounds();
return this.bounds},calculateBounds:function(){},distanceTo:function(a,b){},getVertices:function(a){},atPoint:function(a,b,c){var d=!1;null!=this.getBounds()&&null!=a&&(b=null!=b?b:0,c=null!=c?c:0,d=(new OpenLayers.Bounds(this.bounds.left-b,this.bounds.bottom-c,this.bounds.right+b,this.bounds.top+c)).containsLonLat(a));return d},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):
Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"});OpenLayers.Geometry.fromWKT=function(a){var b;if(OpenLayers.Format&&OpenLayers.Format.WKT){var c=OpenLayers.Geometry.fromWKT.format;c||(c=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=c);a=c.read(a);if(a instanceof OpenLayers.Feature.Vector)b=a.geometry;else if(OpenLayers.Util.isArray(a)){b=a.length;for(var c=Array(b),d=0;d<b;++d)c[d]=a[d].geometry;b=new OpenLayers.Geometry.Collection(c)}}return b};
OpenLayers.Geometry.segmentsIntersect=function(a,b,c){var d=c&&c.point;c=c&&c.tolerance;var e=!1,f=a.x1-b.x1,g=a.y1-b.y1,h=a.x2-a.x1,k=a.y2-a.y1,l=b.y2-b.y1,m=b.x2-b.x1,n=l*h-m*k,l=m*g-l*f,g=h*g-k*f;0==n?0==l&&0==g&&(e=!0):(f=l/n,n=g/n,0<=f&&1>=f&&0<=n&&1>=n&&(d?(h=a.x1+f*h,n=a.y1+f*k,e=new OpenLayers.Geometry.Point(h,n)):e=!0));if(c)if(e){if(d)a:for(a=[a,b],b=0;2>b;++b)for(f=a[b],k=1;3>k;++k)if(h=f["x"+k],n=f["y"+k],d=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(n-e.y,2)),d<c){e.x=h;e.y=n;break a}}else a:for(a=
[a,b],b=0;2>b;++b)for(h=a[b],n=a[(b+1)%2],k=1;3>k;++k)if(f={x:h["x"+k],y:h["y"+k]},g=OpenLayers.Geometry.distanceToSegment(f,n),g.distance<c){e=d?new OpenLayers.Geometry.Point(f.x,f.y):!0;break a}return e};OpenLayers.Geometry.distanceToSegment=function(a,b){var c=a.x,d=a.y,e=b.x1,f=b.y1,g=b.x2,h=b.y2,k=g-e,l=h-f,m=(k*(c-e)+l*(d-f))/(Math.pow(k,2)+Math.pow(l,2));0>=m||(1<=m?(e=g,f=h):(e+=m*k,f+=m*l));return{distance:Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),x:e,y:f}};
OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(a,b){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.x=parseFloat(a);this.y=parseFloat(b)},clone:function(a){null==a&&(a=new OpenLayers.Geometry.Point(this.x,this.y));OpenLayers.Util.applyDefaults(a,this);return a},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(a,b){var c=!(b&&!1===b.edge)&&b&&b.details,d,e,f,g,h;a instanceof
OpenLayers.Geometry.Point?(e=this.x,f=this.y,g=a.x,h=a.y,d=Math.sqrt(Math.pow(e-g,2)+Math.pow(f-h,2)),d=c?{x0:e,y0:f,x1:g,y1:h,distance:d}:d):(d=a.distanceTo(this,b),c&&(d={x0:d.x1,y0:d.y1,x1:d.x0,y1:d.y0,distance:d.distance}));return d},equals:function(a){var b=!1;null!=a&&(b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y));return b},toShortString:function(){return this.x+", "+this.y},move:function(a,b){this.x+=a;this.y+=b;this.clearBounds()},rotate:function(a,b){a*=
Math.PI/180;var c=this.distanceTo(b),d=a+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(d);this.y=b.y+c*Math.sin(d);this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(a,b,c){this.x=b.x+a*(void 0==c?1:c)*(this.x-b.x);this.y=b.y+a*(this.y-b.y);this.clearBounds();return this},intersects:function(a){var b=!1;return b="OpenLayers.Geometry.Point"==a.CLASS_NAME?this.equals(a):a.intersects(this)},transform:function(a,b){a&&b&&(OpenLayers.Projection.transform(this,
a,b),this.bounds=null);return this},getVertices:function(a){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"});
OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(a){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.components=[];null!=a&&this.addComponents(a)},destroy:function(){this.components.length=0;this.components=null;OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());
OpenLayers.Util.applyDefaults(a,this);return a},getComponentsString:function(){for(var a=[],b=0,c=this.components.length;b<c;b++)a.push(this.components[b].toShortString());return a.join(",")},calculateBounds:function(){this.bounds=null;var a=new OpenLayers.Bounds,b=this.components;if(b)for(var c=0,d=b.length;c<d;c++)a.extend(b[c].getBounds());null!=a.left&&null!=a.bottom&&null!=a.right&&null!=a.top&&this.setBounds(a)},addComponents:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;b<
c;b++)this.addComponent(a[b])},addComponent:function(a,b){var c=!1;if(a&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,a.CLASS_NAME))){if(null!=b&&b<this.components.length){var c=this.components.slice(0,b),d=this.components.slice(b,this.components.length);c.push(a);this.components=c.concat(d)}else this.components.push(a);a.parent=this;this.clearBounds();c=!0}return c},removeComponents:function(a){var b=!1;OpenLayers.Util.isArray(a)||(a=[a]);for(var c=a.length-1;0<=c;--c)b=
this.removeComponent(a[c])||b;return b},removeComponent:function(a){OpenLayers.Util.removeItem(this.components,a);this.clearBounds();return!0},getLength:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getLength();return a},getArea:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getArea();return a},getGeodesicArea:function(a){for(var b=0,c=0,d=this.components.length;c<d;c++)b+=this.components[c].getGeodesicArea(a);return b},getCentroid:function(a){if(!a)return this.components.length&&
this.components[0].getCentroid();a=this.components.length;if(!a)return!1;for(var b=[],c=[],d=0,e=Number.MAX_VALUE,f,g=0;g<a;++g){f=this.components[g];var h=f.getArea();f=f.getCentroid(!0);isNaN(h)||isNaN(f.x)||isNaN(f.y)||(b.push(h),d+=h,e=h<e&&0<h?h:e,c.push(f))}a=b.length;if(0===d){for(g=0;g<a;++g)b[g]=1;d=b.length}else{for(g=0;g<a;++g)b[g]/=e;d/=e}for(var k=e=0,g=0;g<a;++g)f=c[g],h=b[g],e+=f.x*h,k+=f.y*h;return new OpenLayers.Geometry.Point(e/d,k/d)},getGeodesicLength:function(a){for(var b=0,c=
0,d=this.components.length;c<d;c++)b+=this.components[c].getGeodesicLength(a);return b},move:function(a,b){for(var c=0,d=this.components.length;c<d;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;c<d;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0;d<this.components.length;++d)this.components[d].resize(a,b,c);return this},distanceTo:function(a,b){for(var c=!(b&&!1===b.edge)&&b&&b.details,d,e,f,g=Number.POSITIVE_INFINITY,h=0,k=this.components.length;h<
k&&!(d=this.components[h].distanceTo(a,b),f=c?d.distance:d,f<g&&(g=f,e=d,0==g));++h);return e},equals:function(a){var b=!0;if(a&&a.CLASS_NAME&&this.CLASS_NAME==a.CLASS_NAME)if(OpenLayers.Util.isArray(a.components)&&a.components.length==this.components.length)for(var c=0,d=this.components.length;c<d;++c){if(!this.components[c].equals(a.components[c])){b=!1;break}}else b=!1;else b=!1;return b},transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;c<d;c++)this.components[c].transform(a,
b);this.bounds=null}return this},intersects:function(a){for(var b=!1,c=0,d=this.components.length;c<d&&!(b=a.intersects(this.components[c]));++c);return b},getVertices:function(a){for(var b=[],c=0,d=this.components.length;c<d;++c)Array.prototype.push.apply(b,this.components[c].getVertices(a));return b},CLASS_NAME:"OpenLayers.Geometry.Collection"});
OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(a,b){this.addComponent(a,b)},removePoint:function(a){this.removeComponent(a)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"});
OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var a=0;if(this.components&&1<this.components.length)for(var b=1,c=this.components.length;b<c;b++)a+=this.components[b-1].distanceTo(this.components[b]);return a},getGeodesicLength:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}a=0;if(b.components&&1<b.components.length)for(var d,e=1,f=b.components.length;e<
f;e++)c=b.components[e-1],d=b.components[e],a+=OpenLayers.Util.distVincenty({lon:c.x,lat:c.y},{lon:d.x,lat:d.y});return 1E3*a},CLASS_NAME:"OpenLayers.Geometry.Curve"});
OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(a){var b=this.components&&2<this.components.length;b&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);return b},intersects:function(a){var b=!1,c=a.CLASS_NAME;if("OpenLayers.Geometry.LineString"==c||"OpenLayers.Geometry.LinearRing"==c||"OpenLayers.Geometry.Point"==c){var d=this.getSortedSegments();a="OpenLayers.Geometry.Point"==c?[{x1:a.x,y1:a.y,x2:a.x,y2:a.y}]:a.getSortedSegments();
var e,f,g,h,k,l,m,n=0,p=d.length;a:for(;n<p;++n){c=d[n];e=c.x1;f=c.x2;g=c.y1;h=c.y2;var q=0,r=a.length;for(;q<r;++q){k=a[q];if(k.x1>f)break;if(!(k.x2<e||(l=k.y1,m=k.y2,Math.min(l,m)>Math.max(g,h)||Math.max(l,m)<Math.min(g,h)||!OpenLayers.Geometry.segmentsIntersect(c,k)))){b=!0;break a}}}}else b=a.intersects(this);return b},getSortedSegments:function(){for(var a=this.components.length-1,b=Array(a),c,d,e=0;e<a;++e)c=this.components[e],d=this.components[e+1],b[e]=c.x<d.x?{x1:c.x,y1:c.y,x2:d.x,y2:d.y}:
{x1:d.x,y1:d.y,x2:c.x,y2:c.y};return b.sort(function(a,b){return a.x1-b.x1})},splitWithSegment:function(a,b){for(var c=!(b&&!1===b.edge),d=b&&b.tolerance,e=[],f=this.getVertices(),g=[],h=[],k=!1,l,m,n,p={point:!0,tolerance:d},q=null,r=0,s=f.length-2;r<=s;++r)if(d=f[r],g.push(d.clone()),l=f[r+1],m={x1:d.x,y1:d.y,x2:l.x,y2:l.y},m=OpenLayers.Geometry.segmentsIntersect(a,m,p),m instanceof OpenLayers.Geometry.Point&&((n=m.x===a.x1&&m.y===a.y1||m.x===a.x2&&m.y===a.y2||m.equals(d)||m.equals(l)?!0:!1)||c))m.equals(h[h.length-
1])||h.push(m.clone()),0===r&&m.equals(d)||m.equals(l)||(k=!0,m.equals(d)||g.push(m),e.push(new OpenLayers.Geometry.LineString(g)),g=[m.clone()]);k&&(g.push(l.clone()),e.push(new OpenLayers.Geometry.LineString(g)));if(0<h.length)var t=a.x1<a.x2?1:-1,u=a.y1<a.y2?1:-1,q={lines:e,points:h.sort(function(a,b){return t*a.x-t*b.x||u*a.y-u*b.y})};return q},split:function(a,b){var c=null,d=b&&b.mutual,e,f,g,h;if(a instanceof OpenLayers.Geometry.LineString){var k=this.getVertices(),l,m,n,p,q,r=[];g=[];for(var s=
0,t=k.length-2;s<=t;++s){l=k[s];m=k[s+1];n={x1:l.x,y1:l.y,x2:m.x,y2:m.y};h=h||[a];d&&r.push(l.clone());for(var u=0;u<h.length;++u)if(p=h[u].splitWithSegment(n,b))if(q=p.lines,0<q.length&&(q.unshift(u,1),Array.prototype.splice.apply(h,q),u+=q.length-2),d)for(var v=0,w=p.points.length;v<w;++v)q=p.points[v],q.equals(l)||(r.push(q),g.push(new OpenLayers.Geometry.LineString(r)),r=q.equals(m)?[]:[q.clone()])}d&&0<g.length&&0<r.length&&(r.push(m.clone()),g.push(new OpenLayers.Geometry.LineString(r)))}else c=
a.splitWith(this,b);h&&1<h.length?f=!0:h=[];g&&1<g.length?e=!0:g=[];if(f||e)c=d?[g,h]:h;return c},splitWith:function(a,b){return a.split(this,b)},getVertices:function(a){return!0===a?[this.components[0],this.components[this.components.length-1]]:!1===a?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(a,b){var c=!(b&&!1===b.edge)&&b&&b.details,d,e={},f=Number.POSITIVE_INFINITY;if(a instanceof OpenLayers.Geometry.Point){for(var g=this.getSortedSegments(),
h=a.x,k=a.y,l,m=0,n=g.length;m<n;++m)if(l=g[m],d=OpenLayers.Geometry.distanceToSegment(a,l),d.distance<f){if(f=d.distance,e=d,0===f)break}else if(l.x2>h&&(k>l.y1&&k<l.y2||k<l.y1&&k>l.y2))break;e=c?{distance:e.distance,x0:e.x,y0:e.y,x1:h,y1:k}:e.distance}else if(a instanceof OpenLayers.Geometry.LineString){var g=this.getSortedSegments(),h=a.getSortedSegments(),p,q,r=h.length,s={point:!0},m=0,n=g.length;a:for(;m<n;++m){k=g[m];l=k.x1;q=k.y1;for(var t=0;t<r;++t)if(d=h[t],p=OpenLayers.Geometry.segmentsIntersect(k,
d,s)){f=0;e={distance:0,x0:p.x,y0:p.y,x1:p.x,y1:p.y};break a}else d=OpenLayers.Geometry.distanceToSegment({x:l,y:q},d),d.distance<f&&(f=d.distance,e={distance:f,x0:l,y0:q,x1:d.x,y1:d.y})}c||(e=e.distance);0!==f&&k&&(d=a.distanceTo(new OpenLayers.Geometry.Point(k.x2,k.y2),b),m=c?d.distance:d,m<f&&(e=c?{distance:f,x0:d.x1,y0:d.y1,x1:d.x0,y1:d.y0}:m))}else e=a.distanceTo(this,b),c&&(e={distance:e.distance,x0:e.x1,y0:e.y1,x1:e.x0,y1:e.y0});return e},simplify:function(a){if(this&&null!==this){var b=this.getVertices();
if(3>b.length)return this;var c=function(a,b,d,k){for(var l=0,m=0,n=b,p;n<d;n++){p=a[b];var q=a[d],r=a[n],r=Math.abs(0.5*(p.x*q.y+q.x*r.y+r.x*p.y-q.x*p.y-r.x*q.y-p.x*r.y));p=Math.sqrt(Math.pow(p.x-q.x,2)+Math.pow(p.y-q.y,2));p=r/p*2;p>l&&(l=p,m=n)}l>k&&m!=b&&(e.push(m),c(a,b,m,k),c(a,m,d,k))},d=b.length-1,e=[];e.push(0);for(e.push(d);b[0].equals(b[d]);)d--,e.push(d);c(b,0,d,a);a=[];e.sort(function(a,b){return a-b});for(d=0;d<e.length;d++)a.push(b[e[d]]);return new OpenLayers.Geometry.LineString(a)}return this},
CLASS_NAME:"OpenLayers.Geometry.LineString"});
OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(a,b){var c=!1,d=this.components.pop();null==b&&a.equals(d)||(c=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments));OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]);return c},removeComponent:function(a){var b=this.components&&3<this.components.length;b&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,
arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]));return b},move:function(a,b){for(var c=0,d=this.components.length;c<d-1;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;c<d-1;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0,e=this.components.length;d<e-1;++d)this.components[d].resize(a,b,c);return this},transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;c<d-1;c++)this.components[c].transform(a,
b);this.bounds=null}return this},getCentroid:function(){if(this.components){var a=this.components.length;if(0<a&&2>=a)return this.components[0].clone();if(2<a){var b=0,c=0,d=this.components[0].x,e=this.components[0].y,f=-1*this.getArea();if(0!=f){for(var g=0;g<a-1;g++)var h=this.components[g],k=this.components[g+1],b=b+(h.x+k.x-2*d)*((h.x-d)*(k.y-e)-(k.x-d)*(h.y-e)),c=c+(h.y+k.y-2*e)*((h.x-d)*(k.y-e)-(k.x-d)*(h.y-e));b=d+b/(6*f);a=e+c/(6*f)}else{for(g=0;g<a-1;g++)b+=this.components[g].x,c+=this.components[g].y;
b/=a-1;a=c/(a-1)}return new OpenLayers.Geometry.Point(b,a)}return null}},getArea:function(){var a=0;if(this.components&&2<this.components.length){for(var b=a=0,c=this.components.length;b<c-1;b++)var d=this.components[b],e=this.components[b+1],a=a+(d.x+e.x)*(e.y-d.y);a=-a/2}return a},getGeodesicArea:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}a=0;c=b.components&&b.components.length;if(2<c){for(var d,e,f=0;f<c-1;f++)d=b.components[f],
e=b.components[f+1],a+=OpenLayers.Util.rad(e.x-d.x)*(2+Math.sin(OpenLayers.Util.rad(d.y))+Math.sin(OpenLayers.Util.rad(e.y)));a=40680631590769*a/2}return a},containsPoint:function(a){var b=OpenLayers.Number.limitSigDigs,c=b(a.x,14);a=b(a.y,14);for(var d=this.components.length-1,e,f,g,h,k,l=0,m=0;m<d;++m)if(e=this.components[m],g=b(e.x,14),e=b(e.y,14),f=this.components[m+1],h=b(f.x,14),f=b(f.y,14),e==f){if(a==e&&(g<=h&&c>=g&&c<=h||g>=h&&c<=g&&c>=h)){l=-1;break}}else{k=b((h-g)/(f-e)*(a-f)+h,14);if(k==
c&&(e<f&&a>=e&&a<=f||e>f&&a<=e&&a>=f)){l=-1;break}k<=c||g!=h&&(k<Math.min(g,h)||k>Math.max(g,h))||(e<f&&a>=e&&a<f||e>f&&a<e&&a>=f)&&++l}return-1==l?1:!!(l&1)},intersects:function(a){var b=!1;if("OpenLayers.Geometry.Point"==a.CLASS_NAME)b=this.containsPoint(a);else if("OpenLayers.Geometry.LineString"==a.CLASS_NAME)b=a.intersects(this);else if("OpenLayers.Geometry.LinearRing"==a.CLASS_NAME)b=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[a]);else for(var c=0,d=a.components.length;c<
d&&!(b=a.components[c].intersects(this));++c);return b},getVertices:function(a){return!0===a?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});
OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var a=0;if(this.components&&0<this.components.length)for(var a=a+Math.abs(this.components[0].getArea()),b=1,c=this.components.length;b<c;b++)a-=Math.abs(this.components[b].getArea());return a},getGeodesicArea:function(a){var b=0;if(this.components&&0<this.components.length)for(var b=b+Math.abs(this.components[0].getGeodesicArea(a)),c=1,d=this.components.length;c<
d;c++)b-=Math.abs(this.components[c].getGeodesicArea(a));return b},containsPoint:function(a){var b=this.components.length,c=!1;if(0<b&&(c=this.components[0].containsPoint(a),1!==c&&c&&1<b))for(var d,e=1;e<b;++e)if(d=this.components[e].containsPoint(a)){c=1===d?1:!1;break}return c},intersects:function(a){var b=!1,c,d;if("OpenLayers.Geometry.Point"==a.CLASS_NAME)b=this.containsPoint(a);else if("OpenLayers.Geometry.LineString"==a.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==a.CLASS_NAME){c=0;for(d=
this.components.length;c<d&&!(b=a.intersects(this.components[c]));++c);if(!b)for(c=0,d=a.components.length;c<d&&!(b=this.containsPoint(a.components[c]));++c);}else for(c=0,d=a.components.length;c<d&&!(b=this.intersects(a.components[c]));++c);if(!b&&"OpenLayers.Geometry.Polygon"==a.CLASS_NAME){var e=this.components[0];c=0;for(d=e.components.length;c<d&&!(b=a.containsPoint(e.components[c]));++c);}return b},distanceTo:function(a,b){return b&&!1===b.edge&&this.intersects(a)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,
[a,b])},CLASS_NAME:"OpenLayers.Geometry.Polygon"});OpenLayers.Geometry.Polygon.createRegularPolygon=function(a,b,c,d){var e=Math.PI*(1/c-0.5);d&&(e+=d/180*Math.PI);for(var f,g=[],h=0;h<c;++h)f=e+2*h*Math.PI/c,d=a.x+b*Math.cos(f),f=a.y+b*Math.sin(f),g.push(new OpenLayers.Geometry.Point(d,f));a=new OpenLayers.Geometry.LinearRing(g);return new OpenLayers.Geometry.Polygon([a])};
OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},isSingleTouch:function(a){return a.touches&&1==a.touches.length},isMultiTouch:function(a){return a.touches&&1<a.touches.length},isLeftClick:function(a){return a.which&&1==a.which||a.button&&1==a.button},isRightClick:function(a){return a.which&&3==a.which||a.button&&2==a.button},stop:function(a,
b){b||(a.preventDefault?a.preventDefault():a.returnValue=!1);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},findElement:function(a,b){for(var c=OpenLayers.Event.element(a);c.parentNode&&(!c.tagName||c.tagName.toUpperCase()!=b.toUpperCase());)c=c.parentNode;return c},observe:function(a,b,c,d){a=OpenLayers.Util.getElement(a);d=d||!1;"keypress"==b&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.attachEvent)&&(b="keydown");this.observers||(this.observers={});if(!a._eventCacheID){var e=
"eventCacheID_";a.id&&(e=a.id+"_"+e);a._eventCacheID=OpenLayers.Util.createUniqueID(e)}e=a._eventCacheID;this.observers[e]||(this.observers[e]=[]);this.observers[e].push({element:a,name:b,observer:c,useCapture:d});a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},stopObservingElement:function(a){a=OpenLayers.Util.getElement(a)._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(a){if(a)for(var b=a.length-1;0<=
b;b--){var c=a[b];OpenLayers.Event.stopObserving.apply(this,[c.element,c.name,c.observer,c.useCapture])}},stopObserving:function(a,b,c,d){d=d||!1;a=OpenLayers.Util.getElement(a);var e=a._eventCacheID;"keypress"==b&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)&&(b="keydown");var f=!1,g=OpenLayers.Event.observers[e];if(g)for(var h=0;!f&&h<g.length;){var k=g[h];if(k.name==b&&k.observer==c&&k.useCapture==d){g.splice(h,1);0==g.length&&delete OpenLayers.Event.observers[e];f=!0;
break}h++}f&&(a.removeEventListener?a.removeEventListener(b,c,d):a&&a.detachEvent&&a.detachEvent("on"+b,c));return f},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var a in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[a]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"};OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1);
OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(a,b,c,d,e){OpenLayers.Util.extend(this,e);this.object=a;this.fallThrough=d;this.listeners={};this.extensions={};this.extensionCount=
{};null!=b&&this.attachToElement(b)},destroy:function(){for(var a in this.extensions)"boolean"!==typeof this.extensions[a]&&this.extensions[a].destroy();this.extensions=null;this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener));this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(a){},attachToElement:function(a){this.element?OpenLayers.Event.stopObservingElement(this.element):
(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this));this.element=a;for(var b=0,c=this.BROWSER_EVENTS.length;b<c;b++)OpenLayers.Event.observe(a,this.BROWSER_EVENTS[b],this.eventHandler);OpenLayers.Event.observe(a,"dragstart",OpenLayers.Event.stop)},on:function(a){for(var b in a)"scope"!=b&&a.hasOwnProperty(b)&&this.register(b,a.scope,a[b])},register:function(a,b,c,d){a in OpenLayers.Events&&
!this.extensions[a]&&(this.extensions[a]=new OpenLayers.Events[a](this));if(null!=c){null==b&&(b=this.object);var e=this.listeners[a];e||(e=[],this.listeners[a]=e,this.extensionCount[a]=0);b={obj:b,func:c};d?(e.splice(this.extensionCount[a],0,b),"object"===typeof d&&d.extension&&this.extensionCount[a]++):e.push(b)}},registerPriority:function(a,b,c){this.register(a,b,c,!0)},un:function(a){for(var b in a)"scope"!=b&&a.hasOwnProperty(b)&&this.unregister(b,a.scope,a[b])},unregister:function(a,b,c){null==
b&&(b=this.object);a=this.listeners[a];if(null!=a)for(var d=0,e=a.length;d<e;d++)if(a[d].obj==b&&a[d].func==c){a.splice(d,1);break}},remove:function(a){null!=this.listeners[a]&&(this.listeners[a]=[])},triggerEvent:function(a,b){var c=this.listeners[a];if(c&&0!=c.length){null==b&&(b={});b.object=this.object;b.element=this.element;b.type||(b.type=a);for(var c=c.slice(),d,e=0,f=c.length;e<f&&(d=c[e],d=d.func.apply(d.obj,[b]),void 0==d||!1!=d);e++);this.fallThrough||OpenLayers.Event.stop(b,!0);return d}},
handleBrowserEvent:function(a){var b=a.type,c=this.listeners[b];if(c&&0!=c.length){if((c=a.touches)&&c[0]){for(var d=0,e=0,f=c.length,g,h=0;h<f;++h)g=c[h],d+=g.clientX,e+=g.clientY;a.clientX=d/f;a.clientY=e/f}this.includeXY&&(a.xy=this.getMousePosition(a));this.triggerEvent(b,a)}},clearMouseCache:function(){this.element.scrolls=null;this.element.lefttop=null;var a=document.body;a&&(0==a.scrollTop&&0==a.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)},getMousePosition:function(a){this.includeXY?
this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache();if(!this.element.scrolls){var b=OpenLayers.Util.getViewportElement();this.element.scrolls=[b.scrollLeft,b.scrollTop]}this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]);this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element));return new OpenLayers.Pixel(a.clientX+
this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],a.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},CLASS_NAME:"OpenLayers.Events"});OpenLayers.ProxyHost="";OpenLayers.Request||(OpenLayers.Request={});
OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(a,b){var c=0!==a.indexOf("http"),d=!c&&a.match(this.URL_SPLIT_REGEX);if(d){var e=window.location,c=d[1]==e.protocol&&d[3]==
e.hostname,d=d[4],e=e.port;if(80!=d&&""!=d||"80"!=e&&""!=e)c=c&&d==e}c||(b?a="function"==typeof b?b(a):b+encodeURIComponent(a):OpenLayers.Console.warn(OpenLayers.i18n("proxyNeeded"),{url:a}));return a},issue:function(a){var b=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});a=OpenLayers.Util.applyDefaults(a,b);var b=!1,c;for(c in a.headers)a.headers.hasOwnProperty(c)&&"x-requested-with"===c.toLowerCase()&&(b=!0);!1===b&&(a.headers["X-Requested-With"]="XMLHttpRequest");var d=
new OpenLayers.Request.XMLHttpRequest,e=OpenLayers.Util.urlAppend(a.url,OpenLayers.Util.getParameterString(a.params||{})),e=OpenLayers.Request.makeSameOrigin(e,a.proxy);d.open(a.method,e,a.async,a.user,a.password);for(var f in a.headers)d.setRequestHeader(f,a.headers[f]);var g=this.events,h=this;d.onreadystatechange=function(){d.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==g.triggerEvent("complete",{request:d,config:a,requestUrl:e})&&h.runCallbacks({request:d,config:a,requestUrl:e})};
!1===a.async?d.send(a.data):window.setTimeout(function(){0!==d.readyState&&d.send(a.data)},0);return d},runCallbacks:function(a){var b=a.request,c=a.config,d=c.scope?OpenLayers.Function.bind(c.callback,c.scope):c.callback,e;c.success&&(e=c.scope?OpenLayers.Function.bind(c.success,c.scope):c.success);var f;c.failure&&(f=c.scope?OpenLayers.Function.bind(c.failure,c.scope):c.failure);"file:"==OpenLayers.Util.createUrlObject(c.url).protocol&&b.responseText&&(b.status=200);d(b);if(!b.status||200<=b.status&&
300>b.status)this.events.triggerEvent("success",a),e&&e(b);b.status&&(200>b.status||300<=b.status)&&(this.events.triggerEvent("failure",a),f&&f(b))},GET:function(a){a=OpenLayers.Util.extend(a,{method:"GET"});return OpenLayers.Request.issue(a)},POST:function(a){a=OpenLayers.Util.extend(a,{method:"POST"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},PUT:function(a){a=OpenLayers.Util.extend(a,
{method:"PUT"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},DELETE:function(a){a=OpenLayers.Util.extend(a,{method:"DELETE"});return OpenLayers.Request.issue(a)},HEAD:function(a){a=OpenLayers.Util.extend(a,{method:"HEAD"});return OpenLayers.Request.issue(a)},OPTIONS:function(a){a=OpenLayers.Util.extend(a,{method:"OPTIONS"});return OpenLayers.Request.issue(a)}});
(function(){function a(){this._object=f&&!k?new f:new window.ActiveXObject("Microsoft.XMLHTTP");this._listeners=[]}function b(){return new a}function c(a){b.onreadystatechange&&b.onreadystatechange.apply(a);a.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function d(a){try{a.responseText=a._object.responseText}catch(b){}try{var c;var d=a._object,e=d.responseXML,f=d.responseText;h&&f&&e&&!e.documentElement&&d.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&
(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(f));c=e&&(h&&0!=e.parseError||!e.documentElement||e.documentElement&&"parsererror"==e.documentElement.tagName)?null:e;a.responseXML=c}catch(g){}try{a.status=a._object.status}catch(k){}try{a.statusText=a._object.statusText}catch(u){}}function e(a){a._object.onreadystatechange=new window.Function}var f=window.XMLHttpRequest,g=!!window.controllers,h=window.document.all&&!window.opera,k=h&&window.navigator.userAgent.match(/MSIE 7.0/);
b.prototype=a.prototype;g&&f.wrapped&&(b.wrapped=f.wrapped);b.UNSENT=0;b.OPENED=1;b.HEADERS_RECEIVED=2;b.LOADING=3;b.DONE=4;b.prototype.readyState=b.UNSENT;b.prototype.responseText="";b.prototype.responseXML=null;b.prototype.status=0;b.prototype.statusText="";b.prototype.priority="NORMAL";b.prototype.onreadystatechange=null;b.onreadystatechange=null;b.onopen=null;b.onsend=null;b.onabort=null;b.prototype.open=function(a,f,k,p,q){delete this._headers;3>arguments.length&&(k=!0);this._async=k;var r=this,
s=this.readyState,t;h&&k&&(t=function(){s!=b.DONE&&(e(r),r.abort())},window.attachEvent("onunload",t));b.onopen&&b.onopen.apply(this,arguments);4<arguments.length?this._object.open(a,f,k,p,q):3<arguments.length?this._object.open(a,f,k,p):this._object.open(a,f,k);this.readyState=b.OPENED;c(this);this._object.onreadystatechange=function(){if(!g||k)r.readyState=r._object.readyState,d(r),r._aborted?r.readyState=b.UNSENT:(r.readyState==b.DONE&&(delete r._data,e(r),h&&k&&window.detachEvent("onunload",t)),
s!=r.readyState&&c(r),s=r.readyState)}};b.prototype.send=function(a){b.onsend&&b.onsend.apply(this,arguments);arguments.length||(a=null);a&&a.nodeType&&(a=window.XMLSerializer?(new window.XMLSerializer).serializeToString(a):a.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml"));this._data=a;a:if(this._object.send(this._data),g&&!this._async)for(this.readyState=b.OPENED,d(this);this.readyState<b.DONE;)if(this.readyState++,c(this),this._aborted)break a};
b.prototype.abort=function(){b.onabort&&b.onabort.apply(this,arguments);this.readyState>b.UNSENT&&(this._aborted=!0);this._object.abort();e(this);this.readyState=b.UNSENT;delete this._data};b.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()};b.prototype.getResponseHeader=function(a){return this._object.getResponseHeader(a)};b.prototype.setRequestHeader=function(a,b){this._headers||(this._headers={});this._headers[a]=b;return this._object.setRequestHeader(a,b)};
b.prototype.addEventListener=function(a,b,c){for(var d=0,e;e=this._listeners[d];d++)if(e[0]==a&&e[1]==b&&e[2]==c)return;this._listeners.push([a,b,c])};b.prototype.removeEventListener=function(a,b,c){for(var d=0,e;(e=this._listeners[d])&&(e[0]!=a||e[1]!=b||e[2]!=c);d++);e&&this._listeners.splice(d,1)};b.prototype.dispatchEvent=function(a){a={type:a.type,target:this,currentTarget:this,eventPhase:2,bubbles:a.bubbles,cancelable:a.cancelable,timeStamp:a.timeStamp,stopPropagation:function(){},preventDefault:function(){},
initEvent:function(){}};"readystatechange"==a.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[a]);for(var b=0,c;c=this._listeners[b];b++)c[0]!=a.type||c[2]||(c[1].handleEvent||c[1]).apply(this,[a])};b.prototype.toString=function(){return"[object XMLHttpRequest]"};b.toString=function(){return"[XMLHttpRequest]"};window.Function.prototype.apply||(window.Function.prototype.apply=function(a,b){b||(b=[]);a.__func=this;a.__func(b[0],b[1],b[2],b[3],
b[4]);delete a.__func});OpenLayers.Request||(OpenLayers.Request={});OpenLayers.Request.XMLHttpRequest=b})();
OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.projCode=a;window.Proj4js&&(this.proj=new Proj4js.Proj(a))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(a){var b=!1;a&&(a instanceof OpenLayers.Projection||(a=new OpenLayers.Projection(a)),window.Proj4js&&
this.proj.defData&&a.proj.defData?b=this.proj.defData.replace(this.titleRegEx,"")==a.proj.defData.replace(this.titleRegEx,""):a.getCode&&(b=this.getCode(),a=a.getCode(),b=b==a||!!OpenLayers.Projection.transforms[b]&&OpenLayers.Projection.transforms[b][a]===OpenLayers.Projection.nullTransform));return b},destroy:function(){delete this.proj;delete this.projCode},CLASS_NAME:"OpenLayers.Projection"});OpenLayers.Projection.transforms={};
OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7]}};
OpenLayers.Projection.addTransform=function(a,b,c){if(c===OpenLayers.Projection.nullTransform){var d=OpenLayers.Projection.defaults[a];d&&!OpenLayers.Projection.defaults[b]&&(OpenLayers.Projection.defaults[b]=d)}OpenLayers.Projection.transforms[a]||(OpenLayers.Projection.transforms[a]={});OpenLayers.Projection.transforms[a][b]=c};
OpenLayers.Projection.transform=function(a,b,c){if(b&&c)if(b instanceof OpenLayers.Projection||(b=new OpenLayers.Projection(b)),c instanceof OpenLayers.Projection||(c=new OpenLayers.Projection(c)),b.proj&&c.proj)a=Proj4js.transform(b.proj,c.proj,a);else{b=b.getCode();c=c.getCode();var d=OpenLayers.Projection.transforms;if(d[b]&&d[b][c])d[b][c](a)}return a};OpenLayers.Projection.nullTransform=function(a){return a};
(function(){function a(a){a.x=180*a.x/d;a.y=180/Math.PI*(2*Math.atan(Math.exp(a.y/d*Math.PI))-Math.PI/2);return a}function b(a){a.x=a.x*d/180;a.y=Math.log(Math.tan((90+a.y)*Math.PI/360))/Math.PI*d;return a}function c(c,d){var e=OpenLayers.Projection.addTransform,f=OpenLayers.Projection.nullTransform,g,p,q,r,s;g=0;for(p=d.length;g<p;++g)for(q=d[g],e(c,q,b),e(q,c,a),s=g+1;s<p;++s)r=d[s],e(q,r,f),e(r,q,f)}var d=2.003750834E7,e=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],f=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326",
"EPSG:4326"],g;for(g=e.length-1;0<=g;--g)c(e[g],f);for(g=f.length-1;0<=g;--g)c(f[g],e)})();
OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(a){this.regExes=
{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g};this.externalProjection=new OpenLayers.Projection("EPSG:4326");OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){this.features=[];this.styles={};this.fetched={};return this.parseData(a,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(a,b){"string"==typeof a&&
(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));for(var c=["Link","NetworkLink","Style","StyleMap","Placemark"],d=0,e=c.length;d<e;++d){var f=c[d],g=this.getElementsByTagNameNS(a,"*",f);if(0!=g.length)switch(f.toLowerCase()){case "link":case "networklink":this.parseLinks(g,b);break;case "style":this.extractStyles&&this.parseStyles(g,b);break;case "stylemap":this.extractStyles&&this.parseStyleMaps(g,b);break;case "placemark":this.parseFeatures(g,b)}}return this.features},parseLinks:function(a,
b){if(b.depth>=this.maxDepth)return!1;var c=OpenLayers.Util.extend({},b);c.depth++;for(var d=0,e=a.length;d<e;d++){var f=this.parseProperty(a[d],"*","href");f&&!this.fetched[f]&&(this.fetched[f]=!0,(f=this.fetchLink(f))&&this.parseData(f,c))}},fetchLink:function(a){if(a=OpenLayers.Request.GET({url:a,async:!1}))return a.responseText},parseStyles:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=this.parseStyle(a[c]);e&&(this.styles[(b.styleBaseUrl||"")+"#"+e.id]=e)}},parseKmlColor:function(a){var b=
null;a&&(a=a.match(this.regExes.kmlColor))&&(b={color:"#"+a[4]+a[3]+a[2],opacity:parseInt(a[1],16)/255});return b},parseStyle:function(a){for(var b={},c=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],d,e,f=0,g=c.length;f<g;++f)if(d=c[f],e=this.getElementsByTagNameNS(a,"*",d)[0])switch(d.toLowerCase()){case "linestyle":d=this.parseProperty(e,"*","color");if(d=this.parseKmlColor(d))b.strokeColor=d.color,b.strokeOpacity=d.opacity;(d=this.parseProperty(e,"*","width"))&&(b.strokeWidth=
d);break;case "polystyle":d=this.parseProperty(e,"*","color");if(d=this.parseKmlColor(d))b.fillOpacity=d.opacity,b.fillColor=d.color;"0"==this.parseProperty(e,"*","fill")&&(b.fillColor="none");"0"==this.parseProperty(e,"*","outline")&&(b.strokeWidth="0");break;case "iconstyle":var h=parseFloat(this.parseProperty(e,"*","scale")||1);d=32*h;var k=32*h,l=this.getElementsByTagNameNS(e,"*","Icon")[0];if(l){var m=this.parseProperty(l,"*","href");if(m){var n=this.parseProperty(l,"*","w"),p=this.parseProperty(l,
"*","h");!OpenLayers.String.startsWith(m,"http://maps.google.com/mapfiles/kml")||n||p||(p=n=64,h/=2);n=n||p;p=p||n;n&&(d=parseInt(n)*h);p&&(k=parseInt(p)*h);if(p=m.match(this.regExes.kmlIconPalette))n=p[1],p=p[2],m=this.parseProperty(l,"*","x"),l=this.parseProperty(l,"*","y"),m="http://maps.google.com/mapfiles/kml/pal"+n+"/icon"+(8*(l?7-l/32:7)+(m?m/32:0))+p;b.graphicOpacity=1;b.externalGraphic=m}}if(e=this.getElementsByTagNameNS(e,"*","hotSpot")[0])m=parseFloat(e.getAttribute("x")),l=parseFloat(e.getAttribute("y")),
n=e.getAttribute("xunits"),"pixels"==n?b.graphicXOffset=-m*h:"insetPixels"==n?b.graphicXOffset=-d+m*h:"fraction"==n&&(b.graphicXOffset=-d*m),e=e.getAttribute("yunits"),"pixels"==e?b.graphicYOffset=-k+l*h+1:"insetPixels"==e?b.graphicYOffset=-(l*h)+1:"fraction"==e&&(b.graphicYOffset=-k*(1-l)+1);b.graphicWidth=d;b.graphicHeight=k;break;case "balloonstyle":(e=OpenLayers.Util.getXmlNodeValue(e))&&(b.balloonStyle=e.replace(this.regExes.straightBracket,"${$1}"));break;case "labelstyle":if(d=this.parseProperty(e,
"*","color"),d=this.parseKmlColor(d))b.fontColor=d.color,b.fontOpacity=d.opacity}!b.strokeColor&&b.fillColor&&(b.strokeColor=b.fillColor);(a=a.getAttribute("id"))&&b&&(b.id=a);return b},parseStyleMaps:function(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=this.getElementsByTagNameNS(e,"*","Pair"),e=e.getAttribute("id"),g=0,h=f.length;g<h;g++){var k=f[g],l=this.parseProperty(k,"*","key");(k=this.parseProperty(k,"*","styleUrl"))&&"normal"==l&&(this.styles[(b.styleBaseUrl||"")+"#"+e]=this.styles[(b.styleBaseUrl||
"")+k])}},parseFeatures:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d],g=this.parseFeature.apply(this,[f]);if(g){this.extractStyles&&g.attributes&&g.attributes.styleUrl&&(g.style=this.getStyle(g.attributes.styleUrl,b));if(this.extractStyles){var h=this.getElementsByTagNameNS(f,"*","Style")[0];h&&(h=this.parseStyle(h))&&(g.style=OpenLayers.Util.extend(g.style,h))}this.extractTracks?(f=this.getElementsByTagNameNS(f,this.namespaces.gx,"Track"))&&0<f.length&&(g={features:[],feature:g},
this.readNode(f[0],g),0<g.features.length&&c.push.apply(c,g.features)):c.push(g)}else throw"Bad Placemark: "+d;}this.features=this.features.concat(c)},readers:{kml:{when:function(a,b){b.whens.push(OpenLayers.Date.parse(this.getChildValue(a)))},_trackPointAttribute:function(a,b){var c=a.nodeName.split(":").pop();b.attributes[c].push(this.getChildValue(a))}},gx:{Track:function(a,b){var c={whens:[],points:[],angles:[]};if(this.trackAttributes){var d;c.attributes={};for(var e=0,f=this.trackAttributes.length;e<
f;++e)d=this.trackAttributes[e],c.attributes[d]=[],d in this.readers.kml||(this.readers.kml[d]=this.readers.kml._trackPointAttribute)}this.readChildNodes(a,c);if(c.whens.length!==c.points.length)throw Error("gx:Track with unequal number of when ("+c.whens.length+") and gx:coord ("+c.points.length+") elements.");var g=0<c.angles.length;if(g&&c.whens.length!==c.angles.length)throw Error("gx:Track with unequal number of when ("+c.whens.length+") and gx:angles ("+c.angles.length+") elements.");for(var h,
k,e=0,f=c.whens.length;e<f;++e){h=b.feature.clone();h.fid=b.feature.fid||b.feature.id;k=c.points[e];h.geometry=k;"z"in k&&(h.attributes.altitude=k.z);this.internalProjection&&this.externalProjection&&h.geometry.transform(this.externalProjection,this.internalProjection);if(this.trackAttributes){k=0;for(var l=this.trackAttributes.length;k<l;++k)h.attributes[d]=c.attributes[this.trackAttributes[k]][e]}h.attributes.when=c.whens[e];h.attributes.trackId=b.feature.id;g&&(k=c.angles[e],h.attributes.heading=
parseFloat(k[0]),h.attributes.tilt=parseFloat(k[1]),h.attributes.roll=parseFloat(k[2]));b.features.push(h)}},coord:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(/\s+/),d=new OpenLayers.Geometry.Point(c[0],c[1]);2<c.length&&(d.z=parseFloat(c[2]));b.points.push(d)},angles:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(/\s+/);b.angles.push(c)}}},parseFeature:function(a){for(var b=["MultiGeometry","Polygon","LineString","Point"],
c,d,e,f=0,g=b.length;f<g;++f)if(c=b[f],this.internalns=a.namespaceURI?a.namespaceURI:this.kmlns,d=this.getElementsByTagNameNS(a,this.internalns,c),0<d.length){if(b=this.parseGeometry[c.toLowerCase()])e=b.apply(this,[d[0]]),this.internalProjection&&this.externalProjection&&e.transform(this.externalProjection,this.internalProjection);else throw new TypeError("Unsupported geometry type: "+c);break}var h;this.extractAttributes&&(h=this.parseAttributes(a));c=new OpenLayers.Feature.Vector(e,h);a=a.getAttribute("id")||
a.getAttribute("name");null!=a&&(c.fid=a);return c},getStyle:function(a,b){var c=OpenLayers.Util.removeTail(a),d=OpenLayers.Util.extend({},b);d.depth++;d.styleBaseUrl=c;!this.styles[a]&&!OpenLayers.String.startsWith(a,"#")&&d.depth<=this.maxDepth&&!this.fetched[c]&&(c=this.fetchLink(c))&&this.parseData(c,d);return OpenLayers.Util.extend({},this.styles[a])},parseGeometry:{point:function(a){var b=this.getElementsByTagNameNS(a,this.internalns,"coordinates");a=[];if(0<b.length){var c=b[0].firstChild.nodeValue,
c=c.replace(this.regExes.removeSpace,"");a=c.split(",")}b=null;if(1<a.length)2==a.length&&(a[2]=null),b=new OpenLayers.Geometry.Point(a[0],a[1],a[2]);else throw"Bad coordinate string: "+c;return b},linestring:function(a,b){var c=this.getElementsByTagNameNS(a,this.internalns,"coordinates"),d=null;if(0<c.length){for(var c=this.getChildValue(c[0]),c=c.replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),d=c.split(this.regExes.splitSpace),e=d.length,f=Array(e),g,h,k=0;k<e;++k)if(g=
d[k].split(","),h=g.length,1<h)2==g.length&&(g[2]=null),f[k]=new OpenLayers.Geometry.Point(g[0],g[1],g[2]);else throw"Bad LineString point coordinates: "+d[k];if(e)d=b?new OpenLayers.Geometry.LinearRing(f):new OpenLayers.Geometry.LineString(f);else throw"Bad LineString coordinates: "+c;}return d},polygon:function(a){a=this.getElementsByTagNameNS(a,this.internalns,"LinearRing");var b=a.length,c=Array(b);if(0<b)for(var d=0,e=a.length;d<e;++d)if(b=this.parseGeometry.linestring.apply(this,[a[d],!0]))c[d]=
b;else throw"Bad LinearRing geometry: "+d;return new OpenLayers.Geometry.Polygon(c)},multigeometry:function(a){for(var b,c=[],d=a.childNodes,e=0,f=d.length;e<f;++e)a=d[e],1==a.nodeType&&(b=a.prefix?a.nodeName.split(":")[1]:a.nodeName,(b=this.parseGeometry[b.toLowerCase()])&&c.push(b.apply(this,[a])));return new OpenLayers.Geometry.Collection(c)}},parseAttributes:function(a){var b={},c=a.getElementsByTagName("ExtendedData");c.length&&(b=this.parseExtendedData(c[0]));var d,e,f;a=a.childNodes;for(var c=
0,g=a.length;c<g;++c)if(d=a[c],1==d.nodeType&&(e=d.childNodes,1<=e.length&&3>=e.length)){switch(e.length){case 1:f=e[0];break;case 2:f=e[0];e=e[1];f=3==f.nodeType||4==f.nodeType?f:e;break;default:f=e[1]}if(3==f.nodeType||4==f.nodeType)if(d=d.prefix?d.nodeName.split(":")[1]:d.nodeName,f=OpenLayers.Util.getXmlNodeValue(f))f=f.replace(this.regExes.trimSpace,""),b[d]=f}return b},parseExtendedData:function(a){var b={},c,d,e,f,g=a.getElementsByTagName("Data");c=0;for(d=g.length;c<d;c++){e=g[c];f=e.getAttribute("name");
var h={},k=e.getElementsByTagName("value");k.length&&(h.value=this.getChildValue(k[0]));this.kvpAttributes?b[f]=h.value:(e=e.getElementsByTagName("displayName"),e.length&&(h.displayName=this.getChildValue(e[0])),b[f]=h)}a=a.getElementsByTagName("SimpleData");c=0;for(d=a.length;c<d;c++)h={},e=a[c],f=e.getAttribute("name"),h.value=this.getChildValue(e),this.kvpAttributes?b[f]=h.value:(h.displayName=f,b[f]=h);return b},parseProperty:function(a,b,c){var d;a=this.getElementsByTagNameNS(a,b,c);try{d=OpenLayers.Util.getXmlNodeValue(a[0])}catch(e){d=
null}return d},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=this.createElementNS(this.kmlns,"kml"),c=this.createFolderXML(),d=0,e=a.length;d<e;++d)c.appendChild(this.createPlacemarkXML(a[d]));b.appendChild(c);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFolderXML:function(){var a=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var b=this.createElementNS(this.kmlns,"name"),c=this.createTextNode(this.foldersName);b.appendChild(c);a.appendChild(b)}this.foldersDesc&&
(b=this.createElementNS(this.kmlns,"description"),c=this.createTextNode(this.foldersDesc),b.appendChild(c),a.appendChild(b));return a},createPlacemarkXML:function(a){var b=this.createElementNS(this.kmlns,"name");b.appendChild(this.createTextNode(a.style&&a.style.label?a.style.label:a.attributes.name||a.id));var c=this.createElementNS(this.kmlns,"description");c.appendChild(this.createTextNode(a.attributes.description||this.placemarksDesc));var d=this.createElementNS(this.kmlns,"Placemark");null!=
a.fid&&d.setAttribute("id",a.fid);d.appendChild(b);d.appendChild(c);b=this.buildGeometryNode(a.geometry);d.appendChild(b);a.attributes&&(a=this.buildExtendedData(a.attributes))&&d.appendChild(a);return d},buildGeometryNode:function(a){var b=a.CLASS_NAME,b=b.substring(b.lastIndexOf(".")+1),b=this.buildGeometry[b.toLowerCase()],c=null;b&&(c=b.apply(this,[a]));return c},buildGeometry:{point:function(a){var b=this.createElementNS(this.kmlns,"Point");b.appendChild(this.buildCoordinatesNode(a));return b},
multipoint:function(a){return this.buildGeometry.collection.apply(this,[a])},linestring:function(a){var b=this.createElementNS(this.kmlns,"LineString");b.appendChild(this.buildCoordinatesNode(a));return b},multilinestring:function(a){return this.buildGeometry.collection.apply(this,[a])},linearring:function(a){var b=this.createElementNS(this.kmlns,"LinearRing");b.appendChild(this.buildCoordinatesNode(a));return b},polygon:function(a){var b=this.createElementNS(this.kmlns,"Polygon");a=a.components;
for(var c,d,e=0,f=a.length;e<f;++e)c=0==e?"outerBoundaryIs":"innerBoundaryIs",c=this.createElementNS(this.kmlns,c),d=this.buildGeometry.linearring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},multipolygon:function(a){return this.buildGeometry.collection.apply(this,[a])},collection:function(a){for(var b=this.createElementNS(this.kmlns,"MultiGeometry"),c,d=0,e=a.components.length;d<e;++d)(c=this.buildGeometryNode.apply(this,[a.components[d]]))&&b.appendChild(c);return b}},buildCoordinatesNode:function(a){var b=
this.createElementNS(this.kmlns,"coordinates"),c;if(c=a.components){for(var d=c.length,e=Array(d),f=0;f<d;++f)a=c[f],e[f]=this.buildCoordinates(a);c=e.join(" ")}else c=this.buildCoordinates(a);c=this.createTextNode(c);b.appendChild(c);return b},buildCoordinates:function(a){this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));return a.x+","+a.y},buildExtendedData:function(a){var b=this.createElementNS(this.kmlns,"ExtendedData"),
c;for(c in a)if(a[c]&&"name"!=c&&"description"!=c&&"styleUrl"!=c){var d=this.createElementNS(this.kmlns,"Data");d.setAttribute("name",c);var e=this.createElementNS(this.kmlns,"value");if("object"==typeof a[c]){if(a[c].value&&e.appendChild(this.createTextNode(a[c].value)),a[c].displayName){var f=this.createElementNS(this.kmlns,"displayName");f.appendChild(this.getXMLDoc().createCDATASection(a[c].displayName));d.appendChild(f)}}else e.appendChild(this.createTextNode(a[c]));d.appendChild(e);b.appendChild(d)}return this.isSimpleContent(b)?
null:b},CLASS_NAME:"OpenLayers.Format.KML"});
OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(a,b){for(var c=null,d=b&&b.mutual,e,f,g,h,k=[],l=[a],m=0,n=this.components.length;m<n;++m){f=this.components[m];g=!1;for(var p=0;p<l.length;++p)if(e=f.split(l[p],b)){if(d){g=e[0];for(var q=0,r=g.length;q<r;++q)0===q&&k.length?k[k.length-1].addComponent(g[q]):k.push(new OpenLayers.Geometry.MultiLineString([g[q]]));g=!0;e=e[1]}if(e.length){e.unshift(p,
1);Array.prototype.splice.apply(l,e);break}}g||(k.length?k[k.length-1].addComponent(f.clone()):k=[new OpenLayers.Geometry.MultiLineString(f.clone())])}k&&1<k.length?g=!0:k=[];l&&1<l.length?h=!0:l=[];if(g||h)c=d?[k,l]:l;return c},splitWith:function(a,b){var c=null,d=b&&b.mutual,e,f,g,h,k,l;if(a instanceof OpenLayers.Geometry.LineString){l=[];k=[a];for(var m=0,n=this.components.length;m<n;++m){g=!1;f=this.components[m];for(var p=0;p<k.length;++p)if(e=k[p].split(f,b)){d&&(g=e[0],g.length&&(g.unshift(p,
1),Array.prototype.splice.apply(k,g),p+=g.length-2),e=e[1],0===e.length&&(e=[f.clone()]));g=0;for(var q=e.length;g<q;++g)0===g&&l.length?l[l.length-1].addComponent(e[g]):l.push(new OpenLayers.Geometry.MultiLineString([e[g]]));g=!0}g||(l.length?l[l.length-1].addComponent(f.clone()):l=[new OpenLayers.Geometry.MultiLineString([f.clone()])])}}else c=a.split(this);k&&1<k.length?h=!0:k=[];l&&1<l.length?g=!0:l=[];if(h||g)c=d?[k,l]:l;return c},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"});
OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"});
OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(a){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g};OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==
typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a=this.getElementsByTagNameNS(a.documentElement,this.gmlns,this.featureName);for(var b=[],c=0;c<a.length;c++){var d=this.parseFeature(a[c]);d&&b.push(d)}return b},parseFeature:function(a){for(var b="MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "),c,d,e,f=0;f<b.length;++f)if(c=b[f],d=this.getElementsByTagNameNS(a,this.gmlns,c),0<d.length){if(e=this.parseGeometry[c.toLowerCase()])e=e.apply(this,
[d[0]]),this.internalProjection&&this.externalProjection&&e.transform(this.externalProjection,this.internalProjection);else throw new TypeError("Unsupported geometry type: "+c);break}var g;c=this.getElementsByTagNameNS(a,this.gmlns,"Box");for(f=0;f<c.length;++f)b=c[f],d=this.parseGeometry.box.apply(this,[b]),b=b.parentNode,"boundedBy"===(b.localName||b.nodeName.split(":").pop())?g=d:e=d.toGeometry();var h;this.extractAttributes&&(h=this.parseAttributes(a));h=new OpenLayers.Feature.Vector(e,h);h.bounds=
g;h.gml={featureType:a.firstChild.nodeName.split(":")[1],featureNS:a.firstChild.namespaceURI,featureNSPrefix:a.firstChild.prefix};a=a.firstChild;for(var k;a&&(1!=a.nodeType||!(k=a.getAttribute("fid")||a.getAttribute("id")));)a=a.nextSibling;h.fid=k;return h},parseGeometry:{point:function(a){var b,c;c=[];b=this.getElementsByTagNameNS(a,this.gmlns,"pos");0<b.length&&(c=b[0].firstChild.nodeValue,c=c.replace(this.regExes.trimSpace,""),c=c.split(this.regExes.splitSpace));0==c.length&&(b=this.getElementsByTagNameNS(a,
this.gmlns,"coordinates"),0<b.length&&(c=b[0].firstChild.nodeValue,c=c.replace(this.regExes.removeSpace,""),c=c.split(",")));0==c.length&&(b=this.getElementsByTagNameNS(a,this.gmlns,"coord"),0<b.length&&(a=this.getElementsByTagNameNS(b[0],this.gmlns,"X"),b=this.getElementsByTagNameNS(b[0],this.gmlns,"Y"),0<a.length&&0<b.length&&(c=[a[0].firstChild.nodeValue,b[0].firstChild.nodeValue])));2==c.length&&(c[2]=null);return this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],
c[0],c[2])},multipoint:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"Point");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.point.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiPoint(b)},linestring:function(a,b){var c,d;d=[];var e=[];c=this.getElementsByTagNameNS(a,this.gmlns,"posList");if(0<c.length){d=this.getChildValue(c[0]);d=d.replace(this.regExes.trimSpace,"");d=d.split(this.regExes.splitSpace);var f=parseInt(c[0].getAttribute("dimension")),
g,h,k;for(c=0;c<d.length/f;++c)g=c*f,h=d[g],k=d[g+1],g=2==f?null:d[g+2],this.xy?e.push(new OpenLayers.Geometry.Point(h,k,g)):e.push(new OpenLayers.Geometry.Point(k,h,g))}if(0==d.length&&(c=this.getElementsByTagNameNS(a,this.gmlns,"coordinates"),0<c.length))for(d=this.getChildValue(c[0]),d=d.replace(this.regExes.trimSpace,""),d=d.replace(this.regExes.trimComma,","),f=d.split(this.regExes.splitSpace),c=0;c<f.length;++c)d=f[c].split(","),2==d.length&&(d[2]=null),this.xy?e.push(new OpenLayers.Geometry.Point(d[0],
d[1],d[2])):e.push(new OpenLayers.Geometry.Point(d[1],d[0],d[2]));d=null;0!=e.length&&(d=b?new OpenLayers.Geometry.LinearRing(e):new OpenLayers.Geometry.LineString(e));return d},multilinestring:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"LineString");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.linestring.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiLineString(b)},polygon:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"LinearRing");
var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.linestring.apply(this,[a[d],!0]))&&b.push(c);return new OpenLayers.Geometry.Polygon(b)},multipolygon:function(a){a=this.getElementsByTagNameNS(a,this.gmlns,"Polygon");var b=[];if(0<a.length)for(var c,d=0;d<a.length;++d)(c=this.parseGeometry.polygon.apply(this,[a[d]]))&&b.push(c);return new OpenLayers.Geometry.MultiPolygon(b)},envelope:function(a){var b=[],c,d,e=this.getElementsByTagNameNS(a,this.gmlns,"lowerCorner");if(0<e.length){c=
[];0<e.length&&(c=e[0].firstChild.nodeValue,c=c.replace(this.regExes.trimSpace,""),c=c.split(this.regExes.splitSpace));2==c.length&&(c[2]=null);var f=this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2])}a=this.getElementsByTagNameNS(a,this.gmlns,"upperCorner");if(0<a.length){c=[];0<a.length&&(c=a[0].firstChild.nodeValue,c=c.replace(this.regExes.trimSpace,""),c=c.split(this.regExes.splitSpace));2==c.length&&(c[2]=null);var g=this.xy?new OpenLayers.Geometry.Point(c[0],
c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2])}f&&g&&(b.push(new OpenLayers.Geometry.Point(f.x,f.y)),b.push(new OpenLayers.Geometry.Point(g.x,f.y)),b.push(new OpenLayers.Geometry.Point(g.x,g.y)),b.push(new OpenLayers.Geometry.Point(f.x,g.y)),b.push(new OpenLayers.Geometry.Point(f.x,f.y)),b=new OpenLayers.Geometry.LinearRing(b),d=new OpenLayers.Geometry.Polygon([b]));return d},box:function(a){var b=this.getElementsByTagNameNS(a,this.gmlns,"coordinates"),c=a=null;0<b.length&&(b=b[0].firstChild.nodeValue,
b=b.split(" "),2==b.length&&(a=b[0].split(","),c=b[1].split(",")));if(null!==a&&null!==c)return new OpenLayers.Bounds(parseFloat(a[0]),parseFloat(a[1]),parseFloat(c[0]),parseFloat(c[1]))}},parseAttributes:function(a){var b={};a=a.firstChild;for(var c,d,e;a;){if(1==a.nodeType){a=a.childNodes;for(c=0;c<a.length;++c)if(d=a[c],1==d.nodeType)if(e=d.childNodes,1==e.length){if(e=e[0],3==e.nodeType||4==e.nodeType)d=d.prefix?d.nodeName.split(":")[1]:d.nodeName,e=e.nodeValue.replace(this.regExes.trimSpace,
""),b[d]=e}else b[d.nodeName.split(":").pop()]=null;break}a=a.nextSibling}return b},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),c=0;c<a.length;c++)b.appendChild(this.createFeatureXML(a[c]));return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName);c.appendChild(b);
var b=this.createElementNS(this.gmlns,"gml:"+this.featureName),d=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName);d.setAttribute("fid",a.fid||a.id);d.appendChild(c);for(var e in a.attributes){var c=this.createTextNode(a.attributes[e]),f=e.substring(e.lastIndexOf(":")+1),f=this.createElementNS(this.featureNS,this.featurePrefix+":"+f);f.appendChild(c);d.appendChild(f)}b.appendChild(d);return b},buildGeometryNode:function(a){this.externalProjection&&this.internalProjection&&
(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b=a.CLASS_NAME,b=b.substring(b.lastIndexOf(".")+1);return this.buildGeometry[b.toLowerCase()].apply(this,[a])},buildGeometry:{point:function(a){var b=this.createElementNS(this.gmlns,"gml:Point");b.appendChild(this.buildCoordinatesNode(a));return b},multipoint:function(a){var b=this.createElementNS(this.gmlns,"gml:MultiPoint");a=a.components;for(var c,d,e=0;e<a.length;e++)c=this.createElementNS(this.gmlns,"gml:pointMember"),
d=this.buildGeometry.point.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},linestring:function(a){var b=this.createElementNS(this.gmlns,"gml:LineString");b.appendChild(this.buildCoordinatesNode(a));return b},multilinestring:function(a){var b=this.createElementNS(this.gmlns,"gml:MultiLineString");a=a.components;for(var c,d,e=0;e<a.length;++e)c=this.createElementNS(this.gmlns,"gml:lineStringMember"),d=this.buildGeometry.linestring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);
return b},linearring:function(a){var b=this.createElementNS(this.gmlns,"gml:LinearRing");b.appendChild(this.buildCoordinatesNode(a));return b},polygon:function(a){var b=this.createElementNS(this.gmlns,"gml:Polygon");a=a.components;for(var c,d,e=0;e<a.length;++e)c=0==e?"outerBoundaryIs":"innerBoundaryIs",c=this.createElementNS(this.gmlns,"gml:"+c),d=this.buildGeometry.linearring.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},multipolygon:function(a){var b=this.createElementNS(this.gmlns,
"gml:MultiPolygon");a=a.components;for(var c,d,e=0;e<a.length;++e)c=this.createElementNS(this.gmlns,"gml:polygonMember"),d=this.buildGeometry.polygon.apply(this,[a[e]]),c.appendChild(d),b.appendChild(c);return b},bounds:function(a){var b=this.createElementNS(this.gmlns,"gml:Box");b.appendChild(this.buildCoordinatesNode(a));return b}},buildCoordinatesNode:function(a){var b=this.createElementNS(this.gmlns,"gml:coordinates");b.setAttribute("decimal",".");b.setAttribute("cs",",");b.setAttribute("ts",
" ");var c=[];if(a instanceof OpenLayers.Bounds)c.push(a.left+","+a.bottom),c.push(a.right+","+a.top);else{a=a.components?a.components:[a];for(var d=0;d<a.length;d++)c.push(a[d].x+","+a[d].y)}c=this.createTextNode(c.join(" "));b.appendChild(c);return b},CLASS_NAME:"OpenLayers.Format.GML"});OpenLayers.Format.GML||(OpenLayers.Format.GML={});
OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},
initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.setGeometryTypes();a&&a.featureNS&&this.setNamespace("feature",a.featureNS);this.singleFeatureType=!a||"string"===typeof a.featureType},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b=[];this.readNode(a,{features:b},!0);if(0==b.length){var c=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMember");if(c.length){a=
0;for(var d=c.length;a<d;++a)this.readNode(c[a],{features:b},!0)}else c=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMembers"),c.length&&this.readNode(c[0],{features:b},!0)}return b},readNode:function(a,b,c){!0===c&&!0===this.autoConfig&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null);this.featureNS||a.prefix in this.namespaces||a.parentNode.namespaceURI!=this.namespaces.gml||!this.regExes.featureMember.test(a.parentNode.nodeName)||
(this.featureType=a.nodeName.split(":").pop(),this.setNamespace("feature",a.namespaceURI),this.featureNS=a.namespaceURI,this.autoConfig=!0);return OpenLayers.Format.XML.prototype.readNode.apply(this,[a,b])},readers:{gml:{featureMember:function(a,b){this.readChildNodes(a,b)},featureMembers:function(a,b){this.readChildNodes(a,b)},name:function(a,b){b.name=this.getChildValue(a)},boundedBy:function(a,b){var c={};this.readChildNodes(a,c);c.components&&0<c.components.length&&(b.bounds=c.components[0])},
Point:function(a,b){var c={points:[]};this.readChildNodes(a,c);b.components||(b.components=[]);b.components.push(c.points[0])},coordinates:function(a,b){for(var c=this.getChildValue(a).replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),c=c.split(this.regExes.splitSpace),d,e=c.length,f=Array(e),g=0;g<e;++g)d=c[g].split(","),f[g]=this.xy?new OpenLayers.Geometry.Point(d[0],d[1],d[2]):new OpenLayers.Geometry.Point(d[1],d[0],d[2]);b.points=f},coord:function(a,b){var c={};this.readChildNodes(a,
c);b.points||(b.points=[]);b.points.push(new OpenLayers.Geometry.Point(c.x,c.y,c.z))},X:function(a,b){b.x=this.getChildValue(a)},Y:function(a,b){b.y=this.getChildValue(a)},Z:function(a,b){b.z=this.getChildValue(a)},MultiPoint:function(a,b){var c={components:[]};this.readChildNodes(a,c);b.components=[new OpenLayers.Geometry.MultiPoint(c.components)]},pointMember:function(a,b){this.readChildNodes(a,b)},LineString:function(a,b){var c={};this.readChildNodes(a,c);b.components||(b.components=[]);b.components.push(new OpenLayers.Geometry.LineString(c.points))},
MultiLineString:function(a,b){var c={components:[]};this.readChildNodes(a,c);b.components=[new OpenLayers.Geometry.MultiLineString(c.components)]},lineStringMember:function(a,b){this.readChildNodes(a,b)},Polygon:function(a,b){var c={outer:null,inner:[]};this.readChildNodes(a,c);c.inner.unshift(c.outer);b.components||(b.components=[]);b.components.push(new OpenLayers.Geometry.Polygon(c.inner))},LinearRing:function(a,b){var c={};this.readChildNodes(a,c);b.components=[new OpenLayers.Geometry.LinearRing(c.points)]},
MultiPolygon:function(a,b){var c={components:[]};this.readChildNodes(a,c);b.components=[new OpenLayers.Geometry.MultiPolygon(c.components)]},polygonMember:function(a,b){this.readChildNodes(a,b)},GeometryCollection:function(a,b){var c={components:[]};this.readChildNodes(a,c);b.components=[new OpenLayers.Geometry.Collection(c.components)]},geometryMember:function(a,b){this.readChildNodes(a,b)}},feature:{"*":function(a,b){var c,d=a.localName||a.nodeName.split(":").pop();b.features?this.singleFeatureType||
-1===OpenLayers.Util.indexOf(this.featureType,d)?d===this.featureType&&(c="_typeName"):c="_typeName":0==a.childNodes.length||1==a.childNodes.length&&3==a.firstChild.nodeType?this.extractAttributes&&(c="_attribute"):c="_geometry";c&&this.readers.feature[c].apply(this,[a,b])},_typeName:function(a,b){var c={components:[],attributes:{}};this.readChildNodes(a,c);c.name&&(c.attributes.name=c.name);var d=new OpenLayers.Feature.Vector(c.components[0],c.attributes);this.singleFeatureType||(d.type=a.nodeName.split(":").pop(),
d.namespace=a.namespaceURI);var e=a.getAttribute("fid")||this.getAttributeNS(a,this.namespaces.gml,"id");e&&(d.fid=e);this.internalProjection&&this.externalProjection&&d.geometry&&d.geometry.transform(this.externalProjection,this.internalProjection);c.bounds&&(d.bounds=c.bounds);b.features.push(d)},_geometry:function(a,b){this.geometryName||(this.geometryName=a.nodeName.split(":").pop());this.readChildNodes(a,b)},_attribute:function(a,b){var c=a.localName||a.nodeName.split(":").pop(),d=this.getChildValue(a);
b.attributes[c]=d}},wfs:{FeatureCollection:function(a,b){this.readChildNodes(a,b)}}},write:function(a){var b;b=OpenLayers.Util.isArray(a)?"featureMembers":"featureMember";a=this.writeNode("gml:"+b,a);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:{featureMember:function(a){var b=this.createElementNSPlus("gml:featureMember");this.writeNode("feature:_typeName",a,b);return b},MultiPoint:function(a){var b=
this.createElementNSPlus("gml:MultiPoint");a=a.components||[a];for(var c=0,d=a.length;c<d;++c)this.writeNode("pointMember",a[c],b);return b},pointMember:function(a){var b=this.createElementNSPlus("gml:pointMember");this.writeNode("Point",a,b);return b},MultiLineString:function(a){var b=this.createElementNSPlus("gml:MultiLineString");a=a.components||[a];for(var c=0,d=a.length;c<d;++c)this.writeNode("lineStringMember",a[c],b);return b},lineStringMember:function(a){var b=this.createElementNSPlus("gml:lineStringMember");
this.writeNode("LineString",a,b);return b},MultiPolygon:function(a){var b=this.createElementNSPlus("gml:MultiPolygon");a=a.components||[a];for(var c=0,d=a.length;c<d;++c)this.writeNode("polygonMember",a[c],b);return b},polygonMember:function(a){var b=this.createElementNSPlus("gml:polygonMember");this.writeNode("Polygon",a,b);return b},GeometryCollection:function(a){for(var b=this.createElementNSPlus("gml:GeometryCollection"),c=0,d=a.components.length;c<d;++c)this.writeNode("geometryMember",a.components[c],
b);return b},geometryMember:function(a){var b=this.createElementNSPlus("gml:geometryMember");a=this.writeNode("feature:_geometry",a);b.appendChild(a.firstChild);return b}},feature:{_typeName:function(a){var b=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:a.fid}});a.geometry&&this.writeNode("feature:_geometry",a.geometry,b);for(var c in a.attributes){var d=a.attributes[c];null!=d&&this.writeNode("feature:_attribute",{name:c,value:d},b)}return b},_geometry:function(a){this.externalProjection&&
this.internalProjection&&(a=a.clone().transform(this.internalProjection,this.externalProjection));var b=this.createElementNSPlus("feature:"+this.geometryName);a=this.writeNode("gml:"+this.geometryTypes[a.CLASS_NAME],a,b);this.srsName&&a.setAttribute("srsName",this.srsName);return b},_attribute:function(a){return this.createElementNSPlus("feature:"+a.name,{value:a.value})}},wfs:{FeatureCollection:function(a){for(var b=this.createElementNSPlus("wfs:FeatureCollection"),c=0,d=a.length;c<d;++c)this.writeNode("gml:featureMember",
a[c],b);return b}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"});
OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(a){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[a])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(a,b){var c={};this.readChildNodes(a,c);b.outer=c.components[0]},innerBoundaryIs:function(a,b){var c={};this.readChildNodes(a,c);b.inner.push(c.components[0])},Box:function(a,b){var c=
{};this.readChildNodes(a,c);b.components||(b.components=[]);var d=c.points[0],c=c.points[1];b.components.push(new OpenLayers.Bounds(d.x,d.y,c.x,c.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(a){var b;b=OpenLayers.Util.isArray(a)?"wfs:FeatureCollection":"gml:featureMember";a=this.writeNode(b,a);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);
return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(a){var b=this.createElementNSPlus("gml:Point");this.writeNode("coordinates",[a],b);return b},coordinates:function(a){for(var b=a.length,c=Array(b),d,e=0;e<b;++e)d=a[e],c[e]=this.xy?d.x+","+d.y:d.y+","+d.x,void 0!=d.z&&(c[e]+=","+d.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==b?c[0]:c.join(" ")})},LineString:function(a){var b=
this.createElementNSPlus("gml:LineString");this.writeNode("coordinates",a.components,b);return b},Polygon:function(a){var b=this.createElementNSPlus("gml:Polygon");this.writeNode("outerBoundaryIs",a.components[0],b);for(var c=1;c<a.components.length;++c)this.writeNode("innerBoundaryIs",a.components[c],b);return b},outerBoundaryIs:function(a){var b=this.createElementNSPlus("gml:outerBoundaryIs");this.writeNode("LinearRing",a,b);return b},innerBoundaryIs:function(a){var b=this.createElementNSPlus("gml:innerBoundaryIs");
this.writeNode("LinearRing",a,b);return b},LinearRing:function(a){var b=this.createElementNSPlus("gml:LinearRing");this.writeNode("coordinates",a.components,b);return b},Box:function(a){var b=this.createElementNSPlus("gml:Box");this.writeNode("coordinates",[{x:a.left,y:a.bottom},{x:a.right,y:a.top}],b);this.srsName&&b.setAttribute("srsName",this.srsName);return b}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},
CLASS_NAME:"OpenLayers.Format.GML.v2"});
OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.rules=[];b&&b.rules&&this.addRules(b.rules);this.setDefaultStyle(a||OpenLayers.Feature.Vector.style["default"]);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;a<b;a++)this.rules[a].destroy(),
this.rules[a]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(a){for(var b=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),a),c=this.rules,d,e=[],f=!1,g=0,h=c.length;g<h;g++)d=c[g],d.evaluate(a)&&(d instanceof OpenLayers.Rule&&d.elseFilter?e.push(d):(f=!0,this.applySymbolizer(d,b,a)));if(!1==f&&0<e.length)for(f=!0,g=0,h=e.length;g<h;g++)this.applySymbolizer(e[g],b,a);0<c.length&&!1==f&&(b.display="none");null!=b.label&&"string"!==typeof b.label&&
(b.label=String(b.label));return b},applySymbolizer:function(a,b,c){var d=c.geometry?this.getSymbolizerPrefix(c.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];a=a.symbolizer[d]||a.symbolizer;!0===this.defaultsPerSymbolizer&&(d=this.defaultStyle,OpenLayers.Util.applyDefaults(a,{pointRadius:d.pointRadius}),!0!==a.stroke&&!0!==a.graphic||OpenLayers.Util.applyDefaults(a,{strokeWidth:d.strokeWidth,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeDashstyle:d.strokeDashstyle,strokeLinecap:d.strokeLinecap}),
!0!==a.fill&&!0!==a.graphic||OpenLayers.Util.applyDefaults(a,{fillColor:d.fillColor,fillOpacity:d.fillOpacity}),!0===a.graphic&&OpenLayers.Util.applyDefaults(a,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset}));
return this.createLiterals(OpenLayers.Util.extend(b,a),c)},createLiterals:function(a,b){var c=OpenLayers.Util.extend({},b.attributes||b.data);OpenLayers.Util.extend(c,this.context);for(var d in this.propertyStyles)a[d]=OpenLayers.Style.createLiteral(a[d],c,b,d);return a},findPropertyStyles:function(){var a={};this.addPropertyStyles(a,this.defaultStyle);for(var b=this.rules,c,d,e=0,f=b.length;e<f;e++){c=b[e].symbolizer;for(var g in c)if(d=c[g],"object"==typeof d)this.addPropertyStyles(a,d);else{this.addPropertyStyles(a,
c);break}}return a},addPropertyStyles:function(a,b){var c,d;for(d in b)c=b[d],"string"==typeof c&&c.match(/\$\{\w+\}/)&&(a[d]=!0);return a},addRules:function(a){Array.prototype.push.apply(this.rules,a);this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(a){this.defaultStyle=a;this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(a){for(var b=OpenLayers.Style.SYMBOLIZER_PREFIXES,c=0,d=b.length;c<d;c++)if(-1!=a.CLASS_NAME.indexOf(b[c]))return b[c]},clone:function(){var a=
OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;b<c;++b)a.rules.push(this.rules[b].clone())}a.context=this.context&&OpenLayers.Util.extend({},this.context);b=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(b,a)},CLASS_NAME:"OpenLayers.Style"});OpenLayers.Style.createLiteral=function(a,b,c,d){"string"==typeof a&&-1!=a.indexOf("${")&&(a=OpenLayers.String.format(a,b,[c,d]),a=isNaN(a)||!a?a:parseFloat(a));return a};
OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"];
OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(a){this.symbolizer={};OpenLayers.Util.extend(this,a);this.symbolizers&&delete this.symbolizer;this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a in this.symbolizer)this.symbolizer[a]=null;this.symbolizer=null;delete this.symbolizers},evaluate:function(a){var b=
this.getContext(a),c=!0;if(this.minScaleDenominator||this.maxScaleDenominator)var d=a.layer.map.getScale();this.minScaleDenominator&&(c=d>=OpenLayers.Style.createLiteral(this.minScaleDenominator,b));c&&this.maxScaleDenominator&&(c=d<OpenLayers.Style.createLiteral(this.maxScaleDenominator,b));c&&this.filter&&(c="OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?this.filter.evaluate(a):this.filter.evaluate(b));return c},getContext:function(a){var b=this.context;b||(b=a.attributes||a.data);"function"==
typeof this.context&&(b=this.context(a));return b},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.symbolizers){var b=this.symbolizers.length;a.symbolizers=Array(b);for(var c=0;c<b;++c)a.symbolizers[c]=this.symbolizers[c].clone()}else{a.symbolizer={};for(var d in this.symbolizer)b=this.symbolizer[d],c=typeof b,"object"===c?a.symbolizer[d]=OpenLayers.Util.extend({},b):"string"===c&&(a.symbolizer[d]=b)}a.filter=this.filter&&this.filter.clone();a.context=this.context&&OpenLayers.Util.extend({},
this.context);return new OpenLayers.Rule(a)},CLASS_NAME:"OpenLayers.Rule"});
OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b={exceptionReport:null};a.documentElement&&(this.readChildNodes(a,b),null===b.exceptionReport&&(b=(new OpenLayers.Format.OWSCommon).read(a)));return b},readers:{ogc:{ServiceExceptionReport:function(a,
b){b.exceptionReport={exceptions:[]};this.readChildNodes(a,b.exceptionReport)},ServiceException:function(a,b){var c={code:a.getAttribute("code"),locator:a.getAttribute("locator"),text:this.getChildValue(a)};b.exceptions.push(c)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"});
OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,errorProperty:null,name:null,stringifyOutput:!1,parser:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);a=this.CLASS_NAME;this.name=a.substring(a.lastIndexOf(".")+1)},getVersion:function(a,b){var c;a?(c=this.version,c||(c=a.getAttribute("version"),c||(c=this.defaultVersion))):c=b&&b.version||this.version||this.defaultVersion;return c},getParser:function(a){a=
a||this.defaultVersion;var b=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=a){var c=OpenLayers.Format[this.name]["v"+a.replace(/\./g,"_")+b];if(!c)throw"Can't find a "+this.name+" parser for version "+a+b;this.parser=new c(this.options)}return this.parser},write:function(a,b){var c=this.getVersion(null,b);this.parser=this.getParser(c);c=this.parser.write(a,b);return!1===this.stringifyOutput?c:OpenLayers.Format.XML.prototype.write.apply(this,[c])},read:function(a,b){"string"==
typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var c=this.getVersion(a.documentElement);this.parser=this.getParser(c);var d=this.parser.read(a,b);if(null!==this.errorProperty&&void 0===d[this.errorProperty]){var e=new OpenLayers.Format.OGCExceptionReport;d.error=e.read(a)}d.version=c;return d},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"});
OpenLayers.Filter=OpenLayers.Class({initialize:function(a){OpenLayers.Util.extend(this,a)},destroy:function(){},evaluate:function(a){return!0},clone:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"});
OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(a){this.fids=[];OpenLayers.Filter.prototype.initialize.apply(this,[a])},evaluate:function(a){for(var b=0,c=this.fids.length;b<c;b++)if((a.fid||a.id)==this.fids[b])return!0;return!1},clone:function(){var a=new OpenLayers.Filter.FeatureId;OpenLayers.Util.extend(a,this);a.fids=this.fids.slice();return a},CLASS_NAME:"OpenLayers.Filter.FeatureId"});
OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(a){this.filters=[];OpenLayers.Filter.prototype.initialize.apply(this,[a])},destroy:function(){this.filters=null;OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(a){var b,c;switch(this.type){case OpenLayers.Filter.Logical.AND:b=0;for(c=this.filters.length;b<c;b++)if(!1==this.filters[b].evaluate(a))return!1;return!0;case OpenLayers.Filter.Logical.OR:b=0;for(c=this.filters.length;b<
c;b++)if(!0==this.filters[b].evaluate(a))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(a)}},clone:function(){for(var a=[],b=0,c=this.filters.length;b<c;++b)a.push(this.filters[b].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:a})},CLASS_NAME:"OpenLayers.Filter.Logical"});OpenLayers.Filter.Logical.AND="&&";OpenLayers.Filter.Logical.OR="||";OpenLayers.Filter.Logical.NOT="!";
OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(a){OpenLayers.Filter.prototype.initialize.apply(this,[a]);this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===a.matchCase&&(this.matchCase=null)},evaluate:function(a){a instanceof OpenLayers.Feature.Vector&&(a=a.attributes);var b=!1;a=a[this.property];switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:b=this.value;
b=this.matchCase||"string"!=typeof a||"string"!=typeof b?a==b:a.toUpperCase()==b.toUpperCase();break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:b=this.value;b=this.matchCase||"string"!=typeof a||"string"!=typeof b?a!=b:a.toUpperCase()!=b.toUpperCase();break;case OpenLayers.Filter.Comparison.LESS_THAN:b=a<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:b=a>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:b=a<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:b=
a>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:b=a>=this.lowerBoundary&&a<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:b=RegExp(this.value,"gi").test(a)}return b},value2regex:function(a,b,c){if("."==a)throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");a=a?a:"*";b=b?b:".";this.value=this.value.replace(RegExp("\\"+(c?c:"!")+"(.|$)","g"),"\\$1");this.value=this.value.replace(RegExp("\\"+b,"g"),".");this.value=this.value.replace(RegExp("\\"+
a,"g"),".*");this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+a);return this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+b)},regex2value:function(){var a=this.value,a=a.replace(/!/g,"!!"),a=a.replace(/(\\)?\\\./g,function(a,c){return c?a:"!."}),a=a.replace(/(\\)?\\\*/g,function(a,c){return c?a:"!*"}),a=a.replace(/\\\\/g,"\\");return a=a.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"});
OpenLayers.Filter.Comparison.EQUAL_TO="==";OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=";OpenLayers.Filter.Comparison.LESS_THAN="<";OpenLayers.Filter.Comparison.GREATER_THAN=">";OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=";OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=";OpenLayers.Filter.Comparison.BETWEEN="..";OpenLayers.Filter.Comparison.LIKE="~";
OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(a){var b=!1;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:if(a.geometry){var c=this.value;"OpenLayers.Bounds"==this.value.CLASS_NAME&&(c=this.value.toGeometry());a.geometry.intersects(c)&&(b=!0)}break;default:throw Error("evaluate is not implemented for this filter type.");}return b},clone:function(){var a=
OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(a)},CLASS_NAME:"OpenLayers.Filter.Spatial"});OpenLayers.Filter.Spatial.BBOX="BBOX";OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS";OpenLayers.Filter.Spatial.DWITHIN="DWITHIN";OpenLayers.Filter.Spatial.WITHIN="WITHIN";OpenLayers.Filter.Spatial.CONTAINS="CONTAINS";
OpenLayers.Format.SLD=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{profile:null,defaultVersion:"1.0.0",stringifyOutput:!0,namedLayersAsArray:!1,CLASS_NAME:"OpenLayers.Format.SLD"});OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"});OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"});
OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){var b={};this.readers.ogc.Filter.apply(this,[a,b]);return b.filter},readers:{ogc:{_expression:function(a){for(var b="",c=a.firstChild;c;c=
c.nextSibling)switch(c.nodeType){case 1:a=this.readNode(c);a.property?b+="${"+a.property+"}":void 0!==a.value&&(b+=a.value);break;case 3:case 4:b+=c.nodeValue}return b},Filter:function(a,b){var c={fids:[],filters:[]};this.readChildNodes(a,c);0<c.fids.length?b.filter=new OpenLayers.Filter.FeatureId({fids:c.fids}):0<c.filters.length&&(b.filter=c.filters[0])},FeatureId:function(a,b){var c=a.getAttribute("fid");c&&b.fids.push(c)},And:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});
this.readChildNodes(a,c);b.filters.push(c)},Or:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(a,c);b.filters.push(c)},Not:function(a,b){var c=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsLessThan:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsGreaterThan:function(a,
b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsLessThanOrEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsGreaterThanOrEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(a,c);b.filters.push(c)},
PropertyIsBetween:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(a,c);b.filters.push(c)},Literal:function(a,b){b.value=OpenLayers.String.numericIf(this.getChildValue(a),!0)},PropertyName:function(a,b){b.property=this.getChildValue(a)},LowerBoundary:function(a,b){b.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,a),!0)},UpperBoundary:function(a,b){b.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,
a),!0)},Intersects:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(a,b){b.distance=parseInt(this.getChildValue(a));b.distanceUnits=a.getAttribute("units")},Function:function(a,b){}}},readSpatial:function(a,b,c){c=new OpenLayers.Filter.Spatial({type:c});
this.readChildNodes(a,c);c.value=c.components[0];delete c.components;b.filters.push(c)},writeOgcExpression:function(a,b){if(a instanceof OpenLayers.Filter.Function){var c=this.writeNode("Function",a,b);b.appendChild(c)}else this.writeNode("Literal",a,b);return b},write:function(a){return this.writers.ogc.Filter.apply(this,[a])},writeFeatureIdNodes:function(a,b){for(var c=0,d=a.fids.length;c<d;++c)this.writeNode("FeatureId",a.fids[c],b)},writers:{ogc:{Filter:function(a){var b=this.createElementNSPlus("ogc:Filter");
"FID"===a.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,a,b):this.writeNode(this.getFilterType(a),a,b);return b},FeatureId:function(a){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:a}})},And:function(a){for(var b=this.createElementNSPlus("ogc:And"),c,d=0,e=a.filters.length;d<e;++d)c=a.filters[d],"FID"===c.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,c,b):this.writeNode(this.getFilterType(c),c,b);return b},Or:function(a){for(var b=
this.createElementNSPlus("ogc:Or"),c,d=0,e=a.filters.length;d<e;++d)c=a.filters[d],"FID"===c.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,c,b):this.writeNode(this.getFilterType(c),c,b);return b},Not:function(a){var b=this.createElementNSPlus("ogc:Not");a=a.filters[0];"FID"===a.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,a,b):this.writeNode(this.getFilterType(a),a,b);return b},PropertyIsLessThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThan");
this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsGreaterThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThan");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsLessThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsGreaterThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");
this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsBetween:function(a){var b=this.createElementNSPlus("ogc:PropertyIsBetween");this.writeNode("PropertyName",a,b);this.writeNode("LowerBoundary",a,b);this.writeNode("UpperBoundary",a,b);return b},PropertyName:function(a){return this.createElementNSPlus("ogc:PropertyName",{value:a.property})},Literal:function(a){return this.createElementNSPlus("ogc:Literal",{value:a})},LowerBoundary:function(a){var b=this.createElementNSPlus("ogc:LowerBoundary");
this.writeOgcExpression(a.lowerBoundary,b);return b},UpperBoundary:function(a){var b=this.createElementNSPlus("ogc:UpperBoundary");this.writeNode("Literal",a.upperBoundary,b);return b},INTERSECTS:function(a){return this.writeSpatial(a,"Intersects")},WITHIN:function(a){return this.writeSpatial(a,"Within")},CONTAINS:function(a){return this.writeSpatial(a,"Contains")},DWITHIN:function(a){var b=this.writeSpatial(a,"DWithin");this.writeNode("Distance",a,b);return b},Distance:function(a){return this.createElementNSPlus("ogc:Distance",
{attributes:{units:a.distanceUnits},value:a.distance})},Function:function(a){var b=this.createElementNSPlus("ogc:Function",{attributes:{name:a.name}});a=a.params;for(var c=0,d=a.length;c<d;c++)this.writeOgcExpression(a[c],b);return b}}},getFilterType:function(a){var b=this.filterMap[a.type];if(!b)throw"Filter writing not supported for rule type: "+a.type;return b},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan",
"<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"FeatureId"},CLASS_NAME:"OpenLayers.Format.Filter.v1"});
OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(a){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[a])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsNotEqualTo:function(a,
b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsLike:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(a,c);var d=a.getAttribute("wildCard"),e=a.getAttribute("singleChar"),f=a.getAttribute("escape");c.value2regex(d,e,f);b.filters.push(c)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,
feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsEqualTo");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsNotEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsLike:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLike",
{attributes:{wildCard:"*",singleChar:".",escape:"!"}});this.writeNode("PropertyName",a,b);this.writeNode("Literal",a.regex2value(),b);return b},BBOX:function(a){var b=this.createElementNSPlus("ogc:BBOX");a.property&&this.writeNode("PropertyName",a,b);var c=this.writeNode("gml:Box",a.value,b);a.projection&&c.setAttribute("srsName",a.projection);return b}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},
writeSpatial:function(a,b){var c=this.createElementNSPlus("ogc:"+b);this.writeNode("PropertyName",a,c);if(a.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",a.value,c);else{var d;d=a.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",a.value).firstChild:this.writeNode("gml:Box",a.value);a.projection&&d.setAttribute("srsName",a.projection);c.appendChild(d)}return c},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"});
OpenLayers.Symbolizer=OpenLayers.Class({zIndex:0,initialize:function(a){OpenLayers.Util.extend(this,a)},clone:function(){return new (eval(this.CLASS_NAME))(OpenLayers.Util.extend({},this))},CLASS_NAME:"OpenLayers.Symbolizer"});OpenLayers.Symbolizer.Point=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Point"});
OpenLayers.Symbolizer.Line=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Line"});OpenLayers.Symbolizer.Polygon=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Polygon"});
OpenLayers.Symbolizer.Text=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Text"});OpenLayers.Symbolizer.Raster=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(a){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Raster"});
OpenLayers.Format.SLD.v1=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,{namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"sld",schemaLocation:null,multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,strokeDashstyle:"solid",pointRadius:3,
graphicName:"square"},read:function(a,b){b=OpenLayers.Util.applyDefaults(b,this.options);var c={namedLayers:!0===b.namedLayersAsArray?[]:{}};this.readChildNodes(a,c);return c},readers:OpenLayers.Util.applyDefaults({sld:{StyledLayerDescriptor:function(a,b){b.version=a.getAttribute("version");this.readChildNodes(a,b)},Name:function(a,b){b.name=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b.description=this.getChildValue(a)},NamedLayer:function(a,b){var c=
{userStyles:[],namedStyles:[]};this.readChildNodes(a,c);for(var d=0,e=c.userStyles.length;d<e;++d)c.userStyles[d].layerName=c.name;OpenLayers.Util.isArray(b.namedLayers)?b.namedLayers.push(c):b.namedLayers[c.name]=c},NamedStyle:function(a,b){b.namedStyles.push(this.getChildName(a.firstChild))},UserStyle:function(a,b){var c={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1;this.readChildNodes(a,c);this.multipleSymbolizers?(delete c.defaultsPerSymbolizer,c=new OpenLayers.Style2(c)):c=new OpenLayers.Style(this.defaultSymbolizer,
c);b.userStyles.push(c)},IsDefault:function(a,b){"1"==this.getChildValue(a)&&(b.isDefault=!0)},FeatureTypeStyle:function(a,b){++this.featureTypeCounter;var c={rules:this.multipleSymbolizers?b.rules:[]};this.readChildNodes(a,c);this.multipleSymbolizers||(b.rules=c.rules)},Rule:function(a,b){var c;this.multipleSymbolizers&&(c={symbolizers:[]});c=new OpenLayers.Rule(c);this.readChildNodes(a,c);b.rules.push(c)},ElseFilter:function(a,b){b.elseFilter=!0},MinScaleDenominator:function(a,b){b.minScaleDenominator=
parseFloat(this.getChildValue(a))},MaxScaleDenominator:function(a,b){b.maxScaleDenominator=parseFloat(this.getChildValue(a))},TextSymbolizer:function(a,b){var c={};this.readChildNodes(a,c);this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Text(c))):b.symbolizer.Text=OpenLayers.Util.applyDefaults(c,b.symbolizer.Text)},LabelPlacement:function(a,b){this.readChildNodes(a,b)},PointPlacement:function(a,b){var c={};this.readChildNodes(a,c);c.labelRotation=
c.rotation;delete c.rotation;var d,e=b.labelAnchorPointX,f=b.labelAnchorPointY;e<=1/3?d="l":e>1/3&&e<2/3?d="c":e>=2/3&&(d="r");f<=1/3?d+="b":f>1/3&&f<2/3?d+="m":f>=2/3&&(d+="t");c.labelAlign=d;OpenLayers.Util.applyDefaults(b,c)},AnchorPoint:function(a,b){this.readChildNodes(a,b)},AnchorPointX:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelAnchorPointX=c)},AnchorPointY:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelAnchorPointY=c)},Displacement:function(a,
b){this.readChildNodes(a,b)},DisplacementX:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelXOffset=c)},DisplacementY:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelYOffset=c)},LinePlacement:function(a,b){this.readChildNodes(a,b)},PerpendicularOffset:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.labelPerpendicularOffset=c)},Label:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.label=c)},Font:function(a,b){this.readChildNodes(a,
b)},Halo:function(a,b){var c={};this.readChildNodes(a,c);b.haloRadius=c.haloRadius;b.haloColor=c.fillColor;b.haloOpacity=c.fillOpacity},Radius:function(a,b){var c=this.readers.ogc._expression.call(this,a);null!=c&&(b.haloRadius=c)},RasterSymbolizer:function(a,b){var c={};this.readChildNodes(a,c);this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Raster(c))):b.symbolizer.Raster=OpenLayers.Util.applyDefaults(c,b.symbolizer.Raster)},Geometry:function(a,
b){b.geometry={};this.readChildNodes(a,b.geometry)},ColorMap:function(a,b){b.colorMap=[];this.readChildNodes(a,b.colorMap)},ColorMapEntry:function(a,b){var c=a.getAttribute("quantity"),d=a.getAttribute("opacity");b.push({color:a.getAttribute("color"),quantity:null!==c?parseFloat(c):void 0,label:a.getAttribute("label")||void 0,opacity:null!==d?parseFloat(d):void 0})},LineSymbolizer:function(a,b){var c={};this.readChildNodes(a,c);this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Line(c))):
b.symbolizer.Line=OpenLayers.Util.applyDefaults(c,b.symbolizer.Line)},PolygonSymbolizer:function(a,b){var c={fill:!1,stroke:!1};this.multipleSymbolizers||(c=b.symbolizer.Polygon||c);this.readChildNodes(a,c);this.multipleSymbolizers?(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Polygon(c))):b.symbolizer.Polygon=c},PointSymbolizer:function(a,b){var c={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(c=b.symbolizer.Point||c);this.readChildNodes(a,c);this.multipleSymbolizers?
(c.zIndex=this.featureTypeCounter,b.symbolizers.push(new OpenLayers.Symbolizer.Point(c))):b.symbolizer.Point=c},Stroke:function(a,b){b.stroke=!0;this.readChildNodes(a,b)},Fill:function(a,b){b.fill=!0;this.readChildNodes(a,b)},CssParameter:function(a,b){var c=a.getAttribute("name"),d=this.cssMap[c];b.label&&("fill"===c?d="fontColor":"fill-opacity"===c&&(d="fontOpacity"));d&&(c=this.readers.ogc._expression.call(this,a))&&(b[d]=c)},Graphic:function(a,b){b.graphic=!0;var c={};this.readChildNodes(a,c);
for(var d="stroke strokeColor strokeWidth strokeOpacity strokeLinecap fill fillColor fillOpacity graphicName rotation graphicFormat".split(" "),e,f,g=0,h=d.length;g<h;++g)e=d[g],f=c[e],void 0!=f&&(b[e]=f);void 0!=c.opacity&&(b.graphicOpacity=c.opacity);void 0!=c.size&&(isNaN(c.size/2)?b.graphicWidth=c.size:b.pointRadius=c.size/2);void 0!=c.href&&(b.externalGraphic=c.href);void 0!=c.rotation&&(b.rotation=c.rotation)},ExternalGraphic:function(a,b){this.readChildNodes(a,b)},Mark:function(a,b){this.readChildNodes(a,
b)},WellKnownName:function(a,b){b.graphicName=this.getChildValue(a)},Opacity:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.opacity=c)},Size:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.size=c)},Rotation:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.rotation=c)},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},Format:function(a,b){b.graphicFormat=this.getChildValue(a)}}},OpenLayers.Format.Filter.v1_0_0.prototype.readers),
cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(a){var b=null,c;for(c in this.cssMap)if(this.cssMap[c]==a){b=c;break}return b},getGraphicFormat:function(a){var b,c;for(c in this.graphicFormats)if(this.graphicFormats[c].test(a)){b=
c;break}return b||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},write:function(a){return this.writers.sld.StyledLayerDescriptor.apply(this,[a])},writers:OpenLayers.Util.applyDefaults({sld:{_OGCExpression:function(a,b){var c=this.createElementNSPlus(a),d="string"==typeof b?b.split("${"):[b];c.appendChild(this.createTextNode(d[0]));for(var e,f,g=1,h=d.length;g<h;g++)e=d[g],f=e.indexOf("}"),0<f?(this.writeNode("ogc:PropertyName",
{property:e.substring(0,f)},c),c.appendChild(this.createTextNode(e.substring(++f)))):c.appendChild(this.createTextNode("${"+e));return c},StyledLayerDescriptor:function(a){var b=this.createElementNSPlus("sld:StyledLayerDescriptor",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});b.setAttribute("xmlns:ogc",this.namespaces.ogc);b.setAttribute("xmlns:gml",this.namespaces.gml);a.name&&this.writeNode("Name",a.name,b);a.title&&this.writeNode("Title",a.title,b);a.description&&
this.writeNode("Abstract",a.description,b);if(OpenLayers.Util.isArray(a.namedLayers))for(var c=0,d=a.namedLayers.length;c<d;++c)this.writeNode("NamedLayer",a.namedLayers[c],b);else for(c in a.namedLayers)this.writeNode("NamedLayer",a.namedLayers[c],b);return b},Name:function(a){return this.createElementNSPlus("sld:Name",{value:a})},Title:function(a){return this.createElementNSPlus("sld:Title",{value:a})},Abstract:function(a){return this.createElementNSPlus("sld:Abstract",{value:a})},NamedLayer:function(a){var b=
this.createElementNSPlus("sld:NamedLayer");this.writeNode("Name",a.name,b);if(a.namedStyles)for(var c=0,d=a.namedStyles.length;c<d;++c)this.writeNode("NamedStyle",a.namedStyles[c],b);if(a.userStyles)for(c=0,d=a.userStyles.length;c<d;++c)this.writeNode("UserStyle",a.userStyles[c],b);return b},NamedStyle:function(a){var b=this.createElementNSPlus("sld:NamedStyle");this.writeNode("Name",a,b);return b},UserStyle:function(a){var b=this.createElementNSPlus("sld:UserStyle");a.name&&this.writeNode("Name",
a.name,b);a.title&&this.writeNode("Title",a.title,b);a.description&&this.writeNode("Abstract",a.description,b);a.isDefault&&this.writeNode("IsDefault",a.isDefault,b);if(this.multipleSymbolizers&&a.rules){for(var c={"0":[]},d=[0],e,f,g,h,k,l=0,m=a.rules.length;l<m;++l)if(e=a.rules[l],e.symbolizers){f={};for(var n=0,p=e.symbolizers.length;n<p;++n)g=e.symbolizers[n],h=g.zIndex,h in f||(k=e.clone(),k.symbolizers=[],f[h]=k),f[h].symbolizers.push(g.clone());for(h in f)h in c||(d.push(h),c[h]=[]),c[h].push(f[h])}else c[0].push(e.clone());
d.sort();l=0;for(m=d.length;l<m;++l)e=c[d[l]],0<e.length&&(k=a.clone(),k.rules=c[d[l]],this.writeNode("FeatureTypeStyle",k,b))}else this.writeNode("FeatureTypeStyle",a,b);return b},IsDefault:function(a){return this.createElementNSPlus("sld:IsDefault",{value:a?"1":"0"})},FeatureTypeStyle:function(a){for(var b=this.createElementNSPlus("sld:FeatureTypeStyle"),c=0,d=a.rules.length;c<d;++c)this.writeNode("Rule",a.rules[c],b);return b},Rule:function(a){var b=this.createElementNSPlus("sld:Rule");a.name&&
this.writeNode("Name",a.name,b);a.title&&this.writeNode("Title",a.title,b);a.description&&this.writeNode("Abstract",a.description,b);a.elseFilter?this.writeNode("ElseFilter",null,b):a.filter&&this.writeNode("ogc:Filter",a.filter,b);void 0!=a.minScaleDenominator&&this.writeNode("MinScaleDenominator",a.minScaleDenominator,b);void 0!=a.maxScaleDenominator&&this.writeNode("MaxScaleDenominator",a.maxScaleDenominator,b);var c,d;if(this.multipleSymbolizers&&a.symbolizers)for(var e=0,f=a.symbolizers.length;e<
f;++e)d=a.symbolizers[e],c=d.CLASS_NAME.split(".").pop(),this.writeNode(c+"Symbolizer",d,b);else for(var f=OpenLayers.Style.SYMBOLIZER_PREFIXES,e=0,g=f.length;e<g;++e)c=f[e],(d=a.symbolizer[c])&&this.writeNode(c+"Symbolizer",d,b);return b},ElseFilter:function(){return this.createElementNSPlus("sld:ElseFilter")},MinScaleDenominator:function(a){return this.createElementNSPlus("sld:MinScaleDenominator",{value:a})},MaxScaleDenominator:function(a){return this.createElementNSPlus("sld:MaxScaleDenominator",
{value:a})},LineSymbolizer:function(a){var b=this.createElementNSPlus("sld:LineSymbolizer");this.writeNode("Stroke",a,b);return b},Stroke:function(a){var b=this.createElementNSPlus("sld:Stroke");void 0!=a.strokeColor&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeColor"},b);void 0!=a.strokeOpacity&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeOpacity"},b);void 0!=a.strokeWidth&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeWidth"},b);void 0!=a.strokeDashstyle&&"solid"!==
a.strokeDashstyle&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeDashstyle"},b);void 0!=a.strokeLinecap&&this.writeNode("CssParameter",{symbolizer:a,key:"strokeLinecap"},b);return b},CssParameter:function(a){return this.createElementNSPlus("sld:CssParameter",{attributes:{name:this.getCssProperty(a.key)},value:a.symbolizer[a.key]})},TextSymbolizer:function(a){var b=this.createElementNSPlus("sld:TextSymbolizer");null!=a.label&&this.writeNode("Label",a.label,b);null==a.fontFamily&&null==a.fontSize&&
null==a.fontWeight&&null==a.fontStyle||this.writeNode("Font",a,b);null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign&&null==a.labelXOffset&&null==a.labelYOffset&&null==a.labelRotation&&null==a.labelPerpendicularOffset||this.writeNode("LabelPlacement",a,b);null==a.haloRadius&&null==a.haloColor&&null==a.haloOpacity||this.writeNode("Halo",a,b);null==a.fontColor&&null==a.fontOpacity||this.writeNode("Fill",{fillColor:a.fontColor,fillOpacity:a.fontOpacity},b);return b},LabelPlacement:function(a){var b=
this.createElementNSPlus("sld:LabelPlacement");null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign&&null==a.labelXOffset&&null==a.labelYOffset&&null==a.labelRotation||null!=a.labelPerpendicularOffset||this.writeNode("PointPlacement",a,b);null!=a.labelPerpendicularOffset&&this.writeNode("LinePlacement",a,b);return b},LinePlacement:function(a){var b=this.createElementNSPlus("sld:LinePlacement");this.writeNode("PerpendicularOffset",a.labelPerpendicularOffset,b);return b},PerpendicularOffset:function(a){return this.createElementNSPlus("sld:PerpendicularOffset",
{value:a})},PointPlacement:function(a){var b=this.createElementNSPlus("sld:PointPlacement");null==a.labelAnchorPointX&&null==a.labelAnchorPointY&&null==a.labelAlign||this.writeNode("AnchorPoint",a,b);null==a.labelXOffset&&null==a.labelYOffset||this.writeNode("Displacement",a,b);null!=a.labelRotation&&this.writeNode("Rotation",a.labelRotation,b);return b},AnchorPoint:function(a){var b=this.createElementNSPlus("sld:AnchorPoint"),c=a.labelAnchorPointX,d=a.labelAnchorPointY;null!=c&&this.writeNode("AnchorPointX",
c,b);null!=d&&this.writeNode("AnchorPointY",d,b);if(null==c&&null==d){var e=a.labelAlign.substr(0,1);a=a.labelAlign.substr(1,1);"l"===e?c=0:"c"===e?c=0.5:"r"===e&&(c=1);"b"===a?d=0:"m"===a?d=0.5:"t"===a&&(d=1);this.writeNode("AnchorPointX",c,b);this.writeNode("AnchorPointY",d,b)}return b},AnchorPointX:function(a){return this.createElementNSPlus("sld:AnchorPointX",{value:a})},AnchorPointY:function(a){return this.createElementNSPlus("sld:AnchorPointY",{value:a})},Displacement:function(a){var b=this.createElementNSPlus("sld:Displacement");
null!=a.labelXOffset&&this.writeNode("DisplacementX",a.labelXOffset,b);null!=a.labelYOffset&&this.writeNode("DisplacementY",a.labelYOffset,b);return b},DisplacementX:function(a){return this.createElementNSPlus("sld:DisplacementX",{value:a})},DisplacementY:function(a){return this.createElementNSPlus("sld:DisplacementY",{value:a})},Font:function(a){var b=this.createElementNSPlus("sld:Font");a.fontFamily&&this.writeNode("CssParameter",{symbolizer:a,key:"fontFamily"},b);a.fontSize&&this.writeNode("CssParameter",
{symbolizer:a,key:"fontSize"},b);a.fontWeight&&this.writeNode("CssParameter",{symbolizer:a,key:"fontWeight"},b);a.fontStyle&&this.writeNode("CssParameter",{symbolizer:a,key:"fontStyle"},b);return b},Label:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Label",a)},Halo:function(a){var b=this.createElementNSPlus("sld:Halo");a.haloRadius&&this.writeNode("Radius",a.haloRadius,b);(a.haloColor||a.haloOpacity)&&this.writeNode("Fill",{fillColor:a.haloColor,fillOpacity:a.haloOpacity},b);
return b},Radius:function(a){return this.createElementNSPlus("sld:Radius",{value:a})},RasterSymbolizer:function(a){var b=this.createElementNSPlus("sld:RasterSymbolizer");a.geometry&&this.writeNode("Geometry",a.geometry,b);a.opacity&&this.writeNode("Opacity",a.opacity,b);a.colorMap&&this.writeNode("ColorMap",a.colorMap,b);return b},Geometry:function(a){var b=this.createElementNSPlus("sld:Geometry");a.property&&this.writeNode("ogc:PropertyName",a,b);return b},ColorMap:function(a){for(var b=this.createElementNSPlus("sld:ColorMap"),
c=0,d=a.length;c<d;++c)this.writeNode("ColorMapEntry",a[c],b);return b},ColorMapEntry:function(a){var b=this.createElementNSPlus("sld:ColorMapEntry");b.setAttribute("color",a.color);void 0!==a.opacity&&b.setAttribute("opacity",parseFloat(a.opacity));void 0!==a.quantity&&b.setAttribute("quantity",parseFloat(a.quantity));void 0!==a.label&&b.setAttribute("label",a.label);return b},PolygonSymbolizer:function(a){var b=this.createElementNSPlus("sld:PolygonSymbolizer");!1!==a.fill&&this.writeNode("Fill",
a,b);!1!==a.stroke&&this.writeNode("Stroke",a,b);return b},Fill:function(a){var b=this.createElementNSPlus("sld:Fill");a.fillColor&&this.writeNode("CssParameter",{symbolizer:a,key:"fillColor"},b);null!=a.fillOpacity&&this.writeNode("CssParameter",{symbolizer:a,key:"fillOpacity"},b);return b},PointSymbolizer:function(a){var b=this.createElementNSPlus("sld:PointSymbolizer");this.writeNode("Graphic",a,b);return b},Graphic:function(a){var b=this.createElementNSPlus("sld:Graphic");void 0!=a.externalGraphic?
this.writeNode("ExternalGraphic",a,b):this.writeNode("Mark",a,b);void 0!=a.graphicOpacity&&this.writeNode("Opacity",a.graphicOpacity,b);void 0!=a.pointRadius?this.writeNode("Size",2*a.pointRadius,b):void 0!=a.graphicWidth&&this.writeNode("Size",a.graphicWidth,b);void 0!=a.rotation&&this.writeNode("Rotation",a.rotation,b);return b},ExternalGraphic:function(a){var b=this.createElementNSPlus("sld:ExternalGraphic");this.writeNode("OnlineResource",a.externalGraphic,b);a=a.graphicFormat||this.getGraphicFormat(a.externalGraphic);
this.writeNode("Format",a,b);return b},Mark:function(a){var b=this.createElementNSPlus("sld:Mark");a.graphicName&&this.writeNode("WellKnownName",a.graphicName,b);!1!==a.fill&&this.writeNode("Fill",a,b);!1!==a.stroke&&this.writeNode("Stroke",a,b);return b},WellKnownName:function(a){return this.createElementNSPlus("sld:WellKnownName",{value:a})},Opacity:function(a){return this.createElementNSPlus("sld:Opacity",{value:a})},Size:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Size",
a)},Rotation:function(a){return this.createElementNSPlus("sld:Rotation",{value:a})},OnlineResource:function(a){return this.createElementNSPlus("sld:OnlineResource",{attributes:{"xlink:type":"simple","xlink:href":a}})},Format:function(a){return this.createElementNSPlus("sld:Format",{value:a})}}},OpenLayers.Format.Filter.v1_0_0.prototype.writers),CLASS_NAME:"OpenLayers.Format.SLD.v1"});
OpenLayers.Format.SLD.v1_0_0=OpenLayers.Class(OpenLayers.Format.SLD.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0"});
OpenLayers.Format.Context=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{layerOptions:null,layerParams:null,read:function(a,b){var c=OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this,arguments);if(b&&b.map)if(this.context=c,b.map instanceof OpenLayers.Map)c=this.mergeContextToMap(c,b.map);else{var d=b.map;if(OpenLayers.Util.isElement(d)||"string"==typeof d)d={div:d};c=this.contextToMap(c,d)}return c},getLayerFromContext:function(a){var b,c,d={queryable:a.queryable,visibility:a.visibility,
maxExtent:a.maxExtent,metadata:OpenLayers.Util.applyDefaults(a.metadata,{styles:a.styles,formats:a.formats,"abstract":a["abstract"],dataURL:a.dataURL}),numZoomLevels:a.numZoomLevels,units:a.units,isBaseLayer:a.isBaseLayer,opacity:a.opacity,displayInLayerSwitcher:a.displayInLayerSwitcher,singleTile:a.singleTile,tileSize:a.tileSize?new OpenLayers.Size(a.tileSize.width,a.tileSize.height):void 0,minScale:a.minScale||a.maxScaleDenominator,maxScale:a.maxScale||a.minScaleDenominator,srs:a.srs,dimensions:a.dimensions,
metadataURL:a.metadataURL};this.layerOptions&&OpenLayers.Util.applyDefaults(d,this.layerOptions);var e={layers:a.name,transparent:a.transparent,version:a.version};if(a.formats&&0<a.formats.length)for(e.format=a.formats[0].value,b=0,c=a.formats.length;b<c;b++){var f=a.formats[b];if(!0==f.current){e.format=f.value;break}}if(a.styles&&0<a.styles.length)for(b=0,c=a.styles.length;b<c;b++)if(f=a.styles[b],!0==f.current){f.href?e.sld=f.href:f.body?e.sld_body=f.body:e.styles=f.name;break}this.layerParams&&
OpenLayers.Util.applyDefaults(e,this.layerParams);b=null;c=a.service;c==OpenLayers.Format.Context.serviceTypes.WFS?(d.strategies=[new OpenLayers.Strategy.BBOX],d.protocol=new OpenLayers.Protocol.WFS({url:a.url,featurePrefix:a.name.split(":")[0],featureType:a.name.split(":").pop()}),b=new OpenLayers.Layer.Vector(a.title||a.name,d)):c==OpenLayers.Format.Context.serviceTypes.KML?(d.strategies=[new OpenLayers.Strategy.Fixed],d.protocol=new OpenLayers.Protocol.HTTP({url:a.url,format:new OpenLayers.Format.KML}),
b=new OpenLayers.Layer.Vector(a.title||a.name,d)):c==OpenLayers.Format.Context.serviceTypes.GML?(d.strategies=[new OpenLayers.Strategy.Fixed],d.protocol=new OpenLayers.Protocol.HTTP({url:a.url,format:new OpenLayers.Format.GML}),b=new OpenLayers.Layer.Vector(a.title||a.name,d)):a.features?(b=new OpenLayers.Layer.Vector(a.title||a.name,d),b.addFeatures(a.features)):!0!==a.categoryLayer&&(b=new OpenLayers.Layer.WMS(a.title||a.name,a.url,e,d));return b},getLayersFromContext:function(a){for(var b=[],c=
0,d=a.length;c<d;c++){var e=this.getLayerFromContext(a[c]);null!==e&&b.push(e)}return b},contextToMap:function(a,b){b=OpenLayers.Util.applyDefaults({maxExtent:a.maxExtent,projection:a.projection,units:a.units},b);b.maxExtent&&(b.maxResolution=b.maxExtent.getWidth()/OpenLayers.Map.TILE_WIDTH);b.metadata={contactInformation:a.contactInformation,"abstract":a["abstract"],keywords:a.keywords,logo:a.logo,descriptionURL:a.descriptionURL};var c=new OpenLayers.Map(b);c.addLayers(this.getLayersFromContext(a.layersContext));
c.setCenter(a.bounds.getCenterLonLat(),c.getZoomForExtent(a.bounds,!0));return c},mergeContextToMap:function(a,b){b.addLayers(this.getLayersFromContext(a.layersContext));return b},write:function(a,b){a=this.toContext(a);return OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,arguments)},CLASS_NAME:"OpenLayers.Format.Context"});
OpenLayers.Format.Context.serviceTypes={WMS:"urn:ogc:serviceType:WMS",WFS:"urn:ogc:serviceType:WFS",WCS:"urn:ogc:serviceType:WCS",GML:"urn:ogc:serviceType:GML",SLD:"urn:ogc:serviceType:SLD",FES:"urn:ogc:serviceType:FES",KML:"urn:ogc:serviceType:KML"};
OpenLayers.Format.OWSContext=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"0.3.1",getVersion:function(a,b){var c=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);"0.3.0"===c&&(c=this.defaultVersion);return c},toContext:function(a){var b={};"OpenLayers.Map"==a.CLASS_NAME&&(b.bounds=a.getExtent(),b.maxExtent=a.maxExtent,b.projection=a.projection,b.size=a.getSize(),b.layers=a.layers);return b},CLASS_NAME:"OpenLayers.Format.OWSContext"});
OpenLayers.Format.OWSCommon=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",getVersion:function(a,b){var c=this.version;if(!c){var d=a.getAttribute("xmlns:ows");d&&"1.1"===d.substring(d.lastIndexOf("/")+1)&&(c="1.1.0");c||(c=this.defaultVersion)}return c},CLASS_NAME:"OpenLayers.Format.OWSCommon"});
OpenLayers.Format.OWSCommon.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a,b){OpenLayers.Util.applyDefaults(b,this.options);var c={};this.readChildNodes(a,c);return c},readers:{ows:{Exception:function(a,b){var c={code:a.getAttribute("exceptionCode"),locator:a.getAttribute("locator"),texts:[]};b.exceptions.push(c);this.readChildNodes(a,c)},ExceptionText:function(a,b){var c=this.getChildValue(a);b.texts.push(c)},
ServiceIdentification:function(a,b){b.serviceIdentification={};this.readChildNodes(a,b.serviceIdentification)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},Keywords:function(a,b){b.keywords={};this.readChildNodes(a,b.keywords)},Keyword:function(a,b){b[this.getChildValue(a)]=!0},ServiceType:function(a,b){b.serviceType={codeSpace:a.getAttribute("codeSpace"),value:this.getChildValue(a)}},ServiceTypeVersion:function(a,b){b.serviceTypeVersion=
this.getChildValue(a)},Fees:function(a,b){b.fees=this.getChildValue(a)},AccessConstraints:function(a,b){b.accessConstraints=this.getChildValue(a)},ServiceProvider:function(a,b){b.serviceProvider={};this.readChildNodes(a,b.serviceProvider)},ProviderName:function(a,b){b.providerName=this.getChildValue(a)},ProviderSite:function(a,b){b.providerSite=this.getAttributeNS(a,this.namespaces.xlink,"href")},ServiceContact:function(a,b){b.serviceContact={};this.readChildNodes(a,b.serviceContact)},IndividualName:function(a,
b){b.individualName=this.getChildValue(a)},PositionName:function(a,b){b.positionName=this.getChildValue(a)},ContactInfo:function(a,b){b.contactInfo={};this.readChildNodes(a,b.contactInfo)},Phone:function(a,b){b.phone={};this.readChildNodes(a,b.phone)},Voice:function(a,b){b.voice=this.getChildValue(a)},Address:function(a,b){b.address={};this.readChildNodes(a,b.address)},DeliveryPoint:function(a,b){b.deliveryPoint=this.getChildValue(a)},City:function(a,b){b.city=this.getChildValue(a)},AdministrativeArea:function(a,
b){b.administrativeArea=this.getChildValue(a)},PostalCode:function(a,b){b.postalCode=this.getChildValue(a)},Country:function(a,b){b.country=this.getChildValue(a)},ElectronicMailAddress:function(a,b){b.electronicMailAddress=this.getChildValue(a)},Role:function(a,b){b.role=this.getChildValue(a)},OperationsMetadata:function(a,b){b.operationsMetadata={};this.readChildNodes(a,b.operationsMetadata)},Operation:function(a,b){var c=a.getAttribute("name");b[c]={};this.readChildNodes(a,b[c])},DCP:function(a,
b){b.dcp={};this.readChildNodes(a,b.dcp)},HTTP:function(a,b){b.http={};this.readChildNodes(a,b.http)},Get:function(a,b){b.get||(b.get=[]);var c={url:this.getAttributeNS(a,this.namespaces.xlink,"href")};this.readChildNodes(a,c);b.get.push(c)},Post:function(a,b){b.post||(b.post=[]);var c={url:this.getAttributeNS(a,this.namespaces.xlink,"href")};this.readChildNodes(a,c);b.post.push(c)},Parameter:function(a,b){b.parameters||(b.parameters={});var c=a.getAttribute("name");b.parameters[c]={};this.readChildNodes(a,
b.parameters[c])},Constraint:function(a,b){b.constraints||(b.constraints={});var c=a.getAttribute("name");b.constraints[c]={};this.readChildNodes(a,b.constraints[c])},Value:function(a,b){b[this.getChildValue(a)]=!0},OutputFormat:function(a,b){b.formats.push({value:this.getChildValue(a)});this.readChildNodes(a,b)},WGS84BoundingBox:function(a,b){var c={};c.crs=a.getAttribute("crs");b.BoundingBox?b.BoundingBox.push(c):(b.projection=c.crs,c=b);this.readChildNodes(a,c)},BoundingBox:function(a,b){this.readers.ows.WGS84BoundingBox.apply(this,
[a,b])},LowerCorner:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),c=c.split(this.regExes.splitSpace);b.left=c[0];b.bottom=c[1]},UpperCorner:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,""),c=c.replace(this.regExes.trimComma,","),c=c.split(this.regExes.splitSpace);b.right=c[0];b.top=c[1];b.bounds=new OpenLayers.Bounds(b.left,b.bottom,b.right,b.top);delete b.left;delete b.bottom;delete b.right;delete b.top},
Language:function(a,b){b.language=this.getChildValue(a)}}},writers:{ows:{BoundingBox:function(a,b){var c=this.createElementNSPlus(b||"ows:BoundingBox",{attributes:{crs:a.projection}});this.writeNode("ows:LowerCorner",a,c);this.writeNode("ows:UpperCorner",a,c);return c},LowerCorner:function(a){return this.createElementNSPlus("ows:LowerCorner",{value:a.bounds.left+" "+a.bounds.bottom})},UpperCorner:function(a){return this.createElementNSPlus("ows:UpperCorner",{value:a.bounds.right+" "+a.bounds.top})},
Identifier:function(a){return this.createElementNSPlus("ows:Identifier",{value:a})},Title:function(a){return this.createElementNSPlus("ows:Title",{value:a})},Abstract:function(a){return this.createElementNSPlus("ows:Abstract",{value:a})},OutputFormat:function(a){return this.createElementNSPlus("ows:OutputFormat",{value:a})}}},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1"});
OpenLayers.Format.OWSCommon.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(a,b){b.success=!1;b.exceptionReport={version:a.getAttribute("version"),language:a.getAttribute("language"),exceptions:[]};this.readChildNodes(a,b.exceptionReport)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Format.OWSCommon.v1.prototype.writers.ows},
CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_0_0"});
OpenLayers.Format.OWSContext.v0_3_1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{owc:"http://www.opengis.net/ows-context",gml:"http://www.opengis.net/gml",kml:"http://www.opengis.net/kml/2.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},VERSION:"0.3.1",schemaLocation:"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",defaultPrefix:"owc",
extractAttributes:!0,xy:!0,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},featureNS:"http://mapserver.gis.umn.edu/mapserver",featureType:"vector",geometryName:"geometry",nestingLayerLookup:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)},setNestingPath:function(a){if(a.layersContext)for(var b=0,c=a.layersContext.length;b<c;b++){var d=a.layersContext[b],e=
[],f=a.title||"";a.metadata&&a.metadata.nestingPath&&(e=a.metadata.nestingPath.slice());""!=f&&e.push(f);d.metadata.nestingPath=e;d.layersContext&&this.setNestingPath(d)}},decomposeNestingPath:function(a){var b=[];if(OpenLayers.Util.isArray(a)){for(a=a.slice();0<a.length;)b.push(a.slice()),a.pop();b.reverse()}return b},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);this.setNestingPath({layersContext:b.layersContext});
a=[];this.processLayer(a,b);delete b.layersContext;b.layersContext=a;return b},processLayer:function(a,b){if(b.layersContext)for(var c=0,d=b.layersContext.length;c<d;c++){var e=b.layersContext[c];a.push(e);e.layersContext&&this.processLayer(a,e)}},write:function(a,b){this.nestingLayerLookup={};b=b||{};OpenLayers.Util.applyDefaults(b,a);var c=this.writeNode("OWSContext",b);this.nestingLayerLookup=null;this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,
[c])},readers:{kml:{Document:function(a,b){b.features=(new OpenLayers.Format.KML({kmlns:this.namespaces.kml,extractStyles:!0})).read(a)}},owc:{OWSContext:function(a,b){this.readChildNodes(a,b)},General:function(a,b){this.readChildNodes(a,b)},ResourceList:function(a,b){this.readChildNodes(a,b)},Layer:function(a,b){var c={metadata:{},visibility:"1"!=a.getAttribute("hidden"),queryable:"1"==a.getAttribute("queryable"),opacity:null!=a.getAttribute("opacity")?parseFloat(a.getAttribute("opacity")):null,
name:a.getAttribute("name"),categoryLayer:null==a.getAttribute("name"),formats:[],styles:[]};b.layersContext||(b.layersContext=[]);b.layersContext.push(c);this.readChildNodes(a,c)},InlineGeometry:function(a,b){b.features=[];var c=this.getElementsByTagNameNS(a,this.namespaces.gml,"featureMember"),d;1<=c.length&&(d=c[0]);d&&d.firstChild&&(c=d.firstChild.nextSibling?d.firstChild.nextSibling:d.firstChild,this.setNamespace("feature",c.namespaceURI),this.featureType=c.localName||c.nodeName.split(":").pop(),
this.readChildNodes(a,b))},Server:function(a,b){if(!b.service&&!b.version||b.service!=OpenLayers.Format.Context.serviceTypes.WMS)b.service=a.getAttribute("service"),b.version=a.getAttribute("version"),this.readChildNodes(a,b)},Name:function(a,b){b.name=this.getChildValue(a);this.readChildNodes(a,b)},Title:function(a,b){b.title=this.getChildValue(a);this.readChildNodes(a,b)},StyleList:function(a,b){this.readChildNodes(a,b.styles)},Style:function(a,b){var c={};b.push(c);this.readChildNodes(a,c)},LegendURL:function(a,
b){var c={};b.legend=c;this.readChildNodes(a,c)},OnlineResource:function(a,b){b.url=this.getAttributeNS(a,this.namespaces.xlink,"href");this.readChildNodes(a,b)}},ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,gml:OpenLayers.Format.GML.v2.prototype.readers.gml,sld:OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{owc:{OWSContext:function(a){var b=this.createElementNSPlus("OWSContext",{attributes:{version:this.VERSION,
id:a.id||OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")}});this.writeNode("General",a,b);this.writeNode("ResourceList",a,b);return b},General:function(a){var b=this.createElementNSPlus("General");this.writeNode("ows:BoundingBox",a,b);this.writeNode("ows:Title",a.title||"OpenLayers OWSContext",b);return b},ResourceList:function(a){for(var b=this.createElementNSPlus("ResourceList"),c=0,d=a.layers.length;c<d;c++){var e=a.layers[c],f=this.decomposeNestingPath(e.metadata.nestingPath);this.writeNode("_Layer",
{layer:e,subPaths:f},b)}return b},Server:function(a){var b=this.createElementNSPlus("Server",{attributes:{version:a.version,service:a.service}});this.writeNode("OnlineResource",a,b);return b},OnlineResource:function(a){return this.createElementNSPlus("OnlineResource",{attributes:{"xlink:href":a.url}})},InlineGeometry:function(a){var b=this.createElementNSPlus("InlineGeometry");this.writeNode("gml:boundedBy",a.getDataExtent(),b);for(var c=0,d=a.features.length;c<d;c++)this.writeNode("gml:featureMember",
a.features[c],b);return b},StyleList:function(a){for(var b=this.createElementNSPlus("StyleList"),c=0,d=a.length;c<d;c++)this.writeNode("Style",a[c],b);return b},Style:function(a){var b=this.createElementNSPlus("Style");this.writeNode("Name",a,b);this.writeNode("Title",a,b);a.legend&&this.writeNode("LegendURL",a,b);return b},Name:function(a){return this.createElementNSPlus("Name",{value:a.name})},Title:function(a){return this.createElementNSPlus("Title",{value:a.title})},LegendURL:function(a){var b=
this.createElementNSPlus("LegendURL");this.writeNode("OnlineResource",a.legend,b);return b},_WMS:function(a){var b=this.createElementNSPlus("Layer",{attributes:{name:a.params.LAYERS,queryable:a.queryable?"1":"0",hidden:a.visibility?"0":"1",opacity:a.hasOwnProperty("opacity")?a.opacity:null}});this.writeNode("ows:Title",a.name,b);this.writeNode("ows:OutputFormat",a.params.FORMAT,b);this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WMS,version:a.params.VERSION,url:a.url},b);a.metadata.styles&&
0<a.metadata.styles.length&&this.writeNode("StyleList",a.metadata.styles,b);return b},_Layer:function(a){var b,c,d;b=a.layer;c=a.subPaths;d=null;0<c.length?(b=c[0].join("/"),c=b.lastIndexOf("/"),d=this.nestingLayerLookup[b],c=0<c?b.substring(c+1,b.length):b,d||(d=this.createElementNSPlus("Layer"),this.writeNode("ows:Title",c,d),this.nestingLayerLookup[b]=d),a.subPaths.shift(),this.writeNode("_Layer",a,d)):(b instanceof OpenLayers.Layer.WMS?d=this.writeNode("_WMS",b):b instanceof OpenLayers.Layer.Vector&&
(b.protocol instanceof OpenLayers.Protocol.WFS.v1?d=this.writeNode("_WFS",b):b.protocol instanceof OpenLayers.Protocol.HTTP?b.protocol.format instanceof OpenLayers.Format.GML?(b.protocol.format.version="2.1.2",d=this.writeNode("_GML",b)):b.protocol.format instanceof OpenLayers.Format.KML&&(b.protocol.format.version="2.2",d=this.writeNode("_KML",b)):(this.setNamespace("feature",this.featureNS),d=this.writeNode("_InlineGeometry",b))),b.options.maxScale&&this.writeNode("sld:MinScaleDenominator",b.options.maxScale,
d),b.options.minScale&&this.writeNode("sld:MaxScaleDenominator",b.options.minScale,d),this.nestingLayerLookup[b.name]=d);return d},_WFS:function(a){var b=this.createElementNSPlus("Layer",{attributes:{name:a.protocol.featurePrefix+":"+a.protocol.featureType,hidden:a.visibility?"0":"1"}});this.writeNode("ows:Title",a.name,b);this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WFS,version:a.protocol.version,url:a.protocol.url},b);return b},_InlineGeometry:function(a){var b=this.createElementNSPlus("Layer",
{attributes:{name:this.featureType,hidden:a.visibility?"0":"1"}});this.writeNode("ows:Title",a.name,b);this.writeNode("InlineGeometry",a,b);return b},_GML:function(a){var b=this.createElementNSPlus("Layer");this.writeNode("ows:Title",a.name,b);this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.GML,url:a.protocol.url,version:a.protocol.format.version},b);return b},_KML:function(a){var b=this.createElementNSPlus("Layer");this.writeNode("ows:Title",a.name,b);this.writeNode("Server",
{service:OpenLayers.Format.Context.serviceTypes.KML,version:a.protocol.format.version,url:a.protocol.url},b);return b}},gml:OpenLayers.Util.applyDefaults({boundedBy:function(a){var b=this.createElementNSPlus("gml:boundedBy");this.writeNode("gml:Box",a,b);return b}},OpenLayers.Format.GML.v2.prototype.writers.gml),ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,sld:OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},CLASS_NAME:"OpenLayers.Format.OWSContext.v0_3_1"});
OpenLayers.Format.CSWGetRecords=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.CSWGetRecords.DEFAULTS);var b=OpenLayers.Format.CSWGetRecords["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSWGetRecords version: "+a.version;return new b(a)};OpenLayers.Format.CSWGetRecords.DEFAULTS={version:"2.0.2"};
OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(a){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,"");OpenLayers.Util.extend(this,a);this.events=new OpenLayers.Events(this);if(this.eventListeners instanceof Object)this.events.on(this.eventListeners);null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+
"_"))},destroy:function(){this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null);this.eventListeners=null;this.handler&&(this.handler.destroy(),this.handler=null);if(this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&"function"==typeof this.handlers[a].destroy&&this.handlers[a].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null);this.div=null},setMap:function(a){this.map=a;this.handler&&
this.handler.setMap(a)},draw:function(a){null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title));null!=a&&(this.position=a.clone());this.moveTo(this.position);return this.div},moveTo:function(a){null!=a&&null!=this.div&&(this.div.style.left=a.x+"px",this.div.style.top=
a.y+"px")},activate:function(){if(this.active)return!1;this.handler&&this.handler.activate();this.active=!0;this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active");this.events.triggerEvent("activate");return!0},deactivate:function(){return this.active?(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),
!0):!1},CLASS_NAME:"OpenLayers.Control"});OpenLayers.Control.TYPE_BUTTON=1;OpenLayers.Control.TYPE_TOGGLE=2;OpenLayers.Control.TYPE_TOOL=3;
OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(a){this.target=a;for(a=this.events.length-1;0<=a;--a)this.target.register(this.events[a],this,this.buttonClick,{extension:!0})},destroy:function(){for(var a=this.events.length-1;0<=a;--a)this.target.unregister(this.events[a],this,this.buttonClick);
delete this.target},getPressedButton:function(a){var b=3,c;do{if(OpenLayers.Element.hasClass(a,"olButton")){c=a;break}a=a.parentNode}while(0<--b&&a);return c},buttonClick:function(a){var b=!0,c=OpenLayers.Event.element(a);if(c&&(OpenLayers.Event.isLeftClick(a)||!~a.type.indexOf("mouse")))if(c=this.getPressedButton(c)){if("keydown"===a.type)switch(a.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:c}),OpenLayers.Event.stop(a),
b=!1}else this.startEvt&&(this.completeRegEx.test(a.type)&&(b=OpenLayers.Util.pagePosition(c),this.target.triggerEvent("buttonclick",{buttonElement:c,buttonXY:{x:this.startEvt.clientX-b[0],y:this.startEvt.clientY-b[1]}})),this.cancelRegEx.test(a.type)&&delete this.startEvt,OpenLayers.Event.stop(a),b=!1);this.startRegEx.test(a.type)&&(this.startEvt=a,OpenLayers.Event.stop(a),b=!1)}else delete this.startEvt;return b}});
OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:!1,handlers:null,resolutionFactor:1,maximized:!1,initialize:function(a){this.layers=[];this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,[a])},destroy:function(){this.mapDiv&&(this.handlers.click&&this.handlers.click.destroy(),this.handlers.drag&&this.handlers.drag.destroy(),
this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle),this.extentRectangle=null,this.rectEvents&&(this.rectEvents.destroy(),this.rectEvents=null),this.ovmap&&(this.ovmap.destroy(),this.ovmap=null),this.element.removeChild(this.mapDiv),this.mapDiv=null,this.div.removeChild(this.element),this.element=null,this.maximizeDiv&&(this.div.removeChild(this.maximizeDiv),this.maximizeDiv=null),this.minimizeDiv&&(this.div.removeChild(this.minimizeDiv),this.minimizeDiv=null),this.map.events.un({buttonclick:this.onButtonClick,
moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments))},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(0===this.layers.length)if(this.map.baseLayer)this.layers=[this.map.baseLayer.clone()];else return this.map.events.register("changebaselayer",this,this.baseLayerDraw),this.div;this.element=document.createElement("div");this.element.className=this.displayClass+"Element";this.element.style.display="none";
this.mapDiv=document.createElement("div");this.mapDiv.style.width=this.size.w+"px";this.mapDiv.style.height=this.size.h+"px";this.mapDiv.style.position="relative";this.mapDiv.style.overflow="hidden";this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap");this.extentRectangle=document.createElement("div");this.extentRectangle.style.position="absolute";this.extentRectangle.style.zIndex=1E3;this.extentRectangle.className=this.displayClass+"ExtentRectangle";this.element.appendChild(this.mapDiv);
this.div.appendChild(this.element);if(this.outsideViewport)this.element.style.display="";else{this.div.className+=" "+this.displayClass+"Container";var a=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,a,"absolute");this.maximizeDiv.style.display="none";this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton";this.div.appendChild(this.maximizeDiv);a=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,a,"absolute");this.minimizeDiv.style.display="none";this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton";this.div.appendChild(this.minimizeDiv);this.minimizeControl()}this.map.getExtent()&&this.update();this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this});this.maximized&&this.maximizeControl();return this.div},baseLayerDraw:function(){this.draw();this.map.events.unregister("changebaselayer",
this,this.baseLayerDraw)},rectDrag:function(a){var b=this.handlers.drag.last.x-a.x,c=this.handlers.drag.last.y-a.y;if(0!=b||0!=c){var d=this.rectPxBounds.top,e=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight());var f=this.rectPxBounds.getWidth(),c=Math.max(0,d-c),c=Math.min(c,this.ovmap.size.h-this.hComp-a),b=Math.max(0,e-b),b=Math.min(b,this.ovmap.size.w-this.wComp-f);this.setRectPxBounds(new OpenLayers.Bounds(b,c+a,b+f,c))}},mapDivClick:function(a){var b=this.rectPxBounds.getCenterPixel(),
c=a.xy.x-b.x,d=a.xy.y-b.y,e=this.rectPxBounds.top,f=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight());b=this.rectPxBounds.getWidth();d=Math.max(0,e+d);d=Math.min(d,this.ovmap.size.h-a);c=Math.max(0,f+c);c=Math.min(c,this.ovmap.size.w-b);this.setRectPxBounds(new OpenLayers.Bounds(c,d+a,c+b,d));this.updateMapToRect()},onButtonClick:function(a){a.buttonElement===this.minimizeDiv?this.minimizeControl():a.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(a){this.element.style.display=
"";this.showToggle(!1);null!=a&&OpenLayers.Event.stop(a)},minimizeControl:function(a){this.element.style.display="none";this.showToggle(!0);null!=a&&OpenLayers.Event.stop(a)},showToggle:function(a){this.maximizeDiv&&(this.maximizeDiv.style.display=a?"":"none");this.minimizeDiv&&(this.minimizeDiv.style.display=a?"none":"")},update:function(){null==this.ovmap&&this.createMap();!this.autoPan&&this.isSuitableOverview()||this.updateOverview();this.updateRectToMap()},isSuitableOverview:function(){var a=
this.map.getExtent(),b=this.map.maxExtent,a=new OpenLayers.Bounds(Math.max(a.left,b.left),Math.max(a.bottom,b.bottom),Math.min(a.right,b.right),Math.min(a.top,b.top));this.ovmap.getProjection()!=this.map.getProjection()&&(a=a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()));b=this.ovmap.getResolution()/this.map.getResolution();return b>this.minRatio&&b<=this.maxRatio&&this.ovmap.getExtent().containsBounds(a)},updateOverview:function(){var a=this.map.getResolution(),b=this.ovmap.getResolution(),
c=b/a;c>this.maxRatio?b=this.minRatio*a:c<=this.minRatio&&(b=this.maxRatio*a);this.ovmap.getProjection()!=this.map.getProjection()?(a=this.map.center.clone(),a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())):a=this.map.center;this.ovmap.setCenter(a,this.ovmap.getZoomForResolution(b*this.resolutionFactor));this.updateRectToMap()},createMap:function(){var a=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:!1},this.mapOptions);this.ovmap=new OpenLayers.Map(this.mapDiv,
a);this.ovmap.viewPortDiv.appendChild(this.extentRectangle);OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy);this.ovmap.addLayers(this.layers);this.ovmap.zoomToMaxExtent();this.wComp=(this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")))?this.wComp:2;this.hComp=(this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,
"border-bottom-width")))?this.hComp:2;this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap});this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:!0,"double":!1,stopSingle:!0,stopDouble:!0,pixelTolerance:1,map:this.ovmap});this.handlers.click.activate();this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,!0);this.rectEvents.register("mouseover",this,function(a){this.handlers.drag.active||
this.map.dragging||this.handlers.drag.activate()});this.rectEvents.register("mouseout",this,function(a){this.handlers.drag.dragging||this.handlers.drag.deactivate()});if(this.ovmap.getProjection()!=this.map.getProjection()){var a=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,b=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=a&&b?OpenLayers.INCHES_PER_UNIT[a]/OpenLayers.INCHES_PER_UNIT[b]:1}},updateRectToMap:function(){var a;
a=this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent();(a=this.getRectBoundsFromMapBounds(a))&&this.setRectPxBounds(a)},updateMapToRect:function(){var a=this.getMapBoundsFromRectBounds(this.rectPxBounds);this.ovmap.getProjection()!=this.map.getProjection()&&(a=a.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject()));this.map.panTo(a.getCenterLonLat())},setRectPxBounds:function(a){var b=
Math.max(a.top,0),c=Math.max(a.left,0),d=Math.min(a.top+Math.abs(a.getHeight()),this.ovmap.size.h-this.hComp);a=Math.min(a.left+a.getWidth(),this.ovmap.size.w-this.wComp);var e=Math.max(a-c,0),f=Math.max(d-b,0);e<this.minRectSize||f<this.minRectSize?(this.extentRectangle.className=this.displayClass+this.minRectDisplayClass,e=c+e/2-this.minRectSize/2,this.extentRectangle.style.top=Math.round(b+f/2-this.minRectSize/2)+"px",this.extentRectangle.style.left=Math.round(e)+"px",this.extentRectangle.style.height=
this.minRectSize+"px",this.extentRectangle.style.width=this.minRectSize+"px"):(this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.extentRectangle.style.top=Math.round(b)+"px",this.extentRectangle.style.left=Math.round(c)+"px",this.extentRectangle.style.height=Math.round(f)+"px",this.extentRectangle.style.width=Math.round(e)+"px");this.rectPxBounds=new OpenLayers.Bounds(Math.round(c),Math.round(d),Math.round(a),Math.round(b))},getRectBoundsFromMapBounds:function(a){var b=this.getOverviewPxFromLonLat({lon:a.left,
lat:a.bottom});a=this.getOverviewPxFromLonLat({lon:a.right,lat:a.top});var c=null;b&&a&&(c=new OpenLayers.Bounds(b.x,b.y,a.x,a.y));return c},getMapBoundsFromRectBounds:function(a){var b=this.getLonLatFromOverviewPx({x:a.left,y:a.bottom});a=this.getLonLatFromOverviewPx({x:a.right,y:a.top});return new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)},getLonLatFromOverviewPx:function(a){var b=this.ovmap.size,c=this.ovmap.getResolution(),d=this.ovmap.getExtent().getCenterLonLat();return{lon:d.lon+(a.x-b.w/
2)*c,lat:d.lat-(a.y-b.h/2)*c}},getOverviewPxFromLonLat:function(a){var b=this.ovmap.getResolution(),c=this.ovmap.getExtent();if(c)return{x:Math.round(1/b*(a.lon-c.left)),y:Math.round(1/b*(c.top-a.lat))}},CLASS_NAME:"OpenLayers.Control.OverviewMap"});
OpenLayers.Animation=function(a){var b=!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame),c=function(){var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b,c){a.setTimeout(b,16)};return function(c,d){b.apply(a,[c,d])}}(),d=0,e={};return{isNative:b,requestFrame:c,start:function(a,b,h){b=0<b?b:Number.POSITIVE_INFINITY;
var k=++d,l=+new Date;e[k]=function(){e[k]&&+new Date-l<=b?(a(),e[k]&&c(e[k],h)):delete e[k]};c(e[k],h);return k},stop:function(a){delete e[a]}}}(window);
OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,animationId:null,playing:!1,initialize:function(a){this.easing=a?a:OpenLayers.Easing.Expo.easeOut},start:function(a,b,c,d){this.playing=!0;this.begin=a;this.finish=b;this.duration=c;this.callbacks=d.callbacks;this.time=0;OpenLayers.Animation.stop(this.animationId);this.animationId=null;this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin);this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,
this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var a={},b;for(b in this.begin){var c=this.begin[b],d=this.finish[b];if(null==c||null==d||isNaN(c)||isNaN(d))throw new TypeError("invalid value for Tween");a[b]=this.easing.apply(this,[this.time,c,d-c,this.duration])}this.time++;this.callbacks&&this.callbacks.eachStep&&this.callbacks.eachStep.call(this,
a);this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"});OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"};OpenLayers.Easing.Linear={easeIn:function(a,b,c,d){return c*a/d+b},easeOut:function(a,b,c,d){return c*a/d+b},easeInOut:function(a,b,c,d){return c*a/d+b},CLASS_NAME:"OpenLayers.Easing.Linear"};
OpenLayers.Easing.Expo={easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},CLASS_NAME:"OpenLayers.Easing.Expo"};
OpenLayers.Easing.Quad={easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},CLASS_NAME:"OpenLayers.Easing.Quad"};
OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1E3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,
maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!0,panTween:null,eventListeners:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,paddingForPopups:null,minPx:null,maxPx:null,initialize:function(a,b){1===arguments.length&&"object"===typeof a&&(a=(b=a)&&b.div);this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT);this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15);this.theme=OpenLayers._getScriptLocation()+
"theme/default/style.css";this.options=OpenLayers.Util.extend({},b);OpenLayers.Util.extend(this,b);OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]);!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent));!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent));!this.restrictedExtent||
this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent));!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center));this.layers=[];this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_");this.div=OpenLayers.Util.getElement(a);this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px");OpenLayers.Element.addClass(this.div,"olMap");var c=this.id+
"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden");this.viewPortDiv.style.width="100%";this.viewPortDiv.style.height="100%";this.viewPortDiv.className="olMapViewport";this.div.appendChild(this.viewPortDiv);this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0});c=this.id+"_OpenLayers_Container";this.layerContainerDiv=OpenLayers.Util.createDiv(c);this.layerContainerDiv.style.width="100px";this.layerContainerDiv.style.height=
"100px";this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1;this.viewPortDiv.appendChild(this.layerContainerDiv);this.updateSize();if(this.eventListeners instanceof Object)this.events.on(this.eventListeners);9>parseFloat(navigator.appVersion.split("MSIE")[1])?this.events.register("resize",this,this.updateSize):(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy));if(this.theme){for(var c=!0,d=document.getElementsByTagName("link"),
e=0,f=d.length;e<f;++e)if(OpenLayers.Util.isEquivalentUrl(d.item(e).href,this.theme)){c=!1;break}c&&(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(c))}null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),
OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution)));e=0;for(f=this.controls.length;e<f;e++)this.addControlToMap(this.controls[e]);this.popups=[];this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this);OpenLayers.Event.observe(window,
"unload",this.unloadDestroy);b&&b.layers&&(delete this.center,this.addLayers(b.layers),b.center&&!this.getCenter()&&this.setCenter(b.center,b.zoom))},getViewport:function(){return this.viewPortDiv},render:function(a){this.div=OpenLayers.Util.getElement(a);OpenLayers.Element.addClass(this.div,"olMap");this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);this.div.appendChild(this.viewPortDiv);this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;
this.panTween&&(this.panTween.stop(),this.panTween=null);OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy);this.unloadDestroy=null;this.updateSizeDestroy?OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy):this.events.unregister("resize",this,this.updateSize);this.paddingForPopups=null;if(null!=this.controls){for(var a=this.controls.length-1;0<=a;--a)this.controls[a].destroy();this.controls=null}if(null!=this.layers){for(a=this.layers.length-1;0<=a;--a)this.layers[a].destroy(!1);
this.layers=null}this.viewPortDiv&&this.div.removeChild(this.viewPortDiv);this.viewPortDiv=null;this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null);this.events.destroy();this.options=this.events=null},setOptions:function(a){var b=this.minPx&&a.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,a);b&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(a,b,c){var d="function"==
typeof c.test;return OpenLayers.Array.filter(this[a],function(a){return a[b]==c||d&&c.test(a[b])})},getLayersBy:function(a,b){return this.getBy("layers",a,b)},getLayersByName:function(a){return this.getLayersBy("name",a)},getLayersByClass:function(a){return this.getLayersBy("CLASS_NAME",a)},getControlsBy:function(a,b){return this.getBy("controls",a,b)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},getLayer:function(a){for(var b=null,c=0,d=this.layers.length;c<d;c++){var e=
this.layers[c];if(e.id==a){b=e;break}}return b},setLayerZIndex:function(a,b){a.setZIndex(this.Z_INDEX_BASE[a.isBaseLayer?"BaseLayer":"Overlay"]+5*b)},resetLayersZIndex:function(){for(var a=0,b=this.layers.length;a<b;a++)this.setLayerZIndex(this.layers[a],a)},addLayer:function(a){for(var b=0,c=this.layers.length;b<c;b++)if(this.layers[b]==a)return!1;if(!1===this.events.triggerEvent("preaddlayer",{layer:a}))return!1;this.allOverlays&&(a.isBaseLayer=!1);a.div.className="olLayerDiv";a.div.style.overflow=
"";this.setLayerZIndex(a,this.layers.length);a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div);this.layers.push(a);a.setMap(this);a.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(a):a.setVisibility(!1):a.redraw();this.events.triggerEvent("addlayer",{layer:a});a.events.triggerEvent("added",{map:this,layer:a});a.afterAdd();return!0},addLayers:function(a){for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},removeLayer:function(a,
b){if(!1!==this.events.triggerEvent("preremovelayer",{layer:a})){null==b&&(b=!0);a.isFixed?this.viewPortDiv.removeChild(a.div):this.layerContainerDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.layers,a);a.removeMap(this);a.map=null;if(this.baseLayer==a&&(this.baseLayer=null,b))for(var c=0,d=this.layers.length;c<d;c++){var e=this.layers[c];if(e.isBaseLayer||this.allOverlays){this.setBaseLayer(e);break}}this.resetLayersZIndex();this.events.triggerEvent("removelayer",{layer:a});a.events.triggerEvent("removed",
{map:this,layer:a})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(a){return OpenLayers.Util.indexOf(this.layers,a)},setLayerIndex:function(a,b){var c=this.getLayerIndex(a);0>b?b=0:b>this.layers.length&&(b=this.layers.length);if(c!=b){this.layers.splice(c,1);this.layers.splice(b,0,a);for(var c=0,d=this.layers.length;c<d;c++)this.setLayerZIndex(this.layers[c],c);this.events.triggerEvent("changelayer",{layer:a,property:"order"});this.allOverlays&&(0===b?this.setBaseLayer(a):
this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(a,b){var c=this.getLayerIndex(a)+b;this.setLayerIndex(a,c)},setBaseLayer:function(a){if(a!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,a)){var b=this.getCachedCenter(),c=OpenLayers.Util.getResolutionFromScale(this.getScale(),a.units);null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1);this.baseLayer=a;if(!this.allOverlays||this.baseLayer.visibility)this.baseLayer.setVisibility(!0),
!1===this.baseLayer.inRange&&this.baseLayer.redraw();null!=b&&(a=this.getZoomForResolution(c||this.resolution,!0),this.setCenter(b,a,!1,!0));this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(a,b){this.controls.push(a);this.addControlToMap(a,b)},addControls:function(a,b){for(var c=1===arguments.length?[]:b,d=0,e=a.length;d<e;d++)this.addControl(a[d],c[d]?c[d]:null)},addControlToMap:function(a,b){a.outsideViewport=null!=a.div;this.displayProjection&&!a.displayProjection&&
(a.displayProjection=this.displayProjection);a.setMap(this);var c=a.draw(b);c&&!a.outsideViewport&&(c.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(c));a.autoActivate&&a.activate()},getControl:function(a){for(var b=null,c=0,d=this.controls.length;c<d;c++){var e=this.controls[c];if(e.id==a){b=e;break}}return b},removeControl:function(a){a&&a==this.getControl(a.id)&&(a.div&&a.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(a.div),OpenLayers.Util.removeItem(this.controls,
a))},addPopup:function(a,b){if(b)for(var c=this.popups.length-1;0<=c;--c)this.removePopup(this.popups[c]);a.map=this;this.popups.push(a);if(c=a.draw())c.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(c)},removePopup:function(a){OpenLayers.Util.removeItem(this.popups,a);if(a.div)try{this.layerContainerDiv.removeChild(a.div)}catch(b){}a.map=null},getSize:function(){var a=null;null!=this.size&&(a=this.size.clone());return a},updateSize:function(){var a=this.getCurrentSize();
if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();var b=this.getSize();null==b&&(this.size=b=a);if(!a.equals(b)){this.size=a;a=0;for(b=this.layers.length;a<b;a++)this.layers[a].onMapResize();a=this.getCachedCenter();null!=this.baseLayer&&null!=a&&(b=this.getZoom(),this.zoom=null,this.setCenter(a,b))}}},getCurrentSize:function(){var a=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);if(0==a.w&&0==a.h||isNaN(a.w)&&isNaN(a.h))a.w=this.div.offsetWidth,a.h=this.div.offsetHeight;
if(0==a.w&&0==a.h||isNaN(a.w)&&isNaN(a.h))a.w=parseInt(this.div.style.width),a.h=parseInt(this.div.style.height);return a},calculateBounds:function(a,b){var c=null;null==a&&(a=this.getCachedCenter());null==b&&(b=this.getResolution());if(null!=a&&null!=b)var c=this.size.w*b/2,d=this.size.h*b/2,c=new OpenLayers.Bounds(a.lon-c,a.lat-d,a.lon+c,a.lat+d);return c},getCenter:function(){var a=null,b=this.getCachedCenter();b&&(a=b.clone());return a},getCachedCenter:function(){!this.center&&this.size&&(this.center=
this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2}));return this.center},getZoom:function(){return this.zoom},pan:function(a,b,c){c=OpenLayers.Util.applyDefaults(c,{animate:!0,dragging:!1});if(c.dragging)0==a&&0==b||this.moveByPx(a,b);else{var d=this.getViewPortPxFromLonLat(this.getCachedCenter());a=d.add(a,b);if(this.dragging||!a.equals(d))d=this.getLonLatFromViewPortPx(a),c.animate?this.panTo(d):(this.moveTo(d),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend")))}},
panTo:function(a){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(a)){this.panTween||(this.panTween=new OpenLayers.Tween(this.panMethod));var b=this.getCachedCenter();if(!a.equals(b)){var b=this.getPixelFromLonLat(b),c=this.getPixelFromLonLat(a),d=0,e=0;this.panTween.start({x:0,y:0},{x:c.x-b.x,y:c.y-b.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(a){this.moveByPx(a.x-d,a.y-e);d=Math.round(a.x);e=Math.round(a.y)},this),done:OpenLayers.Function.bind(function(b){this.moveTo(a);
this.dragging=!1;this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(a)},setCenter:function(a,b,c,d){this.panTween&&this.panTween.stop();this.moveTo(a,b,{dragging:c,forceZoomChange:d})},moveByPx:function(a,b){var c=this.size.w/2,d=this.size.h/2,e=c+a,f=d+b,g=this.baseLayer.wrapDateLine,h=0,k=0;this.restrictedExtent&&(h=c,k=d,g=!1);a=g||e<=this.maxPx.x-h&&e>=this.minPx.x+h?Math.round(a):0;b=f<=this.maxPx.y-k&&f>=this.minPx.y+k?Math.round(b):0;if(a||b){this.dragging||(this.dragging=!0,
this.events.triggerEvent("movestart"));this.center=null;a&&(this.layerContainerDiv.style.left=parseInt(this.layerContainerDiv.style.left)-a+"px",this.minPx.x-=a,this.maxPx.x-=a);b&&(this.layerContainerDiv.style.top=parseInt(this.layerContainerDiv.style.top)-b+"px",this.minPx.y-=b,this.maxPx.y-=b);d=0;for(e=this.layers.length;d<e;++d)c=this.layers[d],c.visibility&&(c===this.baseLayer||c.inRange)&&(c.moveByPx(a,b),c.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(a){var b=
this.baseLayer.resolutions,c=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(a)>c)for(var d=a|0,e=b.length;d<e;++d)if(b[d]<=c){a=d;break}return a},moveTo:function(a,b,c){null==a||a instanceof OpenLayers.LonLat||(a=new OpenLayers.LonLat(a));c||(c={});null!=b&&(b=parseFloat(b),this.fractionalZoom||(b=Math.round(b)));if(this.baseLayer.wrapDateLine){var d=b;b=this.adjustZoom(b);b!==d&&(a=this.getCenter())}var d=c.dragging||this.dragging,e=c.forceZoomChange;this.getCachedCenter()||
this.isValidLonLat(a)||(a=this.maxExtent.getCenterLonLat(),this.center=a.clone());if(null!=this.restrictedExtent){null==a&&(a=this.center);null==b&&(b=this.getZoom());var f=this.getResolutionForZoom(b),f=this.calculateBounds(a,f);if(!this.restrictedExtent.containsBounds(f)){var g=this.restrictedExtent.getCenterLonLat();f.getWidth()>this.restrictedExtent.getWidth()?a=new OpenLayers.LonLat(g.lon,a.lat):f.left<this.restrictedExtent.left?a=a.add(this.restrictedExtent.left-f.left,0):f.right>this.restrictedExtent.right&&
(a=a.add(this.restrictedExtent.right-f.right,0));f.getHeight()>this.restrictedExtent.getHeight()?a=new OpenLayers.LonLat(a.lon,g.lat):f.bottom<this.restrictedExtent.bottom?a=a.add(0,this.restrictedExtent.bottom-f.bottom):f.top>this.restrictedExtent.top&&(a=a.add(0,this.restrictedExtent.top-f.top))}}e=e||this.isValidZoomLevel(b)&&b!=this.getZoom();f=this.isValidLonLat(a)&&!a.equals(this.center);if(e||f||d){d||this.events.triggerEvent("movestart");f&&(!e&&this.center&&this.centerLayerContainer(a),this.center=
a.clone());a=e?this.getResolutionForZoom(b):this.getResolution();if(e||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter();this.layerContainerDiv.style.left="0px";this.layerContainerDiv.style.top="0px";var f=this.getMaxExtent({restricted:!0}),h=f.getCenterLonLat(),g=this.center.lon-h.lon,h=h.lat-this.center.lat,k=Math.round(f.getWidth()/a),l=Math.round(f.getHeight()/a);this.minPx={x:(this.size.w-k)/2-g/a,y:(this.size.h-l)/2-h/a};this.maxPx={x:this.minPx.x+Math.round(f.getWidth()/
a),y:this.minPx.y+Math.round(f.getHeight()/a)}}e&&(this.zoom=b,this.resolution=a);a=this.getExtent();this.baseLayer.visibility&&(this.baseLayer.moveTo(a,e,c.dragging),c.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:e}));a=this.baseLayer.getExtent();for(b=this.layers.length-1;0<=b;--b)f=this.layers[b],f===this.baseLayer||f.isBaseLayer||(g=f.calculateInRange(),f.inRange!=g&&((f.inRange=g)||f.display(!1),this.events.triggerEvent("changelayer",{layer:f,property:"visibility"})),g&&
f.visibility&&(f.moveTo(a,e,c.dragging),c.dragging||f.events.triggerEvent("moveend",{zoomChanged:e})));this.events.triggerEvent("move");d||this.events.triggerEvent("moveend");if(e){b=0;for(c=this.popups.length;b<c;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(a){var b=this.getViewPortPxFromLonLat(this.layerContainerOrigin),c=this.getViewPortPxFromLonLat(a);if(null!=b&&null!=c){var d=parseInt(this.layerContainerDiv.style.left);a=parseInt(this.layerContainerDiv.style.top);
var e=Math.round(b.x-c.x),b=Math.round(b.y-c.y);this.layerContainerDiv.style.left=e+"px";this.layerContainerDiv.style.top=b+"px";d-=e;a-=b;this.minPx.x-=d;this.maxPx.x-=d;this.minPx.y-=a;this.maxPx.y-=a}},isValidZoomLevel:function(a){return null!=a&&0<=a&&a<this.getNumZoomLevels()},isValidLonLat:function(a){var b=!1;null!=a&&(b=this.getMaxExtent(),b=b.containsLonLat(a,{worldBounds:this.baseLayer.wrapDateLine&&b}));return b},getProjection:function(){var a=this.getProjectionObject();return a?a.getCode():
null},getProjectionObject:function(){var a=null;null!=this.baseLayer&&(a=this.baseLayer.projection);return a},getMaxResolution:function(){var a=null;null!=this.baseLayer&&(a=this.baseLayer.maxResolution);return a},getMaxExtent:function(a){var b=null;a&&a.restricted&&this.restrictedExtent?b=this.restrictedExtent:null!=this.baseLayer&&(b=this.baseLayer.maxExtent);return b},getNumZoomLevels:function(){var a=null;null!=this.baseLayer&&(a=this.baseLayer.numZoomLevels);return a},getExtent:function(){var a=
null;null!=this.baseLayer&&(a=this.baseLayer.getExtent());return a},getResolution:function(){var a=null;null!=this.baseLayer?a=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(a=this.layers[0].getResolution());return a},getUnits:function(){var a=null;null!=this.baseLayer&&(a=this.baseLayer.units);return a},getScale:function(){var a=null;null!=this.baseLayer&&(a=this.getResolution(),a=OpenLayers.Util.getScaleFromResolution(a,this.baseLayer.units));return a},getZoomForExtent:function(a,
b){var c=null;null!=this.baseLayer&&(c=this.baseLayer.getZoomForExtent(a,b));return c},getResolutionForZoom:function(a){var b=null;this.baseLayer&&(b=this.baseLayer.getResolutionForZoom(a));return b},getZoomForResolution:function(a,b){var c=null;null!=this.baseLayer&&(c=this.baseLayer.getZoomForResolution(a,b));return c},zoomTo:function(a){this.isValidZoomLevel(a)&&this.setCenter(null,a)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(a,
b){a instanceof OpenLayers.Bounds||(a=new OpenLayers.Bounds(a));var c=a.getCenterLonLat();if(this.baseLayer.wrapDateLine){c=this.getMaxExtent();for(a=a.clone();a.right<a.left;)a.right+=c.getWidth();c=a.getCenterLonLat().wrapDateLine(c)}this.setCenter(c,this.getZoomForExtent(a,b))},zoomToMaxExtent:function(a){a=this.getMaxExtent({restricted:a?a.restricted:!0});this.zoomToExtent(a)},zoomToScale:function(a,b){var c=OpenLayers.Util.getResolutionFromScale(a,this.baseLayer.units),d=this.size.w*c/2,c=this.size.h*
c/2,e=this.getCachedCenter(),d=new OpenLayers.Bounds(e.lon-d,e.lat-c,e.lon+d,e.lat+c);this.zoomToExtent(d,b)},getLonLatFromViewPortPx:function(a){var b=null;null!=this.baseLayer&&(b=this.baseLayer.getLonLatFromViewPortPx(a));return b},getViewPortPxFromLonLat:function(a){var b=null;null!=this.baseLayer&&(b=this.baseLayer.getViewPortPxFromLonLat(a));return b},getLonLatFromPixel:function(a){return this.getLonLatFromViewPortPx(a)},getPixelFromLonLat:function(a){a=this.getViewPortPxFromLonLat(a);a.x=Math.round(a.x);
a.y=Math.round(a.y);return a},getGeodesicPixelSize:function(a){var b=a?this.getLonLatFromPixel(a):this.getCachedCenter()||new OpenLayers.LonLat(0,0),c=this.getResolution();a=b.add(-c/2,0);var d=b.add(c/2,0),e=b.add(0,-c/2),b=b.add(0,c/2),c=new OpenLayers.Projection("EPSG:4326"),f=this.getProjectionObject()||c;f.equals(c)||(a.transform(f,c),d.transform(f,c),e.transform(f,c),b.transform(f,c));return new OpenLayers.Size(OpenLayers.Util.distVincenty(a,d),OpenLayers.Util.distVincenty(e,b))},getViewPortPxFromLayerPx:function(a){var b=
null;if(null!=a)var b=parseInt(this.layerContainerDiv.style.left),c=parseInt(this.layerContainerDiv.style.top),b=a.add(b,c);return b},getLayerPxFromViewPortPx:function(a){var b=null;if(null!=a){var b=-parseInt(this.layerContainerDiv.style.left),c=-parseInt(this.layerContainerDiv.style.top),b=a.add(b,c);if(isNaN(b.x)||isNaN(b.y))b=null}return b},getLonLatFromLayerPx:function(a){a=this.getViewPortPxFromLayerPx(a);return this.getLonLatFromViewPortPx(a)},getLayerPxFromLonLat:function(a){a=this.getPixelFromLonLat(a);
return this.getLayerPxFromViewPortPx(a)},CLASS_NAME:"OpenLayers.Map"});OpenLayers.Map.TILE_WIDTH=256;OpenLayers.Map.TILE_HEIGHT=256;
OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,
numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(a,b){this.metadata={};b=OpenLayers.Util.extend({},b);null!=this.alwaysInRange&&(b.alwaysInRange=this.alwaysInRange);this.addOptions(b);this.name=a;if(null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,
this.div),this.eventListeners instanceof Object))this.events.on(this.eventListeners)},destroy:function(a){null==a&&(a=!0);null!=this.map&&this.map.removeLayer(this,a);this.options=this.div=this.name=this.map=this.projection=null;this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy());this.events=this.eventListeners=null},clone:function(a){null==a&&(a=new OpenLayers.Layer(this.name,this.getOptions()));OpenLayers.Util.applyDefaults(a,this);a.map=null;return a},
getOptions:function(){var a={},b;for(b in this.options)a[b]=this[b];return a},setName:function(a){a!=this.name&&(this.name=a,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(a,b){null==this.options&&(this.options={});a&&("string"==typeof a.projection&&(a.projection=new OpenLayers.Projection(a.projection)),a.projection&&OpenLayers.Util.applyDefaults(a,OpenLayers.Projection.defaults[a.projection.getCode()]),!a.maxExtent||a.maxExtent instanceof
OpenLayers.Bounds||(a.maxExtent=new OpenLayers.Bounds(a.maxExtent)),!a.minExtent||a.minExtent instanceof OpenLayers.Bounds||(a.minExtent=new OpenLayers.Bounds(a.minExtent)));OpenLayers.Util.extend(this.options,a);OpenLayers.Util.extend(this,a);this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits());if(this.map){var c=this.map.getResolution(),d=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]),e;for(e in a)if(a.hasOwnProperty(e)&&0<=OpenLayers.Util.indexOf(d,
e)){this.initResolutions();b&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(c),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var a=!1;if(this.map){this.inRange=this.calculateInRange();var b=this.getExtent();b&&this.inRange&&this.visibility&&(this.moveTo(b,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),a=!0)}return a},moveTo:function(a,b,c){a=this.visibility;this.isBaseLayer||
(a=a&&this.inRange);this.display(a)},moveByPx:function(a,b){},setMap:function(a){null==this.map&&(this.map=a,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),
this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(a){},getImageSize:function(a){return this.imageSize||this.tileSize},setTileSize:function(a){this.tileSize=a=a?a:this.tileSize?this.tileSize:this.map.getTileSize();this.gutter&&(this.imageSize=new OpenLayers.Size(a.w+2*this.gutter,a.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(a){a!=this.visibility&&(this.visibility=a,this.display(a),
this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(a){a!=("none"!=this.div.style.display)&&(this.div.style.display=a&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var a=!1;this.alwaysInRange?a=!0:this.map&&(a=this.map.getResolution(),a=a>=this.minResolution&&a<=this.maxResolution);return a},setIsBaseLayer:function(a){a!=this.isBaseLayer&&(this.isBaseLayer=
a,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var a,b,c,d={},e=!0;a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++)c=this.RESOLUTION_PROPERTIES[a],d[c]=this.options[c],e&&this.options[c]&&(e=!1);null==this.options.alwaysInRange&&(this.alwaysInRange=e);null==d.resolutions&&(d.resolutions=this.resolutionsFromScales(d.scales));null==d.resolutions&&(d.resolutions=this.calculateResolutions(d));if(null==d.resolutions){a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<
b;a++)c=this.RESOLUTION_PROPERTIES[a],d[c]=null!=this.options[c]?this.options[c]:this.map[c];null==d.resolutions&&(d.resolutions=this.resolutionsFromScales(d.scales));null==d.resolutions&&(d.resolutions=this.calculateResolutions(d))}var f;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(f=this.options.maxResolution);this.options.minScale&&(f=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var g;this.options.minResolution&&"auto"!==this.options.minResolution&&
(g=this.options.minResolution);this.options.maxScale&&(g=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units));d.resolutions&&(d.resolutions.sort(function(a,b){return b-a}),f||(f=d.resolutions[0]),g||(g=d.resolutions[d.resolutions.length-1]));if(this.resolutions=d.resolutions){b=this.resolutions.length;this.scales=Array(b);for(a=0;a<b;a++)this.scales[a]=OpenLayers.Util.getScaleFromResolution(this.resolutions[a],this.units);this.numZoomLevels=b}if(this.minResolution=g)this.maxScale=
OpenLayers.Util.getScaleFromResolution(g,this.units);if(this.maxResolution=f)this.minScale=OpenLayers.Util.getScaleFromResolution(f,this.units)},resolutionsFromScales:function(a){if(null!=a){var b,c,d;d=a.length;b=Array(d);for(c=0;c<d;c++)b[c]=OpenLayers.Util.getResolutionFromScale(a[c],this.units);return b}},calculateResolutions:function(a){var b,c,d=a.maxResolution;null!=a.minScale?d=OpenLayers.Util.getResolutionFromScale(a.minScale,this.units):"auto"==d&&null!=this.maxExtent&&(b=this.map.getSize(),
c=this.maxExtent.getWidth()/b.w,b=this.maxExtent.getHeight()/b.h,d=Math.max(c,b));c=a.minResolution;null!=a.maxScale?c=OpenLayers.Util.getResolutionFromScale(a.maxScale,this.units):"auto"==a.minResolution&&null!=this.minExtent&&(b=this.map.getSize(),c=this.minExtent.getWidth()/b.w,b=this.minExtent.getHeight()/b.h,c=Math.max(c,b));"number"!==typeof d&&"number"!==typeof c&&null!=this.maxExtent&&(d=this.map.getTileSize(),d=Math.max(this.maxExtent.getWidth()/d.w,this.maxExtent.getHeight()/d.h));b=a.maxZoomLevel;
a=a.numZoomLevels;"number"===typeof c&&"number"===typeof d&&void 0===a?a=Math.floor(Math.log(d/c)/Math.log(2))+1:void 0===a&&null!=b&&(a=b+1);if(!("number"!==typeof a||0>=a||"number"!==typeof d&&"number"!==typeof c)){b=Array(a);var e=2;"number"==typeof c&&"number"==typeof d&&(e=Math.pow(d/c,1/(a-1)));var f;if("number"===typeof d)for(f=0;f<a;f++)b[f]=d/Math.pow(e,f);else for(f=0;f<a;f++)b[a-1-f]=c*Math.pow(e,f);return b}},getResolution:function(){var a=this.map.getZoom();return this.getResolutionForZoom(a)},
getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(a,b){var c=this.map.getSize(),c=Math.max(a.getWidth()/c.w,a.getHeight()/c.h);return this.getZoomForResolution(c,b)},getDataExtent:function(){},getResolutionForZoom:function(a){a=Math.max(0,Math.min(a,this.resolutions.length-1));if(this.map.fractionalZoom){var b=Math.floor(a),c=Math.ceil(a);a=this.resolutions[b]-(a-b)*(this.resolutions[b]-this.resolutions[c])}else a=this.resolutions[Math.round(a)];return a},getZoomForResolution:function(a,
b){var c,d;if(this.map.fractionalZoom){var e=0,f=this.resolutions[e],g=this.resolutions[this.resolutions.length-1],h;c=0;for(d=this.resolutions.length;c<d;++c)if(h=this.resolutions[c],h>=a&&(f=h,e=c),h<=a){g=h;break}c=f-g;c=0<c?e+(f-a)/c:e}else{f=Number.POSITIVE_INFINITY;c=0;for(d=this.resolutions.length;c<d;c++)if(b){e=Math.abs(this.resolutions[c]-a);if(e>f)break;f=e}else if(this.resolutions[c]<a)break;c=Math.max(0,c-1)}return c},getLonLatFromViewPortPx:function(a){var b=null,c=this.map;if(null!=
a&&c.minPx){var b=c.getResolution(),d=c.getMaxExtent({restricted:!0}),b=new OpenLayers.LonLat((a.x-c.minPx.x)*b+d.left,(c.minPx.y-a.y)*b+d.top);this.wrapDateLine&&(b=b.wrapDateLine(this.maxExtent))}return b},getViewPortPxFromLonLat:function(a,b){var c=null;null!=a&&(b=b||this.map.getResolution(),c=this.map.calculateBounds(null,b),c=new OpenLayers.Pixel(1/b*(a.lon-c.left),1/b*(c.top-a.lat)));return c},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;for(var b=this.div.childNodes,c=0,d=b.length;c<
d;++c){var e=b[c].firstChild||b[c],f=b[c].lastChild;f&&"iframe"===f.nodeName.toLowerCase()&&(e=f.parentNode);OpenLayers.Util.modifyDOMElement(e,null,null,null,null,null,null,a)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(a){this.div.style.zIndex=a},adjustBounds:function(a){if(this.gutter){var b=this.gutter*this.map.getResolution();a=new OpenLayers.Bounds(a.left-b,a.bottom-b,a.right+
b,a.top+b)}this.wrapDateLine&&(b={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},a=a.wrapDateLine(this.maxExtent,b));return a},CLASS_NAME:"OpenLayers.Layer"});
OpenLayers.Layer.SphericalMercator={getExtent:function(){var a=null;return a=this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(a){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(a){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var a=0;a<=this.MAX_ZOOM_LEVEL;++a)this.RESOLUTIONS[a]=
156543.03390625/Math.pow(2,a);this.units="m";this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var a=new OpenLayers.Projection("EPSG:4326"),b=new OpenLayers.Projection("EPSG:900913");return function(c,d){var e=OpenLayers.Projection.transform({x:c,y:d},a,b);return new OpenLayers.LonLat(e.x,e.y)}}(),inverseMercator:function(){var a=new OpenLayers.Projection("EPSG:4326"),b=new OpenLayers.Projection("EPSG:900913");return function(c,d){var e=OpenLayers.Projection.transform({x:c,
y:d},b,a);return new OpenLayers.LonLat(e.x,e.y)}}()};
OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(a,b){OpenLayers.Layer.prototype.initialize.apply(this,arguments);null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.pane=this.mapObject=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Layer.prototype.setMap.apply(this,arguments);this.pane.style.zIndex=
parseInt(this.div.style.zIndex)+1;this.pane.style.display=this.div.style.display;this.pane.style.width="100%";this.pane.style.height="100%";"msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")");this.isFixed?this.map.viewPortDiv.appendChild(this.pane):this.map.layerContainerDiv.appendChild(this.pane);this.loadMapObject();null==this.mapObject&&this.loadWarningMessage()},removeMap:function(a){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane);
OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var a=this.map.getSize(),b=Math.min(a.w,300),c=Math.min(a.h,200),b=new OpenLayers.Size(b,c),a=(new OpenLayers.Pixel(a.w/2,a.h/2)).add(-b.w/2,-b.h/2),a=OpenLayers.Util.createDiv(this.name+"_warning",a,b,null,null,null,"auto");a.style.padding="7px";a.style.backgroundColor="yellow";a.innerHTML=this.getWarningHTML();this.div.appendChild(a)},getWarningHTML:function(){return""},
display:function(a){OpenLayers.Layer.prototype.display.apply(this,arguments);this.pane.style.display=this.div.style.display},setZIndex:function(a){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments);this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(a,b){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments);this.dragPanMapObject?this.dragPanMapObject(a,-b):this.moveTo(this.map.getCachedCenter())},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,
arguments);if(null!=this.mapObject){var d=this.map.getCenter(),e=this.map.getZoom();if(null!=d){var f=this.getMapObjectCenter(),f=this.getOLLonLatFromMapObjectLonLat(f),g=this.getMapObjectZoom(),g=this.getOLZoomFromMapObjectZoom(g);d.equals(f)&&e==g||(!b&&f&&this.dragPanMapObject&&this.smoothDragPan?(e=this.map.getViewPortPxFromLonLat(f),d=this.map.getViewPortPxFromLonLat(d),this.dragPanMapObject(d.x-e.x,e.y-d.y)):(d=this.getMapObjectLonLatFromOLLonLat(d),e=this.getMapObjectZoomFromOLZoom(e),this.setMapObjectCenter(d,
e,c)))}}},getLonLatFromViewPortPx:function(a){var b=null;null!=this.mapObject&&null!=this.getMapObjectCenter()&&(a=this.getMapObjectPixelFromOLPixel(a),a=this.getMapObjectLonLatFromMapObjectPixel(a),b=this.getOLLonLatFromMapObjectLonLat(a));return b},getViewPortPxFromLonLat:function(a){var b=null;null!=this.mapObject&&null!=this.getMapObjectCenter()&&(a=this.getMapObjectLonLatFromOLLonLat(a),a=this.getMapObjectPixelFromMapObjectLonLat(a),b=this.getOLPixelFromMapObjectPixel(a));return b},getOLLonLatFromMapObjectLonLat:function(a){var b=
null;null!=a&&(b=this.getLongitudeFromMapObjectLonLat(a),a=this.getLatitudeFromMapObjectLonLat(a),b=new OpenLayers.LonLat(b,a));return b},getMapObjectLonLatFromOLLonLat:function(a){var b=null;null!=a&&(b=this.getMapObjectLonLatFromLonLat(a.lon,a.lat));return b},getOLPixelFromMapObjectPixel:function(a){var b=null;null!=a&&(b=this.getXFromMapObjectPixel(a),a=this.getYFromMapObjectPixel(a),b=new OpenLayers.Pixel(b,a));return b},getMapObjectPixelFromOLPixel:function(a){var b=null;null!=a&&(b=this.getMapObjectPixelFromXY(a.x,
a.y));return b},CLASS_NAME:"OpenLayers.Layer.EventPane"});
OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var a=["minZoomLevel","maxZoomLevel","numZoomLevels"],b=0,c=a.length;b<c;b++){var d=a[b];this[d]=null!=this.options[d]?this.options[d]:this.map[d]}if(null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)this.minZoomLevel=this.MIN_ZOOM_LEVEL;a=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1;b=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?
this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels;this.numZoomLevels=null!=b?Math.min(b,a):a;this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1;if(null!=this.RESOLUTIONS){a=0;this.resolutions=[];for(b=this.minZoomLevel;b<=this.maxZoomLevel;b++)this.resolutions[a++]=this.RESOLUTIONS[b];this.maxResolution=this.resolutions[0];this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,
arguments);var a=null,b=this.map.getSize(),c=this.getExtent();null!=b&&null!=c&&(a=Math.max(c.getWidth()/b.w,c.getHeight()/b.h));return a},getExtent:function(){var a=this.map.getSize(),b=this.getLonLatFromViewPortPx({x:0,y:0}),a=this.getLonLatFromViewPortPx({x:a.w,y:a.h});return null!=b&&null!=a?new OpenLayers.Bounds(b.lon,a.lat,a.lon,b.lat):null},getZoomForResolution:function(a){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments);var b=OpenLayers.Layer.prototype.getExtent.apply(this,
[]);return this.getZoomForExtent(b)},getOLZoomFromMapObjectZoom:function(a){var b=null;null!=a&&(b=a-this.minZoomLevel,this.map.baseLayer!==this&&(b=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(b))));return b},getMapObjectZoomFromOLZoom:function(a){var b=null;null!=a&&(b=a+this.minZoomLevel,this.map.baseLayer!==this&&(b=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(b))));return b},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"});
OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,0.703125,0.3515625,0.17578125,0.087890625,0.0439453125,0.02197265625,0.010986328125,0.0054931640625,0.00274658203125,0.001373291015625,6.866455078125E-4,3.4332275390625E-4,1.71661376953125E-4,8.58306884765625E-5,4.291534423828125E-5,2.145767211914062E-5,1.072883605957031E-5,5.36441802978515E-6,2.68220901489257E-6,1.341104507446289E-6,6.705522537231445E-7],
type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(a,b){b=b||{};b.version||(b.version="function"===typeof GMap2?"2":"3");var c=OpenLayers.Layer.Google["v"+b.version.replace(/\./g,"_")];if(c)OpenLayers.Util.applyDefaults(b,c);else throw"Unsupported Google Maps API version: "+b.version;OpenLayers.Util.applyDefaults(b,c.DEFAULTS);b.maxExtent&&(b.maxExtent=b.maxExtent.clone());OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[a,b]);OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,
[a,b]);this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(a){var b=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments);this.setOpacity(b)},display:function(a){this._dragging||this.setGMapVisibility(a);OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(a,
b,c){this._dragging=c;OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments);delete this._dragging},setOpacity:function(a){a!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=a);if(this.getVisibility()){var b=this.getMapContainer();OpenLayers.Util.modifyDOMElement(b,null,null,null,null,null,null,a)}},destroy:function(){if(this.map){this.setGMapVisibility(!1);var a=OpenLayers.Layer.Google.cache[this.map.id];a&&1>=a.count&&
this.removeGMapElements()}OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var a=OpenLayers.Layer.Google.cache[this.map.id];if(a){var b=this.mapObject&&this.getMapContainer();b&&b.parentNode&&b.parentNode.removeChild(b);(b=a.termsOfUse)&&b.parentNode&&b.parentNode.removeChild(b);(a=a.poweredBy)&&a.parentNode&&a.parentNode.removeChild(a)}},removeMap:function(a){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var b=OpenLayers.Layer.Google.cache[a.id];
b&&(1>=b.count?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[a.id]):--b.count);delete this.termsOfUse;delete this.poweredBy;delete this.mapObject;delete this.dragObject;OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(a){var b=null;null!=a&&(b=a.getSouthWest(),a=a.getNorthEast(),this.sphericalMercator?(b=this.forwardMercator(b.lng(),b.lat()),a=this.forwardMercator(a.lng(),a.lat())):(b=new OpenLayers.LonLat(b.lng(),b.lat()),
a=new OpenLayers.LonLat(a.lng(),a.lat())),b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat));return b},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(a){return this.sphericalMercator?this.forwardMercator(a.lng(),a.lat()).lon:a.lng()},getLatitudeFromMapObjectLonLat:function(a){return this.sphericalMercator?this.forwardMercator(a.lng(),
a.lat()).lat:a.lat()},getXFromMapObjectPixel:function(a){return a.x},getYFromMapObjectPixel:function(a){return a.y},CLASS_NAME:"OpenLayers.Layer.Google"});OpenLayers.Layer.Google.cache={};
OpenLayers.Layer.Google.v2={termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){this.type||(this.type=G_NORMAL_MAP);var a,b,c,d=OpenLayers.Layer.Google.cache[this.map.id];if(d)a=d.mapObject,b=d.termsOfUse,c=d.poweredBy,++d.count;else{var d=this.map.viewPortDiv,e=document.createElement("div");e.id=this.map.id+"_GMap2Container";e.style.position="absolute";e.style.width="100%";e.style.height="100%";d.appendChild(e);try{a=new GMap2(e),b=e.lastChild,d.appendChild(b),b.style.zIndex=
"1100",b.style.right="",b.style.bottom="",b.className="olLayerGoogleCopyright",c=e.lastChild,d.appendChild(c),c.style.zIndex="1100",c.style.right="",c.style.bottom="",c.className="olLayerGooglePoweredBy gmnoprint"}catch(f){throw f;}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:a,termsOfUse:b,poweredBy:c,count:1}}this.mapObject=a;this.termsOfUse=b;this.poweredBy=c;-1===OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)&&this.mapObject.addMapType(this.type);"function"==typeof a.getDragObject?
this.dragObject=a.getDragObject():this.dragPanMapObject=null;!1===this.isBaseLayer&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){if(this.visibility&&this.mapObject.isLoaded())this.mapObject.checkResize();else{if(!this._resized)var a=this,b=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(b);delete a._resized;a.mapObject.checkResize();a.moveTo(a.map.getCenter(),a.map.getZoom())});this._resized=!0}},setGMapVisibility:function(a){var b=OpenLayers.Layer.Google.cache[this.map.id];
if(b){var c=this.mapObject.getContainer();!0===a?(this.mapObject.setMapType(this.type),c.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",b.displayed=this.id):(b.displayed===this.id&&delete b.displayed,b.displayed||(c.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(a){var b=
null;null!=a&&(b=this.sphericalMercator?this.inverseMercator(a.bottom,a.left):new OpenLayers.LonLat(a.bottom,a.left),a=this.sphericalMercator?this.inverseMercator(a.top,a.right):new OpenLayers.LonLat(a.top,a.right),b=new GLatLngBounds(new GLatLng(b.lat,b.lon),new GLatLng(a.lat,a.lon)));return b},setMapObjectCenter:function(a,b){this.mapObject.setCenter(a,b)},dragPanMapObject:function(a,b){this.dragObject.moveBy(new GSize(-a,b))},getMapObjectLonLatFromMapObjectPixel:function(a){return this.mapObject.fromContainerPixelToLatLng(a)},
getMapObjectPixelFromMapObjectLonLat:function(a){return this.mapObject.fromLatLngToContainerPixel(a)},getMapObjectZoomFromMapObjectBounds:function(a){return this.mapObject.getBoundsZoomLevel(a)},getMapObjectLonLatFromLonLat:function(a,b){var c;this.sphericalMercator?(c=this.inverseMercator(a,b),c=new GLatLng(c.lat,c.lon)):c=new GLatLng(b,a);return c},getMapObjectPixelFromXY:function(a,b){return new GPoint(a,b)}};
OpenLayers.Format.WFST=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.WFST.DEFAULTS);var b=OpenLayers.Format.WFST["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported WFST version: "+a.version;return new b(a)};OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"};
OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(a){this.stateName={};this.stateName[OpenLayers.State.INSERT]="wfs:Insert";this.stateName[OpenLayers.State.UPDATE]=
"wfs:Update";this.stateName[OpenLayers.State.DELETE]="wfs:Delete";OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},getSrsName:function(a,b){var c=b&&b.srsName;c||(c=a&&a.layer?a.layer.projection.getCode():this.srsName);return c},read:function(a,b){b=b||{};OpenLayers.Util.applyDefaults(b,{output:"features"});"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var c={};a&&this.readNode(a,c,!0);c.features&&"features"===b.output&&
(c=c.features);return c},readers:{wfs:{FeatureCollection:function(a,b){b.features=[];this.readChildNodes(a,b)}}},write:function(a,b){var c=this.writeNode("wfs:Transaction",{features:a,options:b}),d=this.schemaLocationAttr();d&&this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",d);return OpenLayers.Format.XML.prototype.write.apply(this,[c])},writers:{wfs:{GetFeature:function(a){var b=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:a&&a.handle,
outputFormat:a&&a.outputFormat,maxFeatures:a&&a.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(a)}});if("string"==typeof this.featureType)this.writeNode("Query",a,b);else for(var c=0,d=this.featureType.length;c<d;c++)a.featureType=this.featureType[c],this.writeNode("Query",a,b);return b},Transaction:function(a){a=a||{};var b=a.options||{},c=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:b.handle}}),d,e=a.features;if(e){!0===b.multi&&OpenLayers.Util.extend(this.geometryTypes,
{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.multiCurve?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":!0===this.multiSurface?"MultiSurface":"MultiPolygon"});var f,g;a=0;for(d=e.length;a<d;++a)g=e[a],(f=this.stateName[g.state])&&this.writeNode(f,{feature:g,options:b},c);!0===b.multi&&this.setGeometryTypes()}if(b.nativeElements)for(a=0,d=b.nativeElements.length;a<d;++a)this.writeNode("wfs:Native",b.nativeElements[a],c);return c},Native:function(a){return this.createElementNSPlus("wfs:Native",
{attributes:{vendorId:a.vendorId,safeToIgnore:a.safeToIgnore},value:a.value})},Insert:function(a){var b=a.feature;a=a.options;a=this.createElementNSPlus("wfs:Insert",{attributes:{handle:a&&a.handle}});this.srsName=this.getSrsName(b);this.writeNode("feature:_typeName",b,a);return a},Update:function(a){var b=a.feature;a=a.options;a=this.createElementNSPlus("wfs:Update",{attributes:{handle:a&&a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});this.featureNS&&a.setAttribute("xmlns:"+
this.featurePrefix,this.featureNS);var c=b.modified;null===this.geometryName||c&&void 0===c.geometry||(this.srsName=this.getSrsName(b),this.writeNode("Property",{name:this.geometryName,value:b.geometry},a));for(var d in b.attributes)void 0===b.attributes[d]||c&&c.attributes&&(!c.attributes||void 0===c.attributes[d])||this.writeNode("Property",{name:d,value:b.attributes[d]},a);this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[b.fid]}),a);return a},Property:function(a){var b=this.createElementNSPlus("wfs:Property");
this.writeNode("Name",a.name,b);null!==a.value&&this.writeNode("Value",a.value,b);return b},Name:function(a){return this.createElementNSPlus("wfs:Name",{value:a})},Value:function(a){var b;a instanceof OpenLayers.Geometry?(b=this.createElementNSPlus("wfs:Value"),a=this.writeNode("feature:_geometry",a).firstChild,b.appendChild(a)):b=this.createElementNSPlus("wfs:Value",{value:a});return b},Delete:function(a){var b=a.feature;a=a.options;a=this.createElementNSPlus("wfs:Delete",{attributes:{handle:a&&
a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});this.featureNS&&a.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[b.fid]}),a);return a}}},schemaLocationAttr:function(a){a=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},a);var b=OpenLayers.Util.extend({},this.schemaLocations);a.schema&&(b[a.featurePrefix]=a.schema);a=[];var c,d;for(d in b)(c=this.namespaces[d])&&
a.push(c+" "+b[d]);return a.join(" ")||void 0},setFilterProperty:function(a){if(a.filters)for(var b=0,c=a.filters.length;b<c;++b)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,a.filters[b]);else a instanceof OpenLayers.Filter.Spatial&&!a.property&&(a.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"});
OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:!1,multiCurve:!0,surface:!1,multiSurface:!0,initialize:function(a){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[a])},readers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(a,b){this.readChildNodes(a,b)},Curve:function(a,b){var c={points:[]};this.readChildNodes(a,c);b.components||
(b.components=[]);b.components.push(new OpenLayers.Geometry.LineString(c.points))},segments:function(a,b){this.readChildNodes(a,b)},LineStringSegment:function(a,b){var c={};this.readChildNodes(a,c);c.points&&Array.prototype.push.apply(b.points,c.points)},pos:function(a,b){var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),c=this.xy?new OpenLayers.Geometry.Point(c[0],c[1],c[2]):new OpenLayers.Geometry.Point(c[1],c[0],c[2]);b.points=[c]},posList:function(a,
b){for(var c=this.getChildValue(a).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),d=parseInt(a.getAttribute("dimension"))||2,e,f,g,h=Array(c.length/d),k=0,l=c.length;k<l;k+=d)e=c[k],f=c[k+1],g=2==d?void 0:c[k+2],h[k/d]=this.xy?new OpenLayers.Geometry.Point(e,f,g):new OpenLayers.Geometry.Point(f,e,g);b.points=h},Surface:function(a,b){this.readChildNodes(a,b)},patches:function(a,b){this.readChildNodes(a,b)},PolygonPatch:function(a,b){this.readers.gml.Polygon.apply(this,[a,b])},exterior:function(a,
b){var c={};this.readChildNodes(a,c);b.outer=c.components[0]},interior:function(a,b){var c={};this.readChildNodes(a,c);b.inner.push(c.components[0])},MultiCurve:function(a,b){var c={components:[]};this.readChildNodes(a,c);0<c.components.length&&(b.components=[new OpenLayers.Geometry.MultiLineString(c.components)])},curveMember:function(a,b){this.readChildNodes(a,b)},MultiSurface:function(a,b){var c={components:[]};this.readChildNodes(a,c);0<c.components.length&&(b.components=[new OpenLayers.Geometry.MultiPolygon(c.components)])},
surfaceMember:function(a,b){this.readChildNodes(a,b)},surfaceMembers:function(a,b){this.readChildNodes(a,b)},pointMembers:function(a,b){this.readChildNodes(a,b)},lineStringMembers:function(a,b){this.readChildNodes(a,b)},polygonMembers:function(a,b){this.readChildNodes(a,b)},geometryMembers:function(a,b){this.readChildNodes(a,b)},Envelope:function(a,b){var c={points:Array(2)};this.readChildNodes(a,c);b.components||(b.components=[]);var d=c.points[0],c=c.points[1];b.components.push(new OpenLayers.Bounds(d.x,
d.y,c.x,c.y))},lowerCorner:function(a,b){var c={};this.readers.gml.pos.apply(this,[a,c]);b.points[0]=c.points[0]},upperCorner:function(a,b){var c={};this.readers.gml.pos.apply(this,[a,c]);b.points[1]=c.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(a){var b;b=OpenLayers.Util.isArray(a)?"featureMembers":"featureMember";a=this.writeNode("gml:"+b,a);this.setAttributeNS(a,
this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(a){for(var b=this.createElementNSPlus("gml:featureMembers"),c=0,d=a.length;c<d;++c)this.writeNode("feature:_typeName",a[c],b);return b},Point:function(a){var b=this.createElementNSPlus("gml:Point");this.writeNode("pos",a,b);return b},pos:function(a){return this.createElementNSPlus("gml:pos",{value:this.xy?a.x+
" "+a.y:a.y+" "+a.x})},LineString:function(a){var b=this.createElementNSPlus("gml:LineString");this.writeNode("posList",a.components,b);return b},Curve:function(a){var b=this.createElementNSPlus("gml:Curve");this.writeNode("segments",a,b);return b},segments:function(a){var b=this.createElementNSPlus("gml:segments");this.writeNode("LineStringSegment",a,b);return b},LineStringSegment:function(a){var b=this.createElementNSPlus("gml:LineStringSegment");this.writeNode("posList",a.components,b);return b},
posList:function(a){for(var b=a.length,c=Array(b),d,e=0;e<b;++e)d=a[e],c[e]=this.xy?d.x+" "+d.y:d.y+" "+d.x;return this.createElementNSPlus("gml:posList",{value:c.join(" ")})},Surface:function(a){var b=this.createElementNSPlus("gml:Surface");this.writeNode("patches",a,b);return b},patches:function(a){var b=this.createElementNSPlus("gml:patches");this.writeNode("PolygonPatch",a,b);return b},PolygonPatch:function(a){var b=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});
this.writeNode("exterior",a.components[0],b);for(var c=1,d=a.components.length;c<d;++c)this.writeNode("interior",a.components[c],b);return b},Polygon:function(a){var b=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",a.components[0],b);for(var c=1,d=a.components.length;c<d;++c)this.writeNode("interior",a.components[c],b);return b},exterior:function(a){var b=this.createElementNSPlus("gml:exterior");this.writeNode("LinearRing",a,b);return b},interior:function(a){var b=this.createElementNSPlus("gml:interior");
this.writeNode("LinearRing",a,b);return b},LinearRing:function(a){var b=this.createElementNSPlus("gml:LinearRing");this.writeNode("posList",a.components,b);return b},MultiCurve:function(a){var b=this.createElementNSPlus("gml:MultiCurve");a=a.components||[a];for(var c=0,d=a.length;c<d;++c)this.writeNode("curveMember",a[c],b);return b},curveMember:function(a){var b=this.createElementNSPlus("gml:curveMember");this.curve?this.writeNode("Curve",a,b):this.writeNode("LineString",a,b);return b},MultiSurface:function(a){var b=
this.createElementNSPlus("gml:MultiSurface");a=a.components||[a];for(var c=0,d=a.length;c<d;++c)this.writeNode("surfaceMember",a[c],b);return b},surfaceMember:function(a){var b=this.createElementNSPlus("gml:surfaceMember");this.surface?this.writeNode("Surface",a,b):this.writeNode("Polygon",a,b);return b},Envelope:function(a){var b=this.createElementNSPlus("gml:Envelope");this.writeNode("lowerCorner",a,b);this.writeNode("upperCorner",a,b);this.srsName&&b.setAttribute("srsName",this.srsName);return b},
lowerCorner:function(a){return this.createElementNSPlus("gml:lowerCorner",{value:this.xy?a.left+" "+a.bottom:a.bottom+" "+a.left})},upperCorner:function(a){return this.createElementNSPlus("gml:upperCorner",{value:this.xy?a.right+" "+a.top:a.top+" "+a.right})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point",
"OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.curve?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":!1===this.multiCurve?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":!0===this.surface?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":!1===this.multiSurface?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"});
OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(a){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[a])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a,b){var c=a.getAttribute("matchCase"),c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:!("false"===c||"0"===c)});this.readChildNodes(a,
c);b.filters.push(c)},PropertyIsNotEqualTo:function(a,b){var c=a.getAttribute("matchCase"),c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:!("false"===c||"0"===c)});this.readChildNodes(a,c);b.filters.push(c)},PropertyIsLike:function(a,b){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(a,c);var d=a.getAttribute("wildCard"),e=a.getAttribute("singleChar"),f=a.getAttribute("escapeChar");c.value2regex(d,e,
f);b.filters.push(c)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:a.matchCase}});this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsNotEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",
{attributes:{matchCase:a.matchCase}});this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsLike:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:a.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});this.writeNode("PropertyName",a,b);this.writeNode("Literal",a.regex2value(),b);return b},BBOX:function(a){var b=this.createElementNSPlus("ogc:BBOX");a.property&&this.writeNode("PropertyName",a,b);var c=this.writeNode("gml:Envelope",
a.value);a.projection&&c.setAttribute("srsName",a.projection);b.appendChild(c);return b},SortBy:function(a){for(var b=this.createElementNSPlus("ogc:SortBy"),c=0,d=a.length;c<d;c++)this.writeNode("ogc:SortProperty",a[c],b);return b},SortProperty:function(a){var b=this.createElementNSPlus("ogc:SortProperty");this.writeNode("ogc:PropertyName",a,b);this.writeNode("ogc:SortOrder","DESC"==a.order?"DESC":"ASC",b);return b},SortOrder:function(a){return this.createElementNSPlus("ogc:SortOrder",{value:a})}},
OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(a,b){var c=this.createElementNSPlus("ogc:"+b);this.writeNode("PropertyName",a,c);if(a.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",a.value,c);else{var d;d=a.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",a.value).firstChild:this.writeNode("gml:Envelope",a.value);a.projection&&
d.setAttribute("srsName",a.projection);c.appendChild(d)}return c},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"});
OpenLayers.Format.WFST.v1_1_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0,OpenLayers.Format.WFST.v1,{version:"1.1.0",schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"},initialize:function(a){OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this,[a]);OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[a])},readNode:function(a,b,c){return OpenLayers.Format.GML.v3.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({FeatureCollection:function(a,
b){b.numberOfFeatures=parseInt(a.getAttribute("numberOfFeatures"));OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this,arguments)},TransactionResponse:function(a,b){b.insertIds=[];b.success=!1;this.readChildNodes(a,b)},TransactionSummary:function(a,b){b.success=!0},InsertResults:function(a,b){this.readChildNodes(a,b)},Feature:function(a,b){var c={fids:[]};this.readChildNodes(a,c);b.insertIds.push(c.fids[0])}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,
feature:OpenLayers.Format.GML.v3.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows},writers:{wfs:OpenLayers.Util.applyDefaults({GetFeature:function(a){var b=OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this,arguments);a&&this.setAttributes(b,{resultType:a.resultType,startIndex:a.startIndex,count:a.count});return b},Query:function(a){a=OpenLayers.Util.extend({featureNS:this.featureNS,
featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName},a);var b=a.featurePrefix,c=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(b?b+":":"")+a.featureType,srsName:a.srsName}});a.featureNS&&c.setAttribute("xmlns:"+b,a.featureNS);if(a.propertyNames)for(var b=0,d=a.propertyNames.length;b<d;b++)this.writeNode("wfs:PropertyName",{property:a.propertyNames[b]},c);a.filter&&(OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this,a.filter),this.writeNode("ogc:Filter",
a.filter,c));return c},PropertyName:function(a){return this.createElementNSPlus("wfs:PropertyName",{value:a.property})}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_1_0"});
OpenLayers.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",errorProperty:"service",CLASS_NAME:"OpenLayers.Format.WFSCapabilities"});
OpenLayers.Format.WFSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wfs:"http://www.opengis.net/wfs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},readers:{wfs:{WFS_Capabilities:function(a,b){this.readChildNodes(a,b)},
FeatureTypeList:function(a,b){b.featureTypeList={featureTypes:[]};this.readChildNodes(a,b.featureTypeList)},FeatureType:function(a,b){var c={};this.readChildNodes(a,c);b.featureTypes.push(c)},Name:function(a,b){var c=this.getChildValue(a);c&&(c=c.split(":"),b.name=c.pop(),0<c.length&&(b.featureNS=this.lookupNamespaceURI(a,c[0])))},Title:function(a,b){var c=this.getChildValue(a);c&&(b.title=c)},Abstract:function(a,b){var c=this.getChildValue(a);c&&(b["abstract"]=c)}}},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1"});
OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.controls=[];this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick);OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var a,b=this.controls.length-1;0<=b;b--)a=this.controls[b],a.events&&
a.events.un({activate:this.iconOn,deactivate:this.iconOff}),a.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var a,b=0,c=this.controls.length;b<c;b++)a=this.controls[b],(a===this.defaultControl||this.saveState&&this.activeState[a.id])&&a.activate();!0===this.saveState&&(this.defaultControl=null);this.redraw();return!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var a,
b=0,c=this.controls.length;b<c;b++)a=this.controls[b],this.activeState[a.id]=a.deactivate();this.redraw();return!0}return!1},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick);this.addControlsToMap(this.controls);return this.div},redraw:function(){for(var a=this.div.childNodes.length-1;0<=a;a--)this.div.removeChild(this.div.childNodes[a]);
this.div.innerHTML="";if(this.active)for(var a=0,b=this.controls.length;a<b;a++)this.div.appendChild(this.controls[a].panel_div)},activateControl:function(a){if(!this.active)return!1;if(a.type==OpenLayers.Control.TYPE_BUTTON)a.trigger();else if(a.type==OpenLayers.Control.TYPE_TOGGLE)a.active?a.deactivate():a.activate();else if(this.allowDepress&&a.active)a.deactivate();else{for(var b,c=0,d=this.controls.length;c<d;c++)b=this.controls[c],b==a||b.type!==OpenLayers.Control.TYPE_TOOL&&null!=b.type||b.deactivate();
a.activate()}},addControls:function(a){OpenLayers.Util.isArray(a)||(a=[a]);this.controls=this.controls.concat(a);for(var b=0,c=a.length;b<c;b++){var d=a[b],e=this.createControlMarkup(d);OpenLayers.Element.addClass(e,d.displayClass+"ItemInactive");OpenLayers.Element.addClass(e,"olButton");""==d.title||e.title||(e.title=d.title);d.panel_div=e}this.map&&(this.addControlsToMap(a),this.redraw())},createControlMarkup:function(a){return document.createElement("div")},addControlsToMap:function(a){for(var b,
c=0,d=a.length;c<d;c++)b=a[c],!0===b.autoActivate?(b.autoActivate=!1,this.map.addControl(b),b.autoActivate=!0):(this.map.addControl(b),b.deactivate()),b.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var a=this.panel_div;a.className=a.className.replace(RegExp("\\b("+this.displayClass+"Item)Inactive\\b"),"$1Active")},iconOff:function(){var a=this.panel_div;a.className=a.className.replace(RegExp("\\b("+this.displayClass+"Item)Active\\b"),"$1Inactive")},onButtonClick:function(a){var b=
this.controls;a=a.buttonElement;for(var c=b.length-1;0<=c;--c)if(b[c].panel_div===a){this.activateControl(b[c]);break}},getControlsBy:function(a,b){var c="function"==typeof b.test;return OpenLayers.Array.filter(this.controls,function(d){return d[a]==b||c&&b.test(d[a])})},getControlsByName:function(a){return this.getControlsBy("name",a)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},CLASS_NAME:"OpenLayers.Control.Panel"});
OpenLayers.Control.ZoomIn=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomIn()},CLASS_NAME:"OpenLayers.Control.ZoomIn"});OpenLayers.Control.ZoomOut=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomOut()},CLASS_NAME:"OpenLayers.Control.ZoomOut"});
OpenLayers.Control.ZoomToMaxExtent=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map&&this.map.zoomToMaxExtent()},CLASS_NAME:"OpenLayers.Control.ZoomToMaxExtent"});OpenLayers.Control.ZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new OpenLayers.Control.ZoomIn,new OpenLayers.Control.ZoomToMaxExtent,new OpenLayers.Control.ZoomOut])},CLASS_NAME:"OpenLayers.Control.ZoomPanel"});
OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(a,b,c,d){OpenLayers.Layer.prototype.initialize.apply(this,[a,d]);this.url=b;this.params||(this.params=OpenLayers.Util.extend({},c))},destroy:function(){this.params=this.url=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){null==a&&(a=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions()));
return a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setUrl:function(a){this.url=a},mergeNewParams:function(a){this.params=OpenLayers.Util.extend(this.params,a);a=this.redraw();null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"});return a},redraw:function(a){return a?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(a,b){for(var c=1,d=0,e=a.length;d<e;d++)c=c*a.charCodeAt(d)*this.URL_HASH_FACTOR,
c-=Math.floor(c);return b[Math.floor(c*b.length)]},getFullRequestString:function(a,b){var c=b||this.url,d=OpenLayers.Util.extend({},this.params),d=OpenLayers.Util.extend(d,a),e=OpenLayers.Util.getParameterString(d);OpenLayers.Util.isArray(c)&&(c=this.selectUrl(e,c));var e=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c)),f;for(f in d)f.toUpperCase()in e&&delete d[f];e=OpenLayers.Util.getParameterString(d);return OpenLayers.Util.urlAppend(c,e)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"});
OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(a,b,c,d,e,f){this.layer=a;this.position=b.clone();this.setBounds(c);this.url=d;e&&(this.size=e.clone());this.id=OpenLayers.Util.createUniqueID("Tile_");OpenLayers.Util.extend(this,f);this.events=new OpenLayers.Events(this);if(this.eventListeners instanceof Object)this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=
!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null;this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy();this.events=this.eventListeners=null},draw:function(a){a||this.clear();var b=this.shouldDraw();b&&!a&&(b=!1!==this.events.triggerEvent("beforedraw"));return b},shouldDraw:function(){var a=!1,b=this.layer.maxExtent;if(b){var c=this.layer.map,c=c.baseLayer.wrapDateLine&&c.getMaxExtent();this.bounds.intersectsBounds(b,
{inclusive:!1,worldBounds:c})&&(a=!0)}return a||this.layer.displayOutsideMaxExtent},setBounds:function(a){a=a.clone();if(this.layer.map.baseLayer.wrapDateLine){var b=this.layer.map.getMaxExtent(),c=this.layer.map.getResolution();a=a.wrapDateLine(b,{leftTolerance:c,rightTolerance:c})}this.bounds=a},moveTo:function(a,b,c){null==c&&(c=!0);this.setBounds(a);this.position=b.clone();c&&this.draw()},clear:function(a){},CLASS_NAME:"OpenLayers.Tile"});
OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(a,b,c,d,e,f){OpenLayers.Tile.prototype.initialize.apply(this,arguments);this.url=d;this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack();if(null!=this.maxGetUrlLength||
this.layer.gutter||this.layerAlphaHack)this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden";null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null);this.asyncRequestId=null;OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);a?(this.layer!=this.layer.map.baseLayer&&
this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.positionTile(),this.renderTile()):this.unload();return a},renderTile:function(){this.layer.div.appendChild(this.getTile());if(this.layer.async){var a=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(b){a==this.asyncRequestId&&(this.url=b,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),
this.initImage()},positionTile:function(){var a=this.getTile().style,b=this.frame?this.size:this.layer.getImageSize(this.bounds);a.left=this.position.x+"%";a.top=this.position.y+"%";a.width=b.w+"%";a.height=b.h+"%"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var a=this.imgDiv;if(a){OpenLayers.Event.stopObservingElement(a);var b=this.getTile();b.parentNode===this.layer.div&&this.layer.div.removeChild(b);this.setImgSrc();!0===this.layerAlphaHack&&(a.style.filter="");OpenLayers.Element.removeClass(a,
"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=document.createElement("img");this.imgDiv.className="olTileImage";this.imgDiv.galleryImg="no";var a=this.imgDiv.style;if(this.frame){var b=0,c=0;this.layer.gutter&&(b=this.layer.gutter/this.layer.tileSize.w*100,c=this.layer.gutter/this.layer.tileSize.h*100);a.left=-b+"%";a.top=-c+"%";a.width=2*b+100+"%";a.height=2*c+100+"%"}a.visibility="hidden";a.opacity=0;1>this.layer.opacity&&(a.filter="alpha(opacity="+
100*this.layer.opacity+")");a.position="absolute";this.layerAlphaHack&&(a.paddingTop=a.height,a.height="0",a.width="100%");this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},initImage:function(){this.events.triggerEvent(this._loadEvent);var a=this.getImage();if(this.url&&a.getAttribute("src")==this.url)this.onImageLoad();else{var b=OpenLayers.Function.bind(function(){OpenLayers.Event.stopObservingElement(a);OpenLayers.Event.observe(a,"load",OpenLayers.Function.bind(this.onImageLoad,
this));OpenLayers.Event.observe(a,"error",OpenLayers.Function.bind(this.onImageError,this));this.imageReloadAttempts=0;this.setImgSrc(this.url)},this);a.getAttribute("src")==this.blankImageUrl?b():(OpenLayers.Event.observe(a,"load",b),OpenLayers.Event.observe(a,"error",b),this.crossOriginKeyword&&a.removeAttribute("crossorigin"),a.src=this.blankImageUrl)}},setImgSrc:function(a){var b=this.imgDiv;b.style.visibility="hidden";b.style.opacity=0;a&&(this.crossOriginKeyword&&("data:"!==a.substr(0,5)?b.setAttribute("crossorigin",
this.crossOriginKeyword):b.removeAttribute("crossorigin")),b.src=a)},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var a;this.frame?(a=this.frame.cloneNode(!1),a.appendChild(this.imgDiv)):a=this.imgDiv;this.imgDiv=null;return a}},onImageLoad:function(){var a=this.imgDiv;OpenLayers.Event.stopObservingElement(a);a.style.visibility="inherit";a.style.opacity=this.layer.opacity;this.isLoading=!1;this.canvasContext=null;this.events.triggerEvent("loadend");
if(7>parseFloat(navigator.appVersion.split("MSIE")[1])&&this.layer&&this.layer.div){var b=document.createElement("span");b.style.display="none";var c=this.layer.div;c.appendChild(b);window.setTimeout(function(){b.parentNode===c&&b.parentNode.removeChild(b)},0)}!0===this.layerAlphaHack&&(a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='scale')")},onImageError:function(){var a=this.imgDiv;null!=a.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=
OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(a,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var a=document.createElement("canvas");a.width=this.size.w;a.height=this.size.h;this.canvasContext=a.getContext("2d");this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"});
OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:null,numLoadingTiles:0,tileLoadingDelay:85,serverResolutions:null,moveTimerId:null,deferMoveGriddedTiles:null,tileQueueId:null,tileQueue:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,
className:null,initialize:function(a,b,c,d){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments);this.grid=[];this.tileQueue=[];null===this.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500);null===this.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid");OpenLayers.Animation.isNative||(this.deferMoveGriddedTiles=OpenLayers.Function.bind(function(){this.moveGriddedTiles(!0);this.moveTimerId=null},this))},setMap:function(a){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,
a);OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(a){null!==this.moveTimerId&&(window.clearTimeout(this.moveTimerId),this.moveTimerId=null);this.clearTileQueue();null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null)},destroy:function(){this.removeBackBuffer();this.clearGrid();this.tileSize=this.grid=null;OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){this.clearTileQueue();if(this.grid){for(var a=
0,b=this.grid.length;a<b;a++)for(var c=this.grid[a],d=0,e=c.length;d<e;d++)this.destroyTile(c[d]);this.grid=[];this.gridResolution=null}},clone:function(a){null==a&&(a=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions()));a=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[a]);null!=this.tileSize&&(a.tileSize=this.tileSize.clone());a.grid=[];a.gridResolution=null;a.backBuffer=null;a.backBufferTimerId=null;a.tileQueue=[];a.tileQueueId=null;a.loading=!1;a.moveTimerId=null;
return a},moveTo:function(a,b,c){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments);a=a||this.map.getExtent();if(null!=a){var d=!this.grid.length||b,e=this.getTilesBounds(),f=this.map.getResolution(),g=this.getServerResolution(f);if(this.singleTile){if(d||!c&&!e.containsBounds(a))b&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),b&&"resize"!==this.transitionEffect||this.applyBackBuffer(g),this.initSingleTile(a)}else d=d||!e.intersectsBounds(a,{worldBounds:this.map.baseLayer.wrapDateLine&&
this.map.getMaxExtent()}),f!==g?(a=this.map.calculateBounds(null,g),d&&this.transformDiv(g/f)):(this.div.style.width="100%",this.div.style.height="100%",this.div.style.left="0%",this.div.style.top="0%"),d?(b&&"resize"===this.transitionEffect&&this.applyBackBuffer(g),this.initGriddedTiles(a)):this.moveGriddedTiles()}},getTileData:function(a){var b=null,c=a.lon,d=a.lat,e=this.grid.length;if(this.map&&e){var f=this.map.getResolution();a=this.tileSize.w;var g=this.tileSize.h,h=this.grid[0][0].bounds,
k=h.left,h=h.top;if(c<k&&this.map.baseLayer.wrapDateLine)var l=this.map.getMaxExtent().getWidth(),m=Math.ceil((k-c)/l),c=c+l*m;c=(c-k)/(f*a);d=(h-d)/(f*g);f=Math.floor(c);k=Math.floor(d);0<=k&&k<e&&(e=this.grid[k][f])&&(b={tile:e,i:Math.floor((c-f)*a),j:Math.floor((d-k)*g)})}return b},queueTileDraw:function(a){a=a.object;~OpenLayers.Util.indexOf(this.tileQueue,a)||this.tileQueue.push(a);this.tileQueueId||(this.tileQueueId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.drawTileFromQueue,
this),null,this.div));return!1},drawTileFromQueue:function(){0===this.tileQueue.length?this.clearTileQueue():this.tileQueue.shift().draw(!0)},clearTileQueue:function(){OpenLayers.Animation.stop(this.tileQueueId);this.tileQueueId=null;this.tileQueue=[]},destroyTile:function(a){this.removeTileMonitoringHooks(a);a.destroy()},getServerResolution:function(a){a=a||this.map.getResolution();if(this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,a)){var b,c;for(b=this.serverResolutions.length-
1;0<=b;b--)if(c=this.serverResolutions[b],c>a){a=c;break}if(-1===b)throw"no appropriate resolution in serverResolutions";}return a},getServerZoom:function(){var a=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,a):this.map.getZoomForResolution(a)+(this.zoomOffset||0)},transformDiv:function(a){this.div.style.width=100*a+"%";this.div.style.height=100*a+"%";var b=this.map.getSize(),c=parseInt(this.map.layerContainerDiv.style.left,10),d=(parseInt(this.map.layerContainerDiv.style.top,
10)-b.h/2)*(a-1);this.div.style.left=(c-b.w/2)*(a-1)+"%";this.div.style.top=d+"%"},getResolutionScale:function(){return parseInt(this.div.style.width,10)/100},applyBackBuffer:function(a){null!==this.backBufferTimerId&&this.removeBackBuffer();var b=this.backBuffer;if(!b){b=this.createBackBuffer();if(!b)return;this.div.insertBefore(b,this.div.firstChild);this.backBuffer=b;var c=this.grid[0][0].bounds;this.backBufferLonLat={lon:c.left,lat:c.top};this.backBufferResolution=this.gridResolution}var c=b.style,
d=this.backBufferResolution/a;c.width=100*d+"%";c.height=100*d+"%";a=this.getViewPortPxFromLonLat(this.backBufferLonLat,a);c=parseInt(this.map.layerContainerDiv.style.left,10);d=parseInt(this.map.layerContainerDiv.style.top,10);b.style.left=Math.round(a.x-c)+"%";b.style.top=Math.round(a.y-d)+"%"},createBackBuffer:function(){var a;if(0<this.grid.length){a=document.createElement("div");a.id=this.div.id+"_bb";a.className="olBackBuffer";a.style.position="absolute";a.style.width="100%";a.style.height=
"100%";for(var b=0,c=this.grid.length;b<c;b++)for(var d=0,e=this.grid[b].length;d<e;d++){var f=this.grid[b][d].createBackBuffer();f&&(f.style.top=b*this.tileSize.h+"%",f.style.left=d*this.tileSize.w+"%",a.appendChild(f))}}return a},removeBackBuffer:function(){this.backBuffer&&(this.div.removeChild(this.backBuffer),this.backBufferResolution=this.backBuffer=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(a,b){this.singleTile||
this.moveGriddedTiles()},setTileSize:function(a){this.singleTile&&(a=this.map.getSize(),a.h=parseInt(a.h*this.ratio),a.w=parseInt(a.w*this.ratio));OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[a])},getTilesBounds:function(){var a=null,b=this.grid.length;if(b)var a=this.grid[b-1][0].bounds,b=this.grid[0].length*a.getWidth(),c=this.grid.length*a.getHeight(),a=new OpenLayers.Bounds(a.left,a.bottom,a.left+b,a.bottom+c);return a},initSingleTile:function(a){this.clearTileQueue();var b=
a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio;b=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2);c=this.map.getLayerPxFromLonLat({lon:b.left,lat:b.top});this.grid.length||(this.grid[0]=[]);(a=this.grid[0][0])?a.moveTo(b,c):(a=this.addTile(b,c),this.addTileMonitoringHooks(a),a.draw(),this.grid[0][0]=a);this.removeExcessTiles(1,1);this.gridResolution=this.getServerResolution()},calculateGridLayout:function(a,b,c){var d=c*this.tileSize.w;c*=this.tileSize.h;var e=
a.left-b.lon,f=Math.floor(e/d)-this.buffer,e=-(e/d-f)*this.tileSize.w,f=b.lon+f*d;a=a.top-(b.lat+c);var g=Math.ceil(a/c)+this.buffer;return{tilelon:d,tilelat:c,tileoffsetlon:f,tileoffsetlat:b.lat+g*c,tileoffsetx:e,tileoffsety:-(g-a/c)*this.tileSize.h}},getTileOrigin:function(){var a=this.tileOrigin;if(!a)var a=this.getMaxExtent(),b={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],a=new OpenLayers.LonLat(a[b[0]],a[b[1]]);return a},initGriddedTiles:function(a){this.clearTileQueue();
var b=this.map.getSize(),c=Math.ceil(b.h/this.tileSize.h)+Math.max(1,2*this.buffer),b=Math.ceil(b.w/this.tileSize.w)+Math.max(1,2*this.buffer),d=this.getTileOrigin(),e=this.getServerResolution(),d=this.calculateGridLayout(a,d,e),e=Math.round(d.tileoffsetx),f=Math.round(d.tileoffsety),g=d.tileoffsetlon,h=d.tileoffsetlat,k=d.tilelon,l=d.tilelat,m=e,n=g,p=0,q=parseInt(this.map.layerContainerDiv.style.left),r=parseInt(this.map.layerContainerDiv.style.top),d=[],s=this.map.getCenter();do{var t=this.grid[p++];
t||(t=[],this.grid.push(t));var g=n,e=m,u=0;do{var v=new OpenLayers.Bounds(g,h,g+k,h+l),w=e,w=w-q,x=f,x=x-r,x=new OpenLayers.Pixel(w,x);(w=t[u++])?w.moveTo(v,x,!1):(w=this.addTile(v,x),this.addTileMonitoringHooks(w),t.push(w));v=v.getCenterLonLat();d.push({tile:w,distance:Math.pow(v.lon-s.lon,2)+Math.pow(v.lat-s.lat,2)});g+=k;e+=this.tileSize.w}while(g<=a.right+k*this.buffer||u<b);h-=l;f+=this.tileSize.h}while(h>=a.bottom-l*this.buffer||p<c);this.removeExcessTiles(p,u);this.gridResolution=this.getServerResolution();
d.sort(function(a,b){return a.distance-b.distance});a=0;for(c=d.length;a<c;++a)d[a].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(a,b){var c=new this.tileClass(this,b,a,null,this.tileSize,this.tileOptions);c.events.register("beforedraw",this,this.queueTileDraw);return c},addTileMonitoringHooks:function(a){a.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart"));this.events.triggerEvent("tileloadstart",{tile:a});this.numLoadingTiles++};
a.onLoadEnd=function(){this.numLoadingTiles--;this.events.triggerEvent("tileloaded",{tile:a});0===this.tileQueue.length&&0===this.numLoadingTiles&&(this.loading=!1,this.events.triggerEvent("loadend"),this.backBuffer&&(this.backBufferTimerId=window.setTimeout(OpenLayers.Function.bind(this.removeBackBuffer,this),this.removeBackBufferDelay)))};a.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:a})};a.events.on({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,loaderror:a.onLoadError,
scope:this})},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,loaderror:a.onLoadError,scope:this})},moveGriddedTiles:function(a){if(a||OpenLayers.Animation.isNative){a=this.buffer||1;for(var b=this.getResolutionScale();;){var c=this.grid[0][0].position.x*b+parseInt(this.div.style.left,10)+parseInt(this.map.layerContainerDiv.style.left),d=this.grid[0][0].position.y*b+parseInt(this.div.style.top,10)+parseInt(this.map.layerContainerDiv.style.top),
e=this.tileSize.w*b,f=this.tileSize.h*b;if(c>-e*(a-1))this.shiftColumn(!0);else if(c<-e*a)this.shiftColumn(!1);else if(d>-f*(a-1))this.shiftRow(!0);else if(d<-f*a)this.shiftRow(!1);else break}}else null!=this.moveTimerId&&window.clearTimeout(this.moveTimerId),this.moveTimerId=window.setTimeout(this.deferMoveGriddedTiles,this.tileLoadingDelay)},shiftRow:function(a){for(var b=this.grid,c=b[a?0:this.grid.length-1],d=this.getServerResolution(),e=a?-this.tileSize.h:this.tileSize.h,d=d*-e,f=a?b.pop():b.shift(),
g=0,h=c.length;g<h;g++){var k=c[g],l=k.bounds.clone(),k=k.position.clone();l.bottom+=d;l.top+=d;k.y+=e;f[g].moveTo(l,k)}a?b.unshift(f):b.push(f)},shiftColumn:function(a){for(var b=a?-this.tileSize.w:this.tileSize.w,c=this.getServerResolution()*b,d=0,e=this.grid.length;d<e;d++){var f=this.grid[d],g=f[a?0:f.length-1],h=g.bounds.clone(),g=g.position.clone();h.left+=c;h.right+=c;g.x+=b;var k=a?this.grid[d].pop():this.grid[d].shift();k.moveTo(h,g);a?f.unshift(k):f.push(k)}},removeExcessTiles:function(a,
b){for(;this.grid.length>a;)for(var c=this.grid.pop(),d=0,e=c.length;d<e;d++){var f=c[d];this.destroyTile(f)}for(;this.grid[0].length>b;)for(d=0,e=this.grid.length;d<e;d++)c=this.grid[d],f=c.pop(),this.destroyTile(f)},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(a){var b=this.maxExtent,c=this.getResolution(),d=c*this.tileSize.w,c=c*this.tileSize.h,e=this.getLonLatFromViewPortPx(a);a=b.left+d*Math.floor((e.lon-b.left)/d);b=b.bottom+c*Math.floor((e.lat-
b.bottom)/c);return new OpenLayers.Bounds(a,b,a+d,b+c)},CLASS_NAME:"OpenLayers.Layer.Grid"});
OpenLayers.Format.ArcXML=OpenLayers.Class(OpenLayers.Format.XML,{fontStyleKeys:"antialiasing blockout font fontcolor fontsize fontstyle glowing interval outline printmode shadow transparency".split(" "),request:null,response:null,initialize:function(a){this.request=new OpenLayers.Format.ArcXML.Request;this.response=new OpenLayers.Format.ArcXML.Response;if(a)if("feature"==a.requesttype){this.request.get_image=null;var b=this.request.get_feature.query;this.addCoordSys(b.featurecoordsys,a.featureCoordSys);
this.addCoordSys(b.filtercoordsys,a.filterCoordSys);a.polygon?(b.isspatial=!0,b.spatialfilter.polygon=a.polygon):a.envelope&&(b.isspatial=!0,b.spatialfilter.envelope={minx:0,miny:0,maxx:0,maxy:0},this.parseEnvelope(b.spatialfilter.envelope,a.envelope))}else"image"==a.requesttype?(this.request.get_feature=null,b=this.request.get_image.properties,this.parseEnvelope(b.envelope,a.envelope),this.addLayers(b.layerlist,a.layers),this.addImageSize(b.imagesize,a.tileSize),this.addCoordSys(b.featurecoordsys,
a.featureCoordSys),this.addCoordSys(b.filtercoordsys,a.filterCoordSys)):this.request=null;OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},parseEnvelope:function(a,b){b&&4==b.length&&(a.minx=b[0],a.miny=b[1],a.maxx=b[2],a.maxy=b[3])},addLayers:function(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c])},addImageSize:function(a,b){null!==b&&(a.width=b.w,a.height=b.h,a.printwidth=b.w,a.printheight=b.h)},addCoordSys:function(a,b){"string"==typeof b?(a.id=parseInt(b),a.string=b):"object"==typeof b&&
null!==b.proj&&(a.id=b.proj.srsProjNumber,a.string=b.proj.srsCode)},iserror:function(a){var b=null;a?(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]),a=a.documentElement.getElementsByTagName("ERROR"),b=null!==a&&0<a.length):b=""!==this.response.error;return b},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=null;a&&a.documentElement&&(b="ARCXML"==a.documentElement.nodeName?a.documentElement:a.documentElement.getElementsByTagName("ARCXML")[0]);
if(!b||"parsererror"===b.firstChild.nodeName){var c,d;try{c=a.firstChild.nodeValue,d=a.firstChild.childNodes[1].firstChild.nodeValue}catch(e){}throw{message:"Error parsing the ArcXML request",error:c,source:d};}return this.parseResponse(b)},write:function(a){a||(a=this.request);var b=this.createElementNS("","ARCXML");b.setAttribute("version","1.1");var c=this.createElementNS("","REQUEST");if(null!=a.get_image){var d=this.createElementNS("","GET_IMAGE");c.appendChild(d);var e=this.createElementNS("",
"PROPERTIES");d.appendChild(e);a=a.get_image.properties;null!=a.featurecoordsys&&(d=this.createElementNS("","FEATURECOORDSYS"),e.appendChild(d),0===a.featurecoordsys.id?d.setAttribute("string",a.featurecoordsys.string):d.setAttribute("id",a.featurecoordsys.id));null!=a.filtercoordsys&&(d=this.createElementNS("","FILTERCOORDSYS"),e.appendChild(d),0===a.filtercoordsys.id?d.setAttribute("string",a.filtercoordsys.string):d.setAttribute("id",a.filtercoordsys.id));null!=a.envelope&&(d=this.createElementNS("",
"ENVELOPE"),e.appendChild(d),d.setAttribute("minx",a.envelope.minx),d.setAttribute("miny",a.envelope.miny),d.setAttribute("maxx",a.envelope.maxx),d.setAttribute("maxy",a.envelope.maxy));d=this.createElementNS("","IMAGESIZE");e.appendChild(d);d.setAttribute("height",a.imagesize.height);d.setAttribute("width",a.imagesize.width);if(a.imagesize.height!=a.imagesize.printheight||a.imagesize.width!=a.imagesize.printwidth)d.setAttribute("printheight",a.imagesize.printheight),d.setArrtibute("printwidth",a.imagesize.printwidth);
null!=a.background&&(d=this.createElementNS("","BACKGROUND"),e.appendChild(d),d.setAttribute("color",a.background.color.r+","+a.background.color.g+","+a.background.color.b),null!==a.background.transcolor&&d.setAttribute("transcolor",a.background.transcolor.r+","+a.background.transcolor.g+","+a.background.transcolor.b));if(null!=a.layerlist&&0<a.layerlist.length)for(d=this.createElementNS("","LAYERLIST"),e.appendChild(d),e=0;e<a.layerlist.length;e++){var f=this.createElementNS("","LAYERDEF");d.appendChild(f);
f.setAttribute("id",a.layerlist[e].id);f.setAttribute("visible",a.layerlist[e].visible);if("object"==typeof a.layerlist[e].query){var g=a.layerlist[e].query;if(0>g.where.length)continue;var h=null,h="boolean"==typeof g.spatialfilter&&g.spatialfilter?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY");h.setAttribute("where",g.where);"number"==typeof g.accuracy&&0<g.accuracy&&h.setAttribute("accuracy",g.accuracy);"number"==typeof g.featurelimit&&2E3>g.featurelimit&&h.setAttribute("featurelimit",
g.featurelimit);"string"==typeof g.subfields&&"#ALL#"!=g.subfields&&h.setAttribute("subfields",g.subfields);"string"==typeof g.joinexpression&&0<g.joinexpression.length&&h.setAttribute("joinexpression",g.joinexpression);"string"==typeof g.jointables&&0<g.jointables.length&&h.setAttribute("jointables",g.jointables);f.appendChild(h)}"object"==typeof a.layerlist[e].renderer&&this.addRenderer(f,a.layerlist[e].renderer)}}else null!=a.get_feature&&(d=this.createElementNS("","GET_FEATURES"),d.setAttribute("outputmode",
"newxml"),d.setAttribute("checkesc","true"),a.get_feature.geometry?d.setAttribute("geometry",a.get_feature.geometry):d.setAttribute("geometry","false"),a.get_feature.compact&&d.setAttribute("compact",a.get_feature.compact),"number"==a.get_feature.featurelimit&&d.setAttribute("featurelimit",a.get_feature.featurelimit),d.setAttribute("globalenvelope","true"),c.appendChild(d),null!=a.get_feature.layer&&0<a.get_feature.layer.length&&(e=this.createElementNS("","LAYER"),e.setAttribute("id",a.get_feature.layer),
d.appendChild(e)),a=a.get_feature.query,null!=a&&(e=null,e=a.isspatial?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),d.appendChild(e),"number"==typeof a.accuracy&&e.setAttribute("accuracy",a.accuracy),null!=a.featurecoordsys&&(d=this.createElementNS("","FEATURECOORDSYS"),0==a.featurecoordsys.id?d.setAttribute("string",a.featurecoordsys.string):d.setAttribute("id",a.featurecoordsys.id),e.appendChild(d)),null!=a.filtercoordsys&&(d=this.createElementNS("","FILTERCOORDSYS"),
0===a.filtercoordsys.id?d.setAttribute("string",a.filtercoordsys.string):d.setAttribute("id",a.filtercoordsys.id),e.appendChild(d)),0<a.buffer&&(d=this.createElementNS("","BUFFER"),d.setAttribute("distance",a.buffer),e.appendChild(d)),a.isspatial&&(d=this.createElementNS("","SPATIALFILTER"),d.setAttribute("relation",a.spatialfilter.relation),e.appendChild(d),a.spatialfilter.envelope?(f=this.createElementNS("","ENVELOPE"),f.setAttribute("minx",a.spatialfilter.envelope.minx),f.setAttribute("miny",a.spatialfilter.envelope.miny),
f.setAttribute("maxx",a.spatialfilter.envelope.maxx),f.setAttribute("maxy",a.spatialfilter.envelope.maxy),d.appendChild(f)):"object"==typeof a.spatialfilter.polygon&&d.appendChild(this.writePolygonGeometry(a.spatialfilter.polygon))),null!=a.where&&0<a.where.length&&e.setAttribute("where",a.where)));b.appendChild(c);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},addGroupRenderer:function(a,b){var c=this.createElementNS("","GROUPRENDERER");a.appendChild(c);for(var d=0;d<b.length;d++)this.addRenderer(c,
b[d])},addRenderer:function(a,b){if(OpenLayers.Util.isArray(b))this.addGroupRenderer(a,b);else{var c=this.createElementNS("",b.type.toUpperCase()+"RENDERER");a.appendChild(c);"VALUEMAPRENDERER"==c.tagName?this.addValueMapRenderer(c,b):"VALUEMAPLABELRENDERER"==c.tagName?this.addValueMapLabelRenderer(c,b):"SIMPLELABELRENDERER"==c.tagName?this.addSimpleLabelRenderer(c,b):"SCALEDEPENDENTRENDERER"==c.tagName&&this.addScaleDependentRenderer(c,b)}},addScaleDependentRenderer:function(a,b){"string"!=typeof b.lower&&
"number"!=typeof b.lower||a.setAttribute("lower",b.lower);"string"!=typeof b.upper&&"number"!=typeof b.upper||a.setAttribute("upper",b.upper);this.addRenderer(a,b.renderer)},addValueMapLabelRenderer:function(a,b){a.setAttribute("lookupfield",b.lookupfield);a.setAttribute("labelfield",b.labelfield);if("object"==typeof b.exacts)for(var c=0,d=b.exacts.length;c<d;c++){var e=b.exacts[c],f=this.createElementNS("","EXACT");"string"==typeof e.value&&f.setAttribute("value",e.value);"string"==typeof e.label&&
f.setAttribute("label",e.label);"string"==typeof e.method&&f.setAttribute("method",e.method);a.appendChild(f);if("object"==typeof e.symbol){var g=null;"text"==e.symbol.type&&(g=this.createElementNS("","TEXTSYMBOL"));if(null!=g){for(var h=this.fontStyleKeys,k=0,l=h.length;k<l;k++){var m=h[k];e.symbol[m]&&g.setAttribute(m,e.symbol[m])}f.appendChild(g)}}}},addValueMapRenderer:function(a,b){a.setAttribute("lookupfield",b.lookupfield);if("object"==typeof b.ranges)for(var c=0,d=b.ranges.length;c<d;c++){var e=
b.ranges[c],f=this.createElementNS("","RANGE");f.setAttribute("lower",e.lower);f.setAttribute("upper",e.upper);a.appendChild(f);if("object"==typeof e.symbol){var g=null;"simplepolygon"==e.symbol.type&&(g=this.createElementNS("","SIMPLEPOLYGONSYMBOL"));null!=g&&("string"==typeof e.symbol.boundarycolor&&g.setAttribute("boundarycolor",e.symbol.boundarycolor),"string"==typeof e.symbol.fillcolor&&g.setAttribute("fillcolor",e.symbol.fillcolor),"number"==typeof e.symbol.filltransparency&&g.setAttribute("filltransparency",
e.symbol.filltransparency),f.appendChild(g))}}else if("object"==typeof b.exacts)for(c=0,d=b.exacts.length;c<d;c++)e=b.exacts[c],f=this.createElementNS("","EXACT"),"string"==typeof e.value&&f.setAttribute("value",e.value),"string"==typeof e.label&&f.setAttribute("label",e.label),"string"==typeof e.method&&f.setAttribute("method",e.method),a.appendChild(f),"object"==typeof e.symbol&&(g=null,"simplemarker"==e.symbol.type&&(g=this.createElementNS("","SIMPLEMARKERSYMBOL")),null!=g&&("string"==typeof e.symbol.antialiasing&&
g.setAttribute("antialiasing",e.symbol.antialiasing),"string"==typeof e.symbol.color&&g.setAttribute("color",e.symbol.color),"string"==typeof e.symbol.outline&&g.setAttribute("outline",e.symbol.outline),"string"==typeof e.symbol.overlap&&g.setAttribute("overlap",e.symbol.overlap),"string"==typeof e.symbol.shadow&&g.setAttribute("shadow",e.symbol.shadow),"number"==typeof e.symbol.transparency&&g.setAttribute("transparency",e.symbol.transparency),"string"==typeof e.symbol.usecentroid&&g.setAttribute("usecentroid",
e.symbol.usecentroid),"number"==typeof e.symbol.width&&g.setAttribute("width",e.symbol.width),f.appendChild(g)))},addSimpleLabelRenderer:function(a,b){a.setAttribute("field",b.field);for(var c="featureweight howmanylabels labelbufferratio labelpriorities labelweight linelabelposition rotationalangles".split(" "),d=0,e=c.length;d<e;d++){var f=c[d];b[f]&&a.setAttribute(f,b[f])}if("text"==b.symbol.type){var g=b.symbol,h=this.createElementNS("","TEXTSYMBOL");a.appendChild(h);c=this.fontStyleKeys;d=0;
for(e=c.length;d<e;d++)f=c[d],g[f]&&h.setAttribute(f,b[f])}},writePolygonGeometry:function(a){if(!(a instanceof OpenLayers.Geometry.Polygon))throw{message:"Cannot write polygon geometry to ArcXML with an "+a.CLASS_NAME+" object.",geometry:a};for(var b=this.createElementNS("","POLYGON"),c=0,d=a.components.length;c<d;c++){for(var e=a.components[c],f=this.createElementNS("","RING"),g=0,h=e.components.length;g<h;g++){var k=e.components[g],l=this.createElementNS("","POINT");l.setAttribute("x",k.x);l.setAttribute("y",
k.y);f.appendChild(l)}b.appendChild(f)}return b},parseResponse:function(a){"string"==typeof a&&(a=(new OpenLayers.Format.XML).read(a));var b=new OpenLayers.Format.ArcXML.Response,c=a.getElementsByTagName("ERROR");if(null!=c&&0<c.length)b.error=this.getChildValue(c,"Unknown error.");else{c=a.getElementsByTagName("RESPONSE");if(null==c||0==c.length)return b.error="No RESPONSE tag found in ArcXML response.",b;var d=c[0].firstChild.nodeName;"#text"==d&&(d=c[0].firstChild.nextSibling.nodeName);if("IMAGE"==
d)c=a.getElementsByTagName("ENVELOPE"),a=a.getElementsByTagName("OUTPUT"),null==c||0==c.length?b.error="No ENVELOPE tag found in ArcXML response.":null==a||0==a.length?b.error="No OUTPUT tag found in ArcXML response.":(c=this.parseAttributes(c[0]),d=this.parseAttributes(a[0]),b.image="string"==typeof d.type?{envelope:c,output:{type:d.type,data:this.getChildValue(a[0])}}:{envelope:c,output:d});else if("FEATURES"==d){if(a=c[0].getElementsByTagName("FEATURES"),c=a[0].getElementsByTagName("FEATURECOUNT"),
b.features.featurecount=c[0].getAttribute("count"),0<b.features.featurecount)for(c=a[0].getElementsByTagName("ENVELOPE"),b.features.envelope=this.parseAttributes(c[0],"number"),a=a[0].getElementsByTagName("FEATURE"),c=0;c<a.length;c++){for(var d=new OpenLayers.Feature.Vector,e=a[c].getElementsByTagName("FIELD"),f=0;f<e.length;f++){var g=e[f].getAttribute("name"),h=e[f].getAttribute("value");d.attributes[g]=h}e=a[c].getElementsByTagName("POLYGON");if(0<e.length){e=e[0].getElementsByTagName("RING");
f=[];for(g=0;g<e.length;g++){h=[];h.push(this.parsePointGeometry(e[g]));for(var k=e[g].getElementsByTagName("HOLE"),l=0;l<k.length;l++)h.push(this.parsePointGeometry(k[l]));f.push(new OpenLayers.Geometry.Polygon(h))}d.geometry=1==f.length?f[0]:new OpenLayers.Geometry.MultiPolygon(f)}b.features.feature.push(d)}}else b.error="Unidentified response type."}return b},parseAttributes:function(a,b){for(var c={},d=0;d<a.attributes.length;d++)c[a.attributes[d].nodeName]="number"==b?parseFloat(a.attributes[d].nodeValue):
a.attributes[d].nodeValue;return c},parsePointGeometry:function(a){var b=[],c=a.getElementsByTagName("COORDS");if(0<c.length)for(a=this.getChildValue(c[0]),a=a.split(/;/),c=0;c<a.length;c++){var d=a[c].split(/ /);b.push(new OpenLayers.Geometry.Point(d[0],d[1]))}else if(a=a.getElementsByTagName("POINT"),0<a.length)for(c=0;c<a.length;c++)b.push(new OpenLayers.Geometry.Point(parseFloat(a[c].getAttribute("x")),parseFloat(a[c].getAttribute("y"))));return new OpenLayers.Geometry.LinearRing(b)},CLASS_NAME:"OpenLayers.Format.ArcXML"});
OpenLayers.Format.ArcXML.Request=OpenLayers.Class({initialize:function(a){return OpenLayers.Util.extend(this,{get_image:{properties:{background:null,draw:!0,envelope:{minx:0,miny:0,maxx:0,maxy:0},featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},imagesize:{height:0,width:0,dpi:96,printheight:0,printwidth:0,scalesymbols:!1},layerlist:[],output:{baseurl:"",legendbaseurl:"",legendname:"",legendpath:"",
legendurl:"",name:"",path:"",type:"jpg",url:""}}},get_feature:{layer:"",query:{isspatial:!1,featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},buffer:0,where:"",spatialfilter:{relation:"envelope_intersection",envelope:null}}},environment:{separators:{cs:" ",ts:";"}},layer:[],workspaces:[]})},CLASS_NAME:"OpenLayers.Format.ArcXML.Request"});
OpenLayers.Format.ArcXML.Response=OpenLayers.Class({initialize:function(a){return OpenLayers.Util.extend(this,{image:{envelope:null,output:""},features:{featurecount:0,envelope:null,feature:[]},error:""})},CLASS_NAME:"OpenLayers.Format.ArcXML.Response"});
OpenLayers.Layer.ArcIMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{ClientVersion:"9.2",ServiceName:""},featureCoordSys:"4326",filterCoordSys:"4326",layers:null,async:!0,name:"ArcIMS",isBaseLayer:!0,DEFAULT_OPTIONS:{tileSize:new OpenLayers.Size(512,512),featureCoordSys:"4326",filterCoordSys:"4326",layers:null,isBaseLayer:!0,async:!0,name:"ArcIMS"},initialize:function(a,b,c){this.tileSize=new OpenLayers.Size(512,512);this.params=OpenLayers.Util.applyDefaults({ServiceName:c.serviceName},
this.DEFAULT_PARAMS);this.options=OpenLayers.Util.applyDefaults(c,this.DEFAULT_OPTIONS);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,this.params,c]);this.transparent&&(this.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.format&&(this.format=OpenLayers.Util.alphaHack()?"image/gif":"image/png"));null===this.options.layers&&(this.options.layers=[])},getURL:function(a){var b="";a=this.adjustBounds(a);a=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",
envelope:a.toArray(),tileSize:this.tileSize}));a=new OpenLayers.Request.POST({url:this.getFullRequestString(),data:a.write(),async:!1});null!=a&&(b=a.responseXML,b&&b.documentElement||(b=a.responseText),b=(new OpenLayers.Format.ArcXML).read(b),b=this.getUrlOrImage(b.image.output));return b},getURLasync:function(a,b,c){a=this.adjustBounds(a);a=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:a.toArray(),tileSize:this.tileSize}));OpenLayers.Request.POST({url:this.getFullRequestString(),
async:!0,data:a.write(),callback:function(a){var e=a.responseXML;e&&e.documentElement||(e=a.responseText);a=(new OpenLayers.Format.ArcXML).read(e);b.call(c,this.getUrlOrImage(a.image.output))},scope:this})},getUrlOrImage:function(a){var b="";a.url?b=a.url:a.data&&(b="data:image/"+a.type+";base64,"+a.data);return b},setLayerQuery:function(a,b){for(var c=0;c<this.options.layers.length;c++)if(a==this.options.layers[c].id){this.options.layers[c].query=b;return}this.options.layers.push({id:a,visible:!0,
query:b})},getFeatureInfo:function(a,b,c){var d=c.buffer||1,e=c.callback||function(){},f=c.scope||window,g={};OpenLayers.Util.extend(g,this.options);g.requesttype="feature";a instanceof OpenLayers.LonLat?(g.polygon=null,g.envelope=[a.lon-d,a.lat-d,a.lon+d,a.lat+d]):a instanceof OpenLayers.Geometry.Polygon&&(g.envelope=null,g.polygon=a);var h=new OpenLayers.Format.ArcXML(g);OpenLayers.Util.extend(h.request.get_feature,c);h.request.get_feature.layer=b.id;"number"==typeof b.query.accuracy?h.request.get_feature.query.accuracy=
b.query.accuracy:(a=this.map.getCenter(),c=this.map.getViewPortPxFromLonLat(a),c.x++,c=this.map.getLonLatFromPixel(c),h.request.get_feature.query.accuracy=c.lon-a.lon);h.request.get_feature.query.where=b.query.where;h.request.get_feature.query.spatialfilter.relation="area_intersection";OpenLayers.Request.POST({url:this.getFullRequestString({CustomService:"Query"}),data:h.write(),callback:function(a){a=h.parseResponse(a.responseText);h.iserror()?e.call(f,null):e.call(f,a.features)}})},clone:function(a){null==
a&&(a=new OpenLayers.Layer.ArcIMS(this.name,this.url,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},CLASS_NAME:"OpenLayers.Layer.ArcIMS"});
OpenLayers.Format.OWSCommon.v1_1_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows/1.1",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(a,b){b.exceptionReport={version:a.getAttribute("version"),language:a.getAttribute("xml:lang"),exceptions:[]};this.readChildNodes(a,b.exceptionReport)},AllowedValues:function(a,b){b.allowedValues={};this.readChildNodes(a,b.allowedValues)},AnyValue:function(a,b){b.anyValue=
!0},DataType:function(a,b){b.dataType=this.getChildValue(a)},Range:function(a,b){b.range={};this.readChildNodes(a,b.range)},MinimumValue:function(a,b){b.minValue=this.getChildValue(a)},MaximumValue:function(a,b){b.maxValue=this.getChildValue(a)},Identifier:function(a,b){b.identifier=this.getChildValue(a)},SupportedCRS:function(a,b){b.supportedCRS=this.getChildValue(a)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Util.applyDefaults({Range:function(a){var b=this.createElementNSPlus("ows:Range",
{attributes:{"ows:rangeClosure":a.closure}});this.writeNode("ows:MinimumValue",a.minValue,b);this.writeNode("ows:MaximumValue",a.maxValue,b);return b},MinimumValue:function(a){return this.createElementNSPlus("ows:MinimumValue",{value:a})},MaximumValue:function(a){return this.createElementNSPlus("ows:MaximumValue",{value:a})},Value:function(a){return this.createElementNSPlus("ows:Value",{value:a})}},OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_1_0"});
OpenLayers.Format.WCSGetCoverage=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.1.2",schemaLocation:"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",write:function(a){a=this.writeNode("wcs:GetCoverage",
a);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{wcs:{GetCoverage:function(a){var b=this.createElementNSPlus("wcs:GetCoverage",{attributes:{version:a.version||this.VERSION,service:"WCS"}});this.writeNode("ows:Identifier",a.identifier,b);this.writeNode("wcs:DomainSubset",a.domainSubset,b);this.writeNode("wcs:Output",a.output,b);return b},DomainSubset:function(a){var b=this.createElementNSPlus("wcs:DomainSubset",
{});this.writeNode("ows:BoundingBox",a.boundingBox,b);a.temporalSubset&&this.writeNode("wcs:TemporalSubset",a.temporalSubset,b);return b},TemporalSubset:function(a){for(var b=this.createElementNSPlus("wcs:TemporalSubset",{}),c=0,d=a.timePeriods.length;c<d;++c)this.writeNode("wcs:TimePeriod",a.timePeriods[c],b);return b},TimePeriod:function(a){var b=this.createElementNSPlus("wcs:TimePeriod",{});this.writeNode("wcs:BeginPosition",a.begin,b);this.writeNode("wcs:EndPosition",a.end,b);a.resolution&&this.writeNode("wcs:TimeResolution",
a.resolution,b);return b},BeginPosition:function(a){return this.createElementNSPlus("wcs:BeginPosition",{value:a})},EndPosition:function(a){return this.createElementNSPlus("wcs:EndPosition",{value:a})},TimeResolution:function(a){return this.createElementNSPlus("wcs:TimeResolution",{value:a})},Output:function(a){var b=this.createElementNSPlus("wcs:Output",{attributes:{format:a.format,store:a.store}});a.gridCRS&&this.writeNode("wcs:GridCRS",a.gridCRS,b);return b},GridCRS:function(a){var b=this.createElementNSPlus("wcs:GridCRS",
{});this.writeNode("wcs:GridBaseCRS",a.baseCRS,b);a.type&&this.writeNode("wcs:GridType",a.type,b);a.origin&&this.writeNode("wcs:GridOrigin",a.origin,b);this.writeNode("wcs:GridOffsets",a.offsets,b);a.CS&&this.writeNode("wcs:GridCS",a.CS,b);return b},GridBaseCRS:function(a){return this.createElementNSPlus("wcs:GridBaseCRS",{value:a})},GridOrigin:function(a){return this.createElementNSPlus("wcs:GridOrigin",{value:a})},GridType:function(a){return this.createElementNSPlus("wcs:GridType",{value:a})},GridOffsets:function(a){return this.createElementNSPlus("wcs:GridOffsets",
{value:a})},GridCS:function(a){return this.createElementNSPlus("wcs:GridCS",{value:a})}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WCSGetCoverage"});
OpenLayers.Format.WPSExecute=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",gml:"http://www.opengis.net/gml",wps:"http://www.opengis.net/wps/1.0.0",wfs:"http://www.opengis.net/wfs",ogc:"http://www.opengis.net/ogc",wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
schemaLocationAttr:function(a){},write:function(a){var b;window.ActiveXObject?this.xmldom=b=new ActiveXObject("Microsoft.XMLDOM"):b=document.implementation.createDocument("","",null);a=this.writeNode("wps:Execute",a,b);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{wps:{Execute:function(a){var b=this.createElementNSPlus("wps:Execute",{attributes:{version:this.VERSION,service:"WPS"}});this.writeNode("ows:Identifier",
a.identifier,b);this.writeNode("wps:DataInputs",a.dataInputs,b);this.writeNode("wps:ResponseForm",a.responseForm,b);return b},ResponseForm:function(a){var b=this.createElementNSPlus("wps:ResponseForm",{});a.rawDataOutput&&this.writeNode("wps:RawDataOutput",a.rawDataOutput,b);a.responseDocument&&this.writeNode("wps:ResponseDocument",a.responseDocument,b);return b},ResponseDocument:function(a){var b=this.createElementNSPlus("wps:ResponseDocument",{attributes:{storeExecuteResponse:a.storeExecuteResponse,
lineage:a.lineage,status:a.status}});a.output&&this.writeNode("wps:Output",a.output,b);return b},Output:function(a){var b=this.createElementNSPlus("wps:Output",{attributes:{asReference:a.asReference}});this.writeNode("ows:Identifier",a.identifier,b);this.writeNode("ows:Title",a.title,b);this.writeNode("ows:Abstract",a["abstract"],b);return b},RawDataOutput:function(a){var b=this.createElementNSPlus("wps:RawDataOutput",{attributes:{mimeType:a.mimeType}});this.writeNode("ows:Identifier",a.identifier,
b);return b},DataInputs:function(a){for(var b=this.createElementNSPlus("wps:DataInputs",{}),c=0,d=a.length;c<d;++c)this.writeNode("wps:Input",a[c],b);return b},Input:function(a){var b=this.createElementNSPlus("wps:Input",{});this.writeNode("ows:Identifier",a.identifier,b);a.title&&this.writeNode("ows:Title",a.title,b);a.data&&this.writeNode("wps:Data",a.data,b);a.reference&&this.writeNode("wps:Reference",a.reference,b);a.boundingBoxData&&this.writeNode("wps:BoundingBoxData",a.boundingBoxData,b);return b},
Data:function(a){var b=this.createElementNSPlus("wps:Data",{});a.literalData?this.writeNode("wps:LiteralData",a.literalData,b):a.complexData&&this.writeNode("wps:ComplexData",a.complexData,b);return b},LiteralData:function(a){return this.createElementNSPlus("wps:LiteralData",{attributes:{uom:a.uom},value:a.value})},ComplexData:function(a){var b=this.createElementNSPlus("wps:ComplexData",{attributes:{mimeType:a.mimeType,encoding:a.encoding,schema:a.schema}}),c=a.value;"string"===typeof c?b.appendChild(this.getXMLDoc().createCDATASection(a.value)):
b.appendChild(c);return b},Reference:function(a){var b=this.createElementNSPlus("wps:Reference",{attributes:{mimeType:a.mimeType,"xlink:href":a.href,method:a.method,encoding:a.encoding,schema:a.schema}});a.body&&this.writeNode("wps:Body",a.body,b);return b},BoundingBoxData:function(a,b){this.writers.ows.BoundingBox.apply(this,[a,b,"wps:BoundingBoxData"])},Body:function(a){var b=this.createElementNSPlus("wps:Body",{});a.wcs?this.writeNode("wcs:GetCoverage",a.wcs,b):a.wfs?(this.featureType=a.wfs.featureType,
this.version=a.wfs.version,this.writeNode("wfs:GetFeature",a.wfs,b)):this.writeNode("wps:Execute",a,b);return b}},wcs:OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,wfs:OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WPSExecute"});
OpenLayers.Control.PanZoom=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,buttons:null,position:null,initialize:function(a){this.position=new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,OpenLayers.Control.PanZoom.Y);OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick);this.removeButtons();this.position=this.buttons=null;OpenLayers.Control.prototype.destroy.apply(this,arguments)},
setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(a){OpenLayers.Control.prototype.draw.apply(this,arguments);a=this.position;this.buttons=[];var b={w:18,h:18},c=new OpenLayers.Pixel(a.x+b.w/2,a.y);this._addButton("panup","north-mini.png",c,b);a.y=c.y+b.h;this._addButton("panleft","west-mini.png",a,b);this._addButton("panright","east-mini.png",a.add(b.w,0),b);this._addButton("pandown","south-mini.png",
c.add(0,2*b.h),b);this._addButton("zoomin","zoom-plus-mini.png",c.add(0,3*b.h+5),b);this._addButton("zoomworld","zoom-world-mini.png",c.add(0,4*b.h+5),b);this._addButton("zoomout","zoom-minus-mini.png",c.add(0,5*b.h+5),b);return this.div},_addButton:function(a,b,c,d){b=OpenLayers.Util.getImageLocation(b);c=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+a,c,d,b,"absolute");c.style.cursor="pointer";this.div.appendChild(c);c.action=a;c.className="olButton";this.buttons.push(c);return c},_removeButton:function(a){this.div.removeChild(a);
OpenLayers.Util.removeItem(this.buttons,a)},removeButtons:function(){for(var a=this.buttons.length-1;0<=a;--a)this._removeButton(this.buttons[a])},onButtonClick:function(a){switch(a.buttonElement.action){case "panup":this.map.pan(0,-this.getSlideFactor("h"));break;case "pandown":this.map.pan(0,this.getSlideFactor("h"));break;case "panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case "panright":this.map.pan(this.getSlideFactor("w"),0);break;case "zoomin":this.map.zoomIn();break;case "zoomout":this.map.zoomOut();
break;case "zoomworld":this.map.zoomToMaxExtent()}},getSlideFactor:function(a){return this.slideRatio?this.map.getSize()[a]*this.slideRatio:this.slideFactor},CLASS_NAME:"OpenLayers.Control.PanZoom"});OpenLayers.Control.PanZoom.X=4;OpenLayers.Control.PanZoom.Y=4;
OpenLayers.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoom,{zoomStopWidth:18,zoomStopHeight:11,slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,panIcons:!0,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,destroy:function(){this._removeZoomBar();this.map.events.un({changebaselayer:this.redraw,scope:this});OpenLayers.Control.PanZoom.prototype.destroy.apply(this,arguments);delete this.mouseDragStart;delete this.zoomStart},setMap:function(a){OpenLayers.Control.PanZoom.prototype.setMap.apply(this,
arguments);this.map.events.register("changebaselayer",this,this.redraw)},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar());this.draw()},draw:function(a){OpenLayers.Control.prototype.draw.apply(this,arguments);a=this.position.clone();this.buttons=[];var b={w:18,h:18};if(this.panIcons){var c=new OpenLayers.Pixel(a.x+b.w/2,a.y),d=b.w;this.zoomWorldIcon&&(c=new OpenLayers.Pixel(a.x+b.w,a.y));this._addButton("panup","north-mini.png",c,b);a.y=c.y+b.h;this._addButton("panleft",
"west-mini.png",a,b);this.zoomWorldIcon&&(this._addButton("zoomworld","zoom-world-mini.png",a.add(b.w,0),b),d*=2);this._addButton("panright","east-mini.png",a.add(d,0),b);this._addButton("pandown","south-mini.png",c.add(0,2*b.h),b);this._addButton("zoomin","zoom-plus-mini.png",c.add(0,3*b.h+5),b);c=this._addZoomBar(c.add(0,4*b.h+5));this._addButton("zoomout","zoom-minus-mini.png",c,b)}else this._addButton("zoomin","zoom-plus-mini.png",a,b),c=this._addZoomBar(a.add(0,b.h)),this._addButton("zoomout",
"zoom-minus-mini.png",c,b),this.zoomWorldIcon&&(c=c.add(0,b.h+3),this._addButton("zoomworld","zoom-world-mini.png",c,b));return this.div},_addZoomBar:function(a){var b=OpenLayers.Util.getImageLocation("slider.png"),c=this.id+"_"+this.map.id,d=this.map.getNumZoomLevels()-1-this.map.getZoom(),d=OpenLayers.Util.createAlphaImageDiv(c,a.add(-1,d*this.zoomStopHeight),{w:20,h:9},b,"absolute");d.style.cursor="move";this.slider=d;this.sliderEvents=new OpenLayers.Events(this,d,null,!0,{includeXY:!0});this.sliderEvents.on({touchstart:this.zoomBarDown,
touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});var e={w:this.zoomStopWidth,h:this.zoomStopHeight*this.map.getNumZoomLevels()},b=OpenLayers.Util.getImageLocation("zoombar.png"),c=null;OpenLayers.Util.alphaHack()?(c=this.id+"_"+this.map.id,c=OpenLayers.Util.createAlphaImageDiv(c,a,{w:e.w,h:this.zoomStopHeight},b,"absolute",null,"crop"),c.style.height=e.h+"px"):c=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+
this.map.id,a,e,b);c.style.cursor="pointer";c.className="olButton";this.zoombarDiv=c;this.div.appendChild(c);this.startTop=parseInt(c.style.top);this.div.appendChild(d);this.map.events.register("zoomend",this,this.moveZoomBar);return a=a.add(0,this.zoomStopHeight*this.map.getNumZoomLevels())},_removeZoomBar:function(){this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});this.sliderEvents.destroy();
this.div.removeChild(this.zoombarDiv);this.zoombarDiv=null;this.div.removeChild(this.slider);this.slider=null;this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(a){OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this,arguments);if(a.buttonElement===this.zoombarDiv){var b=a.buttonXY.y/this.zoomStopHeight;if(this.forceFixedZoomLevel||!this.map.fractionalZoom)b=Math.floor(b);b=this.map.getNumZoomLevels()-1-b;b=Math.min(Math.max(b,0),this.map.getNumZoomLevels()-
1);this.map.zoomTo(b)}},passEventToSlider:function(a){this.sliderEvents.handleBrowserEvent(a)},zoomBarDown:function(a){if(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=a.xy.clone(),this.zoomStart=a.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,OpenLayers.Event.stop(a)},zoomBarDrag:function(a){if(null!=this.mouseDragStart){var b=
this.mouseDragStart.y-a.xy.y,c=OpenLayers.Util.pagePosition(this.zoombarDiv);0<a.clientY-c[1]&&a.clientY-c[1]<parseInt(this.zoombarDiv.style.height)-2&&(b=parseInt(this.slider.style.top)-b,this.slider.style.top=b+"px",this.mouseDragStart=a.xy.clone());this.deltaY=this.zoomStart.y-a.xy.y;OpenLayers.Event.stop(a)}},zoomBarUp:function(a){if((OpenLayers.Event.isLeftClick(a)||"touchend"===a.type)&&this.mouseDragStart){this.div.style.cursor="";this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,
mousemove:this.passEventToSlider,scope:this});var b=this.map.zoom;!this.forceFixedZoomLevel&&this.map.fractionalZoom?(b+=this.deltaY/this.zoomStopHeight,b=Math.min(Math.max(b,0),this.map.getNumZoomLevels()-1)):(b+=this.deltaY/this.zoomStopHeight,b=Math.max(Math.round(b),0));this.map.zoomTo(b);this.zoomStart=this.mouseDragStart=null;this.deltaY=0;OpenLayers.Event.stop(a)}},moveZoomBar:function(){var a=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+1;this.slider.style.top=
a+"px"},CLASS_NAME:"OpenLayers.Control.PanZoomBar"});OpenLayers.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},readers:{wfs:OpenLayers.Util.applyDefaults({DefaultSRS:function(a,b){var c=this.getChildValue(a);c&&(b.srs=c)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),ows:OpenLayers.Format.OWSCommon.v1.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_1_0"});
OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!0,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(a,b,c,d,e){this.url=b;this.maxExtent=this.extent=c;this.size=d;OpenLayers.Layer.prototype.initialize.apply(this,[a,e]);this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){this.tile&&(this.removeTileMonitoringHooks(this.tile),this.tile.destroy(),this.tile=null);OpenLayers.Layer.prototype.destroy.apply(this,
arguments)},clone:function(a){null==a&&(a=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions()));return a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setMap:function(a){null==this.options.maxResolution&&(this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w);OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var d=null==this.tile;if(b||d){this.setTileSize();
var e=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top});d?(this.tile=new OpenLayers.Tile.Image(this,e,this.extent,null,this.tileSize),this.addTileMonitoringHooks(this.tile)):(this.tile.size=this.tileSize.clone(),this.tile.position=e.clone());this.tile.draw()}},setTileSize:function(){var a=this.extent.getWidth()/this.map.getResolution(),b=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(a,b)},addTileMonitoringHooks:function(a){a.onLoadStart=
function(){this.events.triggerEvent("loadstart")};a.events.register("loadstart",this,a.onLoadStart);a.onLoadEnd=function(){this.events.triggerEvent("loadend")};a.events.register("loadend",this,a.onLoadEnd);a.events.register("unload",this,a.onLoadEnd)},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,scope:this})},setUrl:function(a){this.url=a;this.tile.draw()},getURL:function(a){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"});
OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a;this.active=!1},destroy:function(){this.deactivate();this.options=this.layer=null},setLayer:function(a){this.layer=a},activate:function(){return this.active?!1:this.active=!0},deactivate:function(){return this.active?(this.active=!1,!0):!1},CLASS_NAME:"OpenLayers.Strategy"});
OpenLayers.Strategy.Save=OpenLayers.Class(OpenLayers.Strategy,{events:null,auto:!1,timer:null,initialize:function(a){OpenLayers.Strategy.prototype.initialize.apply(this,[a]);this.events=new OpenLayers.Events(this)},activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);if(a&&this.auto)if("number"===typeof this.auto)this.timer=window.setInterval(OpenLayers.Function.bind(this.save,this),1E3*this.auto);else this.layer.events.on({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,
scope:this});return a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&this.auto&&("number"===typeof this.auto?window.clearInterval(this.timer):this.layer.events.un({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this}));return a},triggerSave:function(a){var b=a.feature;b.state!==OpenLayers.State.INSERT&&b.state!==OpenLayers.State.UPDATE&&b.state!==OpenLayers.State.DELETE||this.save([a.feature])},save:function(a){a||(a=this.layer.features);
this.events.triggerEvent("start",{features:a});var b=this.layer.projection,c=this.layer.map.getProjectionObject();if(!c.equals(b)){for(var d=a.length,e=Array(d),f,g,h=0;h<d;++h)f=a[h],g=f.clone(),g.fid=f.fid,g.state=f.state,f.url&&(g.url=f.url),g._original=f,g.geometry.transform(c,b),e[h]=g;a=e}this.layer.protocol.commit(a,{callback:this.onCommit,scope:this})},onCommit:function(a){var b={response:a};if(a.success()){for(var c=a.reqFeatures,d,e=[],f=a.insertIds||[],g=0,h=0,k=c.length;h<k;++h)if(d=c[h],
d=d._original||d,a=d.state)a==OpenLayers.State.DELETE?e.push(d):a==OpenLayers.State.INSERT&&(d.fid=f[g],++g),d.state=null;0<e.length&&this.layer.destroyFeatures(e);this.events.triggerEvent("success",b)}else this.events.triggerEvent("fail",b)},CLASS_NAME:"OpenLayers.Strategy.Save"});
OpenLayers.Format.GPX=OpenLayers.Class(OpenLayers.Format.XML,{defaultDesc:"No description available",extractWaypoints:!0,extractTracks:!0,extractRoutes:!0,extractAttributes:!0,namespaces:{gpx:"http://www.topografix.com/GPX/1/1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",creator:"OpenLayers",initialize:function(a){this.externalProjection=new OpenLayers.Projection("EPSG:4326");OpenLayers.Format.XML.prototype.initialize.apply(this,
[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=[];if(this.extractTracks)for(var c=a.getElementsByTagName("trk"),d=0,e=c.length;d<e;d++){var f={};this.extractAttributes&&(f=this.parseAttributes(c[d]));for(var g=this.getElementsByTagNameNS(c[d],c[d].namespaceURI,"trkseg"),h=0,k=g.length;h<k;h++){var l=this.extractSegment(g[h],"trkpt");b.push(new OpenLayers.Feature.Vector(l,f))}}if(this.extractRoutes)for(e=a.getElementsByTagName("rte"),c=0,d=
e.length;c<d;c++)f={},this.extractAttributes&&(f=this.parseAttributes(e[c])),g=this.extractSegment(e[c],"rtept"),b.push(new OpenLayers.Feature.Vector(g,f));if(this.extractWaypoints)for(a=a.getElementsByTagName("wpt"),c=0,e=a.length;c<e;c++)f={},this.extractAttributes&&(f=this.parseAttributes(a[c])),d=new OpenLayers.Geometry.Point(a[c].getAttribute("lon"),a[c].getAttribute("lat")),b.push(new OpenLayers.Feature.Vector(d,f));if(this.internalProjection&&this.externalProjection)for(f=0,a=b.length;f<a;f++)b[f].geometry.transform(this.externalProjection,
this.internalProjection);return b},extractSegment:function(a,b){for(var c=this.getElementsByTagNameNS(a,a.namespaceURI,b),d=[],e=0,f=c.length;e<f;e++)d.push(new OpenLayers.Geometry.Point(c[e].getAttribute("lon"),c[e].getAttribute("lat")));return new OpenLayers.Geometry.LineString(d)},parseAttributes:function(a){var b={};a=a.firstChild;for(var c,d;a;)1==a.nodeType&&a.firstChild&&(c=a.firstChild,3==c.nodeType||4==c.nodeType)&&(d=a.prefix?a.nodeName.split(":")[1]:a.nodeName,"trkseg"!=d&&"rtept"!=d&&
(b[d]=c.nodeValue)),a=a.nextSibling;return b},write:function(a,b){a=OpenLayers.Util.isArray(a)?a:[a];var c=this.createElementNS(this.namespaces.gpx,"gpx");c.setAttribute("version","1.1");c.setAttribute("creator",this.creator);this.setAttributes(c,{"xsi:schemaLocation":this.schemaLocation});b&&"object"==typeof b&&c.appendChild(this.buildMetadataNode(b));for(var d=0,e=a.length;d<e;d++)c.appendChild(this.buildFeatureNode(a[d]));return OpenLayers.Format.XML.prototype.write.apply(this,[c])},buildMetadataNode:function(a){for(var b=
["name","desc","author"],c=this.createElementNSPlus("gpx:metadata"),d=0;d<b.length;d++){var e=b[d];if(a[e]){var f=this.createElementNSPlus("gpx:"+e);f.appendChild(this.createTextNode(a[e]));c.appendChild(f)}}return c},buildFeatureNode:function(a){var b=a.geometry,b=b.clone();this.internalProjection&&this.externalProjection&&b.transform(this.internalProjection,this.externalProjection);if("OpenLayers.Geometry.Point"==b.CLASS_NAME){var c=this.buildWptNode(b);this.appendAttributesNode(c,a);return c}c=
this.createElementNSPlus("gpx:trk");this.appendAttributesNode(c,a);a=this.buildTrkSegNode(b);a=OpenLayers.Util.isArray(a)?a:[a];for(var b=0,d=a.length;b<d;b++)c.appendChild(a[b]);return c},buildTrkSegNode:function(a){var b,c,d,e;if("OpenLayers.Geometry.LineString"==a.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==a.CLASS_NAME){b=this.createElementNSPlus("gpx:trkseg");c=0;for(d=a.components.length;c<d;c++)e=a.components[c],b.appendChild(this.buildTrkPtNode(e));return b}b=[];c=0;for(d=a.components.length;c<
d;c++)b.push(this.buildTrkSegNode(a.components[c]));return b},buildTrkPtNode:function(a){var b=this.createElementNSPlus("gpx:trkpt");b.setAttribute("lon",a.x);b.setAttribute("lat",a.y);return b},buildWptNode:function(a){var b=this.createElementNSPlus("gpx:wpt");b.setAttribute("lon",a.x);b.setAttribute("lat",a.y);return b},appendAttributesNode:function(a,b){var c=this.createElementNSPlus("gpx:name");c.appendChild(this.createTextNode(b.attributes.name||b.id));a.appendChild(c);c=this.createElementNSPlus("gpx:desc");
c.appendChild(this.createTextNode(b.attributes.description||this.defaultDesc));a.appendChild(c)},CLASS_NAME:"OpenLayers.Format.GPX"});
OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(a,b){var c=[],d={};this.readChildNodes(a,{complexTypes:c,customTypes:d});for(var e=a.attributes,f,g,h=0,k=e.length;h<k;++h)f=e[h],g=f.name,0==g.indexOf("xmlns")?this.setNamespace(g.split(":")[1]||"",f.value):b[g]=f.value;b.featureTypes=c;b.targetPrefix=this.namespaceAlias[b.targetNamespace];h=0;for(k=c.length;h<k;++h)e=c[h],f=d[e.typeName],
d[e.typeName]&&(e.typeName=f.name)},complexType:function(a,b){var c={typeName:a.getAttribute("name")};this.readChildNodes(a,c);b.complexTypes.push(c)},complexContent:function(a,b){this.readChildNodes(a,b)},extension:function(a,b){this.readChildNodes(a,b)},sequence:function(a,b){var c={elements:[]};this.readChildNodes(a,c);b.properties=c.elements},element:function(a,b){if(b.elements){for(var c={},d=a.attributes,e,f=0,g=d.length;f<g;++f)e=d[f],c[e.name]=e.value;d=c.type;d||(d={},this.readChildNodes(a,
d),c.restriction=d,c.type=d.base);c.localType=(d.base||d).split(":").pop();b.elements.push(c)}b.complexTypes&&(d=a.getAttribute("type"),c=d.split(":").pop(),b.customTypes[c]={name:a.getAttribute("name"),type:d})},simpleType:function(a,b){this.readChildNodes(a,b)},restriction:function(a,b){b.base=a.getAttribute("base");this.readRestriction(a,b)}}},readRestriction:function(a,b){for(var c=a.childNodes,d,e,f=0,g=c.length;f<g;++f)d=c[f],1==d.nodeType&&(e=d.nodeName.split(":").pop(),d=d.getAttribute("value"),
b[e]?("string"==typeof b[e]&&(b[e]=[b[e]]),b[e].push(d)):b[e]=d)},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"});
OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(a,b){this.container=OpenLayers.Util.getElement(a);OpenLayers.Util.extend(this,b)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(a,b){this.extent=a.clone();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var c=a.getWidth()/this.map.getExtent().getWidth();
a=a.scale(1/c);this.extent=a.wrapDateLine(this.map.getMaxExtent()).scale(c)}b&&(this.resolution=null);return!0},setSize:function(a){this.size=a.clone();this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(a,b){null==b&&(b=a.style);if(a.geometry){var c=a.geometry.getBounds();if(c){var d;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(d=this.map.getMaxExtent());c.intersectsBounds(this.extent,{worldBounds:d})?this.calculateFeatureDx(c,
d):b={display:"none"};c=this.drawGeometry(a.geometry,b,a.id);if("none"!=b.display&&b.label&&!1!==c){d=a.geometry.getCentroid();if(b.labelXOffset||b.labelYOffset){var e=isNaN(b.labelXOffset)?0:b.labelXOffset,f=isNaN(b.labelYOffset)?0:b.labelYOffset,g=this.getResolution();d.move(e*g,f*g)}this.drawText(a.id,b,d)}else this.removeText(a.id);return c}}},calculateFeatureDx:function(a,b){this.featureDx=0;if(b){var c=b.getWidth();this.featureDx=Math.round(((a.left+a.right)/2-(this.extent.left+this.extent.right)/
2)/c)*c}},drawGeometry:function(a,b,c){},drawText:function(a,b,c){},removeText:function(a){},clear:function(){},getFeatureIdFromEvent:function(a){},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;b<c;++b){var d=a[b];this.eraseGeometry(d.geometry,d.id);this.removeText(d.id)}},eraseGeometry:function(a,b){},moveRoot:function(a){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(a){var b=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);
!1===a.stroke&&(delete b.strokeWidth,delete b.strokeColor);!1===a.fill&&delete b.fillColor;OpenLayers.Util.extend(b,a);return b},CLASS_NAME:"OpenLayers.Renderer"});OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"};
OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]};
OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(a,b){OpenLayers.Renderer.prototype.initialize.apply(this,arguments);this.root=document.createElement("canvas");this.container.appendChild(this.root);this.canvas=this.root.getContext("2d");this.features={};this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},
setExtent:function(){OpenLayers.Renderer.prototype.setExtent.apply(this,arguments);return!1},eraseGeometry:function(a,b){this.eraseFeatures(this.features[b][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(a){this.size=a.clone();var b=this.root;b.style.width=a.w+"px";b.style.height=a.h+"px";b.width=a.w;b.height=a.h;this.resolution=null;this.hitDetection&&(b=this.hitCanvas,b.style.width=a.w+"px",b.style.height=a.h+"px",b.width=a.w,b.height=a.h)},drawFeature:function(a,
b){var c;if(a.geometry){b=this.applyDefaultSymbolizer(b||a.style);c=a.geometry.getBounds();var d;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(d=this.map.getMaxExtent());d=c&&c.intersectsBounds(this.extent,{worldBounds:d});(c="none"!==b.display&&!!c&&d)?this.features[a.id]=[a,b]:delete this.features[a.id];this.pendingRedraw=!0}this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1);return c},drawGeometry:function(a,b,c){var d=a.CLASS_NAME;if("OpenLayers.Geometry.Collection"==
d||"OpenLayers.Geometry.MultiPoint"==d||"OpenLayers.Geometry.MultiLineString"==d||"OpenLayers.Geometry.MultiPolygon"==d)for(d=0;d<a.components.length;d++)this.drawGeometry(a.components[d],b,c);else switch(a.CLASS_NAME){case "OpenLayers.Geometry.Point":this.drawPoint(a,b,c);break;case "OpenLayers.Geometry.LineString":this.drawLineString(a,b,c);break;case "OpenLayers.Geometry.LinearRing":this.drawLinearRing(a,b,c);break;case "OpenLayers.Geometry.Polygon":this.drawPolygon(a,b,c)}},drawExternalGraphic:function(a,
b,c){var d=new Image,e=b.title||b.graphicTitle;e&&(d.title=e);var f=b.graphicWidth||b.graphicHeight,g=b.graphicHeight||b.graphicWidth,f=f?f:2*b.pointRadius,g=g?g:2*b.pointRadius,h=void 0!=b.graphicXOffset?b.graphicXOffset:-(0.5*f),k=void 0!=b.graphicYOffset?b.graphicYOffset:-(0.5*g),l=b.graphicOpacity||b.fillOpacity;d.onload=OpenLayers.Function.bind(function(){if(this.features[c]){var b=this.getLocalXY(a),e=b[0],b=b[1];if(!isNaN(e)&&!isNaN(b)){var e=e+h|0,b=b+k|0,p=this.canvas;p.globalAlpha=l;var q=
OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);p.drawImage(d,e*q,b*q,f*q,g*q);this.hitDetection&&(this.setHitContextStyle("fill",c),this.hitContext.fillRect(e,b,f,g))}}},this);d.src=b.externalGraphic},drawNamedSymbol:function(a,b,c){var d,e,f,g;f=Math.PI/180;var h=OpenLayers.Renderer.symbol[b.graphicName];if(!h)throw Error(b.graphicName+" is not a valid symbol name");
if(!(!h.length||2>h.length||(a=this.getLocalXY(a),e=a[0],g=a[1],isNaN(e)||isNaN(g)))){this.canvas.lineCap="round";this.canvas.lineJoin="round";this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round");if(b.graphicName in this.cachedSymbolBounds)d=this.cachedSymbolBounds[b.graphicName];else{d=new OpenLayers.Bounds;for(a=0;a<h.length;a+=2)d.extend(new OpenLayers.LonLat(h[a],h[a+1]));this.cachedSymbolBounds[b.graphicName]=d}this.canvas.save();this.hitDetection&&this.hitContext.save();
this.canvas.translate(e,g);this.hitDetection&&this.hitContext.translate(e,g);a=f*b.rotation;isNaN(a)||(this.canvas.rotate(a),this.hitDetection&&this.hitContext.rotate(a));f=2*b.pointRadius/Math.max(d.getWidth(),d.getHeight());this.canvas.scale(f,f);this.hitDetection&&this.hitContext.scale(f,f);a=d.getCenterLonLat().lon;d=d.getCenterLonLat().lat;this.canvas.translate(-a,-d);this.hitDetection&&this.hitContext.translate(-a,-d);g=b.strokeWidth;b.strokeWidth=g/f;if(!1!==b.fill){this.setCanvasStyle("fill",
b);this.canvas.beginPath();for(a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.canvas.lineTo(d,e);this.canvas.closePath();this.canvas.fill();if(this.hitDetection){this.setHitContextStyle("fill",c,b);this.hitContext.beginPath();for(a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.hitContext.lineTo(d,e);this.hitContext.closePath();this.hitContext.fill()}}if(!1!==b.stroke){this.setCanvasStyle("stroke",b);this.canvas.beginPath();for(a=0;a<h.length;a+=2)d=h[a],
e=h[a+1],0==a&&this.canvas.moveTo(d,e),this.canvas.lineTo(d,e);this.canvas.closePath();this.canvas.stroke();if(this.hitDetection){this.setHitContextStyle("stroke",c,b,f);this.hitContext.beginPath();for(a=0;a<h.length;a+=2)d=h[a],e=h[a+1],0==a&&this.hitContext.moveTo(d,e),this.hitContext.lineTo(d,e);this.hitContext.closePath();this.hitContext.stroke()}}b.strokeWidth=g;this.canvas.restore();this.hitDetection&&this.hitContext.restore();this.setCanvasStyle("reset")}},setCanvasStyle:function(a,b){"fill"===
a?(this.canvas.globalAlpha=b.fillOpacity,this.canvas.fillStyle=b.fillColor):"stroke"===a?(this.canvas.globalAlpha=b.strokeOpacity,this.canvas.strokeStyle=b.strokeColor,this.canvas.lineWidth=b.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(a){a=Number(a.split("_").pop())+1;16777216<=a&&(this.hitOverflow=a-16777215,a=a%16777216+1);a="000000"+a.toString(16);var b=a.length;return a="#"+a.substring(b-6,b)},setHitContextStyle:function(a,b,c,d){b=this.featureIdToHex(b);
"fill"==a?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=b):"stroke"==a?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=b,"undefined"===typeof d?this.hitContext.lineWidth=c.strokeWidth+2:isNaN(d)||(this.hitContext.lineWidth=c.strokeWidth+2/d)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(a,b,c){if(!1!==b.graphic)if(b.externalGraphic)this.drawExternalGraphic(a,b,c);else if(b.graphicName&&"circle"!=b.graphicName)this.drawNamedSymbol(a,b,c);else{var d=
this.getLocalXY(a);a=d[0];d=d[1];if(!isNaN(a)&&!isNaN(d)){var e=2*Math.PI,f=b.pointRadius;!1!==b.fill&&(this.setCanvasStyle("fill",b),this.canvas.beginPath(),this.canvas.arc(a,d,f,0,e,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",c,b),this.hitContext.beginPath(),this.hitContext.arc(a,d,f,0,e,!0),this.hitContext.fill()));!1!==b.stroke&&(this.setCanvasStyle("stroke",b),this.canvas.beginPath(),this.canvas.arc(a,d,f,0,e,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",
c,b),this.hitContext.beginPath(),this.hitContext.arc(a,d,f,0,e,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(a,b,c){b=OpenLayers.Util.applyDefaults({fill:!1},b);this.drawLinearRing(a,b,c)},drawLinearRing:function(a,b,c){!1!==b.fill&&(this.setCanvasStyle("fill",b),this.renderPath(this.canvas,a,b,c,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",c,b),this.renderPath(this.hitContext,a,b,c,"fill")));!1!==b.stroke&&(this.setCanvasStyle("stroke",b),this.renderPath(this.canvas,
a,b,c,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",c,b),this.renderPath(this.hitContext,a,b,c,"stroke")));this.setCanvasStyle("reset")},renderPath:function(a,b,c,d,e){b=b.components;c=b.length;a.beginPath();d=this.getLocalXY(b[0]);var f=d[1];if(!isNaN(d[0])&&!isNaN(f)){a.moveTo(d[0],d[1]);for(d=1;d<c;++d)f=this.getLocalXY(b[d]),a.lineTo(f[0],f[1]);"fill"===e?a.fill():a.stroke()}},drawPolygon:function(a,b,c){a=a.components;var d=a.length;this.drawLinearRing(a[0],b,c);for(var e=1;e<
d;++e)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(a[e],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},b),c),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(a[e],OpenLayers.Util.applyDefaults({fill:!1},b),c)},drawText:function(a,b){var c=this.getLocalXY(a);this.setCanvasStyle("reset");
this.canvas.fillStyle=b.fontColor;this.canvas.globalAlpha=b.fontOpacity||1;var d=[b.fontStyle?b.fontStyle:"normal","normal",b.fontWeight?b.fontWeight:"normal",b.fontSize?b.fontSize:"1em",b.fontFamily?b.fontFamily:"sans-serif"].join(" "),e=b.label.split("\n"),f=e.length;if(this.canvas.fillText){this.canvas.font=d;this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[0]]||"center";this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[1]]||"middle";var g=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];
null==g&&(g=-0.5);d=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width;c[1]+=d*g*(f-1);for(g=0;g<f;g++)b.labelOutlineWidth&&(this.canvas.save(),this.canvas.strokeStyle=b.labelOutlineColor,this.canvas.lineWidth=b.labelOutlineWidth,this.canvas.strokeText(e[g],c[0],c[1]+d*g+1),this.canvas.restore()),this.canvas.fillText(e[g],c[0],c[1]+d*g)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=d;var h=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[0]];null==h&&(h=-0.5);
g=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];null==g&&(g=-0.5);d=this.canvas.mozMeasureText("xx");c[1]+=d*(1+g*f);for(g=0;g<f;g++){var k=c[0]+h*this.canvas.mozMeasureText(e[g]),l=c[1]+g*d;this.canvas.translate(k,l);this.canvas.mozDrawText(e[g]);this.canvas.translate(-k,-l)}}this.setCanvasStyle("reset")},getLocalXY:function(a){var b=this.getResolution(),c=this.extent;return[(a.x-this.featureDx)/b+-c.left/b,c.top/b-a.y/b]},clear:function(){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,
0,b,a);this.features={};this.hitDetection&&this.hitContext.clearRect(0,0,b,a)},getFeatureIdFromEvent:function(a){var b;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(a=a.xy,a=this.hitContext.getImageData(a.x|0,a.y|0,1,1).data,255===a[3]&&(a=a[2]+256*(a[1]+256*a[0])))){a="OpenLayers_Feature_Vector_"+(a-1+this.hitOverflow);try{b=this.features[a][0]}catch(c){}}return b},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b)delete this.features[a[b].id];
this.redraw()},redraw:function(){if(!this.locked){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,0,b,a);this.hitDetection&&this.hitContext.clearRect(0,0,b,a);var a=[],c,d,e=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent(),f;for(f in this.features)this.features.hasOwnProperty(f)&&(b=this.features[f][0],c=b.geometry,this.calculateFeatureDx(c.getBounds(),e),d=this.features[f][1],this.drawGeometry(c,d,b.id),d.label&&a.push([b,d]));b=0;for(c=a.length;b<c;++b)f=
a[b],this.drawText(f[0].geometry.getCentroid(),f[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"});OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"};OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1};OpenLayers.Renderer.Canvas.drawImageScaleFactor=null;
OpenLayers.Format.OSM=OpenLayers.Class(OpenLayers.Format.XML,{checkTags:!1,interestingTagsExclude:null,areaTags:null,initialize:function(a){var b={interestingTagsExclude:"source source_ref source:ref history attribution created_by".split(" "),areaTags:"area building leisure tourism ruins historic landuse military natural sport".split(" ")},b=OpenLayers.Util.extend(b,a),c={};for(a=0;a<b.interestingTagsExclude.length;a++)c[b.interestingTagsExclude[a]]=!0;b.interestingTagsExclude=c;c={};for(a=0;a<b.areaTags.length;a++)c[b.areaTags[a]]=
!0;b.areaTags=c;this.externalProjection=new OpenLayers.Projection("EPSG:4326");OpenLayers.Format.XML.prototype.initialize.apply(this,[b])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=this.getNodes(a),c=this.getWays(a);a=Array(c.length);for(var d=0;d<c.length;d++){for(var e=Array(c[d].nodes.length),f=this.isWayArea(c[d])?1:0,g=0;g<c[d].nodes.length;g++){var h=b[c[d].nodes[g]],k=new OpenLayers.Geometry.Point(h.lon,h.lat);k.osm_id=parseInt(c[d].nodes[g]);
e[g]=k;h.used=!0}h=null;h=f?new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(e)):new OpenLayers.Geometry.LineString(e);this.internalProjection&&this.externalProjection&&h.transform(this.externalProjection,this.internalProjection);e=new OpenLayers.Feature.Vector(h,c[d].tags);e.osm_id=parseInt(c[d].id);e.fid="way."+e.osm_id;a[d]=e}for(var l in b){h=b[l];if(!h.used||this.checkTags){c=null;if(this.checkTags){c=this.getTags(h.node,!0);if(h.used&&!c[1])continue;c=c[0]}else c=this.getTags(h.node);
e=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(h.lon,h.lat),c);this.internalProjection&&this.externalProjection&&e.geometry.transform(this.externalProjection,this.internalProjection);e.osm_id=parseInt(l);e.fid="node."+e.osm_id;a.push(e)}h.node=null}return a},getNodes:function(a){a=a.getElementsByTagName("node");for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.getAttribute("id");b[e]={lat:d.getAttribute("lat"),lon:d.getAttribute("lon"),node:d}}return b},getWays:function(a){a=a.getElementsByTagName("way");
for(var b=[],c=0;c<a.length;c++){var d=a[c],e={id:d.getAttribute("id")};e.tags=this.getTags(d);d=d.getElementsByTagName("nd");e.nodes=Array(d.length);for(var f=0;f<d.length;f++)e.nodes[f]=d[f].getAttribute("ref");b.push(e)}return b},getTags:function(a,b){for(var c=a.getElementsByTagName("tag"),d={},e=!1,f=0;f<c.length;f++){var g=c[f].getAttribute("k");d[g]=c[f].getAttribute("v");b&&(this.interestingTagsExclude[g]||(e=!0))}return b?[d,e]:d},isWayArea:function(a){var b=!1,c=!1;a.nodes[0]==a.nodes[a.nodes.length-
1]&&(b=!0);if(this.checkTags)for(var d in a.tags)if(this.areaTags[d]){c=!0;break}return b&&(this.checkTags?c:!0)},write:function(a){OpenLayers.Util.isArray(a)||(a=[a]);this.osm_id=1;this.created_nodes={};var b=this.createElementNS(null,"osm");b.setAttribute("version","0.5");b.setAttribute("generator","OpenLayers "+OpenLayers.VERSION_NUMBER);for(var c=a.length-1;0<=c;c--)for(var d=this.createFeatureNodes(a[c]),e=0;e<d.length;e++)b.appendChild(d[e]);return OpenLayers.Format.XML.prototype.write.apply(this,
[b])},createFeatureNodes:function(a){var b=[],c=a.geometry.CLASS_NAME,c=c.substring(c.lastIndexOf(".")+1),c=c.toLowerCase();(c=this.createXML[c])&&(b=c.apply(this,[a]));return b},createXML:{point:function(a){var b=null,c=a.geometry?a.geometry:a;this.internalProjection&&this.externalProjection&&(c=c.clone(),c.transform(this.internalProjection,this.externalProjection));var d=!1;a.osm_id?(b=a.osm_id,this.created_nodes[b]&&(d=!0)):(b=-this.osm_id,this.osm_id++);var e=d?this.created_nodes[b]:this.createElementNS(null,
"node");this.created_nodes[b]=e;e.setAttribute("id",b);e.setAttribute("lon",c.x);e.setAttribute("lat",c.y);a.attributes&&this.serializeTags(a,e);this.setState(a,e);return d?[]:[e]},linestring:function(a){var b,c=[],d=a.geometry;a.osm_id?b=a.osm_id:(b=-this.osm_id,this.osm_id++);var e=this.createElementNS(null,"way");e.setAttribute("id",b);for(b=0;b<d.components.length;b++){var f=this.createXML.point.apply(this,[d.components[b]]);if(f.length){var f=f[0],g=f.getAttribute("id");c.push(f)}else g=d.components[b].osm_id,
f=this.created_nodes[g];this.setState(a,f);f=this.createElementNS(null,"nd");f.setAttribute("ref",g);e.appendChild(f)}this.serializeTags(a,e);c.push(e);return c},polygon:function(a){var b=OpenLayers.Util.extend({area:"yes"},a.attributes),b=new OpenLayers.Feature.Vector(a.geometry.components[0],b);b.osm_id=a.osm_id;return this.createXML.linestring.apply(this,[b])}},serializeTags:function(a,b){for(var c in a.attributes){var d=this.createElementNS(null,"tag");d.setAttribute("k",c);d.setAttribute("v",
a.attributes[c]);b.appendChild(d)}},setState:function(a,b){if(a.state){var c=null;switch(a.state){case OpenLayers.State.UPDATE:case OpenLayers.State.DELETE:c="delete"}c&&b.setAttribute("action",c)}},CLASS_NAME:"OpenLayers.Format.OSM"});
OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,initialize:function(a,b,c){OpenLayers.Util.extend(this,c);this.control=a;this.callbacks=b;(a=this.map||a.map)&&this.setMap(a);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(a){this.map=a},checkModifiers:function(a){return null==this.keyMask?!0:((a.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(a.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(a.altKey?OpenLayers.Handler.MOD_ALT:0)|(a.metaKey?
OpenLayers.Handler.MOD_META:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.register(a[b],this[a[b]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.unregister(a[b],this[a[b]]);this.active=!1;return!0},callback:function(a,b){a&&this.callbacks[a]&&this.callbacks[a].apply(this.control,
b)},register:function(a,b){this.map.events.registerPriority(a,this,b);this.map.events.registerPriority(a,this,this.setEvent)},unregister:function(a,b){this.map.events.unregister(a,this,b);this.map.events.unregister(a,this,this.setEvent)},setEvent:function(a){this.evt=a;return!0},destroy:function(){this.deactivate();this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"});OpenLayers.Handler.MOD_NONE=0;OpenLayers.Handler.MOD_SHIFT=1;OpenLayers.Handler.MOD_CTRL=2;OpenLayers.Handler.MOD_ALT=4;
OpenLayers.Handler.MOD_META=8;
OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,touch:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments);if(!0===this.documentDrag){var d=this;this._docMove=function(a){d.mousemove({xy:{x:a.clientX,y:a.clientY},element:document})};this._docUp=function(a){d.mouseup({xy:{x:a.clientX,y:a.clientY}})}}},
dragstart:function(a){var b=!0;this.dragging=!1;this.checkModifiers(a)&&(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))?(this.started=!0,this.last=this.start=a.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(a),this.callback("down",[a.xy]),OpenLayers.Event.stop(a),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,b=!this.stopDown):(this.started=
!1,this.last=this.start=null);return b},dragmove:function(a){this.lastMoveEvt=a;!this.started||this.timeoutId||a.xy.x==this.last.x&&a.xy.y==this.last.y||(!0===this.documentDrag&&this.documentEvents&&(a.element===document?(this.adjustXY(a),this.setEvent(a)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(a),this.callback("move",[a.xy]),this.oldOnselectstart||(this.oldOnselectstart=
document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=a.xy);return!0},dragend:function(a){if(this.started){!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(a),this.removeDocumentEvents());var b=this.start!=this.last;this.dragging=this.started=!1;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.up(a);this.callback("up",[a.xy]);b&&this.callback("done",[a.xy]);document.onselectstart=this.oldOnselectstart}return!0},down:function(a){},move:function(a){},
up:function(a){},out:function(a){},mousedown:function(a){return this.dragstart(a)},touchstart:function(a){this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,scope:this}));return this.dragstart(a)},mousemove:function(a){return this.dragmove(a)},touchmove:function(a){return this.dragmove(a)},removeTimeout:function(){this.timeoutId=null;this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(a){return this.dragend(a)},
touchend:function(a){a.xy=this.last;return this.dragend(a)},mouseout:function(a){if(this.started&&OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv))if(!0===this.documentDrag)this.addDocumentEvents();else{var b=this.start!=this.last;this.dragging=this.started=!1;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.out(a);this.callback("out",[]);b&&this.callback("done",[a.xy]);document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(a){return this.start==
this.last},activate:function(){var a=!1;OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,a=!0);return a},deactivate:function(){var a=!1;OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=this.touch=!1,this.last=this.start=null,a=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"));return a},adjustXY:function(a){var b=OpenLayers.Util.pagePosition(this.map.viewPortDiv);a.xy.x-=b[0];a.xy.y-=b[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,
"olDragDown");this.documentEvents=!0;OpenLayers.Event.observe(document,"mousemove",this._docMove);OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown");this.documentEvents=!1;OpenLayers.Event.stopObserving(document,"mousemove",this._docMove);OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"});
OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,touch:!1,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(a,b,c,d){OpenLayers.Handler.prototype.initialize.apply(this,[a,c,d]);this.layer=
b},touchstart:function(a){this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,scope:this}));return OpenLayers.Event.isMultiTouch(a)?!0:this.mousedown(a)},touchmove:function(a){OpenLayers.Event.stop(a)},mousedown:function(a){if(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))this.down=a.xy;return this.handle(a)?!this.stopDown:!0},mouseup:function(a){this.up=a.xy;return this.handle(a)?
!this.stopUp:!0},click:function(a){return this.handle(a)?!this.stopClick:!0},mousemove:function(a){if(!this.callbacks.over&&!this.callbacks.out)return!0;this.handle(a);return!0},dblclick:function(a){return!this.handle(a)},geometryTypeMatches:function(a){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME)},handle:function(a){this.feature&&!this.feature.layer&&(this.feature=null);var b=a.type,c=!1,d=!!this.feature,e="click"==b||"dblclick"==b||"touchstart"==
b;(this.feature=this.layer.getFeatureFromEvent(a))&&!this.feature.layer&&(this.feature=null);this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null);this.feature?("touchstart"===b&&OpenLayers.Event.stop(a),a=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(d&&a?(this.lastFeature&&this.triggerCallback(b,"out",[this.lastFeature]),this.triggerCallback(b,"in",[this.feature])):d&&!e||this.triggerCallback(b,"in",[this.feature]),this.lastFeature=this.feature,c=!0):(this.lastFeature&&
(d&&a||e)&&this.triggerCallback(b,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(d||e)&&this.triggerCallback(b,"out",[this.lastFeature]);return c},triggerCallback:function(a,b,c){(b=this.EVENTMAP[a][b])&&("click"==a&&this.up&&this.down?Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(b,c):this.callback(b,c))},activate:function(){var a=!1;OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),
this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),a=!0);return a},deactivate:function(){var a=!1;OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.touch=!1,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),a=!0);return a},handleMapEvents:function(a){"removelayer"!=a.type&&"order"!=a.property||this.moveLayerToTop()},
moveLayerToTop:function(){var a=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(a)},moveLayerBack:function(){var a=this.layer.getZIndex()-1;a>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(a):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"});
OpenLayers.Control.DragFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,onStart:function(a,b){},onDrag:function(a,b){},onComplete:function(a,b){},onEnter:function(a){},onLeave:function(a){},documentDrag:!1,layer:null,feature:null,dragCallbacks:{},featureCallbacks:{},lastPixel:null,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);this.layer=a;this.handlers={drag:new OpenLayers.Handler.Drag(this,OpenLayers.Util.extend({down:this.downFeature,move:this.moveFeature,
up:this.upFeature,out:this.cancel,done:this.doneDragging},this.dragCallbacks),{documentDrag:this.documentDrag}),feature:new OpenLayers.Handler.Feature(this,this.layer,OpenLayers.Util.extend({click:this.clickFeature,clickout:this.clickoutFeature,over:this.overFeature,out:this.outFeature},this.featureCallbacks),{geometryTypes:this.geometryTypes})}},clickFeature:function(a){this.handlers.feature.touch&&!this.over&&this.overFeature(a)&&(this.handlers.drag.dragstart(this.handlers.feature.evt),this.handlers.drag.stopDown=
!1)},clickoutFeature:function(a){this.handlers.feature.touch&&this.over&&(this.outFeature(a),this.handlers.drag.stopDown=!0)},destroy:function(){this.layer=null;OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.handlers.feature.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.handlers.drag.deactivate();this.handlers.feature.deactivate();this.feature=null;this.dragging=!1;this.lastPixel=null;OpenLayers.Element.removeClass(this.map.viewPortDiv,
this.displayClass+"Over");return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},overFeature:function(a){var b=!1;this.handlers.drag.dragging?this.over=this.feature.id==a.id?!0:!1:(this.feature=a,this.handlers.drag.activate(),this.over=b=!0,OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onEnter(a));return b},downFeature:function(a){this.lastPixel=a;this.onStart(this.feature,a)},moveFeature:function(a){var b=this.map.getResolution();this.feature.geometry.move(b*
(a.x-this.lastPixel.x),b*(this.lastPixel.y-a.y));this.layer.drawFeature(this.feature);this.lastPixel=a;this.onDrag(this.feature,a)},upFeature:function(a){this.over||this.handlers.drag.deactivate()},doneDragging:function(a){this.onComplete(this.feature,a)},outFeature:function(a){this.handlers.drag.dragging?this.feature.id==a.id&&(this.over=!1):(this.over=!1,this.handlers.drag.deactivate(),OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onLeave(a),this.feature=null)},
cancel:function(){this.handlers.drag.deactivate();this.over=!1},setMap:function(a){this.handlers.drag.setMap(a);this.handlers.feature.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.DragFeature"});
OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(a,b){this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])};if(a instanceof OpenLayers.Style)this.styles["default"]=a,this.styles.select=a,this.styles.temporary=a,this.styles["delete"]=
a;else if("object"==typeof a)for(var c in a)if(a[c]instanceof OpenLayers.Style)this.styles[c]=a[c];else if("object"==typeof a[c])this.styles[c]=new OpenLayers.Style(a[c]);else{this.styles["default"]=new OpenLayers.Style(a);this.styles.select=new OpenLayers.Style(a);this.styles.temporary=new OpenLayers.Style(a);this.styles["delete"]=new OpenLayers.Style(a);break}OpenLayers.Util.extend(this,b)},destroy:function(){for(var a in this.styles)this.styles[a].destroy();this.styles=null},createSymbolizer:function(a,
b){a||(a=new OpenLayers.Feature.Vector);this.styles[b]||(b="default");a.renderIntent=b;var c={};this.extendDefault&&"default"!=b&&(c=this.styles["default"].createSymbolizer(a));return OpenLayers.Util.extend(c,this.styles[b].createSymbolizer(a))},addUniqueValueRules:function(a,b,c,d){var e=[],f;for(f in c)e.push(new OpenLayers.Rule({symbolizer:c[f],context:d,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:b,value:f})}));this.styles[a].addRules(e)},CLASS_NAME:"OpenLayers.StyleMap"});
OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(a,b){OpenLayers.Layer.prototype.initialize.apply(this,arguments);this.renderer&&this.renderer.supported()||this.assignRenderer();this.renderer&&this.renderer.supported()||
(this.renderer=null,this.displayError());this.styleMap||(this.styleMap=new OpenLayers.StyleMap);this.features=[];this.selectedFeatures=[];this.unrenderedFeatures={};if(this.strategies)for(var c=0,d=this.strategies.length;c<d;c++)this.strategies[c].setLayer(this)},destroy:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++)a=this.strategies[b],a.autoDestroy&&a.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=
null);this.destroyFeatures();this.unrenderedFeatures=this.selectedFeatures=this.features=null;this.renderer&&this.renderer.destroy();this.drawn=this.geometryType=this.renderer=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){null==a&&(a=new OpenLayers.Layer.Vector(this.name,this.getOptions()));a=OpenLayers.Layer.prototype.clone.apply(this,[a]);for(var b=this.features,c=b.length,d=Array(c),e=0;e<c;++e)d[e]=b[e].clone();a.features=d;return a},refresh:function(a){this.calculateInRange()&&
this.visibility&&this.events.triggerEvent("refresh",a)},assignRenderer:function(){for(var a=0,b=this.renderers.length;a<b;a++){var c=this.renderers[a];if((c="function"==typeof c?c:OpenLayers.Renderer[c])&&c.prototype.supported()){this.renderer=new c(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(a){OpenLayers.Layer.prototype.setMap.apply(this,
arguments);if(this.renderer){this.renderer.map=this.map;var b=this.map.getSize();b.w*=this.ratio;b.h*=this.ratio;this.renderer.setSize(b)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++)a=this.strategies[b],a.autoActivate&&a.activate()}},removeMap:function(a){this.drawn=!1;if(this.strategies){var b,c;b=0;for(c=this.strategies.length;b<c;b++)a=this.strategies[b],a.autoActivate&&a.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,
arguments);var a=this.map.getSize();a.w*=this.ratio;a.h*=this.ratio;this.renderer.setSize(a)},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var d=!0;if(!c){this.renderer.root.style.visibility="hidden";var d=this.map.getSize(),e=d.w,d=d.h,e=e/2*this.ratio-e/2,d=d/2*this.ratio-d/2,e=e+parseInt(this.map.layerContainerDiv.style.left,10),e=-Math.round(e),d=d+parseInt(this.map.layerContainerDiv.style.top,10),d=-Math.round(d);this.div.style.left=e+"px";this.div.style.top=
d+"px";e=this.map.getExtent().scale(this.ratio);d=this.renderer.setExtent(e,b);this.renderer.root.style.visibility="visible";!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft);if(!b&&d)for(var f in this.unrenderedFeatures)e=this.unrenderedFeatures[f],this.drawFeature(e)}if(!this.drawn||b||!d)for(this.drawn=!0,f=0,d=this.features.length;f<d;f++)this.renderer.locked=f!==d-1,e=this.features[f],this.drawFeature(e)},display:function(a){OpenLayers.Layer.prototype.display.apply(this,arguments);
var b=this.div.style.display;b!=this.renderer.root.style.display&&(this.renderer.root.style.display=b)},addFeatures:function(a,b){OpenLayers.Util.isArray(a)||(a=[a]);var c=!b||!b.silent;if(c){var d={features:a};if(!1===this.events.triggerEvent("beforefeaturesadded",d))return;a=d.features}for(var d=[],e=0,f=a.length;e<f;e++){this.renderer.locked=e!=a.length-1?!0:!1;var g=a[e];if(this.geometryType&&!(g.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+
this.geometryType.prototype.CLASS_NAME);g.layer=this;!g.style&&this.style&&(g.style=OpenLayers.Util.extend({},this.style));if(c){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:g}))continue;this.preFeatureInsert(g)}d.push(g);this.features.push(g);this.drawFeature(g);c&&(this.events.triggerEvent("featureadded",{feature:g}),this.onFeatureInsert(g))}c&&this.events.triggerEvent("featuresadded",{features:d})},removeFeatures:function(a,b){if(a&&0!==a.length){if(a===this.features)return this.removeAllFeatures(b);
OpenLayers.Util.isArray(a)||(a=[a]);a===this.selectedFeatures&&(a=a.slice());var c=!b||!b.silent;c&&this.events.triggerEvent("beforefeaturesremoved",{features:a});for(var d=a.length-1;0<=d;d--){this.renderer.locked=0!=d&&a[d-1].geometry?!0:!1;var e=a[d];delete this.unrenderedFeatures[e.id];c&&this.events.triggerEvent("beforefeatureremoved",{feature:e});this.features=OpenLayers.Util.removeItem(this.features,e);e.layer=null;e.geometry&&this.renderer.eraseFeatures(e);-1!=OpenLayers.Util.indexOf(this.selectedFeatures,
e)&&OpenLayers.Util.removeItem(this.selectedFeatures,e);c&&this.events.triggerEvent("featureremoved",{feature:e})}c&&this.events.triggerEvent("featuresremoved",{features:a})}},removeAllFeatures:function(a){a=!a||!a.silent;var b=this.features;a&&this.events.triggerEvent("beforefeaturesremoved",{features:b});for(var c,d=b.length-1;0<=d;d--)c=b[d],a&&this.events.triggerEvent("beforefeatureremoved",{feature:c}),c.layer=null,a&&this.events.triggerEvent("featureremoved",{feature:c});this.renderer.clear();
this.features=[];this.unrenderedFeatures={};this.selectedFeatures=[];a&&this.events.triggerEvent("featuresremoved",{features:b})},destroyFeatures:function(a,b){void 0==a&&(a=this.features);if(a){this.removeFeatures(a,b);for(var c=a.length-1;0<=c;c--)a[c].destroy()}},drawFeature:function(a,b){if(this.drawn){if("object"!=typeof b){b||a.state!==OpenLayers.State.DELETE||(b="delete");var c=b||a.renderIntent;(b=a.style||this.style)||(b=this.styleMap.createSymbolizer(a,c))}c=this.renderer.drawFeature(a,
b);!1===c||null===c?this.unrenderedFeatures[a.id]=a:delete this.unrenderedFeatures[a.id]}},eraseFeatures:function(a){this.renderer.eraseFeatures(a)},getFeatureFromEvent:function(a){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var b=null;(a=this.renderer.getFeatureIdFromEvent(a))&&(b="string"===typeof a?this.getFeatureById(a):a);return b},getFeatureBy:function(a,b){for(var c=
null,d=0,e=this.features.length;d<e;++d)if(this.features[d][a]==b){c=this.features[d];break}return c},getFeatureById:function(a){return this.getFeatureBy("id",a)},getFeatureByFid:function(a){return this.getFeatureBy("fid",a)},getFeaturesByAttribute:function(a,b){var c,d,e=this.features.length,f=[];for(c=0;c<e;c++)(d=this.features[c])&&d.attributes&&d.attributes[a]===b&&f.push(d);return f},onFeatureInsert:function(a){},preFeatureInsert:function(a){},getDataExtent:function(){var a=null,b=this.features;
if(b&&0<b.length)for(var c=null,d=0,e=b.length;d<e;d++)if(c=b[d].geometry)null===a&&(a=new OpenLayers.Bounds),a.extend(c.getBounds());return a},CLASS_NAME:"OpenLayers.Layer.Vector"});
OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(a){for(var b=this.layers,c,d=0;d<b.length;d++)if(c=b[d].getFeatureFromEvent(a))return c},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments);this.collectRoots();a.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(a){a.events.unregister("changelayer",this,this.handleChangeLayer);
this.resetRoots();OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var a,b=0;b<this.map.layers.length;++b)a=this.map.layers[b],-1!=OpenLayers.Util.indexOf(this.layers,a)&&a.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var a,b=0;b<this.layers.length;++b)a=this.layers[b],this.renderer&&a.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(a.renderer)},handleChangeLayer:function(a){var b=a.layer;"order"==a.property&&-1!=OpenLayers.Util.indexOf(this.layers,
b)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"});
OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);null===this.scope&&(this.scope=this);this.initLayer(a);var c=
{click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(c.over=this.overFeature,c.out=this.outFeature);this.callbacks=OpenLayers.Util.extend(c,this.callbacks);this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})};this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(a){OpenLayers.Util.isArray(a)?(this.layers=a,this.layer=
new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:a})):this.layer=a},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer);OpenLayers.Control.prototype.destroy.apply(this,arguments);this.layers&&this.layer.destroy()},activate:function(){this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate());return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.active&&
(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer));return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(a){for(var b=this.layers||[this.layer],c,d,e=0;e<b.length;++e){c=b[e];for(var f=c.selectedFeatures.length-1;0<=f;--f)d=c.selectedFeatures[f],a&&a.except==d||this.unselect(d)}},clickFeature:function(a){this.hover||(-1<OpenLayers.Util.indexOf(a.layer.selectedFeatures,a)?this.toggleSelect()?
this.unselect(a):this.multipleSelect()||this.unselectAll({except:a}):(this.multipleSelect()||this.unselectAll({except:a}),this.select(a)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(a){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(a){var b=a.layer;this.hover&&(this.highlightOnly?
this.highlight(a):-1==OpenLayers.Util.indexOf(b.selectedFeatures,a)&&this.select(a))},outFeature:function(a){if(this.hover)if(this.highlightOnly){if(a._lastHighlighter==this.id)if(a._prevHighlighter&&a._prevHighlighter!=this.id){delete a._lastHighlighter;var b=this.map.getControl(a._prevHighlighter);b&&b.highlight(a)}else this.unhighlight(a)}else this.unselect(a)},highlight:function(a){var b=a.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:a})&&(a._prevHighlighter=a._lastHighlighter,
a._lastHighlighter=this.id,b.drawFeature(a,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:a}))},unhighlight:function(a){var b=a.layer;void 0==a._prevHighlighter?delete a._lastHighlighter:(a._prevHighlighter!=this.id&&(a._lastHighlighter=a._prevHighlighter),delete a._prevHighlighter);b.drawFeature(a,a.style||a.layer.style||"default");this.events.triggerEvent("featureunhighlighted",{feature:a})},select:function(a){var b=this.onBeforeSelect.call(this.scope,
a),c=a.layer;!1!==b&&(b=c.events.triggerEvent("beforefeatureselected",{feature:a}),!1!==b&&(c.selectedFeatures.push(a),this.highlight(a),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=c.selectedFeatures[0]),c.events.triggerEvent("featureselected",{feature:a}),this.onSelect.call(this.scope,a)))},unselect:function(a){var b=a.layer;this.unhighlight(a);OpenLayers.Util.removeItem(b.selectedFeatures,a);b.events.triggerEvent("featureunselected",{feature:a});this.onUnselect.call(this.scope,
a)},selectBox:function(a){if(a instanceof OpenLayers.Bounds){var b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom});a=this.map.getLonLatFromPixel({x:a.right,y:a.top});b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat);this.multipleSelect()||this.unselectAll();a=this.multiple;this.multiple=!0;var c=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:c});for(var d,e=0;e<c.length;++e){d=c[e];for(var f=0,g=d.features.length;f<g;++f){var h=d.features[f];h.getVisibility()&&(null==
this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,h.geometry.CLASS_NAME))&&b.toGeometry().intersects(h.geometry)&&-1==OpenLayers.Util.indexOf(d.selectedFeatures,h)&&this.select(h)}}this.multiple=a;this.events.triggerEvent("boxselectionend",{layers:c})}},setMap:function(a){this.handlers.feature.setMap(a);this.box&&this.handlers.box.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(a){var b=this.active;this.unselectAll();this.deactivate();this.layers&&
(this.layer.destroy(),this.layers=null);this.initLayer(a);this.handlers.feature.layer=this.layer;b&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"});
OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate();this.eventListener=null;OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,
arguments)){this.observeElement=this.observeElement||document;for(var a=0,b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[a],this.eventListener);return!0}return!1},deactivate:function(){var a=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var a=0,b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[a],this.eventListener);a=!0}return a},handleKeyEvent:function(a){this.checkModifiers(a)&&
this.callback(a.type,[a])},CLASS_NAME:"OpenLayers.Handler.Keyboard"});
OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertices:null,virtualVertices:null,selectControl:null,dragControl:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(a,b){b=b||{};this.layer=
a;this.vertices=[];this.virtualVertices=[];this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,b.vertexRenderIntent));this.virtualStyle.fillOpacity=0.3;this.virtualStyle.strokeOpacity=0.3;this.deleteCodes=[46,68];this.mode=OpenLayers.Control.ModifyFeature.RESHAPE;OpenLayers.Control.prototype.initialize.apply(this,[b]);OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var c=this,d={geometryTypes:this.geometryTypes,clickout:this.clickout,
toggle:this.toggle,onBeforeSelect:this.beforeSelectFeature,onSelect:this.selectFeature,onUnselect:this.unselectFeature,scope:this};!1===this.standalone&&(this.selectControl=new OpenLayers.Control.SelectFeature(a,d));this.dragControl=new OpenLayers.Control.DragFeature(a,{geometryTypes:["OpenLayers.Geometry.Point"],onStart:function(a,b){c.dragStart.apply(c,[a,b])},onDrag:function(a,b){c.dragVertex.apply(c,[a,b])},onComplete:function(a){c.dragComplete.apply(c,[a])},featureCallbacks:{over:function(a){(!0!==
c.standalone||a._sketch||c.feature===a)&&c.dragControl.overFeature.apply(c.dragControl,[a])}}});this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress})}},destroy:function(){this.layer=null;this.standalone||this.selectControl.destroy();this.dragControl.destroy();OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return(this.standalone||this.selectControl.activate())&&this.handlers.keyboard.activate()&&OpenLayers.Control.prototype.activate.apply(this,
arguments)},deactivate:function(){var a=!1;if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.layer.removeFeatures(this.vertices,{silent:!0});this.layer.removeFeatures(this.virtualVertices,{silent:!0});this.vertices=[];this.dragControl.deactivate();var b=(a=this.feature)&&a.geometry&&a.layer;!1===this.standalone?(b&&this.selectControl.unselect.apply(this.selectControl,[a]),this.selectControl.deactivate()):b&&this.unselectFeature(a);this.handlers.keyboard.deactivate();a=!0}return a},
beforeSelectFeature:function(a){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:a})},selectFeature:function(a){this.standalone&&!1===this.beforeSelectFeature(a)||(this.feature=a,this.modified=!1,this.resetVertices(),this.dragControl.activate(),this.onModificationStart(this.feature));var b=a.modified;!a.geometry||b&&b.geometry||(this._originalGeometry=a.geometry.clone())},unselectFeature:function(a){this.layer.removeFeatures(this.vertices,{silent:!0});this.vertices=[];this.layer.destroyFeatures(this.virtualVertices,
{silent:!0});this.virtualVertices=[];this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle);this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle);this.feature=null;this.dragControl.deactivate();this.onModificationEnd(a);this.layer.events.triggerEvent("afterfeaturemodified",{feature:a,modified:this.modified});this.modified=!1},dragStart:function(a,b){a==this.feature||a.geometry.parent||a==this.dragHandle||
a==this.radiusHandle||(!1===this.standalone&&this.feature&&this.selectControl.clickFeature.apply(this.selectControl,[this.feature]),null!=this.geometryTypes&&-1==OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME))||(this.standalone||this.selectControl.clickFeature.apply(this.selectControl,[a]),this.dragControl.overFeature.apply(this.dragControl,[a]),this.dragControl.lastPixel=b,this.dragControl.handlers.drag.started=!0,this.dragControl.handlers.drag.start=b,this.dragControl.handlers.drag.last=
b)},dragVertex:function(a,b){this.modified=!0;"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?(this.feature!=a&&(this.feature=a),this.layer.events.triggerEvent("vertexmodified",{vertex:a.geometry,feature:this.feature,pixel:b})):(a._index?(a.geometry.parent.addComponent(a.geometry,a._index),delete a._index,OpenLayers.Util.removeItem(this.virtualVertices,a),this.vertices.push(a)):a==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&
(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):a!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:a.geometry,feature:this.feature,pixel:b}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:this.selectControl.renderIntent));this.layer.drawFeature(a)},dragComplete:function(a){this.resetVertices();this.setFeatureState();
this.onModification(this.feature);this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var a=this.feature;a.modified=OpenLayers.Util.extend(a.modified,{geometry:this._originalGeometry});delete this._originalGeometry}},resetVertices:function(){this.dragControl.feature&&this.dragControl.outFeature(this.dragControl.feature);
0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]);0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]);this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null);this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null);this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&
OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(a){var b=a.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,b)&&(b=this.dragControl.feature)&&-1!=OpenLayers.Util.indexOf(this.vertices,b)&&!this.dragControl.handlers.drag.dragging&&
b.geometry.parent&&(b.geometry.parent.removeComponent(b.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:b.geometry,feature:this.feature,pixel:a.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:this.selectControl.renderIntent),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){function a(c){var d,e,f;if("OpenLayers.Geometry.Point"==
c.CLASS_NAME)e=new OpenLayers.Feature.Vector(c),e._sketch=!0,e.renderIntent=b.vertexRenderIntent,b.vertices.push(e);else{f=c.components.length;"OpenLayers.Geometry.LinearRing"==c.CLASS_NAME&&(f-=1);for(d=0;d<f;++d)e=c.components[d],"OpenLayers.Geometry.Point"==e.CLASS_NAME?(e=new OpenLayers.Feature.Vector(e),e._sketch=!0,e.renderIntent=b.vertexRenderIntent,b.vertices.push(e)):a(e);if(b.createVertices&&"OpenLayers.Geometry.MultiPoint"!=c.CLASS_NAME)for(d=0,f=c.components.length;d<f-1;++d){e=c.components[d];
var g=c.components[d+1];"OpenLayers.Geometry.Point"==e.CLASS_NAME&&"OpenLayers.Geometry.Point"==g.CLASS_NAME&&(e=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((e.x+g.x)/2,(e.y+g.y)/2),null,b.virtualStyle),e.geometry.parent=c,e._index=d+1,e._sketch=!0,b.virtualVertices.push(e))}}}this.vertices=[];this.virtualVertices=[];var b=this;a.call(this,this.feature.geometry);this.layer.addFeatures(this.virtualVertices,{silent:!0});this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var a=
this.feature.geometry,b=a.getBounds().getCenterLonLat(),b=new OpenLayers.Geometry.Point(b.lon,b.lat),c=new OpenLayers.Feature.Vector(b);b.move=function(b,c){OpenLayers.Geometry.Point.prototype.move.call(this,b,c);a.move(b,c)};c._sketch=!0;this.dragHandle=c;this.dragHandle.renderIntent=this.vertexRenderIntent;this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var a=this.feature.geometry,b=a.getBounds(),c=b.getCenterLonLat(),d=new OpenLayers.Geometry.Point(c.lon,c.lat),
b=new OpenLayers.Geometry.Point(b.right,b.bottom),c=new OpenLayers.Feature.Vector(b),e=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,f=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,g=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;b.move=function(b,c){OpenLayers.Geometry.Point.prototype.move.call(this,b,c);var l=this.x-d.x,m=this.y-d.y,n=l-b,p=m-c;if(g){var q=Math.atan2(p,n),q=Math.atan2(m,l)-q,q=180/Math.PI*q;a.rotate(q,d)}if(e){var r;f?(m/=p,r=l/n/m):(n=Math.sqrt(n*n+p*p),m=Math.sqrt(l*
l+m*m)/n);a.resize(m,d,r)}};c._sketch=!0;this.radiusHandle=c;this.radiusHandle.renderIntent=this.vertexRenderIntent;this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(a){this.standalone||this.selectControl.setMap(a);this.dragControl.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.ModifyFeature"});OpenLayers.Control.ModifyFeature.RESHAPE=1;OpenLayers.Control.ModifyFeature.RESIZE=2;OpenLayers.Control.ModifyFeature.ROTATE=4;
OpenLayers.Control.ModifyFeature.DRAG=8;
OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(a,b,c){if(c&&c.sphericalMercator||this.sphericalMercator)c=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},c);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a||this.name,b||this.url,{},c])},clone:function(a){null==a&&(a=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,
[a])},getURL:function(a){a=this.getXYZ(a);var b=this.url;OpenLayers.Util.isArray(b)&&(b=this.selectUrl(""+a.x+a.y+a.z,b));return OpenLayers.String.format(b,a)},getXYZ:function(a){var b=this.getServerResolution(),c=Math.round((a.left-this.maxExtent.left)/(b*this.tileSize.w));a=Math.round((this.maxExtent.top-a.top)/(b*this.tileSize.h));b=this.getServerZoom();if(this.wrapDateLine)var d=Math.pow(2,b),c=(c%d+d)%d;return{x:c,y:a,z:b}},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,
arguments);this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"});
OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,0.5971642833948135,0.29858214169740677,0.14929107084870338,0.07464553542435169],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',
metadata:null,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,initialize:function(a){a=OpenLayers.Util.applyDefaults({sphericalMercator:!0},a);OpenLayers.Layer.XYZ.prototype.initialize.apply(this,[a.name||"Bing "+(a.type||this.type),null,a]);this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions);this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_");window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,
this);var a=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),a="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(a),b=document.createElement("script");b.type="text/javascript";b.src=a;b.id=this._callbackId;document.getElementsByTagName("head")[0].appendChild(b)},initLayer:function(){var a=this.metadata.resourceSets[0].resources[0],b=a.imageUrl.replace("{quadkey}","${quadkey}"),
b=b.replace("{culture}",this.culture);this.url=[];for(var c=0;c<a.imageUrlSubdomains.length;++c)this.url.push(b.replace("{subdomain}",a.imageUrlSubdomains[c]));this.addOptions({maxResolution:Math.min(this.serverResolutions[a.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(a.zoomMax+1-a.zoomMin,this.numZoomLevels)},!0);this.updateAttribution()},drawTileFromQueue:function(){this.url&&OpenLayers.Layer.XYZ.prototype.drawTileFromQueue.apply(this,arguments)},getURL:function(a){var b=
this.getXYZ(a);a=b.x;for(var c=b.y,b=b.z,d=[],e=b;0<e;--e){var f="0",g=1<<e-1;0!=(a&g)&&f++;0!=(c&g)&&(f++,f++);d.push(f)}d=d.join("");a=this.selectUrl(""+a+c+b,this.url);return OpenLayers.String.format(a,{quadkey:d})},updateAttribution:function(){var a=this.metadata;if(a.resourceSets&&this.map&&this.map.center){var b=a.resourceSets[0].resources[0],c=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),b=b.imageryProviders,d=OpenLayers.Util.indexOf(this.serverResolutions,
this.getServerResolution()),e="",f,g,h,k,l,m,n;g=0;for(h=b.length;g<h;++g)for(f=b[g],k=0,l=f.coverageAreas.length;k<l;++k)n=f.coverageAreas[k],m=OpenLayers.Bounds.fromArray(n.bbox,!0),c.intersectsBounds(m)&&d<=n.zoomMax&&d>=n.zoomMin&&(e+=f.attribution+" ");this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:a.brandLogoUri,copyrights:e});this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,
arguments);this.map.events.register("moveend",this,this.updateAttribution)},clone:function(a){null==a&&(a=new OpenLayers.Layer.Bing(this.options));return a=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution);OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"});
OpenLayers.Layer.Bing.processMetadata=function(a){this.metadata=a;this.initLayer();a=document.getElementById(this._callbackId);a.parentNode.removeChild(a);window[this._callbackId]=void 0;delete this._callbackId};
OpenLayers.Format.SOSGetFeatureOfInterest=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",sa:"http://www.opengis.net/sampling/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",defaultPrefix:"sos",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a){"string"==
typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={features:[]};this.readNode(a,b);a=[];for(var c=0,d=b.features.length;c<d;c++){var e=b.features[c];this.internalProjection&&this.externalProjection&&e.components[0]&&e.components[0].transform(this.externalProjection,this.internalProjection);e=new OpenLayers.Feature.Vector(e.components[0],e.attributes);a.push(e)}return a},readers:{sa:{SamplingPoint:function(a,b){if(!b.attributes){var c=
{attributes:{}};b.features.push(c);b=c}b.attributes.id=this.getAttributeNS(a,this.namespaces.gml,"id");this.readChildNodes(a,b)},position:function(a,b){this.readChildNodes(a,b)}},gml:OpenLayers.Util.applyDefaults({FeatureCollection:function(a,b){this.readChildNodes(a,b)},featureMember:function(a,b){var c={attributes:{}};b.features.push(c);this.readChildNodes(a,c)},name:function(a,b){b.attributes.name=this.getChildValue(a)},pos:function(a,b){this.externalProjection||(this.externalProjection=new OpenLayers.Projection(a.getAttribute("srsName")));
OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[a,b])}},OpenLayers.Format.GML.v3.prototype.readers.gml)},writers:{sos:{GetFeatureOfInterest:function(a){for(var b=this.createElementNSPlus("GetFeatureOfInterest",{attributes:{version:this.VERSION,service:"SOS","xsi:schemaLocation":this.schemaLocation}}),c=0,d=a.fois.length;c<d;c++)this.writeNode("FeatureOfInterestId",{foi:a.fois[c]},b);return b},FeatureOfInterestId:function(a){return this.createElementNSPlus("FeatureOfInterestId",{value:a.foi})}}},
CLASS_NAME:"OpenLayers.Format.SOSGetFeatureOfInterest"});
OpenLayers.Format.SOSGetObservation=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows",gml:"http://www.opengis.net/gml",sos:"http://www.opengis.net/sos/1.0",ogc:"http://www.opengis.net/ogc",om:"http://www.opengis.net/om/1.0",sa:"http://www.opengis.net/sampling/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",
defaultPrefix:"sos",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={measurements:[],observations:[]};this.readNode(a,b);return b},write:function(a){a=this.writeNode("sos:GetObservation",a);a.setAttribute("xmlns:om",this.namespaces.om);a.setAttribute("xmlns:ogc",this.namespaces.ogc);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,
[a])},readers:{om:{ObservationCollection:function(a,b){b.id=this.getAttributeNS(a,this.namespaces.gml,"id");this.readChildNodes(a,b)},member:function(a,b){this.readChildNodes(a,b)},Measurement:function(a,b){var c={};b.measurements.push(c);this.readChildNodes(a,c)},Observation:function(a,b){var c={};b.observations.push(c);this.readChildNodes(a,c)},samplingTime:function(a,b){var c={};b.samplingTime=c;this.readChildNodes(a,c)},observedProperty:function(a,b){b.observedProperty=this.getAttributeNS(a,this.namespaces.xlink,
"href");this.readChildNodes(a,b)},procedure:function(a,b){b.procedure=this.getAttributeNS(a,this.namespaces.xlink,"href");this.readChildNodes(a,b)},featureOfInterest:function(a,b){var c={features:[]};b.fois=[];b.fois.push(c);this.readChildNodes(a,c);for(var d=[],e=0,f=c.features.length;e<f;e++){var g=c.features[e];d.push(new OpenLayers.Feature.Vector(g.components[0],g.attributes))}c.features=d},result:function(a,b){var c={};b.result=c;""!==this.getChildValue(a)?(c.value=this.getChildValue(a),c.uom=
a.getAttribute("uom")):this.readChildNodes(a,c)}},sa:OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,gml:OpenLayers.Util.applyDefaults({TimeInstant:function(a,b){var c={};b.timeInstant=c;this.readChildNodes(a,c)},timePosition:function(a,b){b.timePosition=this.getChildValue(a)}},OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)},writers:{sos:{GetObservation:function(a){var b=this.createElementNSPlus("GetObservation",{attributes:{version:this.VERSION,service:"SOS"}});this.writeNode("offering",
a,b);a.eventTime&&this.writeNode("eventTime",a,b);for(var c in a.procedures)this.writeNode("procedure",a.procedures[c],b);for(var d in a.observedProperties)this.writeNode("observedProperty",a.observedProperties[d],b);a.foi&&this.writeNode("featureOfInterest",a.foi,b);this.writeNode("responseFormat",a,b);a.resultModel&&this.writeNode("resultModel",a,b);a.responseMode&&this.writeNode("responseMode",a,b);return b},featureOfInterest:function(a){var b=this.createElementNSPlus("featureOfInterest");this.writeNode("ObjectID",
a.objectId,b);return b},ObjectID:function(a){return this.createElementNSPlus("ObjectID",{value:a})},responseFormat:function(a){return this.createElementNSPlus("responseFormat",{value:a.responseFormat})},procedure:function(a){return this.createElementNSPlus("procedure",{value:a})},offering:function(a){return this.createElementNSPlus("offering",{value:a.offering})},observedProperty:function(a){return this.createElementNSPlus("observedProperty",{value:a})},eventTime:function(a){var b=this.createElementNSPlus("eventTime");
"latest"===a.eventTime&&this.writeNode("ogc:TM_Equals",a,b);return b},resultModel:function(a){return this.createElementNSPlus("resultModel",{value:a.resultModel})},responseMode:function(a){return this.createElementNSPlus("responseMode",{value:a.responseMode})}},ogc:{TM_Equals:function(a){var b=this.createElementNSPlus("ogc:TM_Equals");this.writeNode("ogc:PropertyName",{property:"urn:ogc:data:time:iso8601"},b);"latest"===a.eventTime&&this.writeNode("gml:TimeInstant",{value:"latest"},b);return b},PropertyName:function(a){return this.createElementNSPlus("ogc:PropertyName",
{value:a.property})}},gml:{TimeInstant:function(a){var b=this.createElementNSPlus("gml:TimeInstant");this.writeNode("gml:timePosition",a,b);return b},timePosition:function(a){return this.createElementNSPlus("gml:timePosition",{value:a.value})}}},CLASS_NAME:"OpenLayers.Format.SOSGetObservation"});
OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,mousePosition:null,interval:0,delta:0,cumulative:!0,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);this.wheelListener=null},onWheelEvent:function(a){if(this.map&&this.checkModifiers(a)){for(var b=!1,c=!1,d=!1,e=
OpenLayers.Event.element(a);null!=e&&!d&&!b;){if(!b)try{var f=e.currentStyle?e.currentStyle.overflow:document.defaultView.getComputedStyle(e,null).getPropertyValue("overflow"),b=f&&"auto"==f||"scroll"==f}catch(g){}if(!c)for(var d=0,h=this.map.layers.length;d<h;d++)if(e==this.map.layers[d].div||e==this.map.layers[d].pane){c=!0;break}d=e==this.map.div;e=e.parentNode}!b&&d&&(c&&(b=0,a||(a=window.event),a.wheelDelta?(b=a.wheelDelta/120,window.opera&&9.2>window.opera.version()&&(b=-b)):a.detail&&(b=-a.detail/
3),this.delta+=b,this.interval?(window.clearTimeout(this._timeoutId),this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(a)},this),this.interval)):this.wheelZoom(a)),OpenLayers.Event.stop(a))}},wheelZoom:function(a){var b=this.delta;this.delta=0;b&&(this.mousePosition&&(a.xy=this.mousePosition),a.xy||(a.xy=this.map.getPixelFromLonLat(this.map.getCenter())),0>b?this.callback("down",[a,this.cumulative?b:-1]):this.callback("up",[a,this.cumulative?b:1]))},mousemove:function(a){this.mousePosition=
a.xy},activate:function(a){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var b=this.wheelListener;OpenLayers.Event.observe(window,"DOMMouseScroll",b);OpenLayers.Event.observe(window,"mousewheel",b);OpenLayers.Event.observe(document,"mousewheel",b);return!0}return!1},deactivate:function(a){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var b=this.wheelListener;OpenLayers.Event.stopObserving(window,"DOMMouseScroll",b);OpenLayers.Event.stopObserving(window,"mousewheel",
b);OpenLayers.Event.stopObserving(document,"mousewheel",b);return!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"});
OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(a){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[a]);OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[a])},readNode:function(a,b,c){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(a,
b){b.insertIds=[];b.success=!1;this.readChildNodes(a,b)},InsertResult:function(a,b){var c={fids:[]};this.readChildNodes(a,c);b.insertIds.push(c.fids[0])},TransactionResult:function(a,b){this.readChildNodes(a,b)},Status:function(a,b){this.readChildNodes(a,b)},SUCCESS:function(a,b){b.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},
writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(a){a=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},a);var b=a.featurePrefix,c=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(b?b+":":"")+a.featureType}});a.srsNameInQuery&&a.srsName&&c.setAttribute("srsName",a.srsName);a.featureNS&&c.setAttribute("xmlns:"+b,a.featureNS);if(a.propertyNames)for(var b=0,d=a.propertyNames.length;b<
d;b++)this.writeNode("ogc:PropertyName",{property:a.propertyNames[b]},c);a.filter&&(this.setFilterProperty(a.filter),this.writeNode("ogc:Filter",a.filter,c));return c}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"});
OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(a){this.compare=a?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER;this.clear()},insert:function(a){this.exists(a)&&this.remove(a);var b=a.id;this.determineZIndex(a);for(var c=-1,d=this.order.length,e;1<d-c;)e=parseInt((c+d)/2),0<this.compare(this,a,OpenLayers.Util.getElement(this.order[e]))?c=e:d=e;this.order.splice(d,
0,b);this.indices[b]=this.getZIndex(a);return this.getNextElement(d)},remove:function(a){a=a.id;var b=OpenLayers.Util.indexOf(this.order,a);0<=b&&(this.order.splice(b,1),delete this.indices[a],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[];this.indices={};this.maxZIndex=0},exists:function(a){return null!=this.indices[a.id]},getZIndex:function(a){return a._style.graphicZIndex},determineZIndex:function(a){var b=a._style.graphicZIndex;
null==b?(b=this.maxZIndex,a._style.graphicZIndex=b):b>this.maxZIndex&&(this.maxZIndex=b)},getNextElement:function(a){a+=1;if(a<this.order.length){var b=OpenLayers.Util.getElement(this.order[a]);void 0==b&&(b=this.getNextElement(a));return b}return null},CLASS_NAME:"OpenLayers.ElementsIndexer"});
OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(a,b,c){b=a.getZIndex(b);var d=0;c&&(a=a.getZIndex(c),d=b-a);return d},Z_ORDER_DRAWING_ORDER:function(a,b,c){a=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(a,b,c);c&&0==a&&(a=1);return a},Z_ORDER_Y_ORDER:function(a,b,c){a=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(a,b,c);c&&0===a&&(b=c._boundsBottom-b._boundsBottom,a=0===b?1:b);return a}};
OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(a,b){OpenLayers.Renderer.prototype.initialize.apply(this,arguments);this.rendererRoot=this.createRenderRoot();this.root=this.createRoot("_root");this.vectorRoot=this.createRoot("_vroot");this.textRoot=this.createRoot("_troot");this.root.appendChild(this.vectorRoot);
this.root.appendChild(this.textRoot);this.rendererRoot.appendChild(this.root);this.container.appendChild(this.rendererRoot);b&&(b.zIndexing||b.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(b.yOrdering))},destroy:function(){this.clear();this.xmlns=this.root=this.rendererRoot=null;OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var a,b=this.vectorRoot;if(b)for(;a=b.firstChild;)b.removeChild(a);if(b=this.textRoot)for(;a=b.firstChild;)b.removeChild(a);this.indexer&&
this.indexer.clear()},setExtent:function(a,b){var c=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),d=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var e,f=a.getWidth()/this.map.getExtent().getWidth();a=a.scale(1/f);f=this.map.getMaxExtent();f.right>a.left&&f.right<a.right?e=!0:f.left>a.left&&f.left<a.right&&(e=!1);if(e!==this.rightOfDateLine||b)c=!1,this.xOffset=!0===e?f.getWidth()/d:0;this.rightOfDateLine=e}return c},getNodeType:function(a,b){},drawGeometry:function(a,
b,c){var d=a.CLASS_NAME,e=!0;if("OpenLayers.Geometry.Collection"==d||"OpenLayers.Geometry.MultiPoint"==d||"OpenLayers.Geometry.MultiLineString"==d||"OpenLayers.Geometry.MultiPolygon"==d){for(var d=0,f=a.components.length;d<f;d++)e=this.drawGeometry(a.components[d],b,c)&&e;return e}d=e=!1;"none"!=b.display&&(b.backgroundGraphic?this.redrawBackgroundNode(a.id,a,b,c):d=!0,e=this.redrawNode(a.id,a,b,c));!1==e&&(b=document.getElementById(a.id))&&(b._style.backgroundGraphic&&(d=!0),b.parentNode.removeChild(b));
d&&(b=document.getElementById(a.id+this.BACKGROUND_ID_SUFFIX))&&b.parentNode.removeChild(b);return e},redrawNode:function(a,b,c,d){c=this.applyDefaultSymbolizer(c);a=this.nodeFactory(a,this.getNodeType(b,c));a._featureId=d;a._boundsBottom=b.getBounds().bottom;a._geometryClass=b.CLASS_NAME;a._style=c;b=this.drawGeometryNode(a,b,c);if(!1===b)return!1;a=b.node;this.indexer?(c=this.indexer.insert(a))?this.vectorRoot.insertBefore(a,c):this.vectorRoot.appendChild(a):a.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(a);
this.postDraw(a);return b.complete},redrawBackgroundNode:function(a,b,c,d){c=OpenLayers.Util.extend({},c);c.externalGraphic=c.backgroundGraphic;c.graphicXOffset=c.backgroundXOffset;c.graphicYOffset=c.backgroundYOffset;c.graphicZIndex=c.backgroundGraphicZIndex;c.graphicWidth=c.backgroundWidth||c.graphicWidth;c.graphicHeight=c.backgroundHeight||c.graphicHeight;c.backgroundGraphic=null;c.backgroundXOffset=null;c.backgroundYOffset=null;c.backgroundGraphicZIndex=null;return this.redrawNode(a+this.BACKGROUND_ID_SUFFIX,
b,c,null)},drawGeometryNode:function(a,b,c){c=c||a._style;var d={isFilled:void 0===c.fill?!0:c.fill,isStroked:void 0===c.stroke?!!c.strokeWidth:c.stroke},e;switch(b.CLASS_NAME){case "OpenLayers.Geometry.Point":!1===c.graphic&&(d.isFilled=!1,d.isStroked=!1);e=this.drawPoint(a,b);break;case "OpenLayers.Geometry.LineString":d.isFilled=!1;e=this.drawLineString(a,b);break;case "OpenLayers.Geometry.LinearRing":e=this.drawLinearRing(a,b);break;case "OpenLayers.Geometry.Polygon":e=this.drawPolygon(a,b);break;
case "OpenLayers.Geometry.Rectangle":e=this.drawRectangle(a,b)}a._options=d;return!1!=e?{node:this.setStyle(a,c,d,b),complete:e}:!1},postDraw:function(a){},drawPoint:function(a,b){},drawLineString:function(a,b){},drawLinearRing:function(a,b){},drawPolygon:function(a,b){},drawRectangle:function(a,b){},drawCircle:function(a,b){},removeText:function(a){var b=document.getElementById(a+this.LABEL_ID_SUFFIX);b&&this.textRoot.removeChild(b);(a=document.getElementById(a+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(a)},
getFeatureIdFromEvent:function(a){var b=a.target,c=b&&b.correspondingUseElement;return(c?c:b||a.srcElement)._featureId},eraseGeometry:function(a,b){if("OpenLayers.Geometry.MultiPoint"==a.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==a.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==a.CLASS_NAME||"OpenLayers.Geometry.Collection"==a.CLASS_NAME)for(var c=0,d=a.components.length;c<d;c++)this.eraseGeometry(a.components[c],b);else(c=OpenLayers.Util.getElement(a.id))&&c.parentNode&&(c.geometry&&(c.geometry.destroy(),
c.geometry=null),c.parentNode.removeChild(c),this.indexer&&this.indexer.remove(c),c._style.backgroundGraphic&&(c=OpenLayers.Util.getElement(a.id+this.BACKGROUND_ID_SUFFIX))&&c.parentNode&&c.parentNode.removeChild(c))},nodeFactory:function(a,b){var c=OpenLayers.Util.getElement(a);c?this.nodeTypeCompare(c,b)||(c.parentNode.removeChild(c),c=this.nodeFactory(a,b)):c=this.createNode(b,a);return c},nodeTypeCompare:function(a,b){},createNode:function(a,b){},moveRoot:function(a){var b=this.root;a.root.parentNode==
this.rendererRoot&&(b=a.root);b.parentNode.removeChild(b);a.rendererRoot.appendChild(b)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(a){return"circle"!=a&&!!a},CLASS_NAME:"OpenLayers.Renderer.Elements"});
OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(a){a=a||window.location.href;var b=OpenLayers.Util.getParameters(a),c=a.indexOf("#");0<c&&(a="?"+a.substring(c+1,a.length),OpenLayers.Util.extend(b,OpenLayers.Util.getParameters(a)));return b},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var b=0,c=this.map.controls.length;b<c;b++){var d=this.map.controls[b];if(d!=this&&
"OpenLayers.Control.ArgParser"==d.CLASS_NAME){d.displayProjection!=this.displayProjection&&(this.displayProjection=d.displayProjection);break}}b==this.map.controls.length&&(b=this.getParameters(),b.layers&&(this.layers=b.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),b.lat&&b.lon&&(this.center=new OpenLayers.LonLat(parseFloat(b.lon),parseFloat(b.lat)),b.zoom&&(this.zoom=parseFloat(b.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),
this.setCenter()))},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var a=0,b=this.layers.length;a<b;a++){var c=this.map.layers[a],d=this.layers.charAt(a);
"B"==d?this.map.setBaseLayer(c):"T"!=d&&"F"!=d||c.setVisibility("T"==d)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"});
OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:!1,base:"",displayProjection:null,initialize:function(a,b,c){null===a||"object"!=typeof a||OpenLayers.Util.isElement(a)?(OpenLayers.Control.prototype.initialize.apply(this,[c]),this.element=OpenLayers.Util.getElement(a),this.base=b||document.location.href):(this.base=document.location.href,OpenLayers.Control.prototype.initialize.apply(this,[a]),null!=this.element&&(this.element=
OpenLayers.Util.getElement(this.element)))},destroy:function(){this.element&&this.element.parentNode==this.div&&(this.div.removeChild(this.element),this.element=null);this.map&&this.map.events.unregister("moveend",this,this.updateLink);OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var b=0,c=this.map.controls.length;b<c;b++){var d=this.map.controls[b];if(d.CLASS_NAME==this.argParserClass.CLASS_NAME){d.displayProjection!=
this.displayProjection&&(this.displayProjection=d.displayProjection);break}}b==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.element||this.anchor||(this.element=document.createElement("a"),this.element.innerHTML=OpenLayers.i18n("Permalink"),this.element.href="",this.div.appendChild(this.element));this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,
changebaselayer:this.updateLink,scope:this});this.updateLink();return this.div},updateLink:function(){var a=this.anchor?"#":"?",b=this.base,c=null;-1!=b.indexOf("#")&&!1==this.anchor&&(c=b.substring(b.indexOf("#"),b.length));-1!=b.indexOf(a)&&(b=b.substring(0,b.indexOf(a)));b=b.split("#")[0]+a+OpenLayers.Util.getParameterString(this.createParams());c&&(b+=c);this.anchor&&!this.element?window.location.href=b:this.element.href=b},createParams:function(a,b,c){a=a||this.map.getCenter();var d=OpenLayers.Util.getParameters(this.base);
if(a)for(d.zoom=b||this.map.getZoom(),b=a.lat,a=a.lon,this.displayProjection&&(b=OpenLayers.Projection.transform({x:a,y:b},this.map.getProjectionObject(),this.displayProjection),a=b.x,b=b.y),d.lat=Math.round(1E5*b)/1E5,d.lon=Math.round(1E5*a)/1E5,c=c||this.map.layers,d.layers="",a=0,b=c.length;a<b;a++){var e=c[a];d.layers=e.isBaseLayer?d.layers+(e==this.map.baseLayer?"B":"0"):d.layers+(e.getVisibility()?"T":"F")}return d},CLASS_NAME:"OpenLayers.Control.Permalink"});
OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(a,b,c){var d=[];d.push(a,b,{},c);OpenLayers.Layer.Grid.prototype.initialize.apply(this,d)},clone:function(a){null==a&&(a=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.getServerResolution(),
c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w));a=Math.round((a.bottom-this.tileOrigin.lat)/(b*this.tileSize.h));b=this.getServerZoom();c=this.serviceVersion+"/"+this.layername+"/"+b+"/"+c+"/"+a+"."+this.type;a=this.url;OpenLayers.Util.isArray(a)&&(a=this.selectUrl(c,a));return a+c},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"});
OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){if(OpenLayers.Strategy.prototype.activate.apply(this,arguments)){this.layer.events.on({refresh:this.load,scope:this});if(!0==this.layer.visibility||this.preload)this.load();else this.layer.events.on({visibilitychanged:this.load,scope:this});return!0}return!1},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,
scope:this});return a},load:function(a){var b=this.layer;b.events.triggerEvent("loadstart");b.protocol.read(OpenLayers.Util.applyDefaults({callback:OpenLayers.Function.bind(this.merge,this,b.map.getProjectionObject()),filter:b.filter},a));b.events.un({visibilitychanged:this.load,scope:this})},merge:function(a,b){var c=this.layer;c.destroyFeatures();var d=b.features;if(d&&0<d.length){if(!a.equals(c.projection))for(var e,f=0,g=d.length;f<g;++f)(e=d[f].geometry)&&e.transform(c.projection,a);c.addFeatures(d)}c.events.triggerEvent("loadend")},
CLASS_NAME:"OpenLayers.Strategy.Fixed"});
OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"-",zoomOutId:"olZoomOutLink",draw:function(){var a=OpenLayers.Control.prototype.draw.apply(this),b=this.getOrCreateLinks(a),c=b.zoomIn,b=b.zoomOut,d=this.map.events;b.parentNode!==a&&(d=this.events,d.attachToElement(b.parentNode));d.register("buttonclick",this,this.onZoomClick);this.zoomInLink=c;this.zoomOutLink=b;return a},getOrCreateLinks:function(a){var b=document.getElementById(this.zoomInId),
c=document.getElementById(this.zoomOutId);b||(b=document.createElement("a"),b.href="#zoomIn",b.appendChild(document.createTextNode(this.zoomInText)),b.className="olControlZoomIn",a.appendChild(b));OpenLayers.Element.addClass(b,"olButton");c||(c=document.createElement("a"),c.href="#zoomOut",c.appendChild(document.createTextNode(this.zoomOutText)),c.className="olControlZoomOut",a.appendChild(c));OpenLayers.Element.addClass(c,"olButton");return{zoomIn:b,zoomOut:c}},onZoomClick:function(a){a=a.buttonElement;
a===this.zoomInLink?this.map.zoomIn():a===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick);delete this.zoomInLink;delete this.zoomOutLink;OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"});
OpenLayers.Layer.PointTrack=OpenLayers.Class(OpenLayers.Layer.Vector,{dataFrom:null,styleFrom:null,addNodes:function(a,b){if(2>a.length)throw Error("At least two point features have to be added to create a line from");for(var c=Array(a.length-1),d,e,f,g=0,h=a.length;g<h;g++){d=a[g];f=d.geometry;if(!f)f=d.lonlat,f=new OpenLayers.Geometry.Point(f.lon,f.lat);else if("OpenLayers.Geometry.Point"!=f.CLASS_NAME)throw new TypeError("Only features with point geometries are supported.");if(0<g){d=null!=this.dataFrom?
a[g+this.dataFrom].data||a[g+this.dataFrom].attributes:null;var k=null!=this.styleFrom?a[g+this.styleFrom].style:null;e=new OpenLayers.Geometry.LineString([e,f]);c[g-1]=new OpenLayers.Feature.Vector(e,d,k)}e=f}this.addFeatures(c,b)},CLASS_NAME:"OpenLayers.Layer.PointTrack"});OpenLayers.Layer.PointTrack.SOURCE_NODE=-1;OpenLayers.Layer.PointTrack.TARGET_NODE=0;OpenLayers.Layer.PointTrack.dataFrom={SOURCE_NODE:-1,TARGET_NODE:0};
OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(a){a=a||{};OpenLayers.Util.extend(this,a);this.options=a},mergeWithDefaultFilter:function(a){return a&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,a]}):a||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(a){a=a||{};a.filter=this.mergeWithDefaultFilter(a.filter)},create:function(){},
update:function(){},"delete":function(){},commit:function(){},abort:function(a){},createCallback:function(a,b,c){return OpenLayers.Function.bind(function(){a.apply(this,[b,c])},this)},CLASS_NAME:"OpenLayers.Protocol"});OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(a){OpenLayers.Util.extend(this,a)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"});
OpenLayers.Protocol.Response.SUCCESS=1;OpenLayers.Protocol.Response.FAILURE=0;OpenLayers.Protocol.WFS=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.WFS.DEFAULTS);var b=OpenLayers.Protocol.WFS["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported WFS version: "+a.version;return new b(a)};
OpenLayers.Protocol.WFS.fromWMSLayer=function(a,b){var c,d;c=a.params.LAYERS;c=(OpenLayers.Util.isArray(c)?c[0]:c).split(":");1<c.length&&(d=c[0]);c=c.pop();d={url:a.url,featureType:c,featurePrefix:d,srsName:a.projection&&a.projection.getCode()||a.map&&a.map.getProjectionObject().getCode(),version:"1.1.0"};return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(b,d))};OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"};
OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(a,b){OpenLayers.Layer.prototype.initialize.apply(this,arguments);this.markers=[]},destroy:function(){this.clearMarkers();this.markers=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;a=0;for(var b=this.markers.length;a<b;a++)this.markers[a].setOpacity(this.opacity)}},moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,
arguments);if(b||!this.drawn){for(var d=0,e=this.markers.length;d<e;d++)this.drawMarker(this.markers[d]);this.drawn=!0}},addMarker:function(a){this.markers.push(a);1>this.opacity&&a.setOpacity(this.opacity);this.map&&this.map.getExtent()&&(a.map=this.map,this.drawMarker(a))},removeMarker:function(a){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,a),a.erase())},clearMarkers:function(){if(null!=this.markers)for(;0<this.markers.length;)this.removeMarker(this.markers[0])},
drawMarker:function(a){var b=this.map.getLayerPxFromLonLat(a.lonlat);null==b?a.display(!1):a.isDrawn()?a.icon&&a.icon.moveTo(b):(a=a.draw(b),this.div.appendChild(a))},getDataExtent:function(){var a=null;if(this.markers&&0<this.markers.length)for(var a=new OpenLayers.Bounds,b=0,c=this.markers.length;b<c;b++)a.extend(this.markers[b].lonlat);return a},CLASS_NAME:"OpenLayers.Layer.Markers"});
OpenLayers.Control.Pan=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,direction:null,type:OpenLayers.Control.TYPE_BUTTON,initialize:function(a,b){this.direction=a;this.CLASS_NAME+=this.direction;OpenLayers.Control.prototype.initialize.apply(this,[b])},trigger:function(){var a=OpenLayers.Function.bind(function(a){return this.slideRatio?this.map.getSize()[a]*this.slideRatio:this.slideFactor},this);switch(this.direction){case OpenLayers.Control.Pan.NORTH:this.map.pan(0,-a("h"));
break;case OpenLayers.Control.Pan.SOUTH:this.map.pan(0,a("h"));break;case OpenLayers.Control.Pan.WEST:this.map.pan(-a("w"),0);break;case OpenLayers.Control.Pan.EAST:this.map.pan(a("w"),0)}},CLASS_NAME:"OpenLayers.Control.Pan"});OpenLayers.Control.Pan.NORTH="North";OpenLayers.Control.Pan.SOUTH="South";OpenLayers.Control.Pan.EAST="East";OpenLayers.Control.Pan.WEST="West";
OpenLayers.Format.CSWGetDomain=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Format.CSWGetDomain.DEFAULTS);var b=OpenLayers.Format.CSWGetDomain["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSWGetDomain version: "+a.version;return new b(a)};OpenLayers.Format.CSWGetDomain.DEFAULTS={version:"2.0.2"};
OpenLayers.Format.CSWGetDomain.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",PropertyName:null,ParameterName:null,read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==
a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},readers:{csw:{GetDomainResponse:function(a,b){this.readChildNodes(a,b)},DomainValues:function(a,b){OpenLayers.Util.isArray(b.DomainValues)||(b.DomainValues=[]);for(var c=a.attributes,d={},e=0,f=c.length;e<f;++e)d[c[e].name]=c[e].nodeValue;this.readChildNodes(a,d);b.DomainValues.push(d)},PropertyName:function(a,b){b.PropertyName=this.getChildValue(a)},ParameterName:function(a,b){b.ParameterName=this.getChildValue(a)},ListOfValues:function(a,
b){OpenLayers.Util.isArray(b.ListOfValues)||(b.ListOfValues=[]);this.readChildNodes(a,b.ListOfValues)},Value:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;e<f;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a);b.push({Value:d})},ConceptualScheme:function(a,b){b.ConceptualScheme={};this.readChildNodes(a,b.ConceptualScheme)},Name:function(a,b){b.Name=this.getChildValue(a)},Document:function(a,b){b.Document=this.getChildValue(a)},Authority:function(a,b){b.Authority=this.getChildValue(a)},
RangeOfValues:function(a,b){b.RangeOfValues={};this.readChildNodes(a,b.RangeOfValues)},MinValue:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;e<f;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a);b.MinValue=d},MaxValue:function(a,b){for(var c=a.attributes,d={},e=0,f=c.length;e<f;++e)d[c[e].name]=c[e].nodeValue;d.value=this.getChildValue(a);b.MaxValue=d}}},write:function(a){a=this.writeNode("csw:GetDomain",a);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{csw:{GetDomain:function(a){var b=
this.createElementNSPlus("csw:GetDomain",{attributes:{service:"CSW",version:this.version}});a.PropertyName||this.PropertyName?this.writeNode("csw:PropertyName",a.PropertyName||this.PropertyName,b):(a.ParameterName||this.ParameterName)&&this.writeNode("csw:ParameterName",a.ParameterName||this.ParameterName,b);this.readChildNodes(b,a);return b},PropertyName:function(a){return this.createElementNSPlus("csw:PropertyName",{value:a})},ParameterName:function(a){return this.createElementNSPlus("csw:ParameterName",
{value:a})}}},CLASS_NAME:"OpenLayers.Format.CSWGetDomain.v2_0_2"});OpenLayers.Format.ArcXML.Features=OpenLayers.Class(OpenLayers.Format.XML,{read:function(a){return(new OpenLayers.Format.ArcXML).read(a).features.feature}});
OpenLayers.Control.Snapping=OpenLayers.Class(OpenLayers.Control,{DEFAULTS:{tolerance:10,node:!0,edge:!0,vertex:!0},greedy:!0,precedence:["node","vertex","edge"],resolution:null,geoToleranceCache:null,layer:null,feature:null,point:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.options=a||{};this.options.layer&&this.setLayer(this.options.layer);a=OpenLayers.Util.extend({},this.options.defaults);this.defaults=OpenLayers.Util.applyDefaults(a,this.DEFAULTS);this.setTargets(this.options.targets);
0===this.targets.length&&this.layer&&this.addTargetLayer(this.layer);this.geoToleranceCache={}},setLayer:function(a){this.active?(this.deactivate(),this.layer=a,this.activate()):this.layer=a},setTargets:function(a){this.targets=[];if(a&&a.length)for(var b,c=0,d=a.length;c<d;++c)b=a[c],b instanceof OpenLayers.Layer.Vector?this.addTargetLayer(b):this.addTarget(b)},addTargetLayer:function(a){this.addTarget({layer:a})},addTarget:function(a){a=OpenLayers.Util.applyDefaults(a,this.defaults);a.nodeTolerance=
a.nodeTolerance||a.tolerance;a.vertexTolerance=a.vertexTolerance||a.tolerance;a.edgeTolerance=a.edgeTolerance||a.tolerance;this.targets.push(a)},removeTargetLayer:function(a){for(var b,c=this.targets.length-1;0<=c;--c)b=this.targets[c],b.layer===a&&this.removeTarget(b)},removeTarget:function(a){return OpenLayers.Util.removeItem(this.targets,a)},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);if(a&&this.layer&&this.layer.events)this.layer.events.on({sketchstarted:this.onSketchModified,
sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this});return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.call(this);a&&this.layer&&this.layer.events&&this.layer.events.un({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this});this.point=this.feature=null;return a},onSketchModified:function(a){this.feature=a.feature;this.considerSnapping(a.vertex,a.vertex)},onVertexModified:function(a){this.feature=
a.feature;var b=this.layer.map.getLonLatFromViewPortPx(a.pixel);this.considerSnapping(a.vertex,new OpenLayers.Geometry.Point(b.lon,b.lat))},considerSnapping:function(a,b){for(var c={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY,x:null,y:null},d=!1,e,f,g=0,h=this.targets.length;g<h;++g)if(f=this.targets[g],e=this.testTarget(f,b))if(this.greedy){c=e;c.target=f;d=!0;break}else if(e.rank<c.rank||e.rank===c.rank&&e.dist<c.dist)c=e,c.target=f,d=!0;d&&(!1!==this.events.triggerEvent("beforesnap",
{point:a,x:c.x,y:c.y,distance:c.dist,layer:c.target.layer,snapType:this.precedence[c.rank]})?(a.x=c.x,a.y=c.y,this.point=a,this.events.triggerEvent("snap",{point:a,snapType:this.precedence[c.rank],layer:c.target.layer,distance:c.dist})):d=!1);this.point&&!d&&(a.x=b.x,a.y=b.y,this.point=null,this.events.triggerEvent("unsnap",{point:a}))},testTarget:function(a,b){var c=this.layer.map.getResolution();if("minResolution"in a&&c<a.minResolution||"maxResolution"in a&&c>=a.maxResolution)return null;for(var c=
{node:this.getGeoTolerance(a.nodeTolerance,c),vertex:this.getGeoTolerance(a.vertexTolerance,c),edge:this.getGeoTolerance(a.edgeTolerance,c)},d=Math.max(c.node,c.vertex,c.edge),e={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY},f=!1,g=a.layer.features,h,k,l,m,n,p,q=this.precedence.length,r=new OpenLayers.LonLat(b.x,b.y),s=0,t=g.length;s<t;++s)if(h=g[s],h!==this.feature&&!h._sketch&&h.state!==OpenLayers.State.DELETE&&(!a.filter||a.filter.evaluate(h))&&h.atPoint(r,d,d))for(var u=0,v=Math.min(e.rank+
1,q);u<v;++u)if(k=this.precedence[u],a[k])if("edge"===k){if(l=h.geometry.distanceTo(b,{details:!0}),n=l.distance,n<=c[k]&&n<e.dist){e={rank:u,dist:n,x:l.x0,y:l.y0};f=!0;break}}else{l=h.geometry.getVertices("node"===k);p=!1;for(var w=0,x=l.length;w<x;++w)m=l[w],n=m.distanceTo(b),n<=c[k]&&(u<e.rank||u===e.rank&&n<e.dist)&&(e={rank:u,dist:n,x:m.x,y:m.y},p=f=!0);if(p)break}return f?e:null},getGeoTolerance:function(a,b){b!==this.resolution&&(this.resolution=b,this.geoToleranceCache={});var c=this.geoToleranceCache[a];
void 0===c&&(c=a*b,this.geoToleranceCache[a]=c);return c},destroy:function(){this.active&&this.deactivate();delete this.layer;delete this.targets;OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Snapping"});OpenLayers.Format.WMSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",profile:null,CLASS_NAME:"OpenLayers.Format.WMSCapabilities"});
OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=a;a&&9==a.nodeType&&(a=a.documentElement);var c={};this.readNode(a,c);void 0===c.service&&(a=new OpenLayers.Format.OGCExceptionReport,c.error=a.read(b));return c},readers:{wms:{Service:function(a,
b){b.service={};this.readChildNodes(a,b.service)},Name:function(a,b){b.name=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},BoundingBox:function(a,b){var c={};c.bbox=[parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny")),parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))];var d={x:parseFloat(a.getAttribute("resx")),y:parseFloat(a.getAttribute("resy"))};isNaN(d.x)&&isNaN(d.y)||(c.res=
d);return c},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},ContactInformation:function(a,b){b.contactInformation={};this.readChildNodes(a,b.contactInformation)},ContactPersonPrimary:function(a,b){b.personPrimary={};this.readChildNodes(a,b.personPrimary)},ContactPerson:function(a,b){b.person=this.getChildValue(a)},ContactOrganization:function(a,b){b.organization=this.getChildValue(a)},ContactPosition:function(a,b){b.position=this.getChildValue(a)},ContactAddress:function(a,
b){b.contactAddress={};this.readChildNodes(a,b.contactAddress)},AddressType:function(a,b){b.type=this.getChildValue(a)},Address:function(a,b){b.address=this.getChildValue(a)},City:function(a,b){b.city=this.getChildValue(a)},StateOrProvince:function(a,b){b.stateOrProvince=this.getChildValue(a)},PostCode:function(a,b){b.postcode=this.getChildValue(a)},Country:function(a,b){b.country=this.getChildValue(a)},ContactVoiceTelephone:function(a,b){b.phone=this.getChildValue(a)},ContactFacsimileTelephone:function(a,
b){b.fax=this.getChildValue(a)},ContactElectronicMailAddress:function(a,b){b.email=this.getChildValue(a)},Fees:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.fees=c)},AccessConstraints:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.accessConstraints=c)},Capability:function(a,b){b.capability={nestedLayers:[],layers:[]};this.readChildNodes(a,b.capability)},Request:function(a,b){b.request={};this.readChildNodes(a,b.request)},GetCapabilities:function(a,
b){b.getcapabilities={formats:[]};this.readChildNodes(a,b.getcapabilities)},Format:function(a,b){OpenLayers.Util.isArray(b.formats)?b.formats.push(this.getChildValue(a)):b.format=this.getChildValue(a)},DCPType:function(a,b){this.readChildNodes(a,b)},HTTP:function(a,b){this.readChildNodes(a,b)},Get:function(a,b){b.get={};this.readChildNodes(a,b.get);b.href||(b.href=b.get.href)},Post:function(a,b){b.post={};this.readChildNodes(a,b.post);b.href||(b.href=b.get.href)},GetMap:function(a,b){b.getmap={formats:[]};
this.readChildNodes(a,b.getmap)},GetFeatureInfo:function(a,b){b.getfeatureinfo={formats:[]};this.readChildNodes(a,b.getfeatureinfo)},Exception:function(a,b){b.exception={formats:[]};this.readChildNodes(a,b.exception)},Layer:function(a,b){var c,d;b.capability?(d=b.capability,c=b):d=b;var e=a.getAttributeNode("queryable"),f=e&&e.specified?a.getAttribute("queryable"):null,g=(e=a.getAttributeNode("cascaded"))&&e.specified?a.getAttribute("cascaded"):null,e=(e=a.getAttributeNode("opaque"))&&e.specified?
a.getAttribute("opaque"):null,h=a.getAttribute("noSubsets"),k=a.getAttribute("fixedWidth"),l=a.getAttribute("fixedHeight"),m=c||{},n=OpenLayers.Util.extend;c={nestedLayers:[],styles:c?[].concat(c.styles):[],srs:c?n({},m.srs):{},metadataURLs:[],bbox:c?n({},m.bbox):{},llbbox:m.llbbox,dimensions:c?n({},m.dimensions):{},authorityURLs:c?n({},m.authorityURLs):{},identifiers:{},keywords:[],queryable:f&&""!==f?"1"===f||"true"===f:m.queryable||!1,cascaded:null!==g?parseInt(g):m.cascaded||0,opaque:e?"1"===
e||"true"===e:m.opaque||!1,noSubsets:null!==h?"1"===h||"true"===h:m.noSubsets||!1,fixedWidth:null!=k?parseInt(k):m.fixedWidth||0,fixedHeight:null!=l?parseInt(l):m.fixedHeight||0,minScale:m.minScale,maxScale:m.maxScale,attribution:m.attribution};b.nestedLayers.push(c);c.capability=d;this.readChildNodes(a,c);delete c.capability;c.name&&(f=c.name.split(":"),g=d.request,e=g.getfeatureinfo,0<f.length&&(c.prefix=f[0]),d.layers.push(c),void 0===c.formats&&(c.formats=g.getmap.formats),void 0===c.infoFormats&&
e&&(c.infoFormats=e.formats))},Attribution:function(a,b){b.attribution={};this.readChildNodes(a,b.attribution)},LogoURL:function(a,b){b.logo={width:a.getAttribute("width"),height:a.getAttribute("height")};this.readChildNodes(a,b.logo)},Style:function(a,b){var c={};b.styles.push(c);this.readChildNodes(a,c)},LegendURL:function(a,b){var c={width:a.getAttribute("width"),height:a.getAttribute("height")};b.legend=c;this.readChildNodes(a,c)},MetadataURL:function(a,b){var c={type:a.getAttribute("type")};
b.metadataURLs.push(c);this.readChildNodes(a,c)},DataURL:function(a,b){b.dataURL={};this.readChildNodes(a,b.dataURL)},FeatureListURL:function(a,b){b.featureListURL={};this.readChildNodes(a,b.featureListURL)},AuthorityURL:function(a,b){var c=a.getAttribute("name"),d={};this.readChildNodes(a,d);b.authorityURLs[c]=d.href},Identifier:function(a,b){var c=a.getAttribute("authority");b.identifiers[c]=this.getChildValue(a)},KeywordList:function(a,b){this.readChildNodes(a,b)},SRS:function(a,b){b.srs[this.getChildValue(a)]=
!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"});
OpenLayers.Format.WMSCapabilities.v1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMT_MS_Capabilities:function(a,b){this.readChildNodes(a,b)},Keyword:function(a,b){b.keywords&&b.keywords.push(this.getChildValue(a))},DescribeLayer:function(a,b){b.describelayer={formats:[]};this.readChildNodes(a,b.describelayer)},GetLegendGraphic:function(a,b){b.getlegendgraphic={formats:[]};this.readChildNodes(a,b.getlegendgraphic)},GetStyles:function(a,b){b.getstyles=
{formats:[]};this.readChildNodes(a,b.getstyles)},PutStyles:function(a,b){b.putstyles={formats:[]};this.readChildNodes(a,b.putstyles)},UserDefinedSymbolization:function(a,b){var c={supportSLD:1==parseInt(a.getAttribute("SupportSLD")),userLayer:1==parseInt(a.getAttribute("UserLayer")),userStyle:1==parseInt(a.getAttribute("UserStyle")),remoteWFS:1==parseInt(a.getAttribute("RemoteWFS"))};b.userSymbols=c},LatLonBoundingBox:function(a,b){b.llbbox=[parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny")),
parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))]},BoundingBox:function(a,b){var c=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[a,b]);c.srs=a.getAttribute("SRS");b.bbox[c.srs]=c},ScaleHint:function(a,b){var c=a.getAttribute("min"),d=a.getAttribute("max"),e=Math.pow(2,0.5),f=OpenLayers.INCHES_PER_UNIT.m;b.maxScale=parseFloat((c/e*f*OpenLayers.DOTS_PER_INCH).toPrecision(13));b.minScale=parseFloat((d/e*f*OpenLayers.DOTS_PER_INCH).toPrecision(13))},
Dimension:function(a,b){var c={name:a.getAttribute("name").toLowerCase(),units:a.getAttribute("units"),unitsymbol:a.getAttribute("unitSymbol")};b.dimensions[c.name]=c},Extent:function(a,b){var c=a.getAttribute("name").toLowerCase();if(c in b.dimensions){c=b.dimensions[c];c.nearestVal="1"===a.getAttribute("nearestValue");c.multipleVal="1"===a.getAttribute("multipleValues");c.current="1"===a.getAttribute("current");c["default"]=a.getAttribute("default")||"";var d=this.getChildValue(a);c.values=d.split(",")}}},
OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1"});OpenLayers.Format.WMSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.0",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(a,b){for(var c=this.getChildValue(a).split(/ +/),d=0,e=c.length;d<e;d++)b.srs[c[d]]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_0"});
OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]);a.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,
srsName:this.srsName,schema:this.schema},this.formatOptions)));!a.geometryName&&1<parseFloat(this.format.version)&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy();this.format=null;OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments);a=OpenLayers.Util.extend({},a);OpenLayers.Util.applyDefaults(a,this.options||{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),
c=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",a)]);b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),params:a.params,headers:a.headers,data:c});return b},setFeatureType:function(a){this.featureType=a;this.format.featureType=a},setGeometryName:function(a){this.geometryName=a;this.format.geometryName=a},handleRead:function(a,b){b=OpenLayers.Util.extend({},b);OpenLayers.Util.applyDefaults(b,this.options);if(b.callback){var c=
a.priv;200<=c.status&&300>c.status?(c=this.parseResponse(c,b.readOptions))&&!1!==c.success?(b.readOptions&&"object"==b.readOptions.output?OpenLayers.Util.extend(a,c):a.features=c,a.code=OpenLayers.Protocol.Response.SUCCESS):(a.code=OpenLayers.Protocol.Response.FAILURE,a.error=c):a.code=OpenLayers.Protocol.Response.FAILURE;b.callback.call(b.scope,a)}},parseResponse:function(a,b){var c=a.responseXML;c&&c.documentElement||(c=a.responseText);if(!c||0>=c.length)return null;c=null!==this.readFormat?this.readFormat.read(c):
this.format.read(c,b);if(!this.featureNS){var d=this.readFormat||this.format;this.featureNS=d.featureNS;d.autoConfig=!1;this.geometryName||this.setGeometryName(d.geometryName)}return c},commit:function(a,b){b=OpenLayers.Util.extend({},b);OpenLayers.Util.applyDefaults(b,this.options);var c=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:a});c.priv=OpenLayers.Request.POST({url:b.url,headers:b.headers,data:this.format.write(a,b),callback:this.createCallback(this.handleCommit,c,b)});
return c},handleCommit:function(a,b){if(b.callback){var c=a.priv,d=c.responseXML;d&&d.documentElement||(d=c.responseText);c=this.format.read(d)||{};a.insertIds=c.insertIds||[];c.success?a.code=OpenLayers.Protocol.Response.SUCCESS:(a.code=OpenLayers.Protocol.Response.FAILURE,a.error=c);b.callback.call(b.scope,a)}},filterDelete:function(a,b){b=OpenLayers.Util.extend({},b);OpenLayers.Util.applyDefaults(b,this.options);new OpenLayers.Protocol.Response({requestType:"commit"});var c=this.format.createElementNSPlus("wfs:Transaction",
{attributes:{service:"WFS",version:this.version}}),d=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(b.featureNS?this.featurePrefix+":":"")+b.featureType}});b.featureNS&&d.setAttribute("xmlns:"+this.featurePrefix,b.featureNS);var e=this.format.writeNode("ogc:Filter",a);d.appendChild(e);c.appendChild(d);c=OpenLayers.Format.XML.prototype.write.apply(this.format,[c]);return OpenLayers.Request.POST({url:this.url,callback:b.callback||function(){},data:c})},abort:function(a){a&&a.priv.abort()},
CLASS_NAME:"OpenLayers.Protocol.WFS.v1"});
OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,touch:!1,lastTouchPx:null,initialize:function(a,b,c){c&&c.layerOptions&&c.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{}));OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,
arguments))return!1;var a=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,a);this.map.addLayer(this.layer);return!0},createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.callback("create",[this.point.geometry,this.point]);this.point.geometry.clearBounds();
this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){if(!OpenLayers.Handler.prototype.deactivate.apply(this,arguments))return!1;this.cancel();null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1));this.layer=null;this.touch=!1;return!0},destroyFeature:function(a){!this.layer||!a&&this.persist||this.layer.destroyFeatures();this.point=null},destroyPersistedFeature:function(){var a=this.layer;a&&1<a.features.length&&this.layer.features[0].destroy()},finalize:function(a){this.mouseDown=
!1;this.lastTouchPx=this.lastUp=this.lastDown=null;this.callback(a?"cancel":"done",[this.geometryClone()]);this.destroyFeature(a)},cancel:function(){this.finalize(!0)},click:function(a){OpenLayers.Event.stop(a);return!1},dblclick:function(a){OpenLayers.Event.stop(a);return!1},modifyFeature:function(a){this.point||this.createFeature(a);a=this.layer.getLonLatFromViewPortPx(a);this.point.geometry.x=a.lon;this.point.geometry.y=a.lat;this.callback("modify",[this.point.geometry,this.point,!1]);this.point.geometry.clearBounds();
this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var a=this.point&&this.point.geometry;a&&this.multi&&(a=new OpenLayers.Geometry.MultiPoint([a]));return a},geometryClone:function(){var a=this.getGeometry();return a&&a.clone()},mousedown:function(a){return this.down(a)},touchstart:function(a){this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,
scope:this}));this.lastTouchPx=a.xy;return this.down(a)},mousemove:function(a){return this.move(a)},touchmove:function(a){this.lastTouchPx=a.xy;return this.move(a)},mouseup:function(a){return this.up(a)},touchend:function(a){a.xy=this.lastTouchPx;return this.up(a)},down:function(a){this.mouseDown=!0;this.lastDown=a.xy;this.touch||this.modifyFeature(a.xy);this.stoppedDown=this.stopDown;return!this.stopDown},move:function(a){this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(a.xy);return!0},
up:function(a){this.mouseDown=!1;this.stoppedDown=this.stopDown;if(!this.checkModifiers(a)||this.lastUp&&this.lastUp.equals(a.xy)||!this.lastDown||!this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance))return!0;this.touch&&this.modifyFeature(a.xy);this.persist&&this.destroyPersistedFeature();this.lastUp=a.xy;this.finalize();return!this.stopUp},mouseout:function(a){OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(a,
b,c){var d=!0;null!=c&&a&&b&&a.distanceTo(b)>c&&(d=!1);return d},CLASS_NAME:"OpenLayers.Handler.Point"});
OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry]));this.callback("create",[this.point.geometry,this.getSketch()]);
this.point.geometry.clearBounds();this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(a){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,a);this.line=null},destroyPersistedFeature:function(){var a=this.layer;a&&2<a.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(a){this.layer.removeFeatures([this.point]);a=this.layer.getLonLatFromViewPortPx(a);this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a.lon,
a.lat));this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length);this.layer.addFeatures([this.point]);this.callback("point",[this.point.geometry,this.getGeometry()]);this.callback("modify",[this.point.geometry,this.getSketch()]);this.drawFeature();delete this.redoStack},insertXY:function(a,b){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(a,b),this.getCurrentPointIndex());this.drawFeature();delete this.redoStack},insertDeltaXY:function(a,b){var c=this.getCurrentPointIndex()-
1,c=this.line.geometry.components[c];!c||isNaN(c.x)||isNaN(c.y)||this.insertXY(c.x+a,c.y+b)},insertDirectionLength:function(a,b){a*=Math.PI/180;var c=b*Math.cos(a),d=b*Math.sin(a);this.insertDeltaXY(c,d)},insertDeflectionLength:function(a,b){var c=this.getCurrentPointIndex()-1;if(0<c){var d=this.line.geometry.components[c],c=this.line.geometry.components[c-1],d=Math.atan2(d.y-c.y,d.x-c.x);this.insertDirectionLength(180*d/Math.PI+a,b)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-
1},undo:function(){var a=this.line.geometry,b=a.components,c=this.getCurrentPointIndex()-1,b=b[c];if(a=a.removeComponent(b))this.redoStack||(this.redoStack=[]),this.redoStack.push(b),this.drawFeature();return a},redo:function(){var a=this.redoStack&&this.redoStack.pop();a&&(this.line.geometry.addComponent(a,this.getCurrentPointIndex()),this.drawFeature());return!!a},freehandMode:function(a){return this.freehandToggle&&a[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(a,b){this.line||
this.createFeature(a);var c=this.layer.getLonLatFromViewPortPx(a);this.point.geometry.x=c.lon;this.point.geometry.y=c.lat;this.callback("modify",[this.point.geometry,this.getSketch(),b]);this.point.geometry.clearBounds();this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style);this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var a=this.line&&this.line.geometry;a&&this.multi&&(a=new OpenLayers.Geometry.MultiLineString([a]));
return a},touchstart:function(a){if(this.timerId&&this.passesTolerance(this.lastTouchPx,a.xy,this.doubleTouchTolerance))return this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1;this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null);this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300);return OpenLayers.Handler.Point.prototype.touchstart.call(this,a)},down:function(a){var b=this.stopDown;this.freehandMode(a)&&(b=!0,
this.touch&&(this.modifyFeature(a.xy,!!this.lastUp),OpenLayers.Event.stop(a)));this.touch||this.lastDown&&this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)||this.modifyFeature(a.xy,!!this.lastUp);this.mouseDown=!0;this.lastDown=a.xy;this.stoppedDown=b;return!b},move:function(a){if(this.stoppedDown&&this.freehandMode(a))return this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):
this.addPoint(a.xy),!1;this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(a.xy,!!this.lastUp);return!0},up:function(a){!this.mouseDown||this.lastUp&&this.lastUp.equals(a.xy)||(this.stoppedDown&&this.freehandMode(a)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(a.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(a.xy),this.lastUp=
a.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry()));this.stoppedDown=this.stopDown;this.mouseDown=!1;return!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]);this.removePoint();this.finalize()},dblclick:function(a){this.freehandMode(a)||this.finishGeometry();return!1},CLASS_NAME:"OpenLayers.Handler.Path"});OpenLayers.Spherical=OpenLayers.Spherical||{};
OpenLayers.Spherical.DEFAULT_RADIUS=6378137;OpenLayers.Spherical.computeDistanceBetween=function(a,b,c){c=c||OpenLayers.Spherical.DEFAULT_RADIUS;var d=Math.sin(Math.PI*(b.lon-a.lon)/360),e=Math.sin(Math.PI*(b.lat-a.lat)/360);a=e*e+d*d*Math.cos(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180);return 2*c*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};
OpenLayers.Spherical.computeHeading=function(a,b){var c=Math.sin(Math.PI*(a.lon-b.lon)/180)*Math.cos(Math.PI*b.lat/180),d=Math.cos(Math.PI*a.lat/180)*Math.sin(Math.PI*b.lat/180)-Math.sin(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180)*Math.cos(Math.PI*(a.lon-b.lon)/180);return 180*Math.atan2(c,d)/Math.PI};
OpenLayers.Control.CacheWrite=OpenLayers.Class(OpenLayers.Control,{layers:null,imageFormat:"image/png",quotaRegEx:/quota/i,setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);var b,c=this.layers||a.layers;for(b=c.length-1;0<=b;--b)this.addLayer({layer:c[b]});if(!this.layers)a.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(a){a.layer.events.on({tileloadstart:this.makeSameOrigin,tileloaded:this.cache,scope:this})},removeLayer:function(a){a.layer.events.un({tileloadstart:this.makeSameOrigin,
tileloaded:this.cache,scope:this})},makeSameOrigin:function(a){if(this.active&&(a=a.tile,a instanceof OpenLayers.Tile.Image&&!a.crossOriginKeyword&&"data:"!==a.url.substr(0,5))){var b=OpenLayers.Request.makeSameOrigin(a.url,OpenLayers.ProxyHost);OpenLayers.Control.CacheWrite.urlMap[b]=a.url;a.url=b}},cache:function(a){if(this.active&&window.localStorage&&(a=a.tile,a instanceof OpenLayers.Tile.Image&&"data:"!==a.url.substr(0,5)))try{var b=a.getCanvasContext();if(b){var c=OpenLayers.Control.CacheWrite.urlMap;
window.localStorage.setItem("olCache_"+(c[a.url]||a.url),b.canvas.toDataURL(this.imageFormat));delete c[a.url]}}catch(d){(b=d.name||d.message)&&this.quotaRegEx.test(b)?this.events.triggerEvent("cachefull",{tile:a}):OpenLayers.Console.error(d.toString())}},destroy:function(){if(this.layers||this.map){var a,b=this.layers||this.map.layers;for(a=b.length-1;0<=a;--a)this.removeLayer({layer:b[a]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this});OpenLayers.Control.prototype.destroy.apply(this,
arguments)},CLASS_NAME:"OpenLayers.Control.CacheWrite"});OpenLayers.Control.CacheWrite.clearCache=function(){if(window.localStorage){var a,b;for(a=window.localStorage.length-1;0<=a;--a)b=window.localStorage.key(a),"olCache_"===b.substr(0,8)&&window.localStorage.removeItem(b)}};OpenLayers.Control.CacheWrite.urlMap={};
OpenLayers.Control.PanPanel=OpenLayers.Class(OpenLayers.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);a={slideFactor:this.slideFactor,slideRatio:this.slideRatio};this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST,a),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST,a)])},
CLASS_NAME:"OpenLayers.Control.PanPanel"});
OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this});OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,
addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this});this.updateAttribution();return this.div},updateAttribution:function(){var a=[];if(this.map&&this.map.layers){for(var b=0,c=this.map.layers.length;b<c;b++){var d=this.map.layers[b];d.attribution&&d.getVisibility()&&-1===OpenLayers.Util.indexOf(a,d.attribution)&&a.push(d.attribution)}this.div.innerHTML=OpenLayers.String.format(this.template,{layers:a.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"});
OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:0.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(a){OpenLayers.Util.extend(this,a)},begin:function(){OpenLayers.Animation.stop(this.timerId);this.timerId=void 0;this.points=[]},update:function(a){this.points.unshift({xy:a,tick:(new Date).getTime()});this.points.length>this.nbPoints&&this.points.pop()},end:function(a){for(var b,c=(new Date).getTime(),d=0,e=this.points.length,f;d<e;d++){f=this.points[d];if(c-
f.tick>this.delay)break;b=f}if(b&&(d=(new Date).getTime()-b.tick,c=Math.sqrt(Math.pow(a.x-b.xy.x,2)+Math.pow(a.y-b.xy.y,2)),d=c/d,!(0==d||d<this.threshold)))return c=Math.asin((a.y-b.xy.y)/c),b.xy.x<=a.x&&(c=Math.PI-c),{speed:d,theta:c}},move:function(a,b){var c=a.speed,d=Math.cos(a.theta),e=-Math.sin(a.theta),f=(new Date).getTime(),g=0,h=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(null!=this.timerId){var a=(new Date).getTime()-f,l=-this.deceleration*Math.pow(a,
2)/2+c*a,m=l*d,l=l*e,n,p;n=!1;0>=-this.deceleration*a+c&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,n=!0);a=m-g;p=l-h;g=m;h=l;b(a,p,n)}},this))},CLASS_NAME:"OpenLayers.Kinetic"});
OpenLayers.Layer.GeoRSS=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,icon:null,popupSize:null,useFeedTitle:!0,initialize:function(a,b,c){OpenLayers.Layer.Markers.prototype.initialize.apply(this,[a,c]);this.location=b;this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments);this.clearFeatures();this.features=null},loadRSS:function(){this.loaded||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,
success:this.parseData,scope:this}),this.loaded=!0)},moveTo:function(a,b,c){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments);this.visibility&&!this.loaded&&this.loadRSS()},parseData:function(a){var b=a.responseXML;b&&b.documentElement||(b=OpenLayers.Format.XML.prototype.read(a.responseText));if(this.useFeedTitle){a=null;try{a=b.getElementsByTagNameNS("*","title")[0].firstChild.nodeValue}catch(c){a=b.getElementsByTagName("title")[0].firstChild.nodeValue}a&&this.setName(a)}a={};OpenLayers.Util.extend(a,
this.formatOptions);this.map&&!this.projection.equals(this.map.getProjectionObject())&&(a.externalProjection=this.projection,a.internalProjection=this.map.getProjectionObject());b=(new OpenLayers.Format.GeoRSS(a)).read(b);a=0;for(var d=b.length;a<d;a++){var e={},f=b[a];if(f.geometry){var g=f.attributes.title?f.attributes.title:"Untitled",h=f.attributes.description?f.attributes.description:"No description.",k=f.attributes.link?f.attributes.link:"",f=f.geometry.getBounds().getCenterLonLat();e.icon=
null==this.icon?OpenLayers.Marker.defaultIcon():this.icon.clone();e.popupSize=this.popupSize?this.popupSize.clone():new OpenLayers.Size(250,120);if(g||h){e.title=g;e.description=h;var l='<div class="olLayerGeoRSSClose">[x]</div>',l=l+'<div class="olLayerGeoRSSTitle">';k&&(l+='<a class="link" href="'+k+'" target="_blank">');l+=g;k&&(l+="</a>");l+="</div>";l+='<div style="" class="olLayerGeoRSSDescription">';l+=h;l+="</div>";e.popupContentHTML=l}f=new OpenLayers.Feature(this,f,e);this.features.push(f);
e=f.createMarker();e.events.register("click",f,this.markerClick);this.addMarker(e)}}this.events.triggerEvent("loadend")},markerClick:function(a){var b=this==this.layer.selectedFeature;this.layer.selectedFeature=b?null:this;for(var c=0,d=this.layer.map.popups.length;c<d;c++)this.layer.map.removePopup(this.layer.map.popups[c]);b||(b=this.createPopup(),OpenLayers.Event.observe(b.div,"click",OpenLayers.Function.bind(function(){for(var a=0,b=this.layer.map.popups.length;a<b;a++)this.layer.map.removePopup(this.layer.map.popups[a])},
this)),this.layer.map.addPopup(b));OpenLayers.Event.stop(a)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var a=this.features[0];OpenLayers.Util.removeItem(this.features,a);a.destroy()}},CLASS_NAME:"OpenLayers.Layer.GeoRSS"});
OpenLayers.Format.WMSCapabilities.v1_3=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMS_Capabilities:function(a,b){this.readChildNodes(a,b)},LayerLimit:function(a,b){b.layerLimit=parseInt(this.getChildValue(a))},MaxWidth:function(a,b){b.maxWidth=parseInt(this.getChildValue(a))},MaxHeight:function(a,b){b.maxHeight=parseInt(this.getChildValue(a))},BoundingBox:function(a,b){var c=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,
[a,b]);c.srs=a.getAttribute("CRS");b.bbox[c.srs]=c},CRS:function(a,b){this.readers.wms.SRS.apply(this,[a,b])},EX_GeographicBoundingBox:function(a,b){b.llbbox=[];this.readChildNodes(a,b.llbbox)},westBoundLongitude:function(a,b){b[0]=this.getChildValue(a)},eastBoundLongitude:function(a,b){b[2]=this.getChildValue(a)},southBoundLatitude:function(a,b){b[1]=this.getChildValue(a)},northBoundLatitude:function(a,b){b[3]=this.getChildValue(a)},MinScaleDenominator:function(a,b){b.maxScale=parseFloat(this.getChildValue(a)).toPrecision(16)},
MaxScaleDenominator:function(a,b){b.minScale=parseFloat(this.getChildValue(a)).toPrecision(16)},Dimension:function(a,b){var c={name:a.getAttribute("name").toLowerCase(),units:a.getAttribute("units"),unitsymbol:a.getAttribute("unitSymbol"),nearestVal:"1"===a.getAttribute("nearestValue"),multipleVal:"1"===a.getAttribute("multipleValues"),"default":a.getAttribute("default")||"",current:"1"===a.getAttribute("current"),values:this.getChildValue(a).split(",")};b.dimensions[c.name]=c},Keyword:function(a,
b){var c={value:this.getChildValue(a),vocabulary:a.getAttribute("vocabulary")};b.keywords&&b.keywords.push(c)}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),sld:{UserDefinedSymbolization:function(a,b){this.readers.wms.UserDefinedSymbolization.apply(this,[a,b]);b.userSymbols.inlineFeature=1==parseInt(a.getAttribute("InlineFeature"));b.userSymbols.remoteWCS=1==parseInt(a.getAttribute("RemoteWCS"))},DescribeLayer:function(a,b){this.readers.wms.DescribeLayer.apply(this,[a,b])},GetLegendGraphic:function(a,
b){this.readers.wms.GetLegendGraphic.apply(this,[a,b])}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3"});OpenLayers.Format.SOSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.SOSCapabilities"});
OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(a,b,c,d){var e=[];c=OpenLayers.Util.upperCaseObject(c);1.3<=parseFloat(c.VERSION)&&!c.EXCEPTIONS&&(c.EXCEPTIONS="INIMAGE");e.push(a,b,c,d);OpenLayers.Layer.Grid.prototype.initialize.apply(this,e);OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));
!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=d&&d.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},clone:function(a){null==a&&(a=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},reverseAxisOrder:function(){var a=this.projection.getCode();return 1.3<=parseFloat(this.params.VERSION)&&
!(!this.yx[a]&&!OpenLayers.Projection.defaults[a].yx)},getURL:function(a){a=this.adjustBounds(a);var b=this.getImageSize(),c={},d=this.reverseAxisOrder();c.BBOX=this.encodeBBOX?a.toBBOX(null,d):a.toArray(d);c.WIDTH=b.w;c.HEIGHT=b.h;return this.getFullRequestString(c)},mergeNewParams:function(a){a=[OpenLayers.Util.upperCaseObject(a)];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},getFullRequestString:function(a,b){var c=this.map.getProjectionObject(),c=this.projection&&this.projection.equals(c)?
this.projection.getCode():c.getCode(),c="none"==c?null:c;1.3<=parseFloat(this.params.VERSION)?this.params.CRS=c:this.params.SRS=c;"boolean"==typeof this.params.TRANSPARENT&&(a.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE");return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"});
OpenLayers.Layer.KaMap=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,DEFAULT_PARAMS:{i:"jpeg",map:""},initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments);this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round(1E4*this.map.getScale())/1E4,d=Math.round(a.left/b);a=-Math.round(a.top/b);return this.getFullRequestString({t:a,l:d,s:c})},calculateGridLayout:function(a,
b,c){b=c*this.tileSize.w;c*=this.tileSize.h;var d=a.left,e=Math.floor(d/b)-this.buffer,d=-(d/b-e)*this.tileSize.w,e=e*b;a=a.top;var f=Math.ceil(a/c)+this.buffer;return{tilelon:b,tilelat:c,tileoffsetlon:e,tileoffsetlat:f*c,tileoffsetx:d,tileoffsety:-(f-a/c+1)*this.tileSize.h}},clone:function(a){null==a&&(a=new OpenLayers.Layer.KaMap(this.name,this.url,this.params,this.getOptions()));a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a]);null!=this.tileSize&&(a.tileSize=this.tileSize.clone());a.grid=
[];return a},getTileBounds:function(a){var b=this.getResolution(),c=b*this.tileSize.w,b=b*this.tileSize.h,d=this.getLonLatFromViewPortPx(a);a=c*Math.floor(d.lon/c);d=b*Math.floor(d.lat/b);return new OpenLayers.Bounds(a,d,a+c,d+b)},CLASS_NAME:"OpenLayers.Layer.KaMap"});
OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",layerToContext:function(a){var b=this.getParser(),c={queryable:a.queryable,visibility:a.visibility,name:a.params.LAYERS,title:a.name,"abstract":a.metadata["abstract"],dataURL:a.metadata.dataURL,metadataURL:a.metadataURL,server:{version:a.params.VERSION,url:a.url},maxExtent:a.maxExtent,transparent:a.params.TRANSPARENT,numZoomLevels:a.numZoomLevels,units:a.units,isBaseLayer:a.isBaseLayer,opacity:1==a.opacity?void 0:
a.opacity,displayInLayerSwitcher:a.displayInLayerSwitcher,singleTile:a.singleTile,tileSize:a.singleTile||!a.tileSize?void 0:{width:a.tileSize.w,height:a.tileSize.h},minScale:a.options.resolutions||a.options.scales||a.options.maxResolution||a.options.minScale?a.minScale:void 0,maxScale:a.options.resolutions||a.options.scales||a.options.minResolution||a.options.maxScale?a.maxScale:void 0,formats:[],styles:[],srs:a.srs,dimensions:a.dimensions};a.metadata.servertitle&&(c.server.title=a.metadata.servertitle);
if(a.metadata.formats&&0<a.metadata.formats.length)for(var d=0,e=a.metadata.formats.length;d<e;d++){var f=a.metadata.formats[d];c.formats.push({value:f.value,current:f.value==a.params.FORMAT})}else c.formats.push({value:a.params.FORMAT,current:!0});if(a.metadata.styles&&0<a.metadata.styles.length)for(d=0,e=a.metadata.styles.length;d<e;d++)b=a.metadata.styles[d],b.current=b.href==a.params.SLD||b.body==a.params.SLD_BODY||b.name==a.params.STYLES?!0:!1,c.styles.push(b);else c.styles.push({href:a.params.SLD,
body:a.params.SLD_BODY,name:a.params.STYLES||b.defaultStyleName,title:b.defaultStyleTitle,current:!0});return c},toContext:function(a){var b={},c=a.layers;if("OpenLayers.Map"==a.CLASS_NAME){var d=a.metadata||{};b.size=a.getSize();b.bounds=a.getExtent();b.projection=a.projection;b.title=a.title;b.keywords=d.keywords;b["abstract"]=d["abstract"];b.logo=d.logo;b.descriptionURL=d.descriptionURL;b.contactInformation=d.contactInformation;b.maxExtent=a.maxExtent}else OpenLayers.Util.applyDefaults(b,a),void 0!=
b.layers&&delete b.layers;void 0==b.layersContext&&(b.layersContext=[]);if(void 0!=c&&OpenLayers.Util.isArray(c))for(a=0,d=c.length;a<d;a++){var e=c[a];e instanceof OpenLayers.Layer.WMS&&b.layersContext.push(this.layerToContext(e))}return b},CLASS_NAME:"OpenLayers.Format.WMC"});
OpenLayers.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(a){var b=null;if(null==a)b=this.namespaces[this.defaultPrefix];else for(b in this.namespaces)if(this.namespaces[b]==a)break;return b},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",
defaultStyleTitle:"Default",initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a=a.documentElement;this.rootPrefix=a.prefix;var b={version:a.getAttribute("version")};this.runChildNodes(b,a);return b},runChildNodes:function(a,b){for(var c=b.childNodes,d,e,f,g=0,h=c.length;g<h;++g)d=c[g],1==d.nodeType&&(e=this.getNamespacePrefix(d.namespaceURI),f=d.nodeName.split(":").pop(),
(e=this["read_"+e+"_"+f])&&e.apply(this,[a,d]))},read_wmc_General:function(a,b){this.runChildNodes(a,b)},read_wmc_BoundingBox:function(a,b){a.projection=b.getAttribute("SRS");a.bounds=new OpenLayers.Bounds(b.getAttribute("minx"),b.getAttribute("miny"),b.getAttribute("maxx"),b.getAttribute("maxy"))},read_wmc_LayerList:function(a,b){a.layersContext=[];this.runChildNodes(a,b)},read_wmc_Layer:function(a,b){var c={visibility:"1"!=b.getAttribute("hidden"),queryable:"1"==b.getAttribute("queryable"),formats:[],
styles:[],metadata:{}};this.runChildNodes(c,b);a.layersContext.push(c)},read_wmc_Extension:function(a,b){this.runChildNodes(a,b)},read_ol_units:function(a,b){a.units=this.getChildValue(b)},read_ol_maxExtent:function(a,b){var c=new OpenLayers.Bounds(b.getAttribute("minx"),b.getAttribute("miny"),b.getAttribute("maxx"),b.getAttribute("maxy"));a.maxExtent=c},read_ol_transparent:function(a,b){a.transparent=this.getChildValue(b)},read_ol_numZoomLevels:function(a,b){a.numZoomLevels=parseInt(this.getChildValue(b))},
read_ol_opacity:function(a,b){a.opacity=parseFloat(this.getChildValue(b))},read_ol_singleTile:function(a,b){a.singleTile="true"==this.getChildValue(b)},read_ol_tileSize:function(a,b){var c={width:b.getAttribute("width"),height:b.getAttribute("height")};a.tileSize=c},read_ol_isBaseLayer:function(a,b){a.isBaseLayer="true"==this.getChildValue(b)},read_ol_displayInLayerSwitcher:function(a,b){a.displayInLayerSwitcher="true"==this.getChildValue(b)},read_wmc_Server:function(a,b){a.version=b.getAttribute("version");
a.url=this.getOnlineResource_href(b);a.metadata.servertitle=b.getAttribute("title")},read_wmc_FormatList:function(a,b){this.runChildNodes(a,b)},read_wmc_Format:function(a,b){var c={value:this.getChildValue(b)};"1"==b.getAttribute("current")&&(c.current=!0);a.formats.push(c)},read_wmc_StyleList:function(a,b){this.runChildNodes(a,b)},read_wmc_Style:function(a,b){var c={};this.runChildNodes(c,b);"1"==b.getAttribute("current")&&(c.current=!0);a.styles.push(c)},read_wmc_SLD:function(a,b){this.runChildNodes(a,
b)},read_sld_StyledLayerDescriptor:function(a,b){var c=OpenLayers.Format.XML.prototype.write.apply(this,[b]);a.body=c},read_sld_FeatureTypeStyle:function(a,b){var c=OpenLayers.Format.XML.prototype.write.apply(this,[b]);a.body=c},read_wmc_OnlineResource:function(a,b){a.href=this.getAttributeNS(b,this.namespaces.xlink,"href")},read_wmc_Name:function(a,b){var c=this.getChildValue(b);c&&(a.name=c)},read_wmc_Title:function(a,b){var c=this.getChildValue(b);c&&(a.title=c)},read_wmc_MetadataURL:function(a,
b){a.metadataURL=this.getOnlineResource_href(b)},read_wmc_KeywordList:function(a,b){a.keywords=[];this.runChildNodes(a.keywords,b)},read_wmc_Keyword:function(a,b){a.push(this.getChildValue(b))},read_wmc_Abstract:function(a,b){var c=this.getChildValue(b);c&&(a["abstract"]=c)},read_wmc_LogoURL:function(a,b){a.logo={width:b.getAttribute("width"),height:b.getAttribute("height"),format:b.getAttribute("format"),href:this.getOnlineResource_href(b)}},read_wmc_DescriptionURL:function(a,b){a.descriptionURL=
this.getOnlineResource_href(b)},read_wmc_ContactInformation:function(a,b){var c={};this.runChildNodes(c,b);a.contactInformation=c},read_wmc_ContactPersonPrimary:function(a,b){var c={};this.runChildNodes(c,b);a.personPrimary=c},read_wmc_ContactPerson:function(a,b){var c=this.getChildValue(b);c&&(a.person=c)},read_wmc_ContactOrganization:function(a,b){var c=this.getChildValue(b);c&&(a.organization=c)},read_wmc_ContactPosition:function(a,b){var c=this.getChildValue(b);c&&(a.position=c)},read_wmc_ContactAddress:function(a,
b){var c={};this.runChildNodes(c,b);a.contactAddress=c},read_wmc_AddressType:function(a,b){var c=this.getChildValue(b);c&&(a.type=c)},read_wmc_Address:function(a,b){var c=this.getChildValue(b);c&&(a.address=c)},read_wmc_City:function(a,b){var c=this.getChildValue(b);c&&(a.city=c)},read_wmc_StateOrProvince:function(a,b){var c=this.getChildValue(b);c&&(a.stateOrProvince=c)},read_wmc_PostCode:function(a,b){var c=this.getChildValue(b);c&&(a.postcode=c)},read_wmc_Country:function(a,b){var c=this.getChildValue(b);
c&&(a.country=c)},read_wmc_ContactVoiceTelephone:function(a,b){var c=this.getChildValue(b);c&&(a.phone=c)},read_wmc_ContactFacsimileTelephone:function(a,b){var c=this.getChildValue(b);c&&(a.fax=c)},read_wmc_ContactElectronicMailAddress:function(a,b){var c=this.getChildValue(b);c&&(a.email=c)},read_wmc_DataURL:function(a,b){a.dataURL=this.getOnlineResource_href(b)},read_wmc_LegendURL:function(a,b){var c={width:b.getAttribute("width"),height:b.getAttribute("height"),format:b.getAttribute("format"),
href:this.getOnlineResource_href(b)};a.legend=c},read_wmc_DimensionList:function(a,b){a.dimensions={};this.runChildNodes(a.dimensions,b)},read_wmc_Dimension:function(a,b){var c={name:b.getAttribute("name").toLowerCase(),units:b.getAttribute("units")||"",unitSymbol:b.getAttribute("unitSymbol")||"",userValue:b.getAttribute("userValue")||"",nearestValue:"1"===b.getAttribute("nearestValue"),multipleValues:"1"===b.getAttribute("multipleValues"),current:"1"===b.getAttribute("current"),"default":b.getAttribute("default")||
""},d=this.getChildValue(b);c.values=d.split(",");a[c.name]=c},write:function(a,b){var c=this.createElementDefaultNS("ViewContext");this.setAttributes(c,{version:this.VERSION,id:b&&"string"==typeof b.id?b.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")});this.setAttributeNS(c,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);c.appendChild(this.write_wmc_General(a));c.appendChild(this.write_wmc_LayerList(a));return OpenLayers.Format.XML.prototype.write.apply(this,[c])},createElementDefaultNS:function(a,
b,c){a=this.createElementNS(this.namespaces[this.defaultPrefix],a);b&&a.appendChild(this.createTextNode(b));c&&this.setAttributes(a,c);return a},setAttributes:function(a,b){var c,d;for(d in b)c=b[d].toString(),c.match(/[A-Z]/)?this.setAttributeNS(a,null,d,c):a.setAttribute(d,c)},write_wmc_General:function(a){var b=this.createElementDefaultNS("General");a.size&&b.appendChild(this.createElementDefaultNS("Window",null,{width:a.size.w,height:a.size.h}));var c=a.bounds;b.appendChild(this.createElementDefaultNS("BoundingBox",
null,{minx:c.left.toPrecision(18),miny:c.bottom.toPrecision(18),maxx:c.right.toPrecision(18),maxy:c.top.toPrecision(18),SRS:a.projection}));b.appendChild(this.createElementDefaultNS("Title",a.title));a.keywords&&b.appendChild(this.write_wmc_KeywordList(a.keywords));a["abstract"]&&b.appendChild(this.createElementDefaultNS("Abstract",a["abstract"]));a.logo&&b.appendChild(this.write_wmc_URLType("LogoURL",a.logo.href,a.logo));a.descriptionURL&&b.appendChild(this.write_wmc_URLType("DescriptionURL",a.descriptionURL));
a.contactInformation&&b.appendChild(this.write_wmc_ContactInformation(a.contactInformation));b.appendChild(this.write_ol_MapExtension(a));return b},write_wmc_KeywordList:function(a){for(var b=this.createElementDefaultNS("KeywordList"),c=0,d=a.length;c<d;c++)b.appendChild(this.createElementDefaultNS("Keyword",a[c]));return b},write_wmc_ContactInformation:function(a){var b=this.createElementDefaultNS("ContactInformation");a.personPrimary&&b.appendChild(this.write_wmc_ContactPersonPrimary(a.personPrimary));
a.position&&b.appendChild(this.createElementDefaultNS("ContactPosition",a.position));a.contactAddress&&b.appendChild(this.write_wmc_ContactAddress(a.contactAddress));a.phone&&b.appendChild(this.createElementDefaultNS("ContactVoiceTelephone",a.phone));a.fax&&b.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone",a.fax));a.email&&b.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress",a.email));return b},write_wmc_ContactPersonPrimary:function(a){var b=this.createElementDefaultNS("ContactPersonPrimary");
a.person&&b.appendChild(this.createElementDefaultNS("ContactPerson",a.person));a.organization&&b.appendChild(this.createElementDefaultNS("ContactOrganization",a.organization));return b},write_wmc_ContactAddress:function(a){var b=this.createElementDefaultNS("ContactAddress");a.type&&b.appendChild(this.createElementDefaultNS("AddressType",a.type));a.address&&b.appendChild(this.createElementDefaultNS("Address",a.address));a.city&&b.appendChild(this.createElementDefaultNS("City",a.city));a.stateOrProvince&&
b.appendChild(this.createElementDefaultNS("StateOrProvince",a.stateOrProvince));a.postcode&&b.appendChild(this.createElementDefaultNS("PostCode",a.postcode));a.country&&b.appendChild(this.createElementDefaultNS("Country",a.country));return b},write_ol_MapExtension:function(a){var b=this.createElementDefaultNS("Extension");if(a=a.maxExtent){var c=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(c,{minx:a.left.toPrecision(18),miny:a.bottom.toPrecision(18),maxx:a.right.toPrecision(18),
maxy:a.top.toPrecision(18)});b.appendChild(c)}return b},write_wmc_LayerList:function(a){for(var b=this.createElementDefaultNS("LayerList"),c=0,d=a.layersContext.length;c<d;++c)b.appendChild(this.write_wmc_Layer(a.layersContext[c]));return b},write_wmc_Layer:function(a){var b=this.createElementDefaultNS("Layer",null,{queryable:a.queryable?"1":"0",hidden:a.visibility?"0":"1"});b.appendChild(this.write_wmc_Server(a));b.appendChild(this.createElementDefaultNS("Name",a.name));b.appendChild(this.createElementDefaultNS("Title",
a.title));a["abstract"]&&b.appendChild(this.createElementDefaultNS("Abstract",a["abstract"]));a.dataURL&&b.appendChild(this.write_wmc_URLType("DataURL",a.dataURL));a.metadataURL&&b.appendChild(this.write_wmc_URLType("MetadataURL",a.metadataURL));return b},write_wmc_LayerExtension:function(a){var b=this.createElementDefaultNS("Extension"),c=a.maxExtent,d=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(d,{minx:c.left.toPrecision(18),miny:c.bottom.toPrecision(18),maxx:c.right.toPrecision(18),
maxy:c.top.toPrecision(18)});b.appendChild(d);a.tileSize&&!a.singleTile&&(c=this.createElementNS(this.namespaces.ol,"ol:tileSize"),this.setAttributes(c,a.tileSize),b.appendChild(c));for(var c="transparent numZoomLevels units isBaseLayer opacity displayInLayerSwitcher singleTile".split(" "),e=0,f=c.length;e<f;++e)(d=this.createOLPropertyNode(a,c[e]))&&b.appendChild(d);return b},createOLPropertyNode:function(a,b){var c=null;null!=a[b]&&(c=this.createElementNS(this.namespaces.ol,"ol:"+b),c.appendChild(this.createTextNode(a[b].toString())));
return c},write_wmc_Server:function(a){a=a.server;var b=this.createElementDefaultNS("Server"),c={service:"OGC:WMS",version:a.version};a.title&&(c.title=a.title);this.setAttributes(b,c);b.appendChild(this.write_wmc_OnlineResource(a.url));return b},write_wmc_URLType:function(a,b,c){a=this.createElementDefaultNS(a);a.appendChild(this.write_wmc_OnlineResource(b));if(c){b=["width","height","format"];for(var d=0;d<b.length;d++)b[d]in c&&a.setAttribute(b[d],c[b[d]])}return a},write_wmc_DimensionList:function(a){var b=
this.createElementDefaultNS("DimensionList"),c;for(c in a.dimensions){var d={},e=a.dimensions[c],f;for(f in e)d[f]="boolean"==typeof e[f]?Number(e[f]):e[f];e="";d.values&&(e=d.values.join(","),delete d.values);b.appendChild(this.createElementDefaultNS("Dimension",e,d))}return b},write_wmc_FormatList:function(a){for(var b=this.createElementDefaultNS("FormatList"),c=0,d=a.formats.length;c<d;c++){var e=a.formats[c];b.appendChild(this.createElementDefaultNS("Format",e.value,e.current&&!0==e.current?{current:"1"}:
null))}return b},write_wmc_StyleList:function(a){var b=this.createElementDefaultNS("StyleList");if((a=a.styles)&&OpenLayers.Util.isArray(a))for(var c,d=0,e=a.length;d<e;d++){var f=a[d],g=this.createElementDefaultNS("Style",null,f.current&&!0==f.current?{current:"1"}:null);f.href?(c=this.createElementDefaultNS("SLD"),f.name&&c.appendChild(this.createElementDefaultNS("Name",f.name)),f.title&&c.appendChild(this.createElementDefaultNS("Title",f.title)),f.legend&&c.appendChild(this.write_wmc_URLType("LegendURL",
f.legend.href,f.legend)),f=this.write_wmc_OnlineResource(f.href),c.appendChild(f),g.appendChild(c)):f.body?(c=this.createElementDefaultNS("SLD"),f.name&&c.appendChild(this.createElementDefaultNS("Name",f.name)),f.title&&c.appendChild(this.createElementDefaultNS("Title",f.title)),f.legend&&c.appendChild(this.write_wmc_URLType("LegendURL",f.legend.href,f.legend)),f=OpenLayers.Format.XML.prototype.read.apply(this,[f.body]).documentElement,c.ownerDocument&&c.ownerDocument.importNode&&(f=c.ownerDocument.importNode(f,
!0)),c.appendChild(f),g.appendChild(c)):(g.appendChild(this.createElementDefaultNS("Name",f.name)),g.appendChild(this.createElementDefaultNS("Title",f.title)),f["abstract"]&&g.appendChild(this.createElementDefaultNS("Abstract",f["abstract"])),f.legend&&g.appendChild(this.write_wmc_URLType("LegendURL",f.legend.href,f.legend)));b.appendChild(g)}return b},write_wmc_OnlineResource:function(a){var b=this.createElementDefaultNS("OnlineResource");this.setAttributeNS(b,this.namespaces.xlink,"xlink:type",
"simple");this.setAttributeNS(b,this.namespaces.xlink,"xlink:href",a);return b},getOnlineResource_href:function(a){var b={};a=a.getElementsByTagName("OnlineResource");0<a.length&&this.read_wmc_OnlineResource(b,a[0]);return b.href},CLASS_NAME:"OpenLayers.Format.WMC.v1"});
OpenLayers.Format.WMC.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",initialize:function(a){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[a])},read_sld_MinScaleDenominator:function(a,b){var c=parseFloat(this.getChildValue(b));0<c&&(a.maxScale=c)},read_sld_MaxScaleDenominator:function(a,b){a.minScale=parseFloat(this.getChildValue(b))},read_wmc_SRS:function(a,b){"srs"in
a||(a.srs={});a.srs[this.getChildValue(b)]=!0},write_wmc_Layer:function(a){var b=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[a]);if(a.maxScale){var c=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator");c.appendChild(this.createTextNode(a.maxScale.toPrecision(16)));b.appendChild(c)}a.minScale&&(c=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator"),c.appendChild(this.createTextNode(a.minScale.toPrecision(16))),b.appendChild(c));if(a.srs)for(var d in a.srs)b.appendChild(this.createElementDefaultNS("SRS",
d));b.appendChild(this.write_wmc_FormatList(a));b.appendChild(this.write_wmc_StyleList(a));a.dimensions&&b.appendChild(this.write_wmc_DimensionList(a));b.appendChild(this.write_wmc_LayerExtension(a));return b},CLASS_NAME:"OpenLayers.Format.WMC.v1_1_0"});OpenLayers.Format.XLS=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",stringifyOutput:!0,CLASS_NAME:"OpenLayers.Format.XLS"});
OpenLayers.Format.XLS.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xls:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},xy:!0,defaultPrefix:"xls",schemaLocation:null,read:function(a,b){OpenLayers.Util.applyDefaults(b,this.options);var c={};this.readChildNodes(a,c);return c},readers:{xls:{XLS:function(a,b){b.version=a.getAttribute("version");
this.readChildNodes(a,b)},Response:function(a,b){this.readChildNodes(a,b)},GeocodeResponse:function(a,b){b.responseLists=[];this.readChildNodes(a,b)},GeocodeResponseList:function(a,b){var c={features:[],numberOfGeocodedAddresses:parseInt(a.getAttribute("numberOfGeocodedAddresses"))};b.responseLists.push(c);this.readChildNodes(a,c)},GeocodedAddress:function(a,b){var c=new OpenLayers.Feature.Vector;b.features.push(c);this.readChildNodes(a,c);c.geometry=c.components[0]},GeocodeMatchCode:function(a,b){b.attributes.matchCode=
{accuracy:parseFloat(a.getAttribute("accuracy")),matchType:a.getAttribute("matchType")}},Address:function(a,b){var c={countryCode:a.getAttribute("countryCode"),addressee:a.getAttribute("addressee"),street:[],place:[]};b.attributes.address=c;this.readChildNodes(a,c)},freeFormAddress:function(a,b){b.freeFormAddress=this.getChildValue(a)},StreetAddress:function(a,b){this.readChildNodes(a,b)},Building:function(a,b){b.building={number:a.getAttribute("number"),subdivision:a.getAttribute("subdivision"),
buildingName:a.getAttribute("buildingName")}},Street:function(a,b){b.street.push(this.getChildValue(a))},Place:function(a,b){b.place[a.getAttribute("type")]=this.getChildValue(a)},PostalCode:function(a,b){b.postalCode=this.getChildValue(a)}},gml:OpenLayers.Format.GML.v3.prototype.readers.gml},write:function(a){return this.writers.xls.XLS.apply(this,[a])},writers:{xls:{XLS:function(a){var b=this.createElementNSPlus("xls:XLS",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});
this.writeNode("RequestHeader",a.header,b);this.writeNode("Request",a,b);return b},RequestHeader:function(a){return this.createElementNSPlus("xls:RequestHeader")},Request:function(a){var b=this.createElementNSPlus("xls:Request",{attributes:{methodName:"GeocodeRequest",requestID:a.requestID||"",version:this.VERSION}});this.writeNode("GeocodeRequest",a.addresses,b);return b},GeocodeRequest:function(a){for(var b=this.createElementNSPlus("xls:GeocodeRequest"),c=0,d=a.length;c<d;c++)this.writeNode("Address",
a[c],b);return b},Address:function(a){var b=this.createElementNSPlus("xls:Address",{attributes:{countryCode:a.countryCode}});a.freeFormAddress?this.writeNode("freeFormAddress",a.freeFormAddress,b):(a.street&&this.writeNode("StreetAddress",a,b),a.municipality&&this.writeNode("Municipality",a.municipality,b),a.countrySubdivision&&this.writeNode("CountrySubdivision",a.countrySubdivision,b),a.postalCode&&this.writeNode("PostalCode",a.postalCode,b));return b},freeFormAddress:function(a){return this.createElementNSPlus("freeFormAddress",
{value:a})},StreetAddress:function(a){var b=this.createElementNSPlus("xls:StreetAddress");a.building&&this.writeNode(b,"Building",a.building);a=a.street;OpenLayers.Util.isArray(a)||(a=[a]);for(var c=0,d=a.length;c<d;c++)this.writeNode("Street",a[c],b);return b},Building:function(a){return this.createElementNSPlus("xls:Building",{attributes:{number:a.number,subdivision:a.subdivision,buildingName:a.buildingName}})},Street:function(a){return this.createElementNSPlus("xls:Street",{value:a})},Municipality:function(a){return this.createElementNSPlus("xls:Place",
{attributes:{type:"Municipality"},value:a})},CountrySubdivision:function(a){return this.createElementNSPlus("xls:Place",{attributes:{type:"CountrySubdivision"},value:a})},PostalCode:function(a){return this.createElementNSPlus("xls:PostalCode",{value:a})}}},CLASS_NAME:"OpenLayers.Format.XLS.v1"});OpenLayers.Format.XLS.v1_1_0=OpenLayers.Class(OpenLayers.Format.XLS.v1,{VERSION:"1.1",schemaLocation:"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",CLASS_NAME:"OpenLayers.Format.XLS.v1_1_0"});
OpenLayers.Format.XLS.v1_1=OpenLayers.Format.XLS.v1_1_0;
OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15E3,translationParameters:null,symbolMetrics:null,initialize:function(a){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG",
"1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(a,b,c){a+=c?0:this.translationParameters.x;b+=c?0:this.translationParameters.y;return a>=-this.MAX_PIXEL&&a<=this.MAX_PIXEL&&b>=-this.MAX_PIXEL&&b<=this.MAX_PIXEL},setExtent:function(a,b){var c=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),d=this.getResolution(),e=-a.left/d,d=a.top/d;if(b)return this.left=e,this.top=d,this.rendererRoot.setAttributeNS(null,
"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0;(e=this.translate(e-this.left+this.xOffset,d-this.top))||this.setExtent(a,!0);return c&&e},translate:function(a,b){if(this.inValidRange(a,b,!0)){var c="";if(a||b)c="translate("+a+","+b+")";this.root.setAttributeNS(null,"transform",c);this.translationParameters={x:a,y:b};return!0}return!1},setSize:function(a){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);this.rendererRoot.setAttributeNS(null,"width",this.size.w);
this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(a,b){var c=null;switch(a.CLASS_NAME){case "OpenLayers.Geometry.Point":c=b.externalGraphic?"image":this.isComplexSymbol(b.graphicName)?"svg":"circle";break;case "OpenLayers.Geometry.Rectangle":c="rect";break;case "OpenLayers.Geometry.LineString":c="polyline";break;case "OpenLayers.Geometry.LinearRing":c="polygon";break;case "OpenLayers.Geometry.Polygon":case "OpenLayers.Geometry.Curve":c="path"}return c},setStyle:function(a,
b,c){b=b||a._style;c=c||a._options;var d=b.title||b.graphicTitle;if(d){a.setAttributeNS(null,"title",d);var e=a.getElementsByTagName("title");0<e.length?e[0].firstChild.textContent=d:(e=this.nodeFactory(null,"title"),e.textContent=d,a.appendChild(e))}var e=parseFloat(a.getAttributeNS(null,"r")),d=1,f;if("OpenLayers.Geometry.Point"==a._geometryClass&&e){a.style.visibility="";if(!1===b.graphic)a.style.visibility="hidden";else if(b.externalGraphic){f=this.getPosition(a);b.graphicWidth&&b.graphicHeight&&
a.setAttributeNS(null,"preserveAspectRatio","none");var e=b.graphicWidth||b.graphicHeight,g=b.graphicHeight||b.graphicWidth,e=e?e:2*b.pointRadius,g=g?g:2*b.pointRadius,h=void 0!=b.graphicYOffset?b.graphicYOffset:-(0.5*g),k=b.graphicOpacity||b.fillOpacity;a.setAttributeNS(null,"x",(f.x+(void 0!=b.graphicXOffset?b.graphicXOffset:-(0.5*e))).toFixed());a.setAttributeNS(null,"y",(f.y+h).toFixed());a.setAttributeNS(null,"width",e);a.setAttributeNS(null,"height",g);a.setAttributeNS(this.xlinkns,"href",b.externalGraphic);
a.setAttributeNS(null,"style","opacity: "+k);a.onclick=OpenLayers.Renderer.SVG.preventDefault}else if(this.isComplexSymbol(b.graphicName)){var e=3*b.pointRadius,g=2*e,l=this.importSymbol(b.graphicName);f=this.getPosition(a);d=3*this.symbolMetrics[l.id][0]/g;h=a.parentNode;k=a.nextSibling;h&&h.removeChild(a);a.firstChild&&a.removeChild(a.firstChild);a.appendChild(l.firstChild.cloneNode(!0));a.setAttributeNS(null,"viewBox",l.getAttributeNS(null,"viewBox"));a.setAttributeNS(null,"width",g);a.setAttributeNS(null,
"height",g);a.setAttributeNS(null,"x",f.x-e);a.setAttributeNS(null,"y",f.y-e);k?h.insertBefore(a,k):h&&h.appendChild(a)}else a.setAttributeNS(null,"r",b.pointRadius);e=b.rotation;void 0===e&&void 0===a._rotation||!f||(a._rotation=e,e|=0,"svg"!==a.nodeName?a.setAttributeNS(null,"transform","rotate("+e+" "+f.x+" "+f.y+")"):(f=this.symbolMetrics[l.id],a.firstChild.setAttributeNS(null,"transform","rotate("+e+" "+f[1]+" "+f[2]+")")))}c.isFilled?(a.setAttributeNS(null,"fill",b.fillColor),a.setAttributeNS(null,
"fill-opacity",b.fillOpacity)):a.setAttributeNS(null,"fill","none");c.isStroked?(a.setAttributeNS(null,"stroke",b.strokeColor),a.setAttributeNS(null,"stroke-opacity",b.strokeOpacity),a.setAttributeNS(null,"stroke-width",b.strokeWidth*d),a.setAttributeNS(null,"stroke-linecap",b.strokeLinecap||"round"),a.setAttributeNS(null,"stroke-linejoin","round"),b.strokeDashstyle&&a.setAttributeNS(null,"stroke-dasharray",this.dashStyle(b,d))):a.setAttributeNS(null,"stroke","none");b.pointerEvents&&a.setAttributeNS(null,
"pointer-events",b.pointerEvents);null!=b.cursor&&a.setAttributeNS(null,"cursor",b.cursor);return a},dashStyle:function(a,b){var c=a.strokeWidth*b,d=a.strokeDashstyle;switch(d){case "solid":return"none";case "dot":return[1,4*c].join();case "dash":return[4*c,4*c].join();case "dashdot":return[4*c,4*c,1,4*c].join();case "longdash":return[8*c,4*c].join();case "longdashdot":return[8*c,4*c,1,4*c].join();default:return OpenLayers.String.trim(d).replace(/\s+/g,",")}},createNode:function(a,b){var c=document.createElementNS(this.xmlns,
a);b&&c.setAttributeNS(null,"id",b);return c},nodeTypeCompare:function(a,b){return b==a.nodeName},createRenderRoot:function(){var a=this.nodeFactory(this.container.id+"_svgRoot","svg");a.style.display="block";return a},createRoot:function(a){return this.nodeFactory(this.container.id+a,"g")},createDefs:function(){var a=this.nodeFactory(this.container.id+"_defs","defs");this.rendererRoot.appendChild(a);return a},drawPoint:function(a,b){return this.drawCircle(a,b,1)},drawCircle:function(a,b,c){var d=
this.getResolution(),e=(b.x-this.featureDx)/d+this.left;b=this.top-b.y/d;return this.inValidRange(e,b)?(a.setAttributeNS(null,"cx",e),a.setAttributeNS(null,"cy",b),a.setAttributeNS(null,"r",c),a):!1},drawLineString:function(a,b){var c=this.getComponentsString(b.components);return c.path?(a.setAttributeNS(null,"points",c.path),c.complete?a:null):!1},drawLinearRing:function(a,b){var c=this.getComponentsString(b.components);return c.path?(a.setAttributeNS(null,"points",c.path),c.complete?a:null):!1},
drawPolygon:function(a,b){for(var c="",d=!0,e=!0,f,g,h=0,k=b.components.length;h<k;h++)c+=" M",f=this.getComponentsString(b.components[h].components," "),(g=f.path)?(c+=" "+g,e=f.complete&&e):d=!1;return d?(a.setAttributeNS(null,"d",c+" z"),a.setAttributeNS(null,"fill-rule","evenodd"),e?a:null):!1},drawRectangle:function(a,b){var c=this.getResolution(),d=(b.x-this.featureDx)/c+this.left,e=this.top-b.y/c;return this.inValidRange(d,e)?(a.setAttributeNS(null,"x",d),a.setAttributeNS(null,"y",e),a.setAttributeNS(null,
"width",b.width/c),a.setAttributeNS(null,"height",b.height/c),a):!1},drawText:function(a,b,c){var d=!!b.labelOutlineWidth;if(d){var e=OpenLayers.Util.extend({},b);e.fontColor=e.labelOutlineColor;e.fontStrokeColor=e.labelOutlineColor;e.fontStrokeWidth=b.labelOutlineWidth;delete e.labelOutlineWidth;this.drawText(a,e,c)}var f=this.getResolution(),e=(c.x-this.featureDx)/f+this.left,g=c.y/f-this.top,d=d?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,f=this.nodeFactory(a+d,"text");f.setAttributeNS(null,
"x",e);f.setAttributeNS(null,"y",-g);b.fontColor&&f.setAttributeNS(null,"fill",b.fontColor);b.fontStrokeColor&&f.setAttributeNS(null,"stroke",b.fontStrokeColor);b.fontStrokeWidth&&f.setAttributeNS(null,"stroke-width",b.fontStrokeWidth);b.fontOpacity&&f.setAttributeNS(null,"opacity",b.fontOpacity);b.fontFamily&&f.setAttributeNS(null,"font-family",b.fontFamily);b.fontSize&&f.setAttributeNS(null,"font-size",b.fontSize);b.fontWeight&&f.setAttributeNS(null,"font-weight",b.fontWeight);b.fontStyle&&f.setAttributeNS(null,
"font-style",b.fontStyle);!0===b.labelSelect?(f.setAttributeNS(null,"pointer-events","visible"),f._featureId=a):f.setAttributeNS(null,"pointer-events","none");g=b.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign;f.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[g[0]]||"middle");!0===OpenLayers.IS_GECKO&&f.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[g[1]]||"central");for(var h=b.label.split("\n"),k=h.length;f.childNodes.length>k;)f.removeChild(f.lastChild);
for(var l=0;l<k;l++){var m=this.nodeFactory(a+d+"_tspan_"+l,"tspan");!0===b.labelSelect&&(m._featureId=a,m._geometry=c,m._geometryClass=c.CLASS_NAME);!1===OpenLayers.IS_GECKO&&m.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[g[1]]||"-35%");m.setAttribute("x",e);if(0==l){var n=OpenLayers.Renderer.SVG.LABEL_VFACTOR[g[1]];null==n&&(n=-0.5);m.setAttribute("dy",n*(k-1)+"em")}else m.setAttribute("dy","1em");m.textContent=""===h[l]?" ":h[l];m.parentNode||f.appendChild(m)}f.parentNode||
this.textRoot.appendChild(f)},getComponentsString:function(a,b){for(var c=[],d=!0,e=a.length,f=[],g,h=0;h<e;h++)g=a[h],c.push(g),(g=this.getShortString(g))?f.push(g):(0<h&&this.getShortString(a[h-1])&&f.push(this.clipLine(a[h],a[h-1])),h<e-1&&this.getShortString(a[h+1])&&f.push(this.clipLine(a[h],a[h+1])),d=!1);return{path:f.join(b||","),complete:d}},clipLine:function(a,b){if(b.equals(a))return"";var c=this.getResolution(),d=this.MAX_PIXEL-this.translationParameters.x,e=this.MAX_PIXEL-this.translationParameters.y,
f=(b.x-this.featureDx)/c+this.left,g=this.top-b.y/c,h=(a.x-this.featureDx)/c+this.left,c=this.top-a.y/c,k;if(h<-d||h>d)k=(c-g)/(h-f),h=0>h?-d:d,c=g+(h-f)*k;if(c<-e||c>e)k=(h-f)/(c-g),c=0>c?-e:e,h=f+(c-g)*k;return h+","+c},getShortString:function(a){var b=this.getResolution(),c=(a.x-this.featureDx)/b+this.left;a=this.top-a.y/b;return this.inValidRange(c,a)?c+","+a:!1},getPosition:function(a){return{x:parseFloat(a.getAttributeNS(null,"cx")),y:parseFloat(a.getAttributeNS(null,"cy"))}},importSymbol:function(a){this.defs||
(this.defs=this.createDefs());var b=this.container.id+"-"+a,c=document.getElementById(b);if(null!=c)return c;var d=OpenLayers.Renderer.symbol[a];if(!d)throw Error(a+" is not a valid symbol name");a=this.nodeFactory(b,"symbol");var e=this.nodeFactory(null,"polygon");a.appendChild(e);for(var c=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),f=[],g,h,k=0;k<d.length;k+=2)g=d[k],h=d[k+1],c.left=Math.min(c.left,g),c.bottom=Math.min(c.bottom,h),c.right=Math.max(c.right,g),c.top=Math.max(c.top,
h),f.push(g,",",h);e.setAttributeNS(null,"points",f.join(" "));d=c.getWidth();e=c.getHeight();a.setAttributeNS(null,"viewBox",[c.left-d,c.bottom-e,3*d,3*e].join(" "));this.symbolMetrics[b]=[Math.max(d,e),c.getCenterLonLat().lon,c.getCenterLonLat().lat];this.defs.appendChild(a);return a},getFeatureIdFromEvent:function(a){var b=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);b||(b=a.target,b=b.parentNode&&b!=this.rendererRoot?b.parentNode._featureId:void 0);return b},
CLASS_NAME:"OpenLayers.Renderer.SVG"});OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"};OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"};OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1};OpenLayers.Renderer.SVG.preventDefault=function(a){a.preventDefault&&a.preventDefault()};
OpenLayers.Format.WMSDescribeLayer=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",getVersion:function(a,b){var c=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);if("1.1.1"==c||"1.1.0"==c)c="1.1";return c},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer"});
OpenLayers.Format.WMSDescribeLayer.v1_1=OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer,{initialize:function(a){OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));for(var b=a.documentElement.childNodes,c=[],d,e,f=0;f<b.length;++f)if(d=b[f],e=d.nodeName,"LayerDescription"==e){e=d.getAttribute("name");var g="",h="",k="";d.getAttribute("owsType")?(g=d.getAttribute("owsType"),h=d.getAttribute("owsURL")):
""!=d.getAttribute("wfs")?(g="WFS",h=d.getAttribute("wfs")):""!=d.getAttribute("wcs")&&(g="WCS",h=d.getAttribute("wcs"));d=d.getElementsByTagName("Query");0<d.length&&((k=d[0].getAttribute("typeName"))||(k=d[0].getAttribute("typename")));c.push({layerName:e,owsType:g,owsURL:h,typeName:k})}else if("ServiceException"==e)return{error:(new OpenLayers.Format.OGCExceptionReport).read(a)};return c},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer.v1_1"});
OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,
keepInMap:!1,closeOnMove:!1,map:null,initialize:function(a,b,c,d,e,f){null==a&&(a=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"));this.id=a;this.lonlat=b;this.contentSize=null!=c?c:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT);null!=d&&(this.contentHTML=d);this.backgroundColor=OpenLayers.Popup.COLOR;this.opacity=OpenLayers.Popup.OPACITY;this.border=OpenLayers.Popup.BORDER;this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden");this.div.className=this.displayClass;
this.groupDiv=OpenLayers.Util.createDiv(this.id+"_GroupDiv",null,null,null,"relative",null,"hidden");a=this.div.id+"_contentDiv";this.contentDiv=OpenLayers.Util.createDiv(a,null,this.contentSize.clone(),null,"relative");this.contentDiv.className=this.contentDisplayClass;this.groupDiv.appendChild(this.contentDiv);this.div.appendChild(this.groupDiv);e&&this.addCloseBox(f);this.registerEvents()},destroy:function(){this.border=this.opacity=this.backgroundColor=this.contentHTML=this.size=this.lonlat=this.id=
null;this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide);this.events.destroy();this.events=null;this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv));this.closeDiv=null;this.div.removeChild(this.groupDiv);this.groupDiv=null;null!=this.map&&this.map.removePopup(this);this.panMapIfOutOfView=this.padding=this.maxSize=this.minSize=this.autoSize=this.div=this.map=null},draw:function(a){null==a&&null!=this.lonlat&&null!=
this.map&&(a=this.map.getLayerPxFromLonLat(this.lonlat));this.closeOnMove&&this.map.events.register("movestart",this,this.hide);this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var a=document.defaultView.getComputedStyle(this.contentDiv,null).getPropertyValue("overflow");"hidden"!=a&&(this.contentDiv._oldOverflow=a,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var a=this.contentDiv._oldOverflow;
a&&(this.contentDiv.style.overflow=a,this.contentDiv._oldOverflow=null)}));this.moveTo(a);this.autoSize||this.size||this.setSize(this.contentSize);this.setBackgroundColor();this.setOpacity();this.setBorder();this.setContentHTML();this.panMapIfOutOfView&&this.panIntoView();return this.div},updatePosition:function(){if(this.lonlat&&this.map){var a=this.map.getLayerPxFromLonLat(this.lonlat);a&&this.moveTo(a)}},moveTo:function(a){null!=a&&null!=this.div&&(this.div.style.left=a.x+"px",this.div.style.top=
a.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="";this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(a){this.size=a.clone();var b=this.getContentDivPadding(),c=b.left+b.right,d=b.top+b.bottom;this.fixPadding();c+=this.padding.left+this.padding.right;d+=this.padding.top+this.padding.bottom;if(this.closeDiv)var e=parseInt(this.closeDiv.style.width),
c=c+(e+b.right);this.size.w+=c;this.size.h+=d;"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=b.left+b.right,this.contentSize.h+=b.bottom+b.top);null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px");null!=this.contentDiv&&(this.contentDiv.style.width=a.w+"px",this.contentDiv.style.height=a.h+"px")},updateSize:function(){var a="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",b=this.map?this.map.div:document.body,c=OpenLayers.Util.getRenderedDimensions(a,
null,{displayClass:this.displayClass,containerElement:b}),d=this.getSafeContentSize(c),e=null;d.equals(c)?e=c:(c={w:d.w<c.w?d.w:null,h:d.h<c.h?d.h:null},c.w&&c.h?e=d:(a=OpenLayers.Util.getRenderedDimensions(a,c,{displayClass:this.contentDisplayClass,containerElement:b}),"hidden"!=OpenLayers.Element.getStyle(this.contentDiv,"overflow")&&a.equals(d)&&(d=OpenLayers.Util.getScrollbarWidth(),c.w?a.h+=d:a.w+=d),e=this.getSafeContentSize(a)));this.setSize(e)},setBackgroundColor:function(a){void 0!=a&&(this.backgroundColor=
a);null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(a){void 0!=a&&(this.opacity=a);null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(a){void 0!=a&&(this.border=a);null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(a){null!=a&&(this.contentHTML=a);null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=
this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var a=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImageLoad))},b=this.contentDiv.getElementsByTagName("img"),c=0,d=b.length;c<d;c++){var e=b[c];if(0==e.width||0==e.height)e._onImgLoad=OpenLayers.Function.bind(a,{popup:this,img:e}),
OpenLayers.Event.observe(e,"load",e._onImgLoad)}},getSafeContentSize:function(a){a=a.clone();var b=this.getContentDivPadding(),c=b.left+b.right,d=b.top+b.bottom;this.fixPadding();c+=this.padding.left+this.padding.right;d+=this.padding.top+this.padding.bottom;if(this.closeDiv)var e=parseInt(this.closeDiv.style.width),c=c+(e+b.right);this.minSize&&(a.w=Math.max(a.w,this.minSize.w-c),a.h=Math.max(a.h,this.minSize.h-d));this.maxSize&&(a.w=Math.min(a.w,this.maxSize.w-c),a.h=Math.min(a.h,this.maxSize.h-
d));if(this.map&&this.map.size){e=b=0;if(this.keepInMap&&!this.panMapIfOutOfView)switch(e=this.map.getPixelFromLonLat(this.lonlat),this.relativePosition){case "tr":b=e.x;e=this.map.size.h-e.y;break;case "tl":b=this.map.size.w-e.x;e=this.map.size.h-e.y;break;case "bl":b=this.map.size.w-e.x;e=e.y;break;case "br":b=e.x;e=e.y;break;default:b=e.x,e=this.map.size.h-e.y}d=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-d-e;a.w=Math.min(a.w,this.map.size.w-this.map.paddingForPopups.left-
this.map.paddingForPopups.right-c-b);a.h=Math.min(a.h,d)}return a},getContentDivPadding:function(){var a=this._contentDivPadding;a||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),this._contentDivPadding=a=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,
"padding-top")),this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display=""));return a},addCloseBox:function(a){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17});this.closeDiv.className="olPopupCloseBox";var b=this.getContentDivPadding();this.closeDiv.style.right=b.right+"px";this.closeDiv.style.top=b.top+"px";this.groupDiv.appendChild(this.closeDiv);a=a||function(a){this.hide();OpenLayers.Event.stop(a)};OpenLayers.Event.observe(this.closeDiv,
"touchend",OpenLayers.Function.bindAsEventListener(a,this));OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(a,this))},panIntoView:function(){var a=this.map.getSize(),b=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),c=b.clone();b.x<this.map.paddingForPopups.left?c.x=this.map.paddingForPopups.left:b.x+this.size.w>a.w-this.map.paddingForPopups.right&&(c.x=a.w-this.map.paddingForPopups.right-this.size.w);
b.y<this.map.paddingForPopups.top?c.y=this.map.paddingForPopups.top:b.y+this.size.h>a.h-this.map.paddingForPopups.bottom&&(c.y=a.h-this.map.paddingForPopups.bottom-this.size.h);this.map.pan(b.x-c.x,b.y-c.y)},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,!0);this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:function(a){OpenLayers.Event.stop(a,!0)},
scope:this})},onmousedown:function(a){this.mousedown=!0;OpenLayers.Event.stop(a,!0)},onmousemove:function(a){this.mousedown&&OpenLayers.Event.stop(a,!0)},onmouseup:function(a){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(a,!0))},onclick:function(a){OpenLayers.Event.stop(a,!0)},onmouseout:function(a){this.mousedown=!1},ondblclick:function(a){OpenLayers.Event.stop(a,!0)},CLASS_NAME:"OpenLayers.Popup"});OpenLayers.Popup.WIDTH=200;OpenLayers.Popup.HEIGHT=200;OpenLayers.Popup.COLOR="white";
OpenLayers.Popup.OPACITY=1;OpenLayers.Popup.BORDER="0px";
OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.eTop||(this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top",this.div.appendChild(this.eTop),this.eTop.style.visibility=""==this.topOutUnits||""==this.topInUnits?"hidden":"visible",this.eBottom=document.createElement("div"),
this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),this.eBottom.style.visibility=""==this.bottomOutUnits||""==this.bottomInUnits?"hidden":"visible");this.map.events.register("moveend",this,this.update);this.update();return this.div},getBarLen:function(a){var b=parseInt(Math.log(a)/Math.log(10)),b=Math.pow(10,b);a=parseInt(a/b);return(5<a?5:2<a?2:1)*b},update:function(){var a=this.map.getResolution();if(a){var b=this.map.getUnits(),c=OpenLayers.INCHES_PER_UNIT,d=this.maxWidth*
a*c[b],e=1;!0===this.geodesic&&(e=(this.map.getGeodesicPixelSize().w||1.0E-6)*this.maxWidth/(d/c.km),d*=e);var f,g;1E5<d?(f=this.topOutUnits,g=this.bottomOutUnits):(f=this.topInUnits,g=this.bottomInUnits);var h=d/c[f],k=d/c[g],d=this.getBarLen(h),l=this.getBarLen(k),h=d/c[b]*c[f],k=l/c[b]*c[g],b=h/a/e,a=k/a/e;"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(a)+"px",this.eBottom.innerHTML=l+" "+g);"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(b)+
"px",this.eTop.innerHTML=d+" "+f)}},CLASS_NAME:"OpenLayers.Control.ScaleLine"});
OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(a,b,c,d){this.url=a;this.size=b||{w:20,h:20};this.offset=c||{x:-(this.size.w/2),y:-(this.size.h/2)};this.calculateOffset=d;a=OpenLayers.Util.createUniqueID("OL_Icon_");this.imageDiv=OpenLayers.Util.createAlphaImageDiv(a)},destroy:function(){this.erase();OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild);this.imageDiv.innerHTML="";this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,
this.size,this.offset,this.calculateOffset)},setSize:function(a){null!=a&&(this.size=a);this.draw()},setUrl:function(a){null!=a&&(this.url=a);this.draw()},draw:function(a){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute");this.moveTo(a);return this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(a){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,
null,null,null,a)},moveTo:function(a){null!=a&&(this.px=a);null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(a){this.imageDiv.style.display=a?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType},CLASS_NAME:"OpenLayers.Icon"});
OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(a,b){this.lonlat=a;var c=b?b:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=c:(this.icon.url=c.url,this.icon.size=c.size,this.icon.offset=c.offset,this.icon.calculateOffset=c.calculateOffset);this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase();this.map=null;this.events.destroy();this.events=null;null!=this.icon&&(this.icon.destroy(),this.icon=null)},
draw:function(a){return this.icon.draw(a)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(a){null!=a&&null!=this.icon&&this.icon.moveTo(a);this.lonlat=this.map.getLonLatFromLayerPx(a)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var a=!1;this.map&&(a=this.map.getExtent().containsLonLat(this.lonlat));return a},inflate:function(a){this.icon&&this.icon.setSize({w:this.icon.size.w*a,h:this.icon.size.h*a})},setOpacity:function(a){this.icon.setOpacity(a)},
setUrl:function(a){this.icon.setUrl(a)},display:function(a){this.icon.display(a)},CLASS_NAME:"OpenLayers.Marker"});OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})};
OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"===
typeof b)){var d=function(a,c){if(c&&"object"===typeof c)for(var e in c)c.hasOwnProperty(e)&&(c[e]=d(e,c[e]));return b(a,c)};c=d("",c)}}catch(e){}this.keepData&&(this.data=c);return c},write:function(a,b){this.pretty=!!b;var c=null,d=typeof a;if(this.serialize[d])try{c=!this.pretty&&this.nativeJSON?JSON.stringify(a):this.serialize[d].apply(this,[a])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return c},writeIndent:function(){var a=[];if(this.pretty)for(var b=0;b<this.level;++b)a.push(this.indent);
return a.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(a){if(null==a)return"null";if(a.constructor==Date)return this.serialize.date.apply(this,[a]);if(a.constructor==Array)return this.serialize.array.apply(this,[a]);var b=["{"];this.level+=1;var c,d,e,f=!1;for(c in a)a.hasOwnProperty(c)&&(d=OpenLayers.Format.JSON.prototype.write.apply(this,[c,this.pretty]),e=OpenLayers.Format.JSON.prototype.write.apply(this,
[a[c],this.pretty]),null!=d&&null!=e&&(f&&b.push(","),b.push(this.writeNewline(),this.writeIndent(),d,":",this.writeSpace(),e),f=!0));this.level-=1;b.push(this.writeNewline(),this.writeIndent(),"}");return b.join("")},array:function(a){var b,c=["["];this.level+=1;for(var d=0,e=a.length;d<e;++d)b=OpenLayers.Format.JSON.prototype.write.apply(this,[a[d],this.pretty]),null!=b&&(0<d&&c.push(","),c.push(this.writeNewline(),this.writeIndent(),b));this.level-=1;c.push(this.writeNewline(),this.writeIndent(),
"]");return c.join("")},string:function(a){var b={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,d){var e=b[d];if(e)return e;e=d.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)})+'"':'"'+a+'"'},number:function(a){return isFinite(a)?String(a):"null"},"boolean":function(a){return String(a)},date:function(a){function b(a){return 10>a?"0"+a:a}return'"'+a.getFullYear()+
"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"});
OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(a,b,c){b=b?b:"FeatureCollection";var d=null,e=null,e="string"==typeof a?OpenLayers.Format.JSON.prototype.read.apply(this,[a,c]):a;if(!e)OpenLayers.Console.error("Bad JSON: "+a);else if("string"!=typeof e.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+a);else if(this.isValidType(e,b))switch(b){case "Geometry":try{d=this.parseGeometry(e)}catch(f){OpenLayers.Console.error(f)}break;case "Feature":try{d=
this.parseFeature(e),d.type="Feature"}catch(g){OpenLayers.Console.error(g)}break;case "FeatureCollection":switch(d=[],e.type){case "Feature":try{d.push(this.parseFeature(e))}catch(h){d=null,OpenLayers.Console.error(h)}break;case "FeatureCollection":a=0;for(b=e.features.length;a<b;++a)try{d.push(this.parseFeature(e.features[a]))}catch(k){d=null,OpenLayers.Console.error(k)}break;default:try{var l=this.parseGeometry(e);d.push(new OpenLayers.Feature.Vector(l))}catch(m){d=null,OpenLayers.Console.error(m)}}}return d},
isValidType:function(a,b){var c=!1;switch(b){case "Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),a.type)?OpenLayers.Console.error("Unsupported geometry type: "+a.type):c=!0;break;case "FeatureCollection":c=!0;break;default:a.type==b?c=!0:OpenLayers.Console.error("Cannot convert types from "+a.type+" to "+b)}return c},parseFeature:function(a){var b,c,d;c=a.properties?a.properties:{};d=a.geometry&&a.geometry.bbox||
a.bbox;try{b=this.parseGeometry(a.geometry)}catch(e){throw e;}b=new OpenLayers.Feature.Vector(b,c);d&&(b.bounds=OpenLayers.Bounds.fromArray(d));a.id&&(b.fid=a.id);return b},parseGeometry:function(a){if(null==a)return null;var b,c=!1;if("GeometryCollection"==a.type){if(!OpenLayers.Util.isArray(a.geometries))throw"GeometryCollection must have geometries array: "+a;b=a.geometries.length;for(var c=Array(b),d=0;d<b;++d)c[d]=this.parseGeometry.apply(this,[a.geometries[d]]);b=new OpenLayers.Geometry.Collection(c);
c=!0}else{if(!OpenLayers.Util.isArray(a.coordinates))throw"Geometry must have coordinates array: "+a;if(!this.parseCoords[a.type.toLowerCase()])throw"Unsupported geometry type: "+a.type;try{b=this.parseCoords[a.type.toLowerCase()].apply(this,[a.coordinates])}catch(e){throw e;}}this.internalProjection&&this.externalProjection&&!c&&b.transform(this.externalProjection,this.internalProjection);return b},parseCoords:{point:function(a){if(!1==this.ignoreExtraDims&&2!=a.length)throw"Only 2D points are supported: "+
a;return new OpenLayers.Geometry.Point(a[0],a[1])},multipoint:function(a){for(var b=[],c=null,d=0,e=a.length;d<e;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(f){throw f;}b.push(c)}return new OpenLayers.Geometry.MultiPoint(b)},linestring:function(a){for(var b=[],c=null,d=0,e=a.length;d<e;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(f){throw f;}b.push(c)}return new OpenLayers.Geometry.LineString(b)},multilinestring:function(a){for(var b=[],c=null,d=0,e=a.length;d<e;++d){try{c=
this.parseCoords.linestring.apply(this,[a[d]])}catch(f){throw f;}b.push(c)}return new OpenLayers.Geometry.MultiLineString(b)},polygon:function(a){for(var b=[],c,d,e=0,f=a.length;e<f;++e){try{d=this.parseCoords.linestring.apply(this,[a[e]])}catch(g){throw g;}c=new OpenLayers.Geometry.LinearRing(d.components);b.push(c)}return new OpenLayers.Geometry.Polygon(b)},multipolygon:function(a){for(var b=[],c=null,d=0,e=a.length;d<e;++d){try{c=this.parseCoords.polygon.apply(this,[a[d]])}catch(f){throw f;}b.push(c)}return new OpenLayers.Geometry.MultiPolygon(b)},
box:function(a){if(2!=a.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(a[0][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[0][1])])])}},write:function(a,b){var c={type:null};if(OpenLayers.Util.isArray(a)){c.type="FeatureCollection";var d=
a.length;c.features=Array(d);for(var e=0;e<d;++e){var f=a[e];if(!f instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+f;c.features[e]=this.extract.feature.apply(this,[f])}}else 0==a.CLASS_NAME.indexOf("OpenLayers.Geometry")?c=this.extract.geometry.apply(this,[a]):a instanceof OpenLayers.Feature.Vector&&(c=this.extract.feature.apply(this,[a]),a.layer&&a.layer.projection&&(c.crs=this.createCRSObject(a)));return OpenLayers.Format.JSON.prototype.write.apply(this,
[c,b])},createCRSObject:function(a){a=a.layer.projection.toString();var b={};a.match(/epsg:/i)&&(a=parseInt(a.substring(a.indexOf(":")+1)),b=4326==a?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+a}});return b},extract:{feature:function(a){var b=this.extract.geometry.apply(this,[a.geometry]),b={type:"Feature",properties:a.attributes,geometry:b};null!=a.fid&&(b.id=a.fid);return b},geometry:function(a){if(null==a)return null;this.internalProjection&&
this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b=a.CLASS_NAME.split(".")[2];a=this.extract[b.toLowerCase()].apply(this,[a]);return"Collection"==b?{type:"GeometryCollection",geometries:a}:{type:b,coordinates:a}},point:function(a){return[a.x,a.y]},multipoint:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},linestring:function(a){for(var b=[],c=0,d=a.components.length;c<
d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},polygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},multipolygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.polygon.apply(this,[a.components[c]]));return b},collection:function(a){for(var b=
a.components.length,c=Array(b),d=0;d<b;++d)c[d]=this.extract.geometry.apply(this,[a.components[d]]);return c}},CLASS_NAME:"OpenLayers.Format.GeoJSON"});
OpenLayers.Strategy.Paging=OpenLayers.Class(OpenLayers.Strategy,{features:null,length:10,num:null,paging:!1,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);if(a)this.layer.events.on({beforefeaturesadded:this.cacheFeatures,scope:this});return a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,scope:this}));return a},cacheFeatures:function(a){this.paging||(this.clearCache(),
this.features=a.features,this.pageNext(a))},clearCache:function(){if(this.features)for(var a=0;a<this.features.length;++a)this.features[a].destroy();this.num=this.features=null},pageCount:function(){return Math.ceil((this.features?this.features.length:0)/this.length)},pageNum:function(){return this.num},pageLength:function(a){a&&0<a&&(this.length=a);return this.length},pageNext:function(a){var b=!1;this.features&&(null===this.num&&(this.num=-1),b=this.page((this.num+1)*this.length,a));return b},pagePrevious:function(){var a=
!1;this.features&&(null===this.num&&(this.num=this.pageCount()),a=this.page((this.num-1)*this.length));return a},page:function(a,b){var c=!1;if(this.features&&0<=a&&a<this.features.length){var d=Math.floor(a/this.length);d!=this.num&&(this.paging=!0,c=this.features.slice(a,a+this.length),this.layer.removeFeatures(this.layer.features),this.num=d,b&&b.features?b.features=c:this.layer.addFeatures(c),this.paging=!1,c=!0)}return c},CLASS_NAME:"OpenLayers.Strategy.Paging"});
OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(a,b,c,d,e,f,g){OpenLayers.Popup.prototype.initialize.apply(this,[a,b,c,d,f,g]);this.anchor=null!=e?e:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.relativePosition=this.anchor=null;OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition();OpenLayers.Popup.prototype.show.apply(this,arguments)},
moveTo:function(a){var b=this.relativePosition;this.relativePosition=this.calculateRelativePosition(a);a=this.calculateNewPx(a);OpenLayers.Popup.prototype.moveTo.apply(this,Array(a));this.relativePosition!=b&&this.updateRelativePosition()},setSize:function(a){OpenLayers.Popup.prototype.setSize.apply(this,arguments);if(this.lonlat&&this.map){var b=this.map.getLayerPxFromLonLat(this.lonlat);this.moveTo(b)}},calculateRelativePosition:function(a){a=this.map.getLonLatFromLayerPx(a);a=this.map.getExtent().determineQuadrant(a);
return OpenLayers.Bounds.oppositeQuadrant(a)},updateRelativePosition:function(){},calculateNewPx:function(a){a=a.offset(this.anchor.offset);var b=this.size||this.contentSize,c="t"==this.relativePosition.charAt(0);a.y+=c?-b.h:this.anchor.size.h;c="l"==this.relativePosition.charAt(1);a.x+=c?-b.w:this.anchor.size.w;return a},CLASS_NAME:"OpenLayers.Popup.Anchored"});
OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(a,b,c,d,e,f,g){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments);this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(a){return this.relativePosition});this.contentDiv.style.position="absolute";this.contentDiv.style.zIndex=1;f&&(this.closeDiv.style.zIndex=
1);this.groupDiv.style.position="absolute";this.groupDiv.style.top="0px";this.groupDiv.style.left="0px";this.groupDiv.style.height="100%";this.groupDiv.style.width="100%"},destroy:function(){this.isAlphaImage=this.imageSize=this.imageSrc=null;this.fixedRelativePosition=!1;this.positionBlocks=null;for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];b.image&&b.div.removeChild(b.image);b.image=null;b.div&&this.groupDiv.removeChild(b.div);b.div=null}this.blocks=null;OpenLayers.Popup.Anchored.prototype.destroy.apply(this,
arguments)},setBackgroundColor:function(a){},setBorder:function(){},setOpacity:function(a){},setSize:function(a){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments);this.updateBlocks()},updateRelativePosition:function(){this.padding=this.positionBlocks[this.relativePosition].padding;if(this.closeDiv){var a=this.getContentDivPadding();this.closeDiv.style.right=a.right+this.padding.right+"px";this.closeDiv.style.top=a.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(a){var b=
OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return b=b.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var a=null,b;for(b in this.positionBlocks){a=b;break}a=this.positionBlocks[a];for(b=0;b<a.blocks.length;b++){var c={};this.blocks.push(c);c.div=OpenLayers.Util.createDiv(this.id+"_FrameDecorationDiv_"+b,null,null,null,"absolute",null,"hidden",null);c.image=(this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage)(this.id+
"_FrameDecorationImg_"+b,null,this.imageSize,this.imageSrc,"absolute",null,null,null);c.div.appendChild(c.image);this.groupDiv.appendChild(c.div)}},updateBlocks:function(){this.blocks||this.createBlocks();if(this.size&&this.relativePosition){for(var a=this.positionBlocks[this.relativePosition],b=0;b<a.blocks.length;b++){var c=a.blocks[b],d=this.blocks[b],e=c.anchor.left,f=c.anchor.bottom,g=c.anchor.right,h=c.anchor.top,k=isNaN(c.size.w)?this.size.w-(g+e):c.size.w,l=isNaN(c.size.h)?this.size.h-(f+
h):c.size.h;d.div.style.width=(0>k?0:k)+"px";d.div.style.height=(0>l?0:l)+"px";d.div.style.left=null!=e?e+"px":"";d.div.style.bottom=null!=f?f+"px":"";d.div.style.right=null!=g?g+"px":"";d.div.style.top=null!=h?h+"px":"";d.image.style.left=c.position.x+"px";d.image.style.top=c.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px";this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"});
OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(a,b,c){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=
null)},setMap:function(a){OpenLayers.Handler.prototype.setMap.apply(this,arguments);this.dragHandler&&this.dragHandler.setMap(a)},startBox:function(a){this.callback("start",[]);this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999});this.zoomBox.className=this.boxDivClassName;this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1;this.map.viewPortDiv.appendChild(this.zoomBox);OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(a){var b=this.dragHandler.start.x,
c=this.dragHandler.start.y,d=Math.abs(b-a.x),e=Math.abs(c-a.y),f=this.getBoxOffsets();this.zoomBox.style.width=d+f.width+1+"px";this.zoomBox.style.height=e+f.height+1+"px";this.zoomBox.style.left=(a.x<b?b-d-f.left:b-f.left)+"px";this.zoomBox.style.top=(a.y<c?c-e-f.top:c-f.top)+"px"},endBox:function(a){var b;if(5<Math.abs(this.dragHandler.start.x-a.x)||5<Math.abs(this.dragHandler.start.y-a.y)){var c=this.dragHandler.start;b=Math.min(c.y,a.y);var d=Math.max(c.y,a.y),e=Math.min(c.x,a.x);a=Math.max(c.x,
a.x);b=new OpenLayers.Bounds(e,d,a,b)}else b=this.dragHandler.start.clone();this.removeBox();this.callback("done",[b])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox);this.boxOffsets=this.zoomBox=null;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return OpenLayers.Handler.prototype.activate.apply(this,arguments)?(this.dragHandler.activate(),!0):!1},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?
(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0):!1},getBoxOffsets:function(){if(!this.boxOffsets){var a=document.createElement("div");a.style.position="absolute";a.style.border="1px solid black";a.style.width="3px";document.body.appendChild(a);var b=3==a.clientWidth;document.body.removeChild(a);var a=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),c=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),d=parseInt(OpenLayers.Element.getStyle(this.zoomBox,
"border-top-width")),e=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:a,right:c,top:d,bottom:e,width:!1===b?a+c:0,height:!1===b?d+e:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"});
OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(a){if(a instanceof OpenLayers.Bounds){var b;if(this.out){b=Math.abs(a.right-a.left);var c=Math.abs(a.top-a.bottom);b=Math.min(this.map.size.h/c,this.map.size.w/b);var c=this.map.getExtent(),d=this.map.getLonLatFromPixel(a.getCenterPixel());a=d.lon-
c.getWidth()/2*b;var e=d.lon+c.getWidth()/2*b,f=d.lat-c.getHeight()/2*b;b=d.lat+c.getHeight()/2*b;b=new OpenLayers.Bounds(a,f,e,b)}else b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom}),c=this.map.getLonLatFromPixel({x:a.right,y:a.top}),b=new OpenLayers.Bounds(b.lon,b.lat,c.lon,c.lat);c=this.map.getZoom();this.map.zoomToExtent(b);c==this.map.getZoom()&&!0==this.alwaysZoom&&this.map.zoomTo(c+(this.out?-1:1))}else this.out?this.map.setCenter(this.map.getLonLatFromPixel(a),this.map.getZoom()-1):this.map.setCenter(this.map.getLonLatFromPixel(a),
this.map.getZoom()+1)},CLASS_NAME:"OpenLayers.Control.ZoomBox"});
OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:1,documentDrag:!1,kinetic:null,enableKinetic:!1,kineticInterval:10,draw:function(){if(this.enableKinetic){var a={interval:this.kineticInterval};"object"===typeof this.enableKinetic&&(a=OpenLayers.Util.extend(a,this.enableKinetic));this.kinetic=new OpenLayers.Kinetic(a)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,
documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(a){this.kinetic&&this.kinetic.update(a);this.panned=!0;this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!0,animate:!1})},panMapDone:function(a){if(this.panned){var b=null;this.kinetic&&(b=this.kinetic.end(a));this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:!1});if(b){var c=this;this.kinetic.move(b,function(a,b,f){c.map.pan(a,b,{dragging:!f,
animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"});
OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,"double":!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,touch:!1,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(a){this.touch||(this.unregisterMouseListeners(),this.touch=!0);this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return!0},touchmove:function(a){this.last=this.getEventInfo(a);return!0},touchend:function(a){this.down&&(a.xy=this.last.xy,
a.lastTouches=this.last.touches,this.handleSingle(a),this.down=null);return!0},unregisterMouseListeners:function(){this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,click:this.click,dblclick:this.dblclick,scope:this})},mousedown:function(a){this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return!0},mouseup:function(a){var b=!0;this.checkModifiers(a)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(a)&&(b=this.rightclick(a));return b},rightclick:function(a){if(this.passesTolerance(a)){if(null!=
this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[a]),!this.stopDouble;a=this["double"]?OpenLayers.Util.extend({},a):this.callback("rightclick",[a]);a=OpenLayers.Function.bind(this.delayedRightCall,this,a);this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(a){this.rightclickTimerId=null;a&&this.callback("rightclick",[a])},click:function(a){this.last||(this.last=this.getEventInfo(a));this.handleSingle(a);return!this.stopSingle},
dblclick:function(a){this.handleDouble(a);return!this.stopDouble},handleDouble:function(a){this.passesDblclickTolerance(a)&&(this["double"]&&this.callback("dblclick",[a]),this.clearTimer())},handleSingle:function(a){this.passesTolerance(a)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this["double"]&&OpenLayers.Event.stop(a),this.handleDouble(a)),this.last.touches&&2===this.last.touches.length||this.clearTimer()):(this.first=this.getEventInfo(a),a=this.single?OpenLayers.Util.extend({},
a):null,this.queuePotentialClick(a)))},queuePotentialClick:function(a){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)},passesTolerance:function(a){var b=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(b=this.pixelTolerance>=this.down.xy.distanceTo(a.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){a=0;for(var c=this.down.touches.length;a<c;++a)if(this.getTouchDistance(this.down.touches[a],this.last.touches[a])>this.pixelTolerance){b=
!1;break}}return b},getTouchDistance:function(a,b){return Math.sqrt(Math.pow(a.clientX-b.clientX,2)+Math.pow(a.clientY-b.clientY,2))},passesDblclickTolerance:function(a){a=!0;this.down&&this.first&&(a=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance);return a},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null);null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(a){this.timerId=
null;a&&this.callback("click",[a])},getEventInfo:function(a){var b;if(a.touches){var c=a.touches.length;b=Array(c);for(var d,e=0;e<c;e++)d=a.touches[e],b[e]={clientX:d.clientX,clientY:d.clientY}}return{xy:a.xy,touches:b}},deactivate:function(){var a=!1;OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.last=this.first=this.down=null,this.touch=!1,a=!0);return a},CLASS_NAME:"OpenLayers.Handler.Click"});
OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(a){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=null;
this.zoomBox&&this.zoomBox.destroy();this.zoomBox=null;this.pinchZoom&&this.pinchZoom.destroy();this.pinchZoom=null;OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){this.dragPan.activate();this.zoomWheelEnabled&&this.handlers.wheel.activate();this.handlers.click.activate();this.zoomBoxEnabled&&this.zoomBox.activate();this.pinchZoom&&this.pinchZoom.activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.pinchZoom&&this.pinchZoom.deactivate();
this.zoomBox.deactivate();this.dragPan.deactivate();this.handlers.click.deactivate();this.handlers.wheel.deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False);this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{"double":!0,stopDouble:!0});this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,
documentDrag:this.documentDrag},this.dragPanOptions));this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask});this.dragPan.draw();this.zoomBox.draw();this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},this.mouseWheelOptions);OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(a){a.lastTouches&&2==a.lastTouches.length&&
this.map.zoomOut()},defaultDblClick:function(a){a=this.map.getLonLatFromViewPortPx(a.xy);this.map.setCenter(a,this.map.zoom+1)},defaultDblRightClick:function(a){a=this.map.getLonLatFromViewPortPx(a.xy);this.map.setCenter(a,this.map.zoom-1)},wheelChange:function(a,b){var c=this.map.getZoom(),d=this.map.getZoom()+Math.round(b),d=Math.max(d,0),d=Math.min(d,this.map.getNumZoomLevels());if(d!==c){var e=this.map.getSize(),c=e.w/2-a.xy.x,e=a.xy.y-e.h/2,f=this.map.baseLayer.getResolutionForZoom(d),g=this.map.getLonLatFromPixel(a.xy),
c=new OpenLayers.LonLat(g.lon+c*f,g.lat+e*f);this.map.setCenter(c,d)}},wheelUp:function(a,b){this.wheelChange(a,b||1)},wheelDown:function(a,b){this.wheelChange(a,b||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1;this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0;this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1;this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0;this.active&&this.handlers.wheel.activate()},
CLASS_NAME:"OpenLayers.Control.Navigation"});
OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(a,b,c){OpenLayers.Control.prototype.initialize.apply(this,[c]);this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(a,b){this.layer.events.triggerEvent("sketchmodified",{vertex:a,feature:b})},create:function(a,b){this.layer.events.triggerEvent("sketchstarted",{vertex:a,feature:b})}},this.callbacks);this.layer=a;this.handlerOptions=
this.handlerOptions||{};this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:a.renderers,rendererOptions:a.rendererOptions});"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi);if(a=this.layer.styleMap&&this.layer.styleMap.styles.temporary)this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":a})});this.handler=new b(this,this.callbacks,this.handlerOptions)},
drawFeature:function(a){a=new OpenLayers.Feature.Vector(a);!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:a})&&(a.state=OpenLayers.State.INSERT,this.layer.addFeatures([a]),this.featureAdded(a),this.events.triggerEvent("featureadded",{feature:a}))},insertXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertXY(a,b)},insertDeltaXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeltaXY(a,b)},insertDirectionLength:function(a,b){this.handler&&this.handler.line&&
this.handler.insertDirectionLength(a,b)},insertDeflectionLength:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(a,b)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"});
OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(a){a=this.layer.getLonLatFromViewPortPx(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry]));this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry]));this.callback("create",[this.point.geometry,
this.getSketch()]);this.point.geometry.clearBounds();this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(a){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var b=this.point.geometry,c=this.control.layer.features,d,e=c.length-1;0<=e;--e)if(d=c[e].geometry,(d instanceof OpenLayers.Geometry.Polygon||d instanceof OpenLayers.Geometry.MultiPolygon)&&d.intersects(b)){b=c[e];this.control.layer.removeFeatures([b],{silent:!0});this.control.layer.events.registerPriority("sketchcomplete",
this,this.finalizeInteriorRing);this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology);b.geometry.addComponent(this.line.geometry);this.polygon=b;this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(a){a=a.vertex;var b=this.line.geometry.components;this.polygon.geometry.intersects(a)||(b=b[b.length-3],a.x=b.x,a.y=b.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-
2]);this.removePoint();this.finalize()},finalizeInteriorRing:function(){var a=this.line.geometry,b=0!==a.getArea();if(b){for(var c=this.polygon.geometry.components,d=c.length-2;0<=d;--d)if(a.intersects(c[d])){b=!1;break}if(b)a:for(d=c.length-2;0<d;--d)for(var e=c[d].components,f=0,g=e.length;f<g;++f)if(a.containsPoint(e[f])){b=!1;break a}}b?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(a);this.restoreFeature();return!1},
cancel:function(){this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0));return OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(a){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing);this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology);this.layer.removeFeatures([this.polygon],{silent:!0});this.control.layer.addFeatures([this.polygon],{silent:!0});this.drawingHole=
!1;a||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(a){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,a);this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style);this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var a=this.polygon&&this.polygon.geometry;a&&this.multi&&(a=new OpenLayers.Geometry.MultiPolygon([a]));return a},CLASS_NAME:"OpenLayers.Handler.Polygon"});
OpenLayers.Control.EditingToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{citeCompliant:!1,initialize:function(a,b){OpenLayers.Control.Panel.prototype.initialize.apply(this,[b]);this.addControls([new OpenLayers.Control.Navigation]);var c=[new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Point,{displayClass:"olControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Path,{displayClass:"olControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),
new OpenLayers.Control.DrawFeature(a,OpenLayers.Handler.Polygon,{displayClass:"olControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})];this.addControls(c)},draw:function(){var a=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);null===this.defaultControl&&(this.defaultControl=this.controls[0]);return a},CLASS_NAME:"OpenLayers.Control.EditingToolbar"});
OpenLayers.Format.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Format.XML,{layerIdentifier:"_layer",featureIdentifier:"_feature",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},gmlFormat:null,read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=a.documentElement;if(b){var c=this["read_"+b.nodeName];a=c?c.call(this,b):(new OpenLayers.Format.GML(this.options?this.options:{})).read(a)}return a},read_msGMLOutput:function(a){var b=
[];if(a=this.getSiblingNodesByTagCriteria(a,this.layerIdentifier))for(var c=0,d=a.length;c<d;++c){var e=a[c],f=e.nodeName;e.prefix&&(f=f.split(":")[1]);f=f.replace(this.layerIdentifier,"");if(e=this.getSiblingNodesByTagCriteria(e,this.featureIdentifier))for(var g=0;g<e.length;g++){var h=e[g],k=this.parseGeometry(h),h=this.parseAttributes(h),h=new OpenLayers.Feature.Vector(k.geometry,h,null);h.bounds=k.bounds;h.type=f;b.push(h)}}return b},read_FeatureInfoResponse:function(a){var b=[];a=this.getElementsByTagNameNS(a,
"*","FIELDS");for(var c=0,d=a.length;c<d;c++){var e=a[c],f={},g,h=e.attributes.length;if(0<h)for(g=0;g<h;g++){var k=e.attributes[g];f[k.nodeName]=k.nodeValue}else for(e=e.childNodes,g=0,h=e.length;g<h;++g)k=e[g],3!=k.nodeType&&(f[k.getAttribute("name")]=k.getAttribute("value"));b.push(new OpenLayers.Feature.Vector(null,f,null))}return b},getSiblingNodesByTagCriteria:function(a,b){var c=[],d,e,f,g;if(a&&a.hasChildNodes()){d=a.childNodes;f=d.length;for(var h=0;h<f;h++){for(g=d[h];g&&1!=g.nodeType;)g=
g.nextSibling,h++;e=g?g.nodeName:"";0<e.length&&-1<e.indexOf(b)?c.push(g):(e=this.getSiblingNodesByTagCriteria(g,b),0<e.length&&(0==c.length?c=e:c.push(e)))}}return c},parseAttributes:function(a){var b={};if(1==a.nodeType){a=a.childNodes;for(var c=a.length,d=0;d<c;++d){var e=a[d];if(1==e.nodeType){var f=e.childNodes,e=e.prefix?e.nodeName.split(":")[1]:e.nodeName;0==f.length?b[e]=null:1==f.length&&(f=f[0],3==f.nodeType||4==f.nodeType)&&(f=f.nodeValue.replace(this.regExes.trimSpace,""),b[e]=f)}}}return b},
parseGeometry:function(a){this.gmlFormat||(this.gmlFormat=new OpenLayers.Format.GML);a=this.gmlFormat.parseFeature(a);var b,c=null;a&&(b=a.geometry&&a.geometry.clone(),c=a.bounds&&a.bounds.clone(),a.destroy());return{geometry:b,bounds:c}},CLASS_NAME:"OpenLayers.Format.WMSGetFeatureInfo"});OpenLayers.Console.warn("OpenLayers.Rico is deprecated");OpenLayers.Rico=OpenLayers.Rico||{};
OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(a,b,c){this.rgb={r:a,g:b,b:c}},setRed:function(a){this.rgb.r=a},setGreen:function(a){this.rgb.g=a},setBlue:function(a){this.rgb.b=a},setHue:function(a){var b=this.asHSB();b.h=a;this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},setSaturation:function(a){var b=this.asHSB();b.s=a;this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},setBrightness:function(a){var b=this.asHSB();b.b=a;this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,b.b)},
darken:function(a){var b=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,Math.max(b.b-a,0))},brighten:function(a){var b=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(b.h,b.s,Math.min(b.b+a,1))},blend:function(a){this.rgb.r=Math.floor((this.rgb.r+a.rgb.r)/2);this.rgb.g=Math.floor((this.rgb.g+a.rgb.g)/2);this.rgb.b=Math.floor((this.rgb.b+a.rgb.b)/2)},isBright:function(){this.asHSB();return 0.5<this.asHSB().b},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+
this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}});
OpenLayers.Rico.Color.createFromHex=function(a){if(4==a.length){var b=a;a="#";for(var c=1;4>c;c++)a+=b.charAt(c)+b.charAt(c)}0==a.indexOf("#")&&(a=a.substring(1));b=a.substring(0,2);c=a.substring(2,4);a=a.substring(4,6);return new OpenLayers.Rico.Color(parseInt(b,16),parseInt(c,16),parseInt(a,16))};
OpenLayers.Rico.Color.createColorFromBackground=function(a){var b=OpenLayers.Element.getStyle(OpenLayers.Util.getElement(a),"backgroundColor");return"transparent"==b&&a.parentNode?OpenLayers.Rico.Color.createColorFromBackground(a.parentNode):null==b?new OpenLayers.Rico.Color(255,255,255):0==b.indexOf("rgb(")?(a=b.substring(4,b.length-1).split(","),new OpenLayers.Rico.Color(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]))):0==b.indexOf("#")?OpenLayers.Rico.Color.createFromHex(b):new OpenLayers.Rico.Color(255,
255,255)};
OpenLayers.Rico.Color.HSBtoRGB=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=parseInt(255*c+0.5);else{a=6*(a-Math.floor(a));var g=a-Math.floor(a),h=c*(1-b),k=c*(1-b*g);b=c*(1-b*(1-g));switch(parseInt(a)){case 0:d=255*c+0.5;e=255*b+0.5;f=255*h+0.5;break;case 1:d=255*k+0.5;e=255*c+0.5;f=255*h+0.5;break;case 2:d=255*h+0.5;e=255*c+0.5;f=255*b+0.5;break;case 3:d=255*h+0.5;e=255*k+0.5;f=255*c+0.5;break;case 4:d=255*b+0.5;e=255*h+0.5;f=255*c+0.5;break;case 5:d=255*c+0.5,e=255*h+0.5,f=255*k+0.5}}return{r:parseInt(d),g:parseInt(e),
b:parseInt(f)}};OpenLayers.Rico.Color.RGBtoHSB=function(a,b,c){var d,e=a>b?a:b;c>e&&(e=c);var f=a<b?a:b;c<f&&(f=c);d=0!=e?(e-f)/e:0;if(0==d)a=0;else{var g=(e-a)/(e-f),h=(e-b)/(e-f);c=(e-c)/(e-f);a=(a==e?c-h:b==e?2+g-c:4+h-g)/6;0>a&&(a+=1)}return{h:a,s:d,b:e/255}};OpenLayers.Console.warn("OpenLayers.Rico is deprecated");OpenLayers.Rico=OpenLayers.Rico||{};
OpenLayers.Rico.Corner={round:function(a,b){a=OpenLayers.Util.getElement(a);this._setOptions(b);var c=this.options.color;"fromElement"==this.options.color&&(c=this._background(a));var d=this.options.bgColor;"fromParent"==this.options.bgColor&&(d=this._background(a.offsetParent));this._roundCornersImpl(a,c,d)},changeColor:function(a,b){a.style.backgroundColor=b;for(var c=a.parentNode.getElementsByTagName("span"),d=0;d<c.length;d++)c[d].style.backgroundColor=b},changeOpacity:function(a,b){var c="alpha(opacity="+
100*b+")";a.style.opacity=b;a.style.filter=c;for(var d=a.parentNode.getElementsByTagName("span"),e=0;e<d.length;e++)d[e].style.opacity=b,d[e].style.filter=c},reRound:function(a,b){var c=a.parentNode.childNodes[2];a.parentNode.removeChild(a.parentNode.childNodes[0]);a.parentNode.removeChild(c);this.round(a.parentNode,b)},_roundCornersImpl:function(a,b,c){this.options.border&&this._renderBorder(a,c);this._isTopRounded()&&this._roundTopCorners(a,b,c);this._isBottomRounded()&&this._roundBottomCorners(a,
b,c)},_renderBorder:function(a,b){var c="1px solid "+this._borderColor(b);a.innerHTML="<div "+("style='border-left: "+c+";"+("border-right: "+c)+"'")+">"+a.innerHTML+"</div>"},_roundTopCorners:function(a,b,c){for(var d=this._createCorner(c),e=0;e<this.options.numSlices;e++)d.appendChild(this._createCornerSlice(b,c,e,"top"));a.style.paddingTop=0;a.insertBefore(d,a.firstChild)},_roundBottomCorners:function(a,b,c){for(var d=this._createCorner(c),e=this.options.numSlices-1;0<=e;e--)d.appendChild(this._createCornerSlice(b,
c,e,"bottom"));a.style.paddingBottom=0;a.appendChild(d)},_createCorner:function(a){var b=document.createElement("div");b.style.backgroundColor=this._isTransparent()?"transparent":a;return b},_createCornerSlice:function(a,b,c,d){var e=document.createElement("span"),f=e.style;f.backgroundColor=a;f.display="block";f.height="1px";f.overflow="hidden";f.fontSize="1px";a=this._borderColor(a,b);this.options.border&&0==c?(f.borderTopStyle="solid",f.borderTopWidth="1px",f.borderLeftWidth="0px",f.borderRightWidth=
"0px",f.borderBottomWidth="0px",f.height="0px",f.borderColor=a):a&&(f.borderColor=a,f.borderStyle="solid",f.borderWidth="0px 1px");this.options.compact||c!=this.options.numSlices-1||(f.height="2px");this._setMargin(e,c,d);this._setBorder(e,c,d);return e},_setOptions:function(a){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1};OpenLayers.Util.extend(this.options,a||{});this.options.numSlices=this.options.compact?2:4;this._isTransparent()&&(this.options.blend=
!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")||0<=this.options.corners.indexOf("tl")&&0<=this.options.corners.indexOf("tr")?"":0<=this.options.corners.indexOf("tl")?"left":0<=this.options.corners.indexOf("tr")?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")||0<=this.options.corners.indexOf("bl")&&0<=this.options.corners.indexOf("br")?"":0<=this.options.corners.indexOf("bl")?"left":0<=this.options.corners.indexOf("br")?
"right":""},_borderColor:function(a,b){return"transparent"==a?b:this.options.border?this.options.border:this.options.blend?this._blend(b,a):""},_setMargin:function(a,b,c){b=this._marginSize(b);c="top"==c?this._whichSideTop():this._whichSideBottom();"left"==c?(a.style.marginLeft=b+"px",a.style.marginRight="0px"):"right"==c?(a.style.marginRight=b+"px",a.style.marginLeft="0px"):(a.style.marginLeft=b+"px",a.style.marginRight=b+"px")},_setBorder:function(a,b,c){b=this._borderSize(b);c="top"==c?this._whichSideTop():
this._whichSideBottom();"left"==c?(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth="0px"):"right"==c?(a.style.borderRightWidth=b+"px",a.style.borderLeftWidth="0px"):(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth=b+"px");!1!=this.options.border&&(a.style.borderLeftWidth=b+"px",a.style.borderRightWidth=b+"px")},_marginSize:function(a){if(this._isTransparent())return 0;var b=[5,3,2,1],c=[3,2,1,0],d=[2,1],e=[1,0];return this.options.compact&&this.options.blend?e[a]:this.options.compact?
d[a]:this.options.blend?c[a]:b[a]},_borderSize:function(a){var b=[5,3,2,1],c=[2,1,1,1],d=[1,0],e=[0,2,0,0];return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?d[a]:this.options.blend?c[a]:this.options.border?e[a]:this._isTransparent()?b[a]:0},_hasString:function(a){for(var b=1;b<arguments.length;b++)if(0<=a.indexOf(arguments[b]))return!0;return!1},_blend:function(a,b){var c=OpenLayers.Rico.Color.createFromHex(a);c.blend(OpenLayers.Rico.Color.createFromHex(b));
return c},_background:function(a){try{return OpenLayers.Rico.Color.createColorFromBackground(a).asHex()}catch(b){return"#ffffff"}},_isTransparent:function(){return"transparent"==this.options.color},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(a){return 1==a.childNodes.length&&3==a.childNodes[0].nodeType}};
OpenLayers.Popup.AnchoredBubble=OpenLayers.Class(OpenLayers.Popup.Anchored,{rounded:!1,initialize:function(a,b,c,d,e,f,g){OpenLayers.Console.warn("AnchoredBubble is deprecated");this.padding=new OpenLayers.Bounds(0,OpenLayers.Popup.AnchoredBubble.CORNER_SIZE,0,OpenLayers.Popup.AnchoredBubble.CORNER_SIZE);OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments)},draw:function(a){OpenLayers.Popup.Anchored.prototype.draw.apply(this,arguments);this.setContentHTML();this.setBackgroundColor();
this.setOpacity();return this.div},updateRelativePosition:function(){this.setRicoCorners()},setSize:function(a){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments);this.setRicoCorners()},setBackgroundColor:function(a){void 0!=a&&(this.backgroundColor=a);null!=this.div&&null!=this.contentDiv&&(this.div.style.background="transparent",OpenLayers.Rico.Corner.changeColor(this.groupDiv,this.backgroundColor))},setOpacity:function(a){OpenLayers.Popup.Anchored.prototype.setOpacity.call(this,
a);null!=this.div&&null!=this.groupDiv&&OpenLayers.Rico.Corner.changeOpacity(this.groupDiv,this.opacity)},setBorder:function(a){this.border=0},setRicoCorners:function(){var a={corners:this.getCornersToRound(this.relativePosition),color:this.backgroundColor,bgColor:"transparent",blend:!1};this.rounded?(OpenLayers.Rico.Corner.reRound(this.groupDiv,a),this.setBackgroundColor(),this.setOpacity()):(OpenLayers.Rico.Corner.round(this.div,a),this.rounded=!0)},getCornersToRound:function(){var a=["tl","tr",
"bl","br"],b=OpenLayers.Bounds.oppositeQuadrant(this.relativePosition);OpenLayers.Util.removeItem(a,b);return a.join(" ")},CLASS_NAME:"OpenLayers.Popup.AnchoredBubble"});OpenLayers.Popup.AnchoredBubble.CORNER_SIZE=5;
OpenLayers.Strategy.BBOX=OpenLayers.Class(OpenLayers.Strategy,{bounds:null,resolution:null,ratio:2,resFactor:null,response:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);a&&(this.layer.events.on({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),this.update());return a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&this.layer.events.un({moveend:this.update,refresh:this.update,visibilitychanged:this.update,
scope:this});return a},update:function(a){var b=this.getMapBounds();null!==b&&(a&&a.force||this.layer.visibility&&this.layer.calculateInRange()&&this.invalidBounds(b))&&(this.calculateBounds(b),this.resolution=this.layer.map.getResolution(),this.triggerRead(a))},getMapBounds:function(){if(null===this.layer.map)return null;var a=this.layer.map.getExtent();a&&!this.layer.projection.equals(this.layer.map.getProjectionObject())&&(a=a.clone().transform(this.layer.map.getProjectionObject(),this.layer.projection));
return a},invalidBounds:function(a){a||(a=this.getMapBounds());a=!this.bounds||!this.bounds.containsBounds(a);!a&&this.resFactor&&(a=this.resolution/this.layer.map.getResolution(),a=a>=this.resFactor||a<=1/this.resFactor);return a},calculateBounds:function(a){a||(a=this.getMapBounds());var b=a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio;this.bounds=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2)},triggerRead:function(a){!this.response||a&&!0===a.noAbort||
(this.layer.protocol.abort(this.response),this.layer.events.triggerEvent("loadend"));this.layer.events.triggerEvent("loadstart");this.response=this.layer.protocol.read(OpenLayers.Util.applyDefaults({filter:this.createFilter(),callback:this.merge,scope:this},a))},createFilter:function(){var a=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,value:this.bounds,projection:this.layer.projection});this.layer.filter&&(a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,
filters:[this.layer.filter,a]}));return a},merge:function(a){this.layer.destroyFeatures();if((a=a.features)&&0<a.length){var b=this.layer.projection,c=this.layer.map.getProjectionObject();if(!c.equals(b))for(var d,e=0,f=a.length;e<f;++e)(d=a[e].geometry)&&d.transform(b,c);this.layer.addFeatures(a)}this.response=null;this.layer.events.triggerEvent("loadend")},CLASS_NAME:"OpenLayers.Strategy.BBOX"});
OpenLayers.Format.SLD.v1_0_0_GeoServer=OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0,{version:"1.0.0",profile:"GeoServer",readers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(a,b){var c=this.readers.ogc._expression.call(this,a);c&&(b.priority=c)},VendorOption:function(a,b){b.vendorOptions||(b.vendorOptions={});b.vendorOptions[a.getAttribute("name")]=this.getChildValue(a)},TextSymbolizer:function(a,b){OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this,
arguments);var c=this.multipleSymbolizers?b.symbolizers[b.symbolizers.length-1]:b.symbolizer.Text;void 0===c.graphic&&(c.graphic=!1)}},OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.readers),writers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(a){return this.writers.sld._OGCExpression.call(this,"sld:Priority",a)},VendorOption:function(a){return this.createElementNSPlus("sld:VendorOption",{attributes:{name:a.name},
value:a.value})},TextSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this,arguments);!1!==a.graphic&&(a.externalGraphic||a.graphicName)&&this.writeNode("Graphic",a,b);"priority"in a&&this.writeNode("Priority",a.priority,b);return this.addVendorOptions(b,a)},PointSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)},LineSymbolizer:function(a){var b=
OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)},PolygonSymbolizer:function(a){var b=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this,arguments);return this.addVendorOptions(b,a)}},OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.writers),addVendorOptions:function(a,b){if(b.vendorOptions)for(var c in b.vendorOptions)this.writeNode("VendorOption",{name:c,
value:b.vendorOptions[c]},a);return a},CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0_GeoServer"});OpenLayers.Protocol.CSW=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.CSW.DEFAULTS);var b=OpenLayers.Protocol.CSW["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported CSW version: "+a.version;return new b(a)};OpenLayers.Protocol.CSW.DEFAULTS={version:"2.0.2"};
OpenLayers.Protocol.WFS.v1_1_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.1.0",initialize:function(a){OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this,arguments);this.outputFormat&&!this.readFormat&&("gml2"==this.outputFormat.toLowerCase()?this.readFormat=new OpenLayers.Format.GML.v2({featureType:this.featureType,featureNS:this.featureNS,geometryName:this.geometryName}):"json"==this.outputFormat.toLowerCase()&&(this.readFormat=new OpenLayers.Format.GeoJSON))},CLASS_NAME:"OpenLayers.Protocol.WFS.v1_1_0"});
OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",yx:{"urn:ogc:def:crs:EPSG::4326":!0},createLayer:function(a,b){var c,d={layer:!0,matrixSet:!0},e;for(e in d)if(!(e in b))throw Error("Missing property '"+e+"' in layer configuration.");d=a.contents;e=d.tileMatrixSets[b.matrixSet];for(var f,g=0,h=d.layers.length;g<h;++g)if(d.layers[g].identifier===b.layer){f=d.layers[g];break}if(f&&e){for(var k,g=0,h=f.styles.length;g<h&&(k=f.styles[g],!k.isDefault);++g);
c=new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(b,{url:"REST"===b.requestEncoding&&f.resourceUrl?f.resourceUrl.tile.template:a.operationsMetadata.GetTile.dcp.http.get[0].url,name:f.title,style:k.identifier,matrixIds:e.matrixIds,tileFullExtent:e.bounds}))}return c},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"});
OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var a,b=OpenLayers.Layer.Google.cache[this.map.id];b?(a=b.mapObject,++b.count):(b=this.map.viewPortDiv,a=document.createElement("div"),a.id=this.map.id+"_GMapContainer",a.style.position="absolute",a.style.width="100%",a.style.height="100%",b.appendChild(a),b=this.map.getCenter(),a=new google.maps.Map(a,{center:b?new google.maps.LatLng(b.lat,
b.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),b={mapObject:a,count:1},OpenLayers.Layer.Google.cache[this.map.id]=b,this.repositionListener=google.maps.event.addListenerOnce(a,"center_changed",OpenLayers.Function.bind(this.repositionMapElements,this)));this.mapObject=a;this.setGMapVisibility(this.visibility)},repositionMapElements:function(){google.maps.event.trigger(this.mapObject,
"resize");var a=this.mapObject.getDiv().firstChild;if(!a||3>a.childNodes.length)return this.repositionTimer=window.setTimeout(OpenLayers.Function.bind(this.repositionMapElements,this),250),!1;for(var b=OpenLayers.Layer.Google.cache[this.map.id],c=this.map.viewPortDiv,d=a.children.length-1;0<=d;--d){if(1000001==a.children[d].style.zIndex){var e=a.children[d];c.appendChild(e);e.style.zIndex="1100";e.style.bottom="";e.className="olLayerGoogleCopyright olLayerGoogleV3";e.style.display="";b.termsOfUse=
e}1E6==a.children[d].style.zIndex&&(e=a.children[d],c.appendChild(e),e.style.zIndex="1100",e.style.bottom="",e.className="olLayerGooglePoweredBy olLayerGoogleV3 gmnoprint",e.style.display="",b.poweredBy=e);10000002==a.children[d].style.zIndex&&c.appendChild(a.children[d])}this.setGMapVisibility(this.visibility)},onMapResize:function(){if(this.visibility)google.maps.event.trigger(this.mapObject,"resize");else{var a=OpenLayers.Layer.Google.cache[this.map.id];if(!a.resized){var b=this;google.maps.event.addListenerOnce(this.mapObject,
"tilesloaded",function(){google.maps.event.trigger(b.mapObject,"resize");b.moveTo(b.map.getCenter(),b.map.getZoom());delete a.resized})}a.resized=!0}},setGMapVisibility:function(a){var b=OpenLayers.Layer.Google.cache[this.map.id];if(b){for(var c=this.type,d=this.map.layers,e,f=d.length-1;0<=f;--f)if(e=d[f],e instanceof OpenLayers.Layer.Google&&!0===e.visibility&&!0===e.inRange){c=e.type;a=!0;break}d=this.mapObject.getDiv();!0===a?(this.mapObject.setMapTypeId(c),d.style.left="",b.termsOfUse&&b.termsOfUse.style&&
(b.termsOfUse.style.left="",b.termsOfUse.style.display="",b.poweredBy.style.display=""),b.displayed=this.id):(delete b.displayed,d.style.left="-9999px",b.termsOfUse&&b.termsOfUse.style&&(b.termsOfUse.style.display="none",b.termsOfUse.style.left="-9999px",b.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(a){var b=null;null!=a&&(b=this.sphericalMercator?this.inverseMercator(a.bottom,a.left):new OpenLayers.LonLat(a.bottom,
a.left),a=this.sphericalMercator?this.inverseMercator(a.top,a.right):new OpenLayers.LonLat(a.top,a.right),b=new google.maps.LatLngBounds(new google.maps.LatLng(b.lat,b.lon),new google.maps.LatLng(a.lat,a.lon)));return b},getMapObjectLonLatFromMapObjectPixel:function(a){var b=this.map.getSize(),c=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),d=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),e=this.map.getResolution();a=new OpenLayers.LonLat(c+(a.x-b.w/2)*e,d-(a.y-b.h/2)*e);
this.wrapDateLine&&(a=a.wrapDateLine(this.maxExtent));return this.getMapObjectLonLatFromLonLat(a.lon,a.lat)},getMapObjectPixelFromMapObjectLonLat:function(a){var b=this.getLongitudeFromMapObjectLonLat(a);a=this.getLatitudeFromMapObjectLonLat(a);var c=this.map.getResolution(),d=this.map.getExtent();return this.getMapObjectPixelFromXY(1/c*(b-d.left),1/c*(d.top-a))},setMapObjectCenter:function(a,b){if(!1===this.animationEnabled&&b!=this.mapObject.zoom){var c=this.getMapContainer();google.maps.event.addListenerOnce(this.mapObject,
"idle",function(){c.style.visibility=""});c.style.visibility="hidden"}this.mapObject.setOptions({center:a,zoom:b})},getMapObjectZoomFromMapObjectBounds:function(a){return this.mapObject.getBoundsZoomLevel(a)},getMapObjectLonLatFromLonLat:function(a,b){var c;this.sphericalMercator?(c=this.inverseMercator(a,b),c=new google.maps.LatLng(c.lat,c.lon)):c=new google.maps.LatLng(b,a);return c},getMapObjectPixelFromXY:function(a,b){return new google.maps.Point(a,b)},destroy:function(){this.repositionListener&&
google.maps.event.removeListener(this.repositionListener);this.repositionTimer&&window.clearTimeout(this.repositionTimer);OpenLayers.Layer.Google.prototype.destroy.apply(this,arguments)}};
OpenLayers.Format.WPSDescribeProcess=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{wps:"http://www.opengis.net/wps/1.0.0",ows:"http://www.opengis.net/ows/1.1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",defaultPrefix:"wps",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,
[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},readers:{wps:{ProcessDescriptions:function(a,b){b.processDescriptions={};this.readChildNodes(a,b.processDescriptions)},ProcessDescription:function(a,b){var c={processVersion:this.getAttributeNS(a,this.namespaces.wps,"processVersion"),statusSupported:"true"===a.getAttribute("statusSupported"),storeSupported:"true"===a.getAttribute("storeSupported")};this.readChildNodes(a,c);b[c.identifier]=c},DataInputs:function(a,
b){b.dataInputs=[];this.readChildNodes(a,b.dataInputs)},ProcessOutputs:function(a,b){b.processOutputs=[];this.readChildNodes(a,b.processOutputs)},Output:function(a,b){var c={};this.readChildNodes(a,c);b.push(c)},ComplexOutput:function(a,b){b.complexOutput={};this.readChildNodes(a,b.complexOutput)},Input:function(a,b){var c={maxOccurs:parseInt(a.getAttribute("maxOccurs")),minOccurs:parseInt(a.getAttribute("minOccurs"))};this.readChildNodes(a,c);b.push(c)},BoundingBoxData:function(a,b){b.boundingBoxData=
{};this.readChildNodes(a,b.boundingBoxData)},CRS:function(a,b){b.CRSs||(b.CRSs={});b.CRSs[this.getChildValue(a)]=!0},LiteralData:function(a,b){b.literalData={};this.readChildNodes(a,b.literalData)},ComplexData:function(a,b){b.complexData={};this.readChildNodes(a,b.complexData)},Default:function(a,b){b["default"]={};this.readChildNodes(a,b["default"])},Supported:function(a,b){b.supported={};this.readChildNodes(a,b.supported)},Format:function(a,b){var c={};this.readChildNodes(a,c);b.formats||(b.formats=
{});b.formats[c.mimeType]=!0},MimeType:function(a,b){b.mimeType=this.getChildValue(a)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSDescribeProcess"});
OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",gmd:"http://www.isotc211.org/2005/gmd",geonet:"http://www.fao.org/geonetwork",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},
readers:{csw:{GetRecordsResponse:function(a,b){b.records=[];this.readChildNodes(a,b);var c=this.getAttributeNS(a,"","version");""!=c&&(b.version=c)},RequestId:function(a,b){b.RequestId=this.getChildValue(a)},SearchStatus:function(a,b){b.SearchStatus={};var c=this.getAttributeNS(a,"","timestamp");""!=c&&(b.SearchStatus.timestamp=c)},SearchResults:function(a,b){this.readChildNodes(a,b);for(var c=a.attributes,d={},e=0,f=c.length;e<f;++e)d[c[e].name]="numberOfRecordsMatched"==c[e].name||"numberOfRecordsReturned"==
c[e].name||"nextRecord"==c[e].name?parseInt(c[e].nodeValue):c[e].nodeValue;b.SearchResults=d},SummaryRecord:function(a,b){var c={type:"SummaryRecord"};this.readChildNodes(a,c);b.records.push(c)},BriefRecord:function(a,b){var c={type:"BriefRecord"};this.readChildNodes(a,c);b.records.push(c)},DCMIRecord:function(a,b){var c={type:"DCMIRecord"};this.readChildNodes(a,c);b.records.push(c)},Record:function(a,b){var c={type:"Record"};this.readChildNodes(a,c);b.records.push(c)},"*":function(a,b){var c=a.localName||
a.nodeName.split(":").pop();b[c]=this.getChildValue(a)}},geonet:{info:function(a,b){var c={};this.readChildNodes(a,c);b.gninfo=c}},dc:{"*":function(a,b){var c=a.localName||a.nodeName.split(":").pop();OpenLayers.Util.isArray(b[c])||(b[c]=[]);for(var d={},e=a.attributes,f=0,g=e.length;f<g;++f)d[e[f].name]=e[f].nodeValue;d.value=this.getChildValue(a);""!=d.value&&b[c].push(d)}},dct:{"*":function(a,b){var c=a.localName||a.nodeName.split(":").pop();OpenLayers.Util.isArray(b[c])||(b[c]=[]);b[c].push(this.getChildValue(a))}},
ows:OpenLayers.Util.applyDefaults({BoundingBox:function(a,b){b.bounds&&(b.BoundingBox=[{crs:b.projection,value:[b.bounds.left,b.bounds.bottom,b.bounds.right,b.bounds.top]}],delete b.projection,delete b.bounds);OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(a){a=this.writeNode("csw:GetRecords",a);a.setAttribute("xmlns:gmd",this.namespaces.gmd);return OpenLayers.Format.XML.prototype.write.apply(this,
[a])},writers:{csw:{GetRecords:function(a){a||(a={});var b=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:a.requestId||this.requestId,resultType:a.resultType||this.resultType,outputFormat:a.outputFormat||this.outputFormat,outputSchema:a.outputSchema||this.outputSchema,startPosition:a.startPosition||this.startPosition,maxRecords:a.maxRecords||this.maxRecords}});(a.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",
a.DistributedSearch||this.DistributedSearch,b);var c=a.ResponseHandler||this.ResponseHandler;if(OpenLayers.Util.isArray(c)&&0<c.length)for(var d=0,e=c.length;d<e;d++)this.writeNode("csw:ResponseHandler",c[d],b);this.writeNode("Query",a.Query||this.Query,b);return b},DistributedSearch:function(a){return this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:a.hopCount}})},ResponseHandler:function(a){return this.createElementNSPlus("csw:ResponseHandler",{value:a.value})},Query:function(a){a||
(a={});var b=this.createElementNSPlus("csw:Query",{attributes:{typeNames:a.typeNames||"csw:Record"}}),c=a.ElementName;if(OpenLayers.Util.isArray(c)&&0<c.length)for(var d=0,e=c.length;d<e;d++)this.writeNode("csw:ElementName",c[d],b);else this.writeNode("csw:ElementSetName",a.ElementSetName||{value:"summary"},b);a.Constraint&&this.writeNode("csw:Constraint",a.Constraint,b);a.SortBy&&this.writeNode("ogc:SortBy",a.SortBy,b);return b},ElementName:function(a){return this.createElementNSPlus("csw:ElementName",
{value:a.value})},ElementSetName:function(a){return this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:a.typeNames},value:a.value})},Constraint:function(a){var b=this.createElementNSPlus("csw:Constraint",{attributes:{version:a.version}});if(a.Filter){var c=new OpenLayers.Format.Filter({version:a.version});b.appendChild(c.write(a.Filter))}else a.CqlText&&(a=this.createElementNSPlus("CqlText",{value:a.CqlText.value}),b.appendChild(a));return b}},ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},
CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"});
OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(a,b,c){this.bounds=a;this.div=OpenLayers.Util.createDiv();this.div.style.overflow="hidden";this.events=new OpenLayers.Events(this,this.div);this.setBorder(b,c)},destroy:function(){this.div=this.bounds=null;OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(a,b){a||(a="red");b||(b=2);this.div.style.border=b+"px solid "+a},draw:function(a,b){OpenLayers.Util.modifyDOMElement(this.div,
null,a,b);return this.div},onScreen:function(){var a=!1;this.map&&(a=this.map.getExtent().containsBounds(this.bounds,!0,!0));return a},display:function(a){this.div.style.display=a?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"});
OpenLayers.Format.Text=OpenLayers.Class(OpenLayers.Format,{defaultStyle:null,extractStyles:!0,initialize:function(a){a=a||{};!1!==a.extractStyles&&(a.defaultStyle={externalGraphic:OpenLayers.Util.getImageLocation("marker.png"),graphicWidth:21,graphicHeight:25,graphicXOffset:-10.5,graphicYOffset:-12.5});OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){a=a.split("\n");for(var b,c=[],d=0;d<a.length-1;d++){var e=a[d].replace(/^\s*/,"").replace(/\s*$/,"");if("#"!=e.charAt(0))if(b){for(var e=
e.split("\t"),f=new OpenLayers.Geometry.Point(0,0),g={},h=this.defaultStyle?OpenLayers.Util.applyDefaults({},this.defaultStyle):null,k=!1,l=0;l<e.length;l++)if(e[l])if("point"==b[l])k=e[l].split(","),f.y=parseFloat(k[0]),f.x=parseFloat(k[1]),k=!0;else if("lat"==b[l])f.y=parseFloat(e[l]),k=!0;else if("lon"==b[l])f.x=parseFloat(e[l]),k=!0;else if("title"==b[l])g.title=e[l];else if("image"==b[l]||"icon"==b[l]&&h)h.externalGraphic=e[l];else if("iconSize"==b[l]&&h){var m=e[l].split(",");h.graphicWidth=
parseFloat(m[0]);h.graphicHeight=parseFloat(m[1])}else"iconOffset"==b[l]&&h?(m=e[l].split(","),h.graphicXOffset=parseFloat(m[0]),h.graphicYOffset=parseFloat(m[1])):"description"==b[l]?g.description=e[l]:"overflow"==b[l]?g.overflow=e[l]:g[b[l]]=e[l];k&&(this.internalProjection&&this.externalProjection&&f.transform(this.externalProjection,this.internalProjection),e=new OpenLayers.Feature.Vector(f,g,h),c.push(e))}else b=e.split("\t")}return c},CLASS_NAME:"OpenLayers.Format.Text"});
OpenLayers.Layer.Text=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,initialize:function(a,b){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments);this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments);this.clearFeatures();this.features=null},loadText:function(){this.loaded||null==this.location||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,
success:this.parseData,failure:function(a){this.events.triggerEvent("loadend")},scope:this}),this.loaded=!0)},moveTo:function(a,b,c){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments);this.visibility&&!this.loaded&&this.loadText()},parseData:function(a){a=a.responseText;var b={};OpenLayers.Util.extend(b,this.formatOptions);this.map&&!this.projection.equals(this.map.getProjectionObject())&&(b.externalProjection=this.projection,b.internalProjection=this.map.getProjectionObject());a=(new OpenLayers.Format.Text(b)).read(a);
for(var b=0,c=a.length;b<c;b++){var d={},e=a[b],f,g,h;f=new OpenLayers.LonLat(e.geometry.x,e.geometry.y);e.style.graphicWidth&&e.style.graphicHeight&&(g=new OpenLayers.Size(e.style.graphicWidth,e.style.graphicHeight));void 0!==e.style.graphicXOffset&&void 0!==e.style.graphicYOffset&&(h=new OpenLayers.Pixel(e.style.graphicXOffset,e.style.graphicYOffset));null!=e.style.externalGraphic?d.icon=new OpenLayers.Icon(e.style.externalGraphic,g,h):(d.icon=OpenLayers.Marker.defaultIcon(),null!=g&&d.icon.setSize(g));
null!=e.attributes.title&&null!=e.attributes.description&&(d.popupContentHTML="<h2>"+e.attributes.title+"</h2><p>"+e.attributes.description+"</p>");d.overflow=e.attributes.overflow||"auto";d=new OpenLayers.Feature(this,f,d);this.features.push(d);f=d.createMarker();null!=e.attributes.title&&null!=e.attributes.description&&f.events.register("click",d,this.markerClick);this.addMarker(f)}this.events.triggerEvent("loadend")},markerClick:function(a){var b=this==this.layer.selectedFeature;this.layer.selectedFeature=
b?null:this;for(var c=0,d=this.layer.map.popups.length;c<d;c++)this.layer.map.removePopup(this.layer.map.popups[c]);b||this.layer.map.addPopup(this.createPopup());OpenLayers.Event.stop(a)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var a=this.features[0];OpenLayers.Util.removeItem(this.features,a);a.destroy()}},CLASS_NAME:"OpenLayers.Layer.Text"});
OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(a,b,c){c&&c.layerOptions&&c.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{}));OpenLayers.Handler.Drag.prototype.initialize.apply(this,[a,b,c]);this.options=c?c:{}},setOptions:function(a){OpenLayers.Util.extend(this.options,
a);OpenLayers.Util.extend(this,a)},activate:function(){var a=!1;OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)&&(a=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions),this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,a),this.map.addLayer(this.layer),a=!0);return a},deactivate:function(){var a=!1;OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),
null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.feature=this.layer=null,a=!0);return a},down:function(a){this.fixedRadius=!!this.radius;a=this.layer.getLonLatFromViewPortPx(a.xy);this.origin=new OpenLayers.Geometry.Point(a.lon,a.lat);if(!this.fixedRadius||this.irregular)this.radius=this.map.getResolution();this.persist&&this.clear();this.feature=new OpenLayers.Feature.Vector;this.createGeometry();this.callback("create",[this.origin,this.feature]);this.layer.addFeatures([this.feature],
{silent:!0});this.layer.drawFeature(this.feature,this.style)},move:function(a){var b=this.layer.getLonLatFromViewPortPx(a.xy),b=new OpenLayers.Geometry.Point(b.lon,b.lat);this.irregular?(a=Math.sqrt(2)*Math.abs(b.y-this.origin.y)/2,this.radius=Math.max(this.map.getResolution()/2,a)):this.fixedRadius?this.origin=b:(this.calculateAngle(b,a),this.radius=Math.max(this.map.getResolution()/2,b.distanceTo(this.origin)));this.modifyGeometry();if(this.irregular){a=b.x-this.origin.x;var b=b.y-this.origin.y,
c;c=0==b?a/(this.radius*Math.sqrt(2)):a/b;this.feature.geometry.resize(1,this.origin,c);this.feature.geometry.move(a/2,b/2)}this.layer.drawFeature(this.feature,this.style)},up:function(a){this.finalize();this.start==this.last&&this.callback("done",[a.xy])},out:function(a){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-0.5);this.snapAngle&&(this.angle+=Math.PI/180*this.snapAngle);this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,
this.sides,this.snapAngle)},modifyGeometry:function(){var a,b,c=this.feature.geometry.components[0];c.components.length!=this.sides+1&&(this.createGeometry(),c=this.feature.geometry.components[0]);for(var d=0;d<this.sides;++d)b=c.components[d],a=this.angle+2*d*Math.PI/this.sides,b.x=this.origin.x+this.radius*Math.cos(a),b.y=this.origin.y+this.radius*Math.sin(a),b.clearBounds()},calculateAngle:function(a,b){var c=Math.atan2(a.y-this.origin.y,a.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!b[this.snapToggle]){var d=
Math.PI/180*this.snapAngle;this.angle=Math.round(c/d)*d}else this.angle=c},cancel:function(){this.callback("cancel",null);this.finalize()},finalize:function(){this.origin=null;this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(a,b){this.callbacks[a]&&this.callbacks[a].apply(this.control,[this.feature.geometry.clone()]);this.persist||"done"!=a&&"cancel"!=a||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"});
OpenLayers.Control.SLDSelect=OpenLayers.Class(OpenLayers.Control,{clearOnDeactivate:!1,layers:null,callbacks:null,selectionSymbolizer:{Polygon:{fillColor:"#FF0000",stroke:!1},Line:{strokeColor:"#FF0000",strokeWidth:2},Point:{graphicName:"square",fillColor:"#FF0000",pointRadius:5}},layerOptions:null,sketchStyle:null,wfsCache:{},layerCache:{},initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);this.callbacks=OpenLayers.Util.extend({done:this.select,click:this.select},this.callbacks);
this.handlerOptions=this.handlerOptions||{};this.layerOptions=OpenLayers.Util.applyDefaults(this.layerOptions,{displayInLayerSwitcher:!1,tileOptions:{maxGetUrlLength:2048}});this.sketchStyle&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":this.sketchStyle})}));this.handler=new a(this,this.callbacks,this.handlerOptions)},destroy:function(){for(var a in this.layerCache)delete this.layerCache[a];for(a in this.wfsCache)delete this.wfsCache[a];
OpenLayers.Control.prototype.destroy.apply(this,arguments)},coupleLayerVisiblity:function(a){this.setVisibility(a.object.getVisibility())},createSelectionLayer:function(a){var b;if(this.layerCache[a.id])b=this.layerCache[a.id];else{b=new OpenLayers.Layer.WMS(a.name,a.url,a.params,OpenLayers.Util.applyDefaults(this.layerOptions,a.getOptions()));this.layerCache[a.id]=b;if(!1===this.layerOptions.displayInLayerSwitcher)a.events.on({visibilitychanged:this.coupleLayerVisiblity,scope:b});this.map.addLayer(b)}return b},
createSLD:function(a,b,c){for(var d={version:"1.0.0",namedLayers:{}},e=(""+a.params.LAYERS).split(","),f=0,g=e.length;f<g;f++){var h=e[f];d.namedLayers[h]={name:h,userStyles:[]};var k=this.selectionSymbolizer,l=c[f];0<=l.type.indexOf("Polygon")?k={Polygon:this.selectionSymbolizer.Polygon}:0<=l.type.indexOf("LineString")?k={Line:this.selectionSymbolizer.Line}:0<=l.type.indexOf("Point")&&(k={Point:this.selectionSymbolizer.Point});d.namedLayers[h].userStyles.push({name:"default",rules:[new OpenLayers.Rule({symbolizer:k,
filter:b[f],maxScaleDenominator:a.options.minScale})]})}return(new OpenLayers.Format.SLD({srsName:this.map.getProjection()})).write(d)},parseDescribeLayer:function(a){var b=new OpenLayers.Format.WMSDescribeLayer,c=a.responseXML;c&&c.documentElement||(c=a.responseText);a=b.read(c);for(var b=[],c=null,d=0,e=a.length;d<e;d++)"WFS"==a[d].owsType&&(b.push(a[d].typeName),c=a[d].owsURL);OpenLayers.Request.GET({url:c,params:{SERVICE:"WFS",TYPENAME:b.toString(),REQUEST:"DescribeFeatureType",VERSION:"1.0.0"},
callback:function(a){var b=new OpenLayers.Format.WFSDescribeFeatureType,c=a.responseXML;c&&c.documentElement||(c=a.responseText);a=b.read(c);this.control.wfsCache[this.layer.id]=a;this.control._queue&&this.control.applySelection()},scope:this})},getGeometryAttributes:function(a){var b=[];a=this.wfsCache[a.id];for(var c=0,d=a.featureTypes.length;c<d;c++)for(var e=a.featureTypes[c].properties,f=0,g=e.length;f<g;f++){var h=e[f],k=h.type;(0<=k.indexOf("LineString")||0<=k.indexOf("GeometryAssociationType")||
0<=k.indexOf("GeometryPropertyType")||0<=k.indexOf("Point")||0<=k.indexOf("Polygon"))&&b.push(h)}return b},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);if(a)for(var b=0,c=this.layers.length;b<c;b++){var d=this.layers[b];d&&!this.wfsCache[d.id]&&OpenLayers.Request.GET({url:d.url,params:{SERVICE:"WMS",VERSION:d.params.VERSION,LAYERS:d.params.LAYERS,REQUEST:"DescribeLayer"},callback:this.parseDescribeLayer,scope:{layer:d,control:this}})}return a},deactivate:function(){var a=
OpenLayers.Control.prototype.deactivate.call(this);if(a)for(var b=0,c=this.layers.length;b<c;b++){var d=this.layers[b];if(d&&!0===this.clearOnDeactivate){var e=this.layerCache,f=e[d.id];f&&(d.events.un({visibilitychanged:this.coupleLayerVisiblity,scope:f}),f.destroy(),delete e[d.id])}}return a},setLayers:function(a){this.active?(this.deactivate(),this.layers=a,this.activate()):this.layers=a},createFilter:function(a,b){var c=null;this.handler instanceof OpenLayers.Handler.RegularPolygon?c=!0===this.handler.irregular?
new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:a.name,value:b.getBounds()}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Polygon?c=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Path?c=0<=a.type.indexOf("Point")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,
property:a.name,distance:0.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:b}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):this.handler instanceof OpenLayers.Handler.Click&&(c=0<=a.type.indexOf("Polygon")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:a.name,value:b}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:a.name,distance:0.01*this.map.getExtent().getWidth(),
distanceUnits:this.map.getUnits(),value:b}));return c},select:function(a){this._queue=function(){for(var b=0,c=this.layers.length;b<c;b++){for(var d=this.layers[b],e=this.getGeometryAttributes(d),f=[],g=0,h=e.length;g<h;g++){var k=e[g];if(null!==k){if(!(a instanceof OpenLayers.Geometry)){var l=this.map.getLonLatFromPixel(a.xy);a=new OpenLayers.Geometry.Point(l.lon,l.lat)}k=this.createFilter(k,a);null!==k&&f.push(k)}}g=this.createSelectionLayer(d);e=this.createSLD(d,f,e);this.events.triggerEvent("selected",
{layer:d,filters:f});g.mergeNewParams({SLD_BODY:e});delete this._queue}};this.applySelection()},applySelection:function(){for(var a=!0,b=0,c=this.layers.length;b<c;b++)if(!this.wfsCache[this.layers[b].id]){a=!1;break}a&&this._queue.call(this)},CLASS_NAME:"OpenLayers.Control.SLDSelect"});
OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);this.element=OpenLayers.Util.getElement(a)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element));this.map.events.register("moveend",this,this.updateScale);this.updateScale();return this.div},updateScale:function(){var a;
if(!0===this.geodesic){if(!this.map.getUnits())return;a=OpenLayers.INCHES_PER_UNIT;a=(this.map.getGeodesicPixelSize().w||1.0E-6)*a.km*OpenLayers.DOTS_PER_INCH}else a=this.map.getScale();a&&(a=9500<=a&&95E4>=a?Math.round(a/1E3)+"K":95E4<=a?Math.round(a/1E6)+"M":Math.round(a),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:a}))},CLASS_NAME:"OpenLayers.Control.Scale"});
OpenLayers.Layer.MapGuide=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,useHttpTile:!1,singleTile:!1,useOverlay:!1,useAsyncOverlay:!0,TILE_PARAMS:{operation:"GETTILEIMAGE",version:"1.2.0"},SINGLE_TILE_PARAMS:{operation:"GETMAPIMAGE",format:"PNG",locale:"en",clip:"1",version:"1.0.0"},OVERLAY_PARAMS:{operation:"GETDYNAMICMAPOVERLAYIMAGE",format:"PNG",locale:"en",clip:"1",version:"2.0.0"},FOLDER_PARAMS:{tileColumnsPerFolder:30,tileRowsPerFolder:30,format:"png",querystring:null},defaultSize:new OpenLayers.Size(300,
300),tileOriginCorner:"tl",initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments);if(null==d||null==d.isBaseLayer)this.isBaseLayer="true"!=this.transparent&&!0!=this.transparent;d&&null!=d.useOverlay&&(this.useOverlay=d.useOverlay);this.singleTile?this.useOverlay?(OpenLayers.Util.applyDefaults(this.params,this.OVERLAY_PARAMS),this.useAsyncOverlay||(this.params.version="1.0.0")):OpenLayers.Util.applyDefaults(this.params,this.SINGLE_TILE_PARAMS):(this.useHttpTile?
OpenLayers.Util.applyDefaults(this.params,this.FOLDER_PARAMS):OpenLayers.Util.applyDefaults(this.params,this.TILE_PARAMS),this.setTileSize(this.defaultSize))},clone:function(a){null==a&&(a=new OpenLayers.Layer.MapGuide(this.name,this.url,this.params,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){var b;b=a.getCenterLonLat();var c=this.map.getSize();this.singleTile?(a={setdisplaydpi:OpenLayers.DOTS_PER_INCH,setdisplayheight:c.h*this.ratio,setdisplaywidth:c.w*
this.ratio,setviewcenterx:b.lon,setviewcentery:b.lat,setviewscale:this.map.getScale()},this.useOverlay&&!this.useAsyncOverlay&&(b={},b=OpenLayers.Util.extend(b,a),b.operation="GETVISIBLEMAPEXTENT",b.version="1.0.0",b.session=this.params.session,b.mapName=this.params.mapName,b.format="text/xml",b=this.getFullRequestString(b),OpenLayers.Request.GET({url:b,async:!1})),b=this.getFullRequestString(a)):(c=this.map.getResolution(),b=Math.floor((a.left-this.maxExtent.left)/c),b=Math.round(b/this.tileSize.w),
a=Math.floor((this.maxExtent.top-a.top)/c),a=Math.round(a/this.tileSize.h),b=this.useHttpTile?this.getImageFilePath({tilecol:b,tilerow:a,scaleindex:this.resolutions.length-this.map.zoom-1}):this.getFullRequestString({tilecol:b,tilerow:a,scaleindex:this.resolutions.length-this.map.zoom-1}));return b},getFullRequestString:function(a,b){var c=null==b?this.url:b;"object"==typeof c&&(c=c[Math.floor(Math.random()*c.length)]);var d=c,e=OpenLayers.Util.extend({},this.params),e=OpenLayers.Util.extend(e,a),
f=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c)),g;for(g in e)g.toUpperCase()in f&&delete e[g];e=OpenLayers.Util.getParameterString(e);e=e.replace(/,/g,"+");""!=e&&(f=c.charAt(c.length-1),d="&"==f||"?"==f?d+e:-1==c.indexOf("?")?d+("?"+e):d+("&"+e));return d},getImageFilePath:function(a,b){var c=null==b?this.url:b;"object"==typeof c&&(c=c[Math.floor(Math.random()*c.length)]);var d="",e="";0>a.tilerow&&(d="-");d=0==a.tilerow?d+"0":d+Math.floor(Math.abs(a.tilerow/this.params.tileRowsPerFolder))*
this.params.tileRowsPerFolder;0>a.tilecol&&(e="-");e=0==a.tilecol?e+"0":e+Math.floor(Math.abs(a.tilecol/this.params.tileColumnsPerFolder))*this.params.tileColumnsPerFolder;d="/S"+Math.floor(a.scaleindex)+"/"+this.params.basemaplayergroupname+"/R"+d+"/C"+e+"/"+a.tilerow%this.params.tileRowsPerFolder+"_"+a.tilecol%this.params.tileColumnsPerFolder+"."+this.params.format;this.params.querystring&&(d+="?"+this.params.querystring);return c+d},calculateGridLayout:function(a,b,c){var d=c*this.tileSize.w;c*=
this.tileSize.h;var e=a.left-b.lon,f=Math.floor(e/d)-this.buffer;a=b.lat-a.top+c;var g=Math.floor(a/c)-this.buffer;return{tilelon:d,tilelat:c,tileoffsetlon:b.lon+f*d,tileoffsetlat:b.lat-c*g,tileoffsetx:-(e/d-f)*this.tileSize.w,tileoffsety:(g-a/c)*this.tileSize.h}},CLASS_NAME:"OpenLayers.Layer.MapGuide"});
OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);var c={done:this.measureComplete,point:this.measurePartial};this.immediate&&(c.modify=this.measureImmediate);this.callbacks=OpenLayers.Util.extend(c,this.callbacks);
this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions);this.handler=new a(this,this.callbacks,this.handlerOptions)},deactivate:function(){this.cancelDelay();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay();this.handler.cancel()},setImmediate:function(a){(this.immediate=a)?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(a,b){var c=this.active;c&&this.deactivate();
this.handler=new a(this,this.callbacks,b);c&&this.activate()},measureComplete:function(a){this.cancelDelay();this.measure(a,"measure")},measurePartial:function(a,b){this.cancelDelay();b=b.clone();this.handler.freehandMode(this.handler.evt)?this.measure(b,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null;this.measure(b,"measurepartial")},this),this.partialDelay)},measureImmediate:function(a,b,c){c&&!this.handler.freehandMode(this.handler.evt)&&
(this.cancelDelay(),this.measure(b.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(a,b){var c,d;-1<a.CLASS_NAME.indexOf("LineString")?(c=this.getBestLength(a),d=1):(c=this.getBestArea(a),d=2);this.events.triggerEvent(b,{measure:c[0],units:c[1],order:d,geometry:a})},getBestArea:function(a){for(var b=this.displaySystemUnits[this.displaySystem],c,d,e=0,f=b.length;e<f&&!(c=b[e],d=this.getArea(a,
c),1<d);++e);return[d,c]},getArea:function(a,b){var c,d;this.geodesic?(c=a.getGeodesicArea(this.map.getProjectionObject()),d="m"):(c=a.getArea(),d=this.map.getUnits());var e=OpenLayers.INCHES_PER_UNIT[b];e&&(c*=Math.pow(OpenLayers.INCHES_PER_UNIT[d]/e,2));return c},getBestLength:function(a){for(var b=this.displaySystemUnits[this.displaySystem],c,d,e=0,f=b.length;e<f&&!(c=b[e],d=this.getLength(a,c),1<d);++e);return[d,c]},getLength:function(a,b){var c,d;this.geodesic?(c=a.getGeodesicLength(this.map.getProjectionObject()),
d="m"):(c=a.getLength(),d=this.map.getUnits());var e=OpenLayers.INCHES_PER_UNIT[b];e&&(c*=OpenLayers.INCHES_PER_UNIT[d]/e);return c},CLASS_NAME:"OpenLayers.Control.Measure"});
OpenLayers.Format.WMC.v1_0_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",initialize:function(a){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[a])},read_wmc_SRS:function(a,b){var c=this.getChildValue(b);"object"!=typeof a.projections&&(a.projections={});for(var c=c.split(/ +/),d=0,e=c.length;d<e;d++)a.projections[c[d]]=!0},write_wmc_Layer:function(a){var b=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,
[a]);if(a.srs){var c=[],d;for(d in a.srs)c.push(d);b.appendChild(this.createElementDefaultNS("SRS",c.join(" ")))}b.appendChild(this.write_wmc_FormatList(a));b.appendChild(this.write_wmc_StyleList(a));a.dimensions&&b.appendChild(this.write_wmc_DimensionList(a));b.appendChild(this.write_wmc_LayerExtension(a))},CLASS_NAME:"OpenLayers.Format.WMC.v1_0_0"});
OpenLayers.Format.WMTSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0,{version:"1.0.0",namespaces:{ows:"http://www.opengis.net/ows/1.1",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink"},yx:null,defaultPrefix:"wmts",initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.options=a;a=OpenLayers.Util.extend({},OpenLayers.Format.WMTSCapabilities.prototype.yx);this.yx=OpenLayers.Util.extend(a,this.yx)},read:function(a){"string"==
typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);b.version=this.version;return b},readers:{wmts:{Capabilities:function(a,b){this.readChildNodes(a,b)},Contents:function(a,b){b.contents={};b.contents.layers=[];b.contents.tileMatrixSets={};this.readChildNodes(a,b.contents)},Layer:function(a,b){var c={styles:[],formats:[],dimensions:[],tileMatrixSetLinks:[],layers:[]};this.readChildNodes(a,c);b.layers.push(c)},Style:function(a,
b){var c={};c.isDefault="true"===a.getAttribute("isDefault");this.readChildNodes(a,c);b.styles.push(c)},Format:function(a,b){b.formats.push(this.getChildValue(a))},TileMatrixSetLink:function(a,b){var c={};this.readChildNodes(a,c);b.tileMatrixSetLinks.push(c)},TileMatrixSet:function(a,b){if(b.layers){var c={matrixIds:[]};this.readChildNodes(a,c);b.tileMatrixSets[c.identifier]=c}else b.tileMatrixSet=this.getChildValue(a)},TileMatrix:function(a,b){var c={supportedCRS:b.supportedCRS};this.readChildNodes(a,
c);b.matrixIds.push(c)},ScaleDenominator:function(a,b){b.scaleDenominator=parseFloat(this.getChildValue(a))},TopLeftCorner:function(a,b){var c=this.getChildValue(a).split(" "),d;b.supportedCRS&&(d=b.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/,"urn:ogc:def:crs:$1::$2"),d=!!this.yx[d]);b.topLeftCorner=d?new OpenLayers.LonLat(c[1],c[0]):new OpenLayers.LonLat(c[0],c[1])},TileWidth:function(a,b){b.tileWidth=parseInt(this.getChildValue(a))},TileHeight:function(a,b){b.tileHeight=parseInt(this.getChildValue(a))},
MatrixWidth:function(a,b){b.matrixWidth=parseInt(this.getChildValue(a))},MatrixHeight:function(a,b){b.matrixHeight=parseInt(this.getChildValue(a))},ResourceURL:function(a,b){b.resourceUrl=b.resourceUrl||{};b.resourceUrl[a.getAttribute("resourceType")]={format:a.getAttribute("format"),template:a.getAttribute("template")}},WSDL:function(a,b){b.wsdl={};b.wsdl.href=a.getAttribute("xlink:href")},ServiceMetadataURL:function(a,b){b.serviceMetadataUrl={};b.serviceMetadataUrl.href=a.getAttribute("xlink:href")},
LegendURL:function(a,b){b.legend={};b.legend.href=a.getAttribute("xlink:href");b.legend.format=a.getAttribute("format")},Dimension:function(a,b){var c={values:[]};this.readChildNodes(a,c);b.dimensions.push(c)},Default:function(a,b){b["default"]=this.getChildValue(a)},Value:function(a,b){b.values.push(this.getChildValue(a))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities.v1_0_0"});
OpenLayers.Layer.WorldWind=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{},isBaseLayer:!0,lzd:null,zoomLevels:null,initialize:function(a,b,c,d,e,f){this.lzd=c;this.zoomLevels=d;c=[];c.push(a,b,e,f);OpenLayers.Layer.Grid.prototype.initialize.apply(this,c);this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getZoom:function(){var a=this.map.getZoom();this.map.getMaxExtent();return a-=Math.log(this.maxResolution/(this.lzd/512))/Math.log(2)},getURL:function(a){a=this.adjustBounds(a);
var b=this.getZoom(),c=this.map.getMaxExtent(),d=this.lzd/Math.pow(2,this.getZoom()),e=Math.floor((a.left-c.left)/d);a=Math.floor((a.bottom-c.bottom)/d);return this.map.getResolution()<=this.lzd/512&&this.getZoom()<=this.zoomLevels?this.getFullRequestString({L:b,X:e,Y:a}):OpenLayers.Util.getImageLocation("blank.gif")},CLASS_NAME:"OpenLayers.Layer.WorldWind"});
OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,
50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto",
"auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,
0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,
21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,
0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(a,b,c,d,e,f,g){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png");
OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments);this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"});
OpenLayers.Format.SOSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.SOSCapabilities,{namespaces:{ows:"http://www.opengis.net/ows/1.1",sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.options=a},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,
[a]));a&&9==a.nodeType&&(a=a.documentElement);var b={};this.readNode(a,b);return b},readers:{gml:OpenLayers.Util.applyDefaults({name:function(a,b){b.name=this.getChildValue(a)},TimePeriod:function(a,b){b.timePeriod={};this.readChildNodes(a,b.timePeriod)},beginPosition:function(a,b){b.beginPosition=this.getChildValue(a)},endPosition:function(a,b){b.endPosition=this.getChildValue(a)}},OpenLayers.Format.GML.v3.prototype.readers.gml),sos:{Capabilities:function(a,b){this.readChildNodes(a,b)},Contents:function(a,
b){b.contents={};this.readChildNodes(a,b.contents)},ObservationOfferingList:function(a,b){b.offeringList={};this.readChildNodes(a,b.offeringList)},ObservationOffering:function(a,b){var c=this.getAttributeNS(a,this.namespaces.gml,"id");b[c]={procedures:[],observedProperties:[],featureOfInterestIds:[],responseFormats:[],resultModels:[],responseModes:[]};this.readChildNodes(a,b[c])},time:function(a,b){b.time={};this.readChildNodes(a,b.time)},procedure:function(a,b){b.procedures.push(this.getAttributeNS(a,
this.namespaces.xlink,"href"))},observedProperty:function(a,b){b.observedProperties.push(this.getAttributeNS(a,this.namespaces.xlink,"href"))},featureOfInterest:function(a,b){b.featureOfInterestIds.push(this.getAttributeNS(a,this.namespaces.xlink,"href"))},responseFormat:function(a,b){b.responseFormats.push(this.getChildValue(a))},resultModel:function(a,b){b.resultModels.push(this.getChildValue(a))},responseMode:function(a,b){b.responseModes.push(this.getChildValue(a))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},
CLASS_NAME:"OpenLayers.Format.SOSCapabilities.v1_0_0"});
OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(a){var b=!0;this.pinching=!1;OpenLayers.Event.isMultiTouch(a)?(this.started=!0,this.last=this.start={distance:this.getDistance(a.touches),delta:0,scale:1},this.callback("start",[a,this.start]),b=!this.stopDown):(this.started=!1,this.last=this.start=null);OpenLayers.Event.stop(a);return b},touchmove:function(a){if(this.started&&OpenLayers.Event.isMultiTouch(a)){this.pinching=
!0;var b=this.getPinchData(a);this.callback("move",[a,b]);this.last=b;OpenLayers.Event.stop(a)}return!0},touchend:function(a){this.started&&(this.pinching=this.started=!1,this.callback("done",[a,this.start,this.last]),this.last=this.start=null);return!0},activate:function(){var a=!1;OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,a=!0);return a},deactivate:function(){var a=!1;OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=
!1,this.last=this.start=null,a=!0);return a},getDistance:function(a){var b=a[0];a=a[1];return Math.sqrt(Math.pow(b.clientX-a.clientX,2)+Math.pow(b.clientY-a.clientY,2))},getPinchData:function(a){a=this.getDistance(a.touches);return{distance:a,delta:this.last.distance-a,scale:a/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"});
OpenLayers.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new OpenLayers.Control.Navigation,new OpenLayers.Control.ZoomBox])},draw:function(){var a=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);null===this.defaultControl&&(this.defaultControl=this.controls[0]);return a},CLASS_NAME:"OpenLayers.Control.NavToolbar"});
OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,containerCenter:null,pinchOrigin:null,currentCenter:null,autoActivate:!0,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},activate:function(){var a=OpenLayers.Control.prototype.activate.apply(this,arguments);a&&(this.map.events.on({moveend:this.updateContainerCenter,
scope:this}),this.updateContainerCenter());return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.apply(this,arguments);this.map&&this.map.events&&this.map.events.un({moveend:this.updateContainerCenter,scope:this});return a},updateContainerCenter:function(){var a=this.map.layerContainerDiv;this.containerCenter={x:parseInt(a.style.left,10)+50,y:parseInt(a.style.top,10)+50}},pinchStart:function(a,b){this.currentCenter=this.pinchOrigin=a.xy},pinchMove:function(a,b){var c=b.scale,
d=this.containerCenter,e=this.pinchOrigin,f=a.xy,g=Math.round(f.x-e.x+(c-1)*(d.x-e.x)),d=Math.round(f.y-e.y+(c-1)*(d.y-e.y));this.applyTransform("translate("+g+"px, "+d+"px) scale("+c+")");this.currentCenter=f},applyTransform:function(a){var b=this.map.layerContainerDiv.style;b["-webkit-transform"]=a;b["-moz-transform"]=a},pinchDone:function(a,b,c){this.applyTransform("");a=this.map.getZoomForResolution(this.map.getResolution()/c.scale,!0);if(a!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){b=
this.map.getResolutionForZoom(a);c=this.map.getLonLatFromPixel(this.pinchOrigin);var d=this.currentCenter,e=this.map.getSize();c.lon+=b*(e.w/2-d.x);c.lat-=b*(e.h/2-d.y);this.map.div.clientWidth=this.map.div.clientWidth;this.map.setCenter(c,a)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"});
OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"Data CC-By-SA by <a href='http://openstreetmap.org/'>OpenStreetMap</a>",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(a,b,c){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments);this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},
this.options&&this.options.tileOptions)},clone:function(a){null==a&&(a=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions()));return a=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},CLASS_NAME:"OpenLayers.Layer.OSM"});
OpenLayers.Strategy.Refresh=OpenLayers.Class(OpenLayers.Strategy,{force:!1,interval:0,timer:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);a&&(!0===this.layer.visibility&&this.start(),this.layer.events.on({visibilitychanged:this.reset,scope:this}));return a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&this.stop();return a},reset:function(){!0===this.layer.visibility?this.start():this.stop()},start:function(){this.interval&&"number"===
typeof this.interval&&0<this.interval&&(this.timer=window.setInterval(OpenLayers.Function.bind(this.refresh,this),this.interval))},refresh:function(){this.layer&&this.layer.refresh&&"function"==typeof this.layer.refresh&&this.layer.refresh({force:this.force})},stop:function(){null!==this.timer&&(window.clearInterval(this.timer),this.timer=null)},CLASS_NAME:"OpenLayers.Strategy.Refresh"});
OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:navigator.geolocation,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate();OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.geolocation?OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):
this.getCurrentLocation(),!0):!1:(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId);return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(a){var b=(new OpenLayers.LonLat(a.coords.longitude,a.coords.latitude)).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(b);this.events.triggerEvent("locationupdated",{position:a,
point:new OpenLayers.Geometry.Point(b.lon,b.lat)})},getCurrentLocation:function(){if(!this.active||this.watch)return!1;this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions);return!0},failure:function(a){this.events.triggerEvent("locationfailed",{error:a})},CLASS_NAME:"OpenLayers.Control.Geolocate"});
OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(a,b,c,d){var e=[];c=OpenLayers.Util.upperCaseObject(c);e.push(a,b,c,d);OpenLayers.Layer.Grid.prototype.initialize.apply(this,e);OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=d&&d.isBaseLayer||(this.isBaseLayer=!1),"jpg"==this.params.FORMAT&&
(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png"))},clone:function(a){null==a&&(a=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.projection.getCode().split(":"),b=b[b.length-1],c=this.getImageSize();a={BBOX:a.toBBOX(),SIZE:c.w+","+c.h,F:"image",BBOXSR:b,IMAGESR:b};if(this.layerDefs){var b=[],d;for(d in this.layerDefs)this.layerDefs.hasOwnProperty(d)&&
this.layerDefs[d]&&(b.push(d),b.push(":"),b.push(this.layerDefs[d]),b.push(";"));0<b.length&&(a.LAYERDEFS=b.join(""))}return this.getFullRequestString(a)},setLayerFilter:function(a,b){this.layerDefs||(this.layerDefs={});b?this.layerDefs[a]=b:delete this.layerDefs[a]},clearLayerFilter:function(a){a?delete this.layerDefs[a]:delete this.layerDefs},mergeNewParams:function(a){a=[OpenLayers.Util.upperCaseObject(a)];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"});
OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(a){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){var b,c;a=a.replace(/[\n\r]/g," ");if(c=this.regExes.typeStr.exec(a))if(a=c[1].toLowerCase(),c=c[2],this.parse[a]&&(b=this.parse[a].apply(this,[c])),this.internalProjection&&this.externalProjection)if(b&&
"OpenLayers.Feature.Vector"==b.CLASS_NAME)b.geometry.transform(this.externalProjection,this.internalProjection);else if(b&&"geometrycollection"!=a&&"object"==typeof b)for(a=0,c=b.length;a<c;a++)b[a].geometry.transform(this.externalProjection,this.internalProjection);return b},write:function(a){var b,c;a.constructor==Array?c=!0:(a=[a],c=!1);var d=[];c&&d.push("GEOMETRYCOLLECTION(");for(var e=0,f=a.length;e<f;++e)c&&0<e&&d.push(","),b=a[e].geometry,d.push(this.extractGeometry(b));c&&d.push(")");return d.join("")},
extractGeometry:function(a){var b=a.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[b])return null;this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));return("collection"==b?"GEOMETRYCOLLECTION":b.toUpperCase())+"("+this.extract[b].apply(this,[a])+")"},extract:{point:function(a){return a.x+" "+a.y},multipoint:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.point.apply(this,[a.components[c]])+
")");return b.join(",")},linestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b.join(",")},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},polygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},multipolygon:function(a){for(var b=
[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.polygon.apply(this,[a.components[c]])+")");return b.join(",")},collection:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extractGeometry.apply(this,[a.components[c]]));return b.join(",")}},parse:{point:function(a){a=OpenLayers.String.trim(a).split(this.regExes.spaces);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a[0],a[1]))},multipoint:function(a){for(var b=OpenLayers.String.trim(a).split(","),
c=[],d=0,e=b.length;d<e;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.point.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(c))},linestring:function(a){a=OpenLayers.String.trim(a).split(",");for(var b=[],c=0,d=a.length;c<d;++c)b.push(this.parse.point.apply(this,[a[c]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(b))},multilinestring:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.parenComma),
c=[],d=0,e=b.length;d<e;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.linestring.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(c))},polygon:function(a){var b;a=OpenLayers.String.trim(a).split(this.regExes.parenComma);for(var c=[],d=0,e=a.length;d<e;++d)b=a[d].replace(this.regExes.trimParens,"$1"),b=this.parse.linestring.apply(this,[b]).geometry,b=new OpenLayers.Geometry.LinearRing(b.components),c.push(b);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(c))},
multipolygon:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.doubleParenComma),c=[],d=0,e=b.length;d<e;++d)a=b[d].replace(this.regExes.trimParens,"$1"),c.push(this.parse.polygon.apply(this,[a]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(c))},geometrycollection:function(a){a=a.replace(/,\s*([A-Za-z])/g,"|$1");a=OpenLayers.String.trim(a).split("|");for(var b=[],c=0,d=a.length;c<d;++c)b.push(OpenLayers.Format.WKT.prototype.read.apply(this,[a[c]]));
return b}},CLASS_NAME:"OpenLayers.Format.WKT"});
OpenLayers.Handler.Hover=OpenLayers.Class(OpenLayers.Handler,{delay:500,pixelTolerance:null,stopMove:!1,px:null,timerId:null,mousemove:function(a){this.passesTolerance(a.xy)&&(this.clearTimer(),this.callback("move",[a]),this.px=a.xy,a=OpenLayers.Util.extend({},a),this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay));return!this.stopMove},mouseout:function(a){OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv)&&(this.clearTimer(),this.callback("move",[a]));return!0},
passesTolerance:function(a){var b=!0;this.pixelTolerance&&this.px&&Math.sqrt(Math.pow(this.px.x-a.x,2)+Math.pow(this.px.y-a.y,2))<this.pixelTolerance&&(b=!1);return b},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null)},delayedCall:function(a){this.callback("pause",[a])},deactivate:function(){var a=!1;OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),a=!0);return a},CLASS_NAME:"OpenLayers.Handler.Hover"});
OpenLayers.Control.GetFeature=OpenLayers.Class(OpenLayers.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,circle:!1,maxFeatures:10,features:null,hoverFeature:null,handlers:null,hoverResponse:null,filterType:OpenLayers.Filter.Spatial.BBOX,initialize:function(a){a.handlerOptions=a.handlerOptions||{};OpenLayers.Control.prototype.initialize.apply(this,[a]);this.features={};this.handlers={};this.click&&
(this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{}));this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},OpenLayers.Util.extend(this.handlerOptions.box,{boxDivClassName:"olHandlerBoxSelectFeature"})));this.circle&&(this.handlers.circle=new OpenLayers.Handler.RegularPolygon(this,{done:this.selectCircle},{sides:40}));this.hover&&(this.handlers.hover=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},
OpenLayers.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var a in this.handlers)this.handlers[a].activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var a in this.handlers)this.handlers[a].deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(a){var b=this.pixelToBounds(a.xy);this.setModifiers(a);this.request(b,{single:this.single})},
selectCircle:function(a){OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait");this.request(a)},selectBox:function(a){var b;if(a instanceof OpenLayers.Bounds)b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom}),a=this.map.getLonLatFromPixel({x:a.right,y:a.top}),b=new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat);else{if(this.click)return;b=this.pixelToBounds(a)}this.setModifiers(this.handlers.box.dragHandler.evt);this.request(b)},selectHover:function(a){a=this.pixelToBounds(a.xy);this.request(a,
{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"))},request:function(a,b){b=b||{};var c;c=this.circle?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,value:a}):new OpenLayers.Filter.Spatial({type:this.filterType,value:a});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait");c=this.protocol.read({maxFeatures:!0==b.single?
this.maxFeatures:void 0,filter:c,callback:function(c){c.success()&&(c.features.length?!0==b.single?this.selectBestFeature(c.features,a.getCenterLonLat(),b):this.select(c.features):b.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll()));OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},scope:this});!0==b.hover&&(this.hoverResponse=c)},selectBestFeature:function(a,b,c){c=c||{};if(a.length){b=new OpenLayers.Geometry.Point(b.lon,b.lat);for(var d,
e,f,g=Number.MAX_VALUE,h=0;h<a.length&&!(d=a[h],d.geometry&&(f=b.distanceTo(d.geometry,{edge:!1}),f<g&&(g=f,e=d,0==g)));++h);!0==c.hover?this.hoverSelect(e):this.select(e||a)}},setModifiers:function(a){this.modifiers={multiple:this.multiple||this.multipleKey&&a[this.multipleKey],toggle:this.toggle||this.toggleKey&&a[this.toggleKey]}},select:function(a){this.modifiers.multiple||this.modifiers.toggle||this.unselectAll();OpenLayers.Util.isArray(a)||(a=[a]);var b=this.events.triggerEvent("beforefeaturesselected",
{features:a});if(!1!==b){for(var c=[],d,e=0,f=a.length;e<f;++e)d=a[e],this.features[d.fid||d.id]?this.modifiers.toggle&&this.unselect(this.features[d.fid||d.id]):(b=this.events.triggerEvent("beforefeatureselected",{feature:d}),!1!==b&&(this.features[d.fid||d.id]=d,c.push(d),this.events.triggerEvent("featureselected",{feature:d})));this.events.triggerEvent("featuresselected",{features:c})}},hoverSelect:function(a){var b=a?a.fid||a.id:null,c=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:
null;c&&c!=b&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null);b&&b!=c&&(this.events.triggerEvent("hoverfeature",{feature:a}),this.hoverFeature=a)},unselect:function(a){delete this.features[a.fid||a.id];this.events.triggerEvent("featureunselected",{feature:a})},unselectAll:function(){for(var a in this.features)this.unselect(this.features[a])},setMap:function(a){for(var b in this.handlers)this.handlers[b].setMap(a);OpenLayers.Control.prototype.setMap.apply(this,
arguments)},pixelToBounds:function(a){var b=a.add(-this.clickTolerance/2,this.clickTolerance/2);a=a.add(this.clickTolerance/2,-this.clickTolerance/2);b=this.map.getLonLatFromPixel(b);a=this.map.getLonLatFromPixel(a);return new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)},CLASS_NAME:"OpenLayers.Control.GetFeature"});
OpenLayers.Format.QueryStringFilter=function(){function a(a){a=a.replace(/%/g,"\\%");a=a.replace(/\\\\\.(\*)?/g,function(a,b){return b?a:"\\\\_"});a=a.replace(/\\\\\.\*/g,"\\\\%");a=a.replace(/(\\)?\.(\*)?/g,function(a,b,c){return b||c?a:"_"});a=a.replace(/(\\)?\.\*/g,function(a,b){return b?a:"%"});a=a.replace(/\\\./g,".");return a=a.replace(/(\\)?\\\*/g,function(a,b){return b?a:"*"})}var b={};b[OpenLayers.Filter.Comparison.EQUAL_TO]="eq";b[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne";b[OpenLayers.Filter.Comparison.LESS_THAN]=
"lt";b[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte";b[OpenLayers.Filter.Comparison.GREATER_THAN]="gt";b[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte";b[OpenLayers.Filter.Comparison.LIKE]="ilike";return OpenLayers.Class(OpenLayers.Format,{wildcarded:!1,srsInBBOX:!1,write:function(c,d){d=d||{};var e=c.CLASS_NAME,e=e.substring(e.lastIndexOf(".")+1);switch(e){case "Spatial":switch(c.type){case OpenLayers.Filter.Spatial.BBOX:d.bbox=c.value.toArray();this.srsInBBOX&&c.projection&&
d.bbox.push(c.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:d.tolerance=c.distance;case OpenLayers.Filter.Spatial.WITHIN:d.lon=c.value.x;d.lat=c.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+c.type)}break;case "Comparison":e=b[c.type];if(void 0!==e){var f=c.value;c.type==OpenLayers.Filter.Comparison.LIKE&&(f=a(f),this.wildcarded&&(f="%"+f+"%"));d[c.property+"__"+e]=f;d.queryable=d.queryable||[];d.queryable.push(c.property)}else OpenLayers.Console.warn("Unknown comparison filter type "+
c.type);break;case "Logical":if(c.type===OpenLayers.Filter.Logical.AND)for(e=0,f=c.filters.length;e<f;e++)d=this.write(c.filters[e],d);else OpenLayers.Console.warn("Unsupported logical filter type "+c.type);break;default:OpenLayers.Console.warn("Unknown filter type "+e)}return d},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}();
OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate();OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),
this.redraw(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0):!1},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.element||(this.div.left="",this.div.top="",this.element=this.div);return this.div},redraw:function(a){var b;if(null==a)this.reset();else if(null==this.lastXy||Math.abs(a.xy.x-
this.lastXy.x)>this.granularity||Math.abs(a.xy.y-this.lastXy.y)>this.granularity)this.lastXy=a.xy;else if(b=this.map.getLonLatFromPixel(a.xy))this.displayProjection&&b.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=a.xy,a=this.formatOutput(b),a!=this.element.innerHTML&&(this.element.innerHTML=a)},reset:function(a){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(a){var b=parseInt(this.numDigits);return this.prefix+a.lon.toFixed(b)+
this.separator+a.lat.toFixed(b)+this.suffix},CLASS_NAME:"OpenLayers.Control.MousePosition"});
OpenLayers.Tile.UTFGrid=OpenLayers.Class(OpenLayers.Tile,{url:null,utfgridResolution:2,json:null,format:null,destroy:function(){this.clear();OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(a)if(this.isLoading?(this.abortLoading(),this.events.triggerEvent("reload")):(this.isLoading=!0,this.events.triggerEvent("loadstart")),this.url=this.layer.getURL(this.bounds),this.layer.useJSONP){var b=new OpenLayers.Protocol.Script({url:this.url,
callback:function(a){this.isLoading=!1;this.events.triggerEvent("loadend");this.json=a.data},scope:this});b.read();this.request=b}else this.request=OpenLayers.Request.GET({url:this.url,callback:function(a){this.isLoading=!1;this.events.triggerEvent("loadend");200===a.status&&this.parseData(a.responseText)},scope:this});else this.unload();return a},abortLoading:function(){this.request&&(this.request.abort(),delete this.request);this.isLoading=!1},getFeatureInfo:function(a,b){var c=null;if(this.json){var d=
this.getFeatureId(a,b);null!==d&&(c={id:d,data:this.json.data[d]})}return c},getFeatureId:function(a,b){var c=null;if(this.json){var d=this.utfgridResolution,d=this.json.grid[Math.floor(b/d)].charCodeAt(Math.floor(a/d)),d=this.indexFromCharCode(d),e=this.json.keys;!isNaN(d)&&d in e&&(c=e[d])}return c},indexFromCharCode:function(a){93<=a&&a--;35<=a&&a--;return a-32},parseData:function(a){this.format||(this.format=new OpenLayers.Format.JSON);this.json=this.format.read(a)},clear:function(){this.json=
null},CLASS_NAME:"OpenLayers.Tile.UTFGrid"});OpenLayers.Control.Button=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){},CLASS_NAME:"OpenLayers.Control.Button"});
OpenLayers.Control.NavigationHistory=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOGGLE,previous:null,previousOptions:null,next:null,nextOptions:null,limit:50,autoActivate:!0,clearOnDeactivate:!1,registry:null,nextStack:null,previousStack:null,listeners:null,restoring:!1,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.registry=OpenLayers.Util.extend({moveend:this.getState},this.registry);a={trigger:OpenLayers.Function.bind(this.previousTrigger,
this),displayClass:this.displayClass+" "+this.displayClass+"Previous"};OpenLayers.Util.extend(a,this.previousOptions);this.previous=new OpenLayers.Control.Button(a);a={trigger:OpenLayers.Function.bind(this.nextTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Next"};OpenLayers.Util.extend(a,this.nextOptions);this.next=new OpenLayers.Control.Button(a);this.clear()},onPreviousChange:function(a,b){a&&!this.previous.active?this.previous.activate():!a&&this.previous.active&&this.previous.deactivate()},
onNextChange:function(a,b){a&&!this.next.active?this.next.activate():!a&&this.next.active&&this.next.deactivate()},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this);this.previous.destroy();this.next.destroy();this.deactivate();for(var a in this)this[a]=null},setMap:function(a){this.map=a;this.next.setMap(a);this.previous.setMap(a)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.next.draw();this.previous.draw()},previousTrigger:function(){var a=this.previousStack.shift(),
b=this.previousStack.shift();void 0!=b?(this.nextStack.unshift(a),this.previousStack.unshift(b),this.restoring=!0,this.restore(b),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)):this.previousStack.unshift(a);return b},nextTrigger:function(){var a=this.nextStack.shift();void 0!=a&&(this.previousStack.unshift(a),this.restoring=!0,this.restore(a),this.restoring=!1,this.onNextChange(this.nextStack[0],
this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1));return a},clear:function(){this.previousStack=[];this.previous.deactivate();this.nextStack=[];this.next.deactivate()},getState:function(){return{center:this.map.getCenter(),resolution:this.map.getResolution(),projection:this.map.getProjectionObject(),units:this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units}},restore:function(a){var b,c;if(this.map.getProjectionObject()==
a.projection)c=this.map.getZoomForResolution(a.resolution),b=a.center;else{b=a.center.clone();b.transform(a.projection,this.map.getProjectionObject());c=a.units;var d=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;c=this.map.getZoomForResolution((c&&d?OpenLayers.INCHES_PER_UNIT[c]/OpenLayers.INCHES_PER_UNIT[d]:1)*a.resolution)}this.map.setCenter(b,c)},setListeners:function(){this.listeners={};for(var a in this.registry)this.listeners[a]=OpenLayers.Function.bind(function(){if(!this.restoring){var b=
this.registry[a].apply(this,arguments);this.previousStack.unshift(b);if(1<this.previousStack.length)this.onPreviousChange(this.previousStack[1],this.previousStack.length-1);this.previousStack.length>this.limit+1&&this.previousStack.pop();0<this.nextStack.length&&(this.nextStack=[],this.onNextChange(null,0))}return!0},this)},activate:function(){var a=!1;if(this.map&&OpenLayers.Control.prototype.activate.apply(this)){null==this.listeners&&this.setListeners();for(var b in this.listeners)this.map.events.register(b,
this,this.listeners[b]);a=!0;0==this.previousStack.length&&this.initStack()}return a},initStack:function(){this.map.getCenter()&&this.listeners.moveend()},deactivate:function(){var a=!1;if(this.map&&OpenLayers.Control.prototype.deactivate.apply(this)){for(var b in this.listeners)this.map.events.unregister(b,this,this.listeners[b]);this.clearOnDeactivate&&this.clear();a=!0}return a},CLASS_NAME:"OpenLayers.Control.NavigationHistory"});
OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(a){a=a||{};this.params={};this.headers={};OpenLayers.Protocol.prototype.initialize.apply(this,arguments);if(!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var b=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=
function(a,d){return b.write(a,d)}}},destroy:function(){this.headers=this.params=null;OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments);a=a||{};a.params=OpenLayers.Util.applyDefaults(a.params,this.options.params);a=OpenLayers.Util.applyDefaults(a,this.options);a.filter&&this.filterToParams&&(a.params=this.filterToParams(a.filter,a.params));var b=void 0!==a.readWithPOST?a.readWithPOST:this.readWithPOST,c=new OpenLayers.Protocol.Response({requestType:"read"});
b?(b=a.headers||{},b["Content-Type"]="application/x-www-form-urlencoded",c.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,c,a),data:OpenLayers.Util.getParameterString(a.params),headers:b})):c.priv=OpenLayers.Request.GET({url:a.url,callback:this.createCallback(this.handleRead,c,a),params:a.params,headers:a.headers});return c},handleRead:function(a,b){this.handleResponse(a,b)},create:function(a,b){b=OpenLayers.Util.applyDefaults(b,this.options);var c=new OpenLayers.Protocol.Response({reqFeatures:a,
requestType:"create"});c.priv=OpenLayers.Request.POST({url:b.url,callback:this.createCallback(this.handleCreate,c,b),headers:b.headers,data:this.format.write(a)});return c},handleCreate:function(a,b){this.handleResponse(a,b)},update:function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var d=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"update"});d.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:c,callback:this.createCallback(this.handleUpdate,
d,b),headers:b.headers,data:this.format.write(a)});return d},handleUpdate:function(a,b){this.handleResponse(a,b)},"delete":function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var d=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"delete"}),e=this.deleteWithPOST?"POST":"DELETE",c={url:c,callback:this.createCallback(this.handleDelete,d,b),headers:b.headers};this.deleteWithPOST&&(c.data=this.format.write(a));d.priv=OpenLayers.Request[e](c);
return d},handleDelete:function(a,b){this.handleResponse(a,b)},handleResponse:function(a,b){var c=a.priv;b.callback&&(200<=c.status&&300>c.status?("delete"!=a.requestType&&(a.features=this.parseFeatures(c)),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,b.callback.call(b.scope,a))},parseFeatures:function(a){var b=a.responseXML;b&&b.documentElement||(b=a.responseText);return!b||0>=b.length?null:this.format.read(b)},commit:function(a,b){function c(a){for(var b=
a.features?a.features.length:0,c=Array(b),e=0;e<b;++e)c[e]=a.features[e].fid;r.insertIds=c;d.apply(this,[a])}function d(a){this.callUserCallback(a,b);q=q&&a.success();f++;f>=p&&b.callback&&(r.code=q?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,b.callback.apply(b.scope,[r]))}b=OpenLayers.Util.applyDefaults(b,this.options);var e=[],f=0,g={};g[OpenLayers.State.INSERT]=[];g[OpenLayers.State.UPDATE]=[];g[OpenLayers.State.DELETE]=[];for(var h,k,l=[],m=0,n=a.length;m<n;++m)if(h=
a[m],k=g[h.state])k.push(h),l.push(h);var p=(0<g[OpenLayers.State.INSERT].length?1:0)+g[OpenLayers.State.UPDATE].length+g[OpenLayers.State.DELETE].length,q=!0,r=new OpenLayers.Protocol.Response({reqFeatures:l});h=g[OpenLayers.State.INSERT];0<h.length&&e.push(this.create(h,OpenLayers.Util.applyDefaults({callback:c,scope:this},b.create)));h=g[OpenLayers.State.UPDATE];for(m=h.length-1;0<=m;--m)e.push(this.update(h[m],OpenLayers.Util.applyDefaults({callback:d,scope:this},b.update)));h=g[OpenLayers.State.DELETE];
for(m=h.length-1;0<=m;--m)e.push(this["delete"](h[m],OpenLayers.Util.applyDefaults({callback:d,scope:this},b["delete"])));return e},abort:function(a){a&&a.priv.abort()},callUserCallback:function(a,b){var c=b[a.requestType];c&&c.callback&&c.callback.call(c.scope,a)},CLASS_NAME:"OpenLayers.Protocol.HTTP"});
OpenLayers.Strategy.Cluster=OpenLayers.Class(OpenLayers.Strategy,{distance:20,threshold:null,features:null,clusters:null,clustering:!1,resolution:null,activate:function(){var a=OpenLayers.Strategy.prototype.activate.call(this);if(a)this.layer.events.on({beforefeaturesadded:this.cacheFeatures,moveend:this.cluster,scope:this});return a},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,moveend:this.cluster,
scope:this}));return a},cacheFeatures:function(a){var b=!0;this.clustering||(this.clearCache(),this.features=a.features,this.cluster(),b=!1);return b},clearCache:function(){this.features=null},cluster:function(a){if((!a||a.zoomChanged)&&this.features&&(a=this.layer.map.getResolution(),a!=this.resolution||!this.clustersExist())){this.resolution=a;a=[];for(var b,c,d,e=0;e<this.features.length;++e)if(b=this.features[e],b.geometry){c=!1;for(var f=a.length-1;0<=f;--f)if(d=a[f],this.shouldCluster(d,b)){this.addToCluster(d,
b);c=!0;break}c||a.push(this.createCluster(this.features[e]))}this.layer.removeAllFeatures();if(0<a.length){if(1<this.threshold)for(b=a.slice(),a=[],e=0,d=b.length;e<d;++e)c=b[e],c.attributes.count<this.threshold?Array.prototype.push.apply(a,c.cluster):a.push(c);this.clustering=!0;this.layer.addFeatures(a);this.clustering=!1}this.clusters=a}},clustersExist:function(){var a=!1;if(this.clusters&&0<this.clusters.length&&this.clusters.length==this.layer.features.length)for(var a=!0,b=0;b<this.clusters.length;++b)if(this.clusters[b]!=
this.layer.features[b]){a=!1;break}return a},shouldCluster:function(a,b){var c=a.geometry.getBounds().getCenterLonLat(),d=b.geometry.getBounds().getCenterLonLat();return Math.sqrt(Math.pow(c.lon-d.lon,2)+Math.pow(c.lat-d.lat,2))/this.resolution<=this.distance},addToCluster:function(a,b){a.cluster.push(b);a.attributes.count+=1},createCluster:function(a){var b=a.geometry.getBounds().getCenterLonLat(),b=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(b.lon,b.lat),{count:1});b.cluster=[a];
return b},CLASS_NAME:"OpenLayers.Strategy.Cluster"});
OpenLayers.Strategy.Filter=OpenLayers.Class(OpenLayers.Strategy,{filter:null,cache:null,caching:!1,activate:function(){var a=OpenLayers.Strategy.prototype.activate.apply(this,arguments);a&&(this.cache=[],this.layer.events.on({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this}));return a},deactivate:function(){this.cache=null;this.layer&&this.layer.events&&this.layer.events.un({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this});
return OpenLayers.Strategy.prototype.deactivate.apply(this,arguments)},handleAdd:function(a){if(!this.caching&&this.filter){var b=a.features;a.features=[];for(var c,d=0,e=b.length;d<e;++d)c=b[d],this.filter.evaluate(c)?a.features.push(c):this.cache.push(c)}},handleRemove:function(a){this.caching||(this.cache=[])},setFilter:function(a){this.filter=a;a=this.cache;this.cache=[];this.handleAdd({features:this.layer.features});0<this.cache.length&&(this.caching=!0,this.layer.removeFeatures(this.cache.slice()),
this.caching=!1);0<a.length&&(a={features:a},this.handleAdd(a),0<a.features.length&&(this.caching=!0,this.layer.addFeatures(a.features),this.caching=!1))},CLASS_NAME:"OpenLayers.Strategy.Filter"});OpenLayers.Protocol.SOS=function(a){a=OpenLayers.Util.applyDefaults(a,OpenLayers.Protocol.SOS.DEFAULTS);var b=OpenLayers.Protocol.SOS["v"+a.version.replace(/\./g,"_")];if(!b)throw"Unsupported SOS version: "+a.version;return new b(a)};OpenLayers.Protocol.SOS.DEFAULTS={version:"1.0.0"};
OpenLayers.Format.GeoRSS=OpenLayers.Class(OpenLayers.Format.XML,{rssns:"http://backend.userland.com/rss2",featureNS:"http://mapserver.gis.umn.edu/mapserver",georssns:"http://www.georss.org/georss",geons:"http://www.w3.org/2003/01/geo/wgs84_pos#",featureTitle:"Untitled",featureDescription:"No Description",gmlParser:null,xy:!1,createGeometryFromItem:function(a){var b=this.getElementsByTagNameNS(a,this.georssns,"point"),c=this.getElementsByTagNameNS(a,this.geons,"lat"),d=this.getElementsByTagNameNS(a,
this.geons,"long"),e=this.getElementsByTagNameNS(a,this.georssns,"line"),f=this.getElementsByTagNameNS(a,this.georssns,"polygon"),g=this.getElementsByTagNameNS(a,this.georssns,"where");a=this.getElementsByTagNameNS(a,this.georssns,"box");if(0<b.length||0<c.length&&0<d.length){0<b.length?(c=OpenLayers.String.trim(b[0].firstChild.nodeValue).split(/\s+/),2!=c.length&&(c=OpenLayers.String.trim(b[0].firstChild.nodeValue).split(/\s*,\s*/))):c=[parseFloat(c[0].firstChild.nodeValue),parseFloat(d[0].firstChild.nodeValue)];
var h=new OpenLayers.Geometry.Point(c[1],c[0])}else if(0<e.length){c=OpenLayers.String.trim(this.getChildValue(e[0])).split(/\s+/);d=[];e=0;for(f=c.length;e<f;e+=2)b=new OpenLayers.Geometry.Point(c[e+1],c[e]),d.push(b);h=new OpenLayers.Geometry.LineString(d)}else if(0<f.length){c=OpenLayers.String.trim(this.getChildValue(f[0])).split(/\s+/);d=[];e=0;for(f=c.length;e<f;e+=2)b=new OpenLayers.Geometry.Point(c[e+1],c[e]),d.push(b);h=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(d)])}else 0<
g.length?(this.gmlParser||(this.gmlParser=new OpenLayers.Format.GML({xy:this.xy})),h=this.gmlParser.parseFeature(g[0]).geometry):0<a.length&&(c=OpenLayers.String.trim(a[0].firstChild.nodeValue).split(/\s+/),d=[],3<c.length&&(b=new OpenLayers.Geometry.Point(c[1],c[0]),d.push(b),b=new OpenLayers.Geometry.Point(c[1],c[2]),d.push(b),b=new OpenLayers.Geometry.Point(c[3],c[2]),d.push(b),b=new OpenLayers.Geometry.Point(c[3],c[0]),d.push(b),b=new OpenLayers.Geometry.Point(c[1],c[0]),d.push(b)),h=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(d)]));
h&&this.internalProjection&&this.externalProjection&&h.transform(this.externalProjection,this.internalProjection);return h},createFeatureFromItem:function(a){var b=this.createGeometryFromItem(a),c=this._getChildValue(a,"*","title",this.featureTitle),d=this._getChildValue(a,"*","description",this._getChildValue(a,"*","content",this._getChildValue(a,"*","summary",this.featureDescription))),e=this._getChildValue(a,"*","link");if(!e)try{e=this.getElementsByTagNameNS(a,"*","link")[0].getAttribute("href")}catch(f){e=
null}a=this._getChildValue(a,"*","id",null);b=new OpenLayers.Feature.Vector(b,{title:c,description:d,link:e});b.fid=a;return b},_getChildValue:function(a,b,c,d){return(a=this.getElementsByTagNameNS(a,b,c))&&a[0]&&a[0].firstChild&&a[0].firstChild.nodeValue?this.getChildValue(a[0]):void 0==d?"":d},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));var b=null,b=this.getElementsByTagNameNS(a,"*","item");0==b.length&&(b=this.getElementsByTagNameNS(a,"*","entry"));
a=b.length;for(var c=Array(a),d=0;d<a;d++)c[d]=this.createFeatureFromItem(b[d]);return c},write:function(a){var b;if(OpenLayers.Util.isArray(a)){b=this.createElementNS(this.rssns,"rss");for(var c=0,d=a.length;c<d;c++)b.appendChild(this.createFeatureXML(a[c]))}else b=this.createFeatureXML(a);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.rssns,"item"),d=this.createElementNS(this.rssns,"title");
d.appendChild(this.createTextNode(a.attributes.title?a.attributes.title:""));var e=this.createElementNS(this.rssns,"description");e.appendChild(this.createTextNode(a.attributes.description?a.attributes.description:""));c.appendChild(d);c.appendChild(e);a.attributes.link&&(d=this.createElementNS(this.rssns,"link"),d.appendChild(this.createTextNode(a.attributes.link)),c.appendChild(d));for(var f in a.attributes)"link"!=f&&"title"!=f&&"description"!=f&&(d=this.createTextNode(a.attributes[f]),e=f,-1!=
f.search(":")&&(e=f.split(":")[1]),e=this.createElementNS(this.featureNS,"feature:"+e),e.appendChild(d),c.appendChild(e));c.appendChild(b);return c},buildGeometryNode:function(a){this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var b;if("OpenLayers.Geometry.Polygon"==a.CLASS_NAME)b=this.createElementNS(this.georssns,"georss:polygon"),b.appendChild(this.buildCoordinatesNode(a.components[0]));else if("OpenLayers.Geometry.LineString"==
a.CLASS_NAME)b=this.createElementNS(this.georssns,"georss:line"),b.appendChild(this.buildCoordinatesNode(a));else if("OpenLayers.Geometry.Point"==a.CLASS_NAME)b=this.createElementNS(this.georssns,"georss:point"),b.appendChild(this.buildCoordinatesNode(a));else throw"Couldn't parse "+a.CLASS_NAME;return b},buildCoordinatesNode:function(a){var b=null;a.components&&(b=a.components);if(b){a=b.length;for(var c=Array(a),d=0;d<a;d++)c[d]=b[d].y+" "+b[d].x;b=c.join(" ")}else b=a.y+" "+a.x;return this.createTextNode(b)},
CLASS_NAME:"OpenLayers.Format.GeoRSS"});OpenLayers.Format.WPSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.WPSCapabilities"});
OpenLayers.Format.WPSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wps:"http://www.opengis.net/wps/1.0.0",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));a&&9==a.nodeType&&(a=a.documentElement);
var b={};this.readNode(a,b);return b},readers:{wps:{Capabilities:function(a,b){this.readChildNodes(a,b)},ProcessOfferings:function(a,b){b.processOfferings={};this.readChildNodes(a,b.processOfferings)},Process:function(a,b){var c={processVersion:this.getAttributeNS(a,this.namespaces.wps,"processVersion")};this.readChildNodes(a,c);b[c.identifier]=c},Languages:function(a,b){b.languages=[];this.readChildNodes(a,b.languages)},Default:function(a,b){var c={isDefault:!0};this.readChildNodes(a,c);b.push(c)},
Supported:function(a,b){var c={};this.readChildNodes(a,c);b.push(c)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSCapabilities.v1_0_0"});
OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(a){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=null;this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom);OpenLayers.Control.prototype.destroy.apply(this,
arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0):!1},draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick},b=OpenLayers.Util.extend({"double":!0,stopDouble:!0,
pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.dragPan.draw();this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&2==a.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(a){a=this.map.getLonLatFromViewPortPx(a.xy);
this.map.setCenter(a,this.map.zoom+1)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"});
OpenLayers.Style2=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,initialize:function(a){OpenLayers.Util.extend(this,a);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;a<b;a++)this.rules[a].destroy();delete this.rules},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;b<c;++b)a.rules.push(this.rules[b].clone())}return new OpenLayers.Style2(a)},
CLASS_NAME:"OpenLayers.Style2"});
OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{drawMarker:function(a){var b=this.map.getLayerPxFromLonLat({lon:a.bounds.left,lat:a.bounds.top}),c=this.map.getLayerPxFromLonLat({lon:a.bounds.right,lat:a.bounds.bottom});null==c||null==b?a.display(!1):(b=a.draw(b,{w:Math.max(1,c.x-b.x),h:Math.max(1,c.y-b.y)}),a.drawn||(this.div.appendChild(b),a.drawn=!0))},removeMarker:function(a){OpenLayers.Util.removeItem(this.markers,a);null!=a.div&&a.div.parentNode==this.div&&this.div.removeChild(a.div)},
CLASS_NAME:"OpenLayers.Layer.Boxes"});
OpenLayers.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{readers:{wfs:OpenLayers.Util.applyDefaults({Service:function(a,b){b.service={};this.readChildNodes(a,b.service)},Fees:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.fees=c)},AccessConstraints:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.accessConstraints=c)},OnlineResource:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.onlineResource=
c)},Keywords:function(a,b){var c=this.getChildValue(a);c&&"none"!=c.toLowerCase()&&(b.keywords=c.split(", "))},Capability:function(a,b){b.capability={};this.readChildNodes(a,b.capability)},Request:function(a,b){b.request={};this.readChildNodes(a,b.request)},GetFeature:function(a,b){b.getfeature={href:{},formats:[]};this.readChildNodes(a,b.getfeature)},ResultFormat:function(a,b){for(var c=a.childNodes,d,e=0;e<c.length;e++)d=c[e],1==d.nodeType&&b.formats.push(d.nodeName)},DCPType:function(a,b){this.readChildNodes(a,
b)},HTTP:function(a,b){this.readChildNodes(a,b.href)},Get:function(a,b){b.get=a.getAttribute("onlineResource")},Post:function(a,b){b.post=a.getAttribute("onlineResource")},SRS:function(a,b){var c=this.getChildValue(a);c&&(b.srs=c)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_0_0"});
OpenLayers.Layer.PointGrid=OpenLayers.Class(OpenLayers.Layer.Vector,{dx:null,dy:null,ratio:1.5,maxFeatures:250,rotation:0,origin:null,gridBounds:null,initialize:function(a){a=a||{};OpenLayers.Layer.Vector.prototype.initialize.apply(this,[a.name,a])},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments);a.events.register("moveend",this,this.onMoveEnd)},removeMap:function(a){a.events.unregister("moveend",this,this.onMoveEnd);OpenLayers.Layer.Vector.prototype.removeMap.apply(this,
arguments)},setRatio:function(a){this.ratio=a;this.updateGrid(!0)},setMaxFeatures:function(a){this.maxFeatures=a;this.updateGrid(!0)},setSpacing:function(a,b){this.dx=a;this.dy=b||a;this.updateGrid(!0)},setOrigin:function(a){this.origin=a;this.updateGrid(!0)},getOrigin:function(){this.origin||(this.origin=this.map.getExtent().getCenterLonLat());return this.origin},setRotation:function(a){this.rotation=a;this.updateGrid(!0)},onMoveEnd:function(){this.updateGrid()},getViewBounds:function(){var a=this.map.getExtent();
if(this.rotation){var b=this.getOrigin(),b=new OpenLayers.Geometry.Point(b.lon,b.lat),a=a.toGeometry();a.rotate(-this.rotation,b);a=a.getBounds()}return a},updateGrid:function(a){if(a||this.invalidBounds()){var b=this.getViewBounds(),c=this.getOrigin();a=new OpenLayers.Geometry.Point(c.lon,c.lat);var d=b.getWidth(),e=b.getHeight(),f=d/e,g=Math.sqrt(this.dx*this.dy*this.maxFeatures/f),d=Math.min(d*this.ratio,g*f),e=Math.min(e*this.ratio,g),b=b.getCenterLonLat();this.gridBounds=new OpenLayers.Bounds(b.lon-
d/2,b.lat-e/2,b.lon+d/2,b.lat+e/2);for(var b=Math.floor(e/this.dy),d=Math.floor(d/this.dx),e=c.lon+this.dx*Math.ceil((this.gridBounds.left-c.lon)/this.dx),c=c.lat+this.dy*Math.ceil((this.gridBounds.bottom-c.lat)/this.dy),g=Array(b*d),h,k=0;k<d;++k)for(var f=e+k*this.dx,l=0;l<b;++l)h=c+l*this.dy,h=new OpenLayers.Geometry.Point(f,h),this.rotation&&h.rotate(this.rotation,a),g[k*b+l]=new OpenLayers.Feature.Vector(h);this.destroyFeatures(this.features,{silent:!0});this.addFeatures(g,{silent:!0})}},invalidBounds:function(){return!this.gridBounds||
!this.gridBounds.containsBounds(this.getViewBounds())},CLASS_NAME:"OpenLayers.Layer.PointGrid"});
OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(a,b,c,d){this.initializeZoomify(c);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,c,{},d])},initializeZoomify:function(a){a=a.clone();var b=new OpenLayers.Size(Math.ceil(a.w/this.standardTileSize),Math.ceil(a.h/this.standardTileSize));this.tierSizeInTiles=[b];
for(this.tierImageSize=[a];a.w>this.standardTileSize||a.h>this.standardTileSize;)a=new OpenLayers.Size(Math.floor(a.w/2),Math.floor(a.h/2)),b=new OpenLayers.Size(Math.ceil(a.w/this.standardTileSize),Math.ceil(a.h/this.standardTileSize)),this.tierSizeInTiles.push(b),this.tierImageSize.push(a);this.tierSizeInTiles.reverse();this.tierImageSize.reverse();this.numberOfTiers=this.tierSizeInTiles.length;this.tileCountUpToTier=[0];for(a=1;a<this.numberOfTiers;a++)this.tileCountUpToTier.push(this.tierSizeInTiles[a-
1].w*this.tierSizeInTiles[a-1].h+this.tileCountUpToTier[a-1])},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments);this.tileCountUpToTier.length=0;this.tierSizeInTiles.length=0;this.tierImageSize.length=0},clone:function(a){null==a&&(a=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round((a.left-this.tileOrigin.lon)/
(b*this.tileSize.w));a=Math.round((this.tileOrigin.lat-a.top)/(b*this.tileSize.h));b=this.map.getZoom();c="TileGroup"+Math.floor((c+a*this.tierSizeInTiles[b].w+this.tileCountUpToTier[b])/256)+"/"+b+"-"+c+"-"+a+".jpg";a=this.url;OpenLayers.Util.isArray(a)&&(a=this.selectUrl(c,a));return a+c},getImageSize:function(){if(0<arguments.length){var a=this.adjustBounds(arguments[0]),b=this.map.getResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w)),a=Math.round((this.tileOrigin.lat-
a.top)/(b*this.tileSize.h)),b=this.map.getZoom(),d=this.standardTileSize,e=this.standardTileSize;c==this.tierSizeInTiles[b].w-1&&(d=this.tierImageSize[b].w%this.standardTileSize);a==this.tierSizeInTiles[b].h-1&&(e=this.tierImageSize[b].h%this.standardTileSize);return new OpenLayers.Size(d,e)}return this.tileSize},setMap:function(a){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},calculateGridLayout:function(a,
b,c){var d=c*this.tileSize.w;c*=this.tileSize.h;var e=a.left-b.lon,f=Math.floor(e/d)-this.buffer;a=b.lat-a.top+c;var g=Math.floor(a/c)-this.buffer;return{tilelon:d,tilelat:c,tileoffsetlon:b.lon+f*d,tileoffsetlat:b.lat-c*g,tileoffsetx:-(e/d-f)*this.tileSize.w,tileoffsety:(g-a/c)*this.tileSize.h}},CLASS_NAME:"OpenLayers.Layer.Zoomify"});
OpenLayers.Layer.WMTS=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,version:"1.0.0",requestEncoding:"KVP",url:null,layer:null,matrixSet:null,style:null,format:"image/jpeg",tileOrigin:null,tileFullExtent:null,formatSuffix:null,matrixIds:null,dimensions:null,params:null,zoomOffset:0,serverResolutions:null,formatSuffixMap:{"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"},matrix:null,initialize:function(a){var b=
{url:!0,layer:!0,style:!0,matrixSet:!0},c;for(c in b)if(!(c in a))throw Error("Missing property '"+c+"' in layer configuration.");a.params=OpenLayers.Util.upperCaseObject(a.params);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a.name,a.url,a.params,a]);this.formatSuffix||(this.formatSuffix=this.formatSuffixMap[this.format]||this.format.split("/").pop());if(this.matrixIds&&(a=this.matrixIds.length)&&"string"===typeof this.matrixIds[0])for(b=this.matrixIds,this.matrixIds=Array(a),c=0;c<a;++c)this.matrixIds[c]=
{identifier:b[c]}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);this.updateMatrixProperties()},updateMatrixProperties:function(){if(this.matrix=this.getMatrix())this.matrix.topLeftCorner&&(this.tileOrigin=this.matrix.topLeftCorner),this.matrix.tileWidth&&this.matrix.tileHeight&&(this.tileSize=new OpenLayers.Size(this.matrix.tileWidth,this.matrix.tileHeight)),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.top)),this.tileFullExtent||
(this.tileFullExtent=this.maxExtent)},moveTo:function(a,b,c){!b&&this.matrix||this.updateMatrixProperties();return OpenLayers.Layer.Grid.prototype.moveTo.apply(this,arguments)},clone:function(a){null==a&&(a=new OpenLayers.Layer.WMTS(this.options));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getIdentifier:function(){return this.getServerZoom()},getMatrix:function(){var a;if(this.matrixIds&&0!==this.matrixIds.length)if("scaleDenominator"in this.matrixIds[0])for(var b=OpenLayers.METERS_PER_INCH*
OpenLayers.INCHES_PER_UNIT[this.units]*this.getServerResolution()/2.8E-4,c=Number.POSITIVE_INFINITY,d,e=0,f=this.matrixIds.length;e<f;++e)d=Math.abs(1-this.matrixIds[e].scaleDenominator/b),d<c&&(c=d,a=this.matrixIds[e]);else a=this.matrixIds[this.getIdentifier()];else a={identifier:this.getIdentifier()};return a},getTileInfo:function(a){var b=this.getServerResolution(),c=(a.lon-this.tileOrigin.lon)/(b*this.tileSize.w);a=(this.tileOrigin.lat-a.lat)/(b*this.tileSize.h);var b=Math.floor(c),d=Math.floor(a);
return{col:b,row:d,i:Math.floor((c-b)*this.tileSize.w),j:Math.floor((a-d)*this.tileSize.h)}},getURL:function(a){a=this.adjustBounds(a);var b="";if(!this.tileFullExtent||this.tileFullExtent.intersectsBounds(a)){a=a.getCenterLonLat();var c=this.getTileInfo(a);a=this.dimensions;if("REST"===this.requestEncoding.toUpperCase())if(b=this.params,"string"===typeof this.url&&-1!==this.url.indexOf("{")){var d=this.url.replace(/\{/g,"${"),c={style:this.style,Style:this.style,TileMatrixSet:this.matrixSet,TileMatrix:this.matrix.identifier,
TileRow:c.row,TileCol:c.col};if(a){var e,f;for(f=a.length-1;0<=f;--f)e=a[f],c[e]=b[e.toUpperCase()]}b=OpenLayers.String.format(d,c)}else{d=this.version+"/"+this.layer+"/"+this.style+"/";if(a)for(f=0;f<a.length;f++)b[a[f]]&&(d=d+b[a[f]]+"/");d=d+this.matrixSet+"/"+this.matrix.identifier+"/"+c.row+"/"+c.col+"."+this.formatSuffix;b=OpenLayers.Util.isArray(this.url)?this.selectUrl(d,this.url):this.url;b.match(/\/$/)||(b+="/");b+=d}else"KVP"===this.requestEncoding.toUpperCase()&&(b={SERVICE:"WMTS",REQUEST:"GetTile",
VERSION:this.version,LAYER:this.layer,STYLE:this.style,TILEMATRIXSET:this.matrixSet,TILEMATRIX:this.matrix.identifier,TILEROW:c.row,TILECOL:c.col,FORMAT:this.format},b=OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,[b]))}return b},mergeNewParams:function(a){if("KVP"===this.requestEncoding.toUpperCase())return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,[OpenLayers.Util.upperCaseObject(a)])},CLASS_NAME:"OpenLayers.Layer.WMTS"});
OpenLayers.Layer.MapServer=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{mode:"map",map_imagetype:"png"},initialize:function(a,b,c,d){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments);this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS);if(null==d||null==d.isBaseLayer)this.isBaseLayer="true"!=this.params.transparent&&!0!=this.params.transparent},clone:function(a){null==a&&(a=new OpenLayers.Layer.MapServer(this.name,this.url,this.params,this.getOptions()));
return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);a=[a.left,a.bottom,a.right,a.top];var b=this.getImageSize();return this.getFullRequestString({mapext:a,imgext:a,map_size:[b.w,b.h],imgx:b.w/2,imgy:b.h/2,imgxy:[b.w,b.h]})},getFullRequestString:function(a,b){var c=null==b?this.url:b,d=OpenLayers.Util.extend({},this.params),d=OpenLayers.Util.extend(d,a),e=OpenLayers.Util.getParameterString(d);OpenLayers.Util.isArray(c)&&(c=this.selectUrl(e,c));
var e=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c)),f;for(f in d)f.toUpperCase()in e&&delete d[f];e=OpenLayers.Util.getParameterString(d);d=c;e=e.replace(/,/g,"+");""!=e&&(f=c.charAt(c.length-1),d="&"==f||"?"==f?d+e:-1==c.indexOf("?")?d+("?"+e):d+("&"+e));return d},CLASS_NAME:"OpenLayers.Layer.MapServer"});
OpenLayers.Renderer.VML=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"urn:schemas-microsoft-com:vml",symbolCache:{},offset:null,initialize:function(a){if(this.supported()){if(!document.namespaces.olv){document.namespaces.add("olv",this.xmlns);for(var b=document.createStyleSheet(),c="shape rect oval fill stroke imagedata group textbox".split(" "),d=0,e=c.length;d<e;d++)b.addRule("olv\\:"+c[d],"behavior: url(#default#VML); position: absolute; display: inline-block;")}OpenLayers.Renderer.Elements.prototype.initialize.apply(this,
arguments)}},supported:function(){return!!document.namespaces},setExtent:function(a,b){var c=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),d=this.getResolution(),e=a.left/d|0,d=a.top/d-this.size.h|0;b||!this.offset?(this.offset={x:e,y:d},d=e=0):(e-=this.offset.x,d-=this.offset.y);this.root.coordorigin=e-this.xOffset+" "+d;for(var e=[this.root,this.vectorRoot,this.textRoot],f=0,g=e.length;f<g;++f)d=e[f],d.coordsize=this.size.w+" "+this.size.h;this.root.style.flip="y";return c},
setSize:function(a){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);for(var b=[this.rendererRoot,this.root,this.vectorRoot,this.textRoot],c=this.size.w+"px",d=this.size.h+"px",e,f=0,g=b.length;f<g;++f)e=b[f],e.style.width=c,e.style.height=d},getNodeType:function(a,b){var c=null;switch(a.CLASS_NAME){case "OpenLayers.Geometry.Point":c=b.externalGraphic?"olv:rect":this.isComplexSymbol(b.graphicName)?"olv:shape":"olv:oval";break;case "OpenLayers.Geometry.Rectangle":c="olv:rect";break;case "OpenLayers.Geometry.LineString":case "OpenLayers.Geometry.LinearRing":case "OpenLayers.Geometry.Polygon":case "OpenLayers.Geometry.Curve":c=
"olv:shape"}return c},setStyle:function(a,b,c,d){b=b||a._style;c=c||a._options;var e=b.fillColor,f=b.title||b.graphicTitle;f&&(a.title=f);if("OpenLayers.Geometry.Point"===a._geometryClass)if(b.externalGraphic){c.isFilled=!0;var e=b.graphicWidth||b.graphicHeight,f=b.graphicHeight||b.graphicWidth,e=e?e:2*b.pointRadius,f=f?f:2*b.pointRadius,g=this.getResolution(),h=void 0!=b.graphicXOffset?b.graphicXOffset:-(0.5*e),k=void 0!=b.graphicYOffset?b.graphicYOffset:-(0.5*f);a.style.left=((d.x-this.featureDx)/
g-this.offset.x+h|0)+"px";a.style.top=(d.y/g-this.offset.y-(k+f)|0)+"px";a.style.width=e+"px";a.style.height=f+"px";a.style.flip="y";e="none";c.isStroked=!1}else this.isComplexSymbol(b.graphicName)?(f=this.importSymbol(b.graphicName),a.path=f.path,a.coordorigin=f.left+","+f.bottom,f=f.size,a.coordsize=f+","+f,this.drawCircle(a,d,b.pointRadius),a.style.flip="y"):this.drawCircle(a,d,b.pointRadius);c.isFilled?a.fillcolor=e:a.filled="false";d=a.getElementsByTagName("fill");d=0==d.length?null:d[0];c.isFilled?
(d||(d=this.createNode("olv:fill",a.id+"_fill")),d.opacity=b.fillOpacity,"OpenLayers.Geometry.Point"===a._geometryClass&&b.externalGraphic&&(b.graphicOpacity&&(d.opacity=b.graphicOpacity),d.src=b.externalGraphic,d.type="frame",b.graphicWidth&&b.graphicHeight||(d.aspect="atmost")),d.parentNode!=a&&a.appendChild(d)):d&&a.removeChild(d);e=b.rotation;if(void 0!==e||void 0!==a._rotation)a._rotation=e,b.externalGraphic?(this.graphicRotate(a,h,k,b),d.opacity=0):"OpenLayers.Geometry.Point"===a._geometryClass&&
(a.style.rotation=e||0);h=a.getElementsByTagName("stroke");h=0==h.length?null:h[0];c.isStroked?(h||(h=this.createNode("olv:stroke",a.id+"_stroke"),a.appendChild(h)),h.on=!0,h.color=b.strokeColor,h.weight=b.strokeWidth+"px",h.opacity=b.strokeOpacity,h.endcap="butt"==b.strokeLinecap?"flat":b.strokeLinecap||"round",b.strokeDashstyle&&(h.dashstyle=this.dashStyle(b))):(a.stroked=!1,h&&(h.on=!1));"inherit"!=b.cursor&&null!=b.cursor&&(a.style.cursor=b.cursor);return a},graphicRotate:function(a,b,c,d){d=
d||a._style;var e=d.rotation||0,f,g;if(d.graphicWidth&&d.graphicHeight){g=Math.max(d.graphicWidth,d.graphicHeight);f=d.graphicWidth/d.graphicHeight;var h=Math.round(d.graphicWidth||g*f),k=Math.round(d.graphicHeight||g);a.style.width=h+"px";a.style.height=k+"px";var l=document.getElementById(a.id+"_image");l||(l=this.createNode("olv:imagedata",a.id+"_image"),a.appendChild(l));l.style.width=h+"px";l.style.height=k+"px";l.src=d.externalGraphic;l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')";
l=e*Math.PI/180;e=Math.sin(l);l=Math.cos(l);e="progid:DXImageTransform.Microsoft.Matrix(M11="+l+",M12="+-e+",M21="+e+",M22="+l+",SizingMethod='auto expand')\n";(l=d.graphicOpacity||d.fillOpacity)&&1!=l&&(e+="progid:DXImageTransform.Microsoft.BasicImage(opacity="+l+")\n");a.style.filter=e;e=new OpenLayers.Geometry.Point(-b,-c);h=(new OpenLayers.Bounds(0,0,h,k)).toGeometry();h.rotate(d.rotation,e);h=h.getBounds();a.style.left=Math.round(parseInt(a.style.left)+h.left)+"px";a.style.top=Math.round(parseInt(a.style.top)-
h.bottom)+"px"}else{var m=new Image;m.onreadystatechange=OpenLayers.Function.bind(function(){if("complete"==m.readyState||"interactive"==m.readyState)f=m.width/m.height,g=Math.max(2*d.pointRadius,d.graphicWidth||0,d.graphicHeight||0),b*=f,d.graphicWidth=g*f,d.graphicHeight=g,this.graphicRotate(a,b,c,d)},this);m.src=d.externalGraphic}},postDraw:function(a){a.style.visibility="visible";var b=a._style.fillColor,c=a._style.strokeColor;"none"==b&&a.fillcolor!=b&&(a.fillcolor=b);"none"==c&&a.strokecolor!=
c&&(a.strokecolor=c)},setNodeDimension:function(a,b){var c=b.getBounds();if(c){var d=this.getResolution(),c=new OpenLayers.Bounds((c.left-this.featureDx)/d-this.offset.x|0,c.bottom/d-this.offset.y|0,(c.right-this.featureDx)/d-this.offset.x|0,c.top/d-this.offset.y|0);a.style.left=c.left+"px";a.style.top=c.top+"px";a.style.width=c.getWidth()+"px";a.style.height=c.getHeight()+"px";a.coordorigin=c.left+" "+c.top;a.coordsize=c.getWidth()+" "+c.getHeight()}},dashStyle:function(a){a=a.strokeDashstyle;switch(a){case "solid":case "dot":case "dash":case "dashdot":case "longdash":case "longdashdot":return a;
default:return a=a.split(/[ ,]/),2==a.length?1*a[0]>=2*a[1]?"longdash":1==a[0]||1==a[1]?"dot":"dash":4==a.length?1*a[0]>=2*a[1]?"longdashdot":"dashdot":"solid"}},createNode:function(a,b){var c=document.createElement(a);b&&(c.id=b);c.unselectable="on";c.onselectstart=OpenLayers.Function.False;return c},nodeTypeCompare:function(a,b){var c=b,d=c.indexOf(":");-1!=d&&(c=c.substr(d+1));var e=a.nodeName,d=e.indexOf(":");-1!=d&&(e=e.substr(d+1));return c==e},createRenderRoot:function(){return this.nodeFactory(this.container.id+
"_vmlRoot","div")},createRoot:function(a){return this.nodeFactory(this.container.id+a,"olv:group")},drawPoint:function(a,b){return this.drawCircle(a,b,1)},drawCircle:function(a,b,c){if(!isNaN(b.x)&&!isNaN(b.y)){var d=this.getResolution();a.style.left=((b.x-this.featureDx)/d-this.offset.x|0)-c+"px";a.style.top=(b.y/d-this.offset.y|0)-c+"px";b=2*c;a.style.width=b+"px";a.style.height=b+"px";return a}return!1},drawLineString:function(a,b){return this.drawLine(a,b,!1)},drawLinearRing:function(a,b){return this.drawLine(a,
b,!0)},drawLine:function(a,b,c){this.setNodeDimension(a,b);for(var d=this.getResolution(),e=b.components.length,f=Array(e),g,h,k=0;k<e;k++)g=b.components[k],h=(g.x-this.featureDx)/d-this.offset.x|0,g=g.y/d-this.offset.y|0,f[k]=" "+h+","+g+" l ";b=c?" x e":" e";a.path="m"+f.join("")+b;return a},drawPolygon:function(a,b){this.setNodeDimension(a,b);var c=this.getResolution(),d=[],e,f,g,h,k,l,m,n,p,q;e=0;for(f=b.components.length;e<f;e++){d.push("m");g=b.components[e].components;h=0===e;l=k=null;m=0;
for(n=g.length;m<n;m++)p=g[m],q=(p.x-this.featureDx)/c-this.offset.x|0,p=p.y/c-this.offset.y|0,q=" "+q+","+p,d.push(q),0==m&&d.push(" l"),h||(k?k!=q&&(l?l!=q&&(h=!0):l=q):k=q);d.push(h?" x ":" ")}d.push("e");a.path=d.join("");return a},drawRectangle:function(a,b){var c=this.getResolution();a.style.left=((b.x-this.featureDx)/c-this.offset.x|0)+"px";a.style.top=(b.y/c-this.offset.y|0)+"px";a.style.width=(b.width/c|0)+"px";a.style.height=(b.height/c|0)+"px";return a},drawText:function(a,b,c){var d=this.nodeFactory(a+
this.LABEL_ID_SUFFIX,"olv:rect"),e=this.nodeFactory(a+this.LABEL_ID_SUFFIX+"_textbox","olv:textbox"),f=this.getResolution();d.style.left=((c.x-this.featureDx)/f-this.offset.x|0)+"px";d.style.top=(c.y/f-this.offset.y|0)+"px";d.style.flip="y";e.innerText=b.label;"inherit"!=b.cursor&&null!=b.cursor&&(e.style.cursor=b.cursor);b.fontColor&&(e.style.color=b.fontColor);b.fontOpacity&&(e.style.filter="alpha(opacity="+100*b.fontOpacity+")");b.fontFamily&&(e.style.fontFamily=b.fontFamily);b.fontSize&&(e.style.fontSize=
b.fontSize);b.fontWeight&&(e.style.fontWeight=b.fontWeight);b.fontStyle&&(e.style.fontStyle=b.fontStyle);!0===b.labelSelect&&(d._featureId=a,e._featureId=a,e._geometry=c,e._geometryClass=c.CLASS_NAME);e.style.whiteSpace="nowrap";e.inset="1px,0px,0px,0px";d.parentNode||(d.appendChild(e),this.textRoot.appendChild(d));b=b.labelAlign||"cm";1==b.length&&(b+="m");a=e.clientWidth*OpenLayers.Renderer.VML.LABEL_SHIFT[b.substr(0,1)];e=e.clientHeight*OpenLayers.Renderer.VML.LABEL_SHIFT[b.substr(1,1)];d.style.left=
parseInt(d.style.left)-a-1+"px";d.style.top=parseInt(d.style.top)+e+"px"},moveRoot:function(a){var b=this.map.getLayer(a.container.id);b instanceof OpenLayers.Layer.Vector.RootContainer&&(b=this.map.getLayer(this.container.id));b&&b.renderer.clear();OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this,arguments);b&&b.redraw()},importSymbol:function(a){var b=this.container.id+"-"+a,c=this.symbolCache[b];if(c)return c;c=OpenLayers.Renderer.symbol[a];if(!c)throw Error(a+" is not a valid symbol name");
a=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0);for(var d=["m"],e=0;e<c.length;e+=2){var f=c[e],g=c[e+1];a.left=Math.min(a.left,f);a.bottom=Math.min(a.bottom,g);a.right=Math.max(a.right,f);a.top=Math.max(a.top,g);d.push(f);d.push(g);0==e&&d.push("l")}d.push("x e");c=d.join(" ");d=(a.getWidth()-a.getHeight())/2;0<d?(a.bottom-=d,a.top+=d):(a.left+=d,a.right-=d);c={path:c,size:a.getWidth(),left:a.left,bottom:a.bottom};return this.symbolCache[b]=c},CLASS_NAME:"OpenLayers.Renderer.VML"});
OpenLayers.Renderer.VML.LABEL_SHIFT={l:0,c:0.5,r:1,t:0,m:0.5,b:1};
OpenLayers.Control.CacheRead=OpenLayers.Class(OpenLayers.Control,{fetchEvent:"tileloadstart",layers:null,autoActivate:!0,setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);var b,c=this.layers||a.layers;for(b=c.length-1;0<=b;--b)this.addLayer({layer:c[b]});if(!this.layers)a.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(a){a.layer.events.register(this.fetchEvent,this,this.fetch)},removeLayer:function(a){a.layer.events.unregister(this.fetchEvent,
this,this.fetch)},fetch:function(a){if(this.active&&window.localStorage&&a.tile instanceof OpenLayers.Tile.Image){var b=a.tile,c=b.url;!b.layer.crossOriginKeyword&&OpenLayers.ProxyHost&&0===c.indexOf(OpenLayers.ProxyHost)&&(c=OpenLayers.Control.CacheWrite.urlMap[c]);if(c=window.localStorage.getItem("olCache_"+c))b.url=c,"tileerror"===a.type&&b.setImgSrc(c)}},destroy:function(){if(this.layers||this.map){var a,b=this.layers||this.map.layers;for(a=b.length-1;0<=a;--a)this.removeLayer({layer:b[a]})}this.map&&
this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this});OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheRead"});OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"});
OpenLayers.Control.WMTSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,requestEncoding:"KVP",drillDown:!1,maxFeatures:10,clickCallback:"click",layers:null,queryVisible:!0,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,pending:0,initialize:function(a){a=a||{};a.handlerOptions=a.handlerOptions||{};OpenLayers.Control.prototype.initialize.apply(this,[a]);this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(a.formatOptions));
!0===this.drillDown&&(this.hover=!1);this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(a={},a[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,a,this.handlerOptions.click||{}))},getInfoForClick:function(a){this.request(a.xy,{})},getInfoForHover:function(a){this.request(a.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(--this.pending,
0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var a=this.layers||this.map.layers,b=[],c,d=a.length-1;0<=d&&(c=a[d],!(c instanceof OpenLayers.Layer.WMTS&&c.requestEncoding===this.requestEncoding)||this.queryVisible&&!c.getVisibility()||(b.push(c),this.drillDown&&!this.hover));--d);return b},buildRequestOptions:function(a,b){var c=this.map.getLonLatFromPixel(b),d=a.getURL(new OpenLayers.Bounds(c.lon,
c.lat,c.lon,c.lat)),d=OpenLayers.Util.getParameters(d),c=a.getTileInfo(c);OpenLayers.Util.extend(d,{service:"WMTS",version:a.version,request:"GetFeatureInfo",infoFormat:this.infoFormat,i:c.i,j:c.j});OpenLayers.Util.applyDefaults(d,this.vendorParams);return{url:OpenLayers.Util.isArray(a.url)?a.url[0]:a.url,params:OpenLayers.Util.upperCaseObject(d),callback:function(c){this.handleResponse(b,c,a)},scope:this}},request:function(a,b){b=b||{};var c=this.findLayers();if(0<c.length){for(var d,e,f=0,g=c.length;f<
g;f++)e=c[f],d=this.events.triggerEvent("beforegetfeatureinfo",{xy:a,layer:e}),!1!==d&&(++this.pending,d=this.buildRequestOptions(e,a),d=OpenLayers.Request.GET(d),!0===b.hover&&(this.hoverRequest=d));0<this.pending&&OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait")}},handleResponse:function(a,b,c){--this.pending;0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0);if(b.status&&(200>b.status||300<=b.status))this.events.triggerEvent("exception",
{xy:a,request:b,layer:c});else{var d=b.responseXML;d&&d.documentElement||(d=b.responseText);var e,f;try{e=this.format.read(d)}catch(g){f=!0,this.events.triggerEvent("exception",{xy:a,request:b,error:g,layer:c})}f||this.events.triggerEvent("getfeatureinfo",{text:b.responseText,features:e,request:b,xy:a,layer:c})}},CLASS_NAME:"OpenLayers.Control.WMTSGetFeatureInfo"});
OpenLayers.Protocol.CSW.v2_0_2=OpenLayers.Class(OpenLayers.Protocol,{formatOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]);a.format||(this.format=new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({},this.formatOptions)))},destroy:function(){this.options&&!this.options.format&&this.format.destroy();this.format=null;OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){a=OpenLayers.Util.extend({},a);OpenLayers.Util.applyDefaults(a,
this.options||{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.format.write(a.params||a);b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),params:a.params,headers:a.headers,data:c});return b},handleRead:function(a,b){if(b.callback){var c=a.priv;200<=c.status&&300>c.status?(a.data=this.parseData(c),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE;b.callback.call(b.scope,a)}},parseData:function(a){var b=
a.responseXML;b&&b.documentElement||(b=a.responseText);return!b||0>=b.length?null:this.format.read(b)},CLASS_NAME:"OpenLayers.Protocol.CSW.v2_0_2"});
OpenLayers.Control.Graticule=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,intervals:[45,30,20,10,5,2,1,0.5,0.2,0.1,0.05,0.01,0.0050,0.0020,0.0010],displayInLayerSwitcher:!0,visible:!0,numPoints:50,targetSize:200,layerName:null,labelled:!0,labelFormat:"dm",lineSymbolizer:{strokeColor:"#333",strokeWidth:1,strokeOpacity:0.5},labelSymbolizer:{},gratLayer:null,initialize:function(a){a=a||{};a.layerName=a.layerName||OpenLayers.i18n("Graticule");OpenLayers.Control.prototype.initialize.apply(this,
[a]);this.labelSymbolizer.stroke=!1;this.labelSymbolizer.fill=!1;this.labelSymbolizer.label="${label}";this.labelSymbolizer.labelAlign="${labelAlign}";this.labelSymbolizer.labelXOffset="${xOffset}";this.labelSymbolizer.labelYOffset="${yOffset}"},destroy:function(){this.deactivate();OpenLayers.Control.prototype.destroy.apply(this,arguments);this.gratLayer&&(this.gratLayer.destroy(),this.gratLayer=null)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.gratLayer){var a=
new OpenLayers.Style({},{rules:[new OpenLayers.Rule({symbolizer:{Point:this.labelSymbolizer,Line:this.lineSymbolizer}})]});this.gratLayer=new OpenLayers.Layer.Vector(this.layerName,{styleMap:new OpenLayers.StyleMap({"default":a}),visibility:this.visible,displayInLayerSwitcher:this.displayInLayerSwitcher})}return this.div},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.addLayer(this.gratLayer),this.map.events.register("moveend",this,this.update),this.update(),
!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("moveend",this,this.update),this.map.removeLayer(this.gratLayer),!0):!1},update:function(){var a=this.map.getExtent();if(a){this.gratLayer.destroyFeatures();var b=new OpenLayers.Projection("EPSG:4326"),c=this.map.getProjectionObject(),d=this.map.getResolution();c.proj&&"longlat"==c.proj.projName&&(this.numPoints=1);var e=this.map.getCenter(),f=new OpenLayers.Pixel(e.lon,e.lat);
OpenLayers.Projection.transform(f,c,b);for(var e=this.targetSize*d,e=e*e,g,d=0;d<this.intervals.length;++d){g=this.intervals[d];var h=g/2,k=f.offset({x:-h,y:-h}),h=f.offset({x:h,y:h});OpenLayers.Projection.transform(k,b,c);OpenLayers.Projection.transform(h,b,c);if((k.x-h.x)*(k.x-h.x)+(k.y-h.y)*(k.y-h.y)<=e)break}f.x=Math.floor(f.x/g)*g;f.y=Math.floor(f.y/g)*g;var d=0,e=[f.clone()],h=f.clone(),l;do h=h.offset({x:0,y:g}),l=OpenLayers.Projection.transform(h.clone(),b,c),e.unshift(h);while(a.containsPixel(l)&&
1E3>++d);h=f.clone();do h=h.offset({x:0,y:-g}),l=OpenLayers.Projection.transform(h.clone(),b,c),e.push(h);while(a.containsPixel(l)&&1E3>++d);d=0;k=[f.clone()];h=f.clone();do h=h.offset({x:-g,y:0}),l=OpenLayers.Projection.transform(h.clone(),b,c),k.unshift(h);while(a.containsPixel(l)&&1E3>++d);h=f.clone();do h=h.offset({x:g,y:0}),l=OpenLayers.Projection.transform(h.clone(),b,c),k.push(h);while(a.containsPixel(l)&&1E3>++d);g=[];for(d=0;d<k.length;++d){l=k[d].x;for(var f=[],m=null,n=Math.min(e[0].y,
90),h=Math.max(e[e.length-1].y,-90),p=(n-h)/this.numPoints,n=h,h=0;h<=this.numPoints;++h){var q=new OpenLayers.Geometry.Point(l,n);q.transform(b,c);f.push(q);n+=p;q.y>=a.bottom&&!m&&(m=q)}this.labelled&&(m=new OpenLayers.Geometry.Point(m.x,a.bottom),l={value:l,label:this.labelled?OpenLayers.Util.getFormattedLonLat(l,"lon",this.labelFormat):"",labelAlign:"cb",xOffset:0,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(m,l)));f=new OpenLayers.Geometry.LineString(f);g.push(new OpenLayers.Feature.Vector(f))}for(h=
0;h<e.length;++h)if(n=e[h].y,!(-90>n||90<n)){f=[];d=k[0].x;p=(k[k.length-1].x-d)/this.numPoints;l=d;m=null;for(d=0;d<=this.numPoints;++d)q=new OpenLayers.Geometry.Point(l,n),q.transform(b,c),f.push(q),l+=p,q.x<a.right&&(m=q);this.labelled&&(m=new OpenLayers.Geometry.Point(a.right,m.y),l={value:n,label:this.labelled?OpenLayers.Util.getFormattedLonLat(n,"lat",this.labelFormat):"",labelAlign:"rb",xOffset:-2,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(m,l)));f=new OpenLayers.Geometry.LineString(f);
g.push(new OpenLayers.Feature.Vector(f))}this.gratLayer.addFeatures(g)}},CLASS_NAME:"OpenLayers.Control.Graticule"});
OpenLayers.Layer.UTFGrid=OpenLayers.Class(OpenLayers.Layer.XYZ,{isBaseLayer:!1,projection:new OpenLayers.Projection("EPSG:900913"),useJSONP:!1,tileClass:OpenLayers.Tile.UTFGrid,initialize:function(a){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a.name,a.url,{},a]);this.tileOptions=OpenLayers.Util.extend({utfgridResolution:this.utfgridResolution},this.tileOptions)},clone:function(a){null==a&&(a=new OpenLayers.Layer.UTFGrid(this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,
[a])},getFeatureInfo:function(a){var b=null;a=this.getTileData(a);a.tile&&(b=a.tile.getFeatureInfo(a.i,a.j));return b},getFeatureId:function(a){var b=null;a=this.getTileData(a);a.tile&&(b=a.tile.getFeatureId(a.i,a.j));return b},CLASS_NAME:"OpenLayers.Layer.UTFGrid"});
OpenLayers.Protocol.Script=OpenLayers.Class(OpenLayers.Protocol,{url:null,params:null,callback:null,callbackTemplate:"OpenLayers.Protocol.Script.registry.${id}",callbackKey:"callback",callbackPrefix:"",scope:null,format:null,pendingRequests:null,srsInBBOX:!1,initialize:function(a){a=a||{};this.params={};this.pendingRequests={};OpenLayers.Protocol.prototype.initialize.apply(this,arguments);this.format||(this.format=new OpenLayers.Format.GeoJSON);if(!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var b=
new OpenLayers.Format.QueryStringFilter({srsInBBOX:this.srsInBBOX});this.filterToParams=function(a,d){return b.write(a,d)}}},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments);a=OpenLayers.Util.applyDefaults(a,this.options);a.params=OpenLayers.Util.applyDefaults(a.params,this.options.params);a.filter&&this.filterToParams&&(a.params=this.filterToParams(a.filter,a.params));var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.createRequest(a.url,a.params,OpenLayers.Function.bind(function(c){b.data=
c;this.handleRead(b,a)},this));b.priv=c;return b},createRequest:function(a,b,c){c=OpenLayers.Protocol.Script.register(c);var d=OpenLayers.String.format(this.callbackTemplate,{id:c});b=OpenLayers.Util.extend({},b);b[this.callbackKey]=this.callbackPrefix+d;a=OpenLayers.Util.urlAppend(a,OpenLayers.Util.getParameterString(b));b=document.createElement("script");b.type="text/javascript";b.src=a;b.id="OpenLayers_Protocol_Script_"+c;this.pendingRequests[b.id]=b;document.getElementsByTagName("head")[0].appendChild(b);
return b},destroyRequest:function(a){OpenLayers.Protocol.Script.unregister(a.id.split("_").pop());delete this.pendingRequests[a.id];a.parentNode&&a.parentNode.removeChild(a)},handleRead:function(a,b){this.handleResponse(a,b)},handleResponse:function(a,b){b.callback&&(a.data?(a.features=this.parseFeatures(a.data),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE,this.destroyRequest(a.priv),b.callback.call(b.scope,a))},parseFeatures:function(a){return this.format.read(a)},
abort:function(a){if(a)this.destroyRequest(a.priv);else for(var b in this.pendingRequests)this.destroyRequest(this.pendingRequests[b])},destroy:function(){this.abort();delete this.params;delete this.format;OpenLayers.Protocol.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Protocol.Script"});(function(){var a=OpenLayers.Protocol.Script,b=0;a.registry={};a.register=function(c){var d="c"+ ++b;a.registry[d]=function(){c.apply(this,arguments)};return d};a.unregister=function(b){delete a.registry[b]}})();
OpenLayers.Control.TransformFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,layer:null,preserveAspectRatio:!1,rotate:!0,feature:null,renderIntent:"temporary",rotationHandleSymbolizer:null,box:null,center:null,scale:1,ratio:1,rotation:0,handles:null,rotationHandles:null,dragControl:null,irregular:!1,initialize:function(a,b){OpenLayers.Control.prototype.initialize.apply(this,[b]);this.layer=a;this.rotationHandleSymbolizer||(this.rotationHandleSymbolizer={stroke:!1,pointRadius:10,fillOpacity:0,
cursor:"pointer"});this.createBox();this.createControl()},activate:function(){var a=!1;OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragControl.activate(),this.layer.addFeatures([this.box]),this.rotate&&this.layer.addFeatures(this.rotationHandles),this.layer.addFeatures(this.handles),a=!0);return a},deactivate:function(){var a=!1;OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.layer.removeFeatures(this.handles),this.rotate&&this.layer.removeFeatures(this.rotationHandles),
this.layer.removeFeatures([this.box]),this.dragControl.deactivate(),a=!0);return a},setMap:function(a){this.dragControl.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},setFeature:function(a,b){b=OpenLayers.Util.applyDefaults(b,{rotation:0,scale:1,ratio:1});var c=this.rotation,d=this.center;OpenLayers.Util.extend(this,b);if(!1!==this.events.triggerEvent("beforesetfeature",{feature:a})){this.feature=a;this.activate();this._setfeature=!0;var e=this.feature.geometry.getBounds();this.box.move(e.getCenterLonLat());
this.box.geometry.rotate(-c,d);this._angle=0;this.rotation?(c=a.geometry.clone(),c.rotate(-this.rotation,this.center),c=new OpenLayers.Feature.Vector(c.getBounds().toGeometry()),c.geometry.rotate(this.rotation,this.center),this.box.geometry.rotate(this.rotation,this.center),this.box.move(c.geometry.getBounds().getCenterLonLat()),c=c.geometry.components[0].components[0].getBounds().getCenterLonLat()):c=new OpenLayers.LonLat(e.left,e.bottom);this.handles[0].move(c);delete this._setfeature;this.events.triggerEvent("setfeature",
{feature:a})}},unsetFeature:function(){this.active?this.deactivate():(this.feature=null,this.rotation=0,this.ratio=this.scale=1)},createBox:function(){var a=this;this.center=new OpenLayers.Geometry.Point(0,0);this.box=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1,-1),new OpenLayers.Geometry.Point(0,-1),new OpenLayers.Geometry.Point(1,-1),new OpenLayers.Geometry.Point(1,0),new OpenLayers.Geometry.Point(1,1),new OpenLayers.Geometry.Point(0,1),new OpenLayers.Geometry.Point(-1,
1),new OpenLayers.Geometry.Point(-1,0),new OpenLayers.Geometry.Point(-1,-1)]),null,"string"==typeof this.renderIntent?null:this.renderIntent);this.box.geometry.move=function(b,c){a._moving=!0;OpenLayers.Geometry.LineString.prototype.move.apply(this,arguments);a.center.move(b,c);delete a._moving};for(var b=function(a,b){OpenLayers.Geometry.Point.prototype.move.apply(this,arguments);this._rotationHandle&&this._rotationHandle.geometry.move(a,b);this._handle.geometry.move(a,b)},c=function(a,b,c){OpenLayers.Geometry.Point.prototype.resize.apply(this,
arguments);this._rotationHandle&&this._rotationHandle.geometry.resize(a,b,c);this._handle.geometry.resize(a,b,c)},d=function(a,b){OpenLayers.Geometry.Point.prototype.rotate.apply(this,arguments);this._rotationHandle&&this._rotationHandle.geometry.rotate(a,b);this._handle.geometry.rotate(a,b)},e=function(b,c){var d=this.x,e=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,b,c);if(!a._moving){var f=a.dragControl.handlers.drag.evt,g=!(!a._setfeature&&a.preserveAspectRatio)&&!(f&&f.shiftKey),
h=new OpenLayers.Geometry.Point(d,e),f=a.center;this.rotate(-a.rotation,f);h.rotate(-a.rotation,f);var k=this.x-f.x,l=this.y-f.y,m=k-(this.x-h.x),n=l-(this.y-h.y);a.irregular&&!a._setfeature&&(k-=(this.x-h.x)/2,l-=(this.y-h.y)/2);this.x=d;this.y=e;h=1;g?(l=1.0E-5>Math.abs(n)?1:l/n,h=(1.0E-5>Math.abs(m)?1:k/m)/l):(m=Math.sqrt(m*m+n*n),l=Math.sqrt(k*k+l*l)/m);a._moving=!0;a.box.geometry.rotate(-a.rotation,f);delete a._moving;a.box.geometry.resize(l,f,h);a.box.geometry.rotate(a.rotation,f);a.transformFeature({scale:l,
ratio:h});a.irregular&&!a._setfeature&&(k=f.clone(),k.x+=1.0E-5>Math.abs(d-f.x)?0:this.x-d,k.y+=1.0E-5>Math.abs(e-f.y)?0:this.y-e,a.box.geometry.move(this.x-d,this.y-e),a.transformFeature({center:k}))}},f=function(b,c){var d=this.x,e=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,b,c);if(!a._moving){var f=a.dragControl.handlers.drag.evt,f=f&&f.shiftKey?45:1,g=a.center,h=this.x-g.x,k=this.y-g.y;this.x=d;this.y=e;d=Math.atan2(k-c,h-b);d=Math.atan2(k,h)-d;d*=180/Math.PI;a._angle=(a._angle+
d)%360;d=a.rotation%f;if(Math.abs(a._angle)>=f||0!==d)d=Math.round(a._angle/f)*f-d,a._angle=0,a.box.geometry.rotate(d,g),a.transformFeature({rotation:d})}},g=Array(8),h=Array(4),k,l,m,n="sw s se e ne n nw w".split(" "),p=0;8>p;++p)k=this.box.geometry.components[p],l=new OpenLayers.Feature.Vector(k.clone(),{role:n[p]+"-resize"},"string"==typeof this.renderIntent?null:this.renderIntent),0==p%2&&(m=new OpenLayers.Feature.Vector(k.clone(),{role:n[p]+"-rotate"},"string"==typeof this.rotationHandleSymbolizer?
null:this.rotationHandleSymbolizer),m.geometry.move=f,k._rotationHandle=m,h[p/2]=m),k.move=b,k.resize=c,k.rotate=d,l.geometry.move=e,k._handle=l,g[p]=l;this.rotationHandles=h;this.handles=g},createControl:function(){var a=this;this.dragControl=new OpenLayers.Control.DragFeature(this.layer,{documentDrag:!0,moveFeature:function(b){this.feature===a.feature&&(this.feature=a.box);OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,arguments)},onDrag:function(b,c){b===a.box&&a.transformFeature({center:a.center})},
onStart:function(b,c){var d=!a.geometryTypes||-1!==OpenLayers.Util.indexOf(a.geometryTypes,b.geometry.CLASS_NAME),e=OpenLayers.Util.indexOf(a.handles,b),e=e+OpenLayers.Util.indexOf(a.rotationHandles,b);b!==a.feature&&b!==a.box&&-2==e&&d&&a.setFeature(b)},onComplete:function(b,c){a.events.triggerEvent("transformcomplete",{feature:a.feature})}})},drawHandles:function(){for(var a=this.layer,b=0;8>b;++b)this.rotate&&0===b%2&&a.drawFeature(this.rotationHandles[b/2],this.rotationHandleSymbolizer),a.drawFeature(this.handles[b],
this.renderIntent)},transformFeature:function(a){if(!this._setfeature){this.scale*=a.scale||1;this.ratio*=a.ratio||1;var b=this.rotation;this.rotation=(this.rotation+(a.rotation||0))%360;if(!1!==this.events.triggerEvent("beforetransform",a)){var c=this.feature,d=c.geometry,e=this.center;d.rotate(-b,e);a.scale||a.ratio?d.resize(a.scale,e,a.ratio):a.center&&c.move(a.center.getBounds().getCenterLonLat());d.rotate(this.rotation,e);this.layer.drawFeature(c);c.toState(OpenLayers.State.UPDATE);this.events.triggerEvent("transform",
a)}}this.layer.drawFeature(this.box,this.renderIntent);this.drawHandles()},destroy:function(){for(var a,b=0;8>b;++b)a=this.box.geometry.components[b],a._handle.destroy(),a._handle=null,a._rotationHandle&&a._rotationHandle.destroy(),a._rotationHandle=null;this.rotationHandles=this.rotationHandleSymbolizer=this.handles=this.feature=this.center=null;this.box.destroy();this.layer=this.box=null;this.dragControl.destroy();this.dragControl=null;OpenLayers.Control.prototype.destroy.apply(this,arguments)},
CLASS_NAME:"OpenLayers.Control.TransformFeature"});
OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:!0,type:"png",useScales:!1,overrideDPI:!1,initialize:function(a,b,c){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments);this.resolutions&&(this.serverResolutions=this.resolutions,this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0]));if(this.layerInfo){var d=this.layerInfo,e=new OpenLayers.Bounds(d.fullExtent.xmin,d.fullExtent.ymin,
d.fullExtent.xmax,d.fullExtent.ymax);this.projection="EPSG:"+d.spatialReference.wkid;this.sphericalMercator=102100==d.spatialReference.wkid;this.units="esriFeet"==d.units?"ft":"m";if(d.tileInfo){this.tileSize=new OpenLayers.Size(d.tileInfo.width||d.tileInfo.cols,d.tileInfo.height||d.tileInfo.rows);this.tileOrigin=new OpenLayers.LonLat(d.tileInfo.origin.x,d.tileInfo.origin.y);var f=new OpenLayers.Geometry.Point(e.left,e.top),e=new OpenLayers.Geometry.Point(e.right,e.bottom);this.useScales?this.scales=
[]:this.resolutions=[];this.lods=[];for(var g in d.tileInfo.lods)if(d.tileInfo.lods.hasOwnProperty(g)){var h=d.tileInfo.lods[g];this.useScales?this.scales.push(h.scale):this.resolutions.push(h.resolution);var k=this.getContainingTileCoords(f,h.resolution);h.startTileCol=k.x;h.startTileRow=k.y;k=this.getContainingTileCoords(e,h.resolution);h.endTileCol=k.x;h.endTileRow=k.y;this.lods.push(h)}this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]);this.serverResolutions=this.resolutions;this.overrideDPI&&
d.tileInfo.dpi&&(OpenLayers.DOTS_PER_INCH=d.tileInfo.dpi)}}},getContainingTileCoords:function(a,b){return new OpenLayers.Pixel(Math.max(Math.floor((a.x-this.tileOrigin.lon)/(this.tileSize.w*b)),0),Math.max(Math.floor((this.tileOrigin.lat-a.y)/(this.tileSize.h*b)),0))},calculateMaxExtentWithLOD:function(a){var b=this.tileOrigin.lon+a.startTileCol*this.tileSize.w*a.resolution,c=this.tileOrigin.lat-a.startTileRow*this.tileSize.h*a.resolution;return new OpenLayers.Bounds(b,c-(a.endTileRow-a.startTileRow+
1)*this.tileSize.h*a.resolution,b+(a.endTileCol-a.startTileCol+1)*this.tileSize.w*a.resolution,c)},calculateMaxExtentWithExtent:function(a,b){var c=new OpenLayers.Geometry.Point(a.left,a.top),d=new OpenLayers.Geometry.Point(a.right,a.bottom),c=this.getContainingTileCoords(c,b),d=this.getContainingTileCoords(d,b);return this.calculateMaxExtentWithLOD({resolution:b,startTileCol:c.x,startTileRow:c.y,endTileCol:d.x,endTileRow:d.y})},getUpperLeftTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.left,
this.maxExtent.top);return this.getContainingTileCoords(b,a)},getLowerRightTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom);return this.getContainingTileCoords(b,a)},getMaxExtentForResolution:function(a){var b=this.getUpperLeftTileCoord(a),c=this.getLowerRightTileCoord(a),d=this.tileOrigin.lon+b.x*this.tileSize.w*a,e=this.tileOrigin.lat-b.y*this.tileSize.h*a;return new OpenLayers.Bounds(d,e-(c.y-b.y+1)*this.tileSize.h*a,d+(c.x-b.x+1)*this.tileSize.w*
a,e)},clone:function(a){null==a&&(a=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options));return OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},getMaxExtent:function(){var a=this.map.getResolution();return this.maxExtent=this.getMaxExtentForResolution(a)},getTileOrigin:function(){var a=this.getMaxExtent();return new OpenLayers.LonLat(a.left,a.bottom)},getURL:function(a){var b=this.getResolution(),c=this.tileOrigin.lon+b*this.tileSize.w/2,d=this.tileOrigin.lat-b*this.tileSize.h/
2;a=a.getCenterLonLat();c=Math.round(Math.abs((a.lon-c)/(b*this.tileSize.w)));d=Math.round(Math.abs((d-a.lat)/(b*this.tileSize.h)));a=this.map.getZoom();if(this.lods){if(b=this.lods[this.map.getZoom()],c<b.startTileCol||c>b.endTileCol||d<b.startTileRow||d>b.endTileRow)return null}else{var e=this.getUpperLeftTileCoord(b),b=this.getLowerRightTileCoord(b);if(c<e.x||c>=b.x||d<e.y||d>=b.y)return null}b=this.url;e=""+c+d+a;OpenLayers.Util.isArray(b)&&(b=this.selectUrl(e,b));this.useArcGISServer?b+="/tile/${z}/${y}/${x}":
(c="C"+this.zeroPad(c,8,16),d="R"+this.zeroPad(d,8,16),a="L"+this.zeroPad(a,2,16),b=b+"/${z}/${y}/${x}."+this.type);b=OpenLayers.String.format(b,{x:c,y:d,z:a});return OpenLayers.Util.urlAppend(b,OpenLayers.Util.getParameterString(this.params))},zeroPad:function(a,b,c){for(a=a.toString(c||10);a.length<b;)a="0"+a;return a},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"});
OpenLayers.Control.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,drillDown:!1,maxFeatures:10,clickCallback:"click",output:"features",layers:null,queryVisible:!1,url:null,layerUrls:null,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,initialize:function(a){a=a||{};a.handlerOptions=a.handlerOptions||{};OpenLayers.Control.prototype.initialize.apply(this,[a]);this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(a.formatOptions));
!0===this.drillDown&&(this.hover=!1);this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(a={},a[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,a,this.handlerOptions.click||{}))},getInfoForClick:function(a){this.events.triggerEvent("beforegetfeatureinfo",{xy:a.xy});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait");this.request(a.xy,
{})},getInfoForHover:function(a){this.events.triggerEvent("beforegetfeatureinfo",{xy:a.xy});this.request(a.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var a=this.layers||this.map.layers,b=[],c,d,e=a.length-1;0<=e;--e)c=a[e],c instanceof OpenLayers.Layer.WMS&&(!this.queryVisible||c.getVisibility())&&(d=OpenLayers.Util.isArray(c.url)?c.url[0]:c.url,!1!==this.drillDown||this.url||(this.url=d),(!0===this.drillDown||
this.urlMatches(d))&&b.push(c));return b},urlMatches:function(a){var b=OpenLayers.Util.isEquivalentUrl(this.url,a);if(!b&&this.layerUrls)for(var c=0,d=this.layerUrls.length;c<d;++c)if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[c],a)){b=!0;break}return b},buildWMSOptions:function(a,b,c,d){for(var e=[],f=[],g=0,h=b.length;g<h;g++)null!=b[g].params.LAYERS&&(e=e.concat(b[g].params.LAYERS),f=f.concat(this.getStyleNames(b[g])));b=b[0];g=this.map.getProjection();(h=b.projection)&&h.equals(this.map.getProjectionObject())&&
(g=h.getCode());d=OpenLayers.Util.extend({service:"WMS",version:b.params.VERSION,request:"GetFeatureInfo",exceptions:b.params.EXCEPTIONS,bbox:this.map.getExtent().toBBOX(null,b.reverseAxisOrder()),feature_count:this.maxFeatures,height:this.map.getSize().h,width:this.map.getSize().w,format:d,info_format:b.params.INFO_FORMAT||this.infoFormat},1.3<=parseFloat(b.params.VERSION)?{crs:g,i:parseInt(c.x),j:parseInt(c.y)}:{srs:g,x:parseInt(c.x),y:parseInt(c.y)});0!=e.length&&(d=OpenLayers.Util.extend({layers:e,
query_layers:e,styles:f},d));OpenLayers.Util.applyDefaults(d,this.vendorParams);return{url:a,params:OpenLayers.Util.upperCaseObject(d),callback:function(b){this.handleResponse(c,b,a)},scope:this}},getStyleNames:function(a){return a.params.STYLES?a.params.STYLES:OpenLayers.Util.isArray(a.params.LAYERS)?Array(a.params.LAYERS.length):a.params.LAYERS.replace(/[^,]/g,"")},request:function(a,b){var c=this.findLayers();if(0==c.length)this.events.triggerEvent("nogetfeatureinfo"),OpenLayers.Element.removeClass(this.map.viewPortDiv,
"olCursorWait");else if(b=b||{},!1===this.drillDown){var c=this.buildWMSOptions(this.url,c,a,c[0].params.FORMAT),d=OpenLayers.Request.GET(c);!0===b.hover&&(this.hoverRequest=d)}else{this._numRequests=this._requestCount=0;this.features=[];for(var d={},e,f=0,g=c.length;f<g;f++){var h=c[f];e=OpenLayers.Util.isArray(h.url)?h.url[0]:h.url;e in d?d[e].push(h):(this._numRequests++,d[e]=[h])}for(e in d)c=d[e],c=this.buildWMSOptions(e,c,a,c[0].params.FORMAT),OpenLayers.Request.GET(c)}},triggerGetFeatureInfo:function(a,
b,c){this.events.triggerEvent("getfeatureinfo",{text:a.responseText,features:c,request:a,xy:b});OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},handleResponse:function(a,b,c){var d=b.responseXML;d&&d.documentElement||(d=b.responseText);d=this.format.read(d);!1===this.drillDown?this.triggerGetFeatureInfo(b,a,d):(this._requestCount++,this._features="object"===this.output?(this._features||[]).concat({url:c,features:d}):(this._features||[]).concat(d),this._requestCount===this._numRequests&&
(this.triggerGetFeatureInfo(b,a,this._features.concat()),delete this._features,delete this._requestCount,delete this._numRequests))},CLASS_NAME:"OpenLayers.Control.WMSGetFeatureInfo"});OpenLayers.Format.WMSCapabilities.v1_3_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3,{version:"1.3.0",CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3_0"});
OpenLayers.Format.WFS=OpenLayers.Class(OpenLayers.Format.GML,{layer:null,wfsns:"http://www.opengis.net/wfs",ogcns:"http://www.opengis.net/ogc",initialize:function(a,b){OpenLayers.Format.GML.prototype.initialize.apply(this,[a]);this.layer=b;this.layer.featureNS&&(this.featureNS=this.layer.featureNS);this.layer.options.geometry_column&&(this.geometryName=this.layer.options.geometry_column);this.layer.options.typename&&(this.featureName=this.layer.options.typename)},write:function(a){var b=this.createElementNS(this.wfsns,
"wfs:Transaction");b.setAttribute("version","1.0.0");b.setAttribute("service","WFS");for(var c=0;c<a.length;c++)switch(a[c].state){case OpenLayers.State.INSERT:b.appendChild(this.insert(a[c]));break;case OpenLayers.State.UPDATE:b.appendChild(this.update(a[c]));break;case OpenLayers.State.DELETE:b.appendChild(this.remove(a[c]))}return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(a){var b=this.buildGeometryNode(a.geometry),c=this.createElementNS(this.featureNS,"feature:"+
this.geometryName);c.appendChild(b);b=this.createElementNS(this.featureNS,"feature:"+this.featureName);b.appendChild(c);for(var d in a.attributes){var c=this.createTextNode(a.attributes[d]),e=d;-1!=d.search(":")&&(e=d.split(":")[1]);e=this.createElementNS(this.featureNS,"feature:"+e);e.appendChild(c);b.appendChild(e)}return b},insert:function(a){var b=this.createElementNS(this.wfsns,"wfs:Insert");b.appendChild(this.createFeatureXML(a));return b},update:function(a){a.fid||OpenLayers.Console.userError(OpenLayers.i18n("noFID"));
var b=this.createElementNS(this.wfsns,"wfs:Update");b.setAttribute("typeName",this.featurePrefix+":"+this.featureName);b.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var c=this.createElementNS(this.wfsns,"wfs:Property"),d=this.createElementNS(this.wfsns,"wfs:Name"),e=this.createTextNode(this.geometryName);d.appendChild(e);c.appendChild(d);d=this.createElementNS(this.wfsns,"wfs:Value");e=this.buildGeometryNode(a.geometry);a.layer&&e.setAttribute("srsName",a.layer.projection.getCode());
d.appendChild(e);c.appendChild(d);b.appendChild(c);for(var f in a.attributes)c=this.createElementNS(this.wfsns,"wfs:Property"),d=this.createElementNS(this.wfsns,"wfs:Name"),d.appendChild(this.createTextNode(f)),c.appendChild(d),d=this.createElementNS(this.wfsns,"wfs:Value"),d.appendChild(this.createTextNode(a.attributes[f])),c.appendChild(d),b.appendChild(c);c=this.createElementNS(this.ogcns,"ogc:Filter");f=this.createElementNS(this.ogcns,"ogc:FeatureId");f.setAttribute("fid",a.fid);c.appendChild(f);
b.appendChild(c);return b},remove:function(a){if(!a.fid)return OpenLayers.Console.userError(OpenLayers.i18n("noFID")),!1;var b=this.createElementNS(this.wfsns,"wfs:Delete");b.setAttribute("typeName",this.featurePrefix+":"+this.featureName);b.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var c=this.createElementNS(this.ogcns,"ogc:Filter"),d=this.createElementNS(this.ogcns,"ogc:FeatureId");d.setAttribute("fid",a.fid);c.appendChild(d);b.appendChild(c);return b},destroy:function(){this.layer=
null},CLASS_NAME:"OpenLayers.Format.WFS"});
OpenLayers.Control.UTFGrid=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,layers:null,defaultHandlerOptions:{delay:300,pixelTolerance:4,stopMove:!1,single:!0,"double":!1,stopSingle:!1,stopDouble:!1},handlerMode:"click",setHandler:function(a){this.handlerMode=a;this.resetHandler()},resetHandler:function(){this.handler&&(this.handler.deactivate(),this.handler.destroy(),this.handler=null);"hover"==this.handlerMode?this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.reset},
this.handlerOptions):"click"==this.handlerMode?this.handler=new OpenLayers.Handler.Click(this,{click:this.handleEvent},this.handlerOptions):"move"==this.handlerMode&&(this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.handleEvent},this.handlerOptions));return this.handler?!0:!1},initialize:function(a){a=a||{};a.handlerOptions=a.handlerOptions||this.defaultHandlerOptions;OpenLayers.Control.prototype.initialize.apply(this,[a]);this.resetHandler()},handleEvent:function(a){if(null==
a)this.reset();else{var b=this.map.getLonLatFromPixel(a.xy);if(b){var c=this.findLayers();if(0<c.length){for(var d={},e,f,g=0,h=c.length;g<h;g++)e=c[g],f=OpenLayers.Util.indexOf(this.map.layers,e),d[f]=e.getFeatureInfo(b);this.callback(d,b,a.xy)}}}},callback:function(a){},reset:function(a){this.callback(null)},findLayers:function(){for(var a=this.layers||this.map.layers,b=[],c,d=a.length-1;0<=d;--d)c=a[d],c instanceof OpenLayers.Layer.UTFGrid&&b.push(c);return b},CLASS_NAME:"OpenLayers.Control.UTFGrid"});
OpenLayers.Format.CQL=function(){function a(a){function b(){var a=e.pop();switch(a.type){case "LOGICAL":var c=b(),g=b();return new OpenLayers.Filter.Logical({filters:[g,c],type:f[a.text.toUpperCase()]});case "NOT":return c=b(),new OpenLayers.Filter.Logical({filters:[c],type:OpenLayers.Filter.Logical.NOT});case "BETWEEN":return e.pop(),g=b(),a=b(),c=b(),new OpenLayers.Filter.Comparison({property:c,lowerBoundary:a,upperBoundary:g,type:OpenLayers.Filter.Comparison.BETWEEN});case "COMPARISON":return g=
b(),c=b(),new OpenLayers.Filter.Comparison({property:c,value:g,type:d[a.text.toUpperCase()]});case "VALUE":return/^'.*'$/.test(a.text)?a.text.substr(1,a.text.length-2):Number(a.text);case "SPATIAL":switch(a.text.toUpperCase()){case "BBOX":var c=b(),a=b(),g=b(),h=b(),k=b();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:k,value:OpenLayers.Bounds.fromArray([h,g,a,c])});case "INTERSECTS":return g=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,
property:c,value:g});case "WITHIN":return g=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.WITHIN,property:c,value:g});case "CONTAINS":return g=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.CONTAINS,property:c,value:g});case "DWITHIN":return a=b(),g=b(),c=b(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,value:g,property:c,distance:Number(a)})}case "GEOMETRY":return OpenLayers.Geometry.fromWKT(a.text);default:return a.text}}
for(var c=[],e=[];a.length;){var g=a.shift();switch(g.type){case "PROPERTY":case "GEOMETRY":case "VALUE":e.push(g);break;case "COMPARISON":case "BETWEEN":case "LOGICAL":for(var k=h[g.type];0<c.length&&h[c[c.length-1].type]<=k;)e.push(c.pop());c.push(g);break;case "SPATIAL":case "NOT":case "LPAREN":c.push(g);break;case "RPAREN":for(;0<c.length&&"LPAREN"!=c[c.length-1].type;)e.push(c.pop());c.pop();0<c.length&&"SPATIAL"==c[c.length-1].type&&e.push(c.pop());case "COMMA":case "END":break;default:throw Error("Unknown token type "+
g.type);}}for(;0<c.length;)e.push(c.pop());a=b();if(0<e.length){a="Remaining tokens after building AST: \n";for(c=e.length-1;0<=c;c--)a+=e[c].type+": "+e[c].text+"\n";throw Error(a);}return a}var b={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('\w+'|\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(a){var b=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(a);
if(b){var c=a.length,b=a.indexOf("(",b[0].length);if(-1<b)for(var d=1;b<c&&0<d;)switch(b++,a.charAt(b)){case "(":d++;break;case ")":d--}return[a.substr(0,b+1)]}},END:/^$/},c={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA"],BETWEEN:["VALUE"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],
NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},d={"=":OpenLayers.Filter.Comparison.EQUAL_TO,"<>":OpenLayers.Filter.Comparison.NOT_EQUAL_TO,"<":OpenLayers.Filter.Comparison.LESS_THAN,"<=":OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,">":OpenLayers.Filter.Comparison.GREATER_THAN,">=":OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,LIKE:OpenLayers.Filter.Comparison.LIKE,BETWEEN:OpenLayers.Filter.Comparison.BETWEEN},e={},f={AND:OpenLayers.Filter.Logical.AND,OR:OpenLayers.Filter.Logical.OR},
g={},h={RPAREN:3,LOGICAL:2,COMPARISON:1},k;for(k in d)d.hasOwnProperty(k)&&(e[d[k]]=k);for(k in f)f.hasOwnProperty(k)&&(g[f[k]]=k);return OpenLayers.Class(OpenLayers.Format,{read:function(d){var e=d;d=[];var f,g=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{a:{f=g;for(var h=void 0,g=void 0,k=f.length,h=0;h<k;h++){var g=f[h],s;s=e;var t=b[g];if(s=t instanceof RegExp?t.exec(s):t(s)){f=s[0];e=e.substr(f.length).replace(/^\s*/,"");f={type:g,text:f,remainder:e};break a}}d="ERROR: In parsing: ["+
e+"], expected one of: ";for(h=0;h<k;h++)g=f[h],d+="\n    "+g+": "+b[g];throw Error(d);}e=f.remainder;g=c[f.type];if("END"!=f.type&&!g)throw Error("No follows list for "+f.type);d.push(f)}while("END"!=f.type);d=a(d);this.keepData&&(this.data=d);return d},write:function(a){if(a instanceof OpenLayers.Geometry)return a.toString();switch(a.CLASS_NAME){case "OpenLayers.Filter.Spatial":switch(a.type){case OpenLayers.Filter.Spatial.BBOX:return"BBOX("+a.property+","+a.value.toBBOX()+")";case OpenLayers.Filter.Spatial.DWITHIN:return"DWITHIN("+
a.property+", "+this.write(a.value)+", "+a.distance+")";case OpenLayers.Filter.Spatial.WITHIN:return"WITHIN("+a.property+", "+this.write(a.value)+")";case OpenLayers.Filter.Spatial.INTERSECTS:return"INTERSECTS("+a.property+", "+this.write(a.value)+")";case OpenLayers.Filter.Spatial.CONTAINS:return"CONTAINS("+a.property+", "+this.write(a.value)+")";default:throw Error("Unknown spatial filter type: "+a.type);}case "OpenLayers.Filter.Logical":if(a.type==OpenLayers.Filter.Logical.NOT)return"NOT ("+this.write(a.filters[0])+
")";for(var b="(",c=!0,d=0;d<a.filters.length;d++)c?c=!1:b+=") "+g[a.type]+" (",b+=this.write(a.filters[d]);return b+")";case "OpenLayers.Filter.Comparison":return a.type==OpenLayers.Filter.Comparison.BETWEEN?a.property+" BETWEEN "+this.write(a.lowerBoundary)+" AND "+this.write(a.upperBoundary):a.property+" "+e[a.type]+" "+this.write(a.value);case void 0:if("string"===typeof a)return"'"+a+"'";if("number"===typeof a)return String(a);default:throw Error("Can't encode: "+a.CLASS_NAME+" "+a);}},CLASS_NAME:"OpenLayers.Format.CQL"})}();
OpenLayers.Control.Split=OpenLayers.Class(OpenLayers.Control,{layer:null,source:null,sourceOptions:null,tolerance:null,edge:!0,deferDelete:!1,mutual:!0,targetFilter:null,sourceFilter:null,handler:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.options=a||{};this.options.source&&this.setSource(this.options.source)},setSource:function(a){this.active?(this.deactivate(),this.handler&&(this.handler.destroy(),delete this.handler),this.source=a,this.activate()):this.source=
a},activate:function(){var a=OpenLayers.Control.prototype.activate.call(this);if(a)if(!this.source)this.handler||(this.handler=new OpenLayers.Handler.Path(this,{done:function(a){this.onSketchComplete({feature:new OpenLayers.Feature.Vector(a)})}},{layerOptions:this.sourceOptions})),this.handler.activate();else if(this.source.events)this.source.events.on({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this});return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.call(this);
a&&this.source&&this.source.events&&this.layer.events.un({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this});return a},onSketchComplete:function(a){this.feature=null;return!this.considerSplit(a.feature)},afterFeatureModified:function(a){a.modified&&"function"===typeof a.feature.geometry.split&&(this.feature=a.feature,this.considerSplit(a.feature))},removeByGeometry:function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c].geometry===b){a.splice(c,1);break}},
isEligible:function(a){return a.geometry?a.state!==OpenLayers.State.DELETE&&"function"===typeof a.geometry.split&&this.feature!==a&&(!this.targetFilter||this.targetFilter.evaluate(a.attributes)):!1},considerSplit:function(a){var b=!1,c=!1;if(!this.sourceFilter||this.sourceFilter.evaluate(a.attributes)){for(var d=this.layer&&this.layer.features||[],e,f,g=[],h=[],k=this.layer===this.source&&this.mutual,l={edge:this.edge,tolerance:this.tolerance,mutual:k},m=[a.geometry],n,p,q,r=0,s=d.length;r<s;++r)if(n=
d[r],this.isEligible(n)){p=[n.geometry];for(var t=0;t<m.length;++t){q=m[t];for(var u=0;u<p.length;++u)if(e=p[u],q.getBounds().intersectsBounds(e.getBounds())&&(e=q.split(e,l)))f=this.events.triggerEvent("beforesplit",{source:a,target:n}),!1!==f&&(k&&(f=e[0],1<f.length&&(f.unshift(t,1),Array.prototype.splice.apply(m,f),t+=f.length-3),e=e[1]),1<e.length&&(e.unshift(u,1),Array.prototype.splice.apply(p,e),u+=e.length-3))}p&&1<p.length&&(this.geomsToFeatures(n,p),this.events.triggerEvent("split",{original:n,
features:p}),Array.prototype.push.apply(g,p),h.push(n),c=!0)}m&&1<m.length&&(this.geomsToFeatures(a,m),this.events.triggerEvent("split",{original:a,features:m}),Array.prototype.push.apply(g,m),h.push(a),b=!0);if(b||c){if(this.deferDelete){d=[];r=0;for(s=h.length;r<s;++r)c=h[r],c.state===OpenLayers.State.INSERT?d.push(c):(c.state=OpenLayers.State.DELETE,this.layer.drawFeature(c));this.layer.destroyFeatures(d,{silent:!0});r=0;for(s=g.length;r<s;++r)g[r].state=OpenLayers.State.INSERT}else this.layer.destroyFeatures(h,
{silent:!0});this.layer.addFeatures(g,{silent:!0});this.events.triggerEvent("aftersplit",{source:a,features:g})}}return b},geomsToFeatures:function(a,b){var c=a.clone();delete c.geometry;for(var d,e=0,f=b.length;e<f;++e)d=c.clone(),d.geometry=b[e],d.state=OpenLayers.State.INSERT,b[e]=d},destroy:function(){this.active&&this.deactivate();OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Split"});
OpenLayers.Protocol.SOS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol,{fois:null,formatOptions:null,initialize:function(a){OpenLayers.Protocol.prototype.initialize.apply(this,[a]);a.format||(this.format=new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))},destroy:function(){this.options&&!this.options.format&&this.format.destroy();this.format=null;OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){a=OpenLayers.Util.extend({},a);OpenLayers.Util.applyDefaults(a,this.options||
{});var b=new OpenLayers.Protocol.Response({requestType:"read"}),c=this.format,c=OpenLayers.Format.XML.prototype.write.apply(c,[c.writeNode("sos:GetFeatureOfInterest",{fois:this.fois})]);b.priv=OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,b,a),data:c});return b},handleRead:function(a,b){if(b.callback){var c=a.priv;200<=c.status&&300>c.status?(a.features=this.parseFeatures(c),a.code=OpenLayers.Protocol.Response.SUCCESS):a.code=OpenLayers.Protocol.Response.FAILURE;
b.callback.call(b.scope,a)}},parseFeatures:function(a){var b=a.responseXML;b&&b.documentElement||(b=a.responseText);return!b||0>=b.length?null:this.format.read(b)},CLASS_NAME:"OpenLayers.Protocol.SOS.v1_0_0"});
OpenLayers.Layer.KaMapCache=OpenLayers.Class(OpenLayers.Layer.KaMap,{IMAGE_EXTENSIONS:{jpeg:"jpg",gif:"gif",png:"png",png8:"png",png24:"png",dithered:"png"},DEFAULT_FORMAT:"jpeg",initialize:function(a,b,c,d){OpenLayers.Layer.KaMap.prototype.initialize.apply(this,arguments);this.extension=this.IMAGE_EXTENSIONS[this.params.i.toLowerCase()||this.DEFAULT_FORMAT]},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round(1E4*this.map.getScale())/1E4,d=Math.round(a.left/b);a=
-Math.round(a.top/b);var b=Math.floor(d/this.tileSize.w/this.params.metaTileSize.w)*this.tileSize.w*this.params.metaTileSize.w,e=Math.floor(a/this.tileSize.h/this.params.metaTileSize.h)*this.tileSize.h*this.params.metaTileSize.h,c=["/",this.params.map,"/",c,"/",this.params.g.replace(/\s/g,"_"),"/def/t",e,"/l",b,"/t",a,"l",d,".",this.extension],d=this.url;OpenLayers.Util.isArray(d)&&(d=this.selectUrl(c.join(""),d));return d+c.join("")},CLASS_NAME:"OpenLayers.Layer.KaMapCache"});
OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,format:"image/png",serverResolutions:null,initialize:function(a,b,c,d){this.layername=c;OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,{},d]);this.extension=this.format.split("/")[1].toLowerCase();this.extension="jpg"==this.extension?"jpeg":this.extension},clone:function(a){null==a&&(a=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions()));return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,
[a])},getURL:function(a){function b(a,b){a=String(a);for(var c=[],d=0;d<b;++d)c.push("0");return c.join("").substring(0,b-a.length)+a}var c=this.getServerResolution(),d=this.maxExtent,e=this.tileSize,f=Math.round((a.left-d.left)/(c*e.w));a=Math.round((a.bottom-d.bottom)/(c*e.h));c=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,c):this.map.getZoom();f=[this.layername,b(c,2),b(parseInt(f/1E6),3),b(parseInt(f/1E3)%1E3,3),b(parseInt(f)%1E3,3),b(parseInt(a/1E6),3),b(parseInt(a/
1E3)%1E3,3),b(parseInt(a)%1E3,3)+"."+this.extension].join("/");c=this.url;OpenLayers.Util.isArray(c)&&(c=this.selectUrl(f,c));c="/"==c.charAt(c.length-1)?c:c+"/";return c+f},CLASS_NAME:"OpenLayers.Layer.TileCache"});OpenLayers.Format.WMSCapabilities.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.1",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(a,b){b.srs[this.getChildValue(a)]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1"});
OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1,{version:"1.1.1",profile:"WMSC",readers:{wms:OpenLayers.Util.applyDefaults({VendorSpecificCapabilities:function(a,b){b.vendorSpecific={tileSets:[]};this.readChildNodes(a,b.vendorSpecific)},TileSet:function(a,b){var c={srs:{},bbox:{},resolutions:[]};this.readChildNodes(a,c);b.tileSets.push(c)},Resolutions:function(a,b){for(var c=this.getChildValue(a).split(" "),d=0,e=c.length;d<e;d++)""!=c[d]&&b.resolutions.push(parseFloat(c[d]))},
Width:function(a,b){b.width=parseInt(this.getChildValue(a))},Height:function(a,b){b.height=parseInt(this.getChildValue(a))},Layers:function(a,b){b.layers=this.getChildValue(a)},Styles:function(a,b){b.styles=this.getChildValue(a)}},OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"});
OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{roundedCorner:!1,roundedCornerColor:"darkblue",layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.layerStates=[];this.roundedCorner&&OpenLayers.Console.warn("roundedCorner option is deprecated")},destroy:function(){this.clearLayersArray("base");
this.clearLayersArray("data");this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this});this.events.unregister("buttonclick",this,this.onButtonClick);OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments);this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,
scope:this});this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){OpenLayers.Control.prototype.draw.apply(this);this.loadContents();this.outsideViewport||this.minimizeControl();this.redraw();return this.div},onButtonClick:function(a){a=a.buttonElement;a===this.minimizeDiv?this.minimizeControl():a===this.maximizeDiv?this.maximizeControl():a._layerSwitcher===
this.id&&(a["for"]&&(a=document.getElementById(a["for"])),a.disabled||("radio"==a.type?(a.checked=!0,this.map.setBaseLayer(this.map.getLayer(a._layer))):(a.checked=!a.checked,this.updateMap())))},clearLayersArray:function(a){this[a+"LayersDiv"].innerHTML="";this[a+"Layers"]=[]},checkRedraw:function(){var a=!1;if(this.layerStates.length&&this.map.layers.length==this.layerStates.length)for(var b=0,c=this.layerStates.length;b<c;b++){var d=this.layerStates[b],e=this.map.layers[b];if(d.name!=e.name||d.inRange!=
e.inRange||d.id!=e.id||d.visibility!=e.visibility){a=!0;break}}else a=!0;return a},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base");this.clearLayersArray("data");var a=!1,b=!1,c=this.map.layers.length;this.layerStates=Array(c);for(var d=0;d<c;d++){var e=this.map.layers[d];this.layerStates[d]={name:e.name,visibility:e.visibility,inRange:e.inRange,id:e.id}}var f=this.map.layers.slice();this.ascending||f.reverse();d=0;for(c=f.length;d<c;d++){var e=f[d],g=e.isBaseLayer;
if(e.displayInLayerSwitcher){g?b=!0:a=!0;var h=g?e==this.map.baseLayer:e.getVisibility(),k=document.createElement("input");k.id=this.id+"_input_"+e.name;k.name=g?this.id+"_baseLayers":e.name;k.type=g?"radio":"checkbox";k.value=e.name;k.checked=h;k.defaultChecked=h;k.className="olButton";k._layer=e.id;k._layerSwitcher=this.id;g||e.inRange||(k.disabled=!0);h=document.createElement("label");h["for"]=k.id;OpenLayers.Element.addClass(h,"labelSpan olButton");h._layer=e.id;h._layerSwitcher=this.id;g||e.inRange||
(h.style.color="gray");h.innerHTML=e.name;h.style.verticalAlign=g?"bottom":"baseline";var l=document.createElement("br");(g?this.baseLayers:this.dataLayers).push({layer:e,inputElem:k,labelSpan:h});e=g?this.baseLayersDiv:this.dataLayersDiv;e.appendChild(k);e.appendChild(h);e.appendChild(l)}}this.dataLbl.style.display=a?"":"none";this.baseLbl.style.display=b?"":"none";return this.div},updateMap:function(){for(var a=0,b=this.baseLayers.length;a<b;a++){var c=this.baseLayers[a];c.inputElem.checked&&this.map.setBaseLayer(c.layer,
!1)}a=0;for(b=this.dataLayers.length;a<b;a++)c=this.dataLayers[a],c.layer.setVisibility(c.inputElem.checked)},maximizeControl:function(a){this.div.style.width="";this.div.style.height="";this.showControls(!1);null!=a&&OpenLayers.Event.stop(a)},minimizeControl:function(a){this.div.style.width="0px";this.div.style.height="0px";this.showControls(!0);null!=a&&OpenLayers.Event.stop(a)},showControls:function(a){this.maximizeDiv.style.display=a?"":"none";this.minimizeDiv.style.display=a?"none":"";this.layersDiv.style.display=
a?"none":""},loadContents:function(){this.layersDiv=document.createElement("div");this.layersDiv.id=this.id+"_layersDiv";OpenLayers.Element.addClass(this.layersDiv,"layersDiv");this.baseLbl=document.createElement("div");this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer");OpenLayers.Element.addClass(this.baseLbl,"baseLbl");this.baseLayersDiv=document.createElement("div");OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv");this.dataLbl=document.createElement("div");this.dataLbl.innerHTML=
OpenLayers.i18n("Overlays");OpenLayers.Element.addClass(this.dataLbl,"dataLbl");this.dataLayersDiv=document.createElement("div");OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv");this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),
this.layersDiv.appendChild(this.baseLayersDiv));this.div.appendChild(this.layersDiv);this.roundedCorner&&(OpenLayers.Rico.Corner.round(this.div,{corners:"tl bl",bgColor:"transparent",color:this.roundedCornerColor,blend:!1}),OpenLayers.Rico.Corner.changeOpacity(this.layersDiv,0.75));var a=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,a,"absolute");OpenLayers.Element.addClass(this.maximizeDiv,
"maximizeDiv olButton");this.maximizeDiv.style.display="none";this.div.appendChild(this.maximizeDiv);a=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,a,"absolute");OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton");this.minimizeDiv.style.display="none";this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"});
OpenLayers.Tile.Image.IFrame={useIFrame:null,draw:function(){if(OpenLayers.Tile.Image.prototype.shouldDraw.call(this)){var a=this.layer.getURL(this.bounds),b=this.useIFrame;this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&a.length>this.maxGetUrlLength;a=b&&!this.useIFrame;b=!b&&this.useIFrame;if(a||b)this.imgDiv&&this.imgDiv.parentNode===this.frame&&this.frame.removeChild(this.imgDiv),this.imgDiv=null,a?(this.blankImageUrl=this._blankImageUrl,this.frame.removeChild(this.frame.firstChild)):
(this._blankImageUrl=this.blankImageUrl,this.blankImageUrl="about:blank")}return OpenLayers.Tile.Image.prototype.draw.apply(this,arguments)},getImage:function(){if(!0===this.useIFrame){if(!this.frame.childNodes.length){var a=document.createElement("div"),b=a.style;b.position="absolute";b.width="100%";b.height="100%";b.zIndex=1;b.backgroundImage="url("+this._blankImageUrl+")";this.frame.appendChild(a)}a=this.id+"_iFrame";9>parseFloat(navigator.appVersion.split("MSIE")[1])?(b=document.createElement('<iframe name="'+
a+'">'),b.style.backgroundColor="#FFFFFF",b.style.filter="chroma(color=#FFFFFF)"):(b=document.createElement("iframe"),b.style.backgroundColor="transparent",b.name=a);b.scrolling="no";b.marginWidth="0px";b.marginHeight="0px";b.frameBorder="0";b.style.position="absolute";b.style.width="100%";b.style.height="100%";1>this.layer.opacity&&OpenLayers.Util.modifyDOMElement(b,null,null,null,null,null,null,this.layer.opacity);this.frame.appendChild(b);return this.imgDiv=b}return OpenLayers.Tile.Image.prototype.getImage.apply(this,
arguments)},createRequestForm:function(){var a=document.createElement("form");a.method="POST";var b=this.layer.params._OLSALT,b=(b?b+"_":"")+this.bounds.toBBOX();a.action=OpenLayers.Util.urlAppend(this.layer.url,b);a.target=this.id+"_iFrame";this.layer.getImageSize();var b=OpenLayers.Util.getParameters(this.url),c,d;for(d in b)c=document.createElement("input"),c.type="hidden",c.name=d,c.value=b[d],a.appendChild(c);return a},setImgSrc:function(a){if(!0===this.useIFrame)if(a){var b=this.createRequestForm();
this.frame.appendChild(b);b.submit();this.frame.removeChild(b)}else this.imgDiv.parentNode===this.frame&&(this.frame.removeChild(this.imgDiv),this.imgDiv=null);else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this,arguments)},onImageLoad:function(){OpenLayers.Tile.Image.prototype.onImageLoad.apply(this,arguments);!0===this.useIFrame&&(this.imgDiv.style.opacity=1,this.frame.style.opacity=this.layer.opacity)},createBackBuffer:function(){var a;!1===this.useIFrame&&(a=OpenLayers.Tile.Image.prototype.createBackBuffer.call(this));
return a}};
OpenLayers.Format.Atom=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{atom:"http://www.w3.org/2005/Atom",georss:"http://www.georss.org/georss"},feedTitle:"untitled",defaultEntryTitle:"untitled",gmlParser:null,xy:!1,read:function(a){"string"==typeof a&&(a=OpenLayers.Format.XML.prototype.read.apply(this,[a]));return this.parseFeatures(a)},write:function(a){var b;if(OpenLayers.Util.isArray(a)){b=this.createElementNSPlus("atom:feed");b.appendChild(this.createElementNSPlus("atom:title",{value:this.feedTitle}));
for(var c=0,d=a.length;c<d;c++)b.appendChild(this.buildEntryNode(a[c]))}else b=this.buildEntryNode(a);return OpenLayers.Format.XML.prototype.write.apply(this,[b])},buildContentNode:function(a){var b=this.createElementNSPlus("atom:content",{attributes:{type:a.type||null}});if(a.src)b.setAttribute("src",a.src);else if("text"==a.type||null==a.type)b.appendChild(this.createTextNode(a.value));else if("html"==a.type){if("string"!=typeof a.value)throw"HTML content must be in form of an escaped string";b.appendChild(this.createTextNode(a.value))}else"xhtml"==
a.type?b.appendChild(a.value):"xhtml"==a.type||a.type.match(/(\+|\/)xml$/)?b.appendChild(a.value):b.appendChild(this.createTextNode(a.value));return b},buildEntryNode:function(a){var b=a.attributes,c=b.atom||{},d=this.createElementNSPlus("atom:entry");if(c.authors)for(var e=OpenLayers.Util.isArray(c.authors)?c.authors:[c.authors],f=0,g=e.length;f<g;f++)d.appendChild(this.buildPersonConstructNode("author",e[f]));if(c.categories)for(var e=OpenLayers.Util.isArray(c.categories)?c.categories:[c.categories],
h,f=0,g=e.length;f<g;f++)h=e[f],d.appendChild(this.createElementNSPlus("atom:category",{attributes:{term:h.term,scheme:h.scheme||null,label:h.label||null}}));c.content&&d.appendChild(this.buildContentNode(c.content));if(c.contributors)for(e=OpenLayers.Util.isArray(c.contributors)?c.contributors:[c.contributors],f=0,g=e.length;f<g;f++)d.appendChild(this.buildPersonConstructNode("contributor",e[f]));a.fid&&d.appendChild(this.createElementNSPlus("atom:id",{value:a.fid}));if(c.links)for(e=OpenLayers.Util.isArray(c.links)?
c.links:[c.links],f=0,g=e.length;f<g;f++)h=e[f],d.appendChild(this.createElementNSPlus("atom:link",{attributes:{href:h.href,rel:h.rel||null,type:h.type||null,hreflang:h.hreflang||null,title:h.title||null,length:h.length||null}}));c.published&&d.appendChild(this.createElementNSPlus("atom:published",{value:c.published}));c.rights&&d.appendChild(this.createElementNSPlus("atom:rights",{value:c.rights}));(c.summary||b.description)&&d.appendChild(this.createElementNSPlus("atom:summary",{value:c.summary||
b.description}));d.appendChild(this.createElementNSPlus("atom:title",{value:c.title||b.title||this.defaultEntryTitle}));c.updated&&d.appendChild(this.createElementNSPlus("atom:updated",{value:c.updated}));a.geometry&&(b=this.createElementNSPlus("georss:where"),b.appendChild(this.buildGeometryNode(a.geometry)),d.appendChild(b));return d},initGmlParser:function(){this.gmlParser=new OpenLayers.Format.GML.v3({xy:this.xy,featureNS:"http://example.com#feature",internalProjection:this.internalProjection,
externalProjection:this.externalProjection})},buildGeometryNode:function(a){this.gmlParser||this.initGmlParser();return this.gmlParser.writeNode("feature:_geometry",a).firstChild},buildPersonConstructNode:function(a,b){var c=["uri","email"],d=this.createElementNSPlus("atom:"+a);d.appendChild(this.createElementNSPlus("atom:name",{value:b.name}));for(var e=0,f=c.length;e<f;e++)b[c[e]]&&d.appendChild(this.createElementNSPlus("atom:"+c[e],{value:b[c[e]]}));return d},getFirstChildValue:function(a,b,c,
d){return(a=this.getElementsByTagNameNS(a,b,c))&&0<a.length?this.getChildValue(a[0],d):d},parseFeature:function(a){var b={},c=null,d=null,e=null,f=this.namespaces.atom;this.parsePersonConstructs(a,"author",b);d=this.getElementsByTagNameNS(a,f,"category");0<d.length&&(b.categories=[]);for(var g=0,h=d.length;g<h;g++){c={};c.term=d[g].getAttribute("term");if(e=d[g].getAttribute("scheme"))c.scheme=e;if(e=d[g].getAttribute("label"))c.label=e;b.categories.push(c)}d=this.getElementsByTagNameNS(a,f,"content");
if(0<d.length){c={};if(e=d[0].getAttribute("type"))c.type=e;(e=d[0].getAttribute("src"))?c.src=e:("text"==c.type||"html"==c.type||null==c.type?c.value=this.getFirstChildValue(a,f,"content",null):"xhtml"==c.type||c.type.match(/(\+|\/)xml$/)?c.value=this.getChildEl(d[0]):c.value=this.getFirstChildValue(a,f,"content",null),b.content=c)}this.parsePersonConstructs(a,"contributor",b);b.id=this.getFirstChildValue(a,f,"id",null);d=this.getElementsByTagNameNS(a,f,"link");0<d.length&&(b.links=Array(d.length));
for(var k=["rel","type","hreflang","title","length"],g=0,h=d.length;g<h;g++){c={};c.href=d[g].getAttribute("href");for(var l=0,m=k.length;l<m;l++)(e=d[g].getAttribute(k[l]))&&(c[k[l]]=e);b.links[g]=c}if(c=this.getFirstChildValue(a,f,"published",null))b.published=c;if(c=this.getFirstChildValue(a,f,"rights",null))b.rights=c;if(c=this.getFirstChildValue(a,f,"summary",null))b.summary=c;b.title=this.getFirstChildValue(a,f,"title",null);b.updated=this.getFirstChildValue(a,f,"updated",null);c={title:b.title,
description:b.summary,atom:b};a=this.parseLocations(a)[0];a=new OpenLayers.Feature.Vector(a,c);a.fid=b.id;return a},parseFeatures:function(a){var b=[],c=this.getElementsByTagNameNS(a,this.namespaces.atom,"entry");0==c.length&&(c=[a]);a=0;for(var d=c.length;a<d;a++)b.push(this.parseFeature(c[a]));return b},parseLocations:function(a){var b=this.namespaces.georss,c={components:[]},d=this.getElementsByTagNameNS(a,b,"where");if(d&&0<d.length){this.gmlParser||this.initGmlParser();for(var e=0,f=d.length;e<
f;e++)this.gmlParser.readChildNodes(d[e],c)}c=c.components;if((d=this.getElementsByTagNameNS(a,b,"point"))&&0<d.length)for(e=0,f=d.length;e<f;e++){var g=OpenLayers.String.trim(d[e].firstChild.nodeValue).split(/\s+/);2!=g.length&&(g=OpenLayers.String.trim(d[e].firstChild.nodeValue).split(/\s*,\s*/));c.push(new OpenLayers.Geometry.Point(g[1],g[0]))}var h=this.getElementsByTagNameNS(a,b,"line");if(h&&0<h.length)for(var k,e=0,f=h.length;e<f;e++){d=OpenLayers.String.trim(h[e].firstChild.nodeValue).split(/\s+/);
k=[];for(var l=0,m=d.length;l<m;l+=2)g=new OpenLayers.Geometry.Point(d[l+1],d[l]),k.push(g);c.push(new OpenLayers.Geometry.LineString(k))}if((a=this.getElementsByTagNameNS(a,b,"polygon"))&&0<a.length)for(e=0,f=a.length;e<f;e++){d=OpenLayers.String.trim(a[e].firstChild.nodeValue).split(/\s+/);k=[];l=0;for(m=d.length;l<m;l+=2)g=new OpenLayers.Geometry.Point(d[l+1],d[l]),k.push(g);c.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(c)]))}if(this.internalProjection&&this.externalProjection)for(e=
0,f=c.length;e<f;e++)c[e]&&c[e].transform(this.externalProjection,this.internalProjection);return c},parsePersonConstructs:function(a,b,c){var d=[],e=this.namespaces.atom;a=this.getElementsByTagNameNS(a,e,b);for(var f=["uri","email"],g=0,h=a.length;g<h;g++){var k={};k.name=this.getFirstChildValue(a[g],e,"name",null);for(var l=0,m=f.length;l<m;l++){var n=this.getFirstChildValue(a[g],e,f[l],null);n&&(k[f[l]]=n)}d.push(k)}0<d.length&&(c[b+"s"]=d)},CLASS_NAME:"OpenLayers.Format.Atom"});
OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(a){var b,c=!0;switch(a.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,
-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:b=this.map.getSize();this.map.pan(0,-0.75*b.h);break;case 34:b=this.map.getSize();this.map.pan(0,0.75*b.h);break;case 35:b=this.map.getSize();this.map.pan(0.75*b.w,0);break;case 36:b=this.map.getSize();this.map.pan(-0.75*b.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:c=!1}c&&OpenLayers.Event.stop(a)},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"});OpenLayers.Control.ScaleBar=OpenLayers.Class(OpenLayers.Control,{element:null,scale:1,displaySystem:"metric",minWidth:100,maxWidth:200,divisions:2,subdivisions:2,showMinorMeasures:false,abbreviateLabel:false,singleLine:false,align:"left",div:null,scaleText:"scale 1:",thousandsSeparator:"",measurementProperties:{english:{units:["miles","feet","inches"],abbr:["mi","ft","in"],inches:[63360,12,1]},metric:{units:["kilometers","meters","centimeters"],abbr:["km","m","cm"],inches:[39370.07874,39.370079,0.393701]}},
limitedStyle:false,customStyles:null,defaultStyles:{Bar:{height:11,top:12,borderLeftWidth:0,borderRightWidth:0},BarAlt:{height:11,top:12,borderLeftWidth:0,borderRightWidth:0},MarkerMajor:{height:13,width:13,top:12,borderLeftWidth:0,borderRightWidth:0},MarkerMinor:{height:13,width:13,top:12,borderLeftWidth:0,borderRightWidth:0},NumbersBox:{height:13,width:40,top:24},LabelBox:{height:15,top:-2},LabelBoxSingleLine:{height:15,width:35,top:5,left:10}},appliedStyles:null,initialize:function(options){OpenLayers.Control.prototype.initialize.apply(this,
[options]);if(!document.styleSheets)this.limitedStyle=true;if(this.limitedStyle){this.appliedStyles=OpenLayers.Util.extend({},this.defaultStyles);OpenLayers.Util.extend(this.appliedStyles,this.customStyles)}this.element=document.createElement("div");this.element.style.position="relative";this.element.className=this.displayClass+"Wrapper";this.labelContainer=document.createElement("div");this.labelContainer.className=this.displayClass+"Units";this.labelContainer.style.position="absolute";this.graphicsContainer=
document.createElement("div");this.graphicsContainer.style.position="absolute";this.graphicsContainer.className=this.displayClass+"Graphics";this.numbersContainer=document.createElement("div");this.numbersContainer.style.position="absolute";this.numbersContainer.className=this.displayClass+"Numbers";this.element.appendChild(this.graphicsContainer);this.element.appendChild(this.labelContainer);this.element.appendChild(this.numbersContainer)},destroy:function(){this.map.events.unregister("moveend",
this,this.onMoveend);this.div.innerHTML="";OpenLayers.Control.prototype.destroy.apply(this)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.dxMarkerMajor=(this.styleValue("MarkerMajor","borderLeftWidth")+this.styleValue("MarkerMajor","width")+this.styleValue("MarkerMajor","borderRightWidth"))/2;this.dxMarkerMinor=(this.styleValue("MarkerMinor","borderLeftWidth")+this.styleValue("MarkerMinor","width")+this.styleValue("MarkerMinor","borderRightWidth"))/2;this.dxBar=(this.styleValue("Bar",
"borderLeftWidth")+this.styleValue("Bar","borderRightWidth"))/2;this.dxBarAlt=(this.styleValue("BarAlt","borderLeftWidth")+this.styleValue("BarAlt","borderRightWidth"))/2;this.dxNumbersBox=this.styleValue("NumbersBox","width")/2;var classNames=["Bar","BarAlt","MarkerMajor","MarkerMinor"];if(this.singleLine)classNames.push("LabelBoxSingleLine");else classNames.push("NumbersBox","LabelBox");var vertDisp=0;for(var classIndex=0;classIndex<classNames.length;++classIndex){var cls=classNames[classIndex];
vertDisp=Math.max(vertDisp,this.styleValue(cls,"top")+this.styleValue(cls,"height"))}this.element.style.height=vertDisp+"px";this.xOffsetSingleLine=this.styleValue("LabelBoxSingleLine","width")+this.styleValue("LabelBoxSingleLine","left");this.div.appendChild(this.element);this.map.events.register("moveend",this,this.onMoveend);this.update();return this.div},onMoveend:function(){this.update()},update:function(scale){if(this.map.baseLayer==null||!this.map.getScale())return;this.scale=scale!=undefined?
scale:this.map.getScale();this.element.title=this.scaleText+OpenLayers.Number.format(this.scale);this.element.style.width=this.maxWidth+"px";var comp=this.getComp();this.setSubProps(comp);this.labelContainer.innerHTML="";this.graphicsContainer.innerHTML="";this.numbersContainer.innerHTML="";var numDiv=this.divisions*this.subdivisions;var alignmentOffset={left:0+(this.singleLine?0:this.dxNumbersBox),center:this.maxWidth/2-numDiv*this.subProps.pixels/2-(this.singleLine?this.xOffsetSingleLine/2:0),right:this.maxWidth-
numDiv*this.subProps.pixels-(this.singleLine?this.xOffsetSingleLine:this.dxNumbersBox)};var xPos,measure,divNum,cls,left;for(var di=0;di<this.divisions;++di){xPos=di*this.subdivisions*this.subProps.pixels+alignmentOffset[this.align];this.graphicsContainer.appendChild(this.createElement("MarkerMajor"," ",xPos-this.dxMarkerMajor));if(!this.singleLine){measure=di==0?0:OpenLayers.Number.format(di*this.subdivisions*this.subProps.length,this.subProps.dec,this.thousandsSeparator);this.numbersContainer.appendChild(this.createElement("NumbersBox",
measure,xPos-this.dxNumbersBox))}for(var si=0;si<this.subdivisions;++si){if(si%2==0){cls="Bar";left=xPos-this.dxBar}else{cls="BarAlt";left=xPos-this.dxBarAlt}this.graphicsContainer.appendChild(this.createElement(cls," ",left,this.subProps.pixels));if(si<this.subdivisions-1){divNum=di*this.subdivisions+si+1;xPos=divNum*this.subProps.pixels+alignmentOffset[this.align];this.graphicsContainer.appendChild(this.createElement("MarkerMinor"," ",xPos-this.dxMarkerMinor));if(this.showMinorMeasures&&!this.singleLine){measure=
divNum*this.subProps.length;this.numbersContainer.appendChild(this.createElement("NumbersBox",measure,xPos-this.dxNumbersBox))}}}}xPos=numDiv*this.subProps.pixels;xPos+=alignmentOffset[this.align];this.graphicsContainer.appendChild(this.createElement("MarkerMajor"," ",xPos-this.dxMarkerMajor));measure=OpenLayers.Number.format(numDiv*this.subProps.length,this.subProps.dec,this.thousandsSeparator);if(!this.singleLine)this.numbersContainer.appendChild(this.createElement("NumbersBox",measure,xPos-this.dxNumbersBox));
var labelBox=document.createElement("div");labelBox.style.position="absolute";var labelText;if(this.singleLine){labelText=measure;labelBox.className=this.displayClass+"LabelBoxSingleLine";labelBox.style.left=Math.round(xPos+this.styleValue("LabelBoxSingleLine","left"))+"px"}else{labelText="";labelBox.className=this.displayClass+"LabelBox";labelBox.style.textAlign="center";labelBox.style.width=Math.round(numDiv*this.subProps.pixels)+"px";labelBox.style.left=Math.round(alignmentOffset[this.align])+
"px";labelBox.style.overflow="hidden"}if(this.abbreviateLabel)labelText+=" "+this.subProps.abbr;else labelText+=" "+this.subProps.units;labelBox.appendChild(document.createTextNode(labelText));this.labelContainer.appendChild(labelBox)},createElement:function(cls,text,left,width){var element=document.createElement("div");element.className=this.displayClass+cls;OpenLayers.Util.extend(element.style,{position:"absolute",textAlign:"center",overflow:"hidden",left:Math.round(left)+"px"});element.appendChild(document.createTextNode(text));
if(width)element.style.width=Math.round(width)+"px";return element},getComp:function(){var system=this.measurementProperties[this.displaySystem];var numUnits=system.units.length;var comp=new Array(numUnits);var numDiv=this.divisions*this.subdivisions;for(var unitIndex=0;unitIndex<numUnits;++unitIndex){comp[unitIndex]={};var ppdu=OpenLayers.DOTS_PER_INCH*system.inches[unitIndex]/this.scale;var minSDDisplayLength=(this.minWidth-this.dxNumbersBox)/ppdu/numDiv;var maxSDDisplayLength=(this.maxWidth-this.dxNumbersBox)/
ppdu/numDiv;for(var vi=0;vi<numDiv;++vi){var minNumber=minSDDisplayLength*(vi+1);var maxNumber=maxSDDisplayLength*(vi+1);var num=this.getHandsomeNumber(minNumber,maxNumber);var compNum={value:num.value/(vi+1),score:0,tie:0,dec:0,displayed:0};for(var vi2=0;vi2<numDiv;++vi2){var position=num.value*(vi2+1)/(vi+1);var num2=this.getHandsomeNumber(position,position);var major=(vi2+1)%this.subdivisions==0;var last=vi2+1==numDiv;if(this.singleLine&&last||!this.singleLine&&(major||this.showMinorMeasures)){compNum.score+=
num2.score;compNum.tie+=num2.tie;compNum.dec=Math.max(compNum.dec,num2.dec);compNum.displayed+=1}else{compNum.score+=num2.score/this.subdivisions;compNum.tie+=num2.tie/this.subdivisions}}compNum.score*=(unitIndex+1)*compNum.tie/compNum.displayed;comp[unitIndex][vi]=compNum}}return comp},setSubProps:function(comp){var system=this.measurementProperties[this.displaySystem];var score=Number.POSITIVE_INFINITY;var tie=Number.POSITIVE_INFINITY;for(var unitIndex=0;unitIndex<comp.length;++unitIndex){var ppdu=
OpenLayers.DOTS_PER_INCH*system.inches[unitIndex]/this.scale;for(var vi in comp[unitIndex]){var compNum=comp[unitIndex][vi];if(compNum.score<score||compNum.score==score&&compNum.tie<tie){this.subProps={length:compNum.value,pixels:ppdu*compNum.value,units:system.units[unitIndex],abbr:system.abbr[unitIndex],dec:compNum.dec};score=compNum.score;tie=compNum.tie}}}},styleValue:function(selector,key){var value=0;if(this.limitedStyle)value=this.appliedStyles[selector][key];else{selector="."+this.displayClass+
selector;rules:for(var i=document.styleSheets.length-1;i>=0;--i){var sheet=document.styleSheets[i];if(!sheet.disabled){var allRules;try{if(typeof sheet.cssRules=="undefined")if(typeof sheet.rules=="undefined")continue;else allRules=sheet.rules;else allRules=sheet.cssRules}catch(err){continue}for(var ruleIndex=0;ruleIndex<allRules.length;++ruleIndex){var rule=allRules[ruleIndex];if(rule.selectorText&&rule.selectorText.toLowerCase()==selector.toLowerCase())if(rule.style[key]!=""){value=parseInt(rule.style[key]);
break rules}}}}}return value?value:0},getHandsomeNumber:function(small,big,sigFigs){sigFigs=sigFigs==null?10:sigFigs;var num={value:small,score:Number.POSITIVE_INFINITY,tie:Number.POSITIVE_INFINITY,dec:3};var cmult,max,dec,tmult,multiplier,score,tie;for(var hexp=0;hexp<3;++hexp){cmult=Math.pow(2,-1*hexp);max=Math.floor(Math.log(big/cmult)/Math.LN10);for(var texp=max;texp>max-sigFigs+1;--texp){dec=Math.max(hexp-texp,0);tmult=cmult*Math.pow(10,texp);if(tmult*Math.floor(big/tmult)>=small){if(small%tmult==
0)multiplier=small/tmult;else multiplier=Math.floor(small/tmult)+1;score=multiplier+2*hexp;tie=texp<0?Math.abs(texp)+1:texp;if(score<num.score||score==num.score&&tie<num.tie){num.value=parseFloat((tmult*multiplier).toFixed(dec));num.score=score;num.tie=tie;num.dec=dec}}}}return num},CLASS_NAME:"OpenLayers.Control.ScaleBar"});(function(jQuery){jQuery.fn.jnotifyInizialize=function(options){var element=this;var defaults={oneAtTime:true,appendType:"append"};var options=jQuery.extend({},defaults,options);this.addClass("notify-wrapper");if(options.oneAtTime)this.addClass("notify-wrapper-oneattime");if(options.appendType=="prepend"&&options.oneAtTime==false)this.addClass("notify-wrapper-prepend");return this};jQuery.fn.jnotifyAddMessage=function(options){var notifyWrapper=this;if(notifyWrapper.hasClass("notify-wrapper")){var defaults=
{text:"",type:"message",showIcon:true,permanent:false,oneAtTime:true,disappearTime:3E4,callbackClose:null};var options=jQuery.extend({},defaults,options);var styleClass;var iconClass;switch(options.type){case "message":styleClass="ui-state-highlight";iconClass="ui-icon-info";break;case "error":styleClass="ui-state-error";iconClass="ui-icon-alert";break;case "success":styleClass="ui-state-success";iconClass="ui-icon-check";break;default:styleClass="ui-state-highlight";iconClass="ui-icon-info";break}if(notifyWrapper.hasClass("notify-wrapper-oneattime"))this.children().remove();
var notifyItemWrapper=jQuery('<div class="jnotify-item-wrapper"></div>');var notifyItem=jQuery('<div class="ui-corner-all jnotify-item"></div>').addClass(styleClass);if(notifyWrapper.hasClass("notify-wrapper-prepend"))notifyItem.prependTo(notifyWrapper);else notifyItem.appendTo(notifyWrapper);notifyItem.wrap(notifyItemWrapper);if(options.showIcon)jQuery('<span class="ui-icon" style="float:left; margin-right: .3em;" />').addClass(iconClass).appendTo(notifyItem);jQuery("<span></span>").html(options.text).appendTo(notifyItem);
jQuery('<div class="jnotify-item-close"><span class="ui-icon ui-icon-circle-close"/></div>').prependTo(notifyItem).click(function(){remove(notifyItem,options.callbackClose)});if(navigator.userAgent.match(/MSIE (\d+\.\d+);/)){notifyWrapper.css({top:document.documentElement.scrollTop});notifyWrapper.removeClass("IEsucks")}if(!options.permanent)setTimeout(function(){remove(notifyItem,options.callbackClose)},options.disappearTime)}function remove(obj,cb){if(cb)cb();obj.animate({opacity:"0"},1500,function(){obj.parent().animate({height:"0px"},
1500,function(){obj.parent().remove();if(navigator.userAgent.match(/MSIE (\d+\.\d+);/))obj.parent().parent().removeClass("IEsucks")})})}}})(jQuery);(function(a,b,c){function E(b){var c=this,d=b.elements,e=d.tooltip,f=".bgiframe-"+b.id;a.extend(c,{init:function(){d.bgiframe=a('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),d.bgiframe.appendTo(e),e.bind("tooltipmove"+f,c.adjust)},adjust:function(){var a=b.get("dimensions"),c=b.plugins.tip,f=d.tip,g,
h;h=parseInt(e.css("border-left-width"),10)||0,h={left:-h,top:-h},c&&f&&(g=c.corner.precedance==="x"?["width","left"]:["height","top"],h[g[1]]-=f[g[0]]()),d.bgiframe.css(h).css(a)},destroy:function(){d.bgiframe.remove(),e.unbind(f)}}),c.init()}function D(c){var f=this,g=c.options.show.modal,i=c.elements,j=i.tooltip,k="#qtip-overlay",l=".qtipmodal",m=l+c.id,o="is-modal-qtip",q=a(document.body),r;c.checks.modal={"^show.modal.(on|blur)$":function(){f.init(),i.overlay.toggle(j.is(":visible"))}},a.extend(f,
{init:function(){if(!g.on)return f;r=f.create(),j.attr(o,d).css("z-index",h.modal.zindex+a(n+"["+o+"]").length).unbind(l).unbind(m).bind("tooltipshow"+l+" tooltiphide"+l,function(b,c,d){var e=b.originalEvent;if(b.target===j[0])if(e&&b.type==="tooltiphide"&&/mouse(leave|enter)/.test(e.type)&&a(e.relatedTarget).closest(r[0]).length)try{b.preventDefault()}catch(g){}else(!e||e&&!e.solo)&&f[b.type.replace("tooltip","")](b,d)}).bind("tooltipfocus"+l,function(b){if(!b.isDefaultPrevented()&&b.target===j[0]){var c=
a(n).filter("["+o+"]"),d=h.modal.zindex+c.length,e=parseInt(j[0].style.zIndex,10);r[0].style.zIndex=d-1,c.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),c.end().filter("."+p).qtip("blur",b.originalEvent),j.addClass(p)[0].style.zIndex=d;try{b.preventDefault()}catch(f){}}}).bind("tooltiphide"+l,function(b){b.target===j[0]&&a("["+o+"]").filter(":visible").not(j).last().qtip("focus",b)}),g.escape&&a(b).unbind(m).bind("keydown"+m,function(a){a.keyCode===27&&j.hasClass(p)&&c.hide(a)}),g.blur&&
i.overlay.unbind(m).bind("click"+m,function(a){j.hasClass(p)&&c.hide(a)});return f},create:function(){function d(){r.css({height:a(b).height(),width:a(b).width()})}var c=a(k);if(c.length)return i.overlay=c.insertAfter(a(n).last());r=i.overlay=a("<div />",{id:k.substr(1),html:"<div></div>",mousedown:function(){return e}}).insertAfter(a(n).last()),a(b).unbind(l).bind("resize"+l,d),d();return r},toggle:function(b,c,h){if(b&&b.isDefaultPrevented())return f;var i=g.effect,k=c?"show":"hide",l=r.is(":visible"),
p=a("["+o+"]").filter(":visible").not(j),s;r||(r=f.create());if(r.is(":animated")&&l===c||!c&&p.length)return f;c?(r.css({left:0,top:0}),r.toggleClass("blurs",g.blur),q.bind("focusin"+m,function(b){var c=a(b.target),d=c.closest(".qtip"),f=d.length<1?e:parseInt(d[0].style.zIndex,10)>parseInt(j[0].style.zIndex,10);!f&&a(b.target).closest(n)[0]!==j[0]&&j.find("input:visible").filter(":first").focus()})):q.undelegate("*","focusin"+m),r.stop(d,e),a.isFunction(i)?i.call(r,c):i===e?r[k]():r.fadeTo(parseInt(h,
10)||90,c?1:0,function(){c||a(this).hide()}),c||r.queue(function(a){r.css({left:"",top:""}),a()});return f},show:function(a,b){return f.toggle(a,d,b)},hide:function(a,b){return f.toggle(a,e,b)},destroy:function(){var d=r;d&&(d=a("["+o+"]").not(j).length<1,d?(i.overlay.remove(),a(b).unbind(l)):i.overlay.unbind(l+c.id),q.undelegate("*","focusin"+m));return j.removeAttr(o).unbind(l)}}),f.init()}function C(b,g){function w(a){var b=a.precedance==="y",c=n[b?"width":"height"],d=n[b?"height":"width"],e=a.string().indexOf("center")>
-1,f=c*(e?0.5:1),g=Math.pow,h=Math.round,i,j,k,l=Math.sqrt(g(f,2)+g(d,2)),m=[p/f*l,p/d*l];m[2]=Math.sqrt(g(m[0],2)-g(p,2)),m[3]=Math.sqrt(g(m[1],2)-g(p,2)),i=l+m[2]+m[3]+(e?0:m[0]),j=i/l,k=[h(j*d),h(j*c)];return{height:k[b?0:1],width:k[b?1:0]}}function v(b){var c=k.titlebar&&b.y==="top",d=c?k.titlebar:k.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(l.css(h),10)||0}
function u(a,b,c){b=b?b:a[a.precedance];var d=l.hasClass(r),e=k.titlebar&&a.y==="top",f=e?k.titlebar:k.content,g="border-"+b+"-width",h;l.addClass(r),h=parseInt(f.css(g),10),h=(c?h||parseInt(l.css(g),10):h)||0,l.toggleClass(r,d);return h}function t(a,f,g,h){if(k.tip){var l=i.corner.clone(),n=g.adjusted,o=b.options.position.adjust.method.split(" "),p=o[0],q=o[1]||o[0],r={left:e,top:e,x:0,y:0},s,t={},u;i.corner.fixed!==d&&(p==="shift"&&l.precedance==="x"&&n.left&&l.y!=="center"?l.precedance=l.precedance===
"x"?"y":"x":p==="flip"&&n.left&&(l.x=l.x==="center"?n.left>0?"left":"right":l.x==="left"?"right":"left"),q==="shift"&&l.precedance==="y"&&n.top&&l.x!=="center"?l.precedance=l.precedance==="y"?"x":"y":q==="flip"&&n.top&&(l.y=l.y==="center"?n.top>0?"top":"bottom":l.y==="top"?"bottom":"top"),l.string()!==m.corner.string()&&(m.top!==n.top||m.left!==n.left)&&i.update(l,e)),s=i.position(l,n),s.right!==c&&(s.left=-s.right),s.bottom!==c&&(s.top=-s.bottom),s.user=Math.max(0,j.offset);if(r.left=p==="shift"&&
!!n.left)l.x==="center"?t["margin-left"]=r.x=s["margin-left"]-n.left:(u=s.right!==c?[n.left,-s.left]:[-n.left,s.left],(r.x=Math.max(u[0],u[1]))>u[0]&&(g.left-=n.left,r.left=e),t[s.right!==c?"right":"left"]=r.x);if(r.top=q==="shift"&&!!n.top)l.y==="center"?t["margin-top"]=r.y=s["margin-top"]-n.top:(u=s.bottom!==c?[n.top,-s.top]:[-n.top,s.top],(r.y=Math.max(u[0],u[1]))>u[0]&&(g.top-=n.top,r.top=e),t[s.bottom!==c?"bottom":"top"]=r.y);k.tip.css(t).toggle(!(r.x&&r.y||l.x==="center"&&r.y||l.y==="center"&&
r.x)),g.left-=s.left.charAt?s.user:p!=="shift"||r.top||!r.left&&!r.top?s.left:0,g.top-=s.top.charAt?s.user:q!=="shift"||r.left||!r.left&&!r.top?s.top:0,m.left=n.left,m.top=n.top,m.corner=l.clone()}}var i=this,j=b.options.style.tip,k=b.elements,l=k.tooltip,m={top:0,left:0},n={width:j.width,height:j.height},o={},p=j.border||0,q=".qtip-tip",s=!!(a("<canvas />")[0]||{}).getContext;i.mimic=i.corner=f,i.border=p,i.offset=j.offset,i.size=n,b.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||
i.destroy(),b.reposition()},"^style.tip.(height|width)$":function(){n={width:j.width,height:j.height},i.create(),i.update(),b.reposition()},"^content.title.text|style.(classes|widget)$":function(){k.tip&&i.update()}},a.extend(i,{init:function(){var b=i.detectCorner()&&(s||a.browser.msie);b&&(i.create(),i.update(),l.unbind(q).bind("tooltipmove"+q,t));return b},detectCorner:function(){var a=j.corner,c=b.options.position,f=c.at,g=c.my.string?c.my.string():c.my;if(a===e||g===e&&f===e)return e;a===d?i.corner=
new h.Corner(g):a.string||(i.corner=new h.Corner(a),i.corner.fixed=d),m.corner=new h.Corner(i.corner.string());return i.corner.string()!=="centercenter"},detectColours:function(c){var d,e,f,g=k.tip.css("cssText",""),h=c||i.corner,m=h[h.precedance],p="border-"+m+"-color",q="border"+m.charAt(0)+m.substr(1)+"Color",s=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,t="background-color",u="transparent",v=" !important",w=a(document.body).css("color"),x=b.elements.content.css("color"),y=k.titlebar&&(h.y===
"top"||h.y==="center"&&g.position().top+n.height/2+j.offset<k.titlebar.outerHeight(1)),z=y?k.titlebar:k.content;l.addClass(r),o.fill=e=g.css(t),o.border=f=g[0].style[q]||g.css(p)||l.css(p);if(!e||s.test(e))o.fill=z.css(t)||u,s.test(o.fill)&&(o.fill=l.css(t)||e);if(!f||s.test(f)||f===w)o.border=z.css(p)||u,s.test(o.border)&&(o.border=f);a("*",g).add(g).css("cssText",t+":"+u+v+";border:0"+v+";"),l.removeClass(r)},create:function(){var b=n.width,c=n.height,d;k.tip&&k.tip.remove(),k.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:b,
height:c}).prependTo(l),s?a("<canvas />").appendTo(k.tip)[0].getContext("2d").save():(d='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',k.tip.html(d+d),a("*",k.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(b,c){var g=k.tip,l=g.children(),q=n.width,r=n.height,t="px solid ",v="px dashed transparent",x=j.mimic,y=Math.round,z,A,C,D,E;b||(b=m.corner||i.corner),x===e?x=b:(x=new h.Corner(x),x.precedance=
b.precedance,x.x==="inherit"?x.x=b.x:x.y==="inherit"?x.y=b.y:x.x===x.y&&(x[b.precedance]=b[b.precedance])),z=x.precedance,i.detectColours(b),o.border!=="transparent"&&o.border!=="#123456"?(p=u(b,f,d),j.border===0&&p>0&&(o.fill=o.border),i.border=p=j.border!==d?j.border:p):i.border=p=0,C=B(x,q,r),i.size=E=w(b),g.css(E),b.precedance==="y"?D=[y(x.x==="left"?p:x.x==="right"?E.width-q-p:(E.width-q)/2),y(x.y==="top"?E.height-r:0)]:D=[y(x.x==="left"?E.width-q:0),y(x.y==="top"?p:x.y==="bottom"?E.height-r-
p:(E.height-r)/2)],s?(l.attr(E),A=l[0].getContext("2d"),A.restore(),A.save(),A.clearRect(0,0,3E3,3E3),A.translate(D[0],D[1]),A.beginPath(),A.moveTo(C[0][0],C[0][1]),A.lineTo(C[1][0],C[1][1]),A.lineTo(C[2][0],C[2][1]),A.closePath(),A.fillStyle=o.fill,A.strokeStyle=o.border,A.lineWidth=p*2,A.lineJoin="miter",A.miterLimit=100,p&&A.stroke(),A.fill()):(C="m"+C[0][0]+","+C[0][1]+" l"+C[1][0]+","+C[1][1]+" "+C[2][0]+","+C[2][1]+" xe",D[2]=p&&/^(r|b)/i.test(b.string())?parseFloat(a.browser.version,10)===
8?2:1:0,l.css({antialias:""+(x.string().indexOf("center")>-1),left:D[0]-D[2]*Number(z==="x"),top:D[1]-D[2]*Number(z==="y"),width:q+p,height:r+p}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:q+p+" "+(r+p),path:C,fillcolor:o.fill,filled:!!b,stroked:!b}).css({display:p||b?"block":"none"}),!b&&c.html()===""&&c.html('<vml:stroke weight="'+p*2+'px" color="'+o.border+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')})),c!==e&&i.position(b)},
position:function(b){var c=k.tip,f={},g=Math.max(0,j.offset),h,l,m;if(j.corner===e||!c)return e;b=b||i.corner,h=b.precedance,l=w(b),m=[b.x,b.y],h==="x"&&m.reverse(),a.each(m,function(a,c){var e,i;c==="center"?(e=h==="y"?"left":"top",f[e]="50%",f["margin-"+e]=-Math.round(l[h==="y"?"width":"height"]/2)+g):(e=u(b,c,d),i=v(b),f[c]=a?p?u(b,c):0:g+(i>e?i:0))}),f[b[h]]-=l[h==="x"?"width":"height"],c.css({top:"",bottom:"",left:"",right:"",margin:""}).css(f);return f},destroy:function(){k.tip&&k.tip.remove(),
l.unbind(q)}}),i.init()}function B(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft;return f[a.string()]}function A(b){var c=this,f=b.elements.tooltip,g=b.options.content.ajax,
h=".qtip-ajax",i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,j=d;b.checks.ajax={"^content.ajax":function(a,b,d){b==="ajax"&&(g=d),b==="once"?c.init():g&&g.url?c.load():f.unbind(h)}},a.extend(c,{init:function(){g&&g.url&&f.unbind(h)[g.once?"one":"bind"]("tooltipshow"+h,c.load);return c},load:function(d,f){function p(a,c,d){a.status!==0&&b.set("content.text",c+": "+d)}function o(c){k&&(c=a("<div/>").append(c.replace(i,"")).find(k)),b.set("content.text",c)}function n(){l&&(b.show(d.originalEvent),
f=e),a.isFunction(g.complete)&&g.complete.apply(this,arguments)}var h=g.url.indexOf(" "),j=g.url,k,l=g.once&&!g.loading&&f;if(l)try{d.preventDefault()}catch(m){}else if(d&&d.isDefaultPrevented())return c;h>-1&&(k=j.substr(h),j=j.substr(0,h)),a.ajax(a.extend({success:o,error:p,context:b},g,{url:j,complete:n}))}}),c.init()}function z(b,c){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(c.metadata):f,r=c.metadata.type==="html5"&&q?q[c.metadata.name]:f,s=n.data(c.metadata.name||
"qtipopts");try{s=typeof s==="string"?(new Function("return "+s))():s}catch(t){w("Unable to parse HTML5 attribute data: "+s)}l=a.extend(d,{},g.defaults,c,typeof s==="object"?x(s):f,x(r||q)),j=l.position,l.id=b;if("boolean"===typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr!==e&&k)l.content.text=k;else{w("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n);return e}}j.container.length||(j.container=o),j.target===e&&(j.target=p),l.show.target===e&&(l.show.target=
p),l.show.solo===d&&(l.show.solo=o),l.hide.target===e&&(l.hide.target=p),l.position.viewport===d&&(l.position.viewport=j.container),j.at=new h.Corner(j.at),j.my=new h.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===e)return e;l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(u,m),i=new y(n,l,b,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+b,function(){i.destroy()});return i}function y(s,t,w,y){function R(){var c=[t.show.target[0],
t.hide.target[0],z.rendered&&G.tooltip[0],t.position.container[0],t.position.viewport[0],b,document];z.rendered?a([]).pushStack(a.grep(c,function(a){return typeof a==="object"})).unbind(F):t.show.target.unbind(F+"-create")}function Q(){function p(a){E.is(":visible")&&z.reposition(a)}function o(a){if(E.hasClass(m))return e;clearTimeout(z.timers.inactive),z.timers.inactive=setTimeout(function(){z.hide(a)},t.hide.inactive)}function l(b){if(E.hasClass(m)||C||D)return e;var d=a(b.relatedTarget||b.target),
g=d.closest(n)[0]===E[0],h=d[0]===f.show[0];clearTimeout(z.timers.show),clearTimeout(z.timers.hide);if(c.target==="mouse"&&g||t.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(g||h))try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}else t.hide.delay>0?z.timers.hide=setTimeout(function(){z.hide(b)},t.hide.delay):z.hide(b)}function k(a){if(E.hasClass(m))return e;clearTimeout(z.timers.show),clearTimeout(z.timers.hide);var b=function(){z.toggle(d,a)};t.show.delay>0?z.timers.show=setTimeout(b,
t.show.delay):b()}var c=t.position,f={show:t.show.target,hide:t.hide.target,viewport:a(c.viewport),document:a(document),body:a(document.body),window:a(b)},h={show:a.trim(""+t.show.event).split(" "),hide:a.trim(""+t.hide.event).split(" ")},j=a.browser.msie&&parseInt(a.browser.version,10)===6;E.bind("mouseenter"+F+" mouseleave"+F,function(a){var b=a.type==="mouseenter";b&&z.focus(a),E.toggleClass(q,b)}),t.hide.fixed&&(f.hide=f.hide.add(E),E.bind("mouseover"+F,function(){E.hasClass(m)||clearTimeout(z.timers.hide)})),
/mouse(out|leave)/i.test(t.hide.event)?t.hide.leave==="window"&&f.window.bind("mouseout"+F+" blur"+F,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&z.hide(a)}):/mouse(over|enter)/i.test(t.show.event)&&f.hide.bind("mouseleave"+F,function(a){clearTimeout(z.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&f.body.bind("mousedown"+F,function(b){var c=a(b.target),d=!E.hasClass(m)&&E.is(":visible");c[0]!==E[0]&&c.parents(n).length===0&&!c.closest(s).length&&!c.attr("disabled")&&z.hide(b)}),
"number"===typeof t.hide.inactive&&(f.show.bind("qtip-"+w+"-inactive",o),a.each(g.inactiveEvents,function(a,b){f.hide.add(G.tooltip).bind(b+F+"-inactive",o)})),a.each(h.hide,function(b,c){var d=a.inArray(c,h.show),e=a(f.hide);d>-1&&e.add(f.show).length===e.length||c==="unfocus"?(f.show.bind(c+F,function(a){E.is(":visible")?l(a):k(a)}),delete h.show[d]):f.hide.bind(c+F,l)}),a.each(h.show,function(a,b){f.show.bind(b+F,k)}),"number"===typeof t.hide.distance&&f.show.add(E).bind("mousemove"+F,function(a){var b=
H.origin||{},c=t.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&z.hide(a)}),c.target==="mouse"&&(f.show.bind("mousemove"+F,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),c.adjust.mouse&&(t.hide.event&&(E.bind("mouseleave"+F,function(a){(a.relatedTarget||a.target)!==f.show[0]&&z.hide(a)}),G.target.bind("mouseenter"+F+" mouseleave"+F,function(a){H.onTarget=a.type==="mouseenter"})),f.document.bind("mousemove"+F,function(a){H.onTarget&&!E.hasClass(m)&&E.is(":visible")&&
z.reposition(a||i)}))),(c.adjust.resize||f.viewport.length)&&(a.event.special.resize?f.viewport:f.window).bind("resize"+F,p),(f.viewport.length||j&&E.css("position")==="fixed")&&f.viewport.bind("scroll"+F,p)}function P(b,d){function g(b){function i(c){c&&(delete h[c.src],clearTimeout(z.timers.img[c.src]),a(c).unbind(F)),a.isEmptyObject(h)&&(z.redraw(),d!==e&&z.reposition(H.event),b())}var g,h={};if((g=f.find("img:not([height]):not([width])")).length===0)return i();g.each(function(b,d){if(h[d.src]===
c){var e=0,f=3;(function g(){if(d.height||d.width||e>f)return i(d);e+=1,z.timers.img[d.src]=setTimeout(g,700)})(),a(d).bind("error"+F+" load"+F,function(){i(this)}),h[d.src]=d}})}var f=G.content;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),z.rendered<0?E.queue("fx",g):(D=0,g(a.noop));return z}function O(b,c){var d=G.title;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z));if(b===
e)return K(e);b.jquery&&b.length>0?d.empty().append(b.css({display:"block"})):d.html(b),z.redraw(),c!==e&&z.rendered&&E.is(":visible")&&z.reposition(H.event)}function N(a){var b=G.button,c=G.title;if(!z.rendered)return e;a?(c||M(),L()):b.remove()}function M(){var b=B+"-title";G.titlebar&&K(),G.titlebar=a("<div />",{"class":k+"-titlebar "+(t.style.widget?"ui-widget-header":"")}).append(G.title=a("<div />",{id:b,"class":k+"-title","aria-atomic":d})).insertBefore(G.content).delegate(".ui-tooltip-close",
"mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),t.content.title.button?L():z.rendered&&z.redraw()}function L(){var b=t.content.title.button,c=typeof b==="string",d=c?b:"Close tooltip";G.button&&G.button.remove(),b.jquery?G.button=b:G.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+
(t.style.widget?"":k+"-icon"),title:d,"aria-label":d}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),G.button.appendTo(G.titlebar).attr("role","button").click(function(a){E.hasClass(m)||z.hide(a);return e}),z.redraw()}function K(a){G.title&&(G.titlebar.remove(),G.titlebar=G.title=G.button=f,a!==e&&z.reposition())}function J(){var a=t.style.widget;E.toggleClass(l,a).toggleClass(o,t.style["default"]&&!a),G.content.toggleClass(l+"-content",a),G.titlebar&&G.titlebar.toggleClass(l+
"-header",a),G.button&&G.button.toggleClass(k+"-icon",!a)}function I(a){var b=0,c,d=t,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||t,e.pop()]}var z=this,A=document.body,B=k+"-"+w,C=0,D=0,E=a(),F=".qtip-"+w,G,H;z.id=w,z.rendered=e,z.elements=G={target:s},z.timers={img:{}},z.options=t,z.checks={},z.plugins={},z.cache=H={event:{},target:a(),disabled:e,attr:y,onTarget:e},z.checks.builtin={"^id$":function(b,c,f){var h=f===d?g.nextid:f,i=k+"-"+h;h!==e&&h.length>0&&!a("#"+i).length&&(E[0].id=
i,G.content[0].id=i+"-content",G.title[0].id=i+"-title")},"^content.text$":function(a,b,c){P(c)},"^content.title.text$":function(a,b,c){if(!c)return K();!G.title&&c&&M(),O(c)},"^content.title.button$":function(a,b,c){N(c)},"^position.(my|at)$":function(a,b,c){"string"===typeof c&&(a[b]=new h.Corner(c))},"^position.container$":function(a,b,c){z.rendered&&E.appendTo(c)},"^show.ready$":function(){z.rendered?z.toggle(d):z.render(1)},"^style.classes$":function(a,b,c){E.attr("class",k+" qtip ui-helper-reset "+
c)},"^style.widget|content.title":J,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){E[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=t.position;E.attr("tracking",a.target==="mouse"&&a.adjust.mouse),R(),Q()}},a.extend(z,{render:function(b){if(z.rendered)return z;var c=t.content.text,f=t.content.title.text,g=t.position,i=a.Event("tooltiprender");a.attr(s[0],"aria-describedby",B),E=
G.tooltip=a("<div/>",{id:B,"class":k+" qtip ui-helper-reset "+o+" "+t.style.classes+" "+k+"-pos-"+t.position.my.abbrev(),width:t.style.width||"",height:t.style.height||"",tracking:g.target==="mouse"&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":e,"aria-describedby":B+"-content","aria-hidden":d}).toggleClass(m,H.disabled).data("qtip",z).appendTo(t.position.container).append(G.content=a("<div />",{"class":k+"-content",id:B+"-content","aria-atomic":d})),z.rendered=-1,C=D=1,f&&(M(),
a.isFunction(f)||O(f,e)),a.isFunction(c)||P(c,e),z.rendered=d,J(),a.each(t.events,function(b,c){a.isFunction(c)&&E.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(h,function(){this.initialize==="render"&&this(z)}),Q(),E.queue("fx",function(a){i.originalEvent=H.event,E.trigger(i,[z]),C=D=0,z.redraw(),(t.show.ready||b)&&z.toggle(d,H.event,e),a()});return z},get:function(a){var b,c;switch(a.toLowerCase()){case "dimensions":b={height:E.outerHeight(),width:E.outerWidth()};break;case "offset":b=
h.offset(E,t.position.container);break;default:c=I(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(b,c){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(z,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=e,j=e,k=z.checks,l;"string"===typeof b?(l=b,b={},b[l]=c):b=a.extend(d,{},b),a.each(b,function(c,d){var e=I(c.toLowerCase()),f;f=e[0][e[1]],
e[0][e[1]]="object"===typeof d&&d.nodeType?a(d):d,b[c]=[e[0],e[1],d,f],i=g.test(c)||i,j=h.test(c)||j}),x(t),C=D=1,a.each(b,m),C=D=0,E.is(":visible")&&z.rendered&&(i&&z.reposition(t.position.target==="mouse"?f:H.event),j&&z.redraw());return z},toggle:function(b,c){function q(){b?(a.browser.msie&&E[0].style.removeAttribute("filter"),E.css("overflow",""),"string"===typeof h.autofocus&&a(h.autofocus,E).focus(),p=a.Event("tooltipvisible"),p.originalEvent=c?H.event:f,E.trigger(p,[z]),h.target.trigger("qtip-"+
w+"-inactive")):E.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!z.rendered)return b?z.render(1):z;var g=b?"show":"hide",h=t[g],j=E.is(":visible"),k=!c||t[g].target.length<2||H.target[0]===c.target,l=t.position,m=t.content,o,p;(typeof b).search("boolean|number")&&(b=!j);if(!E.is(":animated")&&j===b&&k)return z;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(H.event.type)&&c.target===t.show.target[0]&&E.has(c.relatedTarget).length)return z;H.event=a.extend({},c)}p=a.Event("tooltip"+
g),p.originalEvent=c?H.event:f,E.trigger(p,[z,90]);if(p.isDefaultPrevented())return z;a.attr(E[0],"aria-hidden",!b),b?(H.origin=a.extend({},i),z.focus(c),a.isFunction(m.text)&&P(m.text,e),a.isFunction(m.title.text)&&O(m.title.text,e),!v&&l.target==="mouse"&&l.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),v=d),z.reposition(c,arguments[2]),(p.solo=!!h.solo)&&a(n,h.solo).not(E).qtip("hide",p)):(clearTimeout(z.timers.show),delete H.origin,
v&&!a(n+'[tracking="true"]:visible',h.solo).not(E).length&&(a(document).unbind("mousemove.qtip"),v=e),z.blur(c)),k&&E.stop(0,1),h.effect===e?(E[g](),q.call(E)):a.isFunction(h.effect)?(h.effect.call(E,z),E.queue("fx",function(a){q(),a()})):E.fadeTo(90,b?1:0,q),b&&h.target.trigger("qtip-"+w+"-inactive");return z},show:function(a){return z.toggle(d,a)},hide:function(a){return z.toggle(e,a)},focus:function(b){if(!z.rendered)return z;var c=a(n),d=parseInt(E[0].style.zIndex,10),e=g.zindex+c.length,f=a.extend({},
b),h,i;E.hasClass(p)||(i=a.Event("tooltipfocus"),i.originalEvent=f,E.trigger(i,[z,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+p).qtip("blur",f)),E.addClass(p)[0].style.zIndex=e));return z},blur:function(b){var c=a.extend({},b),d;E.removeClass(p),d=a.Event("tooltipblur"),d.originalEvent=c,E.trigger(d,[z]);return z},reposition:function(c,d){if(!z.rendered||C)return z;C=1;var f=t.position.target,g=t.position,j=g.my,
l=g.at,m=g.adjust,n=m.method.split(" "),o=E.outerWidth(),p=E.outerHeight(),q=0,r=0,s=a.Event("tooltipmove"),u=E.css("position")==="fixed",v=g.viewport,w={left:0,top:0},x=g.container,y=e,B=z.plugins.tip,D={horizontal:n[0],vertical:n[1]=n[1]||n[0],enabled:v.jquery&&f[0]!==b&&f[0]!==A&&m.method!=="none",left:function(a){var b=D.horizontal==="shift",c=-x.offset.left+v.offset.left+v.scrollLeft,d=j.x==="left"?o:j.x==="right"?-o:-o/2,e=l.x==="left"?q:l.x==="right"?-q:-q/2,f=B&&B.size?B.size.width||0:0,g=
B&&B.corner&&B.corner.precedance==="x"&&!b?f:0,h=c-a+g,i=a+o-v.width-c+g,k=d-(j.precedance==="x"||j.x===j.y?e:0)-(l.x==="center"?q/2:0),n=j.x==="center";b?(g=B&&B.corner&&B.corner.precedance==="y"?f:0,k=(j.x==="left"?1:-1)*d-g,w.left+=h>0?h:i>0?-i:0,w.left=Math.max(-x.offset.left+v.offset.left+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.left+v.offset.left+v.width,a+k),w.left))):(h>0&&(j.x!=="left"||i>0)?w.left-=k:i>0&&(j.x!=="right"||h>0)&&(w.left-=n?-k:k),w.left!==a&&n&&
(w.left-=m.x),w.left<c&&-w.left>i&&(w.left=a));return w.left-a},top:function(a){var b=D.vertical==="shift",c=-x.offset.top+v.offset.top+v.scrollTop,d=j.y==="top"?p:j.y==="bottom"?-p:-p/2,e=l.y==="top"?r:l.y==="bottom"?-r:-r/2,f=B&&B.size?B.size.height||0:0,g=B&&B.corner&&B.corner.precedance==="y"&&!b?f:0,h=c-a+g,i=a+p-v.height-c+g,k=d-(j.precedance==="y"||j.x===j.y?e:0)-(l.y==="center"?r/2:0),n=j.y==="center";b?(g=B&&B.corner&&B.corner.precedance==="x"?f:0,k=(j.y==="top"?1:-1)*d-g,w.top+=h>0?h:i>
0?-i:0,w.top=Math.max(-x.offset.top+v.offset.top+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.top+v.offset.top+v.height,a+k),w.top))):(h>0&&(j.y!=="top"||i>0)?w.top-=k:i>0&&(j.y!=="bottom"||h>0)&&(w.top-=n?-k:k),w.top!==a&&n&&(w.top-=m.y),w.top<0&&-w.top>i&&(w.top=a));return w.top-a}},F;if(a.isArray(f)&&f.length===2)l={x:"left",y:"top"},w={left:f[0],top:f[1]};else if(f==="mouse"&&(c&&c.pageX||H.event.pageX))l={x:"left",y:"top"},c=(c&&(c.type==="resize"||c.type==="scroll")?
H.event:c&&c.pageX&&c.type==="mousemove"?c:i&&i.pageX&&(m.mouse||!c||!c.pageX)?{pageX:i.pageX,pageY:i.pageY}:!m.mouse&&H.origin&&H.origin.pageX&&t.show.distance?H.origin:c)||c||H.event||i||{},w={top:c.pageY,left:c.pageX};else{f==="event"?c&&c.target&&c.type!=="scroll"&&c.type!=="resize"?f=H.target=a(c.target):f=H.target:f=H.target=a(f.jquery?f:G.target),f=a(f).eq(0);if(f.length===0)return z;f[0]===document||f[0]===b?(q=h.iOS?b.innerWidth:f.width(),r=h.iOS?b.innerHeight:f.height(),f[0]===b&&(w={top:(v||
f).scrollTop(),left:(v||f).scrollLeft()})):f.is("area")&&h.imagemap?w=h.imagemap(f,l,D.enabled?n:e):f[0].namespaceURI==="http://www.w3.org/2000/svg"&&h.svg?w=h.svg(f,l):(q=f.outerWidth(),r=f.outerHeight(),w=h.offset(f,x)),w.offset&&(q=w.width,r=w.height,y=w.flipoffset,w=w.offset);if(h.iOS<4.1&&h.iOS>3.1||h.iOS==4.3||!h.iOS&&u)F=a(b),w.left-=F.scrollLeft(),w.top-=F.scrollTop();w.left+=l.x==="right"?q:l.x==="center"?q/2:0,w.top+=l.y==="bottom"?r:l.y==="center"?r/2:0}w.left+=m.x+(j.x==="right"?-o:j.x===
"center"?-o/2:0),w.top+=m.y+(j.y==="bottom"?-p:j.y==="center"?-p/2:0),D.enabled?(v={elem:v,height:v[(v[0]===b?"h":"outerH")+"eight"](),width:v[(v[0]===b?"w":"outerW")+"idth"](),scrollLeft:u?0:v.scrollLeft(),scrollTop:u?0:v.scrollTop(),offset:v.offset()||{left:0,top:0}},x={elem:x,scrollLeft:x.scrollLeft(),scrollTop:x.scrollTop(),offset:x.offset()||{left:0,top:0}},w.adjusted={left:D.horizontal!=="none"?D.left(w.left):0,top:D.vertical!=="none"?D.top(w.top):0},w.adjusted.left+w.adjusted.top&&E.attr("class",
E[0].className.replace(/ui-tooltip-pos-\w+/i,k+"-pos-"+j.abbrev())),y&&w.adjusted.left&&(w.left+=y.left),y&&w.adjusted.top&&(w.top+=y.top)):w.adjusted={left:0,top:0},s.originalEvent=a.extend({},c),E.trigger(s,[z,w,v.elem||v]);if(s.isDefaultPrevented())return z;delete w.adjusted,d===e||isNaN(w.left)||isNaN(w.top)||f==="mouse"||!a.isFunction(g.effect)?E.css(w):a.isFunction(g.effect)&&(g.effect.call(E,z,a.extend({},w)),E.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),
b()})),C=0;return z},redraw:function(){if(z.rendered<1||D)return z;var a=t.position.container,b,c,d,e;D=1,t.style.height&&E.css("height",t.style.height),t.style.width?E.css("width",t.style.width):(E.css("width","").addClass(r),c=E.width()+1,d=E.css("max-width")||"",e=E.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,E.css("width",Math.round(c)).removeClass(r)),D=0;
return z},disable:function(b){"boolean"!==typeof b&&(b=!E.hasClass(m)&&!H.disabled),z.rendered?(E.toggleClass(m,b),a.attr(E[0],"aria-disabled",b)):H.disabled=!!b;return z},enable:function(){return z.disable(e)},destroy:function(){var b=s[0],c=a.attr(b,u),d=s.data("qtip");z.rendered&&(E.remove(),a.each(z.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(z.timers.show),clearTimeout(z.timers.hide),R();if(!d||z===d)a.removeData(b,"qtip"),t.suppress&&c&&(a.attr(b,"title",c),s.removeAttr(u)),
s.removeAttr("aria-describedby");s.unbind(".qtip-"+w),delete j[z.id];return s}})}function x(b){var c;if(!b||"object"!==typeof b)return e;if(b.metadata===f||"object"!==typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===f||"object"!==typeof b.content||b.content.jquery)b.content={text:b.content};c=b.content.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.text=e);if("title"in b.content){if(b.content.title===f||"object"!==typeof b.content.title)b.content.title=
{text:b.content.title};c=b.content.title.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.title.text=e)}}if("position"in b)if(b.position===f||"object"!==typeof b.position)b.position={my:b.position,at:b.position};if("show"in b)if(b.show===f||"object"!==typeof b.show)b.show.jquery?b.show={target:b.show}:b.show={event:b.show};if("hide"in b)if(b.hide===f||"object"!==typeof b.hide)b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide};if("style"in b)if(b.style===
f||"object"!==typeof b.style)b.style={classes:b.style};a.each(h,function(){this.sanitize&&this.sanitize(b)});return b}function w(){w.history=w.history||[],w.history.push(arguments);if("object"===typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]==="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}"use strict";var d=!0,e=!1,f=null,g,h,i,j={},k="ui-tooltip",l="ui-widget",m="ui-state-disabled",n="div.qtip."+k,o=k+"-default",
p=k+"-focus",q=k+"-hover",r=k+"-fluid",s="-31000px",t="_replacedByqTip",u="oldtitle",v;g=a.fn.qtip=function(b,h,i){var j=(""+b).toLowerCase(),k=f,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):f;if(!arguments.length&&n||j==="api")return n;if("string"===typeof b){this.each(function(){var b=a.data(this,"qtip");if(!b)return d;m&&m.timeStamp&&(b.cache.event=m);if(j!=="option"&&j!=="options"||!h)b[j]&&b[j].apply(b[j],l);else if(a.isPlainObject(h)||i!==c)b.set(h,i);else{k=
b.get(h);return e}});return k!==f?k:this}if("object"===typeof b||!arguments.length){n=x(a.extend(d,{},b));return g.bind.call(this,n,m)}},g.bind=function(b,f){return this.each(function(k){function r(b){function d(){p.render(typeof b==="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return e;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[c],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):
d()}var l,m,n,o,p,q;q=a.isArray(b.id)?b.id[k]:b.id,q=!q||q===e||q.length<1||j[q]?g.nextid++:j[q]=q,o=".qtip-"+q+"-create",p=z.call(this,q,b);if(p===e)return d;l=p.options,a.each(h,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+
o,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"},p.cache.onTarget=d}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(f)})},h=g.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance===
"y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(a,b){function i(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}var c=a.offset(),d=document.body,e=b,f,g,h;if(e){do{e.css("position")!=="static"&&(g=e.position(),c.left-=g.left+(parseInt(e.css("borderLeftWidth"),
10)||0)+(parseInt(e.css("marginLeft"),10)||0),c.top-=g.top+(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0),!f&&(h=e.css("overflow"))!=="hidden"&&h!=="visible"&&(f=e));if(e[0]===d)break}while(e=e.offsetParent());f&&f[0]!==d&&i(f,1)}return c},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||e,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=
a.data(d,"qtip");if(b===e&&f&&"object"===typeof f&&f.options.suppress){if(arguments.length<2)return a.attr(d,u);f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c);return this.attr(u,c)}}return a.fn["attr"+t].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+t].apply(this,arguments);b||e.filter("["+u+"]").attr("title",function(){return a.attr(this,u)}).removeAttr(u);return e},remove:a.ui?f:function(b,c){a.ui||a(this).each(function(){c||(!b||a.filter(b,
[this]).length)&&a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})})}}},a.each(h.fn,function(b,c){if(!c||a.fn[b+t])return d;var e=a.fn[b+t]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||e.apply(this,arguments)}}),g.version="nightly",g.nextid=0,g.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),g.zindex=15E3,g.defaults={prerender:e,id:e,overwrite:d,suppress:d,content:{text:d,attr:"title",title:{text:e,button:e}},position:{my:"top left",
at:"bottom right",target:e,container:e,viewport:e,adjust:{x:0,y:0,mouse:d,resize:d,method:"flip flip"},effect:function(b,c,d){a(this).animate(c,{duration:200,queue:e})}},show:{target:e,event:"mouseenter",effect:d,delay:90,solo:e,ready:e,autofocus:e},hide:{target:e,event:"mouseleave",effect:d,delay:0,fixed:e,inactive:e,leave:"window",distance:e},style:{classes:"",widget:e,width:e,height:e,"default":d},events:{render:f,move:f,show:f,hide:f,toggle:f,visible:f,focus:f,blur:f}},h.ajax=function(a){var b=
a.plugins.ajax;return"object"===typeof b?b:a.plugins.ajax=new A(a)},h.ajax.initialize="render",h.ajax.sanitize=function(a){var b=a.content,c;b&&"ajax"in b&&(c=b.ajax,typeof c!=="object"&&(c=a.content.ajax={url:c}),"boolean"!==typeof c.once&&c.once&&(c.once=!!c.once))},a.extend(d,g.defaults,{content:{ajax:{loading:d,once:d}}}),h.imagemap=function(b,c,d){function n(a,b,c){var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;while(i>0&&j>0&&e>0&&f>0){i=Math.floor(i/2),j=Math.floor(j/2),c.x==="left"?e=i:c.x===
"right"?e=a.width-i:e+=Math.floor(i/2),c.y==="top"?f=j:c.y==="bottom"?f=a.height-j:f+=Math.floor(j/2),d=b.length;while(d--){if(b.length<2)break;g=b[d][0]-a.offset.left,h=b[d][1]-a.offset.top,(c.x==="left"&&g>=e||c.x==="right"&&g<=e||c.x==="center"&&(g<e||g>a.width-e)||c.y==="top"&&h>=f||c.y==="bottom"&&h<=f||c.y==="center"&&(h<f||h>a.height-f))&&b.splice(d,1)}}return{left:b[0][0],top:b[0][1]}}b.jquery||(b=a(b));var e=(b[0].shape||b.attr("shape")).toLowerCase(),f=(b[0].coords||b.attr("coords")).split(","),
g=[],h=a('img[usemap="#'+b.parent("map").attr("name")+'"]'),i=h.offset(),j={width:0,height:0,offset:{top:1E10,right:0,bottom:0,left:1E10}},k=0,l=0,m;i.left+=Math.ceil((h.outerWidth()-h.width())/2),i.top+=Math.ceil((h.outerHeight()-h.height())/2);if(e==="poly"){k=f.length;while(k--)l=[parseInt(f[--k],10),parseInt(f[k+1],10)],l[0]>j.offset.right&&(j.offset.right=l[0]),l[0]<j.offset.left&&(j.offset.left=l[0]),l[1]>j.offset.bottom&&(j.offset.bottom=l[1]),l[1]<j.offset.top&&(j.offset.top=l[1]),g.push(l)}else g=
a.map(f,function(a){return parseInt(a,10)});switch(e){case "rect":j={width:Math.abs(g[2]-g[0]),height:Math.abs(g[3]-g[1]),offset:{left:Math.min(g[0],g[2]),top:Math.min(g[1],g[3])}};break;case "circle":j={width:g[2]+2,height:g[2]+2,offset:{left:g[0],top:g[1]}};break;case "poly":a.extend(j,{width:Math.abs(j.offset.right-j.offset.left),height:Math.abs(j.offset.bottom-j.offset.top)}),c.string()==="centercenter"?j.offset={left:j.offset.left+j.width/2,top:j.offset.top+j.height/2}:(j.offset=n(j,g.slice(),
c),d&&(d[0]==="flip"||d[1]==="flip")&&(j.flipoffset=n(j,g.slice(),{x:c.x==="left"?"right":c.x==="right"?"left":"center",y:c.y==="top"?"bottom":c.y==="bottom"?"top":"center"}),j.flipoffset.left-=j.offset.left,j.flipoffset.top-=j.offset.top)),j.width=j.height=0}j.offset.left+=i.left,j.offset.top+=i.top;return j},h.tip=function(a){var b=a.plugins.tip;return"object"===typeof b?b:a.plugins.tip=new C(a)},h.tip.initialize="render",h.tip.sanitize=function(a){var b=a.style,c;b&&"tip"in b&&(c=a.style.tip,typeof c!==
"object"&&(a.style.tip={corner:c}),/string|boolean/i.test(typeof c.corner)||(c.corner=d),typeof c.width!=="number"&&delete c.width,typeof c.height!=="number"&&delete c.height,typeof c.border!=="number"&&c.border!==d&&delete c.border,typeof c.offset!=="number"&&delete c.offset)},a.extend(d,g.defaults,{style:{tip:{corner:d,mimic:e,width:6,height:6,border:d,offset:0}}}),h.svg=function(b,c){var d=a(document),e=b[0],f={width:0,height:0,offset:{top:1E10,left:1E10}},g,h,i,j,k;if(e.getBBox&&e.parentNode){g=
e.getBBox(),h=e.getScreenCTM(),i=e.farthestViewportElement||e;if(!i.createSVGPoint)return f;j=i.createSVGPoint(),j.x=g.x,j.y=g.y,k=j.matrixTransform(h),f.offset.left=k.x,f.offset.top=k.y,j.x+=g.width,j.y+=g.height,k=j.matrixTransform(h),f.width=k.x-f.offset.left,f.height=k.y-f.offset.top,f.offset.left+=d.scrollLeft(),f.offset.top+=d.scrollTop()}return f},h.modal=function(a){var b=a.plugins.modal;return"object"===typeof b?b:a.plugins.modal=new D(a)},h.modal.initialize="render",h.modal.sanitize=function(a){a.show&&
(typeof a.show.modal!=="object"?a.show.modal={on:!!a.show.modal}:typeof a.show.modal.on==="undefined"&&(a.show.modal.on=d))},h.modal.zindex=g.zindex+1E3,a.extend(d,g.defaults,{show:{modal:{on:e,effect:d,blur:d,escape:d}}}),h.bgiframe=function(b){var c=a.browser,d=b.plugins.bgiframe;if(a("select, object").length<1||!c.msie||(""+c.version).charAt(0)!=="6")return e;return"object"===typeof d?d:b.plugins.bgiframe=new E(b)},h.bgiframe.initialize="render"})(jQuery,window);(function(){if(jQuery&&jQuery.jstree)return;var is_ie6=false,is_ie7=false,is_ff2=false;(function($){$.vakata={};$.vakata.css={get_css:function(rule_name,delete_flag,sheet){rule_name=rule_name.toLowerCase();var css_rules=sheet.cssRules||sheet.rules,j=0;do{if(css_rules.length&&j>css_rules.length+5)return false;if(css_rules[j].selectorText&&css_rules[j].selectorText.toLowerCase()==rule_name)if(delete_flag===true){if(sheet.removeRule)sheet.removeRule(j);if(sheet.deleteRule)sheet.deleteRule(j);return true}else return css_rules[j]}while(css_rules[++j]);
return false},add_css:function(rule_name,sheet){if($.jstree.css.get_css(rule_name,false,sheet))return false;if(sheet.insertRule)sheet.insertRule(rule_name+" { }",0);else sheet.addRule(rule_name,null,0);return $.vakata.css.get_css(rule_name)},remove_css:function(rule_name,sheet){return $.vakata.css.get_css(rule_name,true,sheet)},add_sheet:function(opts){var tmp=false,is_new=true;if(opts.str){if(opts.title)tmp=$("style[id='"+opts.title+"-stylesheet']")[0];if(tmp)is_new=false;else{tmp=document.createElement("style");
tmp.setAttribute("type","text/css");if(opts.title)tmp.setAttribute("id",opts.title+"-stylesheet")}if(tmp.styleSheet)if(is_new){document.getElementsByTagName("head")[0].appendChild(tmp);tmp.styleSheet.cssText=opts.str}else tmp.styleSheet.cssText=tmp.styleSheet.cssText+" "+opts.str;else{tmp.appendChild(document.createTextNode(opts.str));document.getElementsByTagName("head")[0].appendChild(tmp)}return tmp.sheet||tmp.styleSheet}if(opts.url)if(document.createStyleSheet)try{tmp=document.createStyleSheet(opts.url)}catch(e){}else{tmp=
document.createElement("link");tmp.rel="stylesheet";tmp.type="text/css";tmp.media="all";tmp.href=opts.url;document.getElementsByTagName("head")[0].appendChild(tmp);return tmp.styleSheet}}};var instances=[],focused_instance=-1,plugins={},prepared_move={};$.fn.jstree=function(settings){var isMethodCall=typeof settings=="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;if(isMethodCall){if(settings.substring(0,1)=="_")return returnValue;this.each(function(){var instance=instances[$.data(this,
"jstree_instance_id")],methodValue=instance&&$.isFunction(instance[settings])?instance[settings].apply(instance,args):instance;if(typeof methodValue!=="undefined"&&(settings.indexOf("is_")===0||methodValue!==true&&methodValue!==false)){returnValue=methodValue;return false}})}else this.each(function(){var instance_id=$.data(this,"jstree_instance_id"),a=[],b=settings?$.extend({},true,settings):{},c=$(this),s=false,t=[];a=a.concat(args);if(c.data("jstree"))a.push(c.data("jstree"));b=a.length?$.extend.apply(null,
[true,b].concat(a)):b;if(typeof instance_id!=="undefined"&&instances[instance_id])instances[instance_id].destroy();instance_id=parseInt(instances.push({}),10)-1;$.data(this,"jstree_instance_id",instance_id);b.plugins=$.isArray(b.plugins)?b.plugins:$.jstree.defaults.plugins.slice();b.plugins.unshift("core");b.plugins=b.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");s=$.extend(true,{},$.jstree.defaults,b);s.plugins=b.plugins;$.each(plugins,
function(i,val){if($.inArray(i,s.plugins)===-1){s[i]=null;delete s[i]}else t.push(i)});s.plugins=t;instances[instance_id]=new $.jstree._instance(instance_id,$(this).addClass("jstree jstree-"+instance_id),s);$.each(instances[instance_id]._get_settings().plugins,function(i,val){instances[instance_id].data[val]={}});$.each(instances[instance_id]._get_settings().plugins,function(i,val){if(plugins[val])plugins[val].__init.apply(instances[instance_id])});setTimeout(function(){if(instances[instance_id])instances[instance_id].init()},
0)});return returnValue};$.jstree={defaults:{plugins:[]},_focused:function(){return instances[focused_instance]||null},_reference:function(needle){if(instances[needle])return instances[needle];var o=$(needle);if(!o.length&&typeof needle==="string")o=$("#"+needle);if(!o.length)return null;return instances[o.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(index,container,settings){this.data={core:{}};this.get_settings=function(){return $.extend(true,{},settings)};this._get_settings=
function(){return settings};this.get_index=function(){return index};this.get_container=function(){return container};this.get_container_ul=function(){return container.children("ul:eq(0)")};this._set_settings=function(s){settings=$.extend(true,{},settings,s)}},_fn:{},plugin:function(pname,pdata){pdata=$.extend({},{__init:$.noop,__destroy:$.noop,_fn:{},defaults:false},pdata);plugins[pname]=pdata;$.jstree.defaults[pname]=pdata.defaults;$.each(pdata._fn,function(i,val){val.plugin=pname;val.old=$.jstree._fn[i];
$.jstree._fn[i]=function(){var rslt,func=val,args=Array.prototype.slice.call(arguments),evnt=new $.Event("before.jstree"),rlbk=false;if(this.data.core.locked===true&&i!=="unlock"&&i!=="is_locked")return;do{if(func&&func.plugin&&$.inArray(func.plugin,this._get_settings().plugins)!==-1)break;func=func.old}while(func);if(!func)return;if(i.indexOf("_")===0)rslt=func.apply(this,args);else{rslt=this.get_container().triggerHandler(evnt,{"func":i,"inst":this,"args":args,"plugin":func.plugin});if(rslt===false)return;
if(typeof rslt!=="undefined")args=rslt;rslt=func.apply($.extend({},this,{__callback:function(data){this.get_container().triggerHandler(i+".jstree",{"inst":this,"args":args,"rslt":data,"rlbk":rlbk})},__rollback:function(){rlbk=this.get_rollback();return rlbk},__call_old:function(replace_arguments){return func.old.apply(this,replace_arguments?Array.prototype.slice.call(arguments,1):args)}}),args)}return rslt};$.jstree._fn[i].old=val.old;$.jstree._fn[i].plugin=pname})},rollback:function(rb){if(rb){if(!$.isArray(rb))rb=
[rb];$.each(rb,function(i,val){instances[val.i].set_rollback(val.h,val.d)})}}};$.jstree._fn=$.jstree._instance.prototype={};$(function(){var u=navigator.userAgent.toLowerCase(),v=(u.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],css_string=""+".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } "+".jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } "+".jstree-rtl li { margin-left:0; margin-right:18px; } "+
".jstree > ul > li { margin-left:0px; } "+".jstree-rtl > ul > li { margin-right:0px; } "+".jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } "+".jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } "+".jstree a:focus { outline: none; } "+".jstree a > ins { height:16px; width:16px; } "+".jstree a > .jstree-icon { margin-right:3px; } "+".jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } "+
"li.jstree-open > ul { display:block; } "+"li.jstree-closed > ul { display:none; } ";if(/msie/.test(u)&&parseInt(v,10)==6){is_ie6=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}css_string+=""+".jstree li { height:18px; margin-left:0; margin-right:0; } "+".jstree li li { margin-left:18px; } "+".jstree-rtl li li { margin-left:0px; margin-right:18px; } "+"li.jstree-open ul { display:block; } "+"li.jstree-closed ul { display:none !important; } "+".jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "+
".jstree li a ins { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(u)&&parseInt(v,10)==7){is_ie7=true;css_string+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(u)&&/mozilla/.test(u)&&parseFloat(v,10)<1.9){is_ff2=true;css_string+=""+".jstree ins { display:-moz-inline-box; } "+".jstree li { line-height:12px; } "+".jstree a { display:-moz-inline-box; } "+".jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}$.vakata.css.add_sheet({str:css_string,
title:"jstree"})});$.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl)this.get_container().addClass("jstree-rtl").css("direction",
"rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",$.proxy(function(event){var trgt=$(event.target);this.toggle_node(trgt)},this)).bind("mousedown.jstree",$.proxy(function(){this.set_focus()},
this)).bind("dblclick.jstree",function(event){var sel;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){sel=window.getSelection();try{sel.removeAllRanges();sel.collapse()}catch(err){}}});if(this._get_settings().core.notify_plugins)this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var o=this._get_node(data.rslt.obj),t=this;if(o===-1)o=this.get_container_ul();if(!o.length)return;o.find("li").each(function(){var th=$(this);if(th.data("jstree"))$.each(th.data("jstree"),
function(plugin,values){if(t.data[plugin]&&$.isFunction(t["_"+plugin+"_notify"]))t["_"+plugin+"_notify"].call(t,th,values)})})},this));if(this._get_settings().core.load_open)this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var o=this._get_node(data.rslt.obj),t=this;if(o===-1)o=this.get_container_ul();if(!o.length)return;o.find("li.jstree-open:not(:has(ul))").each(function(){t.load_node(this,$.noop,$.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();
this.reload_nodes()})},destroy:function(){var i,n=this.get_index(),s=this._get_settings(),_this=this;$.each(s.plugins,function(i,val){try{plugins[val].__destroy.apply(_this)}catch(err){}});this.__callback();if(this.is_focused())for(i in instances)if(instances.hasOwnProperty(i)&&i!=n){instances[i].set_focus();break}if(n===focused_instance)focused_instance=-1;this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",
function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});$(document).unbind(".jstree-"+n).undelegate(".jstree-"+n);instances[n]=null;delete instances[n]},_core_notify:function(n,data){if(data.opened)this.open_node(n,false,true)},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity",
"1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var _this=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){if(this.id)_this.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(_this.data.core.to_open)},save_loaded:function(){},reload_nodes:function(is_callback){var _this=
this,done=true,current=[],remaining=[];if(!is_callback){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=$.map($.makeArray(this.data.core.to_open),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.data.core.to_load=$.map($.makeArray(this.data.core.to_load),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});if(this.data.core.to_open.length)this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}if(this.data.core.to_load.length){$.each(this.data.core.to_load,function(i,val){if(val=="#")return true;if($(val).length)current.push(val);else remaining.push(val)});if(current.length){this.data.core.to_load=remaining;$.each(current,function(i,val){if(!_this._is_loaded(val)){_this.load_node(val,function(){_this.reload_nodes(true)},function(){_this.reload_nodes(true)});
done=false}})}}if(this.data.core.to_open.length)$.each(this.data.core.to_open,function(i,val){_this.open_node(val,false,true)});if(done){if(this.data.core.reopen)clearTimeout(this.data.core.reopen);this.data.core.reopen=setTimeout(function(){_this.__callback({},_this)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var _this=this;if(this.data.core.to_open.length)$.each(this.data.core.to_open,function(i,val){_this.open_node(val,false,true)});this.__callback({})},refresh:function(obj){var _this=
this;this.save_opened();if(!obj)obj=-1;obj=this._get_node(obj);if(!obj)obj=-1;if(obj!==-1)obj.children("UL").remove();else this.get_container_ul().empty();this.load_node(obj,function(){_this.__callback({"obj":obj});_this.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused())return;var f=$.jstree._focused();if(f)f.unset_focus();this.get_container().addClass("jstree-focused");focused_instance=this.get_index();this.__callback()},is_focused:function(){return focused_instance==
this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");focused_instance=-1}this.__callback()},_get_node:function(obj){var $obj=$(obj,this.get_container());if($obj.is(".jstree")||obj==-1)return-1;$obj=$obj.closest("li",this.get_container());return $obj.length?$obj:false},_get_next:function(obj,strict){obj=this._get_node(obj);if(obj===-1)return this.get_container().find("> ul > li:first-child");if(!obj.length)return false;if(strict)return obj.nextAll("li").size()>
0?obj.nextAll("li:eq(0)"):false;if(obj.hasClass("jstree-open"))return obj.find("li:eq(0)");else if(obj.nextAll("li").size()>0)return obj.nextAll("li:eq(0)");else return obj.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(obj,strict){obj=this._get_node(obj);if(obj===-1)return this.get_container().find("> ul > li:last-child");if(!obj.length)return false;if(strict)return obj.prevAll("li").length>0?obj.prevAll("li:eq(0)"):false;if(obj.prev("li").length){obj=obj.prev("li").eq(0);while(obj.hasClass("jstree-open"))obj=
obj.children("ul:eq(0)").children("li:last");return obj}else{var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:false}},_get_parent:function(obj){obj=this._get_node(obj);if(obj==-1||!obj.length)return false;var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:-1},_get_children:function(obj){obj=this._get_node(obj);if(obj===-1)return this.get_container().children("ul:eq(0)").children("li");if(!obj.length)return false;return obj.children("ul:eq(0)").children("li")},get_path:function(obj,
id_mode){var p=[],_this=this;obj=this._get_node(obj);if(obj===-1||!obj||!obj.length)return false;obj.parentsUntil(".jstree","li").each(function(){p.push(id_mode?this.id:_this.get_text(this))});p.reverse();p.push(id_mode?obj.attr("id"):this.get_text(obj));return p},_get_string:function(key){return this._get_settings().core.strings[key]||key},is_open:function(obj){obj=this._get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-open")},is_closed:function(obj){obj=this._get_node(obj);return obj&&obj!==
-1&&obj.hasClass("jstree-closed")},is_leaf:function(obj){obj=this._get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-leaf")},correct_state:function(obj){obj=this._get_node(obj);if(!obj||obj===-1)return false;obj.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({"obj":obj})},open_node:function(obj,callback,skip_animation){obj=this._get_node(obj);if(!obj.length)return false;if(!obj.hasClass("jstree-closed")){if(callback)callback.call();
return false}var s=skip_animation||is_ie6?0:this._get_settings().core.animation,t=this;if(!this._is_loaded(obj)){obj.children("a").addClass("jstree-loading");this.load_node(obj,function(){t.open_node(obj,callback,skip_animation)},callback)}else{if(this._get_settings().core.open_parents)obj.parentsUntil(".jstree",".jstree-closed").each(function(){t.open_node(this,false,true)});if(s)obj.children("ul").css("display","none");obj.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");
if(s)obj.children("ul").stop(true,true).slideDown(s,function(){this.style.display="";t.after_open(obj)});else t.after_open(obj);this.__callback({"obj":obj});if(callback)callback.call()}},after_open:function(obj){this.__callback({"obj":obj})},close_node:function(obj,skip_animation){obj=this._get_node(obj);var s=skip_animation||is_ie6?0:this._get_settings().core.animation,t=this;if(!obj.length||!obj.hasClass("jstree-open"))return false;if(s)obj.children("ul").attr("style","display:block !important");
obj.removeClass("jstree-open").addClass("jstree-closed");if(s)obj.children("ul").stop(true,true).slideUp(s,function(){this.style.display="";t.after_close(obj)});else t.after_close(obj);this.__callback({"obj":obj})},after_close:function(obj){this.__callback({"obj":obj})},toggle_node:function(obj){obj=this._get_node(obj);if(obj.hasClass("jstree-closed"))return this.open_node(obj);if(obj.hasClass("jstree-open"))return this.close_node(obj)},open_all:function(obj,do_animation,original_obj){obj=obj?this._get_node(obj):
-1;if(!obj||obj===-1)obj=this.get_container_ul();if(original_obj)obj=obj.find("li.jstree-closed");else{original_obj=obj;if(obj.is(".jstree-closed"))obj=obj.find("li.jstree-closed").andSelf();else obj=obj.find("li.jstree-closed")}var _this=this;obj.each(function(){var __this=this;if(!_this._is_loaded(this))_this.open_node(this,function(){_this.open_all(__this,do_animation,original_obj)},!do_animation);else _this.open_node(this,false,!do_animation)});if(original_obj.find("li.jstree-closed").length===
0)this.__callback({"obj":original_obj})},close_all:function(obj,do_animation){var _this=this;obj=obj?this._get_node(obj):this.get_container();if(!obj||obj===-1)obj=this.get_container_ul();obj.find("li.jstree-open").andSelf().each(function(){_this.close_node(this,!do_animation)});this.__callback({"obj":obj})},clean_node:function(obj){obj=obj&&obj!=-1?$(obj):this.get_container_ul();obj=obj.is("li")?obj.find("li").andSelf():obj.find("li");obj.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
obj.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({"obj":obj})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(html,data){this.get_container().empty().append(html);this.data=data;this.__callback()},load_node:function(obj,s_call,e_call){this.__callback({"obj":obj})},_is_loaded:function(obj){return true},create_node:function(obj,position,js,
callback,is_loaded){obj=this._get_node(obj);position=typeof position==="undefined"?"last":position;var d=$("<li />"),s=this._get_settings().core,tmp;if(obj!==-1&&!obj.length)return false;if(!is_loaded&&!this._is_loaded(obj)){this.load_node(obj,function(){this.create_node(obj,position,js,callback,true)});return false}this.__rollback();if(typeof js==="string")js={"data":js};if(!js)js={};if(js.attr)d.attr(js.attr);if(js.metadata)d.data(js.metadata);if(js.state)d.addClass("jstree-"+js.state);if(!js.data)js.data=
this._get_string("new_node");if(!$.isArray(js.data)){tmp=js.data;js.data=[];js.data.push(tmp)}$.each(js.data,function(i,m){tmp=$("<a />");if($.isFunction(m))m=m.call(this,js);if(typeof m=="string")tmp.attr("href","#")[s.html_titles?"html":"text"](m);else{if(!m.attr)m.attr={};if(!m.attr.href)m.attr.href="#";tmp.attr(m.attr)[s.html_titles?"html":"text"](m.title);if(m.language)tmp.addClass(m.language)}tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!m.icon&&js.icon)m.icon=js.icon;if(m.icon)if(m.icon.indexOf("/")===
-1)tmp.children("ins").addClass(m.icon);else tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat");d.append(tmp)});d.prepend("<ins class='jstree-icon'>&#160;</ins>");if(obj===-1){obj=this.get_container();if(position==="before")position="first";if(position==="after")position="last"}switch(position){case "before":obj.before(d);tmp=this._get_parent(obj);break;case "after":obj.after(d);tmp=this._get_parent(obj);break;case "inside":case "first":if(!obj.children("ul").length)obj.append("<ul />");
obj.children("ul").prepend(d);tmp=obj;break;case "last":if(!obj.children("ul").length)obj.append("<ul />");obj.children("ul").append(d);tmp=obj;break;default:if(!obj.children("ul").length)obj.append("<ul />");if(!position)position=0;tmp=obj.children("ul").children("li").eq(position);if(tmp.length)tmp.before(d);else obj.children("ul").append(d);tmp=obj;break}if(tmp===-1||tmp.get(0)===this.get_container().get(0))tmp=-1;this.clean_node(tmp);this.__callback({"obj":d,"parent":tmp});if(callback)callback.call(this,
d);return d},get_text:function(obj){obj=this._get_node(obj);if(!obj.length)return false;var s=this._get_settings().core.html_titles;obj=obj.children("a:eq(0)");if(s){obj=obj.clone();obj.children("INS").remove();return obj.html()}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];return obj.nodeValue}},set_text:function(obj,val){obj=this._get_node(obj);if(!obj.length)return false;obj=obj.children("a:eq(0)");if(this._get_settings().core.html_titles){var tmp=obj.children("INS").clone();
obj.html(val).prepend(tmp);this.__callback({"obj":obj,"name":val});return true}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];this.__callback({"obj":obj,"name":val});return obj.nodeValue=val}},rename_node:function(obj,val){obj=this._get_node(obj);this.__rollback();if(obj&&obj.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))this.__callback({"obj":obj,"name":val})},delete_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;this.__rollback();
var p=this._get_parent(obj),prev=$([]),t=this;obj.each(function(){prev=prev.add(t._get_prev(this))});obj=obj.detach();if(p!==-1&&p.find("> ul > li").length===0)p.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(p);this.__callback({"obj":obj,"prev":prev,"parent":p});return obj},prepare_move:function(o,r,pos,cb,is_cb){var p={};p.ot=$.jstree._reference(o)||this;p.o=p.ot._get_node(o);p.r=r===-1?-1:this._get_node(r);p.p=typeof pos==="undefined"||pos===false?"last":pos;if(!is_cb&&
prepared_move.o&&prepared_move.o[0]===p.o[0]&&prepared_move.r[0]===p.r[0]&&prepared_move.p===p.p){this.__callback(prepared_move);if(cb)cb.call(this,prepared_move);return}p.ot=$.jstree._reference(p.o)||this;p.rt=$.jstree._reference(p.r)||this;if(p.r===-1||!p.r){p.cr=-1;switch(p.p){case "first":case "before":case "inside":p.cp=0;break;case "after":case "last":p.cp=p.rt.get_container().find(" > ul > li").length;break;default:p.cp=p.p;break}}else{if(!/^(before|after)$/.test(p.p)&&!this._is_loaded(p.r))return this.load_node(p.r,
function(){this.prepare_move(o,r,pos,cb,true)});switch(p.p){case "before":p.cp=p.r.index();p.cr=p.rt._get_parent(p.r);break;case "after":p.cp=p.r.index()+1;p.cr=p.rt._get_parent(p.r);break;case "inside":case "first":p.cp=0;p.cr=p.r;break;case "last":p.cp=p.r.find(" > ul > li").length;p.cr=p.r;break;default:p.cp=p.p;p.cr=p.r;break}}p.np=p.cr==-1?p.rt.get_container():p.cr;p.op=p.ot._get_parent(p.o);p.cop=p.o.index();if(p.op===-1)p.op=p.ot?p.ot.get_container():this.get_container();if(!/^(before|after)$/.test(p.p)&&
p.op&&p.np&&p.op[0]===p.np[0]&&p.o.index()<p.cp)p.cp++;p.or=p.np.find(" > ul > li:nth-child("+(p.cp+1)+")");prepared_move=p;this.__callback(prepared_move);if(cb)cb.call(this,prepared_move)},check_move:function(){var obj=prepared_move,ret=true,r=obj.r===-1?this.get_container():obj.r;if(!obj||!obj.o||obj.or[0]===obj.o[0])return false;if(obj.op&&obj.np&&obj.op[0]===obj.np[0]&&obj.cp-1===obj.o.index())return false;obj.o.each(function(){if(r.parentsUntil(".jstree","li").andSelf().index(this)!==-1){ret=
false;return false}});return ret},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){if(!is_prepared)return this.prepare_move(obj,ref,position,function(p){this.move_node(p,false,false,is_copy,true,skip_check)});if(is_copy)prepared_move.cy=true;if(!skip_check&&!this.check_move())return false;this.__rollback();var o=false;if(is_copy){o=obj.o.clone(true);o.find("*[id]").andSelf().each(function(){if(this.id)this.id="copy_"+this.id})}else o=obj.o;if(obj.or.length)obj.or.before(o);else{if(!obj.np.children("ul").length)$("<ul />").appendTo(obj.np);
obj.np.children("ul:eq(0)").append(o)}try{obj.ot.clean_node(obj.op);obj.rt.clean_node(obj.np);if(!obj.op.find("> ul > li").length)obj.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}if(is_copy){prepared_move.cy=true;prepared_move.oc=o}this.__callback(prepared_move);return prepared_move},_get_move:function(){return prepared_move}}})})(jQuery);(function($){var scrollbar_width,e1,e2;$(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){e1=
$('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");e2=$('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");scrollbar_width=e1.width()-e2.width();e1.add(e2).remove()}else{e1=$("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});scrollbar_width=100-e1.width();
e1.parent().remove()}});$.jstree.plugin("ui",{__init:function(){this.data.ui.selected=$();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",$.proxy(function(event){event.preventDefault();event.currentTarget.blur();if(!$(event.currentTarget).hasClass("jstree-loading"))this.select_node(event.currentTarget,true,event)},this)).delegate("a","mouseenter.jstree",$.proxy(function(event){if(!$(event.currentTarget).hasClass("jstree-loading"))this.hover_node(event.target)},
this)).delegate("a","mouseleave.jstree",$.proxy(function(event){if(!$(event.currentTarget).hasClass("jstree-loading"))this.dehover_node(event.target)},this)).bind("reopen.jstree",$.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",$.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",$.proxy(function(){this.reselect()},this)).bind("close_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui,obj=this._get_node(data.rslt.obj),
clk=obj&&obj.length?obj.children("ul").find("a.jstree-clicked"):$(),_this=this;if(s.selected_parent_close===false||!clk.length)return;clk.each(function(){_this.deselect_node(this);if(s.selected_parent_close==="select_parent")_this.select_node(obj)})},this)).bind("delete_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui.select_prev_on_delete,obj=this._get_node(data.rslt.obj),clk=obj&&obj.length?obj.find("a.jstree-clicked"):[],_this=this;clk.each(function(){_this.deselect_node(this)});
if(s&&clk.length)data.rslt.prev.each(function(){if(this.parentNode){_this.select_node(this);return false}})},this)).bind("move_node.jstree",$.proxy(function(event,data){if(data.rslt.cy)data.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(obj,
allow_multiple){if(typeof obj==="undefined"||obj===null)return allow_multiple?this.data.ui.selected:this.data.ui.last_selected;var $obj=$(obj,this.get_container());if($obj.is(".jstree")||obj==-1)return-1;$obj=$obj.closest("li",this.get_container());return $obj.length?$obj:false},_ui_notify:function(n,data){if(data.selected)this.select_node(n,false)},save_selected:function(){var _this=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){if(this.id)_this.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});$.each(s,function(i,val){if(val&&val!=="#")_this.select_node(val)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(obj){this.save_selected();return this.__call_old()},hover_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(!obj.hasClass("jstree-hovered"))this.dehover_node();this.data.ui.hovered=obj.children("a").addClass("jstree-hovered").parent();this._fix_scroll(obj);this.__callback({"obj":obj})},dehover_node:function(){var obj=this.data.ui.hovered,p;if(!obj||!obj.length)return false;p=obj.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===
p[0])this.data.ui.hovered=null;this.__callback({"obj":obj})},select_node:function(obj,check,e){obj=this._get_node(obj);if(obj==-1||!obj||!obj.length)return false;var s=this._get_settings().ui,is_multiple=s.select_multiple_modifier=="on"||s.select_multiple_modifier!==false&&e&&e[s.select_multiple_modifier+"Key"],is_range=s.select_range_modifier!==false&&e&&e[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==obj[0]&&this.data.ui.last_selected.parent()[0]===
obj.parent()[0],is_selected=this.is_selected(obj),proceed=true,t=this;if(check){if(s.disable_selecting_children&&is_multiple&&(obj.parentsUntil(".jstree","li").children("a.jstree-clicked").length||obj.children("ul").find("a.jstree-clicked:eq(0)").length))return false;proceed=false;switch(!0){case is_range:this.data.ui.last_selected.addClass("jstree-last-selected");obj=obj[obj.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();if(s.select_limit==
-1||obj.length<s.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){if(this!==t.data.ui.last_selected[0])t.deselect_node(this)});is_selected=false;proceed=true}else proceed=false;break;case is_selected&&!is_multiple:this.deselect_all();is_selected=false;proceed=true;break;case !is_selected&&!is_multiple:if(s.select_limit==-1||s.select_limit>0){this.deselect_all();proceed=true}break;case is_selected&&is_multiple:this.deselect_node(obj);
break;case !is_selected&&is_multiple:if(s.select_limit==-1||this.data.ui.selected.length+1<=s.select_limit)proceed=true;break}}if(proceed&&!is_selected){if(!is_range)this.data.ui.last_selected=obj;obj.children("a").addClass("jstree-clicked");if(s.selected_parent_open)obj.parents(".jstree-closed").each(function(){t.open_node(this,false,true)});this.data.ui.selected=this.data.ui.selected.add(obj);this._fix_scroll(obj.eq(0));this.__callback({"obj":obj,"e":e})}},_fix_scroll:function(obj){var c=this.get_container()[0],
t;if(c.scrollHeight>c.offsetHeight){obj=this._get_node(obj);if(!obj||obj===-1||!obj.length||!obj.is(":visible"))return;t=obj.offset().top-this.get_container().offset().top;if(t<0)c.scrollTop=c.scrollTop+t-1;if(t+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?scrollbar_width:0)>c.offsetHeight)c.scrollTop=c.scrollTop+(t-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?scrollbar_width:0))}},deselect_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(this.is_selected(obj)){obj.children("a").removeClass("jstree-clicked");
this.data.ui.selected=this.data.ui.selected.not(obj);if(this.data.ui.last_selected.get(0)===obj.get(0))this.data.ui.last_selected=this.data.ui.selected.eq(0);this.__callback({"obj":obj})}},toggle_select:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(this.is_selected(obj))this.deselect_node(obj);else this.select_node(obj)},is_selected:function(obj){return this.data.ui.selected.index(this._get_node(obj))>=0},get_selected:function(context){return context?$(context).find("a.jstree-clicked").parent():
this.data.ui.selected},deselect_all:function(context){var ret=context?$(context).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();ret.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=$([]);this.data.ui.last_selected=false;this.__callback({"obj":ret})}}});$.jstree.defaults.plugins.push("ui")})(jQuery);(function($){$.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",$.proxy(function(e,data){if(this._get_settings().crrm.move.open_onmove){var t=
this;data.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){t.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(m){return true}}},_fn:{_show_input:function(obj,callback){obj=this._get_node(obj);var rtl=this._get_settings().core.rtl,w=this._get_settings().crrm.input_width_limit,w1=obj.children("ins").width(),w2=obj.find("> a:visible > ins").width()*obj.find("> a:visible > ins").length,
t=this.get_text(obj),h1=$("<div />",{css:{"position":"absolute","top":"-200px","left":rtl?"0px":"-1000px","visibility":"hidden"}}).appendTo("body"),h2=obj.css("position","relative").append($("<input />",{"value":t,"class":"jstree-rename-input","css":{"padding":"0","border":"1px solid silver","position":"absolute","left":rtl?"auto":w1+w2+4+"px","right":rtl?w1+w2+4+"px":"auto","top":"0px","height":this.data.core.li_height-2+"px","lineHeight":this.data.core.li_height-2+"px","width":"150px"},"blur":$.proxy(function(){var i=
obj.children(".jstree-rename-input"),v=i.val();if(v==="")v=t;h1.remove();i.remove();this.set_text(obj,t);this.rename_node(obj,v);callback.call(this,obj,v,t);obj.css("position","")},this),"keyup":function(event){var key=event.keyCode||event.which;if(key==27){this.value=t;this.blur();return}else if(key==13){this.blur();return}else h2.width(Math.min(h1.text("pW"+this.value).width(),w))},"keypress":function(event){var key=event.keyCode||event.which;if(key==13)return false}})).children(".jstree-rename-input");
this.set_text(obj,"");h1.css({fontFamily:h2.css("fontFamily")||"",fontSize:h2.css("fontSize")||"",fontWeight:h2.css("fontWeight")||"",fontStyle:h2.css("fontStyle")||"",fontStretch:h2.css("fontStretch")||"",fontVariant:h2.css("fontVariant")||"",letterSpacing:h2.css("letterSpacing")||"",wordSpacing:h2.css("wordSpacing")||""});h2.width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()},rename:function(obj){obj=this._get_node(obj);this.__rollback();var f=this.__callback;this._show_input(obj,
function(obj,new_name,old_name){f.call(this,{"obj":obj,"new_name":new_name,"old_name":old_name})})},create:function(obj,position,js,callback,skip_rename){var t,_this=this;obj=this._get_node(obj);if(!obj)obj=-1;this.__rollback();t=this.create_node(obj,position,js,function(t){var p=this._get_parent(t),pos=$(t).index();if(callback)callback.call(this,t);if(p.length&&p.hasClass("jstree-closed"))this.open_node(p,false,true);if(!skip_rename)this._show_input(t,function(obj,new_name,old_name){_this.__callback({"obj":obj,
"name":new_name,"parent":p,"position":pos})});else _this.__callback({"obj":t,"name":this.get_text(t),"parent":p,"position":pos})});return t},remove:function(obj){obj=this._get_node(obj,true);var p=this._get_parent(obj),prev=this._get_prev(obj);this.__rollback();obj=this.delete_node(obj);if(obj!==false)this.__callback({"obj":obj,"prev":prev,"parent":p})},check_move:function(){if(!this.__call_old())return false;var s=this._get_settings().crrm.move;if(!s.check_move.call(this,this._get_move()))return false;
return true},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){var s=this._get_settings().crrm.move;if(!is_prepared){if(typeof position==="undefined")position=s.default_position;if(position==="inside"&&!s.default_position.match(/^(before|after)$/))position=s.default_position;return this.__call_old(true,obj,ref,position,is_copy,false,skip_check)}if(s.always_copy===true||s.always_copy==="multitree"&&obj.rt.get_index()!==obj.ot.get_index())is_copy=true;this.__call_old(true,obj,ref,
position,is_copy,true,skip_check)},cut:function(obj){obj=this._get_node(obj,true);if(!obj||!obj.length)return false;this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=obj;this.__callback({"obj":obj})},copy:function(obj){obj=this._get_node(obj,true);if(!obj||!obj.length)return false;this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=obj;this.__callback({"obj":obj})},paste:function(obj){obj=this._get_node(obj);if(!obj||!obj.length)return false;var nodes=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:
this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return false;if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,obj);this.data.crrm.ct_nodes=false}if(this.data.crrm.cp_nodes)this.move_node(this.data.crrm.cp_nodes,obj,false,true);this.__callback({"obj":obj,"nodes":nodes})}}})})(jQuery);(function($){var themes_loaded=[];$.jstree._themes=false;$.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",$.proxy(function(){var s=this._get_settings().themes;
this.data.themes.dots=s.dots;this.data.themes.icons=s.icons;this.set_theme(s.theme,s.url)},this)).bind("loaded.jstree",$.proxy(function(){if(!this.data.themes.dots)this.hide_dots();else this.show_dots();if(!this.data.themes.icons)this.hide_icons();else this.show_icons()},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(theme_name,theme_url){if(!theme_name)return false;if(!theme_url)theme_url=$.jstree._themes+theme_name+"/style.css";if($.inArray(theme_url,themes_loaded)==
-1){$.vakata.css.add_sheet({"url":theme_url});themes_loaded.push(theme_url)}if(this.data.themes.theme!=theme_name){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=theme_name}this.get_container().addClass("jstree-"+theme_name);if(!this.data.themes.dots)this.hide_dots();else this.show_dots();if(!this.data.themes.icons)this.hide_icons();else this.show_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=
true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots)this.hide_dots();else this.show_dots()},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){if(this.data.themes.icons)this.hide_icons();else this.show_icons()}}});$(function(){if($.jstree._themes===false)$("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){$.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}});if($.jstree._themes===false)$.jstree._themes="themes/"});$.jstree.defaults.plugins.push("themes")})(jQuery);(function($){var bound=[];function exec(i,event){var f=
$.jstree._focused(),tmp;if(f&&f.data&&f.data.hotkeys&&f.data.hotkeys.enabled){tmp=f._get_settings().hotkeys[i];if(tmp)return tmp.call(f,event)}}$.jstree.plugin("hotkeys",{__init:function(){if(typeof $.hotkeys==="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";$.each(this._get_settings().hotkeys,function(i,v){if(v!==false&&$.inArray(i,bound)==-1){$(document).bind("keydown",i,function(event){return exec(i,event)});
bound.push(i)}});this.get_container().bind("lock.jstree",$.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",$.proxy(function(){if(this.data.hotkeys.revert)this.data.hotkeys.enabled=true},this));this.enable_hotkeys()},defaults:{"up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(o));return false},"ctrl+up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||
-1;this.hover_node(this._get_prev(o));return false},"shift+up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(o));return false},"down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(o));return false},"ctrl+down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(o));return false},"shift+down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||
-1;this.hover_node(this._get_next(o));return false},"left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);else this.hover_node(this._get_prev(o));return false},"ctrl+left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);else this.hover_node(this._get_prev(o));return false},"shift+left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);
else this.hover_node(this._get_prev(o));return false},"right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"ctrl+right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"shift+right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;
if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"space":function(){if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").click();return false},"ctrl+space":function(event){event.type="click";if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").trigger(event);return false},"shift+space":function(event){event.type="click";if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").trigger(event);return false},
"f2":function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},"del":function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function($){$.jstree.plugin("json_data",{__init:function(){var s=this._get_settings().json_data;if(s.progressive_unload)this.get_container().bind("after_close.jstree",function(e,data){data.rslt.obj.children("ul").remove()})},
defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_json(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){var s=this._get_settings().json_data;obj=this._get_node(obj);return obj==-1||!obj||!s.ajax&&!s.progressive_render&&!$.isFunction(s.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").length>
0},refresh:function(obj){obj=this._get_node(obj);var s=this._get_settings().json_data;if(obj&&obj!==-1&&s.progressive_unload&&($.isFunction(s.data)||!!s.ajax))obj.removeData("jstree_children");return this.__call_old()},load_node_json:function(obj,s_call,e_call){var s=this.get_settings().json_data,d,error_func=function(){},success_func=function(){};obj=this._get_node(obj);if(obj&&obj!==-1&&(s.progressive_render||s.progressive_unload)&&!obj.is(".jstree-open, .jstree-leaf")&&obj.children("ul").children("li").length===
0&&obj.data("jstree_children")){d=this._parse_json(obj.data("jstree_children"),obj);if(d){obj.append(d);if(!s.progressive_unload)obj.removeData("jstree_children")}this.clean_node(obj);if(s_call)s_call.call(this);return}if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case !s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){d=this._parse_json(d,obj);if(!d){if(obj===
-1||!obj){if(s.correct_state)this.get_container().children("ul").empty()}else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state)this.correct_state(obj)}if(e_call)e_call.call(this)}else{if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());else{obj.append(d).children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}},
this));break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1){d=this._parse_json(s.data,obj);if(d){this.get_container().children("ul").empty().append(d.children());this.clean_node()}else if(s.correct_state)this.get_container().children("ul").empty()}if(s_call)s_call.call(this);break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:error_func=function(x,t,e){var ef=this.get_settings().json_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!=-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};success_func=function(d,t,x){var sf=this.get_settings().json_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")===""||!$.isArray(d)&&!$.isPlainObject(d))return error_func.call(this,x,t,"");d=this._parse_json(d,obj);if(d){if(obj===-1||
!obj)this.get_container().children("ul").empty().append(d.children());else{obj.append(d).children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj===-1||!obj){if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}};
s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="json";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}},_parse_json:function(js,obj,is_callback){var d=false,p=this._get_settings(),s=p.json_data,t=p.core.html_titles,tmp,i,j,ul1,ul2;if(!js)return d;if(s.progressive_unload&&obj&&obj!==-1)obj.data("jstree_children",d);if($.isArray(js)){d=
$();if(!js.length)return false;for(i=0,j=js.length;i<j;i++){tmp=this._parse_json(js[i],obj,true);if(tmp.length)d=d.add(tmp)}}else{if(typeof js=="string")js={data:js};if(!js.data&&js.data!=="")return d;d=$("<li />");if(js.attr)d.attr(js.attr);if(js.metadata)d.data(js.metadata);if(js.state)d.addClass("jstree-"+js.state);if(!$.isArray(js.data)){tmp=js.data;js.data=[];js.data.push(tmp)}$.each(js.data,function(i,m){tmp=$("<a />");if($.isFunction(m))m=m.call(this,js);if(typeof m=="string")tmp.attr("href",
"#")[t?"html":"text"](m);else{if(!m.attr)m.attr={};if(!m.attr.href)m.attr.href="#";tmp.attr(m.attr)[t?"html":"text"](m.title);if(m.language)tmp.addClass(m.language)}tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!m.icon&&js.icon)m.icon=js.icon;if(m.icon)if(m.icon.indexOf("/")===-1)tmp.children("ins").addClass(m.icon);else tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat");d.append(tmp)});d.prepend("<ins class='jstree-icon'>&#160;</ins>");if(js.children)if(s.progressive_render&&
js.state!=="open")d.addClass("jstree-closed").data("jstree_children",js.children);else{if(s.progressive_unload)d.data("jstree_children",js.children);if($.isArray(js.children)&&js.children.length){tmp=this._parse_json(js.children,obj,true);if(tmp.length){ul2=$("<ul />");ul2.append(tmp);d.append(ul2)}}}}if(!is_callback){ul1=$("<ul />");ul1.append(d);d=ul1}return d},get_json:function(obj,li_attr,a_attr,is_callback){var result=[],s=this._get_settings(),_this=this,tmp1,tmp2,li,a,t,lang;obj=this._get_node(obj);
if(!obj||obj===-1)obj=this.get_container().find("> ul > li");li_attr=$.isArray(li_attr)?li_attr:["id","class"];if(!is_callback&&this.data.types)li_attr.push(s.types.type_attr);a_attr=$.isArray(a_attr)?a_attr:[];obj.each(function(){li=$(this);tmp1={data:[]};if(li_attr.length)tmp1.attr={};$.each(li_attr,function(i,v){tmp2=li.attr(v);if(tmp2&&tmp2.length&&tmp2.replace(/jstree[^ ]*/ig,"").length)tmp1.attr[v]=(" "+tmp2).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});
if(li.hasClass("jstree-open"))tmp1.state="open";if(li.hasClass("jstree-closed"))tmp1.state="closed";if(li.data())tmp1.metadata=li.data();a=li.children("a");a.each(function(){t=$(this);if(a_attr.length||$.inArray("languages",s.plugins)!==-1||t.children("ins").get(0).style.backgroundImage.length||t.children("ins").get(0).className&&t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){lang=false;if($.inArray("languages",s.plugins)!==-1&&$.isArray(s.languages)&&s.languages.length)$.each(s.languages,
function(l,lv){if(t.hasClass(lv)){lang=lv;return false}});tmp2={attr:{},title:_this.get_text(t,lang)};$.each(a_attr,function(k,z){tmp2.attr[z]=(" "+(t.attr(z)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});if($.inArray("languages",s.plugins)!==-1&&$.isArray(s.languages)&&s.languages.length)$.each(s.languages,function(k,z){if(t.hasClass(z)){tmp2.language=z;return true}});if(t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,
"").length)tmp2.icon=t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(t.children("ins").get(0).style.backgroundImage.length)tmp2.icon=t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}else tmp2=_this.get_text(t);if(a.length>1)tmp1.data.push(tmp2);else tmp1.data=tmp2});li=li.find("> ul > li");if(li.length)tmp1.children=_this.get_json(li,li_attr,a_attr,true);result.push(tmp1)});return result}}})})(jQuery);
(function($){$.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var langs=this._get_settings().languages,st=false,selector=".jstree-"+this.get_index()+" a";if(!$.isArray(langs)||langs.length===0)return false;if($.inArray(i,langs)==-1)if(!!langs[i])i=langs[i];else return false;if(i==this.data.languages.current_language)return true;st=$.vakata.css.get_css(selector+"."+this.data.languages.current_language,false,this.data.languages.language_css);if(st!==
false)st.style.display="none";st=$.vakata.css.get_css(selector+"."+i,false,this.data.languages.language_css);if(st!==false)st.style.display="";this.data.languages.current_language=i;this.__callback(i);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(key,lang){var langs=this._get_settings().languages,s=this._get_settings().core.strings;if($.isArray(langs)&&langs.length)lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;if(s[lang]&&
s[lang][key])return s[lang][key];if(s[key])return s[key];return key},get_text:function(obj,lang){obj=this._get_node(obj)||this.data.ui.last_selected;if(!obj.size())return false;var langs=this._get_settings().languages,s=this._get_settings().core.html_titles;if($.isArray(langs)&&langs.length){lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;obj=obj.children("a."+lang)}else obj=obj.children("a:eq(0)");if(s){obj=obj.clone();obj.children("INS").remove();return obj.html()}else{obj=
obj.contents().filter(function(){return this.nodeType==3})[0];return obj.nodeValue}},set_text:function(obj,val,lang){obj=this._get_node(obj)||this.data.ui.last_selected;if(!obj.size())return false;var langs=this._get_settings().languages,s=this._get_settings().core.html_titles,tmp;if($.isArray(langs)&&langs.length){lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;obj=obj.children("a."+lang)}else obj=obj.children("a:eq(0)");if(s){tmp=obj.children("INS").clone();obj.html(val).prepend(tmp);
this.__callback({"obj":obj,"name":val,"lang":lang});return true}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];this.__callback({"obj":obj,"name":val,"lang":lang});return obj.nodeValue=val}},_load_css:function(){var langs=this._get_settings().languages,str="/* languages css */",selector=".jstree-"+this.get_index()+" a",ln;if($.isArray(langs)&&langs.length){this.data.languages.current_language=langs[0];for(ln=0;ln<langs.length;ln++){str+=selector+"."+langs[ln]+" {";if(langs[ln]!=
this.data.languages.current_language)str+=" display:none; ";str+=" } "}this.data.languages.language_css=$.vakata.css.add_sheet({"str":str,"title":"jstree-languages"})}},create_node:function(obj,position,js,callback){var t=this.__call_old(true,obj,position,js,function(t){var langs=this._get_settings().languages,a=t.children("a"),ln;if($.isArray(langs)&&langs.length){for(ln=0;ln<langs.length;ln++)if(!a.is("."+langs[ln]))t.append(a.eq(0).clone().removeClass(langs.join(" ")).addClass(langs[ln]));a.not("."+
langs.join(", .")).remove()}if(callback)callback.call(this,t)});return t}}})})(jQuery);(function($){$.jstree.plugin("cookies",{__init:function(){if(typeof $.cookie==="undefined")throw"jsTree cookie: jQuery cookie plugin not included.";var s=this._get_settings().cookies,tmp;if(!!s.save_loaded){tmp=$.cookie(s.save_loaded);if(tmp&&tmp.length)this.data.core.to_load=tmp.split(",")}if(!!s.save_opened){tmp=$.cookie(s.save_opened);if(tmp&&tmp.length)this.data.core.to_open=tmp.split(",")}if(!!s.save_selected){tmp=
$.cookie(s.save_selected);if(tmp&&tmp.length&&this.data.ui)this.data.ui.to_select=tmp.split(",")}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",$.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",$.proxy(function(e){if(this._get_settings().cookies.auto_save)this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",
save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(c){if(this.data.core.refreshing)return;var s=this._get_settings().cookies;if(!c){if(s.save_loaded){this.save_loaded();$.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options)}if(s.save_opened){this.save_opened();$.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)}if(s.save_selected&&this.data.ui){this.save_selected();$.cookie(s.save_selected,this.data.ui.to_select.join(","),
s.cookie_options)}return}switch(c){case "open_node":case "close_node":if(!!s.save_opened){this.save_opened();$.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)}if(!!s.save_loaded){this.save_loaded();$.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options)}break;case "select_node":case "deselect_node":if(!!s.save_selected&&this.data.ui){this.save_selected();$.cookie(s.save_selected,this.data.ui.to_select.join(","),s.cookie_options)}break}}}})})(jQuery);(function($){$.jstree.plugin("sort",
{__init:function(){this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var obj=this._get_node(data.rslt.obj);obj=obj===-1?this.get_container().children("ul"):obj.children("ul");this.sort(obj)},this)).bind("rename_node.jstree create_node.jstree create.jstree",$.proxy(function(e,data){this.sort(data.rslt.obj.parent())},this)).bind("move_node.jstree",$.proxy(function(e,data){var m=data.rslt.np==-1?this.get_container():data.rslt.np;this.sort(m.children("ul"))},this))},defaults:function(a,
b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(obj){var s=this._get_settings().sort,t=this;obj.append($.makeArray(obj.children("li")).sort($.proxy(s,t)));obj.find("> li > ul").each(function(){t.sort($(this))});this.clean_node(obj)}}})})(jQuery);(function($){var o=false,r=false,m=false,ml=false,sli=false,sti=false,dir1=false,dir2=false,last_pos=false;$.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,
user_data:{},drag_start:function(e,data,html){if($.vakata.dnd.is_drag)$.vakata.drag_stop({});try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false};if(e.currentTarget.style)e.currentTarget.style.MozUserSelect="none"}catch(err){}$.vakata.dnd.init_x=e.pageX;$.vakata.dnd.init_y=e.pageY;$.vakata.dnd.user_data=data;$.vakata.dnd.is_down=true;$.vakata.dnd.helper=$("<div id='vakata-dragged' />").html(html);$(document).bind("mousemove",$.vakata.dnd.drag);$(document).bind("mouseup",
$.vakata.dnd.drag_stop);return false},drag:function(e){if(!$.vakata.dnd.is_down)return;if(!$.vakata.dnd.is_drag)if(Math.abs(e.pageX-$.vakata.dnd.init_x)>5||Math.abs(e.pageY-$.vakata.dnd.init_y)>5){$.vakata.dnd.helper.appendTo("body");$.vakata.dnd.is_drag=true;$(document).triggerHandler("drag_start.vakata",{"event":e,"data":$.vakata.dnd.user_data})}else return;if(e.type==="mousemove"){var d=$(document),t=d.scrollTop(),l=d.scrollLeft();if(e.pageY-t<20){if(sti&&dir1==="down"){clearInterval(sti);sti=
false}if(!sti){dir1="up";sti=setInterval(function(){$(document).scrollTop($(document).scrollTop()-$.vakata.dnd.scroll_spd)},150)}}else if(sti&&dir1==="up"){clearInterval(sti);sti=false}if($(window).height()-(e.pageY-t)<20){if(sti&&dir1==="up"){clearInterval(sti);sti=false}if(!sti){dir1="down";sti=setInterval(function(){$(document).scrollTop($(document).scrollTop()+$.vakata.dnd.scroll_spd)},150)}}else if(sti&&dir1==="down"){clearInterval(sti);sti=false}if(e.pageX-l<20){if(sli&&dir2==="right"){clearInterval(sli);
sli=false}if(!sli){dir2="left";sli=setInterval(function(){$(document).scrollLeft($(document).scrollLeft()-$.vakata.dnd.scroll_spd)},150)}}else if(sli&&dir2==="left"){clearInterval(sli);sli=false}if($(window).width()-(e.pageX-l)<20){if(sli&&dir2==="left"){clearInterval(sli);sli=false}if(!sli){dir2="right";sli=setInterval(function(){$(document).scrollLeft($(document).scrollLeft()+$.vakata.dnd.scroll_spd)},150)}}else if(sli&&dir2==="right"){clearInterval(sli);sli=false}}$.vakata.dnd.helper.css({left:e.pageX+
$.vakata.dnd.helper_left+"px",top:e.pageY+$.vakata.dnd.helper_top+"px"});$(document).triggerHandler("drag.vakata",{"event":e,"data":$.vakata.dnd.user_data})},drag_stop:function(e){if(sli)clearInterval(sli);if(sti)clearInterval(sti);$(document).unbind("mousemove",$.vakata.dnd.drag);$(document).unbind("mouseup",$.vakata.dnd.drag_stop);$(document).triggerHandler("drag_stop.vakata",{"event":e,"data":$.vakata.dnd.user_data});$.vakata.dnd.helper.remove();$.vakata.dnd.init_x=0;$.vakata.dnd.init_y=0;$.vakata.dnd.user_data=
{};$.vakata.dnd.is_down=false;$.vakata.dnd.is_drag=false}};$(function(){var css_string="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";$.vakata.css.add_sheet({str:css_string,title:"vakata"})});$.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};
this.get_container().bind("mouseenter.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(this.data.themes){m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class","jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}if(e.currentTarget===e.target&&$.vakata.dnd.user_data.obj&&$($.vakata.dnd.user_data.obj).length&&$($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var tr=
$.jstree._reference(e.target),dc;if(tr.data.dnd.foreign){dc=tr._get_settings().dnd.drag_check.call(this,{"o":o,"r":tr.get_container(),is_root:true});if(dc===true||dc.inside===true||dc.before===true||dc.after===true)$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}else{tr.prepare_move(o,tr.get_container(),"last");if(tr.check_move())$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}},this)).bind("mouseup.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree&&
e.currentTarget===e.target&&$.vakata.dnd.user_data.obj&&$($.vakata.dnd.user_data.obj).length&&$($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var tr=$.jstree._reference(e.currentTarget),dc;if(tr.data.dnd.foreign){dc=tr._get_settings().dnd.drag_check.call(this,{"o":o,"r":tr.get_container(),is_root:true});if(dc===true||dc.inside===true||dc.before===true||dc.after===true)tr._get_settings().dnd.drag_finish.call(this,{"o":o,"r":tr.get_container(),is_root:true})}else tr.move_node(o,
tr.get_container(),"last",e[tr._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",$.proxy(function(e){if(e.relatedTarget&&e.relatedTarget.id&&e.relatedTarget.id==="jstree-marker-line")return false;if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);if($.vakata.dnd.helper.children("ins").hasClass("jstree-ok"))$.vakata.dnd.helper.children("ins").attr("class",
"jstree-invalid")}},this)).bind("mousemove.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){var cnt=this.get_container()[0];if(e.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);this.data.dnd.i1=setInterval($.proxy(function(){this.scrollLeft+=$.vakata.dnd.scroll_spd},cnt),100)}else if(e.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);this.data.dnd.i1=setInterval($.proxy(function(){this.scrollLeft-=
$.vakata.dnd.scroll_spd},cnt),100)}else if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);if(e.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval($.proxy(function(){this.scrollTop+=$.vakata.dnd.scroll_spd},cnt),100)}else if(e.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval($.proxy(function(){this.scrollTop-=$.vakata.dnd.scroll_spd},cnt),100)}else if(this.data.dnd.i2)clearInterval(this.data.dnd.i2)}},
this)).bind("scroll.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree&&m&&ml){m.hide();ml.hide()}},this)).delegate("a","mousedown.jstree",$.proxy(function(e){if(e.which===1){this.start_drag(e.currentTarget,e);return false}},this)).delegate("a","mouseenter.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree)this.dnd_enter(e.currentTarget)},this)).delegate("a","mousemove.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(!r||
!r.length||r.children("a")[0]!==e.currentTarget)this.dnd_enter(e.currentTarget);if(typeof this.data.dnd.off.top==="undefined")this.data.dnd.off=$(e.target).offset();this.data.dnd.w=(e.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0)this.data.dnd.w+=this.data.core.li_height;this.dnd_show()}},this)).delegate("a","mouseleave.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(e.relatedTarget&&e.relatedTarget.id&&e.relatedTarget.id===
"jstree-marker-line")return false;if(m)m.hide();if(ml)ml.hide();this.data.dnd.mto=setTimeout(function(t){return function(){t.dnd_leave(e)}}(this),0)}},this)).delegate("a","mouseup.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree)this.dnd_finish(e)},this));$(document).bind("drag_stop.vakata",$.proxy(function(){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);
if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(m)m.css({"top":"-2000px"});if(ml)ml.css({"top":"-2000px"})},this)).bind("drag_start.vakata",$.proxy(function(e,data){if(data.data.jstree){var et=
$(data.event.target);if(et.closest(".jstree").hasClass("jstree-"+this.get_index()))this.dnd_enter(et)}},this));var s=this._get_settings().dnd;if(s.drag_target)$(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),$.proxy(function(e){o=e.target;$.vakata.dnd.drag_start(e,{jstree:true,obj:e.target},"<ins class='jstree-icon'></ins>"+$(e.target).text());if(this.data.themes){if(m)m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class","jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class",
"jstree-dnd-helper jstree-"+this.data.themes.theme)}$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var cnt=this.get_container();this.data.dnd.cof=cnt.offset();this.data.dnd.cw=parseInt(cnt.width(),10);this.data.dnd.ch=parseInt(cnt.height(),10);this.data.dnd.foreign=true;e.preventDefault()},this));if(s.drop_target)$(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{"o":o,
"r":$(e.target),"e":e}))$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active)$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active&&$.vakata.dnd.helper.children("ins").hasClass("jstree-ok"))this._get_settings().dnd.drop_finish.call(this,{"o":o,"r":$(e.target),
"e":e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(data){return true},drop_finish:$.noop,drag_target:".jstree-draggable",drag_finish:$.noop,drag_check:function(data){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!r||!r.length)return;this.data.dnd.off=r.offset();if(this._get_settings().core.rtl)this.data.dnd.off.right=this.data.dnd.off.left+r.width();if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,
{"o":o,"r":r});this.data.dnd.after=a.after;this.data.dnd.before=a.before;this.data.dnd.inside=a.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(o,r,"before");this.data.dnd.before=this.check_move();this.prepare_move(o,r,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(r)){this.prepare_move(o,r,"inside");this.data.dnd.inside=this.check_move()}else this.data.dnd.inside=false;this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared)return;
var o=["before","inside","after"],r=false,rtl=this._get_settings().core.rtl,pos;if(this.data.dnd.w<this.data.core.li_height/3)o=["before","inside","after"];else if(this.data.dnd.w<=this.data.core.li_height*2/3)o=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"];else o=["after","inside","before"];$.each(o,$.proxy(function(i,val){if(this.data.dnd[val]){$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");r=val;return false}},this));if(r===false)$.vakata.dnd.helper.children("ins").attr("class",
"jstree-invalid");pos=rtl?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(r){case "before":m.css({"left":pos+"px","top":this.data.dnd.off.top-6+"px"}).show();if(ml)ml.css({"left":pos+8+"px","top":this.data.dnd.off.top-1+"px"}).show();break;case "after":m.css({"left":pos+"px","top":this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();if(ml)ml.css({"left":pos+8+"px","top":this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":m.css({"left":pos+(rtl?
-4:4)+"px","top":this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();if(ml)ml.hide();break;default:m.hide();if(ml)ml.hide();break}last_pos=r;return r},dnd_open:function(){this.data.dnd.to2=false;this.open_node(r,$.proxy(this.dnd_prepare,this),true)},dnd_finish:function(e){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)this._get_settings().dnd.drag_finish.call(this,{"o":o,"r":r,"p":last_pos})}else{this.dnd_prepare();this.move_node(o,r,last_pos,
e[this._get_settings().dnd.copy_modifier+"Key"])}o=false;r=false;m.hide();if(ml)ml.hide()},dnd_enter:function(obj){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var s=this._get_settings().dnd;this.data.dnd.prepared=false;r=this._get_node(obj);if(s.check_timeout){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);this.data.dnd.to1=setTimeout($.proxy(this.dnd_prepare,this),s.check_timeout)}else this.dnd_prepare();if(s.open_timeout){if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);
if(r&&r.length&&r.hasClass("jstree-closed"))this.data.dnd.to2=setTimeout($.proxy(this.dnd_open,this),s.open_timeout)}else if(r&&r.length&&r.hasClass("jstree-closed"))this.dnd_open()},dnd_leave:function(e){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");m.hide();if(ml)ml.hide();if(r&&r[0]===e.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);
this.data.dnd.to2=false}}},start_drag:function(obj,e){o=this._get_node(obj);if(this.data.ui&&this.is_selected(o))o=this._get_node(null,true);var dt=o.length>1?this._get_string("multiple_selection"):this.get_text(o),cnt=this.get_container();if(!this._get_settings().core.html_titles)dt=dt.replace(/</ig,"&lt;").replace(/>/ig,"&gt;");$.vakata.dnd.drag_start(e,{jstree:true,obj:o},"<ins class='jstree-icon'></ins>"+dt);if(this.data.themes){if(m)m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class",
"jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=cnt.offset();this.data.dnd.cw=parseInt(cnt.width(),10);this.data.dnd.ch=parseInt(cnt.height(),10);this.data.dnd.active=true}}});$(function(){var css_string=""+"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; "+" -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; "+
"} "+"#vakata-dragged .jstree-ok { background:green; } "+"#vakata-dragged .jstree-invalid { background:red; } "+"#jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } "+"#jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43; "+
" cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666; "+" -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; "+"}"+"";$.vakata.css.add_sheet({str:css_string,title:"jstree"});m=$("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){m.hide();ml.hide();e.preventDefault();e.stopImmediatePropagation();return false}).appendTo("body");
ml=$("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(r&&r.length){r.children("a").trigger(e);e.preventDefault();e.stopImmediatePropagation();return false}}).bind("mouseleave",function(e){var rt=$(e.relatedTarget);if(rt.is(".jstree")||rt.closest(".jstree").length===0)if(r&&r.length){r.children("a").trigger(e);m.hide();ml.hide();e.preventDefault();e.stopImmediatePropagation();return false}}).appendTo("body");$(document).bind("drag_start.vakata",function(e,data){if(data.data.jstree){m.show();
if(ml)ml.show()}});$(document).bind("drag_stop.vakata",function(e,data){if(data.data.jstree){m.hide();if(ml)ml.hide()}})})})(jQuery);(function($){$.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=this.deselect_node=this.deselect_all=$.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",$.proxy(function(e,
data){this._prepare_checkboxes(data.rslt.obj)},this)).bind("loaded.jstree",$.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",$.proxy(function(e){e.preventDefault();if(this._get_node(e.target).hasClass("jstree-checked"))this.uncheck_node(e.target);else this.check_node(e.target);if(this.data.ui&&this.data.checkbox.noui){this.save_selected();if(this.data.cookies)this.save_cookie("select_node")}else{e.stopImmediatePropagation();
return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(n){return["check_"+(n[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(n,data){if(data.checked)this.check_node(n,false)},_prepare_checkboxes:function(obj){obj=!obj||obj==-1?this.get_container().find("> ul > li"):
this._get_node(obj);if(obj===false)return;var c,_this=this,t,ts=this._get_settings().checkbox.two_state,rc=this._get_settings().checkbox.real_checkboxes,rcn=this._get_settings().checkbox.real_checkboxes_names;obj.each(function(){t=$(this);c=t.is("li")&&(t.hasClass("jstree-checked")||rc&&t.children(":checked").length)?"jstree-checked":"jstree-unchecked";t.find("li").andSelf().each(function(){var $t=$(this),nm;$t.children("a"+(_this.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(ts?
"jstree-unchecked":c);if(rc)if(!$t.children(":checkbox").length){nm=rcn.call(_this,$t);$t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+nm[0]+"' name='"+nm[0]+"' value='"+nm[1]+"' />")}else $t.children(":checkbox").addClass("jstree-real-checkbox");if(!ts){if(c==="jstree-checked"||$t.hasClass("jstree-checked")||$t.children(":checked").length)$t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",true)}else if($t.hasClass("jstree-checked")||$t.children(":checked").length)$t.addClass("jstree-checked").children(":checkbox").prop("checked",
true)})});if(!ts)obj.find(".jstree-checked").parent().parent().each(function(){_this._repair_state(this)})},change_state:function(obj,state){obj=this._get_node(obj);var coll=false,rc=this._get_settings().checkbox.real_checkboxes;if(!obj||obj===-1)return false;state=state===false||state===true?state:obj.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)if(state){obj.removeClass("jstree-checked").addClass("jstree-unchecked");if(rc)obj.children(":checkbox").prop("checked",false)}else{obj.removeClass("jstree-unchecked").addClass("jstree-checked");
if(rc)obj.children(":checkbox").prop("checked",true)}else{if(state){coll=obj.find("li").andSelf();if(!coll.filter(".jstree-checked, .jstree-undetermined").length)return false;coll.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(rc)coll.children(":checkbox").prop("checked",false)}else{coll=obj.find("li").andSelf();if(!coll.filter(".jstree-unchecked, .jstree-undetermined").length)return false;coll.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
if(rc)coll.children(":checkbox").prop("checked",true);if(this.data.ui)this.data.ui.last_selected=obj;this.data.checkbox.last_selected=obj}obj.parentsUntil(".jstree","li").each(function(){var $this=$(this);if(state)if($this.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){$this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)$this.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
false);return false}else{$this.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(rc)$this.children(":checkbox").prop("checked",false)}else if($this.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){$this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)$this.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",false);return false}else{$this.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
if(rc)$this.children(":checkbox").prop("checked",true)}})}if(this.data.ui&&this.data.checkbox.noui)this.data.ui.selected=this.get_checked();this.__callback(obj);return true},check_node:function(obj){if(this.change_state(obj,false)){obj=this._get_node(obj);if(this._get_settings().checkbox.checked_parent_open){var t=this;obj.parents(".jstree-closed").each(function(){t.open_node(this,false,true)})}this.__callback({"obj":obj})}},uncheck_node:function(obj){if(this.change_state(obj,true))this.__callback({"obj":this._get_node(obj)})},
check_all:function(){var _this=this,coll=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");coll.each(function(){_this.change_state(this,false)});this.__callback()},uncheck_all:function(){var _this=this,coll=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");coll.each(function(){_this.change_state(this,true)});this.__callback()},is_checked:function(obj){obj=this._get_node(obj);
return obj.length?obj.is(".jstree-checked"):false},get_checked:function(obj,get_all){obj=!obj||obj===-1?this.get_container():this._get_node(obj);return get_all||this._get_settings().checkbox.two_state?obj.find(".jstree-checked"):obj.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(obj,get_all){obj=!obj||obj===-1?this.get_container():this._get_node(obj);return get_all||this._get_settings().checkbox.two_state?obj.find(".jstree-unchecked"):obj.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(obj){obj=this._get_node(obj);if(!obj.length)return;if(this._get_settings().checkbox.two_state){obj.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",true);return}var rc=this._get_settings().checkbox.real_checkboxes,
a=obj.find("> ul > .jstree-checked").length,b=obj.find("> ul > .jstree-undetermined").length,c=obj.find("> ul > li").length;if(c===0){if(obj.hasClass("jstree-undetermined"))this.change_state(obj,false)}else if(a===0&&b===0)this.change_state(obj,true);else if(a===c)this.change_state(obj,false);else{obj.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)obj.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
false)}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();$.each(s,function(i,val){_this.check_node(val)});this.__callback()}else this.__call_old()},save_loaded:function(){var _this=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){if(this.id)_this.data.core.to_load.push("#"+
this.id)})}}});$(function(){var css_string=".jstree .jstree-real-checkbox { display:none; } ";$.vakata.css.add_sheet({str:css_string,title:"jstree"})})})(jQuery);(function($){$.vakata.xslt=function(xml,xsl,callback){var rs="",xm,xs,processor,support;if(document.recalc){xm=document.createElement("xml");xs=document.createElement("xml");xm.innerHTML=xml;xs.innerHTML=xsl;$("body").append(xm).append(xs);setTimeout(function(xm,xs,callback){return function(){callback.call(null,xm.transformNode(xs.XMLDocument));
setTimeout(function(xm,xs){return function(){$(xm).remove();$(xs).remove()}}(xm,xs),200)}}(xm,xs,callback),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"){xml=(new DOMParser).parseFromString(xml,"text/xml");xsl=(new DOMParser).parseFromString(xsl,"text/xml")}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){processor=new XSLTProcessor;
support=$.isFunction(processor.transformDocument)?typeof window.XMLSerializer!=="undefined":true;if(!support)return false;xml=(new DOMParser).parseFromString(xml,"text/xml");xsl=(new DOMParser).parseFromString(xsl,"text/xml");if($.isFunction(processor.transformDocument)){rs=document.implementation.createDocument("","",null);processor.transformDocument(xml,xsl,rs,null);callback.call(null,(new XMLSerializer).serializeToString(rs));return true}else{processor.importStylesheet(xsl);rs=processor.transformToFragment(xml,
document);callback.call(null,$("<div />").append(rs).html());return true}}return false};var xsl={"nest":"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" />'+'<xsl:template match="/">'+'\t<xsl:call-template name="nodes">'+'\t\t<xsl:with-param name="node" select="/root" />'+"\t</xsl:call-template>"+"</xsl:template>"+
'<xsl:template name="nodes">'+'\t<xsl:param name="node" />'+"\t<ul>"+'\t<xsl:for-each select="$node/item">'+'\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />'+"\t\t<li>"+'\t\t\t<xsl:attribute name="class">'+'\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>'+"\t\t\t\t<xsl:choose>"+"\t\t\t\t\t<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"\t\t\t\t\t<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>"+
"\t\t\t\t</xsl:choose>"+'\t\t\t\t<xsl:value-of select="@class" />'+"\t\t\t</xsl:attribute>"+'\t\t\t<xsl:for-each select="@*">'+"\t\t\t\t<xsl:if test=\"name() != 'class' and name() != 'state' and name() != 'hasChildren'\">"+'\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t\t\t</xsl:if>"+"\t\t\t</xsl:for-each>"+'\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'\t\t\t<xsl:for-each select="content/name">'+"\t\t\t\t<a>"+'\t\t\t\t<xsl:attribute name="href">'+
"\t\t\t\t\t<xsl:choose>"+'\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>"+"\t\t\t\t\t</xsl:choose>"+"\t\t\t\t</xsl:attribute>"+'\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'\t\t\t\t<xsl:for-each select="@*">'+"\t\t\t\t\t<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+
'\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t\t\t\t</xsl:if>"+"\t\t\t\t</xsl:for-each>"+"\t\t\t\t\t<ins>"+'\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon '+'\t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"\t\t\t\t\t\t</xsl:attribute>"+'\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+
"\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>"+"\t\t\t\t\t</ins>"+'\t\t\t\t\t<xsl:copy-of select="./child::node()" />'+"\t\t\t\t</a>"+"\t\t\t</xsl:for-each>"+'\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>'+"\t\t</li>"+"\t</xsl:for-each>"+"\t</ul>"+"</xsl:template>"+"</xsl:stylesheet>","flat":"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+
'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" />'+'<xsl:template match="/">'+"\t<ul>"+'\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">'+'\t\t<xsl:call-template name="nodes">'+'\t\t\t<xsl:with-param name="node" select="." />'+'\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />'+"\t\t</xsl:call-template>"+"\t</xsl:for-each>"+"\t</ul>"+"</xsl:template>"+
'<xsl:template name="nodes">'+'\t<xsl:param name="node" />'+'\t<xsl:param name="is_last" />'+'\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />'+"\t<li>"+'\t<xsl:attribute name="class">'+'\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>'+"\t\t<xsl:choose>"+"\t\t\t<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"\t\t\t<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>"+
"\t\t</xsl:choose>"+'\t\t<xsl:value-of select="@class" />'+"\t</xsl:attribute>"+'\t<xsl:for-each select="@*">'+"\t\t<xsl:if test=\"name() != 'parent_id' and name() != 'hasChildren' and name() != 'class' and name() != 'state'\">"+'\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t</xsl:if>"+"\t</xsl:for-each>"+'\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'\t<xsl:for-each select="content/name">'+"\t\t<a>"+'\t\t<xsl:attribute name="href">'+"\t\t\t<xsl:choose>"+
'\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"\t\t\t<xsl:otherwise>#</xsl:otherwise>"+"\t\t\t</xsl:choose>"+"\t\t</xsl:attribute>"+'\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'\t\t<xsl:for-each select="@*">'+"\t\t\t<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+
"\t\t\t</xsl:if>"+"\t\t</xsl:for-each>"+"\t\t\t<ins>"+'\t\t\t\t<xsl:attribute name="class">jstree-icon '+'\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"\t\t\t\t</xsl:attribute>"+'\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"\t\t\t\t<xsl:text>&#xa0;</xsl:text>"+
"\t\t\t</ins>"+'\t\t\t<xsl:copy-of select="./child::node()" />'+"\t\t</a>"+"\t</xsl:for-each>"+'\t<xsl:if test="$children">'+"\t\t<ul>"+'\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">'+'\t\t\t<xsl:call-template name="nodes">'+'\t\t\t\t<xsl:with-param name="node" select="." />'+'\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />'+"\t\t\t</xsl:call-template>"+"\t\t</xsl:for-each>"+"\t\t</ul>"+"\t</xsl:if>"+"\t</li>"+"</xsl:template>"+"</xsl:stylesheet>"},
escape_xml=function(string){return string.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};$.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false,get_include_preamble:true},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_xml(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){var s=
this._get_settings().xml_data;obj=this._get_node(obj);return obj==-1||!obj||!s.ajax&&!$.isFunction(s.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_xml:function(obj,s_call,e_call){var s=this.get_settings().xml_data,error_func=function(){},success_func=function(){};obj=this._get_node(obj);if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case !s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";
case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){this.parse_xml(d,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d);obj.removeData("jstree_is_loading")}if(s.clean_node)this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}},this))},this));break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1)this.parse_xml(s.data,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);this.get_container().children("ul").empty().append(d.children());if(s.clean_node)this.clean_node(obj);
if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}},this));break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:error_func=function(x,t,e){var ef=this.get_settings().xml_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!==-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&
s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};success_func=function(d,t,x){d=x.responseText;var sf=this.get_settings().xml_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")==="")return error_func.call(this,x,t,"");this.parse_xml(d,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d);obj.removeData("jstree_is_loading")}if(s.clean_node)this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}},this))};s.ajax.context=
this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="xml";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}},parse_xml:function(xml,callback){var s=this._get_settings().xml_data;$.vakata.xslt(xml,xsl[s.xsl],callback)},get_xml:function(tp,obj,li_attr,a_attr,is_callback){var result="",s=this._get_settings(),_this=this,tmp1,tmp2,li,a,lang;if(!tp)tp="flat";
if(!is_callback)is_callback=0;obj=this._get_node(obj);if(!obj||obj===-1)obj=this.get_container().find("> ul > li");li_attr=$.isArray(li_attr)?li_attr:["id","class"];if(!is_callback&&this.data.types&&$.inArray(s.types.type_attr,li_attr)===-1)li_attr.push(s.types.type_attr);a_attr=$.isArray(a_attr)?a_attr:[];if(!is_callback){if(s.xml_data.get_include_preamble)result+="<"+'?xml version="1.0" encoding="UTF-8"?'+">";result+="<root>"}obj.each(function(){result+="<item";li=$(this);$.each(li_attr,function(i,
v){var t=li.attr(v);if(!s.xml_data.get_skip_empty||typeof t!=="undefined")result+=" "+v+'="'+escape_xml((" "+(t||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});if(li.hasClass("jstree-open"))result+=' state="open"';if(li.hasClass("jstree-closed"))result+=' state="closed"';if(tp==="flat")result+=' parent_id="'+escape_xml(is_callback)+'"';result+=">";result+="<content>";a=li.children("a");a.each(function(){tmp1=$(this);lang=false;result+="<name";if($.inArray("languages",
s.plugins)!==-1)$.each(s.languages,function(k,z){if(tmp1.hasClass(z)){result+=' lang="'+escape_xml(z)+'"';lang=z;return false}});if(a_attr.length)$.each(a_attr,function(k,z){var t=tmp1.attr(z);if(!s.xml_data.get_skip_empty||typeof t!=="undefined")result+=" "+z+'="'+escape_xml((" "+t||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});if(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)result+=' icon="'+escape_xml(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"';if(tmp1.children("ins").get(0).style.backgroundImage.length)result+=' icon="'+escape_xml(tmp1.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"';result+=">";result+="<![CDATA["+_this.get_text(tmp1,lang)+"]]\>";result+="</name>"});result+="</content>";tmp2=li[0].id||true;li=li.find("> ul > li");if(li.length)tmp2=_this.get_xml(tp,li,li_attr,a_attr,tmp2);else tmp2="";
if(tp=="nest")result+=tmp2;result+="</item>";if(tp=="flat")result+=tmp2});if(!is_callback)result+="</root>";return result}}})})(jQuery);(function($){$.expr[":"].jstree_contains=function(a,i,m){return(a.textContent||a.innerText||"").toLowerCase().indexOf(m[3].toLowerCase())>=0};$.expr[":"].jstree_title_contains=function(a,i,m){return(a.getAttribute("title")||"").toLowerCase().indexOf(m[3].toLowerCase())>=0};$.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=
$();if(this._get_settings().search.show_only_matches)this.get_container().bind("search.jstree",function(e,data){$(this).children("ul").find("li").hide().removeClass("jstree-last");data.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){$(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){$(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:false,search_method:"jstree_contains",
show_only_matches:false},_fn:{search:function(str,skip_async){if($.trim(str)===""){this.clear_search();return}var s=this.get_settings().search,t=this,error_func=function(){},success_func=function(){};this.data.search.str=str;if(!skip_async&&s.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;error_func=function(){};success_func=function(d,t,x){var sf=this.get_settings().search.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;
this.data.search.to_open=d;this._search_open()};s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,str);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,str);if(!s.ajax.data)s.ajax.data={"search_string":str};if(!s.ajax.dataType||/^json/.exec(s.ajax.dataType))s.ajax.dataType="json";$.ajax(s.ajax);return}if(this.data.search.result.length)this.clear_search();this.data.search.result=this.get_container().find("a"+
(this.data.languages?"."+this.get_lang():"")+":"+s.search_method+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){t.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:str})},clear_search:function(str){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=$()},_search_open:function(is_callback){var _this=this,done=true,current=
[],remaining=[];if(this.data.search.to_open.length){$.each(this.data.search.to_open,function(i,val){if(val=="#")return true;if($(val).length&&$(val).is(".jstree-closed"))current.push(val);else remaining.push(val)});if(current.length){this.data.search.to_open=remaining;$.each(current,function(i,val){_this.open_node(val,function(){_this._search_open(true)})});done=false}}if(done)this.search(this.data.search.str,true)}}})})(jQuery);(function($){$.vakata.context={hide_on_mouseleave:false,cnt:$("<div id='vakata-contextmenu' />"),
vis:false,tgt:false,par:false,func:false,data:false,rtl:false,show:function(s,t,x,y,d,p,rtl){$.vakata.context.rtl=!!rtl;var html=$.vakata.context.parse(s),h,w;if(!html)return;$.vakata.context.vis=true;$.vakata.context.tgt=t;$.vakata.context.par=p||t||null;$.vakata.context.data=d||null;$.vakata.context.cnt.html(html).css({"visibility":"hidden","display":"block","left":0,"top":0});if($.vakata.context.hide_on_mouseleave)$.vakata.context.cnt.one("mouseleave",function(e){$.vakata.context.hide()});h=$.vakata.context.cnt.height();
w=$.vakata.context.cnt.width();if(x+w>$(document).width()){x=$(document).width()-(w+5);$.vakata.context.cnt.find("li > ul").addClass("right")}if(y+h>$(document).height()){y=y-(h+t[0].offsetHeight);$.vakata.context.cnt.find("li > ul").addClass("bottom")}$.vakata.context.cnt.css({"left":x,"top":y}).find("li:has(ul)").bind("mouseenter",function(e){var w=$(document).width(),h=$(document).height(),ul=$(this).children("ul").show();if(w!==$(document).width())ul.toggleClass("right");if(h!==$(document).height())ul.toggleClass("bottom")}).bind("mouseleave",
function(e){$(this).children("ul").hide()}).end().css({"visibility":"visible"}).show();$(document).triggerHandler("context_show.vakata")},hide:function(){$.vakata.context.vis=false;$.vakata.context.cnt.attr("class","").css({"visibility":"hidden"});$(document).triggerHandler("context_hide.vakata")},parse:function(s,is_callback){if(!s)return false;var str="",tmp=false,was_sep=true;if(!is_callback)$.vakata.context.func={};str+="<ul>";$.each(s,function(i,val){if(!val)return true;$.vakata.context.func[i]=
val.action;if(!was_sep&&val.separator_before)str+="<li class='vakata-separator vakata-separator-before'></li>";was_sep=false;str+="<li class='"+(val._class||"")+(val._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(val.icon&&val.icon.indexOf("/")===-1)str+=" class='"+val.icon+"' ";if(val.icon&&val.icon.indexOf("/")!==-1)str+=" style='background:url("+val.icon+") center center no-repeat;' ";str+=">&#160;</ins><a href='#' rel='"+i+"'>";if(val.submenu)str+="<span style='float:"+($.vakata.context.rtl?
"left":"right")+";'>&raquo;</span>";str+=val.label+"</a>";if(val.submenu){tmp=$.vakata.context.parse(val.submenu,true);if(tmp)str+=tmp}str+="</li>";if(val.separator_after){str+="<li class='vakata-separator vakata-separator-after'></li>";was_sep=true}});str=str.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");str+="</ul>";$(document).triggerHandler("context_parse.vakata");return str.length>10?str:false},exec:function(i){if($.isFunction($.vakata.context.func[i])){$.vakata.context.func[i].call($.vakata.context.data,
$.vakata.context.par);return true}else return false}};$(function(){var css_string=""+"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } "+"#vakata-contextmenu ul { min-width:180px; *width:180px; } "+"#vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } "+"#vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } "+
"#vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } "+"#vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } "+"#vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } "+"#vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } "+"#vakata-contextmenu .right { right:100%; left:auto; } "+
"#vakata-contextmenu .bottom { bottom:-1px; top:auto; } "+"#vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";$.vakata.css.add_sheet({str:css_string,title:"vakata"});$.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(e){if(!$(this).parent().hasClass("jstree-contextmenu-disabled")&&$.vakata.context.exec($(this).attr("rel")))$.vakata.context.hide();
else $(this).blur()}).delegate("a","mouseover",function(){$.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");$(document).bind("mousedown",function(e){if($.vakata.context.vis&&!$.contains($.vakata.context.cnt[0],e.target))$.vakata.context.hide()});if(typeof $.hotkeys!=="undefined")$(document).bind("keydown","up",function(e){if($.vakata.context.vis){var o=$.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();
if(!o.length)o=$.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last();o.addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","down",function(e){if($.vakata.context.vis){var o=$.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!o.length)o=$.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first();
o.addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","right",function(e){if($.vakata.context.vis){$.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","left",function(e){if($.vakata.context.vis){$.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");
e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","esc",function(e){$.vakata.context.hide();e.preventDefault()}).bind("keydown","space",function(e){$.vakata.context.cnt.find(".vakata-hover").last().children("a").click();e.preventDefault()})});$.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",$.proxy(function(e){e.preventDefault();if(!$(e.currentTarget).hasClass("jstree-loading"))this.show_contextmenu(e.currentTarget,e.pageX,e.pageY)},
this)).delegate("a","click.jstree",$.proxy(function(e){if(this.data.contextmenu)$.vakata.context.hide()},this)).bind("destroy.jstree",$.proxy(function(){if(this.data.contextmenu)$.vakata.context.hide()},this));$(document).bind("context_hide.vakata",$.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{"create":{"separator_before":false,"separator_after":true,"label":"Create","action":function(obj){this.create(obj)}},"rename":{"separator_before":false,
"separator_after":false,"label":"Rename","action":function(obj){this.rename(obj)}},"remove":{"separator_before":false,"icon":false,"separator_after":false,"label":"Delete","action":function(obj){if(this.is_selected(obj))this.remove();else this.remove(obj)}},"ccp":{"separator_before":true,"icon":false,"separator_after":false,"label":"Edit","action":false,"submenu":{"cut":{"separator_before":false,"separator_after":false,"label":"Cut","action":function(obj){this.cut(obj)}},"copy":{"separator_before":false,
"icon":false,"separator_after":false,"label":"Copy","action":function(obj){this.copy(obj)}},"paste":{"separator_before":false,"icon":false,"separator_after":false,"label":"Paste","action":function(obj){this.paste(obj)}}}}}},_fn:{show_contextmenu:function(obj,x,y){obj=this._get_node(obj);var s=this.get_settings().contextmenu,a=obj.children("a:visible:eq(0)"),o=false,i=false;if(s.select_node&&this.data.ui&&!this.is_selected(obj)){this.deselect_all();this.select_node(obj,true)}if(s.show_at_node||typeof x===
"undefined"||typeof y==="undefined"){o=a.offset();x=o.left;y=o.top+this.data.core.li_height}i=obj.data("jstree")&&obj.data("jstree").contextmenu?obj.data("jstree").contextmenu:s.items;if($.isFunction(i))i=i.call(this,obj);this.data.contextmenu=true;$.vakata.context.show(i,a,x,y,this,obj,this._get_settings().core.rtl);if(this.data.themes)$.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function($){$.jstree.plugin("types",{__init:function(){var s=this._get_settings().types;
this.data.types.attach_to=[];this.get_container().bind("init.jstree",$.proxy(function(){var types=s.types,attr=s.type_attr,icons_css="",_this=this;$.each(types,function(i,tp){$.each(tp,function(k,v){if(!/^(max_depth|max_children|icon|valid_children)$/.test(k))_this.data.types.attach_to.push(k)});if(!tp.icon)return true;if(tp.icon.image||tp.icon.position){if(i=="default")icons_css+=".jstree-"+_this.get_index()+" a > .jstree-icon { ";else icons_css+=".jstree-"+_this.get_index()+" li["+attr+'="'+i+'"] > a > .jstree-icon { ';
if(tp.icon.image)icons_css+=" background-image:url("+tp.icon.image+"); ";if(tp.icon.position)icons_css+=" background-position:"+tp.icon.position+"; ";else icons_css+=" background-position:0 0; ";icons_css+="} "}});if(icons_css!=="")$.vakata.css.add_sheet({"str":icons_css,title:"jstree-types"})},this)).bind("before.jstree",$.proxy(function(e,data){var s,t,o=this._get_settings().types.use_data?this._get_node(data.args[0]):false,d=o&&o!==-1&&o.length?o.data("jstree"):false;if(d&&d.types&&d.types[data.func]===
false){e.stopImmediatePropagation();return false}if($.inArray(data.func,this.data.types.attach_to)!==-1){if(!data.args[0]||!data.args[0].tagName&&!data.args[0].jquery)return;s=this._get_settings().types.types;t=this._get_type(data.args[0]);if((s[t]&&typeof s[t][data.func]!=="undefined"||s["default"]&&typeof s["default"][data.func]!=="undefined")&&this._check(data.func,data.args[0])===false){e.stopImmediatePropagation();return false}}},this));if(is_ie6)this.get_container().bind("load_node.jstree set_type.jstree",
$.proxy(function(e,data){var r=data&&data.rslt&&data.rslt.obj&&data.rslt.obj!==-1?this._get_node(data.rslt.obj).parent():this.get_container_ul(),c=false,s=this._get_settings().types;$.each(s.types,function(i,tp){if(tp.icon&&(tp.icon.image||tp.icon.position)){c=i==="default"?r.find("li > a > .jstree-icon"):r.find("li["+s.type_attr+"='"+i+"'] > a > .jstree-icon");if(tp.icon.image)c.css("backgroundImage","url("+tp.icon.image+")");c.css("backgroundPosition",tp.icon.position||"0 0")}})},this))},defaults:{max_children:-1,
max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{"max_children":-1,"max_depth":-1,"valid_children":"all"}}},_fn:{_types_notify:function(n,data){if(data.type&&this._get_settings().types.use_data)this.set_type(data.type,n)},_get_type:function(obj){obj=this._get_node(obj);return!obj||!obj.length?false:obj.attr(this._get_settings().types.type_attr)||"default"},set_type:function(str,obj){obj=this._get_node(obj);var ret=!obj.length||!str?false:obj.attr(this._get_settings().types.type_attr,
str);if(ret)this.__callback({obj:obj,type:str});return ret},_check:function(rule,obj,opts){obj=this._get_node(obj);var v=false,t=this._get_type(obj),d=0,_this=this,s=this._get_settings().types,data=false;if(obj===-1)if(!!s[rule])v=s[rule];else return;else{if(t===false)return;data=s.use_data?obj.data("jstree"):false;if(data&&data.types&&typeof data.types[rule]!=="undefined")v=data.types[rule];else if(!!s.types[t]&&typeof s.types[t][rule]!=="undefined")v=s.types[t][rule];else if(!!s.types["default"]&&
typeof s.types["default"][rule]!=="undefined")v=s.types["default"][rule]}if($.isFunction(v))v=v.call(this,obj);if(rule==="max_depth"&&obj!==-1&&opts!==false&&s.max_depth!==-2&&v!==0)obj.children("a:eq(0)").parentsUntil(".jstree","li").each(function(i){if(s.max_depth!==-1&&s.max_depth-(i+1)<=0){v=0;return false}d=i===0?v:_this._check(rule,this,false);if(d!==-1&&d-(i+1)<=0){v=0;return false}if(d>=0&&(d-(i+1)<v||v<0))v=d-(i+1);if(s.max_depth>=0&&(s.max_depth-(i+1)<v||v<0))v=s.max_depth-(i+1)});return v},
check_move:function(){if(!this.__call_old())return false;var m=this._get_move(),s=m.rt._get_settings().types,mc=m.rt._check("max_children",m.cr),md=m.rt._check("max_depth",m.cr),vc=m.rt._check("valid_children",m.cr),ch=0,d=1,t;if(vc==="none")return false;if($.isArray(vc)&&m.ot&&m.ot._get_type){m.o.each(function(){if($.inArray(m.ot._get_type(this),vc)===-1){d=false;return false}});if(d===false)return false}if(s.max_children!==-2&&mc!==-1){ch=m.cr===-1?this.get_container().find("> ul > li").not(m.o).length:
m.cr.find("> ul > li").not(m.o).length;if(ch+m.o.length>mc)return false}if(s.max_depth!==-2&&md!==-1){d=0;if(md===0)return false;if(typeof m.o.d==="undefined"){t=m.o;while(t.length>0){t=t.find("> ul > li");d++}m.o.d=d}if(md-m.o.d<0)return false}return true},create_node:function(obj,position,js,callback,is_loaded,skip_check){if(!skip_check&&(is_loaded||this._is_loaded(obj))){var p=typeof position=="string"&&position.match(/^before|after$/i)&&obj!==-1?this._get_parent(obj):this._get_node(obj),s=this._get_settings().types,
mc=this._check("max_children",p),md=this._check("max_depth",p),vc=this._check("valid_children",p),ch;if(typeof js==="string")js={data:js};if(!js)js={};if(vc==="none")return false;if($.isArray(vc))if(!js.attr||!js.attr[s.type_attr]){if(!js.attr)js.attr={};js.attr[s.type_attr]=vc[0]}else if($.inArray(js.attr[s.type_attr],vc)===-1)return false;if(s.max_children!==-2&&mc!==-1){ch=p===-1?this.get_container().find("> ul > li").length:p.find("> ul > li").length;if(ch+1>mc)return false}if(s.max_depth!==-2&&
md!==-1&&md-1<0)return false}return this.__call_old(true,obj,position,js,callback,is_loaded,skip_check)}}})})(jQuery);(function($){$.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(obj,s_call,e_call){var _this=
this;this.load_node_html(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){obj=this._get_node(obj);return obj==-1||!obj||!this._get_settings().html_data.ajax&&!$.isFunction(this._get_settings().html_data.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_html:function(obj,s_call,e_call){var d,s=this.get_settings().html_data,error_func=function(){},success_func=function(){};obj=this._get_node(obj);
if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){if(d&&d!==""&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")!==""){d=$(d);if(!d.is("ul"))d=$("<ul />").append(d);if(obj==-1||!obj)this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}},this));break;case !s.data&&!s.ajax:if(!obj||obj==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
this.clean_node()}if(s_call)s_call.call(this);break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1){d=$(s.data);if(!d.is("ul"))d=$("<ul />").append(d);this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
this.clean_node()}if(s_call)s_call.call(this);break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:obj=this._get_node(obj);error_func=function(x,t,e){var ef=this.get_settings().html_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!=-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};
success_func=function(d,t,x){var sf=this.get_settings().html_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")==="")return error_func.call(this,x,t,"");if(d){d=$(d);if(!d.is("ul"))d=$("<ul />").append(d);if(obj==-1||!obj)this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}};s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="html";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}}}});$.jstree.defaults.plugins.push("html_data")})(jQuery);
(function($){$.jstree.plugin("themeroller",{__init:function(){var s=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){if(!$(e.currentTarget).hasClass("jstree-loading"))$(this).addClass(s.item_h)}).delegate("a","mouseleave.jstree",function(){$(this).removeClass(s.item_h)}).bind("init.jstree",$.proxy(function(e,data){data.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");
this._themeroller(data.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",$.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.obj)},this)).bind("delete_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.parent)},this)).bind("correct_state.jstree",$.proxy(function(e,data){data.rslt.obj.children("ins.jstree-icon").removeClass(s.opened+
" "+s.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_open+" "+s.item_clsd).addClass(s.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("a").addClass(s.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",$.proxy(function(e,data){this.get_container().find("a."+
s.item_a).removeClass(s.item_a).end().find("a.jstree-clicked").addClass(s.item_a)},this)).bind("dehover_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("a").removeClass(s.item_h)},this)).bind("hover_node.jstree",$.proxy(function(e,data){this.get_container().find("a."+s.item_h).not(data.rslt.obj).removeClass(s.item_h);data.rslt.obj.children("a").addClass(s.item_h)},this)).bind("move_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.o);this._themeroller(data.rslt.op)},this))},
__destroy:function(){var s=this._get_settings().themeroller,c=["ui-icon"];$.each(s,function(i,v){v=v.split(" ");if(v.length)c=c.concat(v)});this.get_container().removeClass("ui-widget-content").find("."+c.join(", .")).removeClass(c.join(" "))},_fn:{_themeroller:function(obj){var s=this._get_settings().themeroller;obj=!obj||obj==-1?this.get_container_ul():this._get_node(obj).parent();obj.find("li.jstree-closed").children("ins.jstree-icon").removeClass(s.opened).addClass("ui-icon "+s.closed).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,
"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_leaf+" "+s.item_open).addClass(s.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(s.closed).addClass("ui-icon "+s.opened).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===
-1}).removeClass(s.item_leaf+" "+s.item_clsd).addClass(s.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(s.closed+" ui-icon "+s.opened).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_clsd+" "+s.item_open).addClass(s.item_leaf||
"jstree-no-icon")}},defaults:{"opened":"ui-icon-triangle-1-se","closed":"ui-icon-triangle-1-e","item":"ui-state-default","item_h":"ui-state-hover","item_a":"ui-state-active","item_open":"ui-icon-folder-open","item_clsd":"ui-icon-folder-collapsed","item_leaf":"ui-icon-document"}});$(function(){var css_string=""+".jstree-themeroller .ui-icon { overflow:visible; } "+".jstree-themeroller a { padding:0 2px; } "+".jstree-themeroller .jstree-no-icon { display:none; }";$.vakata.css.add_sheet({str:css_string,
title:"jstree"})})})(jQuery);(function($){$.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",$.proxy(function(e,data){var nms=[],res=true,p,t;if(data.func=="move_node")if(data.args[4]===true)if(data.args[0].o&&data.args[0].o.length){data.args[0].o.children("a").each(function(){nms.push($(this).text().replace(/^\s+/g,""))});res=this._check_unique(nms,data.args[0].np.find("> ul > li").not(data.args[0].o),"move_node")}if(data.func=="create_node")if(data.args[4]||this._is_loaded(data.args[0])){p=
this._get_node(data.args[0]);if(data.args[1]&&(data.args[1]==="before"||data.args[1]==="after")){p=this._get_parent(data.args[0]);if(!p||p===-1)p=this.get_container()}if(typeof data.args[2]==="string")nms.push(data.args[2]);else if(!data.args[2]||!data.args[2].data)nms.push(this._get_string("new_node"));else nms.push(data.args[2].data);res=this._check_unique(nms,p.find("> ul > li"),"create_node")}if(data.func=="rename_node"){nms.push(data.args[1]);t=this._get_node(data.args[0]);p=this._get_parent(t);
if(!p||p===-1)p=this.get_container();res=this._check_unique(nms,p.find("> ul > li").not(t),"rename_node")}if(!res){e.stopPropagation();return false}},this))},defaults:{error_callback:$.noop},_fn:{_check_unique:function(nms,p,func){var cnms=[];p.children("a").each(function(){cnms.push($(this).text().replace(/^\s+/g,""))});if(!cnms.length||!nms.length)return true;cnms=cnms.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if(cnms.length+
nms.length!=cnms.concat(nms).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){this._get_settings().unique.error_callback.call(null,nms,p,func);return false}return true},check_move:function(){if(!this.__call_old())return false;var p=this._get_move(),nms=[];if(p.o&&p.o.length){p.o.children("a").each(function(){nms.push($(this).text().replace(/^\s+/g,""))});return this._check_unique(nms,p.np.find("> ul > li").not(p.o),"check_move")}return true}}})})(jQuery);
(function($){$.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",$.proxy(function(e,data){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",$.proxy(function(e,data){this._prepare_wholerow_span(data&&data.rslt&&data.rslt.obj?data.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
$.proxy(function(e,data){if(this.data.to)clearTimeout(this.data.to);this.data.to=setTimeout(function(t,o){return function(){t._prepare_wholerow_ul(o)}}(this,data&&data.rslt&&data.rslt.obj?data.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",$.proxy(function(e,data){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",$.proxy(function(e,
data){data.rslt.obj.each(function(){var ref=data.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt(($(this).offset().top-data.inst.get_container().offset().top+data.inst.get_container()[0].scrollTop)/data.inst.data.core.li_height,10)+")");ref.children("a").attr("class",data.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+
(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(e.type==="hover_node"){var ref=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((data.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");ref.children("a").attr("class",data.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var n=$(e.currentTarget);
if(e.target.tagName==="A"||e.target.tagName==="INS"&&n.closest("li").is(".jstree-open, .jstree-closed"))return;n.closest("li").children("a:visible:eq(0)").click();e.stopImmediatePropagation()}).delegate("li","mouseover.jstree",$.proxy(function(e){e.stopImmediatePropagation();if($(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return false;this.hover_node(e.currentTarget);return false},this)).delegate("li","mouseleave.jstree",$.proxy(function(e){if($(e.currentTarget).children("a").hasClass("jstree-hovered").length)return;
this.dehover_node(e.currentTarget)},this));if(is_ie7||is_ie6)$.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(obj){obj=!obj||obj==-1?this.get_container().find("> ul > li"):this._get_node(obj);if(obj===false)return;obj.each(function(){$(this).find("li").andSelf().each(function(){var $t=
$(this);if($t.children(".jstree-wholerow-span").length)return true;$t.prepend("<span class='jstree-wholerow-span' style='width:"+$t.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var o=this.get_container().children("ul").eq(0),h=o.html();o.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==h){this.data.wholerow.last_html=h;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(o.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(o.parent()[0].scrollWidth).css("top",
(o.height()+(is_ie7?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});$(function(){var css_string=""+".jstree .jstree-wholerow-real { position:relative; z-index:1; } "+".jstree .jstree-wholerow-real li { cursor:pointer; } "+".jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } "+".jstree .jstree-wholerow { position:relative; z-index:0; height:0; } "+".jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } "+
".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }"+".jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }"+".jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } "+
".jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";if(is_ff2)css_string+=""+".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } "+".jstree .jstree-wholerow-real a { border-color:transparent !important; } ";if(is_ie7||is_ie6)css_string+=""+".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } "+
".jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";$.vakata.css.add_sheet({str:css_string,title:"jstree"})})})(jQuery);(function($){var nodeInterface=["getChildren","getChildrenCount","getAttr","getName","getProps"],validateInterface=function(obj,inter){var valid=true;obj=obj||{};inter=[].concat(inter);$.each(inter,function(i,v){if(!$.isFunction(obj[v])){valid=false;return false}});return valid};$.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";
this._get_settings().json_data.data=function(n,b){var obj=n==-1?this._get_settings().model.object:n.data("jstree_model");if(!validateInterface(obj,nodeInterface))return b.call(null,false);if(this._get_settings().model.async)obj.getChildren($.proxy(function(data){this.model_done(data,b)},this));else this.model_done(obj.getChildren(),b)}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(data,callback){var ret=[],s=this._get_settings(),_this=this;if(!$.isArray(data))data=
[data];$.each(data,function(i,nd){var r=nd.getProps()||{};r.attr=nd.getAttr()||{};if(nd.getChildrenCount())r.state="closed";r.data=nd.getName();if(!$.isArray(r.data))r.data=[r.data];if(_this.data.types&&$.isFunction(nd.getType))r.attr[s.types.type_attr]=nd.getType();if(r.attr.id&&s.model.id_prefix)r.attr.id=s.model.id_prefix+r.attr.id;if(!r.metadata)r.metadata={};r.metadata.jstree_model=nd;ret.push(r)});callback.call(null,ret)}}})})(jQuery)})();(function(a){a.Jcrop=function(b,c){function h(a){return a+"px"}function i(a){return d.baseClass+"-"+a}function j(){return a.fx.step.hasOwnProperty("backgroundColor")}function k(b){var c=a(b).offset();return[c.left,c.top]}function l(a){return[a.pageX-e[0],a.pageY-e[1]]}function m(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function n(a,b){e=k(E),bd.setCursor(a==="move"?a:a+"-resize");
if(a==="move")return bd.activateHandlers(p(b),u);var c=ba.getFixed(),d=q(a),f=ba.getCorner(q(d));ba.setPressed(ba.getCorner(d)),ba.setCurrent(f),bd.activateHandlers(o(a,c),u)}function o(a,b){return function(c){if(!d.aspectRatio)switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}else switch(a){case "e":c[1]=b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}ba.setCurrent(c),bc.update()}}function p(a){var b=a;return be.watchKeys(),
function(a){ba.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bc.update()}}function q(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function r(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=k(E),X=!0,n(a,l(b)),b.stopPropagation(),b.preventDefault(),!1)}}function s(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&
(e=c,d=c/a.height()*a.width()),U=a.width()/d,V=a.height()/e,a.width(d).height(e)}function t(a){return{x:a.x*U,y:a.y*V,x2:a.x2*U,y2:a.y2*V,w:a.w*U,h:a.h*V}}function u(a){var b=ba.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bc.enableHandles(),bc.done()):bc.release(),bd.setCursor(d.allowSelect?"crosshair":"default")}function v(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;X=!0,e=k(E),bc.disableHandles(),bd.setCursor("crosshair");var b=l(a);return ba.setPressed(b),bc.update(),bd.activateHandlers(w,
u),be.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function w(a){ba.setCurrent(a),bc.update()}function z(){var b=a("<div></div>").addClass(i("tracker"));return a.browser.msie&&b.css({opacity:0,backgroundColor:"white"}),b}function bf(a){H.removeClass().addClass(i("holder")).addClass(a)}function bg(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/U,e=a[1]/V,f=a[2]/U,g=a[3]/V;if(Y)return;var h=ba.flipCoords(c,e,f,g),i=ba.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],
n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;x=k[0],y=k[1],f=k[2],g=k[3],bc.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=x+q/100*m,k[1]=y+q/100*n,k[2]=f+q/100*o,k[3]=g+q/100*p,q>=99.8&&(q=100),q<100?(bi(k),t()):(bc.done(),typeof b=="function"&&b.call(bt))}}();t()}function bh(a){bi([a[0]/U,a[1]/V,a[2]/U,a[3]/V]),d.onSelect.call(bt,t(ba.getFixed())),bc.enableHandles()}function bi(a){ba.setPressed([a[0],a[1]]),ba.setCurrent([a[2],a[3]]),bc.update()}function bj(){return t(ba.getFixed())}
function bk(){return ba.getFixed()}function bl(a){m(a),bs()}function bm(){d.disabled=!0,bc.disableHandles(),bc.setCursor("default"),bd.setCursor("default")}function bn(){d.disabled=!1,bs()}function bo(){bc.done(),bd.activateHandlers(null,null)}function bp(){H.remove(),B.show(),a(b).removeData("Jcrop")}function bq(a,b){bc.release(),bm();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;E.width(e).height(f),E.attr("src",a),I.attr("src",a),s(E,g,h),F=E.width(),G=
E.height(),I.width(F).height(G),N.width(F+M*2).height(G+M*2),H.width(F).height(G),bb.resize(F,G),bn(),typeof b=="function"&&b.call(bt)},c.src=a}function br(a,b,c){var e=b||d.bgColor;d.bgFade&&j()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function bs(a){d.allowResize?a?bc.enableOnly():bc.enableHandles():bc.disableHandles(),bd.setCursor(d.allowSelect?"crosshair":"default"),bc.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&
(U=d.trueSize[0]/F,V=d.trueSize[1]/G),d.hasOwnProperty("setSelect")&&(bh(d.setSelect),bc.done(),delete d.setSelect),bb.refresh(),d.bgColor!=O&&(br(d.shade?bb.getShades():H,d.shade?d.shadeColor||d.bgColor:d.bgColor),O=d.bgColor),P!=d.bgOpacity&&(P=d.bgOpacity,d.shade?bb.refresh():bc.setBgOpacity(P)),Q=d.maxSize[0]||0,R=d.maxSize[1]||0,S=d.minSize[0]||0,T=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(E.attr("src",d.outerImage),delete d.outerImage),bc.refresh()}var d=a.extend({},a.Jcrop.defaults),
e,f,g=!1;a.browser.msie&&a.browser.version.split(".")[0]==="6"&&(g=!0),typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),m(c);var A={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},B=a(b),C=!0;if(b.tagName=="IMG"){if(B[0].width!=0&&B[0].height!=0)B.width(B[0].width),B.height(B[0].height);else{var D=new Image;D.src=B[0].src,B.width(D.width),B.height(D.height)}var E=B.clone().removeAttr("id").css(A).show();E.width(B.width()),E.height(B.height()),B.after(E).hide()}else E=
B.css(A).show(),C=!1,d.shade===null&&(d.shade=!0);s(E,d.boxWidth,d.boxHeight);var F=E.width(),G=E.height(),H=a("<div />").width(F).height(G).addClass(i("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(B).append(E);d.addClass&&H.addClass(d.addClass);var I=a("<div />"),J=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),K=a("<div />").width("100%").height("100%").css("zIndex",320),L=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=
ba.getFixed();d.onDblClick.call(bt,a)}).insertBefore(E).append(J,K);C&&(I=a("<img />").attr("src",E.attr("src")).css(A).width(F).height(G),J.append(I)),g&&L.css({overflowY:"hidden"});var M=d.boundary,N=z().width(F+M*2).height(G+M*2).css({position:"absolute",top:h(-M),left:h(-M),zIndex:290}).mousedown(v),O=d.bgColor,P=d.bgOpacity,Q,R,S,T,U,V,W=!0,X,Y,Z;e=k(E);var _=function(){function a(){var a={},b=["touchstart","touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=
b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,d.disabled?!1:a==="move"&&!d.allowMove?!1:(X=!0,n(a,l(b)),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return a.pageX=
a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,v(a)},isSupported:a,support:b()}}(),ba=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),G<e+g&&(g+=G-(e+g)),F<c+f&&(f+=F-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case "ne":return[b.x2,b.y];case "nw":return[b.x,b.y];case "se":return[b.x2,b.y2];case "sw":return[b.x,
b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/U,h=d.maxSize[0]/U,i=d.maxSize[1]/V,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=F*10),i===0&&(i=G*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>F&&(r=F,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>G&&(s=G,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/
f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>F&&(a-=r-F,r=F),s<0?(b-=s,s=0):s>G&&(b-=s-G,s=G),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>F&&(a[0]=F),a[1]>G&&(a[1]=G),[a[0],a[1]]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return Q&&Math.abs(d)>Q&&(c=d>0?a+Q:a-Q),R&&Math.abs(f)>R&&(e=f>0?b+R:b-R),T/V&&Math.abs(f)<T/V&&(e=f>0?b+T/V:b-T/V),S/U&&Math.abs(d)<S/U&&
(c=d>0?a+S/U:a-S/U),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>F&&(g=c-F,a-=g,c-=g),e>G&&(g=e-G,b-=g,e-=g),a>F&&(g=a-G,e-=g,b-=g),b>G&&(g=b-G,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),bb=function(){function f(a,b){e.left.css({height:h(b)}),e.right.css({height:h(b)})}function g(){return i(ba.getFixed())}
function i(a){e.top.css({left:h(a.x),width:h(a.w),height:h(a.y)}),e.bottom.css({top:h(a.y2),left:h(a.x),width:h(a.w),height:h(G-a.y2)}),e.right.css({left:h(a.x2),width:h(F-a.x2)}),e.left.css({width:h(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(E),g(),bc.setBgOpacity(1,0,1),I.hide(),l(d.shadeColor||d.bgColor,1),bc.isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){br(p(),a,b)}function m(){b&&
(c.remove(),I.show(),b=!1,bc.isAwake()?bc.setBgOpacity(d.bgOpacity,1,1):(bc.setBgOpacity(1,1,1),bc.disableHandles()),br(H,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bc.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(G),right:j().height(G),bottom:j()};return{update:g,updateRaw:i,getShades:p,
setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bc=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(i(b));return J.append(c),c}function l(b,c){var d=a("<div />").mousedown(r(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return _.support&&d.bind("touchstart.jcrop",_.createDragger(b)),K.append(d),d}function m(a){var b=d.handleSize;return l(a,c++).css({opacity:d.handleOpacity}).width(b).height(b).addClass(i("handle"))}
function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case "n":b="hline";break;case "s":b="hline bottom";break;case "e":b="vline right";break;case "w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function s(a,b){d.shade||I.css({top:h(-b),left:h(-a)}),L.css({top:h(b),left:h(a)})}function u(a,b){L.width(a).height(b)}function v(){var a=ba.getFixed();
ba.setPressed([a.x,a.y]),ba.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=ba.getFixed();u(c.w,c.h),s(c.x,c.y),d.shade&&bb.updateRaw(c),b||A(),a?d.onSelect.call(bt,t(c)):d.onChange.call(bt,t(c))}function y(a,c,e){if(!b&&!c)return;d.bgFade&&!e?E.animate({opacity:a},{queue:!1,duration:d.fadeTime}):E.css("opacity",a)}function A(){L.show(),d.shade?bb.opacity(P):y(P,!0),b=!0}function B(){F(),L.hide(),d.shade?bb.opacity(1):y(1),b=!1,d.onRelease.call(bt)}function C(){j&&K.show()}
function D(){j=!0;if(d.allowResize)return K.show(),!0}function F(){j=!1,K.hide()}function G(a){Y===a?F():D()}function H(){G(!1),v()}var b,c=370,e={},f={},g={},j=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=z().mousedown(r("move")).css({cursor:"move",
position:"absolute",zIndex:360});return _.support&&M.bind("touchstart.jcrop",_.createDragger("move")),J.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:D,enableOnly:function(){j=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:y,done:H}}(),bd=function(){function f(){N.css({zIndex:450}),_.support&&a(document).bind("touchmove.jcrop",k).bind("touchend.jcrop",m),e&&a(document).bind("mousemove.jcrop",
h).bind("mouseup.jcrop",i)}function g(){N.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(l(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),X&&(X=!1,c(l(a)),bc.isAwake()&&d.onSelect.call(bt,t(ba.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d){return X=!0,b=a,c=d,f(),!1}function k(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,h(a)}function m(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,
a.pageY=a.originalEvent.changedTouches[0].pageY,i(a)}function n(a){N.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||N.mousemove(h).mouseup(i).mouseout(i),E.before(N),{activateHandlers:j,setCursor:n}}(),be=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function h(a,b,c){d.allowMove&&(ba.moveOffset([b,c]),bc.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Z=a.shiftKey?!0:!1;var b=
Z?10:1;switch(a.keyCode){case 37:h(a,-b,0);break;case 39:h(a,b,0);break;case 38:h(a,0,-b);break;case 40:h(a,0,b);break;case 27:d.allowSelect&&bc.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),g||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(E)):b.insertBefore(E)),{watchKeys:e}}();
_.support&&N.bind("touchstart.jcrop",_.newSelection),K.hide(),bs(!0);var bt={setImage:bq,animateTo:bg,setSelect:bh,setOptions:bl,tellSelect:bj,tellScaled:bk,setClass:bf,disable:bm,enable:bn,cancel:bo,release:bc.release,destroy:bp,focus:be.watchKeys,getBounds:function(){return[F*U,G*V]},getWidgetSize:function(){return[F,G]},getScaleFactor:function(){return[U,V]},getOptions:function(){return d},ui:{holder:H,selection:L}};return a.browser.msie&&H.bind("selectstart",function(){return!1}),B.data("Jcrop",
bt),bt},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),
a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:!1,borderOpacity:0.4,handleOpacity:0.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w",
"nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(factory){if(typeof define==="function"&&define.amd)define(["jquery"],factory);else if(typeof exports==="object")factory(require("jquery"));else factory(jQuery)})(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0)s=s.slice(1,-1).replace(/\\"/g,
'"').replace(/\\\\/g,"\\");try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setTime(+t+days*864E5)}return document.cookie=
[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}if(!key&&
(cookie=read(cookie))!==undefined)result[name]=cookie}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined)return false;$.cookie(key,"",$.extend({},options,{expires:-1}));return!$.cookie(key)}});/*

 jquery.layout 1.4.1
 $Date: 2014-07-13 08:00:00 (Sat, 13 Jul 2014) $
 $Rev: 1.0401 $

 Copyright (c) 2014 Kevin Dalman (http://jquery-dev.com)
 Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 SEE: http://layout.jquery-dev.com/LICENSE.txt

 Changelog: http://layout.jquery-dev.com/changelog.cfm

 Docs: http://layout.jquery-dev.com/documentation.html
 Tips: http://layout.jquery-dev.com/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
*/
(function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(v){return $.type(v)==="string"},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{if(isStr(fn))fn=eval(fn);if($.isFunction(fn))g(fn)(Instance)}catch(ex){}}function g(f){return f}};$.layout={version:"1.4.1",revision:1.0401,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},
drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",
right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",
padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",
height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(el){var $el=$(el),layout=$el.data("layout")||$el.data("parentLayout");if(layout){var $cont=layout.container;if($cont.data("layoutPane"))return $cont;var $pane=$cont.closest("."+$.layout.defaults.panes.paneClass);if($pane.data("layoutPane"))return $pane}return null},
getParentPaneInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("layoutPane"):null},getParentLayoutInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("parentLayout"):null},getEventObject:function(evt){return typeof evt==="object"&&evt.stopPropagation?evt:null},parsePaneName:function(evt_or_pane){var evt=$.layout.getEventObject(evt_or_pane),pane=evt_or_pane;if(evt){evt.stopPropagation();pane=$(this).data("layoutEdge")}if(pane&&
!/^(west|east|north|south|center)$/.test(pane)){$.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+pane+'"');pane="error"}return pane},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||
$.layout.getScrollbarSize("height")},getScrollbarSize:function(dim){var $c=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body");var d={width:$c.css("width")-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/)?d[dim]:d},disableTextSelection:function(){var $d=$(document),s="textSelectionDisabled",x=
"textSelectionInitialized";if($.fn.disableSelection){if(!$d.data(x))$d.on("mouseup",$.layout.enableTextSelection).data(x,true);if(!$d.data(s))$d.disableSelection().data(s,true)}},enableTextSelection:function(){var $d=$(document),s="textSelectionDisabled";if($.fn.enableSelection&&$d.data(s))$d.enableSelection().data(s,false)},showInvisibly:function($E,force){if($E&&$E.length&&(force||$E.css("display")==="none")){var s=$E[0].style,CSS={display:s.display||"",visibility:s.visibility||""};$E.css({display:"block",
visibility:"hidden"});return CSS}return{}},getElementDimensions:function($E,inset){var d={css:{},inset:{}},x=d.css,i={bottom:0},N=$.layout.cssNum,R=Math.round,off=$E.offset(),b,p,ei;d.offsetLeft=off.left;d.offsetTop=off.top;if(!inset)inset={};$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);ei=e.toLowerCase();d.inset[ei]=inset[ei]>=0?inset[ei]:p;i[ei]=d.inset[ei]+b});x.width=R($E.width());x.height=
R($E.height());x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);d.outerWidth=R($E.outerWidth());d.outerHeight=R($E.outerHeight());d.innerWidth=max(0,d.outerWidth-i.left-i.right);d.innerHeight=max(0,d.outerHeight-i.top-i.bottom);d.layoutWidth=R($E.innerWidth());d.layoutHeight=R($E.innerHeight());return d},getElementStyles:function($E,list){var CSS={},style=$E[0].style,props=list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),
p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];if(p.match(/(border|padding|margin)$/))for(j=0;j<4;j++){s=sides[j];if(p==="border")for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a]}else CSS[p+s]=style[p+s]}else CSS[p]=style[p]}return CSS},cssWidth:function($E,outerWidth){if(outerWidth<=0)return 0;var bs=!$.layout.browser.boxModel?"border-box":$.support.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,n=$.layout.cssNum,W=outerWidth;if(bs!=="border-box")W-=b($E,"Left")+b($E,"Right");
if(bs==="content-box")W-=n($E,"paddingLeft")+n($E,"paddingRight");return max(0,W)},cssHeight:function($E,outerHeight){if(outerHeight<=0)return 0;var bs=!$.layout.browser.boxModel?"border-box":$.support.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,n=$.layout.cssNum,H=outerHeight;if(bs!=="border-box")H-=b($E,"Top")+b($E,"Bottom");if(bs==="content-box")H-=n($E,"paddingTop")+n($E,"paddingBottom");return max(0,H)},cssNum:function($E,prop,allowAuto){if(!$E.jquery)$E=$($E);var CSS=
$.layout.showInvisibly($E),p=$.css($E[0],prop,true),v=allowAuto&&p=="auto"?p:Math.round(parseFloat(p)||0);$E.css(CSS);return v},borderWidth:function(el,side){if(el.jquery)el=el[0];var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);return $.css(el,b+"Style",true)==="none"?0:Math.round(parseFloat($.css(el,b+"Width",true))||0)},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return $.layout.browser.msie&&
x<0&&y<0||x>=L&&x<=R&&y>=T&&y<=B},msg:function(info,popup,debugTitle,debugOpts){if($.isPlainObject(info)&&window.debugData){if(typeof popup==="string"){debugOpts=debugTitle;debugTitle=popup}else if(typeof debugTitle==="object"){debugOpts=debugTitle;debugTitle=null}var t=debugTitle||"log( <object> )",o=$.extend({sort:false,returnHTML:false,display:false},debugOpts);if(popup===true||o.display)debugData(info,t,o);else if(window.console)console.log(debugData(info,t,o))}else if(popup)alert(info);else if(window.console)console.log(info);
else{var id="#layoutLogger",$l=$(id);if(!$l.length)$l=createLog();$l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+info.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}function createLog(){var pos=$.support.fixedPosition?"fixed":"absolute",$e=$('<div id="layoutLogger" style="position: '+pos+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">'+
'<div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;">'+'<span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div>'+'<ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul>'+"</div>").appendTo("body");$e.css("left",$(window).width()-$e.outerWidth()-5);if($.ui.draggable)$e.draggable({handle:":first-child"});
return $e}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie=b==="msie",cm=document.compatMode,bm=!ie||!cm||cm==="CSS1Compat"||$.support.boxModel||false;$.layout.browser={version:v,safari:b==="webkit",webkit:b==="chrome",msie:ie,isIE6:ie&&v==6,boxModel:bm};if(b)$.layout.browser[b]=
true;if(!bm&&!cm)$(function(){$.layout.browser.boxModel=$.support.boxModel});$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:false,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:true,showErrorMessages:true,showDebugMessages:false,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,
resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",
callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,
togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskContents:false,maskObjects:false,maskZindex:null,resizingGrid:false,livePaneResizing:false,liveContentResizing:false,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,
preventPrematureSlideClose:false,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,animatePaneSizing:false,children:null,containerSelector:"",initChildren:true,destroyChildren:true,
resizeChildren:true,triggerEventsOnLoad:false,triggerEventsDuringLiveResize:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",
size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};$.layout.optionsMap={layout:("name,instanceKey,stateManagement,effects,inset,zIndexes,errors,"+"zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,"+"outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,"+
"onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end").split(","),center:("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,"+"showOverflowOnHover,maskContents,maskObjects,liveContentResizing,"+"containerSelector,children,initChildren,resizeChildren,destroyChildren,"+"onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")};
$.layout.transformData=function(hash,addKeys){var json=addKeys?{panes:{},center:{}}:{},branch,optKey,keys,key,val,i,c;if(typeof hash!=="object")return json;for(optKey in hash){branch=json;val=hash[optKey];keys=optKey.split("__");c=keys.length-1;for(i=0;i<=c;i++){key=keys[i];if(i===c)if($.isPlainObject(val))branch[key]=$.layout.transformData(val);else branch[key]=val;else{if(!branch[key])branch[key]={};branch=branch[key]}}}return json};$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",
childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys",
"cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(opts){var map=$.layout.backwardCompatibility.map,oldData,newData,value;for(var itemPath in map){oldData=
getBranch(itemPath);value=oldData.branch[oldData.key];if(value!==undefined){newData=getBranch(map[itemPath],true);newData.branch[newData.key]=value;delete oldData.branch[oldData.key]}}function getBranch(path,create){var a=path.split("."),c=a.length-1,D={branch:opts,key:a[c]},i=0,k,undef;for(;i<c;i++){k=a[i];if(D.branch[k]==undefined)if(create)D.branch=D.branch[k]={};else D.branch={};else D.branch=D.branch[k]}return D}},renameAllOptions:function(opts){var ren=$.layout.backwardCompatibility.renameOptions;
ren(opts);if(opts.defaults){if(typeof opts.panes!=="object")opts.panes={};$.extend(true,opts.panes,opts.defaults);delete opts.defaults}if(opts.panes)ren(opts.panes);$.each($.layout.config.allPanes,function(i,pane){if(opts[pane])ren(opts[pane])});return opts}};$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,
options=$.extend(true,{},$.layout.defaults),effects=options.effects=$.extend(true,{},$.layout.effects),state={id:"layout"+$.now(),initialized:false,paneResizing:false,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=
setTimeout(fn,ms)},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s]}}},_log=function(msg,popup,debug){var o=options;if(o.showErrorMessages&&!debug||debug&&o.showDebugMessages)$.layout.msg(o.name+" / "+msg,popup!==false);return false},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,
lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P=hasPane?$Ps[pane]:0;if(hasPane&&!$P)return retVal;if(!hasPane&&$.type(pane)==="boolean"){skipBoundEvents=pane;pane=""}if(fn){if(isStr(fn))if(fn.match(/,/))args=fn.split(","),fn=eval(args[0]);else fn=eval(fn);if($.isFunction(fn))if(args.length)retVal=g(fn)(args[1]);else if(hasPane)retVal=g(fn)(pane,$Ps[pane],s,o,lName);else retVal=g(fn)(Instance,s,o,lName)}if(!skipBoundEvents&&retVal!==false)if(hasPane){o=options[pane];s=state[pane];$P.triggerHandler("layoutpane"+
lng,[pane,$P,s,o,lName]);if(shrt)$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])}else{$N.triggerHandler("layout"+lng,[Instance,s,o,lName]);if(shrt)$N.triggerHandler("layout"+shrt,[Instance,s,o,lName])}if(hasPane&&evtName==="onresize_end")resizeChildren(pane+"",true);return retVal;function g(f){return f}},_fixIframe=function(pane){if(browser.mozilla)return;var $P=$Ps[pane];if(state[pane].tagName==="IFRAME")$P.css(_c.hidden).css(_c.visible);else $P.find("IFRAME").css(_c.hidden).css(_c.visible)},
cssSize=function(pane,outerSize){var fn=_c[pane].dir=="horz"?cssH:cssW;return fn($Ps[pane],outerSize)},cssMinDims=function(pane){var $P=$Ps[pane],dir=_c[pane].dir,d={minWidth:1001-cssW($P,1E3),minHeight:1001-cssH($P,1E3)};if(dir==="horz")d.minSize=d.minHeight;if(dir==="vert")d.minSize=d.minWidth;return d},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&$E.data("autoHidden")&&
$E.innerHeight()>0){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&
!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},_parseSize=function(pane,size,dir){if(!dir)dir=_c[pane].dir;if(isStr(size)&&size.match(/%/))size=size==="100%"?-1:parseInt(size,10)/100;if(size===0)return 0;else if(size>=1)return parseInt(size,10);var o=options,avail=0;if(dir=="horz")avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?o.south.spacing_open:0);else if(dir=="vert")avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0);if(size===-1)return avail;
else if(size>0)return round(avail*size);else if(pane=="center")return 0;else{var dim=dir==="horz"?"height":"width",$P=$Ps[pane],$C=dim==="height"?$Cs[pane]:false,vis=$.layout.showInvisibly($P),szP=$P.css(dim),szC=$C?$C.css(dim):0;$P.css(dim,"auto");if($C)$C.css(dim,"auto");size=dim==="height"?$P.outerHeight():$P.outerWidth();$P.css(dim,szP).css(vis);if($C)$C.css(dim,szC);return size}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=inclSpace?o.spacing_open:
0,cSp=inclSpace?o.spacing_closed:0;if(!$P||s.isHidden)return 0;else if(s.isClosed||s.isSliding&&inclSpace)return cSp;else if(_c[pane].dir==="horz")return $P.outerHeight()+oSp;else return $P.outerWidth()+oSp},setSizeLimits=function(pane,slide){if(!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,type=c.sizeType.toLowerCase(),isSliding=slide!=undefined?slide:s.isSliding,$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.oppositeEdge[pane],altS=state[altPane],$altP=$Ps[altPane],
altPaneSize=!$altP||altS.isVisible===false||altS.isSliding?0:dir=="horz"?$altP.outerHeight():$altP.outerWidth(),altPaneSpacing=(!$altP||altS.isHidden?0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0,containerSize=dir=="horz"?sC.innerHeight:sC.innerWidth,minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=containerSize-paneSpacing-(isSliding?0:_parseSize("center",
minCenterSize,dir)+altPaneSize+altPaneSpacing),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=min(o.maxSize?_parseSize(pane,o.maxSize):1E5,limitSize),r=s.resizerPosition={},top=sC.inset.top,left=sC.inset.left,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case "north":r.min=top+minSize;r.max=top+maxSize;break;case "west":r.min=left+minSize;r.max=left+maxSize;break;case "south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case "east":r.min=
left+W-maxSize-rW;r.max=left+W-minSize-rW;break}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.inset.top;d.bottom+=sC.inset.bottom;d.left+=sC.inset.left;d.right+=sC.inset.right;return d},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),
o=options[pane],root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state===_closed?_open:_closed,classes=root+_hover+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates)classes+=root+_alt+_hover+(root+_pane+_alt+_hover);if(type=="resizer"&&$El.hasClass(root+_slide))classes+=root+_slide+_hover+(root+_pane+_slide+_hover);return $.trim(classes)},addHover=function(evt,
el){var $E=$(el||this);if(evt&&$E.data("layoutRole")==="toggler")evt.stopPropagation();$E.addClass(getHoverClasses($E))},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true))},onResizerEnter=function(evt){var pane=$(this).data("layoutEdge"),s=state[pane],$d=$(document);if(s.isResizing||state.paneResizing)return;if(options.maskPanesEarly)showMasks(pane,{resizing:true})},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave",
$d=$(document);timer.clear(pane+"_openSlider");timer.clear(name);if(!el)timer.set(name,function(){onResizerLeave(evt,e)},200);else if(options.maskPanesEarly&&!state.paneResizing)hideMasks()},_create=function(){initOptions();var o=options,s=state;s.creatingLayout=true;runPluginCallbacks(Instance,$.layout.onCreate);if(false===_runCallbacks("onload_start"))return"cancel";_initContainer();initHotkeys();$(window).bind("unload."+sID,unload);runPluginCallbacks(Instance,$.layout.onLoad);if(o.initPanes)_initLayoutElements();
delete s.creatingLayout;return state.initialized},isInitialized=function(){if(state.initialized||state.creatingLayout)return true;else return _initLayoutElements()},_initLayoutElements=function(retry){var o=options;if(!$N.is(":visible")){if(!retry&&browser.webkit&&$N[0].tagName==="BODY")setTimeout(function(){_initLayoutElements(true)},50);return false}if(!getPane("center").length)return _log(o.errors.centerPaneMissing);state.creatingLayout=true;$.extend(sC,elDims($N,o.inset));initPanes();if(o.scrollToBookmarkOnLoad){var l=
self.location;if(l.hash)l.replace(l.hash)}if(Instance.hasParentLayout)o.resizeWithWindow=false;else if(o.resizeWithWindow)$(window).bind("resize."+sID,windowResize);delete state.creatingLayout;state.initialized=true;runPluginCallbacks(Instance,$.layout.onReady);_runCallbacks("onload_end");return true},createChildren=function(evt_or_pane,opts){var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane];if(!$P)return;var $C=$Cs[pane],s=state[pane],o=options[pane],sm=options.stateManagement||{},cos=opts?o.children=
opts:o.children;if($.isPlainObject(cos))cos=[cos];else if(!cos||!$.isArray(cos))return;$.each(cos,function(idx,co){if(!$.isPlainObject(co))return;var $containers=co.containerSelector?$P.find(co.containerSelector):$C||$P;$containers.each(function(){var $cont=$(this),child=$cont.data("layout");if(!child){setInstanceKey({container:$cont,options:co},s);if(sm.includeChildren&&state.stateData[pane]){var paneChildren=state.stateData[pane].children||{},childState=paneChildren[co.instanceKey],co_sm=co.stateManagement||
(co.stateManagement={autoLoad:true});if(co_sm.autoLoad===true&&childState){co_sm.autoSave=false;co_sm.includeChildren=true;co_sm.autoLoad=$.extend(true,{},childState)}}child=$cont.layout(co);if(child)refreshChildren(pane,child)}})})},setInstanceKey=function(child,parentPaneState){var $c=child.container,o=child.options,sm=o.stateManagement,key=o.instanceKey||$c.data("layoutInstanceKey");if(!key)key=(sm&&sm.cookie?sm.cookie.name:"")||o.name;if(!key)key="layout"+ ++parentPaneState.childIdx;else key=
key.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_");o.instanceKey=key;$c.data("layoutInstanceKey",key);return key},refreshChildren=function(pane,newChild){var $P=$Ps[pane],pC=children[pane],s=state[pane],o;if($.isPlainObject(pC)){$.each(pC,function(key,child){if(child.destroyed)delete pC[key]});if($.isEmptyObject(pC))pC=children[pane]=null}if(!newChild&&!pC)newChild=$P.data("layout");if(newChild){newChild.hasParentLayout=true;o=newChild.options;setInstanceKey(newChild,s);if(!pC)pC=children[pane]={};
pC[o.instanceKey]=newChild.container.data("layout")}Instance[pane].children=children[pane];if(!newChild)createChildren(pane)},windowResize=function(){var o=options,delay=Number(o.resizeWithWindowDelay);if(delay<10)delay=100;timer.clear("winResize");timer.set("winResize",function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N,o.inset);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight)resizeAll()},delay);if(!timer.data["winResizeRepeater"])setWindowResizeRepeater()},
setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0)timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll()},delay)},unload=function(){var o=options;_runCallbacks("onunload_start");runPluginCallbacks(Instance,$.layout.onUnload);_runCallbacks("onunload_end")},_initContainer=function(){var N=$N[0],$H=$("html"),tag=sC.tagName=N.tagName,id=sC.id=N.id,cls=sC.className=N.className,o=options,name=o.name,props="position,margin,padding,border",
css="layoutCSS",CSS={},hid="hidden",parent=$N.data("parentLayout"),pane=$N.data("layoutEdge"),isChild=parent&&pane,num=$.layout.cssNum,$parent,n;sC.selector=$N.selector.split(".slice")[0];sC.ref=(o.name?o.name+" layout / ":"")+tag+(id?"#"+id:cls?".["+cls+"]":"");sC.isBody=tag==="BODY";if(!isChild&&!sC.isBody){$parent=$N.closest("."+$.layout.defaults.panes.paneClass);parent=$parent.data("parentLayout");pane=$parent.data("layoutEdge");isChild=parent&&pane}$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);
var layoutMethods={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(name in layoutMethods)$N.bind("layout"+name.toLowerCase()+"."+sID,Instance[layoutMethods[name]||name]);if(isChild){Instance.hasParentLayout=true;parent.refreshChildren(pane,Instance)}if(!$N.data(css))if(sC.isBody){$N.data(css,$.extend(styles($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")}));$H.data(css,$.extend(styles($H,"padding"),{height:"auto",
overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")}))}else $N.data(css,styles($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY"));try{CSS={overflow:hid,overflowX:hid,overflowY:hid};$N.css(CSS);if(o.inset&&!$.isPlainObject(o.inset)){n=parseInt(o.inset,10)||0;o.inset={top:n,bottom:n,left:n,right:n}}if(sC.isBody){if(!o.outset)o.outset={top:num($H,"paddingTop"),bottom:num($H,"paddingBottom"),left:num($H,"paddingLeft"),right:num($H,"paddingRight")};
else if(!$.isPlainObject(o.outset)){n=parseInt(o.outset,10)||0;o.outset={top:n,bottom:n,left:n,right:n}}$H.css(CSS).css({height:"100%",border:"none",padding:0,margin:0});if(browser.isIE6){$N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"});if(!o.inset)o.inset=elDims($N).inset}else{$N.css({width:"auto",height:"auto",margin:0,position:"absolute"});$N.css(o.outset)}$.extend(sC,elDims($N,o.inset))}else{var p=$N.css("position");if(!p||!p.match(/(fixed|absolute|relative)/))$N.css("position",
"relative");if($N.is(":visible")){$.extend(sC,elDims($N,o.inset));if(sC.innerHeight<1)_log(o.errors.noContainerHeight.replace(/CONTAINER/,sC.ref))}}if(num($N,"minWidth"))$N.parent().css("overflowX","auto");if(num($N,"minHeight"))$N.parent().css("overflowY","auto")}catch(ex){}},initHotkeys=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false}})},initOptions=
function(){var data,d,pane,key,val,i,c,o;opts=$.layout.transformData(opts,true);opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){data=$.layout.optionsMap.noDefault;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}data=$.layout.optionsMap.layout;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}}data=$.layout.optionsMap.layout;var rootKeys=$.layout.config.optionRootKeys;for(key in opts){val=opts[key];if($.inArray(key,rootKeys)<
0&&$.inArray(key,data)<0){if(!opts.panes[key])opts.panes[key]=$.isPlainObject(val)?$.extend(true,{},val):val;delete opts[key]}}$.extend(true,options,opts);$.each(_c.allPanes,function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);d=options.panes;o=options[pane];if(pane==="center"){data=$.layout.optionsMap.center;for(i=0,c=data.length;i<c;i++){key=data[i];if(!opts.center[key]&&(opts.panes[key]||!o[key]))o[key]=d[key]}}else{o=options[pane]=$.extend(true,{},d,o);createFxOptions(pane);if(!o.resizerClass)o.resizerClass=
"ui-layout-resizer";if(!o.togglerClass)o.togglerClass="ui-layout-toggler"}if(!o.paneClass)o.paneClass="ui-layout-pane"});var zo=opts.zIndex,z=options.zIndexes;if(zo>0){z.pane_normal=zo;z.content_mask=max(zo+1,z.content_mask);z.resizer_normal=max(zo+2,z.resizer_normal)}delete options.panes;function createFxOptions(pane){var o=options[pane],d=options.panes;if(!o.fxSettings)o.fxSettings={};if(!d.fxSettings)d.fxSettings={};$.each(["_open","_close","_size"],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+
n,sSettings="fxSettings"+n,fxName=o[sName]=o[sName]||d[sName]||o.fxName||d.fxName||"none",fxExists=$.effects&&($.effects[fxName]||$.effects.effect&&$.effects.effect[fxName]);if(fxName==="none"||!options.effects[fxName]||!fxExists)fxName=o[sName]="none";var fx=options.effects[fxName]||{},fx_all=fx.all||null,fx_pane=fx[pane]||null;o[sSpeed]=o[sSpeed]||d[sSpeed]||o.fxSpeed||d.fxSpeed||null;o[sSettings]=$.extend(true,{},fx_all,fx_pane,d.fxSettings,o.fxSettings,d[sSettings],o[sSettings])});delete o.fxName;
delete o.fxSpeed;delete o.fxSettings}},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#")return $N.find(sel).eq(0);else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0)}},initPanes=function(evt){evtPane(evt);$.each(_c.allPanes,function(idx,pane){addPane(pane,true)});initHandles();$.each(_c.borderPanes,function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane)}});sizeMidPanes("center");
$.each(_c.allPanes,function(idx,pane){afterInitPane(pane)})},addPane=function(pane,force){if(!force&&!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,fx=s.fx,spacing=o.spacing_open||0,isCenter=pane==="center",CSS={},$P=$Ps[pane],size,minSize,maxSize,child;if($P)removePane(pane,false,true,false);else $Cs[pane]=false;$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";
$P.data("layoutCSS",styles($P,props))}Instance[pane]={name:pane,pane:$Ps[pane],content:$Cs[pane],options:options[pane],state:state[pane],children:children[pane]};$P.data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"pane"}).css(c.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var paneMethods={hide:"",show:"",toggle:"",
close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},name;for(name in paneMethods)$P.bind("layoutpane"+name.toLowerCase()+"."+sID,
Instance[paneMethods[name]||name]);initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||1E5;if(size>0)size=max(min(size,maxSize),minSize);s.autoResize=o.autoResize;s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;if(!s.pins)s.pins=[]}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;setPanePosition(pane);if(dir==="horz")CSS.height=cssH($P,size);else if(dir==="vert")CSS.width=
cssW($P,size);$P.css(CSS);if(dir!="horz")sizeMidPanes(pane,true);if(state.initialized){initHandles(pane);initHotkeys(pane)}if(o.initClosed&&o.closable&&!o.initHidden)close(pane,true,true);else if(o.initHidden||o.initClosed)hide(pane);else if(!s.noRoom)$P.css("display","block");$P.css("visibility","visible");if(o.showOverflowOnHover)$P.hover(allowOverflow,resetOverflow);if(state.initialized)afterInitPane(pane)},afterInitPane=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane];if(!$P)return;
if($P.data("layout"))refreshChildren(pane,$P.data("layout"));if(s.isVisible){if(state.initialized)resizeAll();else sizeContent(pane);if(o.triggerEventsOnLoad)_runCallbacks("onresize_end",pane);else resizeChildren(pane,true)}if(o.initChildren&&o.children)createChildren(pane)},setPanePosition=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane],$R=$Rs[pane],o=options[pane],s=state[pane],side=_c[pane].side,CSS={};if(!$P)return;switch(pane){case "north":CSS.top=
sC.inset.top;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case "south":CSS.bottom=sC.inset.bottom;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case "west":CSS.left=sC.inset.left;break;case "east":CSS.right=sC.inset.right;break;case "center":}$P.css(CSS);if($R&&s.isClosed)$R.css(side,sC.inset[side]);else if($R&&!s.isHidden)$R.css(side,sC.inset[side]+getPaneSize(pane))})},initHandles=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane];
$Rs[pane]=false;$Ts[pane]=false;if(!$P)return;var o=options[pane],s=state[pane],c=_c[pane],paneId=o.paneSelector.substr(0,1)==="#"?o.paneSelector.substr(1):"",rClass=o.resizerClass,tClass=o.togglerClass,spacing=s.isVisible?o.spacing_open:o.spacing_closed,_pane="-"+pane,_state=s.isVisible?"-open":"-closed",I=Instance[pane],$R=I.resizer=$Rs[pane]=$("<div></div>"),$T=I.toggler=o.closable?$Ts[pane]=$("<div></div>"):false;if(!s.isVisible&&o.slidable)$R.attr("title",o.tips.Slide).css("cursor",o.sliderCursor);
$R.attr("id",paneId?paneId+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(o.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).mousedown($.layout.disableTextSelection).mouseup($.layout.enableTextSelection).appendTo($N);if($.fn.disableSelection)$R.disableSelection();if(o.resizerDblClickToggle)$R.bind("dblclick."+
sID,toggle);if($T){$T.attr("id",paneId?paneId+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo($R);if(o.togglerContent_open)$("<span>"+o.togglerContent_open+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",
pane).addClass("content content-open").css("display","none").appendTo($T);if(o.togglerContent_closed)$("<span>"+o.togglerContent_closed+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo($T);enableClosable(pane)}initResizable(pane);if(s.isVisible)setAsOpen(pane);else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}});sizeHandles()},initContent=function(pane,resize){if(!isInitialized())return;var o=options[pane],sel=
o.contentSelector,I=Instance[pane],$P=$Ps[pane],$C;if(sel)$C=I.content=$Cs[pane]=o.findNestedContent?$P.find(sel).eq(0):$P.children(sel).eq(0);if($C&&$C.length){$C.data("layoutRole","content");if(!$C.data("layoutCSS"))$C.data("layoutCSS",styles($C,"height"));$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);$P.css(_c.content.cssDemoPane)}if($P.css("overflowX").match(/(scroll|auto)/))$P.css("overflow","hidden");state[pane].content={};if(resize!==false)sizeContent(pane)}else I.content=
$Cs[pane]=false},initResizable=function(panes){var draggingAvailable=$.layout.plugins.draggable,side;panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(idx,pane){var o=options[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var s=state[pane],z=options.zIndexes,c=_c[pane],side=c.dir=="horz"?"top":"left",$P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,lastPos=0,r,live,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+
"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed)$R.attr("title",o.tips.Resize).css("cursor",o.resizerCursor);$R.draggable({containment:$N[0],axis:c.dir=="horz"?"y":"x",delay:0,distance:1,grid:o.resizingGrid,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:z.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.livePaneResizing;
if(false===_runCallbacks("ondrag_start",pane))return false;s.isResizing=true;state.paneResizing=pane;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;lastPos=ui.position[side];$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;showMasks(pane,{resizing:true})},drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding)$Ps[pane].css("zIndex",
z.pane_sliding)}var limit=0;if(ui.position[side]<r.min){ui.position[side]=r.min;limit=-1}else if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=limit>0&&pane.match(/(north|west)/)||limit<0&&pane.match(/(south|east)/)?o.tips.maxSizeWarning:o.tips.minSizeWarning}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=""}if(live&&Math.abs(ui.position[side]-lastPos)>=
o.liveResizingTolerance){lastPos=ui.position[side];resizePanes(e,ui,pane)}},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+" "+resizerPaneClass);s.isResizing=false;state.paneResizing=false;resizePanes(e,ui,pane,true)}})});var resizePanes=function(evt,ui,pane,resizingDone){var dragPos=ui.position,c=_c[pane],o=options[pane],s=state[pane],resizerPos;switch(pane){case "north":resizerPos=dragPos.top;break;case "west":resizerPos=dragPos.left;break;case "south":resizerPos=
sC.layoutHeight-dragPos.top-o.spacing_open;break;case "east":resizerPos=sC.layoutWidth-dragPos.left-o.spacing_open;break}var newSize=resizerPos-sC.inset[c.side];if(!resizingDone){if(Math.abs(newSize-s.size)<o.liveResizingTolerance)return;manualSizePane(pane,newSize,false,true);sizeMasks()}else{if(false!==_runCallbacks("ondrag_end",pane))manualSizePane(pane,newSize,false,true);hideMasks(true);if(s.isSliding)showMasks(pane,{resizing:true})}}},sizeMask=function(){var $M=$(this),pane=$M.data("layoutMask"),
s=state[pane];if(s.tagName=="IFRAME"&&s.isVisible)$M.css({top:s.offsetTop,left:s.offsetLeft,width:s.outerWidth,height:s.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(pane,args){var c=_c[pane],panes=["center"],z=options.zIndexes,a=$.extend({objectsOnly:false,animation:false,resizing:true,sliding:state[pane].isSliding},args),o,s;if(a.resizing)panes.push(pane);if(a.sliding)panes.push(_c.oppositeEdge[pane]);if(c.dir==="horz"){panes.push("west");panes.push("east")}$.each(panes,
function(i,p){s=state[p];o=options[p];if(s.isVisible&&(o.maskObjects||!a.objectsOnly&&o.maskContents))getMasks(p).each(function(){sizeMask.call(this);this.style.zIndex=s.isSliding?z.pane_sliding+1:z.pane_normal+1;this.style.display="block"})})},hideMasks=function(force){if(force||!state.paneResizing)$Ms.hide();else if(!force&&!$.isEmptyObject(state.panesSliding)){var i=$Ms.length-1,p,$M;for(;i>=0;i--){$M=$Ms.eq(i);p=$M.data("layoutMask");if(!options[p].maskObjects)$M.hide()}}},getMasks=function(pane){var $Masks=
$([]),$M,i=0,c=$Ms.length;for(;i<c;i++){$M=$Ms.eq(i);if($M.data("layoutMask")===pane)$Masks=$Masks.add($M)}if($Masks.length)return $Masks;else return createMasks(pane)},createMasks=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes,isIframe,el,$M,css,i;$Ms=$([]);if(!o.maskContents&&!o.maskObjects)return $Ms;for(i=0;i<(o.maskObjects?2:1);i++){isIframe=o.maskObjects&&i==0;el=document.createElement(isIframe?"iframe":"div");$M=$(el).data("layoutMask",pane);el.className="ui-layout-mask ui-layout-mask-"+
pane;css=el.style;css.background="#FFF";css.position="absolute";css.display="block";if(isIframe){el.src="about:blank";el.frameborder=0;css.border=0;css.opacity=0;css.filter="Alpha(Opacity='0')"}else{css.opacity=0.0010;css.filter="Alpha(Opacity='1')"}if(s.tagName=="IFRAME"){css.zIndex=z.pane_normal+1;$N.append(el)}else{$M.addClass("ui-layout-mask-inside-pane");css.zIndex=o.maskZindex||z.content_mask;css.top=0;css.left=0;css.width="100%";css.height="100%";$P.append(el)}$Ms=$Ms.add(el)}return $Ms},destroy=
function(evt_or_destroyChildren,destroyChildren){$(window).unbind("."+sID);$(document).unbind("."+sID);if(typeof evt_or_destroyChildren==="object")evtPane(evt_or_destroyChildren);else destroyChildren=evt_or_destroyChildren;$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID);$Ms.remove();$.each(_c.allPanes,function(i,pane){removePane(pane,false,true,destroyChildren)});var css="layoutCSS";if($N.data(css)&&!$N.data("layoutRole"))$N.css($N.data(css)).removeData(css);
if(sC.tagName==="BODY"&&($N=$("html")).data(css))$N.css($N.data(css)).removeData(css);runPluginCallbacks(Instance,$.layout.onDestroy);unload();for(var n in Instance)if(!n.match(/^(container|options)$/))delete Instance[n];Instance.destroyed=true;return Instance},removePane=function(evt_or_pane,remove,skipResize,destroyChild){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane];if($P&&$.isEmptyObject($P.data()))$P=false;if($C&&$.isEmptyObject($C.data()))$C=
false;if($R&&$.isEmptyObject($R.data()))$R=false;if($T&&$.isEmptyObject($T.data()))$T=false;if($P)$P.stop(true,true);var o=options[pane],s=state[pane],d="layout",css="layoutCSS",pC=children[pane],hasChildren=$.isPlainObject(pC)&&!$.isEmptyObject(pC),destroy=destroyChild!==undefined?destroyChild:o.destroyChildren;if(hasChildren&&destroy){$.each(pC,function(key,child){if(!child.destroyed)child.destroy(true);if(child.destroyed)delete pC[key]});if($.isEmptyObject(pC)){pC=children[pane]=null;hasChildren=
false}}if($P&&remove&&!hasChildren)$P.remove();else if($P&&$P[0]){var root=o.paneClass,pRoot=root+"-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",classes=[root,root+_open,root+_closed,root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,true));$P.removeClass(classes.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if(hasChildren&&$C){$C.width($C.width());
$.each(pC,function(key,child){child.resizeAll()})}else if($C)$C.css($C.data(css)).removeData(css).removeData("layoutRole");if(!$P.data(d))$P.css($P.data(css)).removeData(css)}if($T)$T.remove();if($R)$R.remove();Instance[pane]=$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=false;s={removed:true};if(!skipResize)resizeAll()},_hidePane=function(pane){var $P=$Ps[pane],o=options[pane],s=$P[0].style;if(o.useOffscreenClose){if(!$P.data(_c.offscreenReset))$P.data(_c.offscreenReset,{left:s.left,right:s.right});$P.css(_c.offscreenCSS)}else $P.hide().removeData(_c.offscreenReset)},
_showPane=function(pane){var $P=$Ps[pane],o=options[pane],off=_c.offscreenCSS,old=$P.data(_c.offscreenReset),s=$P[0].style;$P.show().removeData(_c.offscreenReset);if(o.useOffscreenClose&&old){if(s.left==off.left)s.left=old.left;if(s.right==off.right)s.right=old.right}},hide=function(evt_or_pane,noAnimation){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(pane==="center"||!$P||s.isHidden)return;if(state.initialized&&false===
_runCallbacks("onhide_start",pane))return;s.isSliding=false;delete state.panesSliding[pane];if($R)$R.hide();if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;if(!state.initialized)_hidePane(pane);sizeMidPanes(_c[pane].dir==="horz"?"":"center");if(state.initialized||o.triggerEventsOnLoad)_runCallbacks("onhide_end",pane)}else{s.isHiding=true;close(pane,false,noAnimation)}},show=function(evt_or_pane,openPane,noAnimation,noAlert){if(!isInitialized())return;var pane=
evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(pane==="center"||!$P||!s.isHidden)return;if(false===_runCallbacks("onshow_start",pane))return;s.isShowing=true;s.isSliding=false;delete state.panesSliding[pane];if(openPane===false)close(pane,true);else open(pane,false,noAnimation,noAlert)},toggle=function(evt_or_pane,slide){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane];if(evt)evt.stopImmediatePropagation();
if(s.isHidden)show(pane);else if(s.isClosed)open(pane,!!slide);else close(pane)},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];_hidePane(pane);s.isClosed=true;s.isVisible=false;if(setHandles)setAsClosed(pane)},close=function(evt_or_pane,force,noAnimation,skipCallback){var pane=evtPane.call(this,evt_or_pane);if(pane==="center")return;if(!state.initialized&&$Ps[pane]){_closePane(pane,true);return}if(!isInitialized())return;var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],
s=state[pane],c=_c[pane],doFX,isShowing,isHiding,wasSliding;$N.queue(function(queueNext){if(!$P||!o.closable&&!s.isShowing&&!s.isHiding||!force&&s.isClosed&&!s.isShowing)return queueNext();var abort=!s.isShowing&&false===_runCallbacks("onclose_start",pane);isShowing=s.isShowing;isHiding=s.isHiding;wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(abort)return queueNext();doFX=!noAnimation&&!s.isClosed&&o.fxName_close!="none";s.isMoving=true;s.isClosed=true;s.isVisible=false;if(isHiding)s.isHidden=
true;else if(isShowing)s.isHidden=false;if(s.isSliding)bindStopSlidingEvents(pane,false);else sizeMidPanes(_c[pane].dir==="horz"?"":"center",false);setAsClosed(pane);if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(s.isClosed)close_2();queueNext()})}else{_hidePane(pane);close_2();queueNext()}});function close_2(){s.isMoving=false;bindStartSlidingEvents(pane,true);var altPane=_c.oppositeEdge[pane];if(state[altPane].noRoom){setSizeLimits(altPane);
makePaneFit(altPane)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing)_runCallbacks("onclose_end",pane);if(isShowing)_runCallbacks("onshow_end",pane);if(isHiding)_runCallbacks("onhide_end",pane)}}},setAsClosed=function(pane){if(!$Rs[pane])return;var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed";$R.css(side,sC.inset[side]).removeClass(rClass+
_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(s.isHidden)$R.hide();if(o.resizable&&$.layout.plugins.draggable)$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.tips.Open);$T.children(".content-open").hide();$T.children(".content-closed").css("display",
"block")}syncPinBtns(pane,false);if(state.initialized)sizeHandles()},open=function(evt_or_pane,slide,noAnimation,noAlert){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing;if(pane==="center")return;$N.queue(function(queueNext){if(!$P||!o.resizable&&!o.closable&&!s.isShowing||s.isVisible&&!s.isSliding)return queueNext();if(s.isHidden&&!s.isShowing){queueNext();show(pane,true);return}if(s.autoResize&&
s.size!=o.size)sizePane(pane,o.size,true,true,true);else setSizeLimits(pane,slide);var cbReturn=_runCallbacks("onopen_start",pane);if(cbReturn==="abort")return queueNext();if(cbReturn!=="NC")setSizeLimits(pane,slide);if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.tips.noRoomToOpen)alert(o.tips.noRoomToOpen);return queueNext()}if(slide)bindStopSlidingEvents(pane,true);else if(s.isSliding)bindStopSlidingEvents(pane,false);else if(o.slidable)bindStartSlidingEvents(pane,false);s.noRoom=
false;makePaneFit(pane);isShowing=s.isShowing;delete s.isShowing;doFX=!noAnimation&&s.isClosed&&o.fxName_open!="none";s.isMoving=true;s.isVisible=true;s.isClosed=false;if(isShowing)s.isHidden=false;if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isVisible)open_2();queueNext()})}else{_showPane(pane);open_2();queueNext()}});function open_2(){s.isMoving=false;_fixIframe(pane);if(!s.isSliding)sizeMidPanes(_c[pane].dir==
"vert"?"center":"",false);setAsOpen(pane)}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC.inset[side]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding)$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding);else $R.removeClass(rClass+
_sliding+" "+rClass+_pane+_sliding);removeHover(0,$R);if(o.resizable&&$.layout.plugins.draggable)$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize);else if(!s.isSliding)$R.css("cursor","default");if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.tips.Close);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block")}syncPinBtns(pane,!s.isSliding);
$.extend(s,elDims($P));if(state.initialized){sizeHandles();sizeContent(pane,true)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible")){_runCallbacks("onopen_end",pane);if(s.isShowing)_runCallbacks("onshow_end",pane);if(state.initialized)_runCallbacks("onresize_end",pane)}},slideOpen=function(evt_or_pane){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane],delay=options[pane].slideDelay_open;if(pane==="center")return;
if(evt)evt.stopImmediatePropagation();if(s.isClosed&&evt&&evt.type==="mouseenter"&&delay>0)timer.set(pane+"_openSlider",open_NOW,delay);else open_NOW();function open_NOW(){if(!s.isClosed)bindStopSlidingEvents(pane,true);else if(!s.isMoving)open(pane,true)}},slideClose=function(evt_or_pane){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],delay=s.isMoving?1E3:300;if(pane==="center")return;if(s.isClosed||s.isResizing)return;else if(o.slideTrigger_close===
"click")close_NOW();else if(o.preventQuickSlideClose&&s.isMoving)return;else if(o.preventPrematureSlideClose&&evt&&$.layout.isMouseOverElem(evt,$Ps[pane]))return;else if(evt)timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay));else close_NOW();function close_NOW(){if(s.isClosed)bindStopSlidingEvents(pane,false);else if(!s.isMoving)close(pane)}},slideToggle=function(evt_or_pane){var pane=evtPane.call(this,evt_or_pane);toggle(pane,true)},lockPaneForFX=function(pane,doLock){var $P=
$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes;if(doLock){showMasks(pane,{animation:true,objectsOnly:true});$P.css({zIndex:z.pane_animate});if(pane=="south")$P.css({top:sC.inset.top+sC.innerHeight-$P.outerHeight()});else if(pane=="east")$P.css({left:sC.inset.left+sC.innerWidth-$P.outerWidth()})}else{hideMasks();$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});if(pane=="south")$P.css({top:"auto"});else if(pane=="east"&&!$P.css("left").match(/\-99999/))$P.css({left:"auto"});if(browser.msie&&
o.fxOpacityFix&&o.fxName_open!="slide"&&$P.css("filter")&&$P.css("opacity")==1)$P[0].style.removeAttribute("filter")}},bindStartSlidingEvents=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],evtName=o.slideTrigger_open.toLowerCase();if(!$R||enable&&!o.slidable)return;if(evtName.match(/mouseover/))evtName=o.slideTrigger_open="mouseenter";else if(!evtName.match(/(click|dblclick|mouseenter)/))evtName=o.slideTrigger_open="click";if(o.resizerDblClickToggle&&evtName.match(/click/))$R[enable?
"unbind":"bind"]("dblclick."+sID,toggle);$R[enable?"bind":"unbind"](evtName+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?o.tips.Slide:"")},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],c=_c[pane],z=options.zIndexes,evtName=o.slideTrigger_close.toLowerCase(),action=enable?"bind":"unbind",$P=$Ps[pane],$R=$Rs[pane];timer.clear(pane+"_closeSlider");if(enable){s.isSliding=true;state.panesSliding[pane]=true;bindStartSlidingEvents(pane,
false)}else{s.isSliding=false;delete state.panesSliding[pane]}$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding+2:z.resizer_normal);if(!evtName.match(/(click|mouseleave)/))evtName=o.slideTrigger_close="mouseleave";$R[action](evtName,slideClose);if(evtName==="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+sID,cancelMouseOut)}if(!enable)timer.clear(pane+"_closeSlider");else if(evtName===
"click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.tips.Close:"")}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation()}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir==="vert",hasRoom=false;if(pane==="center"||isSidePane&&s.noVerticalRoom){hasRoom=s.maxHeight>=0;if(hasRoom&&s.noRoom){_showPane(pane);if($R)$R.show();s.isVisible=
true;s.noRoom=false;if(isSidePane)s.noVerticalRoom=false;_fixIframe(pane)}else if(!hasRoom&&!s.noRoom){_hidePane(pane);if($R)$R.hide();s.isVisible=false;s.noRoom=true}}if(pane==="center");else if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize)sizePane(pane,s.maxSize,skipCallback,true,force);else if(s.size<s.minSize)sizePane(pane,s.minSize,skipCallback,true,force);else if($R&&s.isVisible&&$P.is(":visible")){var pos=s.size+sC.inset[c.side];if($.layout.cssNum($R,c.side)!=pos)$R.css(c.side,pos)}if(s.noRoom)if(s.wasOpen&&
o.closable)if(o.autoReopen)open(pane,false,true,true);else s.noRoom=false;else show(pane,s.wasOpen,true,true)}else if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed);else if(o.closable)close(pane,true,true);else hide(pane,true)}},manualSizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],forceResize=force||o.livePaneResizing&&!s.isResizing;if(pane==="center")return;
s.autoResize=false;sizePane(pane,size,skipCallback,noAnimation,forceResize)},sizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side,dimName=_c[pane].sizeType.toLowerCase(),skipResizeWhileDragging=s.isResizing&&!o.triggerEventsDuringLiveResize,doFX=noAnimation!==true&&o.animatePaneSizing,oldSize,newSize;if(pane==="center")return;$N.queue(function(queueNext){setSizeLimits(pane);
oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){queueNext();makePaneFit(pane,false,skipCallback);return}if(!force&&size===oldSize)return queueNext();s.newSize=size;if(!skipCallback&&state.initialized&&s.isVisible)_runCallbacks("onresize_start",pane);newSize=cssSize(pane,size);if(doFX&&$P.is(":visible")){var fx=$.layout.effects.size[pane]||$.layout.effects.size.all,easing=o.fxSettings_size.easing||fx.easing,z=options.zIndexes,
props={};props[dimName]=newSize+"px";s.isMoving=true;$P.css({zIndex:z.pane_animate}).show().animate(props,o.fxSpeed_size,easing,function(){$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});s.isMoving=false;delete s.newSize;sizePane_2();queueNext()})}else{$P.css(dimName,newSize);delete s.newSize;if($P.is(":visible"))sizePane_2();else s.size=size;queueNext()}});function sizePane_2(){var actual=dimName==="width"?$P.outerWidth():$P.outerHeight(),tries=[{pane:pane,count:1,target:size,actual:actual,
correct:size===actual,attempt:size,cssSize:newSize}],lastTry=tries[0],thisTry={},msg="Inaccurate size after resizing the "+pane+"-pane.";while(!lastTry.correct){thisTry={pane:pane,count:lastTry.count+1,target:size};if(lastTry.actual>size)thisTry.attempt=max(0,lastTry.attempt-(lastTry.actual-size));else thisTry.attempt=max(0,lastTry.attempt+(size-lastTry.actual));thisTry.cssSize=cssSize(pane,thisTry.attempt);$P.css(dimName,thisTry.cssSize);thisTry.actual=dimName=="width"?$P.outerWidth():$P.outerHeight();
thisTry.correct=size===thisTry.actual;if(tries.length===1){_log(msg,false,true);_log(lastTry,false,true)}_log(thisTry,false,true);if(tries.length>3)break;tries.push(thisTry);lastTry=tries[tries.length-1]}s.size=size;$.extend(s,elDims($P));if(s.isVisible&&$P.is(":visible")){if($R)$R.css(side,size+sC.inset[side]);sizeContent(pane)}if(!skipCallback&&!skipResizeWhileDragging&&state.initialized&&s.isVisible)_runCallbacks("onresize_end",pane);if(!skipCallback){if(!s.isSliding)sizeMidPanes(_c[pane].dir==
"horz"?"":"center",skipResizeWhileDragging,force);sizeHandles()}var altPane=_c.oppositeEdge[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback)}if(tries.length>1)_log(msg+"\nSee the Error Console for details.",true,true)}},sizeMidPanes=function(panes,skipCallback,force){panes=(panes?panes:"east,west,center").split(",");$.each(panes,function(i,pane){if(!$Ps[pane])return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=pane==
"center",hasRoom=true,CSS={},visCSS=$.layout.showInvisibly($P),newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane==="center"){if(!force&&s.isVisible&&newCenter.width===s.outerWidth&&newCenter.height===s.outerHeight){$P.css(visCSS);return true}$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;s.newWidth=CSS.width;s.newHeight=CSS.height;CSS.width=cssW($P,CSS.width);CSS.height=cssH($P,CSS.height);hasRoom=CSS.width>=0&&CSS.height>=0;if(!state.initialized&&
o.minWidth>newCenter.width){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&state.east.isVisible&&sizeE>minE){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE}if(reqPx>0&&state.west.isVisible&&sizeW>minW){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW}if(reqPx===0){if(sizeE&&sizeE!=minE)sizePane("east",newE,true,true,force);if(sizeW&&sizeW!=minW)sizePane("west",newW,true,
true,force);sizeMidPanes("center",skipCallback,force);$P.css(visCSS);return}}}else{if(s.isVisible&&!s.noVerticalRoom)$.extend(s,elDims($P),cssMinDims(pane));if(!force&&!s.noVerticalRoom&&newCenter.height===s.outerHeight){$P.css(visCSS);return true}CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;s.newSize=newCenter.height;CSS.height=cssH($P,newCenter.height);s.maxHeight=CSS.height;hasRoom=s.maxHeight>=0;if(!hasRoom)s.noVerticalRoom=true}if(hasRoom){if(!skipCallback&&state.initialized)_runCallbacks("onresize_start",
pane);$P.css(CSS);if(pane!=="center")sizeHandles(pane);if(s.noRoom&&!s.isClosed&&!s.isHidden)makePaneFit(pane);if(s.isVisible){$.extend(s,elDims($P));if(state.initialized)sizeContent(pane)}}else if(!s.noRoom&&s.isVisible)makePaneFit(pane);$P.css(visCSS);delete s.newSize;delete s.newWidth;delete s.newHeight;if(!s.isVisible)return true;if(pane==="center"){var fix=browser.isIE6||!browser.boxModel;if($Ps.north&&(fix||state.north.tagName=="IFRAME"))$Ps.north.css("width",cssW($Ps.north,sC.innerWidth));
if($Ps.south&&(fix||state.south.tagName=="IFRAME"))$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}if(!skipCallback&&state.initialized)_runCallbacks("onresize_end",pane)})},resizeAll=function(evt_or_refresh){var oldW=sC.innerWidth,oldH=sC.innerHeight;evtPane(evt_or_refresh);if(!$N.is(":visible"))return;if(!state.initialized){_initLayoutElements();return}if(evt_or_refresh===true&&$.isPlainObject(options.outset))$N.css(options.outset);$.extend(sC,elDims($N,options.inset));if(!sC.outerHeight)return;
if(evt_or_refresh===true)setPanePosition();if(false===_runCallbacks("onresizeall_start"))return false;var shrunkH=sC.innerHeight<oldH,shrunkW=sC.innerWidth<oldW,$P,o,s;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane])return;o=options[pane];s=state[pane];if(s.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true,true);else{setSizeLimits(pane);makePaneFit(pane,false,true,true)}});sizeMidPanes("",true,true);sizeHandles();$.each(_c.allPanes,function(i,pane){$P=$Ps[pane];if(!$P)return;
if(state[pane].isVisible)_runCallbacks("onresize_end",pane)});_runCallbacks("onresizeall_end")},resizeChildren=function(evt_or_pane,skipRefresh){var pane=evtPane.call(this,evt_or_pane);if(!options[pane].resizeChildren)return;if(!skipRefresh)refreshChildren(pane);var pC=children[pane];if($.isPlainObject(pC))$.each(pC,function(key,child){if(!child.destroyed)child.resizeAll()})},sizeContent=function(evt_or_panes,remeasure){if(!isInitialized())return;var panes=evtPane.call(this,evt_or_panes);panes=panes?
panes.split(","):_c.allPanes;$.each(panes,function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||!$C||!$P.is(":visible"))return true;if(!$C.length){initContent(pane,false);if(!$C)return}if(false===_runCallbacks("onsizecontent_start",pane))return;if(!s.isMoving&&!s.isResizing||o.liveContentResizing||remeasure||m.top==undefined){_measure();if(m.hiddenFooters>0&&$P.css("overflow")==="hidden"){$P.css("overflow","visible");_measure();$P.css("overflow","hidden")}}var newH=
s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH}if(state.initialized)_runCallbacks("onsizecontent_end",pane);function _below($E){return max(s.css.paddingBottom,parseInt($E.css("marginBottom"),10)||0)}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(".ui-layout-mask").not(ignore||":lt(0)"),$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");
m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length)m.spaceBelow=$F[0].offsetTop+$F.outerHeight()-m.bottom+_below($F);else m.spaceBelow=_below($C)}})},sizeHandles=function(evt_or_panes){var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],
$TC;if(!$P||!$R)return;var dir=_c[pane].dir,_state=s.isClosed?"_closed":"_open",spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,left,offset,CSS={};if(spacing===0){$R.hide();return}else if(!s.noRoom&&!s.isHidden)$R.show();if(dir==="horz"){paneLen=sC.innerWidth;s.resizerLength=paneLen;left=$.layout.cssNum($P,"left");$R.css({width:cssW($R,paneLen),height:cssH($R,spacing),left:left>-9999?left:sC.inset.left})}else{paneLen=$P.outerHeight();s.resizerLength=
paneLen;$R.css({height:cssH($R,paneLen),width:cssW($R,spacing),top:sC.inset.top+getPaneSize("north",true)})}removeHover(o,$R);if($T){if(togLen===0||s.isSliding&&o.hideTogglerOnSlide){$T.hide();return}else $T.show();if(!(togLen>0)||togLen==="100%"||togLen>paneLen){togLen=paneLen;offset=0}else if(isStr(togAlign))switch(togAlign){case "top":case "left":offset=0;break;case "bottom":case "right":offset=paneLen-togLen;break;case "middle":case "center":default:offset=round((paneLen-togLen)/2)}else{var x=
parseInt(togAlign,10);if(togAlign>=0)offset=x;else offset=paneLen-togLen+x}if(dir==="horz"){var width=cssW($T,togLen);$T.css({width:width,height:cssH($T,spacing),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",round((width-$TC.outerWidth())/2))})}else{var height=cssH($T,togLen);$T.css({height:height,width:cssW($T,spacing),top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",round((height-$TC.outerHeight())/2))})}removeHover(0,
$T)}if(!state.initialized&&(o.initHidden||s.isHidden)){$R.hide();if($T)$T.hide()}})},enableClosable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane],o=options[pane];if(!$T)return;o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane)}).css("visibility","visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.tips.Open:o.tips.Close).show()},disableClosable=function(evt_or_pane,hide){if(!isInitialized())return;
var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane];if(!$T)return;options[pane].closable=false;if(state[pane].isClosed)open(pane,false,true);$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].slidable=true;if(state[pane].isClosed)bindStartSlidingEvents(pane,true)},disableSlidable=
function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R)return;options[pane].slidable=false;if(state[pane].isSliding)close(pane,false,true);else{bindStartSlidingEvents(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0])}},enableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable"))return;o.resizable=true;$R.draggable("enable");
if(!state[pane].isClosed)$R.css("cursor",o.resizerCursor).attr("title",o.tips.Resize)},disableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].resizable=false;$R.draggable("disable").css("cursor","default").attr("title","");removeHover(null,$R[0])},swapPanes=function(evt_or_pane1,pane2){if(!isInitialized())return;var pane1=evtPane.call(this,evt_or_pane1);state[pane1].edge=pane2;state[pane2].edge=
pane1;if(false===_runCallbacks("onswap_start",pane1)||false===_runCallbacks("onswap_start",pane2)){state[pane1].edge=pane1;state[pane2].edge=pane2;return}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1])$Ts[pane1].remove();if($Ts[pane2])$Ts[pane2].remove();if($Rs[pane1])$Rs[pane1].remove();if($Rs[pane2])$Rs[pane2].remove();$Rs[pane1]=$Rs[pane2]=
$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1])$Ps[pane1].css(_c.visible);if($Ps[pane2])$Ps[pane2].css(_c.visible);resizeAll();_runCallbacks("onswap_end",pane1);_runCallbacks("onswap_end",pane2);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return!$P?false:{pane:n,P:$P?$P[0]:false,C:$C?$C[0]:false,state:$.extend(true,{},state[n]),options:$.extend(true,{},options[n])}}function move(oPane,pane){if(!oPane)return;var P=oPane.P,C=oPane.C,oldPane=
oPane.pane,c=_c[pane],s=$.extend(true,{},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"];fx[k+"_size"]=o[k+"_size"]});$Ps[pane]=$(P).data({layoutPane:Instance[pane],layoutEdge:pane}).css(_c.hidden).css(c.cssReq);$Cs[pane]=C?$(C):false;options[pane]=$.extend(true,{},oPane.options,fx);state[pane]=$.extend(true,{},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,
"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true,true)}else $Rs[pane].css(c.side,sC.inset[c.side]+(state[pane].isVisible?getPaneSize(pane):0));if(oPane.state.isVisible&&!s.isVisible)setAsOpen(pane,true);else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}oPane=null}},syncPinBtns=function(pane,doPin){if($.layout.plugins.buttons)$.each(state[pane].pins,
function(i,selector){$.layout.buttons.setPinState(Instance,$(selector),pane,doPin)})};function keyDown(evt){if(!evt)return true;var code=evt.keyCode;if(code<33)return true;var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=CTRL&&code>=37&&code<=40,o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey)pane=PANE[code];else if(CTRL||SHIFT)$.each(_c.borderPanes,function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if(SHIFT&&
m=="SHIFT"||CTRL&&m=="CTRL"||CTRL&&SHIFT)if(k&&code===(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}});if(!pane||!$Ps[pane]||!options[pane].closable||state[pane].isHidden)return true;toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=
$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved)resetOverflow(pane);if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:options.zIndexes.resizer_normal+1},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&!ofX.match(/(visible|auto)/)){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&!ofY.match(/(visible|auto)/)){curCSS.overflowY=
ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes,function(i,p){if(p!=pane)resetOverflow(p)})}function resetOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing)$P.css("zIndex",
options.zIndexes.pane_normal);$P.css(CSS);s.cssSaved=false}var $N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,
setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,
destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:false,children:children,north:false,south:false,west:false,east:false,center:false};if(_create()==="cancel")return null;else return Instance}})(jQuery);(function($){var _=$.layout;if(!_.callbacks)_.callbacks={};_.callbacks.resizePaneAccordions=function(x,ui){var $P=ui.jquery?ui:$(ui.newPanel||ui.panel);$P.find(".ui-accordion:visible").each(function(){var $E=$(this);if($E.data("accordion"))$E.accordion("resize");if($E.data("ui-accordion"))$E.accordion("refresh")})}})(jQuery);(function(root,factory){if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")module.exports=factory();else root.Handlebars=root.Handlebars||factory()})(this,function(){var __module4__=function(){var __exports__;function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};__exports__=SafeString;return __exports__}();var __module3__=function(__dependency1__){var __exports__={};var SafeString=__dependency1__;var escape=
{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])if(Object.prototype.hasOwnProperty.call(arguments[i],key))obj[key]=arguments[i][key];return obj}__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value==="function"};
if(isFunction(/x/))isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"};var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};__exports__.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString)return string.toString();else if(string==null)return"";else if(!string)return string+"";string=""+string;if(!possible.test(string))return string;
return string.replace(badChars,escapeChar)}__exports__.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0)return true;else if(isArray(value)&&value.length===0)return true;else return false}__exports__.isEmpty=isEmpty;function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}__exports__.appendContextPath=appendContextPath;return __exports__}(__module4__);var __module5__=function(){var __exports__;var errorProps=["description","fileName","lineNumber",
"message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;__exports__=Exception;return __exports__}();var __module2__=function(__dependency1__,__dependency2__){var __exports__=
{};var Utils=__dependency1__;var Exception=__dependency2__;var VERSION="2.0.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=6;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=
helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}__exports__.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn){if(toString.call(name)===objectType){if(fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,
partial){if(toString.call(name)===objectType)Utils.extend(this.partials,name);else this.partials[name]=partial},unregisterPartial:function(name){delete this.partials[name]}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;else throw new Exception("Missing helper: '"+arguments[arguments.length-1].name+"'");});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;
if(context===true)return fn(this);else if(context===false||context==null)return inverse(this);else if(isArray(context))if(context.length>0){if(options.ids)options.ids=[options.name];return instance.helpers.each(context,options)}else return inverse(this);else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}});instance.registerHelper("each",function(context,
options){if(!options)throw new Exception("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var contextPath;if(options.data&&options.ids)contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+".";if(isFunction(context))context=context.call(this);if(options.data)data=createFrame(options.data);if(context&&typeof context==="object")if(isArray(context))for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===
context.length-1;if(contextPath)data.contextPath=contextPath+i}ret=ret+fn(context[i],{data:data})}else for(var key in context)if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0;if(contextPath)data.contextPath=contextPath+key}ret=ret+fn(context[key],{data:data});i++}if(i===0)ret=inverse(this);return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional))conditional=conditional.call(this);if(!options.hash.includeZero&&!conditional||
Utils.isEmpty(conditional))return options.inverse(this);else return options.fn(this)});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context))context=context.call(this);var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,
options.ids[0]);options={data:data}}return fn(context,options)}else return options.inverse(this)});instance.registerHelper("log",function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message)});instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})}var logger={methodMap:{"0":"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,message){if(logger.level<=level){var method=
logger.methodMap[level];if(typeof console!=="undefined"&&console[method])console[method].call(console,message)}}};__exports__.logger=logger;var log=logger.log;__exports__.log=log;var createFrame=function(object){var frame=Utils.extend({},object);frame._parent=object;return frame};__exports__.createFrame=createFrame;return __exports__}(__module3__,__module5__);var __module6__=function(__dependency1__,__dependency2__,__dependency3__){var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;
var COMPILER_REVISION=__dependency3__.COMPILER_REVISION;var REVISION_CHANGES=__dependency3__.REVISION_CHANGES;var createFrame=__dependency3__.createFrame;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision)if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+
"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").");}else throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").");}__exports__.checkRevision=checkRevision;function template(templateSpec,env){if(!env)throw new Exception("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new Exception("Unknown template object: "+
typeof templateSpec);env.VM.checkRevision(templateSpec.compiler);var invokePartialWrapper=function(partial,indent,name,context,hash,helpers,partials,data,depths){if(hash)context=Utils.extend({},context,hash);var result=env.VM.invokePartial.call(this,partial,name,context,helpers,partials,data,depths);if(result==null&&env.compile){var options={helpers:helpers,partials:partials,data:data,depths:depths};partials[name]=env.compile(partial,{data:data!==undefined,compat:templateSpec.compat},env);result=
partials[name](context,options)}if(result!=null){if(indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l)break;lines[i]=indent+lines[i]}result=lines.join("\n")}return result}else throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode");};var container={lookup:function(depths,name){var len=depths.length;for(var i=0;i<len;i++)if(depths[i]&&depths[i][name]!=null)return depths[i][name]},lambda:function(current,context){return typeof current===
"function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){return templateSpec[i]},programs:[],program:function(i,data,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths)programWrapper=program(this,i,fn,data,depths);else if(!programWrapper)programWrapper=this.programs[i]=program(this,i,fn);return programWrapper},data:function(data,depth){while(data&&depth--)data=data._parent;return data},merge:function(param,
common){var ret=param||common;if(param&&common&&param!==common)ret=Utils.extend({},common,param);return ret},noop:env.VM.noop,compilerInfo:templateSpec.compiler};var ret=function(context,options){options=options||{};var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData)data=initData(context,data);var depths;if(templateSpec.useDepths)depths=options.depths?[context].concat(options.depths):[context];return templateSpec.main.call(container,context,container.helpers,container.partials,
data,depths)};ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial)container.partials=container.merge(options.partials,env.partials)}else{container.helpers=options.helpers;container.partials=options.partials}};ret._child=function(i,data,depths){if(templateSpec.useDepths&&!depths)throw new Exception("must pass parent depths");return program(container,i,templateSpec[i],data,depths)};return ret}__exports__.template=
template;function program(container,i,fn,data,depths){var prog=function(context,options){options=options||{};return fn.call(container,context,container.helpers,container.partials,options.data||data,depths&&[context].concat(depths))};prog.program=i;prog.depth=depths?depths.length:0;return prog}__exports__.program=program;function invokePartial(partial,name,context,helpers,partials,data,depths){var options={partial:true,helpers:helpers,partials:partials,data:data,depths:depths};if(partial===undefined)throw new Exception("The partial "+
name+" could not be found");else if(partial instanceof Function)return partial(context,options)}__exports__.invokePartial=invokePartial;function noop(){return""}__exports__.noop=noop;function initData(context,data){if(!data||!("root"in data)){data=data?createFrame(data):{};data.root=context}return data}return __exports__}(__module3__,__module5__,__module2__);var __module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__;var base=__dependency1__;
var SafeString=__dependency2__;var Exception=__dependency3__;var Utils=__dependency4__;var runtime=__dependency5__;var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;Handlebars["default"]=Handlebars;__exports__=Handlebars;return __exports__}(__module2__,
__module4__,__module5__,__module3__,__module6__);var __module7__=function(__dependency1__){var __exports__;var Exception=__dependency1__;function LocationInfo(locInfo){locInfo=locInfo||{};this.firstLine=locInfo.first_line;this.firstColumn=locInfo.first_column;this.lastColumn=locInfo.last_column;this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,strip,locInfo){LocationInfo.call(this,locInfo);this.type="program";this.statements=statements;this.strip=strip},MustacheNode:function(rawParams,
hash,open,strip,locInfo){LocationInfo.call(this,locInfo);this.type="mustache";this.strip=strip;if(open!=null&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped=escapeFlag!=="{"&&escapeFlag!=="&"}else this.escaped=!!open;if(rawParams instanceof AST.SexprNode)this.sexpr=rawParams;else this.sexpr=new AST.SexprNode(rawParams,hash);this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},
SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo);this.type="sexpr";this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);this.isHelper=!!(params.length||hash);this.eligibleHelper=this.isHelper||id.isSimple},PartialNode:function(partialName,context,hash,strip,locInfo){LocationInfo.call(this,locInfo);this.type="partial";this.partialName=partialName;this.context=context;this.hash=hash;this.strip=strip;this.strip.inlineStandalone=true},BlockNode:function(mustache,
program,inverse,strip,locInfo){LocationInfo.call(this,locInfo);this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;this.strip=strip;if(inverse&&!program)this.isInverse=true},RawBlockNode:function(mustache,content,close,locInfo){LocationInfo.call(this,locInfo);if(mustache.sexpr.id.original!==close)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close,this);content=new AST.ContentNode(content,locInfo);this.type="block";this.mustache=mustache;this.program=
new AST.ProgramNode([content],{},locInfo)},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="content";this.original=this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo);this.type="hash";this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo);this.type="ID";var original="",dig=[],depth=0,depthString="";for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||
part==="."||part==="this")if(dig.length>0)throw new Exception("Invalid path: "+original,this);else if(part===".."){depth++;depthString+="../"}else this.isScoped=true;else dig.push(part)}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.idName=depthString+this.string;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo);this.type="PARTIAL_NAME";this.name=
name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo);this.type="DATA";this.id=id;this.stringModeValue=id.stringModeValue;this.idName="@"+id.stringModeValue},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="STRING";this.original=this.string=this.stringModeValue=string},NumberNode:function(number,locInfo){LocationInfo.call(this,locInfo);this.type="NUMBER";this.original=this.number=number;this.stringModeValue=Number(number)},BooleanNode:function(bool,
locInfo){LocationInfo.call(this,locInfo);this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo);this.type="comment";this.comment=comment;this.strip={inlineStandalone:true}}};__exports__=AST;return __exports__}(__module5__);var __module9__=function(){var __exports__;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"program_repetition0":6,"statement":7,
"mustache":8,"block":9,"rawBlock":10,"partial":11,"CONTENT":12,"COMMENT":13,"openRawBlock":14,"END_RAW_BLOCK":15,"OPEN_RAW_BLOCK":16,"sexpr":17,"CLOSE_RAW_BLOCK":18,"openBlock":19,"block_option0":20,"closeBlock":21,"openInverse":22,"block_option1":23,"OPEN_BLOCK":24,"CLOSE":25,"OPEN_INVERSE":26,"inverseAndProgram":27,"INVERSE":28,"OPEN_ENDBLOCK":29,"path":30,"OPEN":31,"OPEN_UNESCAPED":32,"CLOSE_UNESCAPED":33,"OPEN_PARTIAL":34,"partialName":35,"param":36,"partial_option0":37,"partial_option1":38,"sexpr_repetition0":39,
"sexpr_option0":40,"dataName":41,"STRING":42,"NUMBER":43,"BOOLEAN":44,"OPEN_SEXPR":45,"CLOSE_SEXPR":46,"hash":47,"hash_repetition_plus0":48,"hashSegment":49,"ID":50,"EQUALS":51,"DATA":52,"pathSegments":53,"SEP":54,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",
43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function anonymous(yytext,
yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:yy.prepareProgram($$[$0-1].statements,true);return $$[$0-1];break;case 2:this.$=new yy.ProgramNode(yy.prepareProgram($$[$0]),{},this._$);break;case 3:this.$=$$[$0];break;case 4:this.$=$$[$0];break;case 5:this.$=$$[$0];break;case 6:this.$=$$[$0];break;case 7:this.$=new yy.ContentNode($$[$0],this._$);break;case 8:this.$=new yy.CommentNode($$[$0],this._$);break;case 9:this.$=new yy.RawBlockNode($$[$0-2],$$[$0-1],$$[$0],this._$);
break;case 10:this.$=new yy.MustacheNode($$[$0-1],null,"","",this._$);break;case 11:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],false,this._$);break;case 12:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],true,this._$);break;case 13:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 14:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 15:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-
1]),program:$$[$0]};break;case 16:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$=new yy.PartialNode($$[$0-3],$$[$0-2],$$[$0-1],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 20:this.$=new yy.PartialNode($$[$0-2],undefined,$$[$0-1],yy.stripFlags($$[$0-3],$$[$0]),
this._$);break;case 21:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 22:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 23:this.$=$$[$0];break;case 24:this.$=new yy.StringNode($$[$0],this._$);break;case 25:this.$=new yy.NumberNode($$[$0],this._$);break;case 26:this.$=new yy.BooleanNode($$[$0],this._$);break;case 27:this.$=$$[$0];break;case 28:$$[$0-1].isHelper=true;this.$=$$[$0-1];break;case 29:this.$=new yy.HashNode($$[$0],this._$);break;case 30:this.$=
[$$[$0-2],$$[$0]];break;case 31:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 32:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 33:this.$=new yy.PartialNameNode(new yy.NumberNode($$[$0],this._$));break;case 34:this.$=new yy.DataNode($$[$0],this._$);break;case 35:this.$=new yy.IdNode($$[$0],this._$);break;case 36:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 37:this.$=[{part:$$[$0]}];break;case 38:this.$=[];break;case 39:$$[$0-
1].push($$[$0]);break;case 48:this.$=[];break;case 49:$$[$0-1].push($$[$0]);break;case 52:this.$=[$$[$0]];break;case 53:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,
39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,
7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,
26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,
37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,
62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},
{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],
50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],
45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],
46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,
20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],
26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function parseError(str,hash){throw new Error(str);},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc=
{};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number")token=self.symbols_[token]||token;return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=
stack[stack.length-1];if(this.defaultActions[state])action=this.defaultActions[state];else{if(symbol===null||typeof symbol=="undefined")symbol=lex();action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2)expected.push("'"+this.terminals_[p]+"'");if(this.lexer.showPosition)errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+
expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'";else errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'");this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol);
vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-
(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges)yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]];r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined")return r;if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-
2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser)this.yy.parser.parseError(str,hash);else throw new Error(str);},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=
[0,0];this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else this.yylloc.last_column++;if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-
len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:
this.yylloc.first_column-len};if(this.options.ranges)this.yylloc.range=[r[0],r[0]+this.yyleng-len];return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20)next+=this._input.substr(0,20-next.length);return(next.substr(0,20)+(next.length>
20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=(new Array(pre.length+1)).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=
tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges)this.yylloc.range=
[this.offset,this.offset+=this.yyleng];this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input==="")return this.EOF;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},
lex:function lex(){var r=this.next();if(typeof r!=="undefined")return r;else return this.lex()},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};
lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else this.begin("mu");if(yy_.yytext)return 12;break;case 1:return 12;break;case 2:this.popState();return 12;break;case 3:yy_.yytext=yy_.yytext.substr(5,
yy_.yyleng-9);this.popState();return 15;break;case 4:return 12;break;case 5:strip(0,4);this.popState();return 13;break;case 6:return 45;break;case 7:return 46;break;case 8:return 16;break;case 9:this.popState();this.begin("raw");return 18;break;case 10:return 34;break;case 11:return 24;break;case 12:return 29;break;case 13:this.popState();return 28;break;case 14:this.popState();return 28;break;case 15:return 26;break;case 16:return 26;break;case 17:return 32;break;case 18:return 31;break;case 19:this.popState();
this.begin("com");break;case 20:strip(3,5);this.popState();return 13;break;case 21:return 31;break;case 22:return 51;break;case 23:return 50;break;case 24:return 50;break;case 25:return 54;break;case 26:break;case 27:this.popState();return 33;break;case 28:this.popState();return 25;break;case 29:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 42;break;case 30:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 42;break;case 31:return 52;break;case 32:return 44;break;case 33:return 44;break;case 34:return 43;
break;case 35:return 50;break;case 36:yy_.yytext=strip(1,2);return 50;break;case 37:return"INVALID";break;case 38:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,
/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={"mu":{"rules":[6,
7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],"inclusive":false},"emu":{"rules":[2],"inclusive":false},"com":{"rules":[5],"inclusive":false},"raw":{"rules":[3,4],"inclusive":false},"INITIAL":{"rules":[0,1,38],"inclusive":true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();__exports__=handlebars;return __exports__}();var __module10__=function(__dependency1__){var __exports__=
{};var Exception=__dependency1__;function stripFlags(open,close){return{left:open.charAt(2)==="~",right:close.charAt(close.length-3)==="~"}}__exports__.stripFlags=stripFlags;function prepareBlock(mustache,program,inverseAndProgram,close,inverted,locInfo){if(mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,mustache);var inverse=inverseAndProgram&&inverseAndProgram.program;var strip={left:mustache.strip.left,right:close.strip.right,
openStandalone:isNextWhitespace(program.statements),closeStandalone:isPrevWhitespace((inverse||program).statements)};if(mustache.strip.right)omitRight(program.statements,null,true);if(inverse){var inverseStrip=inverseAndProgram.strip;if(inverseStrip.left)omitLeft(program.statements,null,true);if(inverseStrip.right)omitRight(inverse.statements,null,true);if(close.strip.left)omitLeft(inverse.statements,null,true);if(isPrevWhitespace(program.statements)&&isNextWhitespace(inverse.statements)){omitLeft(program.statements);
omitRight(inverse.statements)}}else if(close.strip.left)omitLeft(program.statements,null,true);if(inverted)return new this.BlockNode(mustache,inverse,program,strip,locInfo);else return new this.BlockNode(mustache,program,inverse,strip,locInfo)}__exports__.prepareBlock=prepareBlock;function prepareProgram(statements,isRoot){for(var i=0,l=statements.length;i<l;i++){var current=statements[i],strip=current.strip;if(!strip)continue;var _isPrevWhitespace=isPrevWhitespace(statements,i,isRoot,current.type===
"partial"),_isNextWhitespace=isNextWhitespace(statements,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;if(strip.right)omitRight(statements,i,true);if(strip.left)omitLeft(statements,i,true);if(inlineStandalone){omitRight(statements,i);if(omitLeft(statements,i))if(current.type==="partial")current.indent=/([ \t]+$)/.exec(statements[i-1].original)?RegExp.$1:
""}if(openStandalone){omitRight((current.program||current.inverse).statements);omitLeft(statements,i)}if(closeStandalone){omitRight(statements,i);omitLeft((current.inverse||current.program).statements)}}return statements}__exports__.prepareProgram=prepareProgram;function isPrevWhitespace(statements,i,isRoot){if(i===undefined)i=statements.length;var prev=statements[i-1],sibling=statements[i-2];if(!prev)return isRoot;if(prev.type==="content")return(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original)}
function isNextWhitespace(statements,i,isRoot){if(i===undefined)i=-1;var next=statements[i+1],sibling=statements[i+2];if(!next)return isRoot;if(next.type==="content")return(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original)}function omitRight(statements,i,multiple){var current=statements[i==null?0:i+1];if(!current||current.type!=="content"||!multiple&&current.rightStripped)return;var original=current.string;current.string=current.string.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,"");
current.rightStripped=current.string!==original}function omitLeft(statements,i,multiple){var current=statements[i==null?statements.length-1:i-1];if(!current||current.type!=="content"||!multiple&&current.leftStripped)return;var original=current.string;current.string=current.string.replace(multiple?/\s+$/:/[ \t]+$/,"");current.leftStripped=current.string!==original;return current.leftStripped}return __exports__}(__module5__);var __module8__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__){var __exports__=
{};var parser=__dependency1__;var AST=__dependency2__;var Helpers=__dependency3__;var extend=__dependency4__.extend;__exports__.parser=parser;var yy={};extend(yy,Helpers,AST);function parse(input){if(input.constructor===AST.ProgramNode)return input;parser.yy=yy;return parser.parse(input)}__exports__.parse=parse;return __exports__}(__module9__,__module7__,__module10__,__module3__);var __module11__=function(__dependency1__,__dependency2__){var __exports__={};var Exception=__dependency1__;var isArray=
__dependency2__.isArray;var slice=[].slice;function Compiler(){}__exports__.Compiler=Compiler;Compiler.prototype={compiler:Compiler,equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return false;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return false}len=this.children.length;for(i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return false;
return true},guid:0,compile:function(program,options){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=options;this.stringParams=options.stringParams;this.trackIds=options.trackIds;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={"helperMissing":true,"blockHelperMissing":true,"each":true,"if":true,"unless":true,"with":true,"log":true,"lookup":true};if(knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.accept(program)},
accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements;for(var i=0,l=statements.length;i<l;i++)this.accept(statements[i]);this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<
l;i++){depth=result.depths.list[i];if(depth<2)continue;else this.addDepth(depth-1)}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program)program=this.compileProgram(program);if(inverse)inverse=this.compileProgram(inverse);var sexpr=mustache.sexpr;var type=this.classifySexpr(sexpr);if(type==="helper")this.helperSexpr(sexpr,program,inverse);else if(type==="simple"){this.simpleSexpr(sexpr);this.opcode("pushProgram",program);this.opcode("pushProgram",
inverse);this.opcode("emptyHash");this.opcode("blockValue",sexpr.id.original)}else{this.ambiguousSexpr(sexpr,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,i,l;this.opcode("pushHash");for(i=0,l=pairs.length;i<l;i++)this.pushParam(pairs[i][1]);while(i--)this.opcode("assignToHash",pairs[i][0]);this.opcode("popHash")},partial:function(partial){var partialName=
partial.partialName;this.usePartial=true;if(partial.hash)this.accept(partial.hash);else this.opcode("push","undefined");if(partial.context)this.accept(partial.context);else{this.opcode("getContext",0);this.opcode("pushContext")}this.opcode("invokePartial",partialName.name,partial.indent||"");this.opcode("append")},content:function(content){if(content.string)this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr);if(mustache.escaped&&!this.options.noEscape)this.opcode("appendEscaped");
else this.opcode("append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.ID(id);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;if(id.type==="DATA")this.DATA(id);else if(id.parts.length)this.ID(id);else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},
helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),id=sexpr.id,name=id.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else if(this.options.knownHelpersOnly)throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);else{id.falsy=true;this.ID(id);this.opcode("invokeHelper",params.length,id.original,id.isSimple)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);
if(type==="simple")this.simpleSexpr(sexpr);else if(type==="helper")this.helperSexpr(sexpr);else this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name)this.opcode("pushContext");else this.opcode("lookupOnContext",id.parts,id.falsy,id.isScoped)},DATA:function(data){this.options.data=true;this.opcode("lookupData",data.id.depth,data.id.parts)},STRING:function(string){this.opcode("pushString",string.string)},NUMBER:function(number){this.opcode("pushLiteral",
number.number)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1)})},addDepth:function(depth){if(depth===0)return;if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper;var isEligible=sexpr.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];if(options.knownHelpers[name])isHelper=
true;else if(options.knownHelpersOnly)isEligible=false}if(isHelper)return"helper";else if(isEligible)return"ambiguous";else return"simple"},pushParams:function(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function(val){if(this.stringParams){if(val.depth)this.addDepth(val.depth);this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type);if(val.type==="sexpr")this.sexpr(val)}else{if(this.trackIds)this.opcode("pushId",val.type,
val.idName||val.stringModeValue);this.accept(val)}},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash)this.hash(sexpr.hash);else this.opcode("emptyHash");return params}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
input);options=options||{};if(!("data"in options))options.data=true;if(options.compat)options.useDepths=true;var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}__exports__.precompile=precompile;function compile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
input);options=options||{};if(!("data"in options))options.data=true;if(options.compat)options.useDepths=true;var compiled;function compileInput(){var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);var templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}var ret=function(context,options){if(!compiled)compiled=compileInput();return compiled.call(this,context,options)};ret._setup=function(options){if(!compiled)compiled=
compileInput();return compiled._setup(options)};ret._child=function(i,data,depths){if(!compiled)compiled=compileInput();return compiled._child(i,data,depths)};return ret}__exports__.compile=compile;function argEquals(a,b){if(a===b)return true;if(isArray(a)&&isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return false;return true}}return __exports__}(__module5__,__module3__);var __module12__=function(__dependency1__,__dependency2__){var __exports__;var COMPILER_REVISION=
__dependency1__.COMPILER_REVISION;var REVISION_CHANGES=__dependency1__.REVISION_CHANGES;var Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){if(JavaScriptCompiler.isValidJavaScriptVariableName(name))return parent+"."+name;else return parent+"['"+name+"']"},depthedLookup:function(name){this.aliases.lookup="this.lookup";return'lookup(depths, "'+name+'")'},compilerInfo:function(){var revision=
COMPILER_REVISION,versions=REVISION_CHANGES[revision];return[revision,versions]},appendToBuffer:function(string){if(this.environment.isSimple)return"return "+string+";";else return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options;this.stringParams=this.options.stringParams;this.trackIds=
this.options.trackIds;this.precompile=!asObject;this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);this.useDepths=this.useDepths||environment.depths.list.length||this.options.compat;var opcodes=environment.opcodes,opcode,i,l;for(i=0,l=opcodes.length;i<l;i++){opcode=
opcodes[i];this[opcode.opcode].apply(this,opcode.args)}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");var fn=this.createFunctionContext(asObject);if(!this.isChild){var ret={compiler:this.compilerInfo(),main:fn};var programs=this.context.programs;for(i=0,l=programs.length;i<l;i++)if(programs[i])ret[i]=programs[i];if(this.environment.usePartial)ret.usePartial=true;if(this.options.data)ret.useData=
true;if(this.useDepths)ret.useDepths=true;if(this.options.compat)ret.compat=true;if(!asObject){ret.compiler=JSON.stringify(ret.compiler);ret=this.objectLiteral(ret)}return ret}else return fn},preamble:function(){this.lastContext=0;this.source=[]},createFunctionContext:function(asObject){var varDeclarations="";var locals=this.stackVars.concat(this.registers.list);if(locals.length>0)varDeclarations+=", "+locals.join(", ");for(var alias in this.aliases)if(this.aliases.hasOwnProperty(alias))varDeclarations+=
", "+alias+"="+this.aliases[alias];var params=["depth0","helpers","partials","data"];if(this.useDepths)params.push("depths");var source=this.mergeSource(varDeclarations);if(asObject){params.push(source);return Function.apply(this,params)}else return"function("+params.join(",")+") {\n  "+source+"}"},mergeSource:function(varDeclarations){var source="",buffer,appendOnly=!this.forceBuffer,appendFirst;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer)if(buffer)buffer=
buffer+"\n    + "+line.content;else buffer=line.content;else{if(buffer){if(!source){appendFirst=true;source=buffer+";\n  "}else source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  ";if(!this.environment.isSimple)appendOnly=false}}if(appendOnly){if(buffer||!source)source+="return "+(buffer||'""')+";\n"}else{varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer());if(buffer)source+="return buffer + "+buffer+";\n";else source+="return buffer;\n"}if(varDeclarations)source=
"var "+varDeclarations.substring(2)+(appendFirst?"":";\n  ")+source;return source},blockValue:function(name){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=[this.contextName(0)];this.setupParams(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName);this.push("blockHelperMissing.call("+params.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=[this.contextName(0)];this.setupParams("",0,
params,true);this.flushInline();var current=this.topStack();params.splice(1,0,current);this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){if(this.pendingContent)content=this.pendingContent+content;this.pendingContent=content},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if ("+local+" != null) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple)this.pushSource("else { "+
this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext=depth},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(parts,falsy,scoped){var i=0,len=parts.length;if(!scoped&&this.options.compat&&!this.lastContext)this.push(this.depthedLookup(parts[i++]));else this.pushContext();
for(;i<len;i++)this.replaceStack(function(current){var lookup=this.nameLookup(current,parts[i],"context");if(!falsy)return" != null ? "+lookup+" : "+current;else return" && "+lookup})},lookupData:function(depth,parts){if(!depth)this.pushStackLiteral("data");else this.pushStackLiteral("this.data(data, "+depth+")");var len=parts.length;for(var i=0;i<len;i++)this.replaceStack(function(current){return" && "+this.nameLookup(current,parts[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda=
"this.lambda";this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(string,type){this.pushContext();this.pushString(type);if(type!=="sexpr")if(typeof string==="string")this.pushString(string);else this.pushStackLiteral(string)},emptyHash:function(){this.pushStackLiteral("{}");if(this.trackIds)this.push("{}");if(this.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash)this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],
ids:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop();if(this.trackIds)this.push("{"+hash.ids.join(",")+"}");if(this.stringParams){this.push("{"+hash.contexts.join(",")+"}");this.push("{"+hash.types.join(",")+"}")}this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){this.inlineStack.push(expr);return expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){if(guid!=
null)this.pushStackLiteral(this.programExpression(guid));else this.pushStackLiteral(null)},invokeHelper:function(paramSize,name,isSimple){this.aliases.helperMissing="helpers.helperMissing";var nonHelper=this.popStack();var helper=this.setupHelper(paramSize,name);var lookup=(isSimple?helper.name+" || ":"")+nonHelper+" || helperMissing";this.push("(("+lookup+").call("+helper.callParams+"))")},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+
".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.aliases.functionType='"function"';this.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");this.push("((helper = (helper = "+helperName+" || "+nonHelper+") != null ? helper : helperMissing"+(helper.paramsInit?"),("+helper.paramsInit:"")+
"),"+"(typeof helper === functionType ? helper.call("+helper.callParams+") : helper))")},invokePartial:function(name,indent){var params=[this.nameLookup("partials",name,"partial"),"'"+indent+"'","'"+name+"'",this.popStack(),this.popStack(),"helpers","partials"];if(this.options.data)params.push("data");else if(this.options.compat)params.push("undefined");if(this.options.compat)params.push("depths");this.push("this.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),
context,type,id;if(this.trackIds)id=this.popStack();if(this.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context)hash.contexts.push("'"+key+"': "+context);if(type)hash.types.push("'"+key+"': "+type);if(id)hash.ids.push("'"+key+"': "+id);hash.values.push("'"+key+"': ("+value+")")},pushId:function(type,name){if(type==="ID"||type==="DATA")this.pushString(name);else if(type==="sexpr")this.pushStackLiteral("true");else this.pushStackLiteral("null")},compiler:JavaScriptCompiler,
compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile);this.context.environments[index]=child;this.useDepths=this.useDepths||
compiler.useDepths}else{child.index=index;child.name="program"+index}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){var child=this.environment.children[guid],depths=child.depths.list,useDepths=this.useDepths,depth;var programParams=[child.index,"data"];if(useDepths)programParams.push("depths");return"this.program("+
programParams.join(", ")+")"},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(source)this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();this.pushSource(stack+" = "+
item+";");this.compileStack.push(stack);return stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack,createdStack,usedLiteral;if(!this.isInline())throw new Exception("replaceStack on non-inline");var top=this.popStack(true);if(top instanceof Literal){prefix=stack=top.value;usedLiteral=true}else{createdStack=!this.stackSlot;var name=!createdStack?this.topStackName():this.incrStack();prefix="("+this.push(name)+" = "+top+")";stack=this.topStack()}var item=callback.call(this,
stack);if(!usedLiteral)this.popStack();if(createdStack)this.stackSlot--;this.push("("+prefix+item+")")},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length)this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal)this.compileStack.push(entry);
else this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;else{if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item}},topStack:function(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(item instanceof Literal)return item.value;
else return item},contextName:function(context){if(this.useDepths&&context)return"depths["+context+"]";else return"depth"+context},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(obj){var pairs=[];for(var key in obj)if(obj.hasOwnProperty(key))pairs.push(this.quotedString(key)+":"+obj[key]);return"{"+pairs.join(",")+"}"},setupHelper:function(paramSize,
name,blockHelper){var params=[],paramsInit=this.setupParams(name,paramSize,params,blockHelper);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:[this.contextName(0)].concat(params).join(", ")}},setupOptions:function(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],param,inverse,program;options.name=this.quotedString(helper);options.hash=this.popStack();if(this.trackIds)options.hashIds=this.popStack();
if(this.stringParams){options.hashTypes=this.popStack();options.hashContexts=this.popStack()}inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program)program="this.noop";if(!inverse)inverse="this.noop";options.fn=program;options.inverse=inverse}var i=paramSize;while(i--){param=this.popStack();params[i]=param;if(this.trackIds)ids[i]=this.popStack();if(this.stringParams){types[i]=this.popStack();contexts[i]=this.popStack()}}if(this.trackIds)options.ids="["+ids.join(",")+"]";
if(this.stringParams){options.types="["+types.join(",")+"]";options.contexts="["+contexts.join(",")+"]"}if(this.options.data)options.data="data";return options},setupParams:function(helperName,paramSize,params,useRegister){var options=this.objectLiteral(this.setupOptions(helperName,paramSize,params));if(useRegister){this.useRegister("options");params.push("options");return"options="+options}else{params.push(options);return""}}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+
" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=true;JavaScriptCompiler.isValidJavaScriptVariableName=
function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)};__exports__=JavaScriptCompiler;return __exports__}(__module2__,__module5__);var __module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__;var Handlebars=__dependency1__;var AST=__dependency2__;var Parser=__dependency3__.parser;var parse=__dependency3__.parse;var Compiler=__dependency4__.Compiler;var compile=__dependency4__.compile;var precompile=
__dependency4__.precompile;var JavaScriptCompiler=__dependency5__;var _create=Handlebars.create;var create=function(){var hb=_create();hb.compile=function(input,options){return compile(input,options,hb)};hb.precompile=function(input,options){return precompile(input,options,hb)};hb.AST=AST;hb.Compiler=Compiler;hb.JavaScriptCompiler=JavaScriptCompiler;hb.Parser=Parser;hb.parse=parse;return hb};Handlebars=create();Handlebars.create=create;Handlebars["default"]=Handlebars;__exports__=Handlebars;return __exports__}(__module1__,
__module7__,__module8__,__module11__,__module12__);return __module0__});(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||
function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types["defaults"].buttons;var content=$.editable.types[settings.type].content||$.editable.types["defaults"].content;var element=$.editable.types[settings.type].element||$.editable.types["defaults"].element;var reset=$.editable.types[settings.type].reset||$.editable.types["defaults"].reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=
settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip)$(this).attr("title",settings.tooltip);settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html()))$(this).html(settings.placeholder);$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable"))return;
if(self.editing)return;if(false===onedit.apply(this,[settings,self]))return;e.preventDefault();e.stopPropagation();if(settings.tooltip)$(self).removeAttr("title");if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none")settings.width=settings.autowidth?$(self).width():settings.width;if(settings.height!="none")settings.height=settings.autoheight?$(self).height():settings.height}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,
""))$(this).html("");self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass)if("inherit"==settings.cssclass)form.attr("class",$(self).attr("class"));else form.attr("class",settings.cssclass);if(settings.style)if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else form.attr("style",settings.style);var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=
setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata))$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]));else $.extend(loaddata,settings.loaddata);$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else if(settings.data){input_content=
settings.data;if($.isFunction(settings.data))input_content=settings.data.apply(self,[self.revert,settings])}else input_content=self.revert;content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select)input.select();input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;
if("cancel"==settings.onblur)input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)});else if("submit"==settings.onblur)input.blur(function(e){form.submit()});else if($.isFunction(settings.onblur))input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])});else input.blur(function(e){});form.submit(function(e){if(t)clearTimeout(t);e.preventDefault();if(false!==onsubmit.apply(form,[settings,self]))if(false!==submit.apply(form,[settings,self]))if($.isFunction(settings.target)){var str=
settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html()))$(self).html(settings.placeholder)}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata))$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]));else $.extend(submitdata,settings.submitdata);if("PUT"==settings.method)submitdata["_method"]="put";
$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html")$(self).html(result);self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html()))$(self).html(settings.placeholder)},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}$(self).attr("title",settings.tooltip);return false})});
this.reset=function(form){if(this.editing)if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html()))$(self).html(settings.placeholder);if(settings.tooltip)$(self).attr("title",settings.tooltip)}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return input},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,
original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/))var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit")form.submit()});else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/))var cancel=$(settings.cancel);else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);
$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset))var reset=$.editable.types[settings.type].reset;else var reset=$.editable.types["defaults"].reset;reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none")input.width(settings.width);if(settings.height!="none")input.height(settings.height);input.attr("autocomplete","off");$(this).append(input);return input}},textarea:{element:function(settings,
original){var textarea=$("<textarea />");if(settings.rows)textarea.attr("rows",settings.rows);else if(settings.height!="none")textarea.height(settings.height);if(settings.cols)textarea.attr("cols",settings.cols);else if(settings.width!="none")textarea.width(settings.width);$(this).append(textarea);return textarea}},select:{element:function(settings,original){var select=$("<select />");$(this).append(select);return select},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+
data);else var json=data;var aData=[];for(var key in json){if(!json.hasOwnProperty(key))continue;if("selected"==key)continue;var value=json[key];if(!key)key="-99999";aData.push(key+"||"+value)}aData.sort();for(var key in aData){var aDataSplit=aData[key].split("||");var value=aDataSplit[0];var label=aDataSplit[1];if(value=="-99999")value="";var option=$("<option />").val(value).append(label);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json["selected"]||
$(this).text()==$.trim(original.revert))$(this).attr("selected","selected")})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function(){var $;$=jQuery;$.widget("ui.dialogExtend",{version:"2.0.0",modes:{},options:{"closable":true,"dblclick":false,"titlebar":false,"icons":{"close":"ui-icon-closethick","restore":"ui-icon-newwin"},"load":null,"beforeRestore":null,"restore":null},_create:function(){this._state="normal";if(!$(this.element[0]).data("ui-dialog"))$.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted");this._verifyOptions();this._initStyles();this._initButtons();this._initTitleBar();this._setState("normal");
this._on("load",function(e){return console.log("test",e)});return this._trigger("load")},_setState:function(state){$(this.element[0]).removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+state);return this._state=state},_verifyOptions:function(){var name,_ref,_results;if(this.options.dblclick&&!(this.options.dblclick in this.modes)){$.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+this.options.dblclick+"'");this.options.dblclick=false}if(this.options.titlebar&&(_ref=this.options.titlebar)!==
"none"&&_ref!=="transparent"){$.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'");this.options.titlebar=false}_results=[];for(name in this.modes)if(this["_verifyOptions_"+name])_results.push(this["_verifyOptions_"+name]());else _results.push(void 0);return _results},_initStyles:function(){var name,style,_results;if(!$(".dialog-extend-css").length){style="";style+='<style class="dialog-extend-css" type="text/css">';style+=".ui-dialog .ui-dialog-titlebar-buttonpane>a { float: right; }";
style+=".ui-dialog .ui-dialog-titlebar-restore { width: 19px; height: 18px; }";style+=".ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }";style+=".ui-dialog .ui-dialog-titlebar-restore:hover,";style+=".ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }";style+=".ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }";style+="</style>";$(style).appendTo("body")}_results=[];for(name in this.modes)_results.push(this["_initStyles_"+name]());return _results},
_initButtons:function(){var buttonPane,mode,name,titlebar,_ref,_this=this;titlebar=$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar");buttonPane=$('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(titlebar);buttonPane.css({"position":"absolute","top":"50%","right":"0.3em","margin-top":"-10px","height":"18px"});titlebar.find(".ui-dialog-titlebar-close").css({"position":"relative","float":"right","top":"auto","right":"auto","margin":0}).find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(buttonPane).end();
buttonPane.append('<a class="ui-dialog-titlebar-restore ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons.restore+'" title="restore">restore</span></a>').find(".ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){return $(this).addClass("ui-state-hover")}).mouseout(function(){return $(this).removeClass("ui-state-hover")}).focus(function(){return $(this).addClass("ui-state-focus")}).blur(function(){return $(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-close").toggle(this.options.closable).end().find(".ui-dialog-titlebar-restore").hide().click(function(e){e.preventDefault();
return _this.restore()}).end();_ref=this.modes;for(name in _ref){mode=_ref[name];this._initModuleButton(name,mode)}return titlebar.dblclick(function(evt){if(_this.options.dblclick)if(_this._state!=="normal")return _this.restore();else return _this[_this.options.dblclick]()}).select(function(){return false})},_initModuleButton:function(name,mode){var buttonPane,_this=this;buttonPane=$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-buttonpane");return buttonPane.append('<a class="ui-dialog-titlebar-'+
name+' ui-corner-all ui-state-default" href="#" title="'+name+'"><span class="ui-icon '+this.options.icons[name]+'">'+name+"</span></a>").find(".ui-dialog-titlebar-"+name).attr("role","button").mouseover(function(){return $(this).addClass("ui-state-hover")}).mouseout(function(){return $(this).removeClass("ui-state-hover")}).focus(function(){return $(this).addClass("ui-state-focus")}).blur(function(){return $(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-"+name).toggle(this.options[mode.option]).click(function(e){e.preventDefault();
return _this[name]()}).end()},_initTitleBar:function(){var handle;switch(this.options.titlebar){case false:return 0;case "none":if($(this.element[0]).dialog("option","draggable")){handle=$("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5);$(this.element[0]).dialog("widget").prepend(handle).draggable("option","handle",handle)}return $(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("&nbsp;").end().css({"background-color":"transparent",
"background-image":"none","border":0,"position":"absolute","right":0,"top":0,"z-index":9999}).end();case "transparent":return $(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none","border":0});default:return $.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}},state:function(){return this._state},restore:function(){this._trigger("beforeRestore");this._restore();this._toggleButtons();
return this._trigger("restore")},_restore:function(){if(this._state!=="normal"){this["_restore_"+this._state]();this._setState("normal");return $(this.element[0]).dialog("widget").focus()}},_saveSnapshot:function(){if(this._state==="normal"){this.original_config_resizable=$(this.element[0]).dialog("option","resizable");this.original_config_draggable=$(this.element[0]).dialog("option","draggable");this.original_size_height=$(this.element[0]).dialog("widget").outerHeight();this.original_size_width=
$(this.element[0]).dialog("option","width");this.original_size_maxHeight=$(this.element[0]).dialog("option","maxHeight");this.original_position_mode=$(this.element[0]).dialog("widget").css("position");this.original_position_left=$(this.element[0]).dialog("widget").offset().left-$("body").scrollLeft();this.original_position_top=$(this.element[0]).dialog("widget").offset().top-$("body").scrollTop();return this.original_titlebar_wrap=$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")}},
_loadSnapshot:function(){return{"config":{"resizable":this.original_config_resizable,"draggable":this.original_config_draggable},"size":{"height":this.original_size_height,"width":this.original_size_width,"maxHeight":this.original_size_maxHeight},"position":{"mode":this.original_position_mode,"left":this.original_position_left,"top":this.original_position_top},"titlebar":{"wrap":this.original_titlebar_wrap}}},_toggleButtons:function(newstate){var mode,name,state,_ref,_ref1,_results;state=newstate||
this._state;$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").toggle(state!=="normal").css({"right":"1.4em"}).end();_ref=this.modes;for(name in _ref){mode=_ref[name];$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+name).toggle(state!==mode.state&&this.options[mode.option])}_ref1=this.modes;_results=[];for(name in _ref1){mode=_ref1[name];if(mode.state===state)_results.push($(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").insertAfter($(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+
name)).end());else _results.push(void 0)}return _results}})}).call(this);
(function(){var $;$=jQuery;$.extend(true,$.ui.dialogExtend.prototype,{modes:{"collapse":{option:"collapsable",state:"collapsed"}},options:{"collapsable":false,"icons":{"collapse":"ui-icon-triangle-1-s"},"beforeCollapse":null,"collapse":null},collapse:function(){var newHeight,pos;newHeight=$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15;this._trigger("beforeCollapse");if(this._state!=="normal")this._restore();this._saveSnapshot();pos=$(this.element[0]).dialog("widget").position();
$(this.element[0]).dialog("option",{"resizable":false,"height":newHeight,"maxHeight":newHeight,"position":[pos.left-$(document).scrollLeft(),pos.top-$(document).scrollTop()]}).on("dialogclose",this._collapse_restore).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content");this._setState("collapsed");this._toggleButtons();return this._trigger("collapse")},_restore_collapsed:function(){var original;
original=this._loadSnapshot();return $(this.element[0]).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",original.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{"resizable":original.config.resizable,"height":original.size.height,"maxHeight":original.size.maxHeight}).off("dialogclose",this._collapse_restore)},_initStyles_collapse:function(){var style;if(!$(".dialog-extend-collapse-css").length){style="";style+=
'<style class="dialog-extend-collapse-css" type="text/css">';style+=".ui-dialog .ui-dialog-titlebar-collapse { width: 19px; height: 18px; }";style+=".ui-dialog .ui-dialog-titlebar-collapse span { display: block; margin: 1px; }";style+=".ui-dialog .ui-dialog-titlebar-collapse:hover,";style+=".ui-dialog .ui-dialog-titlebar-collapse:focus { padding: 0; }";style+="</style>";return $(style).appendTo("body")}},_collapse_restore:function(){return $(this).dialogExtend("restore")}})}).call(this);
(function(){var $;$=jQuery;$.extend(true,$.ui.dialogExtend.prototype,{modes:{"maximize":{option:"maximizable",state:"maximized"}},options:{"maximizable":false,"icons":{"maximize":"ui-icon-extlink"},"beforeMaximize":null,"maximize":null},maximize:function(){var newHeight,newWidth;newHeight=$(window).height()-11;newWidth=$(window).width()-11;this._trigger("beforeMaximize");if(this._state!=="normal")this._restore();this._saveSnapshot();if($(this.element[0]).dialog("option","draggable"))$(this.element[0]).dialog("widget").draggable("option",
"handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end();$(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{"resizable":false,"draggable":false,"height":newHeight,"width":newWidth,"position":{my:"left top",at:"left top",of:window}});this._setState("maximized");this._toggleButtons();return this._trigger("maximize")},_restore_maximized:function(){var original;
original=this._loadSnapshot();$(this.element[0]).dialog("widget").css("position",original.position.mode).find(".ui-dialog-titlebar").css("white-space",original.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{"resizable":original.config.resizable,"draggable":original.config.draggable,"height":original.size.height,"width":original.size.width,"maxHeight":original.size.maxHeight,"position":{my:"left top",at:"left+"+original.position.left+" top+"+original.position.top,of:window}});if($(this.element[0]).dialog("option",
"draggable"))return $(this.element[0]).dialog("widget").draggable("option","handle",$(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?$(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move")},_initStyles_maximize:function(){var style;if(!$(".dialog-extend-maximize-css").length){style="";style+='<style class="dialog-extend-maximize-css" type="text/css">';style+=".ui-dialog .ui-dialog-titlebar-maximize { width: 19px; height: 18px; }";
style+=".ui-dialog .ui-dialog-titlebar-maximize span { display: block; margin: 1px; }";style+=".ui-dialog .ui-dialog-titlebar-maximize:hover,";style+=".ui-dialog .ui-dialog-titlebar-maximize:focus { padding: 0; }";style+="</style>";return $(style).appendTo("body")}}})}).call(this);
(function(){var $;$=jQuery;$.extend(true,$.ui.dialogExtend.prototype,{modes:{"minimize":{option:"minimizable",state:"minimized"}},options:{"minimizable":false,"minimizeLocation":"left","icons":{"minimize":"ui-icon-minus"},"beforeMinimize":null,"minimize":null},minimize:function(){var dialogcontrols,fixedContainer,newWidth;this._trigger("beforeMinimize");if(this._state!=="normal")this._restore();newWidth=200;if($("#dialog-extend-fixed-container").length)fixedContainer=$("#dialog-extend-fixed-container");
else{fixedContainer=$('<div id="dialog-extend-fixed-container"></div>').appendTo("body");fixedContainer.css({"position":"fixed","bottom":1,"left":1,"right":1,"z-index":9999})}this._toggleButtons("minimized");dialogcontrols=$(this.element[0]).dialog("widget").clone().children().remove().end();$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").clone(true,true).appendTo(dialogcontrols);dialogcontrols.css({"float":this.options.minimizeLocation,"margin":1});fixedContainer.append(dialogcontrols);
$(this.element[0]).data("dialog-extend-minimize-controls",dialogcontrols);if($(this.element[0]).dialog("option","draggable"))dialogcontrols.removeClass("ui-draggable");dialogcontrols.css({"height":"auto","width":newWidth,"position":"static"});$(this.element[0]).on("dialogbeforeclose",this._minimize_restoreOnClose).dialog("widget").data("dialogParams",{width:$(this.element[0]).dialog("widget").width(),height:$(this.element[0]).dialog("widget").height(),left:$(this.element[0]).dialog("widget").offset().left,
top:$(this.element[0]).dialog("widget").offset().top}).animate({height:0,width:"20px",top:fixedContainer.offset().top+fixedContainer.height()-25,left:fixedContainer.offset().left},300,function(){$(this).hide()});this._setState("minimized");return this._trigger("minimize")},_restore_minimized:function(){var restoredData=$(this.element[0]).dialog("widget").data("dialogParams");console.log(restoredData);$(this.element[0]).dialog("widget").show();$(this.element[0]).dialog("widget").animate({width:restoredData.width,
height:restoredData.height,left:restoredData.left,top:restoredData.top},300,function(){});$(this.element[0]).off("dialogbeforeclose",this._minimize_restoreOnClose);$(this.element[0]).data("dialog-extend-minimize-controls").remove();return $(this.element[0]).removeData("dialog-extend-minimize-controls")},_initStyles_minimize:function(){var style;if(!$(".dialog-extend-minimize-css").length){style="";style+='<style class="dialog-extend-minimize-css" type="text/css">';style+=".ui-dialog .ui-dialog-titlebar-minimize { width: 19px; height: 18px; }";
style+=".ui-dialog .ui-dialog-titlebar-minimize span { display: block; margin: 1px; }";style+=".ui-dialog .ui-dialog-titlebar-minimize:hover,";style+=".ui-dialog .ui-dialog-titlebar-minimize:focus { padding: 0; }";style+="</style>";return $(style).appendTo("body")}},_verifyOptions_minimize:function(){var _ref;if(!this.options.minimizeLocation||(_ref=this.options.minimizeLocation)!=="left"&&_ref!=="right"){$.error("jQuery.dialogExtend Error : Invalid <minimizeLocation> value '"+this.options.minimizeLocation+
"'");return this.options.minimizeLocation="left"}},_minimize_restoreOnClose:function(){return $(this).dialogExtend("restore")}})}).call(this);(function(){var globalization={},localized={en:{}};localized["default"]=localized.en;globalization.extend=function(deep){var target=arguments[1]||{};for(var i=2,l=arguments.length;i<l;i++){var source=arguments[i];if(source)for(var field in source){var sourceVal=source[field];if(typeof sourceVal!=="undefined")if(deep&&(isObject(sourceVal)||isArray(sourceVal))){var targetVal=target[field];targetVal=targetVal&&(isObject(targetVal)||isArray(targetVal))?targetVal:isArray(sourceVal)?[]:{};target[field]=
this.extend(true,targetVal,sourceVal)}else target[field]=sourceVal}}return target};globalization.findClosestCulture=function(name){var match;if(!name)return this.culture||this.cultures["default"];if(isString(name))name=name.split(",");if(isArray(name)){var lang,cultures=this.cultures,list=name,i,l=list.length,prioritized=[];for(i=0;i<l;i++){name=trim(list[i]);var pri,parts=name.split(";");lang=trim(parts[0]);if(parts.length===1)pri=1;else{name=trim(parts[1]);if(name.indexOf("q=")===0){name=name.substr(2);
pri=parseFloat(name,10);pri=isNaN(pri)?0:pri}else pri=1}prioritized.push({lang:lang,pri:pri})}prioritized.sort(function(a,b){return a.pri<b.pri?1:-1});for(i=0;i<l;i++){lang=prioritized[i].lang;match=cultures[lang];if(match)return match}for(i=0;i<l;i++){lang=prioritized[i].lang;do{var index=lang.lastIndexOf("-");if(index===-1)break;lang=lang.substr(0,index);match=cultures[lang];if(match)return match}while(1)}for(i=0;i<l;i++){lang=prioritized[i].lang;for(var cultureKey in cultures){var culture=cultures[cultureKey];
if(culture.language==lang)return culture}}}else if(typeof name==="object")return name;return match||null};globalization.preferCulture=function(name){this.culture=this.findClosestCulture(name)||this.cultures["default"]};globalization.localize=function(key,culture,value){if(typeof culture!=="string")culture=this.culture.name||this.culture||"default";culture=this.cultures[culture]||{name:culture};var local=localized[culture.name];if(arguments.length===3){if(!local)local=localized[culture.name]={};local[key]=
value}else{if(local)value=local[key];if(typeof value==="undefined"){var language=localized[culture.language];if(language)value=language[key];if(typeof value==="undefined")value=localized["default"][key]}}return typeof value==="undefined"?null:value};globalization.format=function(value,format,culture){culture=this.findClosestCulture(culture);if(typeof value==="number")value=formatNumber(value,format,culture);else if(value instanceof Date)value=formatDate(value,format,culture);return value};globalization.parseInt=
function(value,radix,culture){return Math.floor(this.parseFloat(value,radix,culture))};globalization.parseFloat=function(value,radix,culture){if(typeof radix==="string"){culture=radix;radix=10}culture=this.findClosestCulture(culture);var ret=NaN,nf=culture.numberFormat;if(value.indexOf(culture.numberFormat.currency.symbol)>-1){value=value.replace(culture.numberFormat.currency.symbol,"");value=value.replace(culture.numberFormat.currency["."],culture.numberFormat["."])}value=trim(value);if(regexInfinity.test(value))ret=
parseFloat(value,radix);else if(!radix&&regexHex.test(value))ret=parseInt(value,16);else{var signInfo=parseNegativePattern(value,nf,nf.pattern[0]),sign=signInfo[0],num=signInfo[1];if(sign===""&&nf.pattern[0]!=="-n"){signInfo=parseNegativePattern(value,nf,"-n");sign=signInfo[0];num=signInfo[1]}sign=sign||"+";var exponent,intAndFraction,exponentPos=num.indexOf("e");if(exponentPos<0)exponentPos=num.indexOf("E");if(exponentPos<0){intAndFraction=num;exponent=null}else{intAndFraction=num.substr(0,exponentPos);
exponent=num.substr(exponentPos+1)}var integer,fraction,decSep=nf["."],decimalPos=intAndFraction.indexOf(decSep);if(decimalPos<0){integer=intAndFraction;fraction=null}else{integer=intAndFraction.substr(0,decimalPos);fraction=intAndFraction.substr(decimalPos+decSep.length)}var groupSep=nf[","];integer=integer.split(groupSep).join("");var altGroupSep=groupSep.replace(/\u00A0/g," ");if(groupSep!==altGroupSep)integer=integer.split(altGroupSep).join("");var p=sign+integer;if(fraction!==null)p+="."+fraction;
if(exponent!==null){var expSignInfo=parseNegativePattern(exponent,nf,"-n");p+="e"+(expSignInfo[0]||"+")+expSignInfo[1]}if(regexParseFloat.test(p))ret=parseFloat(p)}return ret};globalization.parseDate=function(value,formats,culture){culture=this.findClosestCulture(culture);var date,prop,patterns;if(formats){if(typeof formats==="string")formats=[formats];if(formats.length)for(var i=0,l=formats.length;i<l;i++){var format=formats[i];if(format){date=parseExact(value,format,culture);if(date)break}}}else{patterns=
culture.calendar.patterns;for(prop in patterns){date=parseExact(value,patterns[prop],culture);if(date)break}}return date||null};var cultures=globalization.cultures=globalization.cultures||{};var en=cultures["default"]=cultures.en=globalization.extend(true,{name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},
currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb",
"Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{"name":"A.D.","start":null,"offset":0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},cultures.en);en.calendar=en.calendar||en.calendars.standard;var regexTrim=/^\s+|\s+$/g,regexInfinity=/^[+-]?infinity$/i,regexHex=
/^0x[a-f0-9]+$/i,regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString=Object.prototype.toString;function startsWith(value,pattern){return value.indexOf(pattern)===0}function endsWith(value,pattern){return value.substr(value.length-pattern.length)===pattern}function trim(value){return(value+"").replace(regexTrim,"")}function zeroPad(str,count,left){for(var l=str.length;l<count;l++)str=left?"0"+str:str+"0";return str}function isArray(obj){return toString.call(obj)==="[object Array]"}function isString(obj){return toString.call(obj)===
"[object String]"}function isObject(obj){return toString.call(obj)==="[object Object]"}function arrayIndexOf(array,item){if(array.indexOf)return array.indexOf(item);for(var i=0,length=array.length;i<length;i++)if(array[i]===item)return i;return-1}function expandNumber(number,precision,formatInfo){var groupSizes=formatInfo.groupSizes,curSize=groupSizes[0],curGroupIndex=1,factor=Math.pow(10,precision),rounded=Math.round(number*factor)/factor;if(!isFinite(rounded))rounded=number;number=rounded;var numberString=
number+"",right="",split=numberString.split(/e/i),exponent=split.length>1?parseInt(split[1],10):0;numberString=split[0];split=numberString.split(".");numberString=split[0];right=split.length>1?split[1]:"";var l;if(exponent>0){right=zeroPad(right,exponent,false);numberString+=right.slice(0,exponent);right=right.substr(exponent)}else if(exponent<0){exponent=-exponent;numberString=zeroPad(numberString,exponent+1);right=numberString.slice(-exponent,numberString.length)+right;numberString=numberString.slice(0,
-exponent)}if(precision>0)right=formatInfo["."]+(right.length>precision?right.slice(0,precision):zeroPad(right,precision));else right="";var stringIndex=numberString.length-1,sep=formatInfo[","],ret="";while(stringIndex>=0){if(curSize===0||curSize>stringIndex)return numberString.slice(0,stringIndex+1)+(ret.length?sep+ret+right:right);ret=numberString.slice(stringIndex-curSize+1,stringIndex+1)+(ret.length?sep+ret:"");stringIndex-=curSize;if(curGroupIndex<groupSizes.length){curSize=groupSizes[curGroupIndex];
curGroupIndex++}}return numberString.slice(0,stringIndex+1)+sep+ret+right}function parseNegativePattern(value,nf,negativePattern){var neg=nf["-"],pos=nf["+"],ret;switch(negativePattern){case "n -":neg=" "+neg;pos=" "+pos;case "n-":if(endsWith(value,neg))ret=["-",value.substr(0,value.length-neg.length)];else if(endsWith(value,pos))ret=["+",value.substr(0,value.length-pos.length)];break;case "- n":neg+=" ";pos+=" ";case "-n":if(startsWith(value,neg))ret=["-",value.substr(neg.length)];else if(startsWith(value,
pos))ret=["+",value.substr(pos.length)];break;case "(n)":if(startsWith(value,"(")&&endsWith(value,")"))ret=["-",value.substr(1,value.length-2)];break}return ret||["",value]}function formatNumber(value,format,culture){if(!format||format==="i")return culture.name.length?value.toLocaleString():value.toString();format=format||"D";var nf=culture.numberFormat,number=Math.abs(value),precision=-1,pattern;if(format.length>1)precision=parseInt(format.slice(1),10);var current=format.charAt(0).toUpperCase(),
formatInfo;switch(current){case "D":pattern="n";if(precision!==-1)number=zeroPad(""+number,precision,true);if(value<0)number=-number;break;case "N":formatInfo=nf;case "C":formatInfo=formatInfo||nf.currency;case "P":formatInfo=formatInfo||nf.percent;pattern=value<0?formatInfo.pattern[0]:formatInfo.pattern[1]||"n";if(precision===-1)precision=formatInfo.decimals;number=expandNumber(number*(current==="P"?100:1),precision,formatInfo);break;default:throw"Bad number format specifier: "+current;}var patternParts=
/n|\$|-|%/g,ret="";for(;;){var index=patternParts.lastIndex,ar=patternParts.exec(pattern);ret+=pattern.slice(index,ar?ar.index:pattern.length);if(!ar)break;switch(ar[0]){case "n":ret+=number;break;case "$":ret+=nf.currency.symbol;break;case "-":if(/[1-9]/.test(number))ret+=nf["-"];break;case "%":ret+=nf.percent.symbol;break}}return ret}function outOfRange(value,low,high){return value<low||value>high}function expandYear(cal,year){var now=new Date,era=getEra(now);if(year<100){var twoDigitYearMax=cal.twoDigitYearMax;
twoDigitYearMax=typeof twoDigitYearMax==="string"?(new Date).getFullYear()%100+parseInt(twoDigitYearMax,10):twoDigitYearMax;var curr=getEraYear(now,cal,era);year+=curr-curr%100;if(year>twoDigitYearMax)year-=100}return year}function getEra(date,eras){if(!eras)return 0;var start,ticks=date.getTime();for(var i=0,l=eras.length;i<l;i++){start=eras[i].start;if(start===null||ticks>=start)return i}return 0}function toUpper(value){return value.split("\u00a0").join(" ").toUpperCase()}function toUpperArray(arr){var results=
[];for(var i=0,l=arr.length;i<l;i++)results[i]=toUpper(arr[i]);return results}function getEraYear(date,cal,era,sortable){var year=date.getFullYear();if(!sortable&&cal.eras)year-=cal.eras[era].offset;return year}function getDayIndex(cal,value,abbr){var ret,days=cal.days,upperDays=cal._upperDays;if(!upperDays)cal._upperDays=upperDays=[toUpperArray(days.names),toUpperArray(days.namesAbbr),toUpperArray(days.namesShort)];value=toUpper(value);if(abbr){ret=arrayIndexOf(upperDays[1],value);if(ret===-1)ret=
arrayIndexOf(upperDays[2],value)}else ret=arrayIndexOf(upperDays[0],value);return ret}function getMonthIndex(cal,value,abbr){var months=cal.months,monthsGen=cal.monthsGenitive||cal.months,upperMonths=cal._upperMonths,upperMonthsGen=cal._upperMonthsGen;if(!upperMonths){cal._upperMonths=upperMonths=[toUpperArray(months.names),toUpperArray(months.namesAbbr)];cal._upperMonthsGen=upperMonthsGen=[toUpperArray(monthsGen.names),toUpperArray(monthsGen.namesAbbr)]}value=toUpper(value);var i=arrayIndexOf(abbr?
upperMonths[1]:upperMonths[0],value);if(i<0)i=arrayIndexOf(abbr?upperMonthsGen[1]:upperMonthsGen[0],value);return i}function appendPreOrPostMatch(preMatch,strings){var quoteCount=0,escaped=false;for(var i=0,il=preMatch.length;i<il;i++){var c=preMatch.charAt(i);switch(c){case "'":if(escaped)strings.push("'");else quoteCount++;escaped=false;break;case "\\":if(escaped)strings.push("\\");escaped=!escaped;break;default:strings.push(c);escaped=false;break}}return quoteCount}function expandFormat(cal,format){format=
format||"F";var pattern,patterns=cal.patterns,len=format.length;if(len===1){pattern=patterns[format];if(!pattern)throw"Invalid date format string '"+format+"'.";format=pattern}else if(len===2&&format.charAt(0)==="%")format=format.charAt(1);return format}function getParseRegExp(cal,format){var re=cal._parseRegExp;if(!re)cal._parseRegExp=re={};else{var reFormat=re[format];if(reFormat)return reFormat}var expFormat=expandFormat(cal,format).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),regexp=["^"],
groups=[],index=0,quoteCount=0,tokenRegExp=getTokenRegExp(),match;while((match=tokenRegExp.exec(expFormat))!==null){var preMatch=expFormat.slice(index,match.index);index=tokenRegExp.lastIndex;quoteCount+=appendPreOrPostMatch(preMatch,regexp);if(quoteCount%2){regexp.push(match[0]);continue}var m=match[0],len=m.length,add;switch(m){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":add="(\\D+)";break;case "tt":case "t":add="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":add="(\\d{"+
len+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":add="(\\d\\d?)";break;case "zzz":add="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":add="([+-]?\\d\\d?)";break;case "/":add="(\\"+cal["/"]+")";break;default:throw"Invalid date format pattern '"+m+"'.";break}if(add)regexp.push(add);groups.push(match[0])}appendPreOrPostMatch(expFormat.slice(index),regexp);regexp.push("$");var regexpStr=regexp.join("").replace(/\s+/g,
"\\s+"),parseRegExp={"regExp":regexpStr,"groups":groups};return re[format]=parseRegExp}function getTokenRegExp(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function parseExact(value,format,culture){value=trim(value);var cal=culture.calendar,parseInfo=getParseRegExp(cal,format),match=(new RegExp(parseInfo.regExp)).exec(value);if(match===null)return null;var groups=parseInfo.groups,era=null,year=null,month=null,date=null,weekDay=null,hour=0,hourOffset,
min=0,sec=0,msec=0,tzMinOffset=null,pmHour=false;for(var j=0,jl=groups.length;j<jl;j++){var matchGroup=match[j+1];if(matchGroup){var current=groups[j],clength=current.length,matchInt=parseInt(matchGroup,10);switch(current){case "dd":case "d":date=matchInt;if(outOfRange(date,1,31))return null;break;case "MMM":case "MMMM":month=getMonthIndex(cal,matchGroup,clength===3);if(outOfRange(month,0,11))return null;break;case "M":case "MM":month=matchInt-1;if(outOfRange(month,0,11))return null;break;case "y":case "yy":case "yyyy":year=
clength<4?expandYear(cal,matchInt):matchInt;if(outOfRange(year,0,9999))return null;break;case "h":case "hh":hour=matchInt;if(hour===12)hour=0;if(outOfRange(hour,0,11))return null;break;case "H":case "HH":hour=matchInt;if(outOfRange(hour,0,23))return null;break;case "m":case "mm":min=matchInt;if(outOfRange(min,0,59))return null;break;case "s":case "ss":sec=matchInt;if(outOfRange(sec,0,59))return null;break;case "tt":case "t":pmHour=cal.PM&&(matchGroup===cal.PM[0]||matchGroup===cal.PM[1]||matchGroup===
cal.PM[2]);if(!pmHour&&(!cal.AM||matchGroup!==cal.AM[0]&&matchGroup!==cal.AM[1]&&matchGroup!==cal.AM[2]))return null;break;case "f":case "ff":case "fff":msec=matchInt*Math.pow(10,3-clength);if(outOfRange(msec,0,999))return null;break;case "ddd":case "dddd":weekDay=getDayIndex(cal,matchGroup,clength===3);if(outOfRange(weekDay,0,6))return null;break;case "zzz":var offsets=matchGroup.split(/:/);if(offsets.length!==2)return null;hourOffset=parseInt(offsets[0],10);if(outOfRange(hourOffset,-12,13))return null;
var minOffset=parseInt(offsets[1],10);if(outOfRange(minOffset,0,59))return null;tzMinOffset=hourOffset*60+(startsWith(matchGroup,"-")?-minOffset:minOffset);break;case "z":case "zz":hourOffset=matchInt;if(outOfRange(hourOffset,-12,13))return null;tzMinOffset=hourOffset*60;break;case "g":case "gg":var eraName=matchGroup;if(!eraName||!cal.eras)return null;eraName=trim(eraName.toLowerCase());for(var i=0,l=cal.eras.length;i<l;i++)if(eraName===cal.eras[i].name.toLowerCase()){era=i;break}if(era===null)return null;
break}}}var result=new Date,defaultYear,convert=cal.convert;defaultYear=convert?convert.fromGregorian(result)[0]:result.getFullYear();if(year===null)year=defaultYear;else if(cal.eras)year+=cal.eras[era||0].offset;if(month===null)month=0;if(date===null)date=1;if(convert){result=convert.toGregorian(year,month,date);if(result===null)return null}else{result.setFullYear(year,month,date);if(result.getDate()!==date)return null;if(weekDay!==null&&result.getDay()!==weekDay)return null}if(pmHour&&hour<12)hour+=
12;result.setHours(hour,min,sec,msec);if(tzMinOffset!==null){var adjustedMin=result.getMinutes()-(tzMinOffset+result.getTimezoneOffset());result.setHours(result.getHours()+parseInt(adjustedMin/60,10),adjustedMin%60)}return result}function formatDate(value,format,culture){var cal=culture.calendar,convert=cal.convert;if(!format||!format.length||format==="i"){var ret;if(culture&&culture.name.length)if(convert)ret=formatDate(value,cal.patterns.F,culture);else{var eraDate=new Date(value.getTime()),era=
getEra(value,cal.eras);eraDate.setFullYear(getEraYear(value,cal,era));ret=eraDate.toLocaleString()}else ret=value.toString();return ret}var eras=cal.eras,sortable=format==="s";format=expandFormat(cal,format);ret=[];var hour,zeros=["0","00","000"],foundDay,checkedDay,dayPartRegExp=/([^d]|^)(d|dd)([^d]|$)/g,quoteCount=0,tokenRegExp=getTokenRegExp(),converted;function padZeros(num,c){var r,s=num+"";if(c>1&&s.length<c){r=zeros[c-2]+s;return r.substr(r.length-c,c)}else r=s;return r}function hasDay(){if(foundDay||
checkedDay)return foundDay;foundDay=dayPartRegExp.test(format);checkedDay=true;return foundDay}function getPart(date,part){if(converted)return converted[part];switch(part){case 0:return date.getFullYear();case 1:return date.getMonth();case 2:return date.getDate()}}if(!sortable&&convert)converted=convert.fromGregorian(value);for(;;){var index=tokenRegExp.lastIndex,ar=tokenRegExp.exec(format);var preMatch=format.slice(index,ar?ar.index:format.length);quoteCount+=appendPreOrPostMatch(preMatch,ret);if(!ar)break;
if(quoteCount%2){ret.push(ar[0]);continue}var current=ar[0],clength=current.length;switch(current){case "ddd":case "dddd":var names=clength===3?cal.days.namesAbbr:cal.days.names;ret.push(names[value.getDay()]);break;case "d":case "dd":foundDay=true;ret.push(padZeros(getPart(value,2),clength));break;case "MMM":case "MMMM":var part=getPart(value,1);ret.push(cal.monthsGenitive&&hasDay()?cal.monthsGenitive[clength===3?"namesAbbr":"names"][part]:cal.months[clength===3?"namesAbbr":"names"][part]);break;
case "M":case "MM":ret.push(padZeros(getPart(value,1)+1,clength));break;case "y":case "yy":case "yyyy":part=converted?converted[0]:getEraYear(value,cal,getEra(value,eras),sortable);if(clength<4)part=part%100;ret.push(padZeros(part,clength));break;case "h":case "hh":hour=value.getHours()%12;if(hour===0)hour=12;ret.push(padZeros(hour,clength));break;case "H":case "HH":ret.push(padZeros(value.getHours(),clength));break;case "m":case "mm":ret.push(padZeros(value.getMinutes(),clength));break;case "s":case "ss":ret.push(padZeros(value.getSeconds(),
clength));break;case "t":case "tt":part=value.getHours()<12?cal.AM?cal.AM[0]:" ":cal.PM?cal.PM[0]:" ";ret.push(clength===1?part.charAt(0):part);break;case "f":case "ff":case "fff":ret.push(padZeros(value.getMilliseconds(),3).substr(0,clength));break;case "z":case "zz":hour=value.getTimezoneOffset()/60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),clength));break;case "zzz":hour=value.getTimezoneOffset()/60;ret.push((hour<=0?"+":"-")+padZeros(Math.floor(Math.abs(hour)),2)+":"+padZeros(Math.abs(value.getTimezoneOffset()%
60),2));break;case "g":case "gg":if(cal.eras)ret.push(cal.eras[getEra(value,eras)].name);break;case "/":ret.push(cal["/"]);break;default:throw"Invalid date format pattern '"+current+"'.";break}}return ret.join("")}jQuery.global=globalization})();
(function(a){a.jqx=a.jqx||{};a.jqx.define=function(b,c,d){b[c]=function(){if(this.baseType){this.base=new b[this.baseType];this.base.defineInstance()}this.defineInstance()};b[c].prototype.defineInstance=function(){};b[c].prototype.base=null;b[c].prototype.baseType=undefined;if(d&&b[d])b[c].prototype.baseType=d};a.jqx.invoke=function(e,d){if(d.length==0)return;var f=typeof d==Array||d.length>0?d[0]:d;var c=typeof d==Array||d.length>1?Array.prototype.slice.call(d,1):a({}).toArray();while(e[f]==undefined&&
e.base!=null)e=e.base;if(e[f]!=undefined&&a.isFunction(e[f]))return e[f].apply(e,c);if(typeof f=="string"){var b=f.toLowerCase();return e[b].apply(e,c)}return};a.jqx.hasFunction=function(e,d){if(d.length==0)return false;if(e==undefined)return false;var f=typeof d==Array||d.length>0?d[0]:d;var c=typeof d==Array||d.length>1?Array.prototype.slice.call(d,1):{};while(e[f]==undefined&&e.base!=null)e=e.base;if(e[f]&&a.isFunction(e[f]))return true;if(typeof f=="string"){var b=f.toLowerCase();if(e[b]&&a.isFunction(e[b]))return true}return false};
a.jqx.isPropertySetter=function(b){if(b.length==2)return true;return b.length==1&&typeof b[0]=="object"};a.jqx.set=function(c,b){if(b.length==1&&typeof b[0]=="object")a.each(b[0],function(d,e){var f=c;while(f[d]==undefined&&f.base!=null)f=f.base;if(f[d]!=undefined||f[d]==null)a.jqx.setvalueraiseevent(f,d,e)});else if(b.length==2){while(c[b[0]]==undefined&&c.base)c=c.base;if(c[b[0]]!=undefined||c[b[0]]==null)a.jqx.setvalueraiseevent(c,b[0],b[1])}};a.jqx.setvalueraiseevent=function(c,d,e){var b=c[d];
c[d]=e;if(!c.isInitialized)return;if(c.propertyChangedHandler!=undefined)c.propertyChangedHandler(c,d,b,e);if(c.propertyChangeMap!=undefined&&c.propertyChangeMap[d]!=undefined)c.propertyChangeMap[d](c,d,b,e)};a.jqx.get=function(c,b){if(b==undefined||b==null)return undefined;if(c[b]!=undefined)return c[b];if(b.length!=1)return undefined;while(c[b[0]]==undefined&&c.base)c=c.base;if(c[b[0]]!=undefined)return c[b[0]]};a.jqx.jqxWidgetProxy=function(g,c,b){var d=a(c);var f=a.data(c,g);if(f==undefined)return undefined;
var e=f.instance;if(a.jqx.hasFunction(e,b))return a.jqx.invoke(e,b);if(a.jqx.isPropertySetter(b)){a.jqx.set(e,b);return undefined}else if(typeof b=="object"&&b.length==0)return;else if(typeof b=="object"&&b.length>0)return a.jqx.get(e,b[0]);else if(typeof b=="string")return a.jqx.get(e,b);throw"jqxCore: Property or method does not exist.";return undefined};a.jqx.jqxWidget=function(b,d,i){var c=false;try{jqxArgs=Array.prototype.slice.call(i,0)}catch(h){jqxArgs=""}try{c=window.MSApp!=undefined}catch(h){}var g=
b;var f="";if(d)f="_"+d;a.jqx.define(a.jqx,"_"+g,f);a.fn[g]=function(){var e=Array.prototype.slice.call(arguments,0);var k=null;if(e.length==0||e.length==1&&typeof e[0]=="object")return this.each(function(){var o=a(this);var n=this;var q=a.data(n,g);if(q==null){q={};q.element=n;q.host=o;q.instance=new a.jqx["_"+g];if(n.id=="")n.id=a.jqx.utilities.createId();q.instance.get=q.instance.set=q.instance.call=function(){var r=Array.prototype.slice.call(arguments,0);return a.jqx.jqxWidgetProxy(g,n,r)};a.data(n,
g,q);a.data(n,"jqxWidget",q.instance);var p=new Array;var l=q.instance;while(l){l.isInitialized=false;p.push(l);l=l.base}p.reverse();p[0].theme="";a.jqx.jqxWidgetProxy(g,this,e);for(var m in p){l=p[m];if(m==0){l.host=o;l.element=n;l.WinJS=c}if(l!=undefined)if(l.createInstance!=null)if(c)MSApp.execUnsafeLocalFunction(function(){l.createInstance(e)});else l.createInstance(e)}for(var m in p)if(p[m]!=undefined)p[m].isInitialized=true;if(c)MSApp.execUnsafeLocalFunction(function(){q.instance.refresh(true)});
else q.instance.refresh(true);k=this}else a.jqx.jqxWidgetProxy(g,this,e)});else this.each(function(){var l=a.jqx.jqxWidgetProxy(g,this,e);if(k==null)k=l});return k};try{a.extend(a.jqx["_"+g].prototype,Array.prototype.slice.call(i,0)[0])}catch(h){}a.extend(a.jqx["_"+g].prototype,{toThemeProperty:function(e,k){if(this.theme=="")return e;if(k!=null&&k)return e+"-"+this.theme;return e+" "+e+"-"+this.theme}});a.jqx["_"+g].prototype.refresh=function(){if(this.base)this.base.refresh()};a.jqx["_"+g].prototype.createInstance=
function(){};a.jqx["_"+g].prototype.propertyChangeMap={};a.jqx["_"+g].prototype.addHandler=function(m,k,e,l){switch(k){case "mousewheel":if(window.addEventListener){if(a.browser.mozilla)m[0].addEventListener("DOMMouseScroll",e,false);else m[0].addEventListener("mousewheel",e,false);return false}break;case "mousemove":if(window.addEventListener&&!l){m[0].addEventListener("mousemove",e,false);return false}break}if(l==undefined||l==null)m.bind(k,e);else m.bind(k,l,e)};a.jqx["_"+g].prototype.removeHandler=
function(l,k,e){switch(k){case "mousewheel":if(window.removeEventListener){if(a.browser.mozilla)l[0].removeEventListener("DOMMouseScroll",e,false);else l[0].removeEventListener("mousewheel",e,false);return false}break;case "mousemove":if(a.browser.msie&&a.browser.version>=9)if(window.removeEventListener)l[0].removeEventListener("mousemove",e,false);break}if(e==undefined)l.unbind(k);else l.unbind(k,e)}};a.jqx.utilities=a.jqx.utilities||{};a.extend(a.jqx.utilities,{createId:function(){var b=function(){return((1+
Math.random())*65536|0).toString(16).substring(1)};return"jqxWidget"+b()+b()+b()},setTheme:function(f,g,e){if(typeof e==="undefined")return;var h=e[0].className.split(" "),b=[],k=[],d=e.children();for(var c=0;c<h.length;c+=1)if(h[c].indexOf(f)>=0)if(f.length>0){b.push(h[c]);k.push(h[c].replace(f,g))}else k.push(h[c]+"-"+g);this._removeOldClasses(b,e);this._addNewClasses(k,e);for(var c=0;c<d.length;c+=1)this.setTheme(f,g,a(d[c]))},_removeOldClasses:function(d,c){for(var b=0;b<d.length;b+=1)c.removeClass(d[b])},
_addNewClasses:function(d,c){for(var b=0;b<d.length;b+=1)c.addClass(d[b])},getOffset:function(b){var d=a.jqx.mobile.getLeftPos(b[0]);var c=a.jqx.mobile.getTopPos(b[0]);return{top:c,left:d}},hasTransform:function(d){var c="";c=d.css("transform");if(c==""||c=="none"){c=d.parents().css("transform");if(c==""||c=="none"){var b=a.jqx.utilities.getBrowser();if(b.browser=="msie"){c=d.css("-ms-transform");if(c==""||c=="none")c=d.parents().css("-ms-transform")}else if(b.browser=="chrome"){c=d.css("-webkit-transform");
if(c==""||c=="none")c=d.parents().css("-webkit-transform")}else if(b.browser=="opera"){c=d.css("-o-transform");if(c==""||c=="none")c=d.parents().css("-o-transform")}else if(b.browser=="mozilla"){c=d.css("-moz-transform");if(c==""||c=="none")c=d.parents().css("-moz-transform")}}else return c!=""&&c!="none"}if(c==""||c=="none")c=a(document.body).css("transform");return c!=""&&c!="none"},getBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||
/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];return{browser:b[1]||"",version:b[2]||"0"}}});a.jqx.mobile=a.jqx.mobile||{};a.extend(a.jqx.mobile,{_touchListener:function(h,f){var b=function(i,l){var k=document.createEvent("MouseEvents");k.initMouseEvent(i,l.bubbles,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget);k._pageX=
l.pageX;k._pageY=l.pageY;return k};var g={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};var d=b(g[h.type],h);h.target.dispatchEvent(d);var c=h.target["on"+g[h.type]];if(typeof c==="function")c(h)},setMobileSimulator:function(c,e){if(this.isTouchDevice())return;this.simulatetouches=true;if(e==false)this.simulatetouches=false;var d={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};var b=this;if(window.addEventListener){var f=function(){for(var g in d)if(c.addEventListener){c.removeEventListener(g,
b._touchListener);c.addEventListener(g,b._touchListener,false)}};if(a.browser.msie)f();else window.addEventListener("load",function(){f()},false)}},isTouchDevice:function(){return false;if(this.touchDevice!=undefined)return this.touchDevice;var b="Browser CodeName: "+navigator.appCodeName+"";b+="Browser Name: "+navigator.appName+"";b+="Browser Version: "+navigator.appVersion+"";b+="Platform: "+navigator.platform+"";b+="User-agent header: "+navigator.userAgent+"";if(b.indexOf("Android")!=-1)return true;
if(b.indexOf("IEMobile")!=-1)return true;if(b.indexOf("Windows Phone OS")!=-1)return true;if(b.indexOf("Windows Phone 6.5")!=-1)return true;if(b.indexOf("BlackBerry")!=-1&&b.indexOf("Mobile Safari")!=-1)return true;if(b.indexOf("ipod")!=-1)return true;if(b.indexOf("nokia")!=-1||b.indexOf("Nokia")!=-1)return true;if(b.indexOf("Chrome/17")!=-1)return false;try{if(this.touchDevice!=undefined)return this.touchDevice;this.touchDevice=true;document.createEvent("TouchEvent");return true}catch(c){this.touchDevice=
false;return false}},getLeftPos:function(b){var c=b.offsetLeft;while((b=b.offsetParent)!=null)if(b.tagName!="HTML"){c+=b.offsetLeft;if(document.all)c+=b.clientLeft}return c},getTopPos:function(b){var c=b.offsetTop;while((b=b.offsetParent)!=null)if(b.tagName!="HTML"){c+=b.offsetTop-b.scrollTop;if(document.all)c+=b.clientTop}if(this.isSafariMobileBrowser()){if(this.isSafari4MobileBrowser()&&this.isIPadSafariMobileBrowser())return c;c=c+a(window).scrollTop()}return c},isChromeMobileBrowser:function(){var c=
navigator.userAgent.toLowerCase();var b=c.indexOf("android")!=-1;return b},isOperaMiniMobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("opera mini")!=-1||c.indexOf("opera mobi")!=-1;return b},isOperaMiniBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("opera mini")!=-1;return b},isNewSafariMobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("ipad")!=-1||c.indexOf("iphone")!=-1||c.indexOf("ipod")!=-1;b=b&&c.indexOf("version/5")!=
-1;return b},isSafari4MobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("ipad")!=-1||c.indexOf("iphone")!=-1||c.indexOf("ipod")!=-1;b=b&&c.indexOf("version/4")!=-1;return b},isSafariMobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("ipad")!=-1||c.indexOf("iphone")!=-1||c.indexOf("ipod")!=-1;return b},isIPhoneSafariMobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("iphone")!=-1;return b},isIPadSafariMobileBrowser:function(){var c=
navigator.userAgent.toLowerCase();var b=c.indexOf("ipad")!=-1;return b},isMobileBrowser:function(){var c=navigator.userAgent.toLowerCase();var b=c.indexOf("ipad")!=-1||c.indexOf("iphone")!=-1||c.indexOf("android")!=-1;return b},getTouches:function(b){if(b.originalEvent)if(b.originalEvent.touches&&b.originalEvent.touches.length)return b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)return b.originalEvent.changedTouches;if(!b.touches){b.touches=
new Array;b.touches[0]=b.originalEvent}return b.touches},dispatchMouseEvent:function(b,f,d){if(this.simulatetouches)return;var c=document.createEvent("MouseEvent");c.initMouseEvent(b,true,true,f.view,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);if(d!=null)d.dispatchEvent(c)},getRootNode:function(b){while(b.nodeType!==1)b=b.parentNode;return b},setTouchScroll:function(b,c){if(!this.enableScrolling)this.enableScrolling=[];this.enableScrolling[c]=b},touchScroll:function(c,
r,e,t){if(c==null)return;var s=this;var o=0;var g=0;var h=0;var p=0;var i=0;var k=0;var l=false;var f=false;var m=a(c);var q=["select","input","textarea"];var b=0;var d=0;if(!this.enableScrolling)this.enableScrolling=[];this.enableScrolling[t]=true;var t=t;m.bind("touchstart.touchScroll",function(u){if(!s.enableScrolling[t])return true;if(a.inArray(u.target.tagName.toLowerCase(),q)!==-1)return;var v=s.getTouches(u);var w=v[0];if(v.length==1)s.dispatchMouseEvent("mousedown",w,s.getRootNode(w.target));
l=true;f=false;g=w.pageY;i=w.pageX;if(s.simulatetouches){g=w._pageY;i=w._pageX}o=0;p=0;return true});m.bind("touchmove.touchScroll",function(y){if(!s.enableScrolling[t])return true;if(!l)return true;var z=s.getTouches(y);if(z.length>1)return true;var w=z[0].pageY;var x=z[0].pageX;if(s.simulatetouches){w=z[0]._pageY;x=z[0]._pageX}var u=w-g;var v=x-i;d=w;touchHorizontalEnd=x;h=u-o;k=v-p;f=true;o=u;p=v;e(-k*3,-h*3,v,u,y);y.preventDefault();y.stopPropagation();return false});if(this.simulatetouches){a(window).bind("mouseup.touchScroll",
function(u){l=false});if(window.frameElement)if(window.top!=null){var n=function(u){l=false};if(window.top.document.addEventListener){window.top.document.removeEventListener("mouseup",n,false);window.top.document.addEventListener("mouseup",n,false)}else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",n)}a(document).bind("touchend",function(u){if(!l)return true;l=false;var w=s.getTouches(u)[0],v=s.getRootNode(w.target);s.dispatchMouseEvent("mouseup",w,v);s.dispatchMouseEvent("click",
w,v)})}m.bind("touchend.touchScroll touchcancel.touchScroll",function(u){if(!s.enableScrolling[t])return true;var w=s.getTouches(u)[0];if(!l)return true;l=false;if(f)s.dispatchMouseEvent("mouseup",w,v);else{var w=s.getTouches(u)[0],v=s.getRootNode(w.target);s.dispatchMouseEvent("mouseup",w,v);s.dispatchMouseEvent("click",w,v)}})}});a.jqx.cookie=a.jqx.cookie||{};a.extend(a.jqx.cookie,{cookie:function(e,f,c){if(arguments.length>1&&String(f)!=="[object Object]"){c=jQuery.extend({},c);if(f===null||f===
undefined)c.expires=-1;if(typeof c.expires==="number"){var h=c.expires,d=c.expires=new Date;d.setDate(d.getDate()+h)}f=String(f);return document.cookie=[encodeURIComponent(e),"=",c.raw?f:encodeURIComponent(f),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=f||{};var b,g=c.raw?function(i){return i}:decodeURIComponent;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?
g(b[1]):null}});a.jqx.string=a.jqx.string||{};a.extend(a.jqx.string,{contains:function(b,c){if(b==null||c==null)return false;return b.indexOf(c)!=-1},containsIgnoreCase:function(b,c){if(b==null||c==null)return false;return b.toUpperCase().indexOf(c.toUpperCase())!=-1},equals:function(b,c){if(b==null||c==null)return false;b=this.normalize(b);if(c.length==b.length)return b.slice(0,c.length)==c;return false},equalsIgnoreCase:function(b,c){if(b==null||c==null)return false;b=this.normalize(b);if(c.length==
b.length)return b.toUpperCase().slice(0,c.length)==c.toUpperCase();return false},startsWith:function(b,c){if(b==null||c==null)return false;return b.slice(0,c.length)==c},startsWithIgnoreCase:function(b,c){if(b==null||c==null)return false;return b.toUpperCase().slice(0,c.length)==c.toUpperCase()},normalize:function(b){if(b.charCodeAt(b.length-1)==65279)b=b.substring(0,b.length-1);return b},endsWith:function(b,c){if(b==null||c==null)return false;b=this.normalize(b);return b.slice(-c.length)==c},endsWithIgnoreCase:function(b,
c){if(b==null||c==null)return false;b=this.normalize(b);return b.toUpperCase().slice(-c.length)==c.toUpperCase()}});a.extend(jQuery.easing,{easeOutBack:function(f,g,e,k,i,h){if(h==undefined)h=1.70158;return k*((g=g/i-1)*g*((h+1)*g+h)+1)+e},easeInQuad:function(f,g,e,i,h){return i*(g/=h)*g+e},easeInOutCirc:function(f,g,e,i,h){if((g/=h/2)<1)return-i/2*(Math.sqrt(1-g*g)-1)+e;return i/2*(Math.sqrt(1-(g-=2)*g)+1)+e},easeInOutSine:function(f,g,e,i,h){return-i/2*(Math.cos(Math.PI*g/h)-1)+e},easeInCubic:function(f,
g,e,i,h){return i*(g/=h)*g*g+e},easeOutCubic:function(f,g,e,i,h){return i*((g=g/h-1)*g*g+1)+e},easeInOutCubic:function(f,g,e,i,h){if((g/=h/2)<1)return i/2*g*g*g+e;return i/2*((g-=2)*g*g+2)+e},easeInSine:function(f,g,e,i,h){return-i*Math.cos(g/h*(Math.PI/2))+i+e},easeOutSine:function(f,g,e,i,h){return i*Math.sin(g/h*(Math.PI/2))+e},easeInOutSine:function(f,g,e,i,h){return-i/2*(Math.cos(Math.PI*g/h)-1)+e}})})(jQuery);
(function(a){a.fn.extend({ischildof:function(c){var b=a(this).parents().get();for(j=0;j<b.length;j++)if(a(b[j]).is(c))return true;return false}})})(jQuery);
(function(a){a.jqx.dataAdapter=function(e,b){this._source=e;this._options=b||{};this.records=new Array;this._downloadComplete=new Array;this._bindingUpdate=new Array;if(this._options.autoBind==true)this.dataBind();if(e!=undefined&&e.localdata!=null&&typeof e.localdata=="function"){var d=e.localdata();if(d!=null){e._localdata=e.localdata;var c=this;if(e._localdata.subscribe)e._localdata.subscribe(function(h){var g=c._oldCount!=h.length;var f=g?"createRemoveData":"updateData";c.dataBind(null,f);c._oldCount=
h.length});e.localdata=d;c._oldCount=d.length}}};a.jqx.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=true},endUpdate:function(b){this.isUpdating=false;if(b!=false)this.dataBind(null,"")},dataBind:function(l,q){if(this.isUpdating==true)return;var n=this._source;if(!n)return;if(n.dataFields!=null)n.datafields=n.dataFields;if(n.recordstartindex==undefined)n.recordstartindex=0;if(n.recordendindex==undefined)n.recordendindex=0;if(n.loadallrecords==
undefined)n.loadallrecords=true;if(n.sort!=undefined)this.sort=n.sort;if(n.filter!=undefined)this.filter=n.filter;if(n.sortcolumn!=undefined)this.sortcolumn=n.sortcolumn;if(n.sortdirection!=undefined)this.sortdirection=n.sortdirection;if(n.sortcomparer!=undefined)this.sortcomparer=n.sortcomparer;this.records=new Array;var f=this._options||{};this.virtualmode=f.virtualmode!=undefined?f.virtualmode:false;this.totalrecords=f.totalrecords!=undefined?f.totalrecords:0;this.pageable=f.pageable!=undefined?
f.pageable:false;this.pagesize=f.pagesize!=undefined?f.pagesize:0;this.pagenum=f.pagenum!=undefined?f.pagenum:0;this.cachedrecords=f.cachedrecords!=undefined?f.cachedrecords:new Array;this.originaldata=new Array;this.recordids=new Array;this.updaterow=f.updaterow!=undefined?f.updaterow:null;this.addrow=f.addrow!=undefined?f.addrow:null;this.deleterow=f.deleterow!=undefined?f.deleterow:null;this.cache=f.cache!=undefined?f.cache:true;this.unboundmode=false;if(f.unboundmode||n.unboundmode)this.unboundmode=
f.unboundmode||n.unboundmode;if(n.cache!=undefined)this.cache=n.cache;if(this.koSubscriptions)for(var s=0;s<this.koSubscriptions.length;s++)this.koSubscriptions[s].dispose();this.koSubscriptions=new Array;if(this.pagenum<0)this.pagenum=0;var v=this;var k=n.datatype;if(n.datatype==="csv"||n.datatype==="tab"||n.datatype=="text")k="text";var h=f.async!=undefined?f.async:true;if(n.async!=undefined)h=n.async;switch(k){case "local":case "array":default:if(n.localdata==undefined&&n.length){n.localdata=new Array;
for(var p=0;p<n.length;p++)n.localdata[n.localdata.length]=n[p]}var g=n.localdata.length;this.totalrecords=this.virtualmode?n.totalrecords||g:g;if(this.unboundmode){this.totalrecords=this.unboundmode?n.totalrecords||g:g;var t=n.datafields?n.datafields.length:0;if(t>0)for(var p=0;p<this.totalrecords;p++){var d={};for(var o=0;o<t;o++)d[n.datafields[o].name]="";n.localdata[n.localdata.length]=d}}if(this.totalrecords==undefined)this.totalrecords=0;var t=n.datafields?n.datafields.length:0;var c=function(w,
D){var B={};for(o=0;o<D;o++){var y=n.datafields[o];var A="";if(undefined==y||y==null)continue;if(y.map){var x=y.map.split(">");if(x.length>0){var z=w;for(var C=0;C<x.length;C++)z=z[x[C]];A=z}else A=w[y.map];if(A!=undefined&&A!=null)A=A.toString();else A=""}if(A==""){A=w[y.name];if(A!=undefined&&A!=null)if(n._localdata)A=A();else A=A.toString();else A=""}A=v.getvaluebytype(A,y);B[y.name]=A}return B};if(n._localdata){this.records=new Array;a.each(n.localdata,function(x){if(t>0){var w=this;var y=c(w,
t);v.records[v.records.length]=y}else{var w={};for(var z in this){var A=a.isFunction(this[z]);if(A){w[z]=this[z]();if(this[z].subscribe)v.koSubscriptions[v.koSubscriptions.length]=this[z].subscribe(function(B){v.dataBind(null,null);return false})}else w[z]=this[z]}v.records[v.records.length]=w}})}else if(!a.isArray(n.localdata)){this.records=new Array;a.each(n.localdata,function(x){if(t>0){var w=this;var y=c(w,t);v.records[v.records.length]=y}else v.records[v.records.length]=this})}else if(t==0)this.records=
n.localdata;else a.each(n.localdata,function(x){var w=this;var y=c(w,t);v.records[v.records.length]=y});this.originaldata=n.localdata;this.cachedrecords=this.records;if(f.uniqueDataFields){var m=this.getUniqueRecords(this.records,f.uniqueDataFields);this.records=m;this.cachedrecords=m}if(a.isFunction(f.loadComplete))f.loadComplete(n.localdata);break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":if(n.localdata!=null){if(a.isFunction(n.beforeprocessing))n.beforeprocessing(n.localdata);
if(n.datatype==="xml")v.loadxml(n.localdata,n.localdata,n);else if(k==="text")v.loadtext(n.localdata,n);else v.loadjson(n.localdata,n.localdata,n);if(f.uniqueDataFields){var m=v.getUniqueRecords(v.records,f.uniqueDataFields);v.records=m;v.cachedrecords=m}if(a.isFunction(f.loadComplete))f.loadComplete(n.localdata);return}var u=f.data!=undefined?f.data:{};if(n.processdata)n.processdata(u);if(a.isFunction(f.processData))f.processData(u);if(a.isFunction(f.formatData)){var b=f.formatData(u);if(b!=undefined)u=
b}var r="application/x-www-form-urlencoded";if(f.contentType)r=f.contentType;var e="GET";if(f.type)e=f.type;if(n.url&&n.url.length>0)if(a.isFunction(f.loadServerData))v._requestData(u,n,f);else a.ajax({dataType:k,cache:this.cache,type:e,url:n.url,async:h,contentType:r,data:u,success:function(z,w,B){if(a.isFunction(n.beforeprocessing)){var A=n.beforeprocessing(z,w,B);if(A!=undefined)z=A}if(a.isFunction(f.downloadComplete)){var A=f.downloadComplete(z,w,B);if(A!=undefined)z=A}if(z==null)return;var x=
z;if(z.records)x=z.records;if(z.totalrecords)n.totalrecords=z.totalrecords;if(n.datatype==="xml")v.loadxml(null,x,n);else if(k==="text")v.loadtext(x,n);else v.loadjson(null,x,n);if(f.uniqueDataFields){var y=v.getUniqueRecords(v.records,f.uniqueDataFields);v.records=y;v.cachedrecords=y}v.callDownloadComplete();if(a.isFunction(f.loadComplete))f.loadComplete(z)},error:function(y,w,x){if(a.isFunction(n.loaderror))n.loaderror(y,w,x);if(a.isFunction(f.loadError))f.loadError(y,w,x);y=null;v.callDownloadComplete()},
beforeSend:function(x,w){if(a.isFunction(f.beforeSend))f.beforeSend(x,w);if(a.isFunction(n.beforesend))n.beforesend(x,w)}});else{v.callDownloadComplete();if(a.isFunction(f.loadComplete))f.loadComplete(data)}break}this.callBindingUpdate(q)},_requestData:function(c,e,b){var d=this;var f=function(g){if(g.totalrecords){e.totalrecords=g.totalrecords;d.totalrecords=g.totalrecords}if(g.records){d.records=g.records;d.cachedrecords=g.records}if(a.isFunction(b.loadComplete))b.loadComplete(data);d.callDownloadComplete()};
b.loadServerData(c,e,f)},getUniqueRecords:function(d,f){if(d&&f){var b=d.length;var l=f.length;var h=new Array;var k=new Array;for(urec=0;urec<b;urec++){var g=d[urec];var e="";for(datafieldindex=0;datafieldindex<l;datafieldindex++){var c=f[datafieldindex];e+=g[c]+"_"}if(!k[e])h[h.length]=g;k[e]=true}}return h},getAggregatedData:function(n,h,f){var e=f;if(!e)e=this.records;var k={};var d=e.length;if(d==0)return;for(var l=0;l<d;l++){var m=e[l];for(var g=0;g<n.length;g++){var c=n[g];var o=m[c.name];
if(c.aggregates){k[c.name]=k[c.name]||{};var b=function(p){for(obj in p){var q=k[c.name][obj];if(q==null){k[c.name][obj]=0;q=0}if(a.isFunction(p[obj]))q=p[obj](q,o,c.name,m);k[c.name][obj]=q}};if(typeof o==="number"&&isFinite(o))a.each(c.aggregates,function(){var p=k[c.name][this];if(p==null){p=0;if(this=="min")p=9999999999999}if(this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")p+=parseFloat(o);else if(this=="product")if(l==0)p=parseFloat(o);else p*=parseFloat(o);
else if(this=="min")p=Math.min(p,parseFloat(o));else if(this=="max")p=Math.max(p,parseFloat(o));else if(this=="count")p++;else if(typeof this=="object"){b(this);return}k[c.name][this]=p});else a.each(c.aggregates,function(){if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){k[c.name][this]=0;return true}if(typeof this=="object")b(this)})}}}for(var g=0;g<n.length;g++){var c=n[g];if(k[c.name]["avg"]!=undefined){var o=
k[c.name]["avg"];k[c.name]["avg"]=o/e.length}else if(k[c.name]["count"]!=undefined)k[c.name]["count"]=d;if(k[c.name]["stdev"]||k[c.name]["stdevp"]||k[c.name]["var"]||k[c.name]["varp"])a.each(c.aggregates,function(v){if(this=="stdev"||this=="var"||this=="varp"||this=="stdevp"){var w=k[c.name][this];var u=d;var p=w/d;var r=0;for(var s=0;s<d;s++){var t=e[s];var x=t[c.name];r+=(x-p)*(x-p)}var q=this=="stdevp"||this=="varp"?u:u-1;if(q==0)q=1;if(this=="var"||this=="varp")k[c.name][this]=r/q;else if(this==
"stdevp"||this=="stdev")k[c.name][this]=Math.sqrt(r/q)}});if(c.formatStrings)a.each(c.aggregates,function(q){var p=c.formatStrings[q];if(p)if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){var r=k[c.name][this];k[c.name][this]=a.jqx.dataFormat.formatnumber(r,p,h)}else if(typeof this=="object")for(obj in this){var r=k[c.name][obj];k[c.name][obj]=a.jqx.dataFormat.formatnumber(r,p,h)}})}return k},bindDownloadComplete:function(c,
b){this._downloadComplete[this._downloadComplete.length]={id:c,func:b}},unbindDownloadComplete:function(c){for(var b=0;b<this._downloadComplete.length;b++)if(this._downloadComplete[b].id==c){this._downloadComplete[b].func=null;this._downloadComplete.splice(b,1);break}},callDownloadComplete:function(){for(complete=0;complete<this._downloadComplete.length;complete++){var b=this._downloadComplete[complete];if(b.func!=null)b.func()}},setSource:function(b){this._source=b},generatekey:function(){var b=
function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()},getGroupedRecords:function(E,H,s,z,F,x){var B=0;var w=this;var d=new Array;for(var h=0;h<E.length;h++)d[h]=w.generatekey();if(!H)H="items";if(!s)s="group";if(!F)F="record";if(!x)x="value";var n=new Array;var f=0;var e=new Array;var m=E.length;var G=new Array;var I=this.records;var k=I.length;var A=function(q){var J=q;if(z)a.each(z,function(){if(this.name&&this.map)J[this.map]=
J[this.name]});return J};for(var r=0;r<k;r++){var D=A(I[r]);id=D[w.uniqueId];var c=new Array;var t=0;for(h=0;h<m;h++){var l=E[h];var y=D[l];if(null==y)continue;c[t++]={value:y,hash:d[h]}}if(c.length!=m)break;var u=null;var o="";var b=-1;for(var v=0;v<c.length;v++){b++;var C=c[v].value;var g=c[v].hash;o=o+"_"+g+"_"+C;if(e[o]!=undefined&&e[o]!=null){u=e[o];continue}if(u==null){u={level:0};u[s]=C;u[F]=D;u[x]=D[x];u[H]=new Array;n[f++]=u}else{var p={parentItem:u,level:u.level+1};p[s]=C;p[H]=new Array;
p[F]=D;p[x]=D[x];u[H][u[H].length]=p;u=p}e[o]=u}if(u!=null){D.parentItem=u;D.level=u.level+1;u[H][u[H].length]=D}}return n},getRecordsHierarchy:function(f,d,u,p){var b=new Array;var c=this.records;if(this.records.length==0)return null;var s=u!=null?u:"items";var m=[];var v=c;var k=v.length;var q=function(w){var x=w;if(p)a.each(p,function(){if(this.name&&this.map)x[this.map]=x[this.name]});return x};for(var r=0;r<k;r++){var t=a.extend({},v[r]);var o=t[d];var n=t[f];m[n]={parentid:o,item:t}}for(var r=
0;r<k;r++){var t=a.extend({},v[r]);var o=t[d];var n=t[f];if(m[o]!=undefined){var t={parentid:o,item:m[n].item};var l=m[o].item;if(!l[s])l[s]=[];var g=l[s].length;var e=t.item;var h=q(e);l[s][g]=h;m[o].item=l;m[n]=t}else{var e=m[n].item;var h=q(e);b[b.length]=h}}return b},bindBindingUpdate:function(c,b){this._bindingUpdate[this._bindingUpdate.length]={id:c,func:b}},unbindBindingUpdate:function(c){for(var b=0;b<this._bindingUpdate.length;b++)if(this._bindingUpdate[b].id==c){this._bindingUpdate[b].func=
null;this._bindingUpdate.splice(b,1);break}},callBindingUpdate:function(b){for(var d=0;d<this._bindingUpdate.length;d++){var c=this._bindingUpdate[d];if(c.func!=null)c.func(b)}},getid:function(e,c,d){if(a(e,c).length>0)return a(e,c).text();if(e)if(e.toString().length>0){var b=a(c).attr(e);if(b!=null&&b.toString().length>0)return b}return d},loadjson:function(v,w,m){if(typeof v=="string")v=a.parseJSON(v);if(m.root==undefined)m.root="";if(m.record==undefined)m.record="";var v=v||w;if(!v)v=[];if(m.root!=
"")if(v[m.root]!=undefined)v=v[m.root];else a.each(v,function(x){var p=this;if(this==m.root){v=this;return false}else if(this[m.root]!=undefined)v=this[m.root]});else if(!v.length)for(obj in v)if(a.isArray(v[obj])){v=v[obj];break}if(v!=null&&v.length==undefined)v=a.makeArray(v);if(v==null||v.length==undefined){alert("JSON Parse error.");return}if(v.length==0)return;var e=v.length;this.totalrecords=this.virtualmode?m.totalrecords||e:e;this.records=new Array;this.originaldata=new Array;var q=this.records;
var n=!this.pageable?m.recordstartindex:this.pagesize*this.pagenum;this.recordids=new Array;if(m.loadallrecords){n=0;e=this.totalrecords}var k=0;if(this.virtualmode){n=!this.pageable?m.recordstartindex:this.pagesize*this.pagenum;k=n;n=0;e=this.totalrecords}var r=m.datafields?m.datafields.length:0;if(r==0){var b=v[0];var t=new Array;for(obj in b){var c=obj;t[t.length]={name:c}}m.datafields=t;r=t.length}for(i=n;i<e;i++){var d=v[i];if(d==undefined)break;if(m.record&&m.record!="")d=d[m.record];var u=
this.getid(m.id,d,i);if(!this.recordids[u]){this.recordids[u]=d;var g={};for(j=0;j<r;j++){var h=m.datafields[j];var o="";if(undefined==h||h==null)continue;if(h.map){var f=h.map.split(">");if(f.length>0){var s=d;for(var l=0;l<f.length;l++)s=s[f[l]];o=s}else o=d[h.map];if(o!=undefined&&o!=null)o=o.toString();else o=""}if(o==""){o=d[h.name];if(o!=undefined&&o!=null)o=o.toString();else o=""}o=this.getvaluebytype(o,h);g[h.name]=o}if(m.recordendindex<=0||n<m.recordendindex){q[k+i]=a.extend({},g);q[k+i].uid=
u;this.originaldata[k+i]=a.extend({},q[i])}}}this.records=q;this.cachedrecords=this.records},loadxml:function(p,m,c){if(typeof p=="string")p=m=a(a.parseXML(p));if(c.root==undefined)c.root="";if(c.record==undefined)c.record="";var p;if(a.browser.msie&&m)if(m.xml!=undefined)p=a(c.root+" "+c.record,a.parseXML(m.xml));else p=p||a(c.root+" "+c.record,m);else p=p||a(c.root+" "+c.record,m);if(!p)p=[];var f=p.length;if(p.length==0)return;this.totalrecords=this.virtualmode?c.totalrecords||f:f;this.records=
new Array;this.originaldata=new Array;var k=this.records;var t=!this.pageable?c.recordstartindex:this.pagesize*this.pagenum;this.recordids=new Array;if(c.loadallrecords){t=0;f=this.totalrecords}var e=0;if(this.virtualmode){t=!this.pageable?c.recordstartindex:this.pagesize*this.pagenum;e=t;t=0;f=this.totalrecords}var s=c.datafields?c.datafields.length:0;if(s==0){var l=p[0];var h=new Array;for(obj in l){var q=obj;h[h.length]={name:q}}c.datafields=h;s=h.length}for(i=t;i<f;i++){var n=p[i];if(n==undefined)break;
var d=this.getid(c.id,n,i);if(!this.recordids[d]){this.recordids[d]=n;var o={};for(j=0;j<s;j++){var g=c.datafields[j];var r="";if(undefined==g||g==null)continue;if(g.map)r=a(g.map,n).text();if(r=="")r=a(g.name,n).text();var b=r;r=this.getvaluebytype(r,g);o[g.name]=r}if(c.recordendindex<=0||t<c.recordendindex){k[e+i]=a.extend({},o);k[e+i].uid=d;this.originaldata[e+i]=a.extend({},k[i])}}}this.records=k;this.cachedrecords=this.records},loadtext:function(k,b){if(k==null)return;var t=b.rowDelimiter||"\n";
var s=k.split(t);var e=s.length;this.totalrecords=this.virtualmode?b.totalrecords||e:e;this.records=new Array;this.originaldata=new Array;var g=this.records;var r=!this.pageable?b.recordstartindex:this.pagesize*this.pagenum;this.recordids=new Array;if(b.loadallrecords){r=0;e=this.totalrecords}var d=0;if(this.virtualmode){r=!this.pageable?b.recordstartindex:this.pagesize*this.pagenum;d=r;r=0;e=this.totalrecords}var o=b.datafields.length;var q=b.columnDelimiter;if(!q)q=b.datatype==="tab"?"\t":",";for(i=
r;i<e;i++){var l=s[i];var c=this.getid(b.id,l,i);if(!this.recordids[c]){this.recordids[c]=l;var m={};var h=s[i].split(q);for(j=0;j<o;j++){if(j>=h.lenght)continue;var f=b.datafields[j];var n=h[j];if(f.type)n=this.getvaluebytype(n,f);var p=f.map||f.name||j.toSring();m[p]=n}g[d+i]=a.extend({},m);g[d+i].uid=c;this.originaldata[d+i]=a.extend({},g[i])}}this.records=g;this.cachedrecords=this.records},getvaluebytype:function(f,c){var d=f;if(c.type=="date"){var e=new Date(f);if(typeof f=="string")if(c.format){var b=
a.jqx.dataFormat.parsedate(f,c.format);if(b!=null)e=b}if(e.toString()=="NaN"||e.toString()=="Invalid Date")if(a.jqx.dataFormat)f=a.jqx.dataFormat.tryparsedate(f);else f=e;else f=e;if(f==null)f=d}else if(c.type=="float"||c.type=="number"||c.type=="decimal"){var f=parseFloat(f);if(isNaN(f))f=d}else if(c.type=="int"||c.type=="integer"){var f=parseInt(f);if(isNaN(f))f=d}else if(c.type=="bool"||c.type=="boolean"){if(f!=null)if(f.toLowerCase()=="false")f=false;else if(f.toLowerCase()=="true")f=true;if(f==
1)f=true;else if(f==0)f=false;else f=""}return f}};a.jqx.dataFormat={};a.extend(a.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(b){return typeof b==="boolean"},isObject:function(b){return b&&(typeof b==="object"||a.isFunction(b))||false},isDate:function(b){return b instanceof Date},arrayIndexOf:function(e,d){if(e.indexOf)return e.indexOf(d);for(var b=
0,c=e.length;b<c;b++)if(e[b]===d)return b;return-1},isString:function(b){return typeof b==="string"},isNumber:function(b){return typeof b==="number"&&isFinite(b)},isNull:function(b){return b===null},isUndefined:function(b){return typeof b==="undefined"},isValue:function(b){return this.isObject(b)||this.isString(b)||this.isNumber(b)||this.isBoolean(b)},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b))return false;else if(!this.isValue(b))return true;b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,
"");return b===""},startsWith:function(c,b){return c.indexOf(b)===0},endsWith:function(c,b){return c.substr(c.length-b.length)===b},trim:function(b){return(b+"").replace(this.regexTrim,"")},isArray:function(b){return this.toString.call(b)==="[object Array]"},defaultcalendar:function(){var b={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr",
"Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",
ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","};return b},expandFormat:function(f,e){e=e||"F";var d,c=f.patterns,b=e.length;if(b===1){d=c[e];if(!d)throw"Invalid date format string '"+e+"'.";e=d}else if(b===2&&e.charAt(0)==="%")e=e.charAt(1);return e},getEra:function(d,c){if(!c)return 0;var g,f=d.getTime();for(var e=0,b=c.length;e<b;e++){g=c[e].start;
if(g===null||f>=g)return e}return 0},toUpper:function(b){return b.split("\u00a0").join(" ").toUpperCase()},toUpperArray:function(b){var e=[];for(var d=0,c=b.length;d<c;d++)e[d]=this.toUpper(b[d]);return e},getEraYear:function(c,e,b,f){var d=c.getFullYear();if(!f&&e.eras)d-=e.eras[b].offset;return d},getDayIndex:function(f,e,c){var b,g=f.days,d=f._upperDays;if(!d)f._upperDays=d=[this.toUpperArray(g.names),this.toUpperArray(g.namesAbbr),this.toUpperArray(g.namesShort)];e=toUpper(e);if(c){b=this.arrayIndexOf(d[1],
e);if(b===-1)b=this.arrayIndexOf(d[2],e)}else b=this.arrayIndexOf(d[0],e);return b},getMonthIndex:function(k,h,d){var b=k.months,c=k.monthsGenitive||k.months,f=k._upperMonths,g=k._upperMonthsGen;if(!f){k._upperMonths=f=[this.toUpperArray(b.names),this.toUpperArray(b.namesAbbr)];k._upperMonthsGen=g=[this.toUpperArray(c.names),this.toUpperArray(c.namesAbbr)]}h=this.toUpper(h);var e=this.arrayIndexOf(d?f[1]:f[0],h);if(e<0)e=this.arrayIndexOf(d?g[1]:g[0],h);return e},appendPreOrPostMatch:function(f,b){var e=
0,h=false;for(var g=0,d=f.length;g<d;g++){var k=f.charAt(g);switch(k){case "'":if(h)b.push("'");else e++;h=false;break;case "\\":if(h)b.push("\\");h=!h;break;default:b.push(k);h=false;break}}return e},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(b,d){var c="";if(d&&d.target)c="target="+d.target;if(c!="")return"<a "+c+' href="'+b+'">'+b+"</a>";return'<a href="'+b+'">'+b+"</a>"},formatemail:function(b){return'<a href="mailto:'+
b+'">'+b+"</a>"},formatnumber:function(q,p,l){if(l==undefined||l==null)l=this.defaultcalendar();if(!this.isNumber(q))q*=1;var m;if(p.length>1)m=parseInt(p.slice(1),10);var s={};var n=p.charAt(0).toUpperCase();s.thousandsSeparator=l.thousandsseparator;s.decimalSeparator=l.decimalseparator;switch(n){case "D":case "d":case "F":case "f":s.decimalPlaces=m;break;case "N":case "n":s.decimalPlaces=0;break;case "C":case "c":s.decimalPlaces=m;if(l.currencysymbolposition=="before")s.prefix=l.currencysymbol;
else s.suffix=l.currencysymbol;break;case "P":case "p":s.suffix=l.percentsymbol;s.decimalPlaces=m;break;default:throw"Bad number format specifier: "+n;}if(this.isNumber(q)){var f=q<0;var d=q+"";var o=s.decimalSeparator?s.decimalSeparator:".";var b;if(this.isNumber(s.decimalPlaces)){var g=s.decimalPlaces;var k=Math.pow(10,g);d=Math.round(q*k)/k+"";b=d.lastIndexOf(".");if(g>0){if(b<0){d+=o;b=d.length-1}else if(o!==".")d=d.replace(".",o);while(d.length-1-b<g)d+="0"}}if(s.thousandsSeparator){var r=s.thousandsSeparator;
b=d.lastIndexOf(o);b=b>-1?b:d.length;var e=d.substring(b);var c=-1;for(var h=b;h>0;h--){c++;if(c%3===0&&h!==b&&(!f||h>1))e=r+e;e=d.charAt(h-1)+e}d=e}d=s.prefix?s.prefix+d:d;d=s.suffix?d+s.suffix:d;return d}else return q},tryparsedate:function(r,h){if(h==undefined||h==null)h=this.defaultcalendar();var o=this;if(r=="")return null;if(r!=null&&r.substring(0,6)=="/Date("){var p=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;var e=new Date(+r.replace(/\/Date\((\d+)\)\//,"$1"));if(e=="Invalid Date"){var f=r.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);
var e=null;if(f)e=new Date(1*f[1]+36E5*f[2]+6E4*f[3])}if(e==null||e=="Invalid Date"){var k=p.exec(r);if(k){var s=new Date(parseInt(k[1]));if(k[2]){var b=parseInt(k[3]);if(k[2]==="-")b=-b;var n=s.getUTCMinutes();s.setUTCMinutes(n-b)}if(!isNaN(s.valueOf()))return s}}return e}patterns=h.patterns;for(prop in patterns){e=o.parsedate(r,patterns[prop],h);if(e)return e}if(r!=null){var d=null;var q=[":","/","-"];var l=true;for(var c=0;c<q.length;c++)if(r.indexOf(q[c])!=-1)l=false;if(l){var g=new Number(r);
if(!isNaN(g))return new Date(g)}}return null},getparseregexp:function(b,p){var r=b._parseRegExp;if(!r)b._parseRegExp=r={};else{var f=r[p];if(f)return f}var o=this.expandFormat(b,p).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),l=["^"],c=[],k=0,e=0,u=this.getTokenRegExp(),g;while((g=u.exec(o))!==null){var t=o.slice(k,g.index);k=u.lastIndex;e+=this.appendPreOrPostMatch(t,l);if(e%2){l.push(g[0]);continue}var d=g[0],h=d.length,q;switch(d){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":q=
"(\\D+)";break;case "tt":case "t":q="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":q="(\\d{"+h+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":q="(\\d\\d?)";break;case "zzz":q="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":q="([+-]?\\d\\d?)";break;case "/":q="(\\"+b["/"]+")";break;default:throw"Invalid date format pattern '"+d+"'.";break}if(q)l.push(q);c.push(g[0])}this.appendPreOrPostMatch(o.slice(k),
l);l.push("$");var s=l.join("").replace(/\s+/g,"\\s+"),n={regExp:s,groups:c};return r[p]=n},outOfRange:function(d,b,c){return d<b||d>c},expandYear:function(g,e){var c=new Date,b=getEra(c);if(e<100){var d=g.twoDigitYearMax;d=typeof d==="string"?(new Date).getFullYear()%100+parseInt(d,10):d;var f=this.getEraYear(c,g,b);e+=f-f%100;if(e>d)e-=100}return e},parsedate:function(z,G,u){if(u==undefined||u==null)u=this.defaultcalendar();z=this.trim(z);var r=u,L=this.getparseregexp(r,G),k=(new RegExp(L.regExp)).exec(z);
if(k===null)return null;var H=L.groups,x=null,p=null,K=null,J=null,q=null,g=0,C,B=0,I=0,b=0,d=null,s=false;for(var D=0,F=H.length;D<F;D++){var c=k[D+1];if(c){var y=H[D],f=y.length,h=parseInt(c,10);switch(y){case "dd":case "d":J=h;if(this.outOfRange(J,1,31))return null;break;case "MMM":case "MMMM":K=this.getMonthIndex(r,c,f===3);if(this.outOfRange(K,0,11))return null;break;case "M":case "MM":K=h-1;if(this.outOfRange(K,0,11))return null;break;case "y":case "yy":case "yyyy":p=f<4?this.expandYear(r,h):
h;if(this.outOfRange(p,0,9999))return null;break;case "h":case "hh":g=h;if(g===12)g=0;if(this.outOfRange(g,0,11))return null;break;case "H":case "HH":g=h;if(this.outOfRange(g,0,23))return null;break;case "m":case "mm":B=h;if(this.outOfRange(B,0,59))return null;break;case "s":case "ss":I=h;if(this.outOfRange(I,0,59))return null;break;case "tt":case "t":s=r.PM&&(c===r.PM[0]||c===r.PM[1]||c===r.PM[2]);if(!s&&(!r.AM||c!==r.AM[0]&&c!==r.AM[1]&&c!==r.AM[2]))return null;break;case "f":case "ff":case "fff":b=
h*Math.pow(10,3-f);if(this.outOfRange(b,0,999))return null;break;case "ddd":case "dddd":q=this.getDayIndex(r,c,f===3);if(this.outOfRange(q,0,6))return null;break;case "zzz":var e=c.split(/:/);if(e.length!==2)return null;C=parseInt(e[0],10);if(this.outOfRange(C,-12,13))return null;var n=parseInt(e[1],10);if(this.outOfRange(n,0,59))return null;d=C*60+(startsWith(c,"-")?-n:n);break;case "z":case "zz":C=h;if(this.outOfRange(C,-12,13))return null;d=C*60;break;case "g":case "gg":var t=c;if(!t||!r.eras)return null;
t=trim(t.toLowerCase());for(var E=0,A=r.eras.length;E<A;E++)if(t===r.eras[E].name.toLowerCase()){x=E;break}if(x===null)return null;break}}}var o=new Date,w,m=r.convert;w=o.getFullYear();if(p===null)p=w;else if(r.eras)p+=r.eras[x||0].offset;if(K===null)K=0;if(J===null)J=1;if(m){o=m.toGregorian(p,K,J);if(o===null)return null}else{o.setFullYear(p,K,J);if(o.getDate()!==J)return null;if(q!==null&&o.getDay()!==q)return null}if(s&&g<12)g+=12;o.setHours(g,B,I,b);if(d!==null){var v=o.getMinutes()-(d+o.getTimezoneOffset());
o.setHours(o.getHours()+parseInt(v/60,10),v%60)}return o},cleardatescache:function(){this.datescache=new Array},formatdate:function(w,A,r){if(r==undefined||r==null)r=this.defaultcalendar();var e=w.toString()+"_"+A;if(this.datescache&&this.datescache[e])return this.datescache[e];if(!A||!A.length||A==="i"){var C;C=this.formatDate(w,r.patterns.F,culture);return C}var x=r.eras,c=A==="s";A=this.expandFormat(r,A);C=[];var h,y=["0","00","000"],n,o,b=/([^d]|^)(d|dd)([^d]|$)/g,B=0,t=this.getTokenRegExp(),
d;function l(D,G){var F,E=D+"";if(G>1&&E.length<G){F=y[G-2]+E;return F.substr(F.length-G,G)}else F=E;return F}function z(){if(n||o)return n;n=b.test(A);o=true;return n}function f(E,D){if(d)return d[D];if(E.getMonth!=undefined)switch(D){case 0:return E.getFullYear();case 1:return E.getMonth();case 2:return E.getDate()}}for(;;){var k=t.lastIndex,s=t.exec(A);var p=A.slice(k,s?s.index:A.length);B+=this.appendPreOrPostMatch(p,C);if(!s)break;if(B%2){C.push(s[0]);continue}var u=s[0],g=u.length;switch(u){case "ddd":case "dddd":var q=
g===3?r.days.namesAbbr:r.days.names;C.push(q[w.getDay()]);break;case "d":case "dd":n=true;C.push(l(f(w,2),g));break;case "MMM":case "MMMM":var v=f(w,1);C.push(r.months[g===3?"namesAbbr":"names"][v]);break;case "M":case "MM":C.push(l(f(w,1)+1,g));break;case "y":case "yy":case "yyyy":v=this.getEraYear(w,r,this.getEra(w,x),c);if(g<4)v=v%100;C.push(l(v,g));break;case "h":case "hh":h=w.getHours()%12;if(h===0)h=12;C.push(l(h,g));break;case "H":case "HH":C.push(l(w.getHours(),g));break;case "m":case "mm":C.push(l(w.getMinutes(),
g));break;case "s":case "ss":C.push(l(w.getSeconds(),g));break;case "t":case "tt":v=w.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ";C.push(g===1?v.charAt(0):v);break;case "f":case "ff":case "fff":C.push(l(w.getMilliseconds(),3).substr(0,g));break;case "z":case "zz":h=w.getTimezoneOffset()/60;C.push((h<=0?"+":"-")+l(Math.floor(Math.abs(h)),g));break;case "zzz":h=w.getTimezoneOffset()/60;C.push((h<=0?"+":"-")+l(Math.floor(Math.abs(h)),2)+":"+l(Math.abs(w.getTimezoneOffset()%60),2));break;case "g":case "gg":if(r.eras)C.push(r.eras[getEra(w,
x)].name);break;case "/":C.push(r["/"]);break;default:throw"Invalid date format pattern '"+u+"'.";break}}var m=C.join("");if(!this.datescache)this.datescache=new Array;this.datescache[e]=m;return m}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxValidator","",{});a.extend(a.jqx._jqxValidator.prototype,{defineInstance:function(){this.rules=null;this.scroll=true;this.focus=true;this.scrollDuration=300;this.scrollCallback=null;this.position="right";this.arrow=true;this.animation="fade";this.animationDuration=150;this.closeOnClick=true;this.onError=null;this.onSuccess=null;this.ownerElement=null;this._events=["validationError","validationSuccess"];this._margin=5;this._inputHint=[]},createInstance:function(){this._configureInputs();
this._removeEventListeners();this._addEventListeners()},destroy:function(){this._removeEventListeners();this.hide()},validate:function(){var b=true,k,d=Infinity,g,f,c,h=[],j;this.updatePosition();for(var e=0;e<this.rules.length;e+=1){k=this._validateRule(this.rules[e]);if(!k){b=false;c=a(this.rules[e].input);h.push(c);g=c.offset().top;if(d>g){d=g;f=c}}}this._handleValidation(b,d,f,h);return b},validateInput:function(b){var e=this._getRulesForInput(b),d=true;for(var c=0;c<e.length;c+=1)if(!this._validateRule(e[c]))d=
false;return d},hideHint:function(b){var d=this._getRulesForInput(b);for(var c=0;c<d.length;c+=1)this._hideHintByRule(d[c])},hide:function(){var c;for(var b=0;b<this.rules.length;b+=1){c=this.rules[b];this._hideHintByRule(this.rules[b])}},updatePosition:function(){var c;for(var b=0;b<this.rules.length;b+=1){c=this.rules[b];if(c.hint)this._hintLayout(c.hint,a(c.input),c.position)}},_getRulesForInput:function(b){var d=[];for(var c=0;c<this.rules.length;c+=1)if(this.rules[c].input===b)d.push(this.rules[c]);
return d},_validateRule:function(e){var b=a(e.input),g,d=true;var c=this;var f=function(h){if(!h){g=e.hintRender.apply(c,[e.message,b]);c._hintLayout(g,b,e.position);c._showHint(g);e.hint=g;c._removeLowPriorityHints(e)}else c._hideHintByRule(e)};if(typeof e.rule==="function"&&!e.rule.call(this,b,f)){if(typeof e.hintRender==="function"&&!e.hint&&!this._higherPriorityActive(e)&&b.is(":visible")){g=e.hintRender.apply(this,[e.message,b]);this._hintLayout(g,b,e.position);this._showHint(g);e.hint=g;this._removeLowPriorityHints(e)}d=
false}else this._hideHintByRule(e);return d},_hideHintByRule:function(c){var b=this,d;if(c){d=c.hint;if(d)if(this.animation==="fade")d.fadeOut(this.animationDuration,function(){d.remove()});else d.remove();c.hint=null}},_handleValidation:function(b,e,d,c){if(!b){this._scrollHandler(e);if(this.focus)d.focus();this._raiseEvent(0,{invalidInputs:c});if(typeof this.onError==="function")this.onError(c)}else{this._raiseEvent(1);if(typeof this.onSuccess==="function")this.onSuccess()}},_scrollHandler:function(c){if(this.scroll){var b=
this;a("html,body").animate({scrollTop:c},this.scrollDuration,function(){if(typeof b.scrollCallback==="function")b.scrollCallback.call(b)})}},_higherPriorityActive:function(d){var e=false,c;for(var b=this.rules.length-1;b>=0;b-=1){c=this.rules[b];if(e&&c.input===d.input&&c.hint)return true;if(c===d)e=true}return false},_removeLowPriorityHints:function(d){var e=false,c;for(var b=0;b<this.rules.length;b+=1){c=this.rules[b];if(e&&c.input===d.input)this._hideHintByRule(c);if(c===d)e=true}},_getHintRuleByInput:function(b){var d;
for(var c=0;c<this.rules.length;c+=1){d=this.rules[c];if(a(d.input)[0]===b[0]&&d.hint)return d}return null},_removeEventListeners:function(){var f,b,e;for(var d=0;d<this.rules.length;d+=1){f=this.rules[d];e=f.action.split(",");b=a(f.input);for(var c=0;c<e.length;c+=1)this.removeHandler(b,a.trim(e[c])+".jqx-validator")}},_addEventListeners:function(){var f,c;if(this.host.parents(".jqx-window").length>0){var b=this;var g=function(){b.updatePosition()};var e=this.host.parents(".jqx-window");this.addHandler(e,
"closed",function(){b.hide()});this.addHandler(e,"moved",g);this.addHandler(e,"moving",g);this.addHandler(e,"resized",g);this.addHandler(e,"resizing",g)}for(var d=0;d<this.rules.length;d+=1){f=this.rules[d];c=a(f.input);this._addListenerTo(c,f)}},_addListenerTo:function(c,h){var b=this,f=h.action.split(",");var e=false;if(this._isjQWidget(c))e=true;for(var d=0;d<f.length;d+=1){var g=a.trim(f[d]);if(e&&(g=="blur"||g=="focus"))c=c.find("input");this.addHandler(c,g+".jqx-validator",function(i){b._validateRule(h)})}},
_configureInputs:function(){var b,d;this.rules=this.rules||[];for(var c=0;c<this.rules.length;c+=1)this._handleInput(c)},_handleInput:function(b){var c=this.rules[b];if(!c.position)c.position=this.position;if(!c.message)c.message="test";if(!c.action)c.action="blur";if(!c.hintRender)c.hintRender=this._hintRender;if(!c.rule)c.rule=null;else this._handleRule(c)},_handleRule:function(f){var c=f.rule,e,d,b=false;if(typeof c==="string"){if(c.indexOf("=")>=0){c=c.split("=");d=c[1].split(",");c=c[0]}e=this["_"+
c];if(e)f.rule=function(g,h){return e.apply(this,[g].concat(d))};else b=true}else if(typeof c!=="function")b=true;else f.rule=c;if(b)throw new Error("Wrong parameter!");},_required:function(b){switch(this._getType(b)){case "textarea":case "password":case "jqx-input":case "text":var d=a.data(b[0]);if(d.jqxMaskedInput){var e=b.jqxMaskedInput("promptChar"),c=b.jqxMaskedInput("value");return c&&c.indexOf(e)<0}else if(d.jqxNumberInput)return b.jqxNumberInput("inputValue")!=="";else if(d.jqxDateTimeInput)return true;
else return a.trim(b.val())!=="";case "checkbox":return b.is(":checked");case "radio":return b.is(":checked");case "div":if(b.is(".jqx-checkbox"))return b.jqxCheckBox("checked");return false}return false},_notNumber:function(b){return this._validateText(b,function(d){if(d=="")return true;var c=/\d/;return!c.test(d)})},_number:function(b){return this._validateText(b,function(c){if(c=="")return true;return!isNaN(parseInt(c,10))})},_phone:function(b){return this._validateText(b,function(d){if(d=="")return true;
var c=/^\(\d{3}\)(\d){3}-(\d){4}$/;return c.test(d)})},_length:function(c,d,b){return this._minLength(c,d)&&this._maxLength(c,b)},_maxLength:function(c,b){b=parseInt(b,10);return this._validateText(c,function(d){return d.length<=b})},_minLength:function(c,b){b=parseInt(b,10);return this._validateText(c,function(d){return d.length>=b})},_email:function(b){return this._validateText(b,function(d){if(d=="")return true;var c=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return c.test(d)})},_zipCode:function(b){return this._validateText(b,function(d){if(d=="")return true;var c=/^(^\d{5}$)|(^\d{5}-\d{4}$)|(\d{3}-\d{2}-\d{4})$/;return c.test(d)})},_ssn:function(b){return this._validateText(b,function(d){if(d=="")return true;var c=/\d{3}-\d{2}-\d{4}/;return c.test(d)})},_validateText:function(b,d){var c;if(this._isTextInput(b)){if(this._isjQWidget(b))c=b.find("input").val();else c=b.val();return d(c)}return false},_isjQWidget:function(b){var c=a.data(b[0]);if(c.jqxMaskedInput||
c.jqxNumberInput||c.jqxDateTimeInput)return true;return false},_isTextInput:function(b){var c=this._getType(b);return c==="text"||c==="textarea"||c==="password"||b.is(".jqx-input")},_getType:function(c){var b=c[0].tagName.toLowerCase(),d;if(b==="textarea")return"textarea";else if(c.is(".jqx-input"))return"jqx-input";else if(b==="input"){d=a(c).attr("type")?a(c).attr("type").toLowerCase():"text";return d}return b},_hintRender:function(d,c){var e=a('<div class="'+this.toThemeProperty("jqx-validator-hint")+
' jqx-rc-all"></div>'),b=this;e.html(d);if(this.closeOnClick)e.click(function(){b.hideHint(c.selector)});if(this.ownerElement==null)e.appendTo(document.body);else if(this.ownerElement.innerHTML)e.appendTo(a(this.ownerElement));else e.appendTo(this.ownerElement);return e},_hintLayout:function(d,c,b){var e;e=this._getPosition(c,b,d);d.css({position:"absolute",left:e.left,top:e.top});if(this.arrow)this._addArrow(c,d,b,e)},_showHint:function(b){if(this.animation==="fade"){b.fadeOut(0);b.fadeIn(this.animationDuration)}},
_getPosition:function(c,b,g){var f=c.offset(),e,d;if(this.ownerElement!=null){f={left:0,top:0};f.top=parseInt(f.top)+c.position().top;f.left=parseInt(f.left)+c.position().left}if(b.indexOf("top")>=0)e=f.top-c.outerHeight();else if(b.indexOf("bottom")>=0)e=f.top+g.outerHeight()+this._margin;else e=f.top;if(b.indexOf("center")>=0)d=f.left+this._margin+(c.outerWidth()-g.outerWidth())/2;else if(b.indexOf("left")>=0)d=f.left-g.outerWidth()-this._margin;else if(b.indexOf("right")>=0)d=f.left+c.outerWidth()+
this._margin;else d=f.left+this._margin;if(b.indexOf(":")>=0){b=b.split(":")[1].split(",");d+=parseInt(b[0],10);e+=parseInt(b[1],10)}return{left:d,top:e}},_addArrow:function(j,e,g,k){var l=a('<div class="'+this.toThemeProperty("jqx-validator-hint-arrow")+'"></div>'),d,i;e.children(".jqx-validator-hint-arrow").remove();e.append(l);var c=l.outerHeight(),f=l.outerWidth(),h=e.outerHeight(),b=e.outerWidth();this._addImage(l);if(g.indexOf("top")>=0)i=h-c;else if(g.indexOf("bottom")>=0)i=-c;else i=(h-c)/
2-c/2;if(g.indexOf("center")>=0)d=(b-f)/2;else if(g.indexOf("left")>=0)d=b+f/2;else if(g.indexOf("right")>=0)d=-f/2;if(g.indexOf("topright")>=0||g.indexOf("bottomright")>=0)d=0;if(g.indexOf("topleft")>=0||g.indexOf("bottomleft")>=0)d=b-f;l.css({position:"absolute",left:d,top:i})},_addImage:function(b){var c=b.css("background-image");c=c.replace('url("',"");c=c.replace('")',"");c=c.replace("url(","");c=c.replace(")","");b.css("background-image","none");b.append('<img src="'+c+'" alt="Arrow" style="position: relative; top: 0px; left: 0px; width: '+
b.width()+"px; height: "+b.height()+'px;" />')},_raiseEvent:function(b,d){var c=a.Event(this._events[b]);c.args=d;return this.host.trigger(c)},propertyChangedHandler:function(b,c,e,d){if(c==="rules"){this._configureInputs();this._removeEventListeners();this._addEventListeners()}}})})(jQuery);
(function(a){a.jqx.cssroundedcorners=function(b){var c={all:"jqx-rc-all",top:"jqx-rc-t",bottom:"jqx-rc-b",left:"jqx-rc-l",right:"jqx-rc-r","top-right":"jqx-rc-tr","top-left":"jqx-rc-tl","bottom-right":"jqx-rc-br","bottom-left":"jqx-rc-br"};for(prop in c){if(!c.hasOwnProperty(prop))continue;if(b==prop)return c[prop]}};a.jqx.jqxWidget("jqxButton","",{});a.extend(a.jqx._jqxButton.prototype,{defineInstance:function(){this.cursor="arrow";this.roundedCorners="all";this.disabled=false;this.height=null;this.width=
null;this.overrideTheme=false;this.enableHover=true},createInstance:function(d){var b=this;this._setSize();if(!this.overrideTheme){this.host.addClass(this.toThemeProperty(a.jqx.cssroundedcorners(this.roundedCorners)));this.host.addClass(this.toThemeProperty("jqx-button"));this.host.addClass(this.toThemeProperty("jqx-widget"))}this.isTouchDevice=a.jqx.mobile.isTouchDevice();this.host.css({cursor:this.cursor});if(!this.isTouchDevice){this.addHandler(this.host,"mouseenter",function(g){if(!b.disabled&&
b.enableHover){b.isMouseOver=true;b.refresh()}});this.addHandler(this.host,"mouseleave",function(g){if(!b.disabled&&b.enableHover){b.isMouseOver=false;b.refresh()}})}this.addHandler(this.host,"selectstart",function(g){return false});this.addHandler(this.host,"mousedown",function(g){if(!b.disabled){b.isPressed=true;b.refresh()}});this.addHandler(this.host,"focus",function(g){if(!b.disabled){b.isFocused=true;b.refresh()}});this.addHandler(this.host,"blur",function(g){if(!b.disabled){b.isFocused=false;
b.refresh()}});this.mouseupfunc=function(g){if(!b.disabled){b.isPressed=false;b.refresh()}};this.addHandler(a(document),"mouseup.button"+this.element.id,this.mouseupfunc);if(document.referrer!=""||window.frameElement)try{if(window.top!=null&&window.top!=window.self){var f="";if(window.parent&&document.referrer)f=document.referrer;if(f.indexOf(document.location.host)!=-1){var e=function(g){b.isPressed=false;b.refresh()};if(window.top.document)if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",
e,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",e)}}}catch(c){}this.propertyChangeMap.roundedCorners=function(g,i,h,j){g.refresh()};this.propertyChangeMap.width=function(g,i,h,j){g._setSize();g.refresh()};this.propertyChangeMap.height=function(g,i,h,j){g._setSize();g.refresh()};this.propertyChangeMap.disabled=function(g,i,h,j){if(h!=j){b.host[0].disabled=j;g.refresh()}};this.propertyChangeMap.theme=function(g,i,h,j){g.host.removeClass();g.host.addClass(g.toThemeProperty("jqx-button"));
g.host.addClass(g.toThemeProperty("jqx-widget"));if(!g.overrideTheme)g.host.addClass(g.toThemeProperty(a.jqx.cssroundedcorners(g.roundedCorners)));g._oldCSSCurrent=null;g.refresh()}},_setSize:function(){if(this.width!=null&&(this.width.toString().indexOf("px")!=-1||this.width.toString().indexOf("%")!=-1))this.host.css("width",this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.css("width",this.width);if(this.height!=null&&(this.height.toString().indexOf("px")!=-1||this.height.toString().indexOf("%")!=
-1))this.host.css("height",this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.css("height",this.height)},_removeHandlers:function(){this.removeHandler(this.host,"selectstart");this.removeHandler(this.host,"click");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"mousedown");this.removeHandler(a(document),"mouseup.button"+this.element.id,
this.mouseupfunc);this.mouseupfunc=null},destroy:function(){this._removeHandlers();this.host.removeClass();this.host.removeData();this.host.remove()},refresh:function(){if(this.overrideTheme)return;var d=this.toThemeProperty("jqx-fill-state-focus");var h=this.toThemeProperty("jqx-fill-state-disabled");var b=this.toThemeProperty("jqx-fill-state-normal");var g=this.toThemeProperty("jqx-fill-state-hover");var e=this.toThemeProperty("jqx-fill-state-pressed");var f=this.toThemeProperty("jqx-fill-state-pressed");
var c="";this.host[0].disabled=this.disabled;if(this.disabled)c=h;else if(this.isMouseOver&&!this.isTouchDevice)if(this.isPressed)c=f;else c=g;else if(this.isPressed)c=e;else c=b;if(this.isFocused)c+=" "+d;if(c!=this._oldCSSCurrent){if(this._oldCSSCurrent)this.host.removeClass(this._oldCSSCurrent);this.host.addClass(c);this._oldCSSCurrent=c}}});a.jqx.jqxWidget("jqxLinkButton","",{});a.extend(a.jqx._jqxLinkButton.prototype,{createInstance:function(d){var c=this;this.host.onselectstart=function(){return false};
var b=this.height||this.host.height();var e=this.width||this.host.width();this.href=this.host.attr("href");this.target=this.host.attr("target");this.content=this.host.text();this.element.innerHTML="";this.host.append("<input type='button' class='jqx-wrapper'/>");var f=this.host.find("input");f.addClass(this.toThemeProperty("jqx-reset"));f.width(e);f.height(b);f.val(this.content);this.host.find("tr").addClass(this.toThemeProperty("jqx-reset"));this.host.find("td").addClass(this.toThemeProperty("jqx-reset"));
this.host.find("tbody").addClass(this.toThemeProperty("jqx-reset"));this.host.css("color","inherit");this.host.addClass(this.toThemeProperty("jqx-link"));f.css({width:e});f.css({height:b});var g=d==undefined?{}:d[0]||{};f.jqxButton(g);if(this.disabled)this.host[0].disabled=true;this.propertyChangeMap.disabled=function(h,j,i,k){c.host[0].disabled=k};this.addHandler(f,"click",function(h){if(!this.disabled)c.onclick(h);return false})},onclick:function(b){if(this.target!=null)window.open(this.href,this.target);
else window.location=this.href}});a.jqx.jqxWidget("jqxRepeatButton","jqxButton",{});a.extend(a.jqx._jqxRepeatButton.prototype,{createInstance:function(d){var b=this;this.delay=this.delay||50;var c=a.jqx.mobile.isTouchDevice();this.addHandler(a(document),"mouseup."+this.base.element.id,function(e){if(!c){if(b.timeout!=null){clearTimeout(b.timeout);b.timeout=null;b.refresh()}if(b.timer!=undefined){clearInterval(b.timer);b.timer=null;b.refresh()}}});this.addHandler(this.base.host,"mousedown",function(e){if(!c){if(b.timer!=
null)clearInterval(b.timer);b.timeout=setTimeout(function(){clearInterval(b.timer);b.timer=setInterval(function(f){b.ontimer(f)},b.delay)},150)}});this.addHandler(this.base.host,"mousemove",function(e){if(!c)if(e.which==0)if(b.timer!=null){clearInterval(b.timer);b.timer=null}})},destroy:function(){this.removeHandler(this.base.host,"mousemove");this.removeHandler(this.base.host,"mousedown");this.removeHandler(a(document),"mouseup."+this.base.element.id);this.timer=null;this.base.destroy()},stop:function(){clearInterval(this.timer);
this.timer=null},ontimer:function(b){var b=new jQuery.Event("click");if(this.base!=null&&this.base.host!=null)this.base.host.trigger(b)}});a.jqx.jqxWidget("jqxToggleButton","jqxButton",{});a.extend(a.jqx._jqxToggleButton.prototype,{defineInstance:function(){this.toggled=false},createInstance:function(c){var b=this;this.base.overrideTheme=true;this.isTouchDevice=a.jqx.mobile.isTouchDevice();this.addHandler(this.base.host,"click",function(d){b.toggle()});if(!this.isTouchDevice){this.addHandler(this.base.host,
"mouseenter",function(d){if(!b.base.disabled)b.refresh()});this.addHandler(this.base.host,"mouseleave",function(d){if(!b.base.disabled)b.refresh()})}this.addHandler(this.base.host,"mousedown",function(d){if(!b.base.disabled)b.refresh()});this.addHandler(a(document),"mouseup",function(d){if(!b.base.disabled)b.refresh()})},_removeHandlers:function(){this.removeHandler(this.base.host,"click");this.removeHandler(this.base.host,"mouseenter");this.removeHandler(this.base.host,"mouseleave");this.removeHandler(this.base.host,
"mousedown");this.removeHandler(a(document),"mouseup")},toggle:function(){this.toggled=!this.toggled;this.refresh()},unCheck:function(){this.toggled=false;this.refresh()},check:function(){this.toggled=true;this.refresh()},refresh:function(){var g=this.base.toThemeProperty("jqx-fill-state-disabled");var b=this.base.toThemeProperty("jqx-fill-state-normal");var f=this.base.toThemeProperty("jqx-fill-state-hover");var d=this.base.toThemeProperty("jqx-fill-state-pressed");var e=this.base.toThemeProperty("jqx-fill-state-pressed");
var c="";this.base.host[0].disabled=this.base.disabled;if(this.base.disabled)c=g;else if(this.base.isMouseOver&&!this.isTouchDevice)if(this.base.isPressed||this.toggled)c=e;else c=f;else if(this.base.isPressed||this.toggled)c=d;else c=b;if(this.base.host.hasClass(g)&&g!=c)this.base.host.removeClass(g);if(this.base.host.hasClass(b)&&b!=c)this.base.host.removeClass(b);if(this.base.host.hasClass(f)&&f!=c)this.base.host.removeClass(f);if(this.base.host.hasClass(d)&&d!=c)this.base.host.removeClass(d);
if(this.base.host.hasClass(e)&&e!=c)this.base.host.removeClass(e);if(!this.base.host.hasClass(c))this.base.host.addClass(c)}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxDropDownButton","",{});a.extend(a.jqx._jqxDropDownButton.prototype,{defineInstance:function(){this.disabled=false;this.width=null;this.height=null;this.arrowSize=19;this.enableHover=true;if(this.openDelay==undefined)this.openDelay=350;if(this.closeDelay==undefined)this.closeDelay=400;this.animationType="default";this.enableBrowserBoundsDetection=false;this.dropDownHorizontalAlignment="left";this.dropDownZIndex=9999;this.autoOpen=false;this.events=["open","close"]},
createInstance:function(h){this.isanimating=false;var c=a("<div tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropDownButtonWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropDownButtonContent' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropDownButtonArrow' style='background-color: transparent; border: none; float: right; position: relative;'><div></div></div></div></div>");
this.popupContent=this.host.children();if(this.popupContent.length==0){this.popupContent=a("<div>"+this.host.text()+"</div>");this.popupContent.css("display","block");this.element.innerHTML=""}else this.popupContent.detach();var i=this;this.addHandler(this.host,"loadContent",function(e){i._arrange()});try{var f="dropDownButtonPopup"+this.element.id;var d=a(a.find("#"+f));if(d.length>0)d.remove();var b=a("<div class='dropDownButton' style='background-color: transparent; border-width: 0px; overflow: hidden; border-style: solid; position: absolute;' id='dropDownButtonPopup"+
this.element.id+"'></div>");b.addClass(this.toThemeProperty("jqx-widget-content"));b.addClass(this.toThemeProperty("jqx-rc-all"));b.css("z-index",this.dropDownZIndex);this.popupContent.appendTo(b);b.appendTo(document.body);this.container=b;if(this.animationType=="none")this.container.css("visibility","hidden");else this.container.css("visibility","hidden")}catch(g){}this.touch=a.jqx.mobile.isTouchDevice();this.dropDownButtonStructure=c;this.host.append(c);this.dropDownButtonWrapper=this.host.find("#dropDownButtonWrapper");
this.dropDownButtonArrow=this.host.find("#dropDownButtonArrow");this.arrow=a(this.dropDownButtonArrow.children()[0]);this.dropDownButtonContent=this.host.find("#dropDownButtonContent");this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content"));this.dropDownButtonWrapper.addClass(this.toThemeProperty("jqx-disableselect"));this.addHandler(this.dropDownButtonWrapper,"selectstart",function(){return false});this.dropDownButtonWrapper[0].id="dropDownButtonWrapper"+this.element.id;
this.dropDownButtonArrow[0].id="dropDownButtonArrow"+this.element.id;this.dropDownButtonContent[0].id="dropDownButtonContent"+this.element.id;var k=this;this.propertyChangeMap.disabled=function(e,m,l,n){if(n){e.host.addClass(k.toThemeProperty("jqx-dropdownlist-state-disabled"));e.host.addClass(k.toThemeProperty("jqx-fill-state-disabled"));e.dropDownButtonContent.addClass(k.toThemeProperty("jqx-dropdownlist-content-disabled"))}else{e.host.removeClass(k.toThemeProperty("jqx-dropdownlist-state-disabled"));
e.host.removeClass(k.toThemeProperty("jqx-fill-state-disabled"));e.dropDownButtonContent.removeClass(k.toThemeProperty("jqx-dropdownlist-content-disabled"))}};if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled"))}this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));
this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-normal"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.arrow.addClass(this.toThemeProperty("icon-arrow-down"));this.arrow.addClass(this.toThemeProperty("icon"));this._setSize();this.render();if(a.browser.msie&&a.browser.version<8){this.container.css("display","none");if(this.host.parents(".jqx-window").length>0){var j=this.host.parents(".jqx-window").css("z-index");
b.css("z-index",j+10);this.container.css("z-index",j+10)}}},setContent:function(b){this.dropDownButtonContent.children().remove();this.dropDownButtonContent[0].innerHTML="";this.dropDownButtonContent.append(b)},getContent:function(){if(this.dropDownButtonContent.children().length>0)return this.dropDownButtonContent.children();return this.dropDownButtonContent.text()},_setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&
!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);var d=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){d=true;this.host.width(this.width)}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){d=true;this.host.height(this.height)}if(d){this.refresh(false);var c=this;var b=this.host.width();a(window).resize(function(){c._arrange()})}},
isOpened:function(){var c=this;var b=a.data(document.body,"openedJQXButton"+this.element.id);if(b!=null&&b==c.popupContent)return true;return false},render:function(){this.removeHandlers();var b=this;var c=false;if(!this.touch)this.host.hover(function(){if(!b.disabled&&b.enableHover){c=true;b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-hover"));b.arrow.addClass(b.toThemeProperty("icon-arrow-down-hover"));b.host.addClass(b.toThemeProperty("jqx-fill-state-hover"))}},function(){if(!b.disabled&&
b.enableHover){b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-hover"));b.host.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b.arrow.removeClass(b.toThemeProperty("icon-arrow-down-hover"));c=false}});if(b.autoOpen){this.addHandler(this.host,"mouseenter",function(){var e=b.isOpened();if(!e&&b.autoOpen){b.open();b.host.focus()}});a(document).bind("mousemove."+b.element.id,function(h){var g=b.isOpened();if(g&&b.autoOpen){var l=b.host.offset();var k=l.top;var j=l.left;var i=b.container.offset();
var e=i.left;var f=i.top;canClose=true;if(h.pageY>=k&&h.pageY<=k+b.host.height())if(h.pageX>=j&&h.pageX<j+b.host.width())canClose=false;if(h.pageY>=f&&h.pageY<=f+b.container.height())if(h.pageX>=e&&h.pageX<e+b.container.width())canClose=false;if(canClose)b.close()}})}this.addHandler(this.dropDownButtonWrapper,"mousedown",function(f){if(!b.disabled){var e=b.container.css("visibility")=="visible";if(!b.isanimating)if(e)b.close();else b.open()}});this.addHandler(a(document),"mousedown."+this.element.id,
b.closeOpenedDropDown,{me:this,popup:this.container,id:this.element.id});if(document.referrer!=""||window.frameElement)if(window.top!=null){if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var d=function(e){if(b.isOpened()){var f={me:b,popup:b.container,id:b.element.id};e.data=f}};if(window.top.document.addEventListener)window.top.document.addEventListener("mousedown",d,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmousedown",
d)}}this.addHandler(this.host,"keydown",function(f){var e=b.container.css("visibility")=="visible";if(b.host.css("display")=="none")return true;if(f.keyCode=="13")if(!b.isanimating)if(e)b.close();else b.open();if(f.keyCode==115){if(!b.isanimating)if(!b.isOpened())b.open();else if(b.isOpened())b.close();return false}if(f.altKey)if(b.host.css("display")=="block")if(f.keyCode==38){if(b.isOpened())b.close()}else if(f.keyCode==40)if(!b.isOpened())b.open();if(f.keyCode=="27")if(!b.ishiding){b.close();if(b.tempSelectedIndex!=
undefined)b.selectIndex(b.tempSelectedIndex)}});this.addHandler(this.host.find("div:first"),"focus",function(){b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-focus"));b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))});this.addHandler(this.host.find("div:first"),"blur",function(){b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-focus"));b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"))})},removeHandlers:function(){var b=this;this.removeHandler(this.dropDownButtonWrapper,
"mousedown");this.removeHandler(this.host,"keydown");this.removeHandler(this.host.find("div:first"),"focus");this.removeHandler(this.host.find("div:first"),"blur");this.host.unbind("hover");this.removeHandler(this.host,"mouseenter");a(document).unbind("mousemove."+b.element.id)},_findPos:function(c){while(c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c)))c=c.nextSibling;var b=a(c).offset();return[b.left,b.top]},testOffset:function(h,f,c){var g=h.outerWidth();var j=h.outerHeight();var i=
a(window).width()+a(window).scrollLeft();var e=a(window).height()+a(window).scrollTop();if(f.left+g>i)if(g>this.host.width()){var d=this.host.offset().left;var b=g-this.host.width();f.left=d-b+2}if(f.left<0)f.left=parseInt(this.host.offset().left)+"px";if(f.top+j>e)f.top-=Math.abs(j+c);return f},open:function(){var o=this;var c=this.popupContent;var l=a(window).scrollTop();var h=a(window).scrollLeft();var j=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px";var f=parseInt(this.host.offset().left)+
"px";var n=a.jqx.mobile.isSafariMobileBrowser();var d=a.jqx.utilities.hasTransform(this.host);this.ishiding=false;this.tempSelectedIndex=this.selectedIndex;if(d||n!=null&&n){f=a.jqx.mobile.getLeftPos(this.element);j=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight())}c.stop();this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected"));this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.arrow.addClass(this.toThemeProperty("icon-arrow-down-selected"));
var g=false;if(a.browser.msie&&a.browser.version<8)g=true;if(g)this.container.css("display","block");this.container.css("left",f);this.container.css("top",j);var e=true;var p=false;if(this.dropDownHorizontalAlignment=="right"){var k=this.container.width();var b=Math.abs(k-this.host.width());if(k>this.host.width())this.container.css("left",25+parseInt(f)-b+"px");else this.container.css("left",25+parseInt(f)+b+"px")}if(this.enableBrowserBoundsDetection){var i=this.testOffset(c,{left:parseInt(this.container.css("left")),
top:parseInt(j)},parseInt(this.host.outerHeight()));if(parseInt(this.container.css("top"))!=i.top){p=true;this.container.height(c.outerHeight());c.css("top",23);if(this.interval)clearInterval(this.interval);this.interval=setInterval(function(){if(c.outerHeight()!=o.container.height()){var q=o.testOffset(c,{left:parseInt(o.container.css("left")),top:parseInt(j)},parseInt(o.host.outerHeight()));o.container.css("top",q.top);o.container.height(c.outerHeight())}},50)}else c.css("top",0);this.container.css("top",
i.top);if(parseInt(this.container.css("left"))!=i.left)this.container.css("left",i.left)}if(this.animationType=="none"){this.container.css("visibility","visible");a.data(document.body,"openedJQXButtonParent",o);a.data(document.body,"openedJQXButton"+this.element.id,c);c.css("margin-top",0);c.css("opacity",1)}else{this.container.css("visibility","visible");var m=c.outerHeight();o.isanimating=true;if(this.animationType=="fade"){c.css("margin-top",0);c.css("opacity",0);c.animate({opacity:1},this.openDelay,
function(){a.data(document.body,"openedJQXButtonParent",o);a.data(document.body,"openedJQXButton"+o.element.id,c);o.ishiding=false;o.isanimating=false})}else{c.css("opacity",1);if(p)c.css("margin-top",m);else c.css("margin-top",-m);c.animate({"margin-top":0},this.openDelay,function(){a.data(document.body,"openedJQXButtonParent",o);a.data(document.body,"openedJQXButton"+o.element.id,c);o.ishiding=false;o.isanimating=false})}}this._raiseEvent("0")},hide:function(){this.close()},show:function(){this.open()},
close:function(){var e=this.popupContent;var d=this.container;var f=this;var c=false;if(a.browser.msie&&a.browser.version<8)c=true;a.data(document.body,"openedJQXButton"+this.element.id,null);if(this.animationType=="none"){this.container.css("visibility","hidden");if(c)this.container.css("display","none")}else if(!f.ishiding){f.isanimating=true;e.stop();var b=e.outerHeight();e.css("margin-top",0);var g=-b;if(parseInt(this.container.offset().top)<parseInt(this.host.offset().top))g=b;if(this.animationType==
"fade"){e.css({opacity:1});e.animate({opacity:0},this.closeDelay,function(){d.css("visibility","hidden");f.isanimating=false;f.ishiding=false;if(c)d.css("display","none")})}else e.animate({"margin-top":g},this.closeDelay,function(){d.css("visibility","hidden");f.isanimating=false;f.ishiding=false;if(c)d.css("display","none")})}this.ishiding=true;this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this.arrow.removeClass(this.toThemeProperty("icon-arrow-down-selected"));
this._raiseEvent("1")},closeOpenedDropDown:function(e){var c=e.data.me;var b=a(e.target);if(a(e.target).ischildof(e.data.me.host))return true;if(a(e.target).ischildof(e.data.me.popupContent))return true;var f=c;var d=false;a.each(b.parents(),function(){if(this.className!="undefined")if(this.className.indexOf("dropDownButton")!=-1||this.className.indexOf("menu")!=-1){d=true;return false}});if(!d)c.close();return true},refresh:function(){this._arrange()},_arrange:function(){var f=parseInt(this.host.width());
var b=parseInt(this.host.height());var e=this.arrowSize;var d=this.arrowSize;var g=3;var c=f-d-2*g;if(c>0)this.dropDownButtonContent.width(c+"px");this.dropDownButtonContent.height(b);this.dropDownButtonContent.css("left",0);this.dropDownButtonContent.css("top",0);this.dropDownButtonArrow.width(d);this.dropDownButtonArrow.height(b)},destroy:function(){this.removeHandler(this.dropDownButtonWrapper,"selectstart");this.removeHandler(this.dropDownButtonWrapper,"mousedown");this.removeHandler(this.host,
"keydown");this.host.removeClass();this.removeHandler(a(document),"mousedown."+this.element.id,self.closeOpenedDropDown);this.host.remove()},_raiseEvent:function(f,c){if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);e.owner=this;if(f==2||f==3||f==4)e.args=c;var b=this.host.trigger(e);return b},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c=="autoOpen")b.render();if(c=="theme"&&d!=
null)a.jqx.utilities.setTheme(e,d,b.host);if(c=="width"||c=="height"){b._setSize();b._arrange()}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxColorPicker","",{});a.extend(a.jqx._jqxColorPicker.prototype,{defineInstance:function(){this.disabled=false;this.height=null;this.width=null;this.color=new a.jqx.color({hex:"ff0000"});this.redString="R:";this.greenString="G:";this.blueString="B:";this.showTransparent=false;this.colorMode="saturation";this.events=["colorchange"]},createInstance:function(c){var b=this;this._setSize();this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-reset"));
this.host.addClass(this.toThemeProperty("jqx-color-picker"));this.container=a("<div style='width: 100%; height: 100%; position: relative;'></div>");this.container.appendTo(this.host);this.colorMap=a("<div style='left: 0; top: 0; position: absolute;'></div>");this.colorMap.appendTo(this.container);this.colorBar=a("<div style='left: 0; top: 0; position: absolute;'></div>");this.colorBar.appendTo(this.container);this.colorPanel=a("<div style='left: 0; top: 0; position: absolute;'></div>");this.colorPanel.appendTo(this.container);
this.hexPanel=a("<div style='float: left;'></div>");this.hexPanel.appendTo(this.colorPanel);this.hexPanel.append("<span>#</span>");this.hex=a("<input maxlength='6' style='height: 16px;'/>");this.hex.addClass(this.toThemeProperty("jqx-input"));this.hex.appendTo(this.hexPanel);this.rgb=a("<div style='float: left; margin-top: 2px;'></div>");this.rgb.appendTo(this.colorPanel);this.red=a("<input style='width: 25px; height: 16px;' maxlength='3'/>");this.red.addClass(this.toThemeProperty("jqx-input"));this.rgb.append("<span>"+
this.redString+"</span>");this.red.appendTo(this.rgb);this.green=a("<input style='margin-right: 2px; height: 16px; width: 25px;' maxlength='3'/>");this.green.addClass(this.toThemeProperty("jqx-input"));this.rgb.append("<span>"+this.greenString+"</span>");this.green.appendTo(this.rgb);this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-map-overlay"));this._mapImageOverlayURL=this._getImageUrl(this.colorPanel);this.colorPanel.removeClass(this.toThemeProperty("jqx-color-picker-map-overlay"));
this.blue=a("<input style='height: 16px; width: 25px;' maxlength='3'/>");this.blue.addClass(this.toThemeProperty("jqx-input"));this.rgb.append("<span>"+this.blueString+"</span>");this.blue.appendTo(this.rgb);this.preview=a("<div style='background: red; position: absolute;'></div>");this.preview.addClass(this.toThemeProperty("jqx-widget-content"));this.preview.appendTo(this.colorPanel);this.colorBarPointer=a("<div style='top: 0; left: 0; position: absolute; width: 100%;'></div>");this.colorBarPointer.addClass(this.toThemeProperty("jqx-color-picker-bar-pointer"));
this.colorMapPointer=a("<div style='top: 0; left: 0; position: absolute; width: 100%;'></div>");this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer"));this.transparent=a("<div style='clear: both;'><a style='text-align: center;' href='#'>transparent</a></div>");if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.element.disabled=true}this._addHandlers()},_setPositionFromValue:function(){var d=this;var c=d.color.h;var i=100-d.color.v;var b=
d.colorMap.height();var e=d.colorMap.width();var h=c*e/360;var g=i*b/100;if(this.colorMode=="saturation"){var f=100-d.color.s;f=f*b/100;d._saturation=100-d.color.s;d.colorMapPointer.css("margin-left",h-8);d.colorMapPointer.css("margin-top",g-8);d.colorBarPointer.css("margin-top",f-8);d.colorMapImageOverlay.css("opacity",(100-d.color.s)/100)}else{var c=d.color.s;var h=c*e/100;var g=i*b/100;var f=360-d.color.h;f=f*b/360;d._hue=d.color.h;d.colorMapPointer.css("margin-left",h-8);d.colorMapPointer.css("margin-top",
g-8);d.colorBarPointer.css("margin-top",f-8)}},updateRGB:function(){var b=this;b.color.setRgb(b.red.val(),b.green.val(),b.blue.val());b._updateUI();b._raiseEvent("0",{color:b.color});b.color.transparent=false},_setPosition:function(f,c,h){var e=parseInt(f.pageX);var g=parseInt(c.offset().left);var b=parseInt(f.pageY);var d=parseInt(c.offset().top);if(h[0].className.indexOf("jqx-color-picker-bar")==-1)h.css("margin-left",e-8-g);if(b>=d&&b<=d+c.height())h.css("margin-top",b-8-d)},_handleKeyInput:function(c,
d,b){if(c.disabled)return;if(!c._validateKey(d))return d;b.val(c._setValueInRange(b.val(),0,255));this.updateRGB();this._setPositionFromValue()},_addHandlers:function(){var b=this;this.addHandler(this.colorMapPointer,"dragStart",function(e){e.preventDefault();return false});this.addHandler(this.colorBarPointer,"dragStart",function(e){e.preventDefault();return false});this.addHandler(this.transparent,"click",function(e){b._raiseEvent("0",{color:"transparent"});e.preventDefault();b.color.transparent=
true});this.addHandler(this.host,"selectionstart",function(e){e.preventDefault();return false});this.addHandler(this.blue,"keyup blur",function(e){b._handleKeyInput(b,e,b.blue)});this.addHandler(this.green,"keyup blur",function(e){b._handleKeyInput(b,e,b.green)});this.addHandler(this.red,"keyup blur",function(e){b._handleKeyInput(b,e,b.red)});this.addHandler(this.hex,"keyup blur",function(e){if(b.disabled)return;if(!b._validateKey(e))return e;if(b.hex.val().toString().length==6){b.hex.val(b.color.validateHex(b.hex.val()));
b.color.setHex(b.hex.val());b._updateUI();b._setPositionFromValue();b._raiseEvent("0",{color:b.color})}});this.addHandler(this.colorMap,"dragstart",function(e){e.preventDefault();return false});var d=function(f){b._setPosition(f,b.colorMap,b.colorMapPointer);if(b.colorMode=="saturation"){var e=b._valuesFromMouse(f,b.colorMap,360,100);if(e.x>360)e.x=360;b.color.setHsv(e.x,b._saturation!=null?100-b._saturation:100,100-e.y)}else{var e=b._valuesFromMouse(f,b.colorMap,100,100);if(e.x>100)e.x=100;b.color.setHsv(b._hue!=
null?b._hue:360,e.x,100-e.y)}b._updateUI();b._raiseEvent("0",{color:b.color});b.color.transparent=false};this.addHandler(this.colorMap,"mousedown",function(e){if(b.disabled)return;b.beginDrag=true;d(e)});this.addHandler(a(document),"mousemove.picker"+this.element.id,function(e){if(b.disabled)return;if(b.beginDrag==true)d(e)});this.addHandler(this.colorBar,"dragstart",function(e){e.preventDefault();return false});var c=function(f){b._setPosition(f,b.colorBar,b.colorBarPointer);if(b.colorMode=="saturation"){var e=
b._valuesFromMouse(f,b.colorBar,100,100);b.color.s=e.y;b._saturation=e.y;b.colorMapImageOverlay.css("opacity",b.color.s/100);b.color.setHsv(b.color.h,100-b.color.s,b.color.v)}else{var e=b._valuesFromMouse(f,b.colorBar,100,360);b.color.h=360-e.y;b._hue=b.color.h;b.color.setHsv(b.color.h,b.color.s,b.color.v)}b._updateUI();b._raiseEvent("0",{color:b.color});b.color.transparent=false};this.addHandler(this.colorBar,"mousedown",function(e){if(b.disabled)return;b.beginDragBar=true;c(e)});this.addHandler(a(document),
"mousemove.colorbar"+this.element.id,function(e){if(b.disabled)return;if(b.beginDragBar==true)c(e)});this.addHandler(a(document),"mouseup.colorMap"+this.element.id,function(e){if(b.disabled)return;b.beginDrag=false;b.beginDragBar=false})},_removeHandlers:function(){this.removeHandler(this.colorMapPointer);this.removeHandler(this.colorBarPointer);this.removeHandler(this.transparent,"click");this.removeHandler(this.host,"selectionstart");this.removeHandler(this.blue,"keyup blur");this.removeHandler(this.green,
"keyup blur");this.removeHandler(this.red,"keyup blur");this.removeHandler(this.hex,"keyup blur");this.removeHandler(this.colorMap,"dragstart");this.removeHandler(this.colorMap,"mousedown");this.removeHandler(a(document),"mousemove.colorbar"+this.element.id);this.removeHandler(a(document),"mousemove.colormap"+this.element.id);this.removeHandler(this.colorBar,"dragstart");this.removeHandler(this.colorBar,"mousedown");this.removeHandler(this.colorBar,"mousemove");this.removeHandler(a(document),"mouseup.colorMap"+
this.element.id)},_raiseEvent:function(g,c){if(c==undefined)c={owner:null};var d=this.events[g];var e=c?c:{};e.owner=this;var f=new jQuery.Event(d);f.owner=this;f.args=e;var b=this.host.trigger(f);return b},setColor:function(b){if(b=="transparent"){this.color.transparent=true;this.color.hex="000";this.color.r=0;this.color.g=0;this.color.b=0}else if(b.r)this.color=new a.jqx.color({rgb:b});else if(b.substring(0,1)=="#")this.color=new a.jqx.color({hex:b.substring(1)});else this.color=new a.jqx.color({hex:b});
this._updateUI();this._setPositionFromValue();this._raiseEvent("0",{color:b})},getColor:function(){return this.color},propertyChangedHandler:function(b,c,e,d){if(b.isInitialized==undefined||b.isInitialized==false)return;if(c=="colorMode")b.refresh();if(c=="color"){b._updateUI();b._setPositionFromValue();b._raiseEvent("0",{color:d})}if(c=="width"||c=="height"){b._setSize();b.refresh()}if(c=="showTransparent")b.refresh();if(c=="disabled"){this.element.disabled=d;if(d)b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled"));
else b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled"))}},_valuesFromMouse:function(j,g,c,b){var k=0;var i=0;var f=g.offset();var m=g.height();var d=g.width();if(j.pageX<f.left)k=0;else if(j.pageX>f.left+d)k=d;else k=j.pageX-f.left+1;if(j.pageY<f.top)i=0;else if(j.pageY>f.top+m)i=m;else i=j.pageY-f.top+1;var h=parseInt(k/d*c);var l=parseInt(i/m*b);return{x:h,y:l}},_validateKey:function(b){if(b.keyCode==9||b.keyCode==16||b.keyCode==38||b.keyCode==29||b.keyCode==40||b.keyCode==17||b.keyCode==
37||b.ctrlKey&&(b.keyCode=="c".charCodeAt()||b.keyCode=="v".charCodeAt())||b.ctrlKey&&(b.keyCode=="C".charCodeAt()||b.keyCode=="V".charCodeAt()))return false;if(b.ctrlKey||b.shiftKey)return false;return true},_setValueInRange:function(d,c,b){if(d==""||isNaN(d))return c;d=parseInt(d);if(d>b)return b;if(d<c)return c;return d},destroy:function(){this.host.removeClass();this._removeHandlers();this.host.remove()},setPointerStyle:function(c){this.colorMapPointer.removeClass();if(c=="transparent"||c.hex==
"")this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer"));var b=105;var d=c.r*0.299+c.g*0.587+c.b*0.114;var e=255-d<b?"Black":"White";if(e=="Black")this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer"));else this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer-alt"))},_updateUI:function(){var c=this;c.red.val(c.color.r);c.green.val(c.color.g);c.blue.val(c.color.b);c.hex.val(c.color.hex);var b=new a.jqx.color({hex:"fff"});if(this.colorMode==
"saturation"){b.setHsv(this.color.h,100,this.color.v);c.colorBar.css("background","#"+b.hex)}else{b.setHsv(this.color.h,100,100);c.colorMap.css("background-color","#"+b.hex)}c.preview.css("background","#"+this.color.hex);c.setPointerStyle(this.color)},_setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);
else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);if(this.host.width()<130)this.host.width(150);if(this.host.height()<70)this.host.height(70)},_arrange:function(){var b=this.host.height()-42;if(this.showTransparent)b=this.host.height()-62;if(b<=0)return;this.colorMap.width(85*this.host.width()/100);this.colorMap.height(b);this.colorBar.height(b);this.colorBar.css("left",this.colorMap.width()+4);this.colorBar.width(8*this.host.width()/100);this.colorBarPointer.width(this.colorBar.width());
this.colorPanel.width(this.host.width());this.colorPanel.height(40);if(this.showTransparent)this.colorPanel.height(60);this.colorPanel.css("top",b+4);this.hex.width(this.colorMap.width()-this.colorBar.width()-4);this.hex.css("margin-left","4px");this.preview.width(this.colorBar.width()+9);this.preview.height(25);this.preview.addClass(this.toThemeProperty("jqx-rc-all"));this.preview.addClass(this.toThemeProperty("jqx-color-picker-preview"));this.preview.css("left",this.colorMap.width()-4);this.preview.css("top",
"5px");var e=4+parseInt(this.hex.position().left)+this.hex.outerWidth();var d=function(f){var g=parseInt(f.blue.position().left)+f.blue.outerWidth();return g};var c=d(this);while(c<e){this.blue.width(this.blue.width()+1);c=d(this);if(c<e)this.green.width(this.green.width()+1);c=d(this);if(c<e)this.red.width(this.red.width()+1);c=d(this)}},_getColorPointer:function(){var b=a("<div></div>");b.addClass(this.toThemeProperty("jqx-color-picker-pointer"));return b},_getImageUrl:function(c){var b=c.css("backgroundImage");
b=b.replace('url("',"");b=b.replace('")',"");b=b.replace("url(","");b=b.replace(")","");return b},refresh:function(){this._saturation=null;this._hue=null;this.colorMap.removeClass();this.colorBar.removeClass();this.colorMap.addClass(this.toThemeProperty("jqx-disableselect"));this.colorBar.addClass(this.toThemeProperty("jqx-disableselect"));this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-panel"));this.colorBar.css("background-image","");this.colorMap.css("background-image","");if(this.colorMode==
"saturation"){this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map"));this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar"))}else{this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map-hue"));this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar-hue"))}this._barImageURL=this._getImageUrl(this.colorBar);this._mapImageURL=this._getImageUrl(this.colorMap);this._arrange();this.colorBar.children().remove();this.colorBarImageContainer=a("<div style='overflow: hidden;'></div>");
this.colorBarImageContainer.width(this.colorBar.width());this.colorBarImageContainer.height(this.colorBar.height());this.colorBarImageContainer.appendTo(this.colorBar);this.colorBarImage=a("<img/>");this.colorBarImage.appendTo(this.colorBarImageContainer);this.colorBarImage.attr("src",this._barImageURL);this.colorBar.css("background-image","none");this.colorBarImage.attr("width",this.colorBar.width());this.colorBarImage.attr("height",this.colorBar.height());this.colorBarPointer.appendTo(this.colorBar);
this.colorMap.children().remove();this.colorMapImage=a("<img/>");this.colorMapImage.appendTo(this.colorMap);this.colorMapImage.attr("src",this._mapImageURL);this.colorMap.css("background-image","none");this.colorMapImage.attr("width",this.colorMap.width());this.colorMapImage.attr("height",this.colorMap.height());this.colorMapImageOverlay=a("<img style='position: absolute; left: 0; top: 0;'/>");this.colorMapImageOverlay.prependTo(this.colorMap);this.colorMapImageOverlay.attr("src",this._mapImageOverlayURL);
this.colorMapImageOverlay.attr("width",this.colorMap.width());this.colorMapImageOverlay.attr("height",this.colorMap.height());this.colorMapImageOverlay.css("opacity",0);this.colorMapPointer.appendTo(this.colorMap);if(this.showTransparent)this.transparent.appendTo(this.colorPanel);this._updateUI();this._setPositionFromValue()}});a.jqx.color=function(d){var b={r:0,g:0,b:0,h:0,s:0,v:0,hex:"",hexToRgb:function(i){i=this.validateHex(i);var h="00",f="00",e="00";if(i.length==6){h=i.substring(0,2);f=i.substring(2,
4);e=i.substring(4,6)}else{if(i.length>4){h=i.substring(4,i.length);i=i.substring(0,4)}if(i.length>2){f=i.substring(2,i.length);i=i.substring(0,2)}if(i.length>0)e=i.substring(0,i.length)}return{r:this.hexToInt(h),g:this.hexToInt(f),b:this.hexToInt(e)}},validateHex:function(e){e=(new String(e)).toUpperCase();e=e.replace(/[^A-F0-9]/g,"0");if(e.length>6)e=e.substring(0,6);return e},webSafeDec:function(e){e=Math.round(e/51);e*=51;return e},hexToWebSafe:function(i){var h,f,e;if(i.length==3){h=i.substring(0,
1);f=i.substring(1,1);e=i.substring(2,1)}else{h=i.substring(0,2);f=i.substring(2,4);e=i.substring(4,6)}return intToHex(this.webSafeDec(this.hexToInt(h)))+this.intToHex(this.webSafeDec(this.hexToInt(f)))+this.intToHex(this.webSafeDec(this.hexToInt(e)))},rgbToWebSafe:function(e){return{r:this.webSafeDec(e.r),g:this.webSafeDec(e.g),b:this.webSafeDec(e.b)}},rgbToHex:function(e){return this.intToHex(e.r)+this.intToHex(e.g)+this.intToHex(e.b)},intToHex:function(f){var e=parseInt(f).toString(16);if(e.length==
1)e="0"+e;return e.toUpperCase()},hexToInt:function(e){return parseInt(e,16)},hslToRgb:function(v){var n=parseInt(v.h)/360;var w=parseInt(v.s)/100;var k=parseInt(v.l)/100;if(k<=0.5)var f=k*(1+w);else var f=k+w-k*w;var i=2*k-f;var t=n+1/3;var j=n;var m=n-1/3;var e=Math.round(this.hueToRgb(i,f,t)*255);var o=Math.round(this.hueToRgb(i,f,j)*255);var u=Math.round(this.hueToRgb(i,f,m)*255);return{r:e,g:o,b:u}},hueToRgb:function(g,f,e){if(e<0)e+=1;else if(e>1)e-=1;if(e*6<1)return g+(f-g)*e*6;else if(e*2<
1)return f;else if(e*3<2)return g+(f-g)*(2/3-e)*6;else return g},rgbToHsl:function(n){var e=n[0],k=n[1],o=n[2];e/=255;k/=255;o/=255;var p=math.max(e,k,o),i=math.min(e,k,o),j,q,f=(p+i)/2;if(p===i)j=q=0;else{var m=p-i;q=f>0.5?m/(2-p-i):m/(p+i);switch(p){case e:j=(k-o)/m+(k<o?6:0);break;case k:j=(o-e)/m+2;break;case o:j=(e-k)/m+4;break}j/=6}return{h:j,s:q,l:f}},rgbToHsl:function(m){var e=parseFloat(m.r)/255;var k=parseFloat(m.g)/255;var n=parseFloat(m.b)/255;var o=Math.max(e,k,n);var i=Math.min(e,k,
n);var p=o-i;var q=o+i;if(i===o)var j=0;else if(e===o)var j=(60*(k-n)/p+360)%360;else if(k===o)var j=60*(n-e)/p+120;else var j=60*(e-k)/p+240;var f=0.5*q;if(f===0)var t=0;else if(f===1)var t=1;else if(f<=0.5)var t=p/q;else var t=p/(2-q);j=j.round();t=(t*100).round();f=(f*100).round();return{h:j,s:t,l:f}},rgbToHsv:function(h){var k=h.r/255;var j=h.g/255;var f=h.b/255;hsv={h:0,s:0,v:0};var i=0;var e=0;if(k>=j&&k>=f){e=k;i=j>f?f:j}else if(j>=f&&j>=k){e=j;i=k>f?f:k}else{e=f;i=j>k?k:j}hsv.v=e;hsv.s=e?
(e-i)/e:0;if(!hsv.s)hsv.h=0;else{delta=e-i;if(k==e)hsv.h=(j-f)/delta;else if(j==e)hsv.h=2+(f-k)/delta;else hsv.h=4+(k-j)/delta;hsv.h=parseInt(hsv.h*60);if(hsv.h<0)hsv.h+=360}hsv.s=parseInt(hsv.s*100);hsv.v=parseInt(hsv.v*100);return hsv},hsvToRgb:function(l){rgb={r:0,g:0,b:0};var k=l.h;var r=l.s;var n=l.v;if(r==0)if(n==0)rgb.r=rgb.g=rgb.b=0;else rgb.r=rgb.g=rgb.b=parseInt(n*255/100);else{if(k==360)k=0;k/=60;r=r/100;n=n/100;var j=parseInt(k);var m=k-j;var g=n*(1-r);var e=n*(1-r*m);var o=n*(1-r*(1-
m));switch(j){case 0:rgb.r=n;rgb.g=o;rgb.b=g;break;case 1:rgb.r=e;rgb.g=n;rgb.b=g;break;case 2:rgb.r=g;rgb.g=n;rgb.b=o;break;case 3:rgb.r=g;rgb.g=e;rgb.b=n;break;case 4:rgb.r=o;rgb.g=g;rgb.b=n;break;case 5:rgb.r=n;rgb.g=g;rgb.b=e;break}rgb.r=parseInt(rgb.r*255);rgb.g=parseInt(rgb.g*255);rgb.b=parseInt(rgb.b*255)}return rgb},setRgb:function(h,f,e){var j=function(g){if(g<0||g>255)return 0;if(isNaN(parseInt(g)))return 0;return g};this.r=j(h);this.g=j(f);this.b=j(e);var i=this.rgbToHsv(this);this.h=i.h;
this.s=i.s;this.v=i.v;this.hex=this.rgbToHex(this)},setHsl:function(g,f,e){this.h=g;this.s=f;this.l=e;var i=this.hslToRgb(this);this.r=i.r;this.g=i.g;this.b=i.b;this.hex=this.rgbToHex(i)},setHsv:function(g,f,e){this.h=g;this.s=f;this.v=e;var i=this.hsvToRgb(this);this.r=i.r;this.g=i.g;this.b=i.b;this.hex=this.rgbToHex(i)},setHex:function(e){this.hex=e;var g=this.hexToRgb(this.hex);this.r=g.r;this.g=g.g;this.b=g.b;var f=this.rgbToHsv(g);this.h=f.h;this.s=f.s;this.v=f.v}};if(d)if(d.hex){var c=b.validateHex(d.hex);
b.setHex(c)}else if(d.r)b.setRgb(d.r,d.g,d.b);else if(d.h)b.setHsv(d.h,d.s,d.v);return b}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxSwitchButton","",{});a.extend(a.jqx._jqxSwitchButton.prototype,{defineInstance:function(){this.disabled=false;this.checked=false;this.onLabel="On";this.offLabel="Off";this.toggleMode="default";this.animationDuration=250;this.width=90;this.height=30;this.animationEnabled=true;this.thumbSize="40%";this.orientation="horizontal";this.switchRatio="50%";this._isMouseDown=false;this._dimensions={horizontal:{size:"width",opSize:"height",oSize:"outerWidth",opOSize:"outerHeight",
pos:"left",oPos:"top",opposite:"vertical"},vertical:{size:"height",opSize:"width",oSize:"outerHeight",opOSize:"outerWidth",pos:"top",oPos:"left",opposite:"horizontal"}};this._touchEvents={mousedown:"touchstart",click:"touchend",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave"};this._borders={};this._isTouchDevice=false;this._distanceRequired=3;this._isDistanceTraveled=false;this._thumb;this._onLabel;this._offLabel;this._wrapper;this._animationActive=false;this._events=
["checked","unchecked","change"]},createInstance:function(c){var d=a.data(document.body,"jqx-switchbutton")||1;this._idHandler(d);a.data(document.body,"jqx-draggables",++d);this._isTouchDevice=a.jqx.mobile.isTouchDevice();this.switchRatio=parseInt(this.switchRatio,10);this._render();this._addClasses();this._performLayout();this._removeEventHandles();this._addEventHandles();this._disableSelection();var b=this;if(!this.checked)this._switchButton(false,0,true);if(this.disabled)this.element.disabled=
true},setOnLabel:function(b){this._onLabel.html('<div style="display: inline-block;">'+b+"</div>");this._centerLabels()},setOffLabel:function(b){this._offLabel.html('<div style="display: inline-block;">'+b+"</div>");this._centerLabels()},toggle:function(){if(this.checked)this.uncheck();else this.check()},uncheck:function(){var b=this;this._switchButton(false)},check:function(){var b=this;this._switchButton(true)},_idHandler:function(b){if(!this.element.id){var c="jqx-switchbutton-"+b;this.element.id=
c}},_dir:function(b){return this._dimensions[this.orientation][b]},_getEvent:function(b){if(this._isTouchDevice)return this._touchEvents[b];else return b},_render:function(){this._thumb=a("<span/>");this._onLabel=a("<span/>");this._offLabel=a("<span/>");this._wrapper=a("<div/>");this._onLabel.appendTo(this.host);this._thumb.appendTo(this.host);this._offLabel.appendTo(this.host);this.host.wrapInner(this._wrapper);this._wrapper=this.host.children();this.setOnLabel(this.onLabel);this.setOffLabel(this.offLabel)},
_addClasses:function(){var c=this._thumb,d=this._onLabel,b=this._offLabel;this.host.addClass(this.toThemeProperty("jqx-switchbutton"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this._wrapper.addClass(this.toThemeProperty("jqx-switchbutton-wrapper"));c.addClass(this.toThemeProperty("jqx-fill-state-normal"));c.addClass(this.toThemeProperty("jqx-switchbutton-thumb"));d.addClass(this.toThemeProperty("jqx-switchbutton-label-on"));
d.addClass(this.toThemeProperty("jqx-switchbutton-label"));b.addClass(this.toThemeProperty("jqx-switchbutton-label-off"));b.addClass(this.toThemeProperty("jqx-switchbutton-label"))},_performLayout:function(){var e=this.host,c=this._dir("opSize"),d=this._dir("size"),f=this._wrapper,b;e.css({width:this.width,height:this.height});f.css(c,e[c]());this._thumbLayout();this._labelsLayout();b=this._borders[this._dir("opposite")]/2;f.css(d,e[d]()+this._offLabel[this._dir("oSize")]()+b+0.8);f.css(c,e[c]())},
_thumbLayout:function(){var d=this.thumbSize,e=this.host,b=0,f={horizontal:0,vertical:0},c=this;if(d.toString().indexOf("%")>=0)d=e[this._dir("size")]()*parseInt(d,10)/100;this._thumb[this._dir("size")](d);this._thumb[this._dir("opSize")](e[this._dir("opSize")]());this._handleThumbBorders()},_handleThumbBorders:function(){this._borders.horizontal=parseInt(this._thumb.css("border-left-width"),10)||0;this._borders.horizontal+=parseInt(this._thumb.css("border-right-width"),10)||0;this._borders.vertical=
parseInt(this._thumb.css("border-top-width"),10)||0;this._borders.vertical+=parseInt(this._thumb.css("border-bottom-width"),10)||0;var b=this._borders[this._dir("opposite")];if(this.orientation==="horizontal"){this._thumb.css("margin-top",-b/2);this._thumb.css("margin-left",0)}else{this._thumb.css("margin-left",-b/2);this._thumb.css("margin-top",0)}},_labelsLayout:function(){var g=this.host,c=this._thumb,e=this._dir("opSize"),h=this._dir("size"),b=this._dir("oSize"),f=g[h]()-c[b](),d=this._borders[this._dir("opposite")]/
2;this._onLabel[h](f+d);this._offLabel[h](f+d);this._onLabel[e](g[e]());this._offLabel[e](g[e]());this._orderLabels();this._centerLabels()},_orderLabels:function(){if(this.orientation==="horizontal"){this._onLabel.css("float","left");this._thumb.css("float","left");this._offLabel.css("float","right")}else{this._onLabel.css("display","block");this._offLabel.css("display","block")}},_centerLabels:function(){var c=this._onLabel.children("div"),b=this._offLabel.children("div"),e=c.parent(),f=e.height(),
g=c.outerHeight(),d=this._borders[this.orientation]/2||0,h=Math.floor((f-g)/2)+d;c.css("margin-top",h);b.css("margin-top",h)},_removeEventHandles:function(){var b="."+this.element.id;this.removeHandler(this._wrapper,this._getEvent("click")+b+this.element.id,this._clickHandle);this.removeHandler(this._thumb,this._getEvent("mousedown")+b,this._mouseDown);this.removeHandler(a(document),this._getEvent("mouseup")+b,this._mouseUp);this.removeHandler(a(document),this._getEvent("mousemove")+b,this._mouseMove)},
_addEventHandles:function(){var c="."+this.element.id,b=this;this.addHandler(this._thumb,"mouseenter"+c,function(){b._thumb.addClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._thumb,"mouseleave"+c,function(){b._thumb.removeClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._wrapper,this._getEvent("click")+c,this._clickHandle,{self:this});this.addHandler(this._thumb,this._getEvent("mousedown")+c,this._mouseDown,{self:this});this.addHandler(a(document),this._getEvent("mouseup")+
c,this._mouseUp,{self:this});this.addHandler(a(document),this._getEvent("mousemove")+c,this._mouseMove,{self:this})},enable:function(){this.disabled=false;this.element.disabled=false},disable:function(){this.disabled=true;this.element.disabled=true},_clickHandle:function(c){var b=c.data.self;if((b.toggleMode==="click"||b.toggleMode==="default")&&!b.disabled)if(!b._isDistanceTraveled&&!b._dragged){b._wrapper.stop();b.toggle()}b._thumb.removeClass(b.toThemeProperty("jqx-fill-state-pressed"))},_mouseDown:function(c){var b=
c.data.self,d=b._wrapper;b._mouseStartPosition=b._getMouseCoordinates(c);b._buttonStartPosition={left:parseInt(d.css("margin-left"),10)||0,top:parseInt(d.css("margin-top"),10)||0};if(!b.disabled&&(b.toggleMode==="slide"||b.toggleMode==="default")){b._wrapper.stop();b._isMouseDown=true;b._isDistanceTraveled=false;b._dragged=false}b._thumb.addClass(b.toThemeProperty("jqx-fill-state-pressed"))},_mouseUp:function(d){var c=d.data.self;c._isMouseDown=false;c._thumb.removeClass(c.toThemeProperty("jqx-fill-state-pressed"));
if(!c._isDistanceTraveled)return;var f=c._wrapper,b=parseInt(f.css("margin-"+c._dir("pos")),10)||0,e=c._dropHandler(b);if(e)c._switchButton(!c.checked);else c._switchButton(c.checked,null,true);c._isDistanceTraveled=false},_mouseMove:function(f){var d=f.data.self,b=d._getMouseCoordinates(f);if(d._isMouseDown&&d._distanceTraveled(b)){var e=d._dir("pos"),h=d._wrapper,c=d._buttonStartPosition[e],g=c+b[e]-d._mouseStartPosition[e],g=d._validatePosition(g);d._dragged=true;h.css("margin-"+d._dir("pos"),
g);return false}},_distanceTraveled:function(b){if(this._isDistanceTraveled)return true;else if(!this._isMouseDown)return false;else{var d=this._mouseStartPosition,c=this._distanceRequired;this._isDistanceTraveled=Math.abs(b.left-d.left)>=c||Math.abs(b.top-d.top)>=c;return this._isDistanceTraveled}},_validatePosition:function(c){var d=this._borders[this._dir("opposite")],b=0,e=-(this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]())-d;if(b<c)return b;if(e>c)return e;return c},_dropHandler:function(c){var b=
0,d=-(this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]()),g=Math.abs(d-b),e=Math.abs(c-this._buttonStartPosition[this._dir("pos")]),f=g*(this.switchRatio/100);if(e>=f)return true;return false},_switchButton:function(c,h,g){var i=this._wrapper,d=this,f={},e=this._borders[this._dir("opposite")],b=0;if(typeof h==="undefined")h=this.animationEnabled?this.animationDuration:0;if(!c)b=this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]()+e;f["margin-"+this._dir("pos")]=-b;i.animate(f,
h,function(){if(!g)d._handleEvent(c);d.checked=c})},_handleEvent:function(b){if(b!==this.checked)this._raiseEvent(2,{check:b});if(b)this._raiseEvent(0);else this._raiseEvent(1)},_disableSelection:function(){var c=this.host,b=c.find("*");a.each(b,function(d,e){e.onselectstart=function(){return false};a(e).addClass("jqx-disableselect")})},_getMouseCoordinates:function(b){if(this._isTouchDevice)return{left:b.originalEvent.touches[0].pageX,top:b.originalEvent.touches[0].pageY};else return{left:b.pageX,
top:b.pageY}},destroy:function(){this._removeEventHandlers();this.host.removeClass(this.toThemeProperty("jqx-switchbutton"));this._wrapper.remove()},_raiseEvent:function(d,b){var c=a.Event(this._events[d]);c.args=b;return this.host.trigger(c)},_themeChanger:function(f,g,e){if(!f)return;if(typeof e==="undefined")e=this.host;var h=e[0].className.split(" "),b=[],j=[],d=e.children();for(var c=0;c<h.length;c+=1)if(h[c].indexOf(f)>=0){b.push(h[c]);j.push(h[c].replace(f,g))}this._removeOldClasses(b,e);this._addNewClasses(j,
e);for(var c=0;c<d.length;c+=1)this._themeChanger(f,g,a(d[c]))},_removeOldClasses:function(d,c){for(var b=0;b<d.length;b+=1)c.removeClass(d[b])},_addNewClasses:function(d,c){for(var b=0;b<d.length;b+=1)c.addClass(d[b])},propertyChangedHandler:function(b,c,e,d){switch(c){case "disabled":if(d)this.disable();else this.enable();break;case "switchRatio":this.switchRatio=parseInt(this.switchRatio,10);break;case "checked":if(d)this.check();else this.uncheck();break;case "onLabel":this.setOnLabel(d);break;
case "offLabel":this.setOffLabel(d);break;case "theme":a.jqx.utilities.setTheme(e,d,b.host);break;case "width":case "height":case "thumbSize":case "orientation":this._performLayout();this._wrapper.css("left",0);this._wrapper.css("top",0);this._switchButton(this.checked,0,true);break}}})})(jQuery);
(function(a){a.jqx.jqxWidget("myWidget","",{});a.extend(a.jqx._myWidget.prototype,{var1:5,var2:10,foo:function(b){this.var1*=b},bar:function(){alert(this.var1)},createInstance:function(b){}});a.jqx.jqxWidget("jqxScrollBar","",{});a.extend(a.jqx._jqxScrollBar.prototype,{defineInstance:function(){this.height=null;this.width=null;this.vertical=false;this.min=0;this.max=1E3;this.value=this.min;this.step=10;this.largestep=50;this.thumbMinSize=10;this.thumbSize=0;this.roundedCorners="all";this.showButtons=
true;this.disabled=false;this.touchMode="auto";this.touchModeStyle="auto";this.thumbTouchSize=8;this._triggervaluechanged=true},createInstance:function(b){this.render()},render:function(){this._mouseup=new Date;var b=this;this.element.innerHTML="";this.host.append("<div id='jqxScrollOuterWrap' style='width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollAreaUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollThumb' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollAreaDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='jqxScrollBtnDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div>");
if(this.width!=undefined&&parseInt(this.width)>0)this.host.width(parseInt(this.width));if(this.height!=undefined&&parseInt(this.height)>0)this.host.height(parseInt(this.height));this.btnUp=this.host.find("#jqxScrollBtnUp");this.btnDown=this.host.find("#jqxScrollBtnDown");this.btnThumb=this.host.find("#jqxScrollThumb");this.areaUp=this.host.find("#jqxScrollAreaUp");this.arrowUp=a("<div></div>");this.arrowUp.appendTo(this.btnUp);this.arrowDown=a("<div></div>");this.arrowDown.appendTo(this.btnDown);
this.areaDown=this.host.find("#jqxScrollAreaDown");this.scrollWrap=this.host.find("#jqxScrollWrap");this.scrollOuterWrap=this.host.find("#jqxScrollOuterWrap");this.btnUp[0].id="jqxScrollBtnUp"+this.element.id;this.btnDown[0].id="jqxScrollBtnDown"+this.element.id;this.btnThumb[0].id="jqxScrollThumb"+this.element.id;this.areaUp[0].id="jqxScrollAreaUp"+this.element.id;this.areaDown[0].id="jqxScrollAreaDown"+this.element.id;this.scrollWrap[0].id="jqxScrollWrap"+this.element.id;this.scrollOuterWrap[0].id=
"jqxScrollOuterWrap"+this.element.id;if(!this.host.jqxRepeatButton){alert("jqxbuttons.js is not loaded.");return}this.btnUp.jqxRepeatButton({overrideTheme:true,disabled:this.disabled});this.btnDown.jqxRepeatButton({overrideTheme:true,disabled:this.disabled});this.btnDownInstance=a.data(this.btnDown[0],"jqxRepeatButton").instance;this.btnUpInstance=a.data(this.btnUp[0],"jqxRepeatButton").instance;this.areaUp.jqxRepeatButton({overrideTheme:true,delay:300});this.areaDown.jqxRepeatButton({overrideTheme:true,
delay:300});this.btnThumb.jqxButton({overrideTheme:true,disabled:this.disabled});this.propertyChangeMap.value=function(c,e,d,f){if(!isNaN(f))if(d!=f)c.setPosition(parseFloat(f),true)};this.propertyChangeMap.width=function(c,e,d,f){if(c.width!=undefined&&parseInt(c.width)>0){c.host.width(parseInt(c.width));c._arrange()}};this.propertyChangeMap.height=function(c,e,d,f){if(c.height!=undefined&&parseInt(c.height)>0){c.host.height(parseInt(c.height));c._arrange()}};this.propertyChangeMap.theme=function(c,
e,d,f){c.setTheme()};this.propertyChangeMap.max=function(c,e,d,f){if(!isNaN(f))if(d!=f){c.max=parseInt(f);if(c.min>c.max)c.max=c.min+1;c._arrange();c.setPosition(c.value)}};this.propertyChangeMap.min=function(c,e,d,f){if(!isNaN(f))if(d!=f){c.min=parseInt(f);if(c.min>c.max)c.max=c.min+1;c._arrange();c.setPosition(c.value)}};this.propertyChangeMap.disabled=function(c,e,d,f){if(d!=f){if(f)c.host.addClass(c.toThemeProperty("jqx-fill-state-disabled"));else c.host.removeClass(c.toThemeProperty("jqx-fill-state-disabled"));
c.btnUp.jqxRepeatButton("disabled",c.disabled);c.btnDown.jqxRepeatButton("disabled",c.disabled);c.btnThumb.jqxButton("disabled",c.disabled)}};this.propertyChangeMap.touchMode=function(c,e,d,f){if(d!=f)c._updateTouchBehavior()};this.buttonUpCapture=false;this.buttonDownCapture=false;this._updateTouchBehavior();this.setPosition(this.value);this._addHandlers();this.setTheme()},_updateTouchBehavior:function(){this.isTouchDevice=a.jqx.mobile.isTouchDevice();if(this.touchMode==true){this.isTouchDevice=
true;a.jqx.mobile.setMobileSimulator(this.btnThumb[0]);this._removeHandlers();this._addHandlers();this.setTheme()}else if(this.touchMode==false)this.isTouchDevice=false},_addHandlers:function(){var d=this;if(d.isTouchDevice){this.addHandler(this.btnThumb,"touchend",function(g){var h=d.vertical?d.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):d.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");var i=d.toThemeProperty("jqx-fill-state-pressed");d.btnThumb.removeClass(h);d.btnThumb.removeClass(i);
if(!d.disabled)d.handlemouseup(d,g)});this.addHandler(this.btnThumb,"touchstart",function(g){if(!d.disabled){if(d.touchMode==true){g.clientX=g.originalEvent.clientX;g.clientY=g.originalEvent.clientY}else{var h=g;if(h.originalEvent.touches&&h.originalEvent.touches.length){g.clientX=h.originalEvent.touches[0].clientX;g.clientY=h.originalEvent.touches[0].clientY}}d.handlemousedown(g)}});a.jqx.mobile.touchScroll(this.element,d.max,function(m,l,h,g,i){if(d.host.css("visibility")=="visible"){if(d.touchMode==
true){i.clientX=i.originalEvent.clientX;i.clientY=i.originalEvent.clientY}else{var k=i;if(k.originalEvent.touches&&k.originalEvent.touches.length){i.clientX=k.originalEvent.touches[0].clientX;i.clientY=k.originalEvent.touches[0].clientY}}var j=d.vertical?d.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):d.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");d.btnThumb.addClass(j);d.btnThumb.addClass(d.toThemeProperty("jqx-fill-state-pressed"));d.handlemousemove(i)}})}this.addHandler(this.btnUp,
"click",function(g){if(d.buttonUpCapture&&!d.isTouchDevice){if(!d.disabled)d.setPosition(d.value-d.step)}else if(!d.disabled&&d.isTouchDevice)d.setPosition(d.value-d.step)});this.addHandler(this.btnDown,"click",function(g){if(d.buttonDownCapture&&!d.isTouchDevice){if(!d.disabled)d.setPosition(d.value+d.step)}else if(!d.disabled&&d.isTouchDevice)d.setPosition(d.value+d.step)});if(!this.isTouchDevice){if(document.referrer!=""||window.frameElement)if(window.top!=null&&window.top!=window.self){if(window.parent&&
document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var e=function(g){if(!d.disabled)d.handlemouseup(d,g)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",e,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",e)}}this.addHandler(this.btnDown,"mouseup",function(g){if(!d.btnDownInstance.base.disabled&&d.buttonDownCapture){d.buttonDownCapture=false;d.btnDown.removeClass(d.toThemeProperty("jqx-scrollbar-button-state-pressed"));
d.btnDown.removeClass(d.toThemeProperty("jqx-fill-state-pressed"));d._removeArrowClasses("pressed","down");d.handlemouseup(d,g);d.setPosition(d.value+d.step);return false}});this.addHandler(this.btnUp,"mouseup",function(g){if(!d.btnUpInstance.base.disabled&&d.buttonUpCapture){d.buttonUpCapture=false;d.btnUp.removeClass(d.toThemeProperty("jqx-scrollbar-button-state-pressed"));d.btnUp.removeClass(d.toThemeProperty("jqx-fill-state-pressed"));d._removeArrowClasses("pressed","up");d.handlemouseup(d,g);
d.setPosition(d.value-d.step);return false}});this.addHandler(this.btnDown,"mousedown",function(g){if(!d.btnDownInstance.base.disabled){d.buttonDownCapture=true;d.btnDown.addClass(d.toThemeProperty("jqx-fill-state-pressed"));d.btnDown.addClass(d.toThemeProperty("jqx-scrollbar-button-state-pressed"));d._addArrowClasses("pressed","down");return false}});this.addHandler(this.btnUp,"mousedown",function(g){if(!d.btnUpInstance.base.disabled){d.buttonUpCapture=true;d.btnUp.addClass(d.toThemeProperty("jqx-fill-state-pressed"));
d.btnUp.addClass(d.toThemeProperty("jqx-scrollbar-button-state-pressed"));d._addArrowClasses("pressed","up");return false}})}var c="click";if(this.isTouchDevice)c="touchend";this.addHandler(this.areaUp,c,function(g){if(!d.disabled){d.setPosition(d.value-d.largestep);return false}});this.addHandler(this.areaDown,c,function(g){if(!d.disabled){d.setPosition(d.value+d.largestep);return false}});this.addHandler(this.areaUp,"mousedown",function(g){if(!d.disabled)return false});this.addHandler(this.areaDown,
"mousedown",function(g){if(!d.disabled)return false});this.addHandler(this.btnThumb,"mousedown",function(g){if(!d.disabled)d.handlemousedown(g);return false});this.addHandler(this.btnThumb,"dragstart",function(g){return false});this.addHandler(a(document),"mouseup."+this.element.id,function(g){if(!d.disabled)d.handlemouseup(d,g)});if(!this.isTouchDevice){var f=function(g){if(!d.disabled)d.handlemousemove(g)};this.addHandler(a(document),"mousemove."+this.element.id,f);this.addHandler(a(document),"mouseleave."+
this.element.id,function(g){if(!d.disabled)d.handlemouseleave(g)});this.addHandler(a(document),"mouseenter."+this.element.id,function(g){if(!d.disabled)d.handlemouseenter(g)});if(!d.disabled){this.btnUp.hover(function(){if(!d.disabled&&!d.btnUpInstance.base.disabled&&d.touchMode!=true){d.btnUp.addClass(d.toThemeProperty("jqx-scrollbar-button-state-hover"));d.btnUp.addClass(d.toThemeProperty("jqx-fill-state-hover"));d._addArrowClasses("hover","up")}},function(){if(!d.disabled&&!d.btnUpInstance.base.disabled&&
d.touchMode!=true){d.btnUp.removeClass(d.toThemeProperty("jqx-scrollbar-button-state-hover"));d.btnUp.removeClass(d.toThemeProperty("jqx-fill-state-hover"));d._removeArrowClasses("hover","up")}});var b=d.toThemeProperty("jqx-scrollbar-thumb-state-hover");if(!d.vertical)b=d.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal");this.btnThumb.hover(function(){if(!d.disabled&&d.touchMode!=true){d.btnThumb.addClass(b);d.btnThumb.addClass(d.toThemeProperty("jqx-fill-state-hover"))}},function(){if(!d.disabled&&
d.touchMode!=true){d.btnThumb.removeClass(b);d.btnThumb.removeClass(d.toThemeProperty("jqx-fill-state-hover"))}});this.btnDown.hover(function(){if(!d.disabled&&!d.btnDownInstance.base.disabled&&d.touchMode!=true){d.btnDown.addClass(d.toThemeProperty("jqx-scrollbar-button-state-hover"));d.btnDown.addClass(d.toThemeProperty("jqx-fill-state-hover"));d._addArrowClasses("hover","down")}},function(){if(!d.disabled&&!d.btnDownInstance.base.disabled&&d.touchMode!=true){d.btnDown.removeClass(d.toThemeProperty("jqx-scrollbar-button-state-hover"));
d.btnDown.removeClass(d.toThemeProperty("jqx-fill-state-hover"));d._removeArrowClasses("hover","down")}})}}},destroy:function(){var b=this.btnUp;var f=this.btnDown;var d=this.btnThumb;var c=this.scrollWrap;var g=this.areaUp;var e=this.areaDown;e.removeClass();g.removeClass();f.removeClass();b.removeClass();d.removeClass();b.jqxRepeatButton("destroy");f.jqxRepeatButton("destroy");g.jqxRepeatButton("destroy");e.jqxRepeatButton("destroy");d.jqxButton("destroy");this._removeHandlers();this.host.removeClass();
this.host.removeData();this.host.remove();this.host=null;this.btnUp=null;this.btnDown=null;this.scrollWrap=null;this.areaUp=null;this.areaDown=null},_removeHandlers:function(){this.removeHandler(this.btnUp,"click");this.removeHandler(this.btnDown,"click");this.removeHandler(this.btnDown,"mouseup");this.removeHandler(this.btnUp,"mouseup");this.removeHandler(this.btnDown,"mousedown");this.removeHandler(this.btnUp,"mousedown");this.removeHandler(this.areaUp,"mousedown");this.removeHandler(this.areaDown,
"mousedown");this.removeHandler(this.areaUp,"click");this.removeHandler(this.areaDown,"click");this.removeHandler(this.btnThumb,"mousedown");this.removeHandler(this.btnThumb,"dragstart");this.removeHandler(a(document),"mouseup."+this.element.id);this.removeHandler(a(document),"mousemove."+this.element.id);this.removeHandler(a(document),"mouseleave."+this.element.id);this.removeHandler(a(document),"mouseenter."+this.element.id);this.btnUp.unbind("hover");this.btnThumb.unbind("hover");this.btnDown.unbind("hover");
var b=this},_addArrowClasses:function(c,b){if(c=="pressed")c="selected";if(c!="")c="-"+c;if(this.vertical){if(b=="up"||b==undefined)this.arrowUp.addClass(this.toThemeProperty("icon-arrow-up"+c));if(b=="down"||b==undefined)this.arrowDown.addClass(this.toThemeProperty("icon-arrow-down"+c))}else{if(b=="up"||b==undefined)this.arrowUp.addClass(this.toThemeProperty("icon-arrow-left"+c));if(b=="down"||b==undefined)this.arrowDown.addClass(this.toThemeProperty("icon-arrow-right"+c))}},_removeArrowClasses:function(c,
b){if(c=="pressed")c="selected";if(c!="")c="-"+c;if(this.vertical){if(b=="up"||b==undefined)this.arrowUp.removeClass(this.toThemeProperty("icon-arrow-up"+c));if(b=="down"||b==undefined)this.arrowDown.removeClass(this.toThemeProperty("icon-arrow-down"+c))}else{if(b=="up"||b==undefined)this.arrowUp.removeClass(this.toThemeProperty("icon-arrow-left"+c));if(b=="down"||b==undefined)this.arrowDown.removeClass(this.toThemeProperty("icon-arrow-right"+c))}},setTheme:function(){var o=this.btnUp;var m=this.btnDown;
var p=this.btnThumb;var e=this.scrollWrap;var g=this.areaUp;var h=this.areaDown;var f=this.arrowUp;var i=this.arrowDown;this.scrollWrap[0].className=this.toThemeProperty("jqx-reset");this.scrollOuterWrap[0].className=this.toThemeProperty("jqx-reset");var k=this.toThemeProperty("jqx-reset");this.areaDown[0].className=k;this.areaUp[0].className=k;var d=this.toThemeProperty("jqx-scrollbar")+" "+this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content");this.element.className=d;
m[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");o[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");var q="";if(this.vertical){f[0].className=k+" "+this.toThemeProperty("icon-arrow-up");i[0].className=k+" "+this.toThemeProperty("icon-arrow-down");q=this.toThemeProperty("jqx-scrollbar-thumb-state-normal")}else{f[0].className=k+" "+this.toThemeProperty("icon-arrow-left");i[0].className=k+" "+this.toThemeProperty("icon-arrow-right");q=this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal")}q+=
" "+this.toThemeProperty("jqx-fill-state-normal");p[0].className=q;if(this.disabled){e.addClass(this.toThemeProperty("jqx-fill-state-disabled"));e.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))}else{e.addClass(this.toThemeProperty("jqx-scrollbar-state-normal"));e.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))}if(this.roundedCorners=="all")if(this.vertical){var j=a.jqx.cssroundedcorners("top");j=this.toThemeProperty(j);o.addClass(j);var c=a.jqx.cssroundedcorners("bottom");
c=this.toThemeProperty(c);m.addClass(c)}else{var n=a.jqx.cssroundedcorners("left");n=this.toThemeProperty(n);o.addClass(n);var l=a.jqx.cssroundedcorners("right");l=this.toThemeProperty(l);m.addClass(l)}else{var b=a.jqx.cssroundedcorners(this.roundedCorners);b=this.toThemeProperty(b);elBtnUp.addClass(b);elBtnDown.addClass(b)}var b=a.jqx.cssroundedcorners(this.roundedCorners);b=this.toThemeProperty(b);if(!p.hasClass(b))p.addClass(b);if(this.isTouchDevice&&this.touchModeStyle!=false){this.showButtons=
false;p.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch"))}},isScrolling:function(){if(this.thumbCapture==undefined||this.buttonDownCapture==undefined||this.buttonUpCapture==undefined)return false;return this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture},handlemousedown:function(c){if(this.thumbCapture==undefined||this.thumbCapture==false){this.thumbCapture=true;var b=this.btnThumb;if(b!=null){b.addClass(this.toThemeProperty("jqx-fill-state-pressed"));if(this.vertical)b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"));
else b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"))}}this.dragStartX=c.clientX;this.dragStartY=c.clientY;this.dragStartValue=this.value},toggleHover:function(c,b){},refresh:function(){this._arrange()},_setElementPosition:function(c,b,d){if(!isNaN(b))if(parseInt(c[0].style.left)!=parseInt(b))c[0].style.left=b+"px";if(!isNaN(d))if(parseInt(c[0].style.top)!=parseInt(d))c[0].style.top=d+"px"},_setElementTopPosition:function(b,c){if(!isNaN(c))b[0].style.top=c+"px"},_setElementLeftPosition:function(c,
b){if(!isNaN(b))c[0].style.left=b+"px"},handlemouseleave:function(e){var b=this.btnUp;var d=this.btnDown;b.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));this._removeArrowClasses("pressed");if(this.thumbCapture!=true)return;var c=this.btnThumb;var f=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");c.removeClass(f);
c.removeClass(this.toThemeProperty("jqx-fill-state-pressed"))},handlemouseenter:function(e){var b=this.btnUp;var d=this.btnDown;if(this.buttonUpCapture){b.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));b.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._addArrowClasses("pressed","up")}if(this.buttonDownCapture){d.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));d.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._addArrowClasses("pressed",
"down")}if(this.thumbCapture!=true)return;var c=this.btnThumb;if(this.vertical)c.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"));else c.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"));c.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},handlemousemove:function(b){var h=this.btnUp;var d=this.btnDown;var c=0;if(d==null||h==null)return;if(h!=null&&d!=null&&this.buttonDownCapture!=undefined&&this.buttonUpCapture!=undefined)if(this.buttonDownCapture&&
b.which==c){d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));d.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._removeArrowClasses("pressed","down");this.buttonDownCapture=false}else if(this.buttonUpCapture&&b.which==c){h.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));h.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._removeArrowClasses("pressed","up");this.buttonUpCapture=false}if(this.thumbCapture!=true)return false;
var j=this.btnThumb;if(b.which==c&&!this.isTouchDevice){this.thumbCapture=false;this._arrange();var i=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");j.removeClass(i);j.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));return true}if(b.preventDefault!=undefined)b.preventDefault();if(b.originalEvent!=null)b.originalEvent.mouseHandled=true;if(b.stopPropagation!=undefined)b.stopPropagation();var k=
0;try{if(!this.vertical)k=b.clientX-this.dragStartX;else k=b.clientY-this.dragStartY;var e=this._btnAndThumbSize;if(!this._btnAndThumbSize)e=this.vertical?h.height()+d.height()+j.height():h.width()+d.width()+j.width();var f=(this.max-this.min)/(this.scrollBarSize-e);k*=f;this.setPosition(this.dragStartValue+k)}catch(g){alert(g)}return false},handlemouseup:function(d,h){var c=false;try{d._mouseup=new Date}catch(f){}if(this.thumbCapture){this.thumbCapture=false;var e=this.btnThumb;var i=this.vertical?
this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");e.removeClass(i);e.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));c=true}if(this.buttonUpCapture||this.buttonDownCapture){var b=this.btnUp;var g=this.btnDown;this.buttonUpCapture=false;this.buttonDownCapture=false;b.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));g.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed"));
b.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));g.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._removeArrowClasses("pressed");c=true}if(c){if(h.preventDefault!=undefined)h.preventDefault();if(h.originalEvent!=null)h.originalEvent.mouseHandled=true;if(h.stopPropagation!=undefined)h.stopPropagation()}},setPosition:function(b,g){var d=this.element;if(b==undefined||b==NaN)b=this.min;if(b>=this.max)b=this.max;if(b<this.min)b=this.min;if(this.value!==b||g==true){if(b==
this.max){var c=new jQuery.Event("complete");this.host.trigger(c)}var f=this.value;if(this._triggervaluechanged){var e=new jQuery.Event("valuechanged");e.previousValue=this.value;e.currentValue=b}this.value=b;this._positionelements();if(this._triggervaluechanged)this.host.trigger(e);if(this.valuechanged)this.valuechanged({currentValue:this.value,previousvalue:f})}return b},_getThumbSize:function(b){var d=this.max-this.min;var c=0;if(d>1)c=b/(d+b)*b;else if(d==1)c=b;if(this.thumbSize>0)c=this.thumbSize;
if(c<this.thumbMinSize)c=this.thumbMinSize;return Math.min(c,b)},_positionelements:function(){var g=this.element;var n=this.areaUp;var e=this.areaDown;var h=this.btnUp;var f=this.btnDown;var o=this.btnThumb;var b=this.scrollWrap;var p=this._height?this._height:this.host.height();var c=this._width?this._width:this.host.width();var l=!this.vertical?p:c;if(!this.showButtons)l=0;var m=!this.vertical?c:p;this.scrollBarSize=m;var d=this._getThumbSize(m-2*l);d=Math.round(d);if(d<this.thumbMinSize)d=this.thumbMinSize;
if(p==NaN||p<10)p=10;if(c==NaN||c<10)c=10;l+=2;this.btnSize=l;var i=this._btnAndThumbSize;if(!this._btnAndThumbSize){var i=this.vertical?2*this.btnSize+o.outerHeight():2*this.btnSize+o.outerWidth();i=Math.round(i)}var k=(m-i)/(this.max-this.min)*(this.value-this.min);k=Math.round(k);if(this.vertical){var j=m-k-i;if(j<0)j=0;e[0].style.height=j+"px";n[0].style.height=k+"px";this._setElementTopPosition(n,l);this._setElementTopPosition(o,l+k);this._setElementTopPosition(e,l+k+d)}else{n[0].style.width=
k+"px";e[0].style.width=m-k-i+"px";this._setElementLeftPosition(n,l);this._setElementLeftPosition(o,l+k);this._setElementLeftPosition(e,2+l+k+d)}},_arrange:function(){var d=this.element;var g=this.areaUp;var q=this.areaDown;var c=this.btnUp;var k=this.btnDown;var r=this.btnThumb;var n=this.scrollWrap;var l=parseInt(this.element.style.height);var o=parseInt(this.element.style.width);if(isNaN(l))l=0;if(isNaN(o))o=0;this._width=o;this._height=l;var b=!this.vertical?l:o;if(!this.showButtons)b=0;c[0].style.width=
b+"px";c[0].style.height=b+"px";k[0].style.width=b+"px";k[0].style.height=b+"px";if(this.vertical)n[0].style.width=o+2+"px";else n[0].style.height=l+2+"px";this._setElementPosition(c,0,0);if(this.vertical)this._setElementPosition(k,0,l-k.outerHeight());else this._setElementPosition(k,o-k.outerWidth(),0);var e=!this.vertical?o:l;this.scrollBarSize=e;var h=this._getThumbSize(e-2*b);h=Math.round(h);if(h<this.thumbMinSize)h=this.thumbMinSize;var m=false;if(this.isTouchDevice&&this.touchModeStyle!=false)m=
true;if(!this.vertical){r[0].style.width=h+"px";r[0].style.height=l+"px";if(m){r.css({height:this.thumbTouchSize+"px"});r.css("margin-top",(this.host.height()-this.thumbTouchSize)/2)}}else{r[0].style.width=o+"px";r[0].style.height=h+"px";if(m){r.css({width:this.thumbTouchSize+"px"});r.css("margin-left",(this.host.width()-this.thumbTouchSize)/2)}}if(l==NaN||l<10)l=10;if(o==NaN||o<10)o=10;b+=2;this.btnSize=b;var f=this.vertical?2*this.btnSize+(2+parseInt(r[0].style.height)):2*this.btnSize+(2+parseInt(r[0].style.width));
f=Math.round(f);this._btnAndThumbSize=f;var t=(e-f)/(this.max-this.min)*(this.value-this.min);t=Math.round(t);if(t===-Infinity||t==Infinity)t=0;if(isNaN(t))t=0;if(this.vertical){var s=e-t-f;if(s<0)s=0;q[0].style.height=s+"px";q[0].style.width=o+"px";g[0].style.height=t+"px";g[0].style.width=o+"px";var i=parseInt(this.host.height());r[0].style.visibility="inherit";if(i-3*parseInt(b)<0)r[0].style.visibility="hidden";else if(i<f)r[0].style.visibility="hidden";else if(this.element.style.visibility=="visible")r[0].style.visibility=
"inherit";this._setElementPosition(g,0,b);this._setElementPosition(r,0,b+t);this._setElementPosition(q,0,b+t+h)}else{g[0].style.width=t+"px";g[0].style.height=l+"px";var j=e-t-f;if(j<0)j=0;q[0].style.width=j+"px";q[0].style.height=l+"px";var p=parseInt(this.host.width());r[0].style.visibility="inherit";if(p-3*parseInt(b)<0)r[0].style.visibility="hidden";else if(p<f)r[0].style.visibility="hidden";else if(this.element.style.visibility=="visible")r[0].style.visibility="inherit";this._setElementPosition(g,
b,0);this._setElementPosition(r,b+t,0);this._setElementPosition(q,2+b+t+h,0)}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxPanel","",{});a.extend(a.jqx._jqxPanel.prototype,{defineInstance:function(){this.width=null;this.height=null;this.disabled=false;this.scrollBarSize=15;this.sizeMode="fixed";this.autoUpdate=false;this.autoUpdateInterval=500;this.touchMode="auto";this.horizontalScrollBarMax=null;this.verticalScrollBarMax=null;this.touchModeStyle="auto";this.events=["layout"]},createInstance:function(d){var b=this;this.host.addClass(this.toThemeProperty("jqx-panel"));this.host.addClass(this.toThemeProperty("jqx-widget"));
this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));var c=a("<div tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='panelWrapper' tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; overflow: hidden; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='panelContent' tabIndex=0 style='-webkit-appearance: none; outline: none; border: none; padding: 0px; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div>");
var g=this.host.css("height");var i=this.host.css("width");if(this.width==null)this.width=i;if(this.height==null)this.height=g;this.host.wrapInner(c);var h=this.host.find("#verticalScrollBar");h[0].id=this.element.id+"verticalScrollBar";this.vScrollBar=h.jqxScrollBar({vertical:true,touchMode:this.touchMode,theme:this.theme});var f=this.host.find("#horizontalScrollBar");f[0].id=this.element.id+"horizontalScrollBar";this.hScrollBar=f.jqxScrollBar({vertical:false,touchMode:this.touchMode,theme:this.theme});
this.wrapper=this.host.find("#panelWrapper");this.wrapper[0].id=this.wrapper[0].id+this.element.id;this.content=this.host.find("#panelContent");this.content.addClass(this.toThemeProperty("jqx-widget-content"));if(a.browser.msie);this.content[0].id=this.content[0].id+this.element.id;this.bottomRight=this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-panel-bottomright"));this.bottomRight[0].id="bottomRight"+this.element.id;this.vScrollBar.css("visibility","visible");this.hScrollBar.css("visibility",
"visible");this.vScrollInstance=a.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=a.data(this.hScrollBar[0],"jqxScrollBar").instance;var e=this;this.propertyChangeMap.disabled=function(j,l,k,m){e.vScrollBar.jqxScrollBar({disabled:e.disabled});e.hScrollBar.jqxScrollBar({disabled:e.disabled})};this.vScrollBar.jqxScrollBar({disabled:this.disabled});this.hScrollBar.jqxScrollBar({disabled:this.disabled});this._addHandlers();this._arrange();a(window).resize(function(){b._arrange()});
this.contentWidth=e.content[0].scrollWidth;this.contentHeight=e.content[0].scrollHeight;if(this.autoUpdate)e._autoUpdate();this.propertyChangeMap.autoUpdate=function(j,l,k,m){if(e.autoUpdate)e._autoUpdate();else{clearInterval(e.autoUpdateId);e.autoUpdateId=null}};a(window).bind("unload",function(){if(e.autoUpdateId!=null){clearInterval(e.autoUpdateId);e.autoUpdateId=null;e.destroy()}});this._updateTouchScrolling()},_updateTouchScrolling:function(){var b=this;if(this.touchMode==true)a.jqx.mobile.setMobileSimulator(this.element);
var c=this.isTouchDevice();if(c)a.jqx.mobile.touchScroll(this.element,b.vScrollInstance.max,function(f,e){if(b.vScrollBar.css("visibility")=="visible"){var d=b.vScrollInstance.value;b.vScrollInstance.setPosition(d+e)}if(b.hScrollBar.css("visibility")=="visible"){var d=b.hScrollInstance.value;b.hScrollInstance.setPosition(d+f)}},this.element.id);this.vScrollBar.jqxScrollBar({touchMode:this.touchMode});this.hScrollBar.jqxScrollBar({touchMode:this.touchMode})},isTouchDevice:function(){var b=a.jqx.mobile.isTouchDevice();
if(this.touchMode==true)b=true;else if(this.touchMode==false)b=false;if(b&&this.touchModeStyle!=false)this.scrollBarSize=10;return b},append:function(b){if(b!=null){this.content.append(b);this._arrange()}},setcontent:function(b){this.content[0].innerHTML=b},prepend:function(b){if(b!=null){this.content.prepend(b);this._arrange()}},clearcontent:function(){this.content.text("");this.content.children().remove();this._arrange()},remove:function(b){if(b!=null){a(b).remove();this._arrange()}},_autoUpdate:function(){var b=
this;this.autoUpdateId=setInterval(function(){var d=b.content[0].scrollWidth;var c=b.content[0].scrollHeight;var e=false;if(b.contentWidth!=d){b.contentWidth=d;e=true}if(b.contentHeight!=c){b.contentHeight=c;e=true}if(e)b._arrange()},this.autoUpdateInterval)},_addHandlers:function(){var b=this;this.addHandler(this.vScrollBar,"valuechanged",function(c){b._render(b)});this.addHandler(this.hScrollBar,"valuechanged",function(c){b._render(b)});this.addHandler(this.host,"mousewheel",function(c){b.wheel(c,
b)});this.addHandler(this.content,"mouseleave",function(c){b.focused=false});this.addHandler(this.content,"focus",function(c){b.focused=true});this.addHandler(this.content,"blur",function(c){b.focused=false});this.addHandler(this.content,"mouseenter",function(c){b.focused=true})},_removeHandlers:function(){var b=this;this.removeHandler(this.vScrollBar,"valuechanged");this.removeHandler(this.hScrollBar,"valuechanged");this.removeHandler(this.host,"mousewheel");this.removeHandler(this.content,"mouseleave");
this.removeHandler(this.content,"focus");this.removeHandler(this.content,"blur");this.removeHandler(this.content,"mouseenter")},wheel:function(d,c){var e=0;if(d.originalEvent&&a.browser.msie&&d.originalEvent.wheelDelta)e=d.originalEvent.wheelDelta/120;if(!d)d=window.event;if(d.wheelDelta)e=d.wheelDelta/120;else if(d.detail)e=-d.detail/3;if(e){var b=c._handleDelta(e);if(!b)if(d.preventDefault)d.preventDefault();if(!b)return b;else return false}if(d.preventDefault)d.preventDefault();d.returnValue=false},
scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return false;var b=this.vScrollInstance;if(b.value+b.largestep<=b.max){b.setPosition(b.value+b.largestep);return true}else if(b.value+b.largestep!=b.max){b.setPosition(b.max);return true}return false},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return false;var b=this.vScrollInstance;if(b.value-b.largestep>=b.min){b.setPosition(b.value-b.largestep);return true}else if(b.value-b.largestep!=b.min){b.setPosition(b.min);
return true}return false},_handleDelta:function(d){if(this.focused){var c=this.vScrollInstance.value;if(d<0)this.scrollDown();else this.scrollUp();var b=this.vScrollInstance.value;if(c!=b)return false}return true},_render:function(c){if(c==undefined)c=this;var b=c.vScrollInstance.value;var d=c.hScrollInstance.value;c.content.css({left:-d,top:-b})},scrollTo:function(c,b){if(c==undefined||b==undefined)return;this.vScrollInstance.setPosition(b);this.hScrollInstance.setPosition(c)},getScrollHeight:function(){return this.vScrollInstance.max},
getVScrollPosition:function(){return this.vScrollInstance.value},getScrollWidth:function(){return this.hScrollInstance.max},getHScrollPosition:function(){return this.hScrollInstance.value},_arrange:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&
!isNaN(this.height))this.host.height(this.height);if(this.width!=null&&this.width.toString().indexOf("%")!=-1)this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("%")!=-1)this.host.height(this.height);if(this.width!=null&&this.width.toString().indexOf("auto")!=-1)this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("auto")!=-1)this.host.height(this.height);this.content.css("margin-right","0px");var o=null;var l=null;if(a.browser.msie&&a.browser.version<
10){var q=parseInt(this.content.css("left"));this.content.css("left",0)}var m=parseInt(this.content[0].scrollWidth);a.each(this.content.children(),function(){m=Math.max(m,a(this).outerWidth())});if(a.browser.msie&&a.browser.version<10)this.content.css("left",q);if(m<parseInt(this.host.width()))m=parseInt(this.host.width());var p=parseInt(this.content[0].scrollHeight);if(this.sizeMode=="wrap"){this.host.width(m);this.host.height(p);this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility",
"hidden");return}var g=4+parseInt(this.scrollBarSize);var s=g+p-parseInt(this.host.height());var h=g+m-parseInt(this.host.width());if(this.horizontalScrollBarMax!=undefined)h=this.horizontalScrollBarMax;if(this.verticalScrollBarMax!=undefined)s=this.verticalScrollBarMax;var c=0;if(s>g){if(h<=0)s=p-parseInt(this.host.height());this.vScrollBar.jqxScrollBar({max:s});this.vScrollBar.css("visibility","visible")}else{this.vScrollBar.jqxScrollBar("setPosition",0);this.vScrollBar.css("visibility","hidden")}if(h>
g+c){if(s<=0&&this.horizontalScrollBarMax==undefined)h=m-parseInt(this.host.width());if(a.browser.msie&&a.browser.version>=8)if(h-10<=g+c){this.hScrollBar.css("visibility","hidden");this.hScrollBar.jqxScrollBar("setPosition",0)}else{this.hScrollBar.jqxScrollBar({max:h});this.hScrollBar.css("visibility","visible")}else if(a.browser.msie&&a.browser.version<8)if(h-20<=g+c){this.hScrollBar.css("visibility","hidden");this.hScrollBar.jqxScrollBar("setPosition",0)}else{this.hScrollBar.jqxScrollBar({max:h});
this.hScrollBar.css("visibility","visible")}else{this.hScrollBar.jqxScrollBar({max:h});this.hScrollBar.css("visibility","visible")}}else{this.hScrollBar.css("visibility","hidden");this.hScrollBar.jqxScrollBar("setPosition",0);if(this.vScrollBar.css("visibility")=="visible"){var r=this;r.content.css("margin-right",g)}}if(this.width!=null&&this.width.toString().indexOf("px")!=-1)o=this.width;else if(this.width!=undefined&&!isNaN(this.width))o=this.width;if(this.height!=null&&this.height.toString().indexOf("px")!=
-1)l=this.height;else if(this.height!=undefined&&!isNaN(this.height))l=this.height;if(this.width!=null&&this.width.toString().indexOf("%")!=-1)o=this.host.width();if(this.height!=null&&this.height.toString().indexOf("%")!=-1)l=this.host.height();var d=this.host.css("border-width");if(d==null)d=0;if(o!=null){o=parseInt(o);this.host.width(this.width)}if(l!=null){l=parseInt(l);this.host.height(this.height)}var b=this.scrollBarSize;if(isNaN(b)){b=parseInt(b);if(isNaN(b))b="17px";else b=b+"px"}b=parseInt(b);
var j=4;var e=2;var f=0;if(this.vScrollBar.css("visibility")=="visible")f=b+j;if(this.hScrollBar.css("visibility")=="visible")e=b+j;this.hScrollBar.height(b);this.hScrollBar.css({top:l-j-b+"px",left:"0px"});this.hScrollBar.width(o-b-j+"px");if(f==0)this.hScrollBar.width(o-2);if(this.vScrollBar.css("visibility")!="hidden")this.vScrollBar.width(b);else this.vScrollBar.width(0);this.vScrollBar.height(parseInt(l)-e+"px");this.vScrollBar.css({left:parseInt(o)-parseInt(b)-j+"px",top:"0px"});var i=this.vScrollInstance;
i.disabled=this.disabled;i.refresh();var n=this.hScrollInstance;n.disabled=this.disabled;n.refresh();if(this.vScrollBar.css("visibility")=="visible"&&this.hScrollBar.css("visibility")=="visible"){this.bottomRight.css("visibility","visible");this.bottomRight.css({left:1+parseInt(this.vScrollBar.css("left")),top:1+parseInt(this.hScrollBar.css("top"))});this.bottomRight.width(parseInt(b)+3);this.bottomRight.height(parseInt(b)+3)}else this.bottomRight.css("visibility","hidden");this._raiseevent(0);var k=
this;if(this.sizeMode=="horizontalwrap"){this.host.width(m);this.vScrollBar.css({left:this.host.width()-parseInt(b)-j+"px",top:"0px"});this.hScrollBar.css("visibility","hidden")}else if(this.sizeMode=="verticalwrap"){this.host.height(p);if(this.hScrollBar.css("visibility")=="visible"){p+=20;this.host.height(p)}this.hScrollBar.css({top:p-j-b+"px",left:"0px"});this.vScrollBar.css("visibility","hidden")}if(this.sizeMode=="overflowy"){this.hScrollBar.css("visibility","hidden");this.content.width(this.host.width()-
f)}},destroy:function(){this._removeHandlers();a(window).unbind("unload")},_raiseevent:function(g,d,f){if(this.isInitialized!=undefined&&this.isInitialized==true){var c=this.events[g];var e=new jQuery.Event(c);e.previousValue=d;e.currentValue=f;e.owner=this;var b=this.host.trigger(e);return b}},beginUpdateLayout:function(){this.updating=true},resumeUpdateLayout:function(){this.updating=false;this.vScrollInstance.value=0;this.hScrollInstance.value=0;this._arrange();this._render()},propertyChangedHandler:function(c,
d,b,e){if(!c.isInitialized)return;if(!c.updating)if(d=="scrollBarSize"||d=="width"||d=="height")c._arrange();if(d=="touchMode")if(e!="auto")c._updateTouchScrolling();if(d=="theme"){c.host.removeClass();c.host.addClass(this.toThemeProperty("jqx-panel"));c.host.addClass(this.toThemeProperty("jqx-widget"));c.host.addClass(this.toThemeProperty("jqx-widget-content"));c.host.addClass(this.toThemeProperty("jqx-rc-all"));c.vScrollBar.jqxScrollBar({theme:this.theme});c.hScrollBar.jqxScrollBar({theme:this.theme});
c.bottomRight.removeClass();c.bottomRight.addClass(this.toThemeProperty("jqx-panel-bottomright"));c.content.removeClass();c.content.addClass(this.toThemeProperty("jqx-widget-content"))}},refresh:function(){}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxTooltip","",{});a.extend(a.jqx._jqxTooltip.prototype,{defineInstance:function(){this.width="auto";this.height="auto";this.position="default";this.enableBrowserBoundsDetection=true;this.content="";this.left=0;this.top=0;this.absolutePositionX=0;this.absolutePositionY=0;this.trigger="hover";this.showDelay=100;this.autoHide=true;this.autoHideDelay=3E3;this.closeOnClick=true;this.disabled=false;this.animationShowDelay=200;this.animationHideDelay="fast";this.showArrow=
true;this.name="";this.opacity=0.9;this._isOpen=false;this._eventsMap={mousedown:"touchstart",mouseup:"touchend"};this.events=["open","close","opening","closing"]},createInstance:function(d){this._isTouchDevice=a.jqx.mobile.isTouchDevice();var f=a.data(document.body,"_tooltipIDArray"+this.name);if(!f){this.ID_Array=new Array;a.data(document.body,"_tooltipIDArray"+this.name,this.ID_Array)}else this.ID_Array=f;var e=this._generatekey();var c="jqxtooltip"+e;this.ID_Array.push({tooltipID:c,tooltipHost:this.host});
var b=a('<div id="'+c+'"><div id ="'+c+'Main"><div id="'+c+'Text"></div></div><div id="'+c+'Arrow"></div></div>');a("body").append(b);this._setTheme();var g=a("#"+c);g.css("visibility","hidden");g.css("opacity",0);g.css("z-index",9999);if(this.showArrow==false)a("#"+c+"Arrow").css("visibility","hidden");this._setSize();this._setContent();this._initialPosition();if(this.disabled==false){this._trigger();if(this.closeOnClick==true)this._clickHide()}},open:function(){if(this.disabled==false&&this._id()!=
"removed")if(this.position=="mouse"||this.position=="mouseenter"){var b=this.position;this.position="default";this._setPosition();this._animateShow();this.position=b}else{this._raiseEvent("2");this._setPosition();this._animateShow()}},close:function(c){var d=this;if(c==undefined)c=this.animationHideDelay;var b=(new Number(a(this._id()).css("opacity"))).toFixed(2);if(this._isOpen==true&&b==this.opacity){clearTimeout(this.autoHideTimeout);this._raiseEvent("3");a(this._id()).animate({opacity:0},c,function(){a(d._id()).css("visibility",
"hidden");d._raiseEvent("1");d._isOpen=false})}},destroy:function(){var c=this.ID_Array.length;this._removeHandlers();a(this._id()).remove();for(var b=0;b<c;b++)if(this.ID_Array[b].tooltipHost===this.host){this.ID_Array.splice(b,1);break}a(this.element).removeData("jqxTooltip")},refresh:function(d){if(d==true)return;var c=this;var b=(new Number(a(this._id()).css("opacity"))).toFixed(2);if(this._id()!="removed"){if(this.disabled==true&&this._isOpen==true&&b==this.opacity){clearTimeout(this.autoHideTimeout);
a(this._id()).stop();a(this._id()).animate({opacity:0},this.animationHideDelay,function(){a(c._id()).css("visibility","hidden");c._isOpen=false})}this._setTheme();this._setSize();this._setContent();this._removeHandlers();if(this.disabled==false){this._trigger();if(this.closeOnClick==true)this._clickHide()}}},propertyChangedHandler:function(b,c,e,d){b.refresh()},_raiseEvent:function(g,e){var c=this.events[g];var f=new jQuery.Event(c);f.owner=this;f.args=e;try{var b=this.host.trigger(f)}catch(d){}return b},
_generatekey:function(){var b=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return b()+b()},_id:function(){var b,c;var e=this.ID_Array.length;for(var d=0;d<e;d++)if(this.ID_Array[d].tooltipHost===this.host){b=this.ID_Array[d].tooltipID;c="#"+b;break}if(c==undefined)c="removed";return c},_setPosition:function(e){if(this._isOpen==false&&a(this._id()).css("opacity")==0){this.documentTop=a(document).scrollTop();this.documentLeft=a(document).scrollLeft();this.windowWidth=a(window).width();
this.windowHeight=a(window).height();this.host_width=this.host.outerWidth();this.host_height=this.host.outerHeight();this.tooltip_width=a(this._id()).width();this.tooltip_height=a(this._id()).height();this.host_offset=this.host.offset();this.tooltip_offset=a(this._id()).offset();this.default_offset=30;this.offset_horizontal=parseInt(this.left);this.offset_vertical=parseInt(this.top);var c=a(this._id()+"Arrow");var f=a(this._id()+"Main");this.arrow_size=5;this.tooltip_main_offset=f.offset();this.tooltip_arrow_offset;
switch(this.position){case "top":this.tooltip_offset.left=this.host_offset.left+this.host_width/2-this.tooltip_width/2+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top-this.tooltip_height-this.arrow_size+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px  0px"});this.tooltip_arrow_offset=
c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+(f.width()/2-this.arrow_size);this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height();c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "bottom":this.tooltip_offset.left=this.host_offset.left+this.host_width/2-this.tooltip_width/2+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top+this.host_height+this.arrow_size+this.offset_vertical;this._detectBrowserBounds();
this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":"0 "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+(f.width()/2-this.arrow_size);this.tooltip_arrow_offset.top=this.tooltip_main_offset.top-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});
break;case "left":this.tooltip_offset.left=-1+this.host_offset.left-this.tooltip_width-this.arrow_size+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top+this.host_height/2-this.tooltip_height/2+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.css({"border-width":this.arrow_size+"px 0px "+this.arrow_size+"px "+this.arrow_size+
"px"});this.tooltip_main_offset=f.offset();this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=1+this.tooltip_main_offset.left+f.width();this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height()/2-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "right":this.tooltip_offset.left=this.host_offset.left+this.host_width+this.arrow_size+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top+this.host_height/
2-this.tooltip_height/2+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px "+this.arrow_size+"px 0px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left-this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height()/
2-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "top-left":this.tooltip_offset.left=this.host_offset.left+this.default_offset-this.tooltip_width+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top-this.tooltip_height-this.arrow_size+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));
c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px  0px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+f.width()-6*this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height();c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "bottom-left":this.tooltip_offset.left=this.host_offset.left+this.default_offset-this.tooltip_width+this.offset_horizontal;this.tooltip_offset.top=
this.host_offset.top+this.host_height+this.arrow_size+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":"0 "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+f.width()-6*this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top-
this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "top-right":this.tooltip_offset.left=this.host_offset.left+this.host_width-this.default_offset+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top-this.tooltip_height-this.arrow_size+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));
c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px  0px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+4*this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height();c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break;case "bottom-right":this.tooltip_offset.left=this.host_offset.left+this.host_width-this.default_offset+this.offset_horizontal;this.tooltip_offset.top=this.host_offset.top+
this.host_height+this.arrow_size+this.offset_vertical;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":"0 "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+4*this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,
left:this.tooltip_arrow_offset.left});break;case "absolute":a(this._id()).offset({top:this.absolutePositionY,left:this.absolutePositionX});c.css({"border-width":"0px"});break;case "mouse":var d=this;if(this._isTouchDevice==false)switch(this.trigger){case "hover":if(this.mouseHoverTimeout)clearTimeout(this.mouseHoverTimeout);this.mouseHoverTimeout=setTimeout(function(){d.tooltip_offset.left=e.pageX+10;d.tooltip_offset.top=e.pageY+10;d._detectBrowserBounds()},this.showDelay);break;case "click":this.tooltip_offset.left=
e.pageX+10;this.tooltip_offset.top=e.pageY+10;this._detectBrowserBounds();break}else{this.tooltip_offset.left=e.pageX+10;this.tooltip_offset.top=e.pageY+10;this._detectBrowserBounds()}c.css({"border-width":"0px"});break;case "mouseenter":var b={top:e.pageY,left:e.pageX};if(b.top<this.host_offset.top+10&&b.top>this.host_offset.top-10){this.tooltip_offset.left=b.left-this.tooltip_width/2;this.tooltip_offset.top=this.host_offset.top-this.tooltip_height-this.arrow_size;this._detectBrowserBounds();this.tooltip_main_offset=
f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px  0px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+(f.width()/2-this.arrow_size);this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height();c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left})}else if(b.top<this.host_offset.top+
this.host_height+10&&b.top>this.host_offset.top+this.host_height-10){this.tooltip_offset.left=b.left-this.tooltip_width/2;this.tooltip_offset.top=this.host_offset.top+this.host_height+this.arrow_size;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":"0 "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=
this.tooltip_main_offset.left+(f.width()/2-this.arrow_size);this.tooltip_arrow_offset.top=this.tooltip_main_offset.top-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left})}else if(b.left<this.host_offset.left+10&&b.left>this.host_offset.left-10){this.tooltip_offset.left=this.host_offset.left-this.tooltip_width-this.arrow_size;this.tooltip_offset.top=b.top-this.tooltip_height/2;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));
c.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.css({"border-width":this.arrow_size+"px 0px "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_main_offset=f.offset();this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+f.width();this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height()/2-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left})}else if(b.left<this.host_offset.left+
this.host_width+10&&b.left>this.host_offset.left+this.host_width-10){this.tooltip_offset.left=this.host_offset.left+this.host_width+this.arrow_size;this.tooltip_offset.top=b.top-this.tooltip_height/2;this._detectBrowserBounds();this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.css({"border-width":this.arrow_size+"px "+this.arrow_size+"px "+this.arrow_size+"px 0px"});this.tooltip_main_offset=
f.offset();this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left-this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top+f.height()/2-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left})}break;case "default":this.tooltip_offset.left=this.host_offset.left+this.host_width-this.default_offset;this.tooltip_offset.top=this.host_offset.top+this.host_height+this.arrow_size;this._detectBrowserBounds();
this.tooltip_main_offset=f.offset();c.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r"));c.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b"));c.css({"border-width":"0 "+this.arrow_size+"px "+this.arrow_size+"px"});this.tooltip_arrow_offset=c.offset();this.tooltip_arrow_offset.left=this.tooltip_main_offset.left+4*this.arrow_size;this.tooltip_arrow_offset.top=this.tooltip_main_offset.top-this.arrow_size;c.offset({top:this.tooltip_arrow_offset.top,left:this.tooltip_arrow_offset.left});break}}},
_setContent:function(){a(this._id()+"Text").html(this.content)},_animateShow:function(){this._closeAll();clearTimeout(this.autoHideTimeout);var b=(new Number(a(this._id()).css("opacity"))).toFixed(2);if(this._isOpen==false&&b==0){var c=this;var d=a(this._id());d.css("visibility","visible");d.stop();d.css("opacity",0);d.animate({opacity:this.opacity},this.animationShowDelay,function(){c._raiseEvent("0");c._isOpen=true;var e=a.data(document.body,"_openedTooltip"+c.name);if(e){e._raiseEvent("3");e._raiseEvent("1")}c.openedTooltip=
c;a.data(document.body,"_openedTooltip"+c.name,c);if(c.autoHideTimeout)clearTimeout(c.autoHideTimeout);c.autoHideTimeout=setTimeout(function(){c._autoHide()},c.autoHideDelay)})}},_trigger:function(){if(this._id()!="removed"){this._enterFlag;this._leaveFlag;var b=this;if(this._isTouchDevice==false)switch(this.trigger){case "hover":if(this.position=="mouse"){this.addHandler(this.host,"mousemove",function(c){if(b._enterFlag==1){b._raiseEvent("2");b._setPosition(c);clearTimeout(b.hoverShowTimeout);b.hoverShowTimeout=
setTimeout(function(){b._animateShow();b._enterFlag=0},b.showDelay)}});this.addHandler(this.host,"mouseenter",function(){if(b._leaveFlag!=0)b._enterFlag=1});this.addHandler(this.host,"mouseleave",function(e){b._leaveFlag=1;clearTimeout(b.hoverShowTimeout);var f=a(b._id()).offset();var d=a(b._id()).width();var c=a(b._id()).height();if(parseInt(e.pageX)<parseInt(f.left)||parseInt(e.pageX)>parseInt(f.left)+d)b.close();if(parseInt(e.pageY)<parseInt(f.top)||parseInt(e.pageY)>parseInt(f.top)+c)b.close()});
this.addHandler(a(this._id()),"mouseleave",function(c){b._checkBoundariesAuto(c);if(b._clickFlag!=0&&b._autoFlag!=0)b._leaveFlag=0;else{b._leaveFlag=1;b.close()}})}else{this.addHandler(this.host,"mouseenter",function(c){clearTimeout(b.hoverShowTimeout);b.hoverShowTimeout=setTimeout(function(){b._raiseEvent("2");b._setPosition(c);b._animateShow()},b.showDelay)});this.addHandler(this.host,"mouseleave",function(e){b._leaveFlag=1;clearTimeout(b.hoverShowTimeout);var f=a(b._id()).offset();var d=a(b._id()).width();
var c=a(b._id()).height();if(parseInt(e.pageX)<parseInt(f.left)||parseInt(e.pageX)>parseInt(f.left)+d)b.close();if(parseInt(e.pageY)<parseInt(f.top)||parseInt(e.pageY)>parseInt(f.top)+c)b.close()});this.addHandler(a(this._id()),"mouseleave",function(c){b._checkBoundariesAuto(c);if(b._clickFlag!=0&&b._autoFlag!=0)b._leaveFlag=0;else{b._leaveFlag=1;b.close()}})}break;case "click":this.addHandler(this.host,"click",function(c){if(b.position=="mouseenter")b.position="mouse";b._raiseEvent("2");b._setPosition(c);
b._animateShow()});break}else this.addHandler(this.host,"touchstart",function(c){if(b.position=="mouseenter")b.position="mouse";b._raiseEvent("2");b._setPosition(c);b._animateShow()})}},_autoHide:function(){var c=this;var b=(new Number(a(this._id()).css("opacity"))).toFixed(2);if(this.autoHide==true&&this._isOpen==true&&b>=this.opacity){c._raiseEvent("3");a(c._id()).animate({opacity:0},c.animationHideDelay,function(){a(c._id()).css("visibility","hidden");c._raiseEvent("1");c._isOpen=false})}},_clickHide:function(){var b=
this;this.addHandler(a(this._id()),"click",function(c){b._checkBoundariesClick(c);b.close()})},_setSize:function(){a(this._id()).css({width:this.width,height:this.height})},_setTheme:function(){var e=this._id();var d=a(e+"Main");var c=a(e+"Text");var b=a(e+"Arrow");d.addClass(this.toThemeProperty("jqx-widget"));c.addClass(this.toThemeProperty("jqx-widget"));b.addClass(this.toThemeProperty("jqx-widget"));d.addClass(this.toThemeProperty("jqx-fill-state-normal"));c.addClass(this.toThemeProperty("jqx-fill-state-normal"));
b.addClass(this.toThemeProperty("jqx-fill-state-normal"));a(e).addClass(this.toThemeProperty("jqx-tooltip"));d.addClass(this.toThemeProperty("jqx-tooltip-main"));c.addClass(this.toThemeProperty("jqx-tooltip-text"));b.addClass(this.toThemeProperty("jqx-tooltip-arrow"))},_initialPosition:function(){var b=this.position;this.position="default";this._setPosition();this.position=b},_detectBrowserBounds:function(){var b=this._id();if(this.enableBrowserBoundsDetection)if(this.tooltip_offset.top<this.documentTop&&
this.tooltip_offset.left<0)a(b).offset({top:this.documentTop,left:this.documentLeft});else if(this.tooltip_offset.top<this.documentTop&&this.tooltip_offset.left+this.tooltip_width>this.windowWidth+this.documentLeft)a(b).offset({top:this.documentTop,left:this.windowWidth+this.documentLeft-this.tooltip_width});else if(this.tooltip_offset.top<this.documentTop)a(b).offset({top:this.documentTop,left:this.tooltip_offset.left});else if(this.tooltip_offset.top+this.tooltip_height>this.windowHeight+this.documentTop&&
this.tooltip_offset.left<0)a(b).offset({top:this.windowHeight+this.documentTop-this.tooltip_height,left:this.documentLeft});else if(this.tooltip_offset.top+this.tooltip_height>this.windowHeight+this.documentTop&&this.tooltip_offset.left+this.tooltip_width>this.windowWidth+this.documentLeft)a(b).offset({top:this.windowHeight+this.documentTop-this.tooltip_height,left:this.windowWidth+this.documentLeft-this.tooltip_width});else if(this.tooltip_offset.top+this.tooltip_height>this.windowHeight+this.documentTop)a(b).offset({top:this.windowHeight+
this.documentTop-this.tooltip_height,left:this.tooltip_offset.left});else if(this.tooltip_offset.left<0)a(b).offset({top:this.tooltip_offset.top,left:this.documentLeft});else if(this.tooltip_offset.left+this.tooltip_width>this.windowWidth+this.documentLeft)a(b).offset({top:this.tooltip_offset.top,left:this.windowWidth+this.documentLeft-this.tooltip_width});else a(b).offset({top:this.tooltip_offset.top,left:this.tooltip_offset.left});else a(b).offset({top:this.tooltip_offset.top,left:this.tooltip_offset.left})},
_checkBoundaries:function(b){if(b.pageX>=this.host_offset.left&&b.pageX<=this.host_offset.left+this.host_width&&b.pageY>=this.host_offset.top&&b.pageY<=this.host_offset.top+this.host_height)return true;else return false},_checkBoundariesClick:function(b){if(this._checkBoundaries(b))this._clickFlag=1;else this._clickFlag=0},_checkBoundariesAuto:function(b){if(this._checkBoundaries(b))this._autoFlag=1;else this._autoFlag=0},_removeHandlers:function(){this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,
"mousemove");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"click");this.removeHandler(this.host,"touchstart");this.removeHandler(a(this._id()),"click");this.removeHandler(a(this._id()),"mouseleave")},_closeAll:function(){var d=this.ID_Array.length;for(var c=0;c<d;c++){var b="#"+this.ID_Array[c].tooltipID;if(b!=this._id()){a(b).css({opacity:0,visibility:"hidden"});this._isOpen=false}}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxCalendar","",{});a.extend(a.jqx._jqxCalendar.prototype,{defineInstance:function(){if(this.disabled==undefined)this.disabled=false;if(this.multipleMonthRows==undefined)this.multipleMonthRows=1;if(this.multipleMonthColumns==undefined)this.multipleMonthColumns=1;if(this.minDate==undefined){this.minDate=a.jqx._jqxDateTimeInput.getDateTime(new Date);this.minDate._setYear(1900);this.minDate._setMonth(1);this.minDate._setDay(1);this.minDate._setHours(1);this.minDate._setMinutes(1);
this.minDate._setSeconds(1);this.minDate._setMilliseconds(1)}if(this.maxDate==undefined){this.maxDate=a.jqx._jqxDateTimeInput.getDateTime(new Date);this.maxDate._setYear(2100);this.maxDate._setMonth(1);this.maxDate._setDay(1);this.maxDate._setHours(1);this.maxDate._setMinutes(1);this.maxDate._setSeconds(1);this.maxDate._setMilliseconds(1)}if(this.stepMonths==undefined)this.stepMonths=1;if(this.width==undefined)this.width=null;if(this.height==undefined)this.height=null;if(this.value==undefined){this.value=
a.jqx._jqxDateTimeInput.getDateTime(new Date);this.value._setHours(1);this.value._setMinutes(1);this.value._setSeconds(1);this.value._setMilliseconds(1)}if(this.firstDayOfWeek==undefined)this.firstDayOfWeek=0;if(this.showWeekNumbers==undefined)this.showWeekNumbers=false;if(this.showDayNames==undefined)this.showDayNames=true;if(this.enableWeekend==undefined)this.enableWeekend=false;if(this.enableOtherMonthDays==undefined)this.enableOtherMonthDays=true;if(this.showOtherMonthDays==undefined)this.showOtherMonthDays=
true;if(this.rowHeaderWidth==undefined)this.rowHeaderWidth=25;if(this.columnHeaderHeight==undefined)this.columnHeaderHeight=20;if(this.titleHeight==undefined)this.titleHeight=25;if(this.dayNameFormat==undefined)this.dayNameFormat="firstTwoLetters";if(this.titleFormat==undefined)this.titleFormat="MMMM yyyy";if(this.readOnly==undefined)this.readOnly=false;if(this.culture==undefined)this.culture="default";if(this.enableFastNavigation==undefined)this.enableFastNavigation=true;if(this.enableHover==undefined)this.enableHover=
true;if(this.enableAutoNavigation==undefined)this.enableAutoNavigation=true;if(this.enableTooltips==undefined)this.enableTooltips=false;if(this.backText==undefined)this.backText="Back";if(this.forwardText==undefined)this.forwardText="Forward";if(this.specialDates==undefined)this.specialDates=new Array;this.keyboardNavigation=true;this.selectionMode="default";this.todayString="Today";this.clearString="Clear";this.showFooter=false;this.selection={from:null,to:null};this.height=null;this.events=["backButtonClick",
"nextButtonClick","valuechanged","cellMouseDown","cellMouseUp","cellSelected","cellUnselected"]},createInstance:function(d){this.setCalendarSize();if(this.element.id=="")this.element.id=a.jqx.utilities.createId();var h=this.element.id;var g=this;this.propertyChangeMap.width=function(k,m,l,n){g.setCalendarSize()};this.propertyChangeMap.height=function(k,m,l,n){g.setCalendarSize()};this.host.attr("tabIndex",0);this.host.css("outline","none");this.host.addClass(this.toThemeProperty("jqx-calendar"));
this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this._addInput();this.addHandler(a(a(this.element)[0]),"keydown",function(l){var k=true;if(g.keyboardNavigation)if(g._handleKey!=undefined)k=g._handleKey(l);return k});var c=false;var f=this;this.render();var b=false;if(g.width!=null&&g.width.toString().indexOf("%")!=-1)b=true;if(g.height!=null&&g.height.toString().indexOf("%")!=
-1)b=true;a(window).bind("resize.calendar"+this.element.id,function(){var k=f.host.find("#View1"+g.element.id);if(!c){c=true;f.render()}else f.refreshTitle(k);if(b){if(g.refreshTimer)clearTimeout(g.refreshTimer);g.refreshTimer=setTimeout(function(){g.refreshControl()},1)}});if(b)setInterval(function(){var l=g.host.width();var k=g.host.height();if(g._lastWidth!=l||g._lastHeight!=k)g.refreshControl();g._lastWidth=l;g._lastHeight=k},100);var e="View1";this.propertyChangeMap.disabled=function(k,m,l,n){if(n)k.host.addClass(g.toThemeProperty("jqx-fill-state-disabled"));
else k.host.removeClass(g.toThemeProperty("jqx-fill-state-disabled"));g.refreshControl()}},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;this.input=a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b);this.input.val(this.getDate().toString())},setCalendarSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.width!=
null&&this.width.toString().indexOf("%")!=-1)this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);if(this.height!=null&&this.height.toString().indexOf("%")!=-1)this.host.height(this.height)},_handleKey:function(b){if(this.readOnly)return true;var m=b.keyCode;var g=this._getSelectedDate();if(g==undefined)return true;if(b.altKey)return true;var d=new a.jqx._jqxDateTimeInput.getDateTime(g);
var c=this.getViewStart();var f=this.getViewEnd();var k=a.data(this.element,"View1"+this.element.id);if(k==undefined||k==null)return true;if(m==38){d._addDays(-7);if(d.dateTime<c){var h=this.navigateBackward();if(!h)return false}this._selectDate(d.dateTime,"key");for(i=0;i<k.cells.length;i++){var l=k.cells[i];var e=l.dateTime.dateTime;if(l.isOtherMonth&&l.isSelected&&e<=d.dateTime){this.navigateBackward();this._selectDate(d.dateTime,"key");break}}return false}else if(m==40){d._addDays(7);if(d.dateTime>
f){var h=this.navigateForward();if(!h)return false}this._selectDate(d.dateTime,"key");for(i=0;i<k.cells.length;i++){var l=k.cells[i];var e=l.dateTime.dateTime;if(l.isOtherMonth&&l.isSelected&&e>=d.dateTime){this.navigateForward();this._selectDate(d.dateTime,"key");break}}return false}if(m==37){d._addDays(-1);if(d.dateTime<c){var h=this.navigateBackward();if(!h)return false}this._selectDate(d.dateTime,"key");for(i=0;i<k.cells.length;i++){var l=k.cells[i];var e=l.dateTime.dateTime;if(l.isOtherMonth&&
l.isSelected&&e<=d.dateTime){if(d.dateTime<this.getMinDate()||d.dateTime>this.getMaxDate())return;this.navigateBackward();this._selectDate(d.dateTime,"key");break}}return false}else if(m==39){d._addDays(1);if(d.dateTime>f){var h=this.navigateForward();if(!h)return false}this._selectDate(d.dateTime,"key");for(i=0;i<k.cells.length;i++){var l=k.cells[i];var e=l.dateTime.dateTime;if(l.isOtherMonth&&l.isSelected&&e>=d.dateTime){if(d.dateTime<this.getMinDate()||d.dateTime>this.getMaxDate())return;this.navigateForward();
this._selectDate(d.dateTime,"key");break}}return false}return true},render:function(){if(this.multipleMonthRows==1&&this.multipleMonthColumns==1){var b=this._renderSingleCalendar("View1"+this.element.id);this.host.append(b)}else;},addSpecialDate:function(b,c,d){if(this.multipleMonthRows==1&&this.multipleMonthColumns==1){var e=this.specialDates.length;this.specialDates[e]={Date:b,Class:c,Tooltip:d};this.refreshControl()}},refresh:function(b){if(!b)this.render()},refreshControl:function(){if(this.multipleMonthRows==
1&&this.multipleMonthColumns==1)this.refreshSingleCalendar("View1"+this.element.id,null)},getViewStart:function(){var c=this.getVisibleDate();var b=this.getFirstDayOfWeek(c);return b.dateTime},getViewEnd:function(){var c=this.getViewStart();var b=new a.jqx._jqxDateTimeInput.getDateTime(c);b._addDays(41);return b.dateTime},refreshSingleCalendar:function(f,e){var h=this.host.find("#"+f);var d=this.getVisibleDate();var b=this.getFirstDayOfWeek(d);this.refreshTitle(h);this.refreshCalendarCells(h,b,f);
this.refreshRowHeader(h,f);if(this.selectedDate!=undefined)this._selectDate(this.selectedDate);var g=this.host.height()-this.titleHeight-this.columnHeaderHeight;if(!this.showDayNames)g=this.host.height()-this.titleHeight;if(this.showFooter)g-=20;var c=h.find("#cellsTable"+f);var k=h.find("#calendarRowHeader"+f);c.height(g);k.height(g)},refreshRowHeader:function(l,g){if(!this.showWeekNumbers)return;var h=this.getVisibleDate();var c=this.getFirstDayOfWeek(h);var f=c.dayOfWeek;var r=this.getWeekOfYear(c);
var m=l.find("#rowHeader");m.width(this.rowHeaderWidth);var d=c;var q=new Array;for(i=0;i<6;i++){var e=r.toString();var p=new a.jqx._jqxCalendar.cell(d.dateTime);var k=i+1;var o=m.find("#headerCell"+k);p.element=o;p.row=i;p.column=0;var b=o.find("#headerCellContent"+k);b.addClass(this.toThemeProperty("jqx-calendar-row-cell"));b[0].innerHTML=r;q[i]=p;d=new a.jqx._jqxDateTimeInput.getDateTime(new Date(d._addWeeks(1)));r=this.getWeekOfYear(d)}var n=a.data(this.element,l[0].id);n.rowCells=q;this._refreshOtherMonthRows(n,
g)},_refreshOtherMonthRows:function(e,d){if(this.showOtherMonthDays)return;this._displayLastRow(true,d);this._displayFirstRow(true,d);var c=false;var f=false;for(i=0;i<e.cells.length;i++){var b=e.cells[i];if(b.isVisible&&i<7)c=true;else if(b.isVisible&&i>=e.cells.length-7)f=true}if(!c)this._displayFirstRow(false,d);if(!f)this._displayLastRow(false,d)},_displayLastRow:function(b,c){var g=this.host.find("#"+c);var f=g.find("#calendarRowHeader"+g[0].id);var d=f.find("#headerCellContent6");var e=g.find("#cellsTable"+
g[0].id).find("#row6");if(b){d.css("display","block");e.css("display","table-row")}else{d.css("display","none");e.css("display","none")}},_displayFirstRow:function(b,c){var e=this.host.find("#"+c);var d=e.find("#calendarRowHeader"+e[0].id);var f=d.find("#headerCellContent1");var g=e.find("#cellsTable"+e[0].id).find("#row1");if(b){f.css("display","block");g.css("display","table-row")}else{f.css("display","none");g.css("display","none")}},_renderSingleCalendar:function(v,o){var r=this.host.find("#"+
v.toString());if(r!=null)r.remove();var z=a("<div id='"+v.toString()+"'></div>");var b=this.getVisibleDate();var q=this.getFirstDayOfWeek(b);var e=new a.jqx._jqxDateTimeInput.getDateTime(q.dateTime);e._addMonths(1);var y=a.jqx._jqxCalendar.monthView(q,e,null,null,null,z);if(o==undefined||o==null){this.host.append(z);if(this.height!=undefined&&!isNaN(this.height))z.height(this.height);else if(this.height!=null&&this.height.toString().indexOf("px")!=-1)z.height(this.height);if(this.width!=undefined&&
!isNaN(this.width))z.width(this.width);else if(this.width!=null&&this.width.toString().indexOf("px")!=-1)z.width(this.width);if(this.width!=null&&this.width.toString().indexOf("%")!=-1)z.width("100%");if(this.height!=null&&this.height.toString().indexOf("%")!=-1)z.height("100%")}else o.append(z);a.data(this.element,v,y);var x=this.host.height()-this.titleHeight-this.columnHeaderHeight;if(!this.showDayNames)x=this.host.height()-this.titleHeight;if(this.showFooter)x-=20;if(this.rowHeaderWidth<0)this.rowHeaderWidth=
0;if(this.columnHeaderHeight<0)this.columnHeaderHeight=0;if(this.titleHeight<0)this.titleHeight=0;var g=this.rowHeaderWidth;var m=this.columnHeaderHeight;if(!this.showWeekNumbers)g=0;if(!this.showDayNames)m=0;var A=a("<div style='height:"+this.titleHeight+"px;'><table style='width: 100%; height: 100%; border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr id='calendarTitle' width='100%'><td NOWRAP id='leftNavigationArrow'></td><td align='center' NOWRAP id='calendarTitleHeader'></td><td NOWRAP id='rightNavigationArrow'></td></tr></table></div>");
A.addClass(this.toThemeProperty("jqx-calendar-title-container"));z.append(A);var c=a("<table style='border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr id='calendarHeader' height='"+m+"'><td id='selectCell' width='"+g+"'></td><td colspan='2' style='padding-left: 2px; padding-right: 2px' id='calendarColumnHeader'></td></tr><tr id='calendarContent'><td id='calendarRowHeader' valign='top' height='"+x+"' width='"+g+"'></td><td valign='top' colspan='2' style='padding-left: 2px; padding-right: 2px' id='cellsTable' height='"+
x+"'></td></tr></table>");var d=20;var u=a("<div style='display: none; height:"+d+"px;'><table style='width: 100%; height: 100%; border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr id='calendarFooter'><td align='right' id='todayButton'></td><td align='left' colspan='2' id=doneButton></td></tr></table></div>");if(this.showFooter)u.css("display","block");z.append(c);z.append(u);c.addClass(this.toThemeProperty("jqx-calendar-month"));z.find("#calendarTitle")[0].id="calendarTitle"+v;z.find("#leftNavigationArrow")[0].id=
"leftNavigationArrow"+v;z.find("#calendarTitleHeader")[0].id="calendarTitleHeader"+v;z.find("#rightNavigationArrow")[0].id="rightNavigationArrow"+v;z.find("#cellsTable")[0].id="cellsTable"+v;z.find("#calendarRowHeader")[0].id="calendarRowHeader"+v;z.find("#calendarFooter")[0].id="calendarFooter"+v;z.find("#todayButton")[0].id="todayButton"+v;z.find("#doneButton")[0].id="doneButton"+v;z.find("#selectCell")[0].id="selectCell"+v;z.find("#calendarColumnHeader")[0].id="calendarColumnHeader"+v;z.find("td").css({padding:0,
margin:0,border:"none"});z.find("tr").addClass(this.toThemeProperty("jqx-reset"));z.addClass(this.toThemeProperty("jqx-widget-content"));z.addClass(this.toThemeProperty("jqx-calendar-month-container"));var p=z.find("#selectCell"+v);p.addClass(this.toThemeProperty("jqx-reset"));p.addClass(this.toThemeProperty("jqx-calendar-top-left-header"));if(this.showWeekNumbers)this._renderRowHeader(z);else{var w=z.find("#cellsTable"+v);w[0].colSpan=3;var n=z.find("#calendarColumnHeader"+v);n[0].colSpan=3;var s=
z.find("#calendarRowHeader"+v);s.css("display","none");var p=z.find("#selectCell"+v);p.css("display","none")}if(this.showFooter){var u=z.find("#calendarFooter"+v);u.height(20);var l=z.find("#todayButton"+v);var f=z.find("#doneButton"+v);var k=a("<a href='#'>"+this.todayString+"</a>");k.appendTo(l);var h=a("<a href='#'>"+this.clearString+"</a>");h.appendTo(f);h.addClass(this.toThemeProperty("jqx-calendar-footer"));k.addClass(this.toThemeProperty("jqx-calendar-footer"));var t=this;this.addHandler(k,
"click",function(){t.setDate(new Date,"mouse");if(t.today)t.today()});this.addHandler(h,"click",function(){t.setDate(null,"mouse");if(t.clear)t.clear()})}if(this.showDayNames)this.renderColumnHeader(z);if(o==undefined||o==null)this.renderTitle(z);this.renderCalendarCells(z,q,v);this._refreshOtherMonthRows(y,v);z.find("tbody").css({border:"none",background:"transparent"});if(this.selectedDate!=undefined)this._selectDate(this.selectedDate);return z},renderTitle:function(m){if(a.global==null||a.global==
undefined)throw"jquery.global.js is not loaded.";a.global.preferCulture(this.culture);var b=a("<div style='float: left;'></div>");var h=a("<div style='float: right;'></div>");var g=m.find("#calendarTitle"+m[0].id);g.addClass(this.toThemeProperty("jqx-reset"));g.addClass(this.toThemeProperty("jqx-widget-header"));g.addClass(this.toThemeProperty("jqx-calendar-title-header"));if(a.browser.msie&&a.browser.version<8){if(g.find("td").css("background-color")!="transparent"){var r=g.css("background-color");
g.find("td").css("background-color",r)}if(g.find("td").css("background-image")!="transparent"){var p=g.css("background-image");var n=g.css("background-repeat");var t=g.css("background-position");g.find("td").css("background-image",p);g.find("td").css("background-repeat",n);g.find("td").css("background-position","left center scroll")}}else g.find("td").css("background-color","transparent");if(this.disabled)g.addClass(this.toThemeProperty("jqx-calendar-title-header-disabled"));b.addClass(this.toThemeProperty("jqx-calendar-title-navigation"));
b.addClass(this.toThemeProperty("icon-arrow-left"));var k=m.find("#leftNavigationArrow"+m[0].id).append(b);h.addClass(this.toThemeProperty("jqx-calendar-title-navigation"));h.addClass(this.toThemeProperty("icon-arrow-right"));var e=m.find("#rightNavigationArrow"+m[0].id).append(h);if(this.enableTooltips)if(a(k).jqxTooltip){a(k).jqxTooltip({name:this.element.id,position:"mouse",theme:this.theme,content:this.backText});a(e).jqxTooltip({name:this.element.id,position:"mouse",theme:this.theme,content:this.forwardText})}var c=
m.find("#calendarTitleHeader"+m[0].id);var q=a.global.format(this.value.dateTime,this.titleFormat,this.culture);var l=a("<div style='background: transparent; margin: 0; padding: 0; border: none;' id='titleContent'>"+q+"</div>");c.append(l);l.addClass(this.toThemeProperty("jqx-calendar-title-content"));var f=parseInt(b.width());var s=m.width()-2*f;var o=c.find("#titleContent").width(s);a.data(b,"navigateLeft",this);a.data(h,"navigateRight",this);var d=a.jqx.mobile.isTouchDevice();if(!this.disabled){this.addHandler(b,
"mousedown",function(v){a.data(b,"navigateLeftRepeat",true);var u=a.data(b,"navigateLeft");if(u.enableFastNavigation&&!d)u.startRepeat(u,b,true,250);u.navigateBackward();return u._raiseEvent(0,v)});this.addHandler(b,"mouseup",function(u){a.data(b,"navigateLeftRepeat",false)});this.addHandler(b,"mouseleave",function(u){a.data(b,"navigateLeftRepeat",false)});this.addHandler(h,"mousedown",function(v){a.data(h,"navigateRightRepeat",true);var u=a.data(h,"navigateRight");if(u.enableFastNavigation&&!d)u.startRepeat(u,
h,false,250);u.navigateForward();return u._raiseEvent(1,v)});this.addHandler(h,"mouseup",function(u){a.data(h,"navigateRightRepeat",false)});this.addHandler(h,"mouseleave",function(u){a.data(h,"navigateRightRepeat",false)})}},refreshTitle:function(d){if(a.global==null||a.global==undefined)throw"jquery.global.js is not loaded.";a.global.preferCulture(this.culture);var e=a.global.format(this.value.dateTime,this.titleFormat,this.culture);var c=d.find("#calendarTitleHeader"+d[0].id);var b=c.find("#titleContent");
var f=a("<div style='background: transparent; margin: 0; padding: 0; border: none;' id='titleContent'>"+e+"</div>");c.append(f);f.addClass(this.toThemeProperty("jqx-calendar-title-content"));if(b!=null)b.remove()},startRepeat:function(d,b,f,e){var c=window.setTimeout(function(){var g=a.data(b,"navigateLeftRepeat");if(!f)g=a.data(b,"navigateRightRepeat");if(g){if(e<25)e=25;if(f){d.navigateBackward();d.startRepeat(d,b,true,e-25)}else{d.navigateForward();c=d.startRepeat(d,b,false,e-25)}}else{window.clearTimeout(c);
return}},e)},navigateForward:function(d){if(d==undefined||d==null)d=this.stepMonths;var b=this.value.day;var e=this.value.month;if(e+d<=12){var c=this.value._daysInMonth(this.value.year,this.value.month+d);if(b>c)b=c}return this.navigateTo(new Date(this.value.year,this.value.month-1+d,b))},navigateBackward:function(e){if(e==undefined||e==null)e=this.stepMonths;var b=this.value.day;var f=this.value.month;if(f-e>=1){var d=this.value._daysInMonth(this.value.year,this.value.month-e);if(b>d)b=d}var c=
new Date(this.value.year,this.value.month-1-e,b);return this.navigateTo(c)},refreshCalendarCells:function(o,d,g){var c=o.find("#cellsTable"+o[0].id);var l=c.find("#cellTable"+g.toString());var e=d;var u=new Array;var h=0;var p=new a.jqx._jqxDateTimeInput.getDateTime(new Date);var f=(o.width()-this.rowHeaderWidth-2)/7;if(!this.showWeekNumbers)f=(o.width()-2)/7;for(i=0;i<6;i++)for(j=0;j<7;j++){var q=i+1;var n=j+1;var m="#cell"+q+n;var t=new a.jqx._jqxCalendar.cell(e.dateTime);var s=l.find(m);t.element=
s;t.row=i;t.column=j;t.isVisible=true;t.isOtherMonth=false;t.isToday=false;t.isWeekend=false;t.isHighlighted=false;t.isSelected=false;if(e.month!=this.value.month){t.isOtherMonth=true;t.isVisible=this.showOtherMonthDays}if(e.month==p.month&&e.day==p.day&&e.year==p.year)t.isToday=true;if(e.isWeekend())t.isWeekend=true;a.data(this.element,"cellContent"+m.substring(1),t);u[h]=t;h++;var b=s.find("#cellContent"+m.substring(1));b.html(e.day);this._applyCellStyle(t,s,b);e=new a.jqx._jqxDateTimeInput.getDateTime(new Date(e._addDays(1)))}var r=
a.data(this.element,o[0].id);if(r!=undefined&&r!=null)r.cells=u},renderCalendarCells:function(x,m,p){var s=a("<table style='border-spacing: 0px; width: 100%; height: 100%;' cellspacing='0' cellpadding='1' id=cellTable"+p.toString()+"><tr id='row1'><td id='cell11'></td><td id='cell12'></td><td id='cell13'></td><td id='cell14'></td><td id='cell15'></td><td id='cell16'></td><td id='cell17'></td></tr><tr id='row2'><td id='cell21'></td><td id='cell22'></td><td id='cell23'></td><td id='cell24'></td><td id='cell25'></td><td id='cell26'></td><td id='cell27'></td></tr><tr id='row3'><td id='cell31'></td><td id='cell32'></td><td id='cell33'></td><td id='cell34'></td><td id='cell35'></td><td id='cell36'></td><td id='cell37'></td></tr><tr id='row4'><td id='cell41'></td><td id='cell42'></td><td id='cell43'></td><td id='cell44'></td><td id='cell45'></td><td id='cell46'></td><td id='cell47'></td></tr><tr id='row5'><td id='cell51'></td><td id='cell52'></td><td id='cell53'></td><td id='cell54'></td><td id='cell55'></td><td id='cell56'></td><td id='cell57'></td></tr><tr id='row6'><td id='cell61'></td><td id='cell62'></td><td id='cell63'></td><td id='cell64'></td><td id='cell65'></td><td id='cell66'></td><td id='cell67'></td></tr></table>");
var t=x.find("#cellsTable"+x[0].id);s.find("table").css({background:"none",padding:0,margin:0,border:0});s.find("td").css({background:"none",padding:1,margin:0,border:0});s.find("tr").css({background:"none",padding:0,margin:0,border:0});var h=t.find("#cellTable"+p.toString());if(h!=null)h.remove();t.append(s);s.addClass(this.toThemeProperty("jqx-calendar-view"));var l=m;var b=this.showDayNames?1:0;var g=this.showWeekNumbers?1:0;var e=new Array;var q=0;var r=(x.width()-this.rowHeaderWidth-2)/7;if(!this.showWeekNumbers)r=
(x.width()-2)/7;var v=new a.jqx._jqxDateTimeInput.getDateTime(new Date);for(i=0;i<6;i++){for(j=0;j<7;j++){var f=i+1;var u=j+1;var o="#cell"+f+u;var c=new a.jqx._jqxCalendar.cell(l.dateTime);var n=s.find(o);c.isVisible=true;if(l.month!=this.value.month){c.isOtherMonth=true;c.isVisible=this.showOtherMonthDays}if(l.month==v.month&&l.day==v.day&&l.year==v.year)c.isToday=true;if(l.isWeekend())c.isWeekend=true;c.element=n;c.row=b;c.column=g;if(c.isVisible){var d=a("<div id='cellContent"+o.substring(1)+
"'>"+l.day+"</div>");n.append(d);n.width(r);d.css("padding","3px")}else{var d=a("<div id='cellContent"+o.substring(1)+"'>"+l.day+"</div>");n.append(d);n.width(r);d.css("padding","3px")}l=new a.jqx._jqxDateTimeInput.getDateTime(new Date(l._addDays(1)));a.data(n,o,this);a.data(this.element,"cellContent"+o.substring(1),c);var y=this;this.addHandler(n,"mousedown",function(C){var A=a.data(n,o);if(!A.readOnly&&!y.disabled){var B=a(C.target);var z=a.data(y.element,B[0].id);var k=A._raiseEvent(3,C);if(z!=
null&&z!=undefined)if(!z.isDisabled)if(z.isOtherMonth&&A.enableAutoNavigation){if(z.row<2)A.navigateBackward();else A.navigateForward();A._selectDate(z.dateTime.dateTime,"mouse")}else A._selectDate(z.dateTime.dateTime,"mouse");return k}});if(!y.disabled){this.addHandler(n,"mouseup",function(z){var k=a.data(n,o);if(!k.readOnly)return k._raiseEvent(4,z)});this.addHandler(n,"mouseover",function(B){var z=a.data(n,o);if(!z.readOnly){var A=a(B.target);var k=a.data(y.element,A[0].id);if(k!=null&&k!=undefined){k.isHighlighted=
true;z._applyCellStyle(k,k.element,A)}}});this.addHandler(n,"mouseout",function(B){var z=a.data(n,o);if(!z.readOnly){var A=a(B.target);var k=a.data(y.element,A[0].id);if(k!=null&&k!=undefined){k.isHighlighted=false;z._applyCellStyle(k,k.element,A)}}})}g++;e[q]=c;q++}g=0;b++}var w=a.data(this.element,x[0].id);if(w!=undefined&&w!=null)w.cells=e;this._applyCellStyles()},setMaxDate:function(b){this.maxDate=a.jqx._jqxDateTimeInput.getDateTime(b)},getMaxDate:function(){if(this.maxDate!=null&&this.maxDate!=
undefined)return this.maxDate.dateTime;return null},setMinDate:function(b){this.minDate=a.jqx._jqxDateTimeInput.getDateTime(b)},getMinDate:function(){if(this.minDate!=null&&this.minDate!=undefined)return this.minDate.dateTime;return null},navigateTo:function(b){if(b<this.getMinDate()||b>this.getMaxDate())return false;if(b==null)return false;this.value._setYear(b.getFullYear());this.value._setDay(b.getDate());this.value._setMonth(b.getMonth()+1);this.refreshControl();this._raiseEvent("2");return true},
setDate:function(b){this.navigateTo(b);this._selectDate(b);if(this.selectionMode=="range")this._selectDate(b,"mouse");return true},getDate:function(){if(this.value==undefined)return new Date;return this.value.dateTime},setRange:function(c,b){this.navigateTo(c);this._selectDate(c,"mouse");this._selectDate(b,"mouse")},getRange:function(){return this.selection},_selectDate:function(c,d){if(this.selectionMode=="none")return;if(d==null||d==undefined)d="none";var e=a.data(this.element,"View1"+this.element.id);
if(e==undefined||e==null)return;var b=this;if(this.input)if(c!=null)this.input.val(c.toString());else this.input.val("");a.each(e.cells,function(l){var p=this;var g=p.dateTime;var o=a(p.element);var f=o.find("#cellContent"+o[0].id);if(c==null){p.isSelected=false;p.isDisabled=false;if(l==0){b.selection={from:null,to:null};b._raiseEvent("2");b._raiseEvent("5",{selectionType:d})}}else if(b.selectionMode!="range"||d=="key"){if(g.day==c.getDate()&&g.month==1+c.getMonth()&&g.year==c.getFullYear()&&p.isSelected){b._applyCellStyle(p,
o,f);return}if(p.isSelected)b._raiseEvent("6",{selectionType:d});p.isSelected=false;if(g.day==c.getDate()&&g.month==1+c.getMonth()&&g.year==c.getFullYear()){p.isSelected=true;if(l==0)b.selection={date:c};p.element.focus();if(!p.isOtherMonth){b.value._setMonth(c.getMonth()+1);b.value._setDay(c.getDate());b.value._setYear(c.getFullYear());b._raiseEvent("2");b._raiseEvent("5",{selectionType:d})}}}else if(b.selectionMode=="range"){if(l==0)if(d!="none"){if(b._clicks==undefined)b._clicks=0;b._clicks++;
if(b._clicks==1)b.selection={from:c,to:c};else if(b._clicks==2){var n=b.selection.from;var k=n<=c?n:c;var m=n<=c?c:n;b.selection={from:k,to:m};b._clicks=0}}else if(b.selection==null||b.selection.from==null){b.selection={from:c,to:c};if(b._clicks==undefined)b._clicks=0;b._clicks++;if(b._clicks==2)b._clicks=0}var h=function(r){var q=new Date;q.setHours(0,0,0,0);q.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());return q};if(!p.isOtherMonth&&h(g.dateTime).toString()==h(c).toString()){b.value._setMonth(c.getMonth()+
1);b.value._setDay(c.getDate());b.value._setYear(c.getFullYear());b._raiseEvent("2");b._raiseEvent("5",{selectionType:d})}p.isSelected=false;p.isDisabled=false;if(h(g.dateTime)<h(b.selection.from)&&b._clicks==1)p.isDisabled=true;if(h(g.dateTime)>=h(b.selection.from)&&h(g.dateTime)<=h(b.selection.to))p.isSelected=true}b._applyCellStyle(p,o,f)});this.selectedDate=c},_getSelectedDate:function(){var d=a.data(this.element,"View1"+this.element.id);if(d==undefined||d==null)return;for(var c=0;c<d.cells.length;c++){var b=
d.cells[c];var e=b.dateTime.dateTime;if(b.isSelected)return e}if(this.selectedDate)return this.selectedDate},_getSelectedCell:function(){var d=a.data(this.element,"View1"+this.element.id);if(d==undefined||d==null)return;for(var c=0;c<d.cells.length;c++){var b=d.cells[c];var e=b.dateTime.dateTime;if(b.isSelected)return b}},_applyCellStyle:function(b,c,e){var d=this;e.removeClass();e.addClass(this.toThemeProperty("jqx-rc-all"));if(this.disabled||b.isDisabled){e.addClass(this.toThemeProperty("jqx-calendar-cell-disabled"));
e.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}if(b.isOtherMonth&&this.enableOtherMonthDays&&b.isVisible)e.addClass(this.toThemeProperty("jqx-calendar-cell-othermonth"));if(b.isWeekend&&this.enableWeekend&&b.isVisible&&b.isVisible)e.addClass(this.toThemeProperty("jqx-calendar-cell-weekend"));if(!b.isVisible)e.addClass(this.toThemeProperty("jqx-calendar-cell-hidden"));else e.addClass(this.toThemeProperty("jqx-calendar-cell"));if(b.isSelected&&b.isVisible){e.addClass(this.toThemeProperty("jqx-calendar-cell-selected"));
e.addClass(this.toThemeProperty("jqx-fill-state-pressed"))}if(b.isHighlighted&&b.isVisible&&this.enableHover)if(!b.isDisabled){e.addClass(this.toThemeProperty("jqx-calendar-cell-hover"));e.addClass(this.toThemeProperty("jqx-fill-state-hover"))}if(b.isToday&&b.isVisible)e.addClass(this.toThemeProperty("jqx-calendar-cell-today"));if(this.specialDates.length>0){var f=this;a.each(this.specialDates,function(){if(this.Class!=undefined&&this.Class!=null&&this.Class!="")e.removeClass(this.Class);else e.removeClass(d.toThemeProperty("jqx-calendar-cell-specialDate"));
if(b.dateTime._equalDate(this.Date)){if(b.tooltip==null&&this.Tooltip!=null){b.tooltip=this.Tooltip;if(a(e).jqxTooltip)a(e).jqxTooltip({name:f.element.id,content:this.Tooltip,position:"mouse",theme:f.theme})}e.removeClass(d.toThemeProperty("jqx-calendar-cell-othermonth"));e.removeClass(d.toThemeProperty("jqx-calendar-cell-weekend"));if(this.Class==undefined||this.Class==""){e.addClass(d.toThemeProperty("jqx-calendar-cell-specialDate"));return false}else{e.addClass(this.Class);return false}}})}},_applyCellStyles:function(){var e=
a.data(this.element,"View1"+this.element.id);if(e==undefined||e==null)return;for(i=0;i<e.cells.length;i++){var b=e.cells[i];var c=a(b.element);var d=c.find("#cellContent"+c[0].id);this._applyCellStyle(b,c,d)}},getWeekOfYear:function(c){var b=c.dayOfYear(c.dateTime)-1;var d=c.dayOfWeek-b%7;var e=(d-this.firstDayOfWeek+14)%7;return Math.ceil((b+e)/7+1)},renderColumnHeader:function(x){if(!this.showDayNames)return;var d=this.getVisibleDate();var k=this.getFirstDayOfWeek(d);var o=k.dayOfWeek;var y=this.getWeekOfYear(k);
if(a.global==null||a.global==undefined)throw"jquery.global.js is not loaded.";a.global.preferCulture(this.culture);var s=this.firstDayOfWeek;var w=a.global.culture.calendar.days.names;var u=a("<table style='border-spacing: 0px; border-collapse: collapse; width: 100%; height: 100%;' cellspacing='0' cellpadding='1' id='columnHeader'><tr id='columnHeader'><td id='columnCell1'></td><td id='columnCell2'></td><td id='columnCell3'></td><td id='columnCell4'></td><td id='columnCell5'></td><td id='columnCell6'></td><td id='columnCell7'></td></tr></table>");
u.find("table").addClass(this.toThemeProperty("jqx-reset"));u.find("tr").addClass(this.toThemeProperty("jqx-reset"));u.find("td").css({background:"transparent",padding:1,margin:0,border:"none"});u.addClass(this.toThemeProperty("jqx-reset"));u.addClass(this.toThemeProperty("jqx-calendar-column-header"));var g=x.find("#calendarColumnHeader"+x[0].id);var m=g.find("#columnHeader");if(m!=null)m.remove();g.append(u);var p=new Array;var h=k;var q=(x.width()-this.rowHeaderWidth-2)/7;if(!this.showWeekNumbers)q=
(x.width()-2)/7;for(var t=0;t<7;t++){var f=w[s];switch(this.dayNameFormat){case "default":f=a.global.culture.calendar.days.namesAbbr[s];break;case "shortest":f=a.global.culture.calendar.days.namesShort[s];break;case "firstTwoLetters":f=f.substring(0,2);break;case "firstLetter":f=f.substring(0,1);break}var b=new a.jqx._jqxCalendar.cell(h.dateTime);var n=t+1;var l=u.find("#columnCell"+n);var r=t;if(this.enableTooltips)if(a(l).jqxTooltip)a(l).jqxTooltip({name:this.element.id,content:w[s],theme:this.theme,
position:"mouse"});if(s>=6)s=0;else s++;t=r;b.element=l;b.row=0;b.column=t+1;var e=this._textwidth(f);var c="<div style='padding: 0; margin: 0; border: none; background: transparent;' id='columnCell"+n+"'>"+f+"</div>";l.append(c);l.find("#columnCell"+n).addClass(this.toThemeProperty("jqx-calendar-column-cell"));l.width(q);if(this.disabled)l.find("#columnCell"+n).addClass(this.toThemeProperty("jqx-calendar-column-cell-disabled"));if(e>0&&q>0)while(e>l.width()){if(f.length==0)break;f=f.substring(0,
f.length-1);l.find("#columnCell"+n).html(f);e=this._textwidth(f)}p[t]=b;h=new a.jqx._jqxDateTimeInput.getDateTime(new Date(h._addDays(1)))}if(parseInt(g.width())>parseInt(this.host.width()))g.width(this.host.width());var v=a.data(this.element,x[0].id);v.columnCells=p},_textwidth:function(d){var c=a("<span>"+d+"</span>");c.addClass(this.toThemeProperty("jqx-calendar-column-cell"));a(this.host).append(c);var b=c.width();c.remove();return b},_textheight:function(d){var c=a("<span>"+d+"</span>");a(this.host).append(c);
var b=c.height();c.remove();return b},_renderRowHeader:function(l){var g=this.getVisibleDate();var c=this.getFirstDayOfWeek(g);var f=c.dayOfWeek;var r=this.getWeekOfYear(c);var m=a("<table style='overflow: hidden; width: 100%; height: 100%;' cellspacing='0' cellpadding='1' id='rowHeader'><tr id='rowHeader1'><td id='headerCell1'></td></tr><tr id='rowHeader2'><td id='headerCell2'/></tr><tr id='rowHeader3'><td id='headerCell3'/></tr><tr id='rowHeader4'><td id='headerCell4'/></tr><tr id='rowHeader5'><td id='headerCell5'/></tr><tr id='rowHeader6'><td id='headerCell6'/></tr></table>");
m.find("table").addClass(this.toThemeProperty("jqx-reset"));m.find("td").addClass(this.toThemeProperty("jqx-reset"));m.find("tr").addClass(this.toThemeProperty("jqx-reset"));m.addClass(this.toThemeProperty("jqx-calendar-row-header"));m.width(this.rowHeaderWidth);var h=l.find("#rowHeader");if(h!=null)h.remove();l.find("#calendarRowHeader"+l[0].id).append(m);var d=c;var q=new Array;for(i=0;i<6;i++){var e=r.toString();var p=new a.jqx._jqxCalendar.cell(d.dateTime);var k=i+1;var o=m.find("#headerCell"+
k);p.element=o;p.row=i;p.column=0;var b="<div style='background: transparent; border: none; padding: 0; margin: 0;' id ='headerCellContent"+k+"'>"+e+"</div>";o.append(b);o.find("#headerCellContent"+k).addClass(this.toThemeProperty("jqx-calendar-row-cell"));q[i]=p;d=new a.jqx._jqxDateTimeInput.getDateTime(new Date(d._addWeeks(1)));r=this.getWeekOfYear(d)}var n=a.data(this.element,l[0].id);n.rowCells=q},getFirstDayOfWeek:function(e){var d=e;if(this.firstDayOfWeek<0||this.firstDayOfWeek>6)this.firstDayOfWeek=
6;var c=d.dayOfWeek-this.firstDayOfWeek;if(c<=0)c+=7;var b=a.jqx._jqxDateTimeInput.getDateTime(d._addDays(-c));return b},getVisibleDate:function(){var c=new a.jqx._jqxDateTimeInput.getDateTime(new Date(this.value.dateTime));if(c<this.minDate)c=this.minDate;if(c>this.maxDate)this.visibleDate=this.maxDate;var d=c.day;var b=a.jqx._jqxDateTimeInput.getDateTime(c._addDays(-d+1));c=b;return c},destroy:function(){this.host.removeClass()},_raiseEvent:function(g,c){if(c==undefined)c={owner:null};var d=this.events[g];
var e=c?c:{};e.owner=this;var f=new jQuery.Event(d);f.owner=this;f.args=e;if(g==0||g==1||g==2||g==3||g==4||g==5||g==6){f.args.date=this.getDate();f.args.selectedDate=this._getSelectedDate()}var b=this.host.trigger(f);if(g==0||g==1)b=false;return b},propertyChangedHandler:function(b,c,h,f){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c=="width"||c=="height"){var g=this.host.find("#View1"+this.element.id);if(g.length>0){this.setCalendarSize();if(this.height!=undefined&&!isNaN(this.height))g.height(this.height);
else if(this.height!=null&&this.height.toString().indexOf("px")!=-1)g.height(this.height);if(this.width!=undefined&&!isNaN(this.width))g.width(this.width);else if(this.width!=null&&this.width.toString().indexOf("px")!=-1)g.width(this.width);var e=this.host.height()-this.titleHeight-this.columnHeaderHeight;var d="View1"+this.element.id;g.find("#cellsTable"+d).height(e);g.find("#calendarRowHeader"+d).height(e);this.refreshControl()}return}else if(c=="theme")a.jqx.utilities.setTheme(h,f,this.host);else this.render()}})})(jQuery);
(function(a){a.jqx._jqxCalendar.cell=function(c){var b={dateTime:new a.jqx._jqxDateTimeInput.getDateTime(c),isToday:false,isWeekend:false,isOtherMonth:false,isVisible:true,isSelected:false,isHighlighted:false,element:null,row:-1,column:-1,tooltip:null};return b};a.jqx._jqxCalendar.monthView=function(c,h,d,b,f,e){var g={start:c,end:h,cells:d,rowCells:b,columnCells:f,element:e};return g}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxDateTimeInput","",{});a.extend(a.jqx._jqxDateTimeInput.prototype,{defineInstance:function(){if(this.value==undefined){this.value=a.jqx._jqxDateTimeInput.getDateTime(new Date);this.value._setHours(0);this.value._setMinutes(0);this.value._setSeconds(0);this.value._setMilliseconds(0)}if(this.minDate==undefined){this.minDate=a.jqx._jqxDateTimeInput.getDateTime(new Date);this.minDate._setYear(1900);this.minDate._setMonth(1);this.minDate._setDay(1);this.minDate._setHours(1);
this.minDate._setMinutes(1);this.minDate._setSeconds(1);this.minDate._setMilliseconds(1)}if(this.maxDate==undefined){this.maxDate=a.jqx._jqxDateTimeInput.getDateTime(new Date);this.maxDate._setYear(2100);this.maxDate._setMonth(1);this.maxDate._setDay(1);this.maxDate._setHours(1);this.maxDate._setMinutes(1);this.maxDate._setSeconds(1);this.maxDate._setMilliseconds(1)}if(this.firstDayOfWeek==undefined)this.firstDayOfWeek=0;if(this.showWeekNumbers==undefined)this.showWeekNumbers=false;this.cookies=false;
this.cookieoptions=null;this.showFooter=false;if(this.formatString==undefined)this.formatString="dd/MM/yyyy";if(this.width==undefined)this.width=null;if(this.height==undefined)this.height=null;if(this.textAlign==undefined)this.textAlign="left";if(this.readonly==undefined)this.readonly=false;if(this.culture==undefined)this.culture="default";this.activeEditor=this.activeEditor||null;if(this.showCalendarButton==undefined)this.showCalendarButton=true;if(this.openDelay==undefined)this.openDelay=350;if(this.closeDelay==
undefined)this.closeDelay=400;if(this.closeCalendarAfterSelection==undefined)this.closeCalendarAfterSelection=true;this.isEditing=false;this.enableBrowserBoundsDetection=false;this.dropDownHorizontalAlignment="left";this.enableAbsoluteSelection=false;this.disabled=false;this.buttonSize=18;this.animationType="slide";this.dropDownWidth="200px";this.dropDownHeight="200px";this.selectionMode="default";this.events=["valuechanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","open",
"close"]},createInstance:function(b){this.render()},render:function(){this.element.innerHTML="";this.host.attr({role:"dateTimeInput"});var f=this.createID();var k=this.createID();var b=a("<div style='overflow: hidden; border: 0px;'><div id='dateTimeWrapper' style='float: none; position: relative; width: 100%; height: 100%;'><div id='dateTimeContent"+f+"' style='position: relative; overflow: hidden; float: left;'/><div id='dateTimeButton"+k+"' style='position: relative; float: right;'/></div></div>");
this._setSize();if(this.width==null){this.width=this.host.width();this.host.width(this.width)}this.host.append(b);this.dateTimeWrapper=this.host.find("#dateTimeWrapper");this.inputElement=this.host.find("#dateTimeContent"+f);this.calendarElement=this.host.find("#dateTimeButton"+k);this.dateTimeInput=a("<input autocomplete='off' style='position: relative; border: none; margin: 0; padding: 0;' id='inputElement' class='jqx-input-content' type='textarea'/>").appendTo(this.inputElement);this.dateTimeInput.removeClass(this.toThemeProperty("jqx-input-content"));
this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-content"));this.dateTimeInput.addClass(this.toThemeProperty("jqx-widget-content"));var c=this.host.attr("name");if(!c)c=this.element.id;this.dateTimeInput.attr("name",c);this.inputElement.addClass(this.toThemeProperty("jqx-input"));this.inputElement.addClass(this.toThemeProperty("jqx-widget-content"));this.inputElement.addClass(this.toThemeProperty("jqx-rc-all"));this.inputElement.height(this.host.height());this.calendarButton=a("<div style='padding: 0px; margin: 0px; top: 0; font-size: 3px; position: relative;' class='jqx-input-button-header'><div style='position: relative; font-size: 3px;' class='jqx-input-button-innerheader'></div></div><div style='padding: 0px; margin: 0px; top: 0; position: relative;' class='jqx-input-button-content'/>").appendTo(this.calendarElement);
this.calendarButtonContent=this.host.find(".jqx-input-button-content");this.calendarButtonHeader=this.host.find(".jqx-input-button-header");this.calendarButtonInnerHeader=this.host.find(".jqx-input-button-innerheader");this.calendarButtonContent.removeClass(this.toThemeProperty("jqx-input-button-content"));this.calendarButtonContent.addClass(this.toThemeProperty("jqx-input-button-content"));this.calendarButtonContent.removeClass(this.toThemeProperty("jqx-widget-content"));this.calendarButtonContent.addClass(this.toThemeProperty("jqx-widget-content"));
this.calendarButtonHeader.removeClass(this.toThemeProperty("jqx-input-button-header"));this.calendarButtonHeader.addClass(this.toThemeProperty("jqx-input-button-header"));this.calendarButtonHeader.removeClass(this.toThemeProperty("jqx-widget-header"));this.calendarButtonHeader.addClass(this.toThemeProperty("jqx-widget-header"));this.calendarButtonInnerHeader.removeClass(this.toThemeProperty("jqx-input-button-innerHeader"));this.calendarButtonInnerHeader.addClass(this.toThemeProperty("jqx-input-button-innerHeader"));
var m=this;this._arrange();this.addHandler(this.host,"loadContent",function(e){m._arrange()});if(this.showCalendarButton)this.calendarButton.css("display","block");else this.calendarButton.css("display","none");if(a.jqx._jqxCalendar!=null&&a.jqx._jqxCalendar!=undefined)try{var j="calendar"+this.element.id;var h=a(a.find("#"+j));if(h.length>0)h.remove();var d=a("<div style='overflow: hidden; background: transparent; position: absolute;' id='calendar"+this.element.id+"'><div id='innerCalendar"+this.element.id+
"'></div></div>");if(a.jqx.utilities.getBrowser().browser=="opera")d.hide();d.appendTo(document.body);this.container=d;if(this.showFooter)this.dropDownHeight=this.dropDownHeight+30;this.calendarContainer=a(a.find("#innerCalendar"+this.element.id)).jqxCalendar({culture:this.culture,showFooter:this.showFooter,selectionMode:this.selectionMode,firstDayOfWeek:this.firstDayOfWeek,showWeekNumbers:this.showWeekNumbers,width:this.dropDownWidth,height:this.dropDownHeight,theme:this.theme});this.calendarContainer.css({position:"absolute",
zIndex:1E5,top:0,left:0});this.calendar=a.data(this.calendarContainer[0],"jqxCalendar").instance;var m=this;this.calendar.today=function(){m.setDate(new Date);m.hideCalendar()};this.calendar.clear=function(){m.setDate(null);m.hideCalendar()};this.calendar.render();if(a.jqx.utilities.getBrowser().browser=="opera")d.show();d.height(parseInt(this.calendarContainer.height())+25);d.width(parseInt(this.calendarContainer.width())+25);if(this.selectionMode=="range")this.readonly=true;if(this.animationType==
"none")this.container.css("display","none");else this.container.hide()}catch(l){}if(a.global==null||a.global==undefined)throw"jquery.global.js is not loaded.";a.global.preferCulture(this.culture);this.selectedText="";this._addHandlers();this.self=this;this.oldValue=this.getDate();this.items=new Array;this.editors=new Array;if(this.value)this.calendarButtonContent.html("<div style='line-height: 16px;  color: inherit; background: transparent; margin: 0; border: 0; padding: 0px; text-align: center; vertical-align: middle;'><b style='border: 0; padding: 0px; margin: 0px; background: transparent;'>"+
this.value.day+"</b></div>");this._loadItems();this._applyArrayExtension();this.editorText="";if(this.readonly==true)this.dateTimeInput.css("readonly",this.readonly);this.dateTimeInput.css("text-align",this.textAlign);this.host.addClass(this.toThemeProperty("jqx-widget"));this.propertyChangeMap.disabled=function(e,p,o,q){if(q){e.host.addClass(m.toThemeProperty("jqx-input-disabled"));e.dateTimeInput.addClass(m.toThemeProperty("jqx-input-disabled"));e.host.addClass(m.toThemeProperty("jqx-fill-state-disabled"))}else{e.host.removeClass(m.toThemeProperty("jqx-fill-state-disabled"));
e.host.removeClass(m.toThemeProperty("jqx-input-disabled"));e.dateTimeInput.removeClass(m.toThemeProperty("jqx-input-disabled"))}};if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-input-disabled"));this.host.addClass(this.toThemeProperty("jqx-input-disabled"));this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-disabled"))}if(this.host.parents("form").length>0)this.host.parents("form").bind("reset",function(){setTimeout(function(){m.setDate(new Date)},10)});if(this.cookies){var g=
a.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id);if(g!=null)this.setDate(new Date(g))}if(a.browser.msie&&a.browser.version<8)if(this.host.parents(".jqx-window").length>0){var n=this.host.parents(".jqx-window").css("z-index");d.css("z-index",n+10);this.calendarContainer.css("z-index",n+10)}},_setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=
null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);var e=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){e=true;this.host.width(this.width)}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){e=true;this.host.height(this.height)}if(e){var c=this;if(this.calendarContainer){this.refresh(false);var b=this.host.width();if(this.dropDownWidth!="auto")b=this.dropDownWidth;
this.calendarContainer.jqxCalendar({width:b});this.container.width(parseInt(b)+25)}var d=function(){if(c.calendarContainer){c._arrange();if(c.dropDownWidth=="auto"){var f=c.host.width();c.calendarContainer.jqxCalendar({width:f});c.container.width(parseInt(f)+25)}}};a(window).unbind("resize."+this.element.id);a(window).bind("resize."+this.element.id,function(){d()})}},_arrange:function(){var c=parseInt(this.host.width());var k=parseInt(this.host.height());var h=this.buttonSize;var e=3;this.calendarButtonHeader.width(h);
this.calendarButtonContent.height(h-e);this.calendarButtonContent.width(h);this.inputElement.height(k);var g=parseInt(this.inputElement.outerHeight())-parseInt(this.inputElement.height());g=0;var b=c-parseInt(this.calendarButton.outerWidth())-1*e;if(b>0)this.inputElement.width(b+"px");this.dateTimeInput.width(b-e+"px");this.dateTimeInput.css("left",0);this.dateTimeInput.css("top",0);this.inputElement.css("left",0);this.inputElement.css("top",0);var j=parseInt(this.calendarButtonHeader.outerWidth())/
2-parseInt(this.calendarButtonInnerHeader.outerWidth())/2;this.calendarButtonInnerHeader.css("left",j);var l=parseInt(this.calendarButtonContent.outerHeight())+parseInt(this.calendarButtonHeader.outerHeight());var f=parseInt(this.inputElement.outerHeight())/2-l/2;this.calendarElement.css("top",parseInt(f)+"px");var d=parseInt(this.inputElement.height())/2-parseInt(this.dateTimeInput.outerHeight())/2;this.dateTimeInput.css("margin","0px");this.dateTimeInput.css("padding","0px");this.dateTimeInput.css("top",
parseInt(d))},_removeHandlers:function(){var b=this;this.removeHandler(a(document),"mousedown."+this.element.id);this.removeHandler(this.dateTimeInput,"keydown."+this.element.id);this.removeHandler(this.dateTimeInput,"blur");this.removeHandler(this.dateTimeInput,"focus");this.removeHandler(this.calendarButton,"mousedown");this.removeHandler(this.dateTimeInput,"mousedown");this.removeHandler(this.dateTimeInput,"mouseup");this.removeHandler(this.dateTimeInput,"keydown");this.removeHandler(this.dateTimeInput,
"keyup");this.removeHandler(this.dateTimeInput,"keypress");if(this.calendarContainer!=null){this.removeHandler(this.calendarContainer,"cellSelected");this.removeHandler(this.calendarContainer,"cellMouseDown")}},isOpened:function(){var c=this;var b=a.data(document.body,"openedJQXCalendar"+this.element.id);if(b!=null&&b==c.calendarContainer)return true;return false},wheel:function(d,c){var e=0;if(!d)d=window.event;if(d.originalEvent&&d.originalEvent.wheelDelta)d.wheelDelta=d.originalEvent.wheelDelta;
if(d.wheelDelta)e=d.wheelDelta/120;else if(d.detail)e=-d.detail/3;if(e){var b=c._handleDelta(e);if(!b){if(d.preventDefault)d.preventDefault();d.returnValue=false;return b}else return false}if(d.preventDefault)d.preventDefault();d.returnValue=false},_handleDelta:function(b){if(b<0)this.spinDown();else this.spinUp();return false},_addHandlers:function(){var d=this.element.id;var b=this.element;var c=this;this.addHandler(this.host,"mousewheel",function(e){c.wheel(e,c)});this.addHandler(a(document),"mousedown."+
this.element.id,this._closeOpenedCalendar,{me:this});this.addHandler(this.dateTimeInput,"keydown."+this.element.id,function(g){var f=a.data(document.body,"openedJQXCalendar"+c.element.id);if(f!=null&&f==c.calendarContainer){var e=c.handleCalendarKey(g);return e}});if(this.calendarContainer!=null){this.addHandler(this.calendarContainer,"keydown",function(e){if(e.keyCode==13){c.hideCalendar("selected");c.dateTimeInput.focus();return true}else if(e.keyCode==27){c.hideCalendar();c.dateTimeInput.focus();
return true}if(e.keyCode==115)if(c.isOpened()){c.hideCalendar();c.dateTimeInput.focus();return false}else if(!c.isOpened()){c.showCalendar();c.dateTimeInput.focus();return false}if(e.altKey)if(e.keyCode==38){if(c.isOpened()){c.hideCalendar();c.dateTimeInput.focus();return false}}else if(e.keyCode==40)if(!c.isOpened()){c.showCalendar();c.dateTimeInput.focus();return false}});this.addHandler(this.calendarContainer,"cellSelected",function(f){if(c.closeCalendarAfterSelection){var e=a.data(document.body,
"openedJQXCalendarValue");if(f.args.selectionType=="mouse")if(c.selectionMode=="default")c.hideCalendar("selected");else if(c.calendar._clicks==0)c.hideCalendar("selected")}});this.addHandler(this.calendarContainer,"cellMouseDown",function(e){if(c.closeCalendarAfterSelection)if(c.calendar.value)a.data(document.body,"openedJQXCalendarValue",new a.jqx._jqxDateTimeInput.getDateTime(c.calendar.value.dateTime))})}this.addHandler(this.dateTimeInput,"blur",function(){if(c.value!=null){c.isEditing=false;
c._validateValue();c._updateText();c.inputElement.removeClass(c.toThemeProperty("jqx-fill-state-focus"))}});this.addHandler(this.dateTimeInput,"focus",function(){if(c.value!=null){var e=c._selection();c.isEditing=true;c._validateValue();c._updateText();c._setSelectionStart(e.start);c._selectGroup(-1);c.inputElement.addClass(c.toThemeProperty("jqx-fill-state-focus"))}});this.addHandler(this.calendarButton,"mousedown",function(f){var g=c.container;var e=g.css("display")=="block";if(!c.disabled)if(!c.isanimating)if(e)c.hideCalendar();
else{c.showCalendar();f.preventDefault()}});this.addHandler(this.dateTimeInput,"mousedown",function(e){return c._raiseEvent(2,e)});this.addHandler(this.dateTimeInput,"mouseup",function(e){return c._raiseEvent(3,e)});this.addHandler(this.dateTimeInput,"keydown",function(e){return c._raiseEvent(4,e)});this.addHandler(this.dateTimeInput,"keyup",function(e){return c._raiseEvent(5,e)});this.addHandler(this.dateTimeInput,"keypress",function(e){return c._raiseEvent(6,e)})},createID:function(){var b=Math.random()+
"";b=b.replace(".","");b="99"+b;b=b/1;return"dateTimeInput"+b},setMaxDate:function(b){if(b==null)return;this.maxDate=a.jqx._jqxDateTimeInput.getDateTime(b);if(this.calendar!=null)this.calendar.setMaxDate(b)},getMaxDate:function(){if(this.maxDate!=null&&this.maxDate!=undefined)return this.maxDate.dateTime;return null},setMinDate:function(b){if(b==null)return;this.minDate=a.jqx._jqxDateTimeInput.getDateTime(b);if(this.calendar!=null)this.calendar.setMinDate(b)},getMinDate:function(){if(this.minDate!=
null&&this.minDate!=undefined)return this.minDate.dateTime;return null},propertyChangedHandler:function(b,c,e,d){if(b.isInitialized==undefined||b.isInitialized==false)return;if(c=="firstDayOfWeek")b.calendarContainer.jqxCalendar({firstDayOfWeek:d});if(c=="showWeekNumbers")b.calendarContainer.jqxCalendar({showWeekNumbers:d});if(c=="culture"){b._loadItems();if(b.calendar!=null){b.calendar.culture=d;b.calendar.render()}}else if(c=="formatString")b._loadItems();if(c=="theme")if(b.dateTimeInput){b.host.removeClass();
b.host.addClass(b.toThemeProperty("jqx-widget"));b.dateTimeInput.removeClass();b.dateTimeInput.addClass(b.toThemeProperty("jqx-input-content"));b.dateTimeInput.addClass(b.toThemeProperty("jqx-widget-content"));b.inputElement.removeClass();b.inputElement.addClass(b.toThemeProperty("jqx-input"));b.inputElement.addClass(b.toThemeProperty("jqx-widget-content"));b.inputElement.addClass(b.toThemeProperty("jqx-rc-all"));b.calendarButtonContent.removeClass();b.calendarButtonContent.addClass(b.toThemeProperty("jqx-input-button-content"));
b.calendarButtonContent.addClass(b.toThemeProperty("jqx-widget-content"));b.calendarButtonHeader.removeClass();b.calendarButtonHeader.addClass(b.toThemeProperty("jqx-input-button-header"));b.calendarButtonHeader.addClass(b.toThemeProperty("jqx-widget-header"));b.calendarButtonInnerHeader.removeClass();b.calendarButtonInnerHeader.addClass(b.toThemeProperty("jqx-input-button-innerHeader"));b.calendarContainer.jqxCalendar({theme:d})}if(c=="width"||c=="height")b.refresh();b._setOption(c,d);if(c=="dropDownWidth"||
c=="dropDownHeight"){b.calendarContainer.jqxCalendar({width:b.dropDownWidth,height:b.dropDownHeight});b.calendar.render();b.container.height(b.calendarContainer.height());b.container.width(b.calendarContainer.width())}},setDate:function(b){if(b==null||b=="null"||b=="undefined"){if(this.value!=null){this.value=null;this.calendar.setDate(null);this._refreshValue();if(this.cookies)if(this.value!=null)a.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions);
this._raiseEvent("0",b)}return}if(b<this.getMinDate()||b>this.getMaxDate())return;if(this.value==null){this.value=new a.jqx._jqxDateTimeInput.getDateTime(new Date);this.value._setHours(0);this.value._setMinutes(0);this.value._setSeconds(0);this.value._setMilliseconds(0)}if(b.getFullYear){this.value._setYear(b.getFullYear());this.value._setMonth(b.getMonth()+1);this.value._setHours(b.getHours());this.value._setMinutes(b.getMinutes());this.value._setSeconds(b.getSeconds());this.value._setMilliseconds(b.getMilliseconds());
this.value._setDay(b.getDate())}this._refreshValue();if(this.cookies)if(this.value!=null)a.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions);this._raiseEvent("0",b)},getDate:function(){if(this.value==undefined)return null;return this.value.dateTime},setRange:function(d,c){this.calendar.setRange(d,c);var b=d;if(b.getFullYear){this.value._setYear(b.getFullYear());this.value._setMonth(b.getMonth()+1);this.value._setHours(b.getHours());this.value._setMinutes(b.getMinutes());
this.value._setSeconds(b.getSeconds());this.value._setMilliseconds(b.getMilliseconds());this.value._setDay(b.getDate())}this._raiseEvent("0",this.value.dateTime)},getRange:function(){return this.calendar.getRange()},_validateValue:function(){var b=false;for(i=0;i<this.items.length;i++){var c=this.editors[i].value;switch(this.items[i].type){case "FORMAT_AMPM":if(c<0)c=0;else if(c>1)c=1;break;case "Character":break;case "Day":if(c<1)c=1;else if(c>31)c=31;break;case "FORMAT_hh":case "FORMAT_HH":if(c<
0)c=0;else if(c>23)c=23;break;case "Millisecond":if(c<0)c=0;else if(c>99)c=99;break;case "Minute":if(c<0)c=0;else if(c>59)c=59;break;case "Month":if(c<1)c=1;else if(c>12)c=12;break;case "ReadOnly":break;case "Second":if(c<0)c=0;else if(c>59)c=59;break;case "Year":if(c<this.minDate.year)c=this.minDate.year;else if(c>this.maxDate.year)c=this.maxDate.year;break}if(this.editors[i].value!=c){this.editors[i].value=c;b=true}}this.updateValue();if(this.value!=null)if(this.value.dateTime>this.maxDate.dateTime){this._internalSetValue(this.maxDate);
this._updateEditorsValue()}else if(this.value.dateTime<this.minDate.dateTime){this._internalSetValue(this.minDate);this._updateEditorsValue()}},spinUp:function(){var d=this.value;if(d==null)return;if(this.activeEditor!=null){var b=this.editors.indexOf(this.activeEditor);if(this.items[b].type=="Day")if(this.value!=null)this.activeEditor.maxValue=this.value._daysInMonth(this.value.year,this.value.month);var c=this.activeEditor.positions;this.activeEditor.increaseValue(this.enableAbsoluteSelection);
this.activeEditor.positions=c}if(this.isEditing)this.isEditing=false;this.updateValue();this.isEditing=true;this._updateText();var e=this.editors.indexOf(this.activeEditor);if(e>=0)this._selectGroup(e)},spinDown:function(){var d=this.value;if(d==null)return;if(this.activeEditor!=null){var b=this.editors.indexOf(this.activeEditor);if(this.items[b].type=="Day")if(this.value!=null)this.activeEditor.maxValue=this.value._daysInMonth(this.value.year,this.value.month);var c=this.activeEditor.positions;this.activeEditor.decreaseValue(this.enableAbsoluteSelection);
this.activeEditor.positions=c}if(this.isEditing)this.isEditing=false;this.updateValue();this.isEditing=true;this._updateText();var e=this.editors.indexOf(this.activeEditor);if(e>=0)this._selectGroup(e)},_passKeyToCalendar:function(c){if(c.keyCode==13){this.hideCalendar("selected");return true}else if(c.keyCode==27){var e=this.calendarContainer;var d=this.calendar;var f=this.closeCalendarAfterSelection;this.closeCalendarAfterSelection=false;d.setDate(this.value.dateTime);this.closeCalendarAfterSelection=
f;this.hideCalendar()}var f=this.closeCalendarAfterSelection;this.closeCalendarAfterSelection=false;var b=this.calendar._handleKey(c);this.closeCalendarAfterSelection=f;return b},handleCalendarKey:function(j){var c=a(j.target);var e=a.data(document.body,"openedJQXCalendar"+this.element.id);if(e!=null)if(e.length>0){var h=e[0].id.toString();var d=h.toString().substring(13);var g=a(document).find("#"+d);var f=a.data(g[0],"jqxDateTimeInput").instance;var b=f._passKeyToCalendar(j);return b}return true},
_findPos:function(c){if(c==null)return;while(c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c)))c=c.nextSibling;var b=a(c).offset();return[b.left,b.top]},testOffset:function(h,f,c){var g=h.outerWidth();var k=h.outerHeight();var j=a(window).width()+a(window).scrollLeft();var e=a(window).height()+a(window).scrollTop();if(f.left+g>j)if(g>this.host.width()){var d=this.host.offset().left;var b=g-this.host.width();f.left=d-b+2}if(f.left<0)f.left=parseInt(this.host.offset().left)+"px";f.top-=
Math.min(f.top,f.top+k>e&&e>k?Math.abs(k+c+23):0);return f},open:function(){this.showCalendar()},close:function(b){this.hideCalendar()},hide:function(){this.close()},show:function(){this.open()},showCalendar:function(){var h=this.calendarContainer;var k=this.calendar;var c=this.container;var r=this;var n=a(window).scrollTop();var g=a(window).scrollLeft();var l=parseInt(this._findPos(this.inputElement[0])[1])+parseInt(this.inputElement.outerHeight())-1+"px";var f=parseInt(this.host.offset().left)+
"px";var q=a.jqx.mobile.isSafariMobileBrowser();var d=a.jqx.utilities.hasTransform(this.host);if(d||q!=null&&q){f=a.jqx.mobile.getLeftPos(this.element);l=a.jqx.mobile.getTopPos(this.element)+parseInt(this.inputElement.outerHeight())}this.container.css("left",f);this.container.css("top",l);var e=this.closeCalendarAfterSelection;this.closeCalendarAfterSelection=false;this.isEditing=false;this._validateValue();this._updateText();var o=this.value!=null?this.value.dateTime:new Date;if(r.selectionMode==
"default")k.setDate(o);this.closeCalendarAfterSelection=e;var s=false;if(this.dropDownHorizontalAlignment=="right"){var m=this.container.width();var b=Math.abs(m-this.host.width());if(m>this.host.width())this.container.css("left",2+parseInt(f)-b+"px");else this.container.css("left",25+parseInt(f)+b+"px")}if(this.enableBrowserBoundsDetection){var j=this.testOffset(h,{left:parseInt(this.container.css("left")),top:parseInt(l)},parseInt(this.host.outerHeight()));if(parseInt(this.container.css("top"))!=
j.top){s=true;h.css("top",23)}else h.css("top",0);this.container.css("top",j.top);if(parseInt(this.container.css("left"))!=j.left)this.container.css("left",j.left)}this._raiseEvent(7,h);if(this.animationType!="none"){this.container.css("display","block");var p=parseInt(h.outerHeight());h.stop();this.isanimating=true;this.opening=true;if(this.animationType=="fade"){h.css("margin-top",0);h.css("opacity",0);h.animate({opacity:1},this.openDelay,function(){r.isanimating=false;r.opening=false;a.data(document.body,
"openedJQXCalendar"+r.element.id,h);r.calendarContainer.focus()})}else{h.css("opacity",1);if(s)h.css("margin-top",p);else h.css("margin-top",-p);h.animate({"margin-top":0},this.openDelay,function(){r.isanimating=false;r.opening=false;a.data(document.body,"openedJQXCalendar"+r.element.id,h);r.calendarContainer.focus()})}}else{h.stop();r.isanimating=false;r.opening=false;h.css("opacity",1);h.css("margin-top",0);this.container.css("display","block");a.data(document.body,"openedJQXCalendar"+r.element.id,
h);this.calendarContainer.focus()}if(this.value==null)if(this.calendar&&this.calendar._getSelectedCell())this.calendar._getSelectedCell().isSelected=false},hideCalendar:function(g){var f=this.calendarContainer;var c=this.container;var d=this;a.data(document.body,"openedJQXCalendar"+this.element.id,null);if(this.animationType!="none"){var b=f.outerHeight();f.css("margin-top",0);this.isanimating=true;var e=-b;if(parseInt(this.container.offset().top)<parseInt(this.host.offset().top))e=b;if(this.animationType==
"fade")f.animate({opacity:0},this.closeDelay,function(){c.css("display","none");d.isanimating=false});else f.animate({"margin-top":e},this.closeDelay,function(){c.css("display","none");d.isanimating=false})}else c.css("display","none");if(g!=undefined)this._updateSelectedDate();this._raiseEvent(8,f)},_updateSelectedDate:function(){var f=this.value;if(f==null){f=new a.jqx._jqxDateTimeInput.getDateTime(new Date);f._setHours(0);f._setMinutes(0);f._setSeconds(0);f._setMilliseconds(0)}var b=f.hour;var g=
f.minute;var e=f.second;var c=f.millisecond;if(this.selectionMode=="range"&&this.calendar.getRange().from==null){this.setDate(null);return}var d=new a.jqx._jqxDateTimeInput.getDateTime(this.calendar.value.dateTime);d._setHours(b);d._setMinutes(g);d._setSeconds(e);d._setMilliseconds(c);this.setDate(d.dateTime)},_closeOpenedCalendar:function(b){var e=a(b.target);var k=a.data(document.body,"openedJQXCalendar"+b.data.me.element.id);var d=false;a.each(e.parents(),function(){if(this.className.indexOf("jqx-calendar")!=
-1){d=true;return false}if(this.className.indexOf("jqx-input")!=-1){d=true;return false}});if(a(b.target).ischildof(b.data.me.host))return true;if(b.target!=null&&(b.target.tagName=="B"||b.target.tagName=="b")){var l=b.data.me.host.offset();var o=b.data.me.host.width();var c=b.data.me.host.height();var m=parseInt(l.top);var g=parseInt(l.left);if(m<=b.pageY&&b.pageY<=m+c)if(g<=b.pageX&&b.pageX<=g+o)return true}if(k!=null&&!d)if(k.length>0){var h=k[0].id.toString();var f=h.toString().substring(13);
var j=a(document).find("#"+f);var n=a.data(j[0],"jqxDateTimeInput").instance;n.hideCalendar();a.data(document.body,"openedJQXCalendar"+b.data.me.element.id,null)}},_applyArrayExtension:function(){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c){var b=this.length;var d=Number(arguments[1])||0;d=d<0?Math.ceil(d):Math.floor(d);if(d<0)d+=b;for(;d<b;d++)if(d in this&&this[d]===c)return d;return-1}},_loadItems:function(){if(this.value!=null){this.items=new Array;var c=this._getFormatValue(this.formatString);
this.items=this._parseFormatValue(c);this.editors=new Array;for(i=0;i<this.items.length;i++){var b=this.items[i].getDateTimeEditorByItemType(this.value);this.editors[i]=b}}this._updateEditorsValue();this._updateText()},_updateText:function(){var d="";if(this.items.length==0&&this.value!=null)this._loadItems();if(this.value!=null){if(this.items.length>=1)d=this.format(this.value,0,this.items.length);var b=this.dateTimeInput.val();if(b!=d)this._raiseEvent(1,this.value)}if(this.selectionMode=="range"){var c=
this.getRange();fromText=this.format(this.value,0,this.items.length);if(c.to){var f=a.jqx._jqxDateTimeInput.getDateTime(c.from);fromText=this.format(f,0,this.items.length);var e=a.jqx._jqxDateTimeInput.getDateTime(c.to);toText=this.format(e,0,this.items.length);var d=fromText+" - "+toText}}this.dateTimeInput.val(d)},format:function(f,g,e){var b="";for(i=g;i<e;++i){var c=this.items[i].dateParser(f);if(this.isEditing&&this.items[i].type!="ReadOnly"){var d=this.items[i].type=="Day"&&this.items[i].format.length>
2;if(this.items[i].type=="FORMAT_AMPM")d=true;if(!d){c=this.items[i].dateParserInEditMode(new Number(this.editors[i].value),"d"+this.editors[i].maxEditPositions);while(c.length<this.editors[i].maxEditPositions)c="0"+c}}b+=c}return b},_getFormatValueGroupLength:function(b){for(i=1;i<b.toString().length;++i)if(b.substring(i,i+1)!=b.substring(0,1))return i;return b.length},_parseFormatValue:function(h){var c=new Array;var f=h.toString();var e=0;while(f.length>0){var d=this._getFormatValueGroupLength(f);
var g=null;switch(f.substring(0,1)){case ":":case "/":d=1;g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,1),"ReadOnly",this.culture);break;case '"':case "'":var b=f.indexOf(f[0],1);g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(1,1+Math.max(1,b-1)),"ReadOnly",this.culture);d=Math.max(1,b+1);break;case "\\":if(f.length>=2){g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(1,1),"ReadOnly",this.culture);d=2}break;case "d":case "D":if(d>2)g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,
d),"Day",this.culture);else g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Day",this.culture);break;case "f":case "F":if(d>7)d=7;if(d>3)g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"ReadOnly",this.culture);else g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Millisecond",this.culture);break;case "g":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"ReadOnly",this.culture);break;case "h":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,
d),"FORMAT_hh",this.culture);break;case "H":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"FORMAT_HH",this.culture);break;case "m":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Minute",this.culture);break;case "M":if(d>4)d=4;g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Month",this.culture);break;case "s":case "S":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Second",this.culture);break;case "t":case "T":g=
a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"FORMAT_AMPM",this.culture);break;case "y":case "Y":if(d>1)g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"Year",this.culture);else{d=1;g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,1),dateTimeFormatInfo,"ReadOnly",this.culture)}break;case "z":g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,d),"ReadOnly",this.culture);break;default:d=1;g=a.jqx._jqxDateTimeInput.DateTimeFormatItem._create(f.substring(0,
1),"ReadOnly",this.culture);break}c[e]=a.extend(true,{},g);f=f.substring(d);e++}return c},_getFormatValue:function(b){if(b==null||b.length==0)b="d";if(b.length==1)switch(b.substring(0,1)){case "d":return a.global.culture.calendar.patterns.d;case "D":return a.global.culture.calendar.patterns.D;case "t":return a.global.culture.calendar.patterns.t;case "T":return a.global.culture.calendar.patterns.T;case "f":return a.global.culture.calendar.patterns.f;case "F":return a.global.culture.calendar.patterns.F;
case "M":return a.global.culture.calendar.patterns.M;case "Y":return a.global.culture.calendar.patterns.Y;case "S":return a.global.culture.calendar.patterns.S}if(b.length==2&&b.substring(0,1)=="%")b=b.substring(1);return b},_updateEditorsValue:function(){var g=this.value;if(g==null)return;var e=g.year;var c=g.day;var b=g.hour;var f=g.millisecond;var d=g.second;var j=g.minute;var h=g.month;if(this.items==null)return;for(i=0;i<this.items.length;i++)switch(this.items[i].type){case "FORMAT_AMPM":this.editors[i].value=
0;break;case "Day":this.editors[i].value=c;break;case "FORMAT_hh":this.editors[i].value=b;break;case "FORMAT_HH":this.editors[i].value=b;break;case "Millisecond":this.editors[i].value=f;break;case "Minute":this.editors[i].value=j;break;case "Month":this.editors[i].value=h;break;case "Second":this.editors[i].value=d;break;case "Year":this.editors[i].value=e;break}},updateValue:function(){if(this.isEditing)return;var j=0;var n=1;var u=1;var g=0;var b=0;var B=0;var p=0;var A=1;var e=0;var h=false;var m=
false;var v=false;var o=new Array;var c=null;var s=0;for(i=0;i<this.items.length;i++)switch(this.items[i].type){case "FORMAT_AMPM":e=this.editors[i].value;c=this.editors[i];break;case "Character":break;case "Day":if(this.items[i].format.length<4){u=this.editors[i].value;o[s++]=this.editors[i];if(u==0)u=1;v=true}break;case "FORMAT_hh":var x=this.editors[i];g=x.value;break;case "FORMAT_HH":g=this.editors[i].value;break;case "Millisecond":b=this.editors[i].value;break;case "Minute":p=this.editors[i].value;
break;case "Month":A=this.editors[i].value;m=true;if(A==0)A=1;break;case "ReadOnly":break;case "Second":B=this.editors[i].value;break;case "Year":h=true;n=this.editors[i].value;var z=this.editors[i].getDateTimeItem().format;if(z.length<3){var r="1900";if(r.Length==4){var q=""+r[0]+r[1];var w;w=parseInt(q);n=n+w*100}}if(n==0)n=1;break}var y=this.value!=null?new Date(this.value.dateTime):null;if(n>0&&A>0&&u>0&&p>=0&&g>=0&&B>=0&&b>=0){var C=this.value;if(C!=null){if(!h)n=C.year;if(!m)A=C.month;if(!v)u=
C.day}try{if(A>12)A=12;if(A<1)A=1;if(C._daysInMonth(n,A)<=u){u=C._daysInMonth(n,A);if(o!=null&&o.length>0)for(i=0;i<o.length;i++)o[i].value=u}if(c!=null)c.value=g<12?0:1;this.value._setYear(parseInt(n));this.value._setDay(u);this.value._setMonth(A);this.value._setHours(g);this.value._setMinutes(p);this.value._setSeconds(B);this.value._setMilliseconds(b)}catch(f){this.value=C}if(y!=null){var t=this.value.dateTime.getFullYear()==y.getFullYear()&&this.value.dateTime.getDate()==y.getDate()&&this.value.dateTime.getMonth()==
y.getMonth()&&this.value.dateTime.getHours()==y.getHours()&&this.value.dateTime.getMinutes()==y.getMinutes()&&this.value.dateTime.getSeconds()==y.getSeconds();if(!t){this._raiseEvent("0",this.value.dateTime);if(this.cookies)if(this.value!=null)a.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions)}this.calendarButtonContent.html("<div style='line-height: 16px; background: transparent; margin: 0; border: 0; padding: 0px; text-align: center; vertical-align: middle;'><b style='border: 0; padding: 0px; margin: 0px; background: transparent;'>"+
this.value.day+"</b></div>")}else this.calendarButtonContent.html("<div style='line-height: 16px; background: transparent; margin: 0; border: 0; padding: 0px; text-align: center; vertical-align: middle;'><b style='border: 0; padding: 0px; margin: 0px; background: transparent;'></b></div>")}var d=this.editors.indexOf(this.activeEditor);var l=this.items[d]},_internalSetValue:function(b){this.value._setYear(parseInt(b.year));this.value._setDay(b.day);this.value._setMonth(b.month);this.value._setHours(b.hour);
this.value._setMinutes(b.minute);this.value._setSeconds(b.second);this.value._setMilliseconds(b.milisecond)},_raiseEvent:function(c,j){var h=this.events[c];var d={};d.owner=this;if(j==null)j=new Date;var g=j.charCode?j.charCode:j.keyCode?j.keyCode:0;var k=true;var f=this.readonly;var b=new jQuery.Event(h);b.owner=this;b.args=d;b.args.date=this.getDate();if(this.selectionMode=="range")b.args.date=this.getRange();if(this.host.css("display")=="none")return true;if(c!=2&&c!=3)k=this.host.trigger(b);var e=
this;if(!f)if(c==2&&!this.disabled)setTimeout(function(){e.isEditing=true;e._selectGroup(-1)},25);if(c==4){if(f||this.disabled)return false;k=this._handleKeyDown(j,g)}else if(c==5){if(f||this.disabled)return false}else if(c==6){if(f||this.disabled)return false;k=this._handleKeyPress(j,g)}return k},_doLeftKey:function(){if(this.activeEditor!=null){if(!this.isEditing)this.isEditing=true;var b=this.activeEditor;var d=false;var e=this.editors.indexOf(this.activeEditor);var c=e;if(this.enableAbsoluteSelection)if(e>=
0&&this.activeEditor.positions>0){this.activeEditor.positions--;this._selectGroup(e);return}while(e>0){this.activeEditor=this.editors[--e];this._selectGroup(e);if(this.items[e].type!="ReadOnly"){d=true;break}}if(!d)if(c>=0)this.activeEditor=this.editors[c];if(this.activeEditor!=null&&b!=this.activeEditor)if(this.items[e].type!="ReadOnly")if(this.enableAbsoluteSelection)this.activeEditor.positions=this.activeEditor.maxEditPositions-1;else this.activeEditor.positions=0;if(this.activeEditor!=b){this._validateValue();
this._updateText();this._selectGroup(this.editors.indexOf(this.activeEditor))}}},_doRightKey:function(){if(this.activeEditor!=null){if(!this.isEditing)this.isEditing=true;var b=this.activeEditor;var d=false;var e=this.editors.indexOf(this.activeEditor);var c=e;if(this.enableAbsoluteSelection)if(e>=0&&this.activeEditor.positions<this.activeEditor.maxEditPositions-1){this.activeEditor.positions++;this._selectGroup(e);return}while(e<=this.editors.length-2){this.activeEditor=this.editors[++e];this._selectGroup(e);
if(this.items[e].type!="ReadOnly"){if(this.items[e].type=="Day"&&this.items[e].format.length>2)break;if(this.items[e].type=="FORMAT_AMPM")break;d=true;break}}if(!d)if(c>=0)this.activeEditor=this.editors[c];if(this.activeEditor!=null&&this.activeEditor!=b)if(this.items[e].type!="ReadOnly")this.activeEditor.positions=0;if(this.activeEditor!=b){this._validateValue();this._updateText();this._selectGroup(this.editors.indexOf(this.activeEditor))}}},_saveSelectedText:function(){var b=this._selection();var d=
"";var c=this.dateTimeInput.val();if(b.start>0||b.length>0)for(i=b.start;i<b.end;i++)d+=c[i];window.clipboardData.setData("Text",d);return d},_selectWithAdvancePattern:function(){var f=this.editors.indexOf(this.activeEditor);var g=false;if(this.items[f].type!="ReadOnly"&&this.items[f].type!="Format_AMPM")g=true;if(!g)return;var d=this.activeEditor;if(d!=null){var e=d.positions==d.maxEditPositions;if(e){this.editorText="";var c=d.value;var b=false;switch(this.items[f].type){case "FORMAT_AMPM":if(c<
0)c=0;else if(c>1)c=1;break;case "Character":break;case "Day":if(c<1)c=1;else if(c>31)c=31;break;case "FORMAT_hh":case "FORMAT_HH":if(c<0)c=0;else if(c>23)c=23;break;case "Millisecond":if(c<0)c=0;else if(c>99)c=99;break;case "Minute":if(c<0)c=0;else if(c>59)c=59;break;case "Month":if(c<1)c=1;else if(c>12)c=12;break;case "ReadOnly":break;case "Second":if(c<0)c=0;else if(c>59)c=59;break;case "Year":if(c<this.minDate.year)c=this.minDate.year;else if(c>this.maxDate.year)c=this.maxDate.year;break}if(d.value!=
c)b=true;if(!b){this.isEditing=false;this._validateValue();this._updateText();this.isEditing=true;this._doRightKey();return true}return false}}},_handleKeyPress:function(j,n){var m=this._selection();var b=this;if(j.ctrlKey&&n==97||j.ctrlKey&&n==65)return true;if(n==8){if(m.start>0)b._setSelectionStart(m.start);return false}if(n==46){if(m.start<this.items.length)b._setSelectionStart(m.start);return false}if(m.start>=0){var d=String.fromCharCode(n);var k=parseInt(d);if(!isNaN(k)){if(this.container.css("display")==
"block")this.hideCalendar();this.updateValue();this._updateText();var g=false;var h=this.editors.indexOf(this.activeEditor);var c=null;this.isEditing=true;if(h.type!="ReadOnly"&&h.type!="FORMAT_AMPM")c=this.activeEditor;if(c!=null&&c.positions==0)this.editorText="";if(this.activeEditor==null)this.activeEditor=this.editors[0];if(this.activeEditor==null)return false;this.activeEditor.insert(d);if(c!=null&&this.editorText.length>=c.maxEditPositions)this.editorText="";this.editorText+=d;var o=this._selectWithAdvancePattern();
if(this.activeEditor.positions==this.activeEditor.maxEditPositions){var f=this._getLastEditableEditorIndex();if(this.editors.indexOf(this.activeEditor)==f&&o&&this.enableAbsoluteSelection)this.activeEditor.positions=this.activeEditor.maxEditPositions-1;else this.activeEditor.positions=0}g=true;this.updateValue();this._updateText();this._selectGroup(this.editors.indexOf(this.activeEditor));return false}}var l=this._isSpecialKey(n);return l},_getLastEditableEditorIndex:function(){var b=0;var c=this;
for(itemIndex=this.items.length-1;itemIndex>=0;itemIndex--)if(this.items[itemIndex].type!="ReadOnly")return itemIndex;return-1},_handleKeyDown:function(h,b){if(h.keyCode==115)if(this.isOpened()){this.hideCalendar();return false}else if(!this.isOpened()){this.showCalendar();return false}if(h.altKey)if(h.keyCode==38){if(this.isOpened()){this.hideCalendar();return false}}else if(h.keyCode==40)if(!this.isOpened()){this.showCalendar();return false}if(this.isOpened())return;var f=this._selection();if(h.ctrlKey&&
b==99||h.ctrlKey&&b==67){this._saveSelectedText(h);return false}if(h.ctrlKey&&b==122||h.ctrlKey&&b==90)return false;if(h.ctrlKey&&b==118||h.ctrlKey&&b==86||h.shiftKey&&b==45)return false;if(b==8||b==46){if(!h.altKey&&!h.ctrlKey&&b==46){this.isEditing=false;this.setDate(null)}else if(this.activeEditor!=null){var j=this.editors.indexOf(this.activeEditor);if(this.activeEditor.positions>=0){var d=a.global.format(Number(this.activeEditor.value),"d"+this.activeEditor.maxEditPositions,this.culture);tmp=
d;tmp=tmp.substring(0,this.activeEditor.positions)+"0"+tmp.substring(this.activeEditor.positions+1);if(parseInt(tmp)<this.activeEditor.minValue)tmp=a.global.format(Number(this.activeEditor.minValue),"d"+this.activeEditor.maxEditPositions,this.culture);if(this.enableAbsoluteSelection)this.activeEditor.value=tmp;else this.activeEditor.value=this.activeEditor.minValue;this._validateValue();this._updateText();if(b==8){var c=this;if(this.enableAbsoluteSelection&&this.activeEditor.positions>0)setTimeout(function(){c.activeEditor.positions=
c.activeEditor.positions-1;c._selectGroup(j)},10);else setTimeout(function(){c._doLeftKey()},10)}else this._selectGroup(j)}else this._doLeftKey()}return false}if(b==38){this.spinUp();return false}else if(b==40){this.spinDown();return false}if(b==37){this._doLeftKey();return false}else if(b==39){this._doRightKey();return false}var g=this._isSpecialKey(b);if(!a.browser.mozilla)return true;return g},_isSpecialKey:function(b){if(b!=8&&b!=9&&b!=13&&b!=35&&b!=36&&b!=37&&b!=39&&b!=27&&b!=46)return false;
return true},_selection:function(){if("selectionStart"in this.dateTimeInput[0]){var f=this.dateTimeInput[0];var g=f.selectionEnd-f.selectionStart;return{start:f.selectionStart,end:f.selectionEnd,length:g,text:f.value}}else{var c=document.selection.createRange();if(c==null)return{start:0,end:f.value.length,length:0};var b=this.dateTimeInput[0].createTextRange();var d=b.duplicate();b.moveToBookmark(c.getBookmark());d.setEndPoint("EndToStart",b);var g=c.text.length;return{start:d.text.length,end:d.text.length+
c.text.length,length:g,text:c.text}}},_selectGroup:function(j){if(this.host.css("display")=="none")return;var l=this._selection();var e="";var b="";var c=null;for(i=0;i<this.items.length;i++){b=this.items[i].dateParser(this.value);if(this.isEditing&&this.items[i].type!="ReadOnly"){var h=this.items[i].type=="Day"&&this.items[i].format.length>2;if(this.items[i].type=="FORMAT_AMPM")h=true;if(!h){b=this.items[i].dateParserInEditMode(new Number(this.editors[i].value),"d"+this.editors[i].maxEditPositions);
while(b.length<this.editors[i].maxEditPositions)b="0"+b}}e+=b;if(this.items[i].type=="ReadOnly")continue;if(this.items[i].type=="Day"&&this.items[i].format.length>2)continue;if(this.items[i].type=="FORMAT_AMPM")continue;if(j!=undefined&&j!=-1){if(i>=j){var k=e.length-b.length;var d=b.length;if(this.enableAbsoluteSelection)if(!isNaN(parseInt(b))&&this.isEditing&&j!=-1){d=1;k+=this.editors[i].positions}if(k==this.dateTimeInput.val().length)k--;this._setSelection(k,k+d);c=this.editors[i];this.activeEditor=
c;break}}else if(e.length>=l.start){c=this.editors[i];this.activeEditor=c;var k=e.length-b.length;var d=1;if(this.enableAbsoluteSelection){if(!isNaN(parseInt(b))&&this.isEditing&&j!=-1){d=1;k+=this.editors[i].positions}}else d=b.length;this._setSelection(k,k+d);break}}if(i<this.items.length&&j==-1)if(this.items[i].type!="ReadOnly")this.activeEditor.positions=0;var g=this._selection();if(g.length==0)if(g.start>0){var f=this._getLastEditableEditorIndex();if(f>=0)this._selectGroup(f)}},_getLastEditableEditorIndex:function(){var b=
-1;for(i=0;i<this.editors.length;i++){if(this.items[i].type=="ReadOnly")continue;if(this.items[i].type=="Day"&&this.items[i].format.length>2)continue;if(this.items[i].type=="FORMAT_AMPM")continue;b=i}return b},_setSelection:function(d,b){if("selectionStart"in this.dateTimeInput[0])this.dateTimeInput[0].setSelectionRange(d,b);else{var c=this.dateTimeInput[0].createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",d);c.select()}},_setSelectionStart:function(b){this._setSelection(b,
b)},destroy:function(){this.host.removeClass("jqx-rc-all");this._removeHandlers();this.dateTimeInput.remove();this.host.remove()},refresh:function(b){if(b!=true){this._setSize();this._arrange()}},_setOption:function(b,c){if(b==="value")if(c==null){this.value=c;this._refreshValue()}else if(!this.value._equalDate(c.dateTime)){this.value=c;this._refreshValue()}if(b=="maxDate")this.calendar.maxDate=c;if(b=="minDate")this.calendar.minDate=c;if(b=="showCalendarButton")if(c)this.calendarButton.css("display",
"block");else this.calendarButton.css("display","none");if(b=="disabled")this.dateTimeInput.attr("disabled",c);if(b=="readonly"){this.readonly=c;this.dateTimeInput.css("readonly",c)}if(b=="textAlign"){this.dateTimeInput.css("text-align",c);this.textAlign=c}if(b=="width"){this.width=c;this.width=parseInt(this.width);this._arrange()}else if(b=="height"){this.height=c;this.height=parseInt(this.height);this._arrange()}},_refreshValue:function(){this._updateEditorsValue();this.updateValue();this._validateValue();
this._updateText()}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.DateTimeFormatItem={};a.extend(a.jqx._jqxDateTimeInput.DateTimeFormatItem,{_create:function(d,c,b){this.format=d;this.type=c;this.culture=b;return this},_itemValue:function(){switch(this.format.length){case 1:return 9;case 2:return 99;case 3:default:return 999}},_maximumValue:function(){switch(this.format.length){case 1:return 9;case 2:return 99;case 3:default:return 999}},dateParser:function(b){if(b==null)return"";var c=a.global.format(b.dateTime,this.format.length==
1?"%"+this.format:this.format,this.culture);return c},dateParserInEditMode:function(d,c){if(d==null)return"";var b=a.global.format(d.toString(),c.length==1?"%"+c:c,this.culture);return b},getDateTimeEditorByItemType:function(q){switch(this.type){case "FORMAT_AMPM":var h=a.jqx._jqxDateTimeInput.AmPmEditor._createAmPmEditor(this.format,q.hour/12,a.global.culture.calendar.AM[0],a.global.culture.calendar.PM[0],this);var o=a.extend({},h);return o;case "Character":return null;case "Day":var p=q.year;var n=
q.month;var c;if(this.format.length==3)c=a.global.culture.calendar.days.namesAbbr;else if(this.format.length>3)c=a.global.culture.calendar.days.names;else c=null;var e=q.day;if(c!=null)e=q.dayOfWeek+1;var d=a.jqx._jqxDateTimeInput.DateEditor._createDayEditor(q,q.day,1,q._daysInMonth(p,n),this.format.length==1?1:2,2,c,this);var o=a.extend({},d);return o;case "FORMAT_hh":var s=q.hour%12;if(s==0)s=12;var l=a.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(s,0,23,this.format.length==1?1:2,2,this);
var o=a.extend({},l);return o;case "FORMAT_HH":var r=a.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(q.hour,0,23,this.format.length==1?1:2,2,this);var o=a.extend({},r);return o;case "Millisecond":var m=a.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(q.millisecond/this._itemValue(),0,this._maximumValue(),this.format.length,this.format.length,this);var o=a.extend({},m);return o;case "Minute":var g=a.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(q.minute,0,59,this.format.length==
1?1:2,2,this);var o=a.extend({},g);return o;case "Month":var j;if(this.format.length==3)j=a.global.culture.calendar.months.namesAbbr;else if(this.format.length>3)j=a.global.culture.calendar.months.names;else j=null;var b=a.jqx._jqxDateTimeInput.DateEditor._createMonthEditor(q.month,this.format.length==2?2:1,j,this);var o=a.extend({},b);return o;case "ReadOnly":return a.jqx._jqxDateTimeInput.DisabledEditor._create(this.format.length,q.day,this);case "Second":var f=a.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(q.second,
0,59,this.format.length==1?1:2,2,this);var o=a.extend({},f);return o;case "Year":var k=a.jqx._jqxDateTimeInput.DateEditor._createYearEditor(q.year,this.format.length,this);var o=a.extend({},k);return o}return null},getDateTimeWithOffset:function(e,k){if(e==null||k==null)throw"Invalid arguments";var h=k.hour;var d=k.minute;var j=k.second;var l=k.day();var c=k.month();var f=k.year();var m=k;var b=k;switch(this.type){case "FORMAT_AMPM":h=12*(e-h/12);break;case "Day":l=e-l;if(l!=e)if(e==29&&c==2){b=m;
while(!DateTime._isLeapYear(b.year))b=b._addYears(1);b=b._addDays(e-b.day)}else{b=m._addMonths(1-m.month);b=b._addDays(e-m.day)}break;case "FORMAT_hh":var g=e==12?0:e;m=m._addHours(g-m.hour%12);break;case "FORMAT_HH":m=m._addHours(e-m.hour);break;case "Millisecond":m=m._addMilliseconds(e*this._itemValue()-m.millisecond);break;case "Minute":m=m._addMinutes(e-m.minute);break;case "Month":b=m._addMonths(e-m.month);if(e==2&&m.day==29&&m.day!=b.day){b=m;while(!m.IsLeapYear(b.year))b=b._addYears(1);b=b._addMonths(e-
b.month)}m=b;break;case "ReadOnly":break;case "Second":m=m._addSeconds(e-m.second);break;case "Year":if(e==0)e=1;m=m._addYears(e-k.year);break}return m}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.DateEditor=a.extend(a.jqx._jqxDateTimeInput.DateEditor,{formatValueLength:0,handleYears:false,handleDays:false,handleMonths:false,positions:0,value:0,minEditPositions:0,maxEditPositions:0,minValue:0,maxValue:0,item:null,dateTimeFormatInfo:null,days:null,dateTimeMonths:null,lastDayInput:null,minPositions:function(){if(this.handleYears)if(this.formatValueLength==4){if(this.positions<=1)return 1;else if(this.positions>=4)return 4;return this.positions}else return this.minEditPositions;
return this.minEditPositions},initializeFields:function(e,f,b,d,c){this.minValue=e;this.maxValue=f;this.minEditPositions=b;this.maxEditPositions=d;this.updateActiveEditor(e);this.item=c},_createYearEditor:function(d,c,b){a.jqx._jqxDateTimeInput.DateEditor=a.extend(true,{},this);this.initializeFields(c<=4?0:0,c<4?99:9999,c==2?2:1,c>3?4:2,b);this.initializeYearEditor(d,c,b.culture);this.handleYears=true;return this},initializeYearEditor:function(d,c,e){this.formatValueLength=c;this.dateTimeFormatInfo=
e;var b=d;b=Math.min(b,9999);b=Math.max(b,1);b=this.formatValueLength<4?b%100:b;this.updateActiveEditor(b);this.value=b},updateActiveEditor:function(b){this.value=b;this.positions=0},_createDayEditor:function(h,b,f,g,j,d,c,e){a.jqx._jqxDateTimeInput.DateEditor=a.extend(true,{},this);this.initializeFields(f,g,1,d,e);this.currentValue=h;this.value=b;this.days=c;this.handleDays=true;return this},getDayOfWeek:function(b){if(typeof this.currentValue==a.jqx._jqxDateTimeInput.DateTime)this.currentValue.dayOfWeek();
return b},defaultTextValue:function(){var d=this.value;var e=this.minEditPositions;var b=e;var c=a.global.format(this.value,"d"+b,"");return c},textValue:function(){if(this.handleDays)if(this.days==null)return this.defaultTextValue();else{var b=this.value%7+1;b=this.getDayOfWeek(b);return this.days[b]}else if(this.handleMonths)if(this.dateTimeMonths==null||this.value<1||this.value>12)return this.defaultTextValue();else return this.dateTimeMonths[this.value-1];return this.defaultTextValue()},defaultInsertString:function(c){if(c==
null)return this.deleteValue();if(c.length==0)return this.deleteValue();var g=c.substring(0,1);if(isNaN(g))return;var e=true;var d;var b=1;var f=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);d=f;if(this.positions>=this.maxEditPositions)this.positions=0;d=d.substring(0,this.positions)+g+d.substring(this.positions+1);d=this.setValueByString(d,b);return true},setValueByString:function(d,b){d=this.fixValueString(d);var c=new Number(d);this.value=c;this.positions+=b;return d},
fixValueString:function(b){if(b.length>this.maxEditPositions)b=b.substring(b.length-this.maxEditPositions);return b},initializeValueString:function(c){var b;b="";if(this.hasDigits())b=c;return b},deleteValue:function(){if(this.value==this.minValue&&this.hasDigits()==false)return false;this.updateActiveEditor(this.minValue);return true},hasDigits:function(){return this.positions>0},insert:function(b){if(this.handleDays){if(this.days!=null){var c=false;c=this.insertLongString(b,c);if(c)return c;c=this.insertShortString(b,
c);if(c)return c}if(this.value==1&&this.lastDayInput!=null&&this.lastDayInput.toString().length>0&&this.lastDayInput.toString()=="0")this.value=0;this.lastDayInput=b;return this.defaultInsertString(b)}else if(this.handleMonths)if(this.dateTimeMonths!=null){var c=false;c=this.insertLongString2(b,c);if(c)return c;c=this.insertShortString2(b,c);if(c)return c}return this.defaultInsertString(b)},insertShortString:function(d,e){if(d.length==1)for(i=0;i<6;++i){var c=(this.value+i)%7+1;var b=this.days[c-
1];if(b.substring(0,1)==d){this.updateActiveEditor(c);e=true;return e}}return e},insertLongString:function(c,d){if(c.length>0)for(i=0;i<6;++i){var b=(this.value+i)%7+1;if(this.days[b-1]==c){this.updateActiveEditor(b);d=true;return d}}return d},_createMonthEditor:function(d,c,b,e){a.jqx._jqxDateTimeInput.DateEditor=a.extend(true,{},this);this.initializeFields(1,12,c,2,e);this.dateTimeMonths=b;this.value=d;if(this.dateTimeMonths!=null&&this.dateTimeMonths[12]!=null&&this.dateTimeMonths[12].length>0)this.dateTimeMonths=
null;this.handleMonths=true;return this},insertLongString2:function(b,c){if(b.length>0)for(i=0;i<11;++i){month=(this.value+i)%12+1;if(this.dateTimeMonths[month-1]==b){this.updateActiveEditor(month);c=true;return c}}return c},insertShortString2:function(c,d){if(c.length==1)for(i=0;i<11;++i){var e=(this.value+i)%12+1;var b=this.dateTimeMonths[e-1];if(b.substring(0,1)==c){this.updateActiveEditor(e);d=true;return d}}return d},correctMaximumValue:function(b){if(b>this.maxValue)b=this.minValue;return b},
correctMinimumValue:function(b){if(b<this.minValue)b=this.maxValue;return b},increaseValue:function(e){var c=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);var f=c.toString()[this.positions];f=parseInt(f)+1;if(f>9)f=0;if(!e){var b=this.value+1;b=this.correctMaximumValue(b);this.updateActiveEditor(b);return true}var d=c.substring(0,this.positions)+f+c.substring(this.positions+1);if(d!=this.value||this.hasDigits()){this.updateActiveEditor(d);return true}else return false},
decreaseValue:function(e){var c=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);var f=c.toString()[this.positions];f=parseInt(f)-1;if(f<0)f=9;if(!e){var b=this.value-1;b=this.correctMinimumValue(b);this.updateActiveEditor(b);return true}var d=c.substring(0,this.positions)+f+c.substring(this.positions+1);if(d!=this.value||this.hasDigits()){this.updateActiveEditor(d);return true}else return false},getDateTimeItem:function(){return this.item}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.NumberEditor={};a.extend(a.jqx._jqxDateTimeInput.NumberEditor,{formatValueLength:0,positions:0,value:0,minEditPositions:0,maxEditPositions:0,minValue:0,maxValue:0,item:null,minPositions:function(){if(this.handleYears)if(this.formatValueLength==4){if(this.positions<=1)return 1;else if(this.positions>=4)return 4;return this.positions}else return this.minEditPositions;return this.minEditPositions},_createNumberEditor:function(f,e,g,b,d,c){a.jqx._jqxDateTimeInput.NumberEditor=
a.extend(true,{},this);this.initializeFields(e,g,b,d,c);return this},initializeFields:function(e,f,b,d,c){this.minValue=e;this.maxValue=f;this.minEditPositions=b;this.maxEditPositions=d;this.updateActiveEditor(e);this.item=c},updateActiveEditor:function(b){this.value=b;this.positions=0},getDayOfWeek:function(b){if(typeof this.currentValue==a.jqx._jqxDateTimeInput.DateTime)this.currentValue.dayOfWeek();return b},textValue:function(){var d=this.value;var e=this.minEditPositions;var b=e;var c=a.global.format(this.value,
"d"+b,"");return c},insert:function(c){if(c==null)return this.deleteValue();if(c.length==0)return this.deleteValue();var g=c.substring(0,1);if(isNaN(g))return;var e=true;var d;var b=1;var f=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);d=f;if(this.positions>=this.maxEditPositions)this.positions=0;d=d.substring(0,this.positions)+g+d.substring(this.positions+1);d=this.setValueByString(d,b);return true},setValueByString:function(d,b){d=this.fixValueString(d);var c=new Number(d);
this.value=c;this.positions+=b;return d},fixValueString:function(b){if(b.length>this.maxEditPositions)b=b.substring(b.length-this.maxEditPositions);return b},initializeValueString:function(c){var b;b="";if(this.hasDigits())b=c;return b},deleteValue:function(){if(this.value==this.minValue&&this.hasDigits()==false)return false;this.updateActiveEditor(this.minValue);return true},hasDigits:function(){return this.positions>0},correctMaximumValue:function(b){if(b>this.maxValue)b=this.minValue;return b},
correctMinimumValue:function(b){if(b<this.minValue)b=this.maxValue;return b},increaseValue:function(e){var c=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);var f=c.toString()[this.positions];f=parseInt(f)+1;if(f>9)f=0;if(!e){var b=this.value+1;b=this.correctMaximumValue(b);this.updateActiveEditor(b);return true}var d=c.substring(0,this.positions)+f+c.substring(this.positions+1);if(d!=this.value||this.hasDigits()){this.updateActiveEditor(d);return true}else return false},
decreaseValue:function(e){var c=a.global.format(Number(this.value),"d"+this.maxEditPositions,this.culture);var f=c.toString()[this.positions];f=parseInt(f)-1;if(f<0)f=9;if(!e){var b=this.value-1;b=this.correctMinimumValue(b);this.updateActiveEditor(b);return true}var d=c.substring(0,this.positions)+f+c.substring(this.positions+1);if(d!=this.value||this.hasDigits()){this.updateActiveEditor(d);return true}else return false},getDateTimeItem:function(){return this.item}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.DisabledEditor={};a.extend(a.jqx._jqxDateTimeInput.DisabledEditor,{_create:function(f,c,e,b,d){this.format=f;this.value=-1;this.item=d;return this},textValue:function(){return""},insert:function(b){return false},deleteValue:function(){return false},increaseValue:function(){return false},decreaseValue:function(){return false},getDateTimeItem:function(){return this.item}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.AmPmEditor={};a.extend(a.jqx._jqxDateTimeInput.AmPmEditor,{_createAmPmEditor:function(f,c,e,b,d){this.format=f;this.value=c;this.amString=e;this.pmString=b;this.item=d;if(e==b){this.amString="<"+e;this.pmString=">"+b}return this},textValue:function(){var b=this.amString;if(this.value!=0)b=this.pmString;if(this.format.length==1&&b.length>1)b=b.substring(0,1);return b},insert:function(f){var d=f.toString();if(d.Length==0)return this.deleteValue();var c=false;if(this.amString.Length>
0&&this.pmString.Length>0){var g=amString[0];var b=d[0];var e=pmString[0];if(g.toString()==b.toString()){this.value=0;c=true}else if(e.toString()==b.toString()){this.value=1;c=true}}else if(this.pmString.Length>0){this.value=1;c=true}else if(this.amString.Length>0){this.value=0;c=true}return c},deleteValue:function(){var b=true;if(this.amString.Length==0&&this.pmString.Length!=0){if(this.value==0)return false;this.value=0}else{if(this.value==1)return false;this.value=1}return b},increaseValue:function(){this.value=
1-this.value;return true},decreaseValue:function(){this.increaseValue();return true},getDateTimeItem:function(){return this.item}})})(jQuery);
(function(a){a.jqx._jqxDateTimeInput.getDateTime=function(c){var b={dateTime:new Date(c),daysPer4Years:1461,daysPerYear:365,daysToMonth365:{"0":0,1:31,2:59,3:90,4:120,5:151,6:181,7:212,8:243,9:273,10:304,11:334,12:365},daysToMonth366:{"0":0,1:31,2:60,3:91,4:121,5:152,6:182,7:213,8:244,9:274,10:305,11:335,12:366},maxValue:3155378976E9,millisPerDay:864E5,millisPerHour:36E5,millisPerMinute:6E4,millisPerSecond:1E3,minTicks:0,minValue:0,ticksPerDay:864E9,ticksPerHour:36E9,ticksPerMillisecond:1E4,ticksPerMinute:6E8,
ticksPerSecond:1E7,hour:c.getHours(),minute:c.getMinutes(),day:c.getDate(),second:c.getSeconds(),month:1+c.getMonth(),year:c.getFullYear(),millisecond:c.getMilliseconds(),dayOfWeek:c.getDay(),isWeekend:function(d){if(d==undefined||d==null)d=this.dateTime;var e=d.getDay()%6==0;return e},dayOfYear:function(e){if(e==undefined||e==null)e=this.dateTime;var d=new Date(e.getFullYear(),0,1);return Math.ceil((e-d)/864E5)},_setDay:function(d){if(d==undefined||d==null)d=0;this.dateTime.setDate(d);this.day=this.dateTime.getDate()},
_setMonth:function(d){if(d==undefined||d==null)d=0;this.dateTime.setMonth(d-1);this.month=1+this.dateTime.getMonth()},_setYear:function(d){if(d==undefined||d==null)d=0;this.dateTime.setFullYear(d);this.year=this.dateTime.getFullYear()},_setHours:function(d){if(d==undefined||d==null)d=0;this.dateTime.setHours(d);this.hour=this.dateTime.getHours()},_setMinutes:function(d){if(d==undefined||d==null)d=0;this.dateTime.setMinutes(d);this.minute=this.dateTime.getMinutes()},_setSeconds:function(d){if(d==undefined||
d==null)d=0;this.dateTime.setSeconds(d);this.second=this.dateTime.getSeconds()},_setMilliseconds:function(d){if(d==undefined||d==null)d=0;this.dateTime.setMilliseconds(d);this.millisecond=this.dateTime.getMilliseconds()},_addDays:function(e){var d=this.dateTime;d.setDate(d.getDate()+e);return d},_addWeeks:function(e){var d=this.dateTime;d.setDate(d.getDate()+7*e);return d},_addMonths:function(e){var d=this.dateTime;d.setMonth(d.getMonth()+e);return d},_addYears:function(e){var d=this.dateTime;d.setFullYear(d.getFullYear()+
e);return d},_addHours:function(e){var d=this.dateTime;d.setHours(d.getHours()+e);return d},_addMinutes:function(e){var d=this.dateTime;d.setMinutes(d.getMinutes()+e);return d},_addSeconds:function(e){var d=this.dateTime;d.setSeconds(d.getSeconds()+e);return d},_addMilliseconds:function(e){var d=this.dateTime;d.setMilliseconds(d.getMilliseconds()+e);return d},_isLeapYear:function(d){if(d<1||d>9999)throw"invalid year";if(d%4!=0)return false;if(d%100==0)return d%400==0;return true},_dateToTicks:function(f,
h,e){if(f>=1&&f<=9999&&h>=1&&h<=12){var d=this._isLeapYear(f)?this.daysToMonth366:this.daysToMonth365;if(e>=1&&e<=d[h]-d[h-1]){var f=f-1;var g=f*365+f/4-f/100+f/400+d[h-1]+e-1;return g*864E9}}},_daysInMonth:function(e,f){if(f<1||f>12)throw"Invalid month.";var d=this._isLeapYear(e)?this.daysToMonth366:this.daysToMonth365;return d[f]-d[f-1]},_timeToTicks:function(d,g,e){var f=d*3600+g*60+e;return f*1E7},_equalDate:function(d){if(this.year==d.getFullYear()&&this.day==d.getDate()&&this.month==d.getMonth()+
1)return true;return false}};return b}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxChart","",{});a.extend(a.jqx._jqxChart.prototype,{createInstance:function(d){if(!a.jqx.dataAdapter){throw"jqxdata.js is not loaded";return}this._refreshOnDownloadComlete();var c=this;this.host.bind("mousemove",function(f){if(this.enabled==false)return;f.preventDefault();var e=f.pageX||f.clientX||f.screenX;var h=f.pageY||f.clientY||f.screenY;var g=c.host.offset();e-=g.left;h-=g.top;c.onmousemove(e,h)});if(this.element.style){var b=false;if(this.element.style.width!=
null)b|=this.element.style.width.toString().indexOf("%")!=-1;if(this.element.style.height!=null)b|=this.element.style.height.toString().indexOf("%")!=-1;if(b)a(window).resize(function(){if(c.timer)clearTimeout(c.timer);var e=a.browser.msie?200:1;c.timer=setTimeout(function(){var f=c.enableAnimations;c.enableAnimations=false;c.refresh();c.enableAnimations=f},e)})}},_refreshOnDownloadComlete:function(){if(this.source instanceof a.jqx.dataAdapter){var c=this;var d=this.source._options;if(d==undefined||
d!=undefined&&!d.autoBind){this.source.autoSync=false;this.source.dataBind()}if(this.source.records.length==0){var b=function(){if(c.ready)c.ready();c.refresh()};this.source.unbindDownloadComplete(this.element.id);this.source.bindDownloadComplete(this.element.id,b)}else if(c.ready)c.ready();this.source.unbindBindingUpdate(this.element.id);this.source.bindBindingUpdate(this.element.id,function(){c.refresh()})}},defineInstance:function(){this.source=new Array;this.seriesGroups=new Array;this.categoryAxis=
{}},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c=="source")this._refreshOnDownloadComlete();this.refresh()},_internalRefresh:function(){this._stopAnimations();this.host.empty();this._renderData=new Array;var d=null;var b=a.jqx.mobile.isTouchDevice();if(!b&&document.createElementNS&&(this.renderEngine=="SVG"||this.renderEngine==undefined)){d=new a.jqx.svgRenderer;if(!d.init(this.host)){if(this.renderEngine=="SVG")throw"Your browser does not support SVG";
return}}if(!b&&d==null&&this.renderEngine!="HTML5"){d=new a.jqx.vmlRenderer;if(!d.init(this.host)){if(this.renderEngine=="VML")throw"Your browser does not support VML";return}this._isVML=true}if(b||d==null&&(this.renderEngine=="HTML5"||this.renderEngine==undefined)){d=new a.jqx.HTML5Renderer;if(!d.init(this.host))throw"Your browser does not support HTML5 Canvas";}this.renderer=d;var c=this.renderer.getRect();this._render({x:1,y:1,width:c.width,height:c.height});if(this.renderer instanceof a.jqx.HTML5Renderer)this.renderer.refresh()},
saveAsPNG:function(c,b){return this._saveAsImage("png",c,b)},saveAsJPEG:function(c,b){return this._saveAsImage("jpeg",c,b)},_saveAsImage:function(j,g,l){if(g==undefined||g=="")g="chart."+j;if(l==undefined||l=="")l="http://www.jqwidgets.com/export_server/export.php";var k=this.rendererEngine;var f=this.enableAnimations;this.enableAnimations=false;this.renderEngine="HTML5";if(this.renderEngine!=k)try{this.refresh()}catch(i){this.renderEngine=k;this.refresh();this.enableAnimations=f}try{var d=this.renderer.getContainer()[0];
if(d){var h=d.toDataURL("image/"+j);h=h.replace("data:image/"+j+";base64,","");var c=document.createElement("form");c.method="POST";c.action=l;c.style.display="none";document.body.appendChild(c);var m=document.createElement("input");m.name="fname";m.value=g;m.style.display="none";var b=document.createElement("input");b.name="content";b.value=h;b.style.display="none";c.appendChild(m);c.appendChild(b);c.submit();document.body.removeChild(c)}}catch(i){}if(this.renderEngine!=k){this.renderEngine=k;this.refresh();
this.enableAnimations=f}return true},refresh:function(){this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","column","stackedcolumn","stackedcolumn100","pie","donut","scatter","bubble"],_render:function(u){this.renderer.clear();var k=this.backgroundImage;
if(k==undefined||k=="")this.host.css({"background-image":""});else this.host.css({"background-image":k.indexOf("(")!=-1?k:"url('"+k+"')"});this._buildStats();var J=this.padding||{left:5,top:5,right:5,bottom:5};var S=this.renderer.rect(u.x,u.y,u.width-1,u.height-1);if(k==undefined||k=="")this.renderer.attr(S,{fill:this.background||this.backgroundColor||"white"});else this.renderer.attr(S,{fill:"transparent"});if(this.showBorderLine!=false){var z=this.borderLineColor==undefined?this.borderColor:this.borderLineColor;
if(z==undefined)z="#888888";var l=this.borderLineWidth;if(isNaN(l)||l<0.5||l>10)l=1;this.renderer.attr(S,{"stroke-width":l,stroke:z})}var H={x:J.left,y:J.top,width:u.width-J.left-J.right,height:u.height-J.top-J.bottom};this._paddedRect=H;var e=this.titlePadding||{left:2,top:2,right:2,bottom:2};if(this.title&&this.title.length>0){var F=this.toThemeProperty("jqx-chart-title-text",null);var j=this.renderer.measureText(this.title,0,{"class":F});this.renderer.text(this.title,H.x+e.left,H.y+e.top,H.width-
(e.left+e.right),j.height,0,{"class":F},true,"center","center");H.y+=j.height;H.height-=j.height}if(this.description&&this.description.length>0){var G=this.toThemeProperty("jqx-chart-title-description",null);var j=this.renderer.measureText(this.description,0,{"class":G});this.renderer.text(this.description,H.x+e.left,H.y+e.top,H.width-(e.left+e.right),j.height,0,{"class":G},true,"center","center");H.y+=j.height;H.height-=j.height}if(this.title||this.description){H.y+=e.bottom+e.top;H.height-=e.bottom+
e.top}var b={x:H.x,y:H.y,width:H.width,height:H.height};var A=this._isPieOnlySeries();var q={};for(var K=0;K<this.seriesGroups.length&&!A;K++){if(this.seriesGroups[K].type=="pie"||this.seriesGroups[K].type=="donut")continue;var v=this.seriesGroups[K].orientation=="horizontal";var r=this.seriesGroups[K].valueAxis;if(!r)throw"seriesGroup["+K+"] is missing "+(v?"categoryAxis":"valueAxis")+" definition";var d=this._getCategoryAxis(K);if(!d)throw"seriesGroup["+K+"] is missing "+(!v?"categoryAxis":"valueAxis")+
" definition";q[d]=0}var n=0;var m=[];for(var K=0;K<this.seriesGroups.length;K++){if(this.seriesGroups[K].type=="pie"||this.seriesGroups[K].type=="donut"){m.push(0);continue}var v=this.seriesGroups[K].orientation=="horizontal";var E=r.axisSize;var f={x:0,y:b.y,width:b.width,height:b.height};if(!E||E=="auto")if(v){E=this._renderCategoryAxis(K,f,true,b).width;if((q[this._getCategoryAxis(K)]&1)==1)E=0;else q[this._getCategoryAxis(K)]|=1}else E=this._renderValueAxis(K,f,true,b).width;if(K>0&&E>0)n+=5;
m.push(E);n+=E}var N=0;var I=[];for(var K=0;K<this.seriesGroups.length;K++){if(this.seriesGroups[K].type=="pie"||this.seriesGroups[K].type=="donut"){I.push(0);continue}var v=this.seriesGroups[K].orientation=="horizontal";var M=d.axisSize;if(!M||M=="auto")if(v)M=this._renderValueAxis(K,{x:0,y:0,width:1E7,height:0},true,b).height;else{M=this._renderCategoryAxis(K,{x:0,y:0,width:1E7,height:0},true).height;if((q[this._getCategoryAxis(K)]&2)==2)M=0;else q[this._getCategoryAxis(K)]|=2}I.push(M+5);N+=M+
5}this._plotRect=b;var p=this.showLegend!=false;var s=!p||this.legendLayout?{width:0,height:0}:this._renderLegend(H,true);if(H.height<N+s.height||H.width<n)return;b.height-=N+s.height;b.x+=n;b.width-=n;if(!A){var Q=this.categoryAxis.tickMarksColor||"#888888";if(n==0){var D=a.jqx._ptrnd(b.x);var P=this.renderer.line(D,a.jqx._ptrnd(b.y),D,a.jqx._ptrnd(b.y+b.height+5),{stroke:Q,"stroke-width":1})}var M=0;for(var K=0;K<this.seriesGroups.length;K++){var v=this.seriesGroups[K].orientation=="horizontal";
var f={x:b.x,y:b.y+b.height+M,width:b.width,height:I[K]-5};if(v)this._renderValueAxis(K,f,false,b);else{if((q[this._getCategoryAxis(K)]&4)==4)continue;this._renderCategoryAxis(K,f,false,b);q[this._getCategoryAxis(K)]|=4}M+=I[K]}}if(p){var D=b.x+a.jqx._ptrnd((b.width-s.width)/2);var C=b.y+b.height+N;var E=b.width;var M=s.height;if(this.legendLayout){D=this.legendLayout.left||D;C=this.legendLayout.top||C;E=this.legendLayout.width||E;M=this.legendLayout.height||M}if(D+E>H.x+H.width)E=H.x+H.width-D;if(C+
M>H.y+H.height)M=H.y+H.height-C;this._renderLegend({x:D,y:C,width:E,height:M})}this._hasHorizontalLines=false;if(!A){var t=b.x-n;for(var K=0;K<this.seriesGroups.length;K++){var v=this.seriesGroups[K].orientation=="horizontal";var E=m[K];if(K>0&&E>0)t+=5;var f={x:t,y:b.y,width:E,height:b.height};if(v){if((q[this._getCategoryAxis(K)]&8)==8)continue;this._renderCategoryAxis(K,f,false,b);q[this._getCategoryAxis(K)]|=8}else this._renderValueAxis(K,f,false,b);t+=E}}if(b.width<=0||b.height<=0)return;this._plotRect=
{x:b.x,y:b.y,width:b.width,height:b.height};var O=this.renderer.beginGroup();var B=this.renderer.createClipRect({x:b.x,y:b.y,width:b.width,height:b.height});this.renderer.setClip(O,B);for(var K=0;K<this.seriesGroups.length;K++){var o=this.seriesGroups[K];var c=false;for(var R in this._seriesTypes)if(this._seriesTypes[R]==o.type){c=true;break}if(!c){throw'jqxChart: invalid series type "'+o.type+'"';continue}if(o.type.indexOf("column")!=-1)this._renderColumnSeries(K,b);else if(o.type.indexOf("pie")!=
-1||o.type.indexOf("donut")!=-1)this._renderPieSeries(K,b);else if(o.type.indexOf("line")!=-1||o.type.indexOf("area")!=-1)this._renderLineSeries(K,b);else if(o.type=="scatter"||o.type=="bubble")this._renderScatterSeries(K,b)}this.renderer.endGroup();if(this.enabled==false){var L=this.renderer.rect(u.x,u.y,u.width,u.height);this.renderer.attr(L,{fill:"#777777",opacity:0.5,stroke:"#00FFFFFF"})}},_isPieOnlySeries:function(){if(this.seriesGroups.length==0)return false;for(var b=0;b<this.seriesGroups.length;b++)if(this.seriesGroups[b].type!=
"pie"&&this.seriesGroups[b].type!="donut")return false;return true},_renderChartLegend:function(v,c,d,e){var n={x:c.x+3,y:c.y+3,width:c.width-6,height:c.height-6};var j={width:n.width,height:0};var h=0,g=0;var f=20;var b=0;var o=10;var u=10;var s=0;for(var q=0;q<v.length;q++){var k=v[q].css;if(!k)k=this.toThemeProperty("jqx-chart-legend-text",null);var l=v[q].text;var m=this.renderer.measureText(l,0,{"class":k});if(m.height>f)f=m.height;if(m.width>s)s=m.width;if(e){if(q!=0)g+=f;if(g>n.height){g=0;
h+=s+u;s=m.width;j.width=h+s}}else{if(h!=0)h+=u;if(h+2*o+m.width>n.width&&m.width<n.width){h=0;g+=f;f=20;b=n.width;j.heigh=g+f}}if(!d){var p=v[q].color;var t=this.renderer.rect(n.x+h,n.y+g+o/2,o,o);this.renderer.attr(t,{fill:p,stroke:p,"stroke-width":1});this.renderer.text(l,n.x+h+1.5*o,n.y+g,m.width,f,0,{"class":k},false,"center","center")}if(e);else{h+=m.width+2*o;if(b<h)b=h}}if(d){j.height=a.jqx._ptrnd(g+f);j.width=a.jqx._ptrnd(b);return j}},_renderLegend:function(n,l){var b=[];for(var r=0;r<this.seriesGroups.length;r++){var j=
this.seriesGroups[r];var h=this._getCategoryAxis(r);var p=h.toolTipFormatSettings||h.formatSettings;var e=h.toolTipFormatFunction||h.formatFunction;for(var o=0;o<j.series.length;o++){var t=j.series[o];if(j.type=="pie"||j.type=="donut"){var m=t.colorScheme||j.colorScheme||this.colorScheme;var c=this._getDataLen(r);for(var f=0;f<c;f++){var k=this._getDataValue(f,t.displayText,r);k=this._formatValue(k,p,e);var d=this._getColor(m,o*c+f,r,o);b.push({text:k,css:t.displayTextClass,color:d})}continue}var q=
t.displayText||t.dataField||"";var d=this._getSeriesColor(r,o);b.push({text:q,css:t.displayTextClass,color:d})}}return this._renderChartLegend(b,n,l,this.legendLayout&&this.legendLayout.flow=="vertical")},_renderCategoryAxis:function(j,f,h,k){var g=this._getCategoryAxis(j);var d=this.seriesGroups[j].orientation=="horizontal";var s={width:0,height:0};if(!g)return s;var u=g.text;var D={visible:g.showGridLines!=false,color:g.gridLinesColor||"#888888",unitInterval:g.gridLinesInterval||g.unitInterval};
var q={visible:g.showTickMarks!=false,color:g.tickMarksColor||"#888888",unitInterval:g.tickMarksInterval||g.unitInterval};var E=g.textRotationAngle||0;var G=f;if(d)G={x:f.x,y:f.y,width:f.height,height:f.width};var n=this._calculateXOffsets(undefined,G);var z=g.unitInterval;if(isNaN(z))z=Math.max(1,Math.round(n.rangeLength/10));var F=g.horizontalTextAlignment;var p=this._alignValuesWithTicks();var m=this.renderer.getRect();var c=m.width-f.x-f.width;var C=this._getDataLen(j);var w=[];if(g.type!="date"){var A=
n.customRange!=false;var o=z;for(var B=n.min;B<=n.max;B+=o){if(A||g.dataField==undefined||g.dataField=="")value=B;else{var v=Math.round(B);value=this._getDataValue(v,g.dataField)}var u=this._formatValue(value,g.formatSettings,g.formatFunction);if(u==undefined)u=!A?value.toString():B.toString();w.push(u);if(B+o>n.max){o=n.max-B;if(o<=z/2)break}}}else{var e=this._getDatesArray(n.min,n.max,g.baseUnit,p);for(var B=0;B<e.length;B+=z)w.push(this._formatValue(e[B],g.formatSettings,g.formatFunction))}if(g.flip==
true)w.reverse();var l=g.descriptionClass;if(!l)l=this.toThemeProperty("jqx-chart-axis-description",null);var t=g["class"];if(!t)t=this.toThemeProperty("jqx-chart-axis-text",null);if(d)E-=90;var r={text:g.description,style:l,halign:"center",valign:"center",textRotationAngle:d?-90:0};var b={textRotationAngle:E,style:t,halign:F,valign:g.verticalTextAlignment||"center"};return this._renderAxis(d,r,b,{x:f.x,y:f.y,width:f.width,height:f.height},k,z,p,w,n,D,q,h)},_renderAxis:function(p,t,c,d,f,D,m,E,k,
J,n,e){var B=n.visible?4:0;var A=2;var u={width:0,height:0};var C={width:0,height:0};if(p)u.height=C.height=d.height;else u.width=C.width=d.width;if(t.text!=undefined&&t!=""){var K=t.textRotationAngle;var z=this.renderer.measureText(t.text,K,{"class":t.style});C.width=z.width;C.height=z.height;if(!e)this.renderer.text(t.text,d.x+(p?A:0),d.y+(!p?d.height-A-C.height:0),p?C.width:d.width,!p?C.height:d.height,K,{"class":t.style},true,t.halign,t.valign)}var j=0;var F=m?-k.itemWidth/2:0;if(m)c.halign="center";
var H=0;var s=0;var g=k.itemWidth;for(var G=0;G<E.length;G++,j+=g){var v=E[G];var l=c.textRotationAngle;var z=this.renderer.measureText(v,l,{"class":c.style});if(z.width>s)s=z.width;if(z.height>H)H=z.height;if(!e&&(!z||!p&&j+z.width+F<d.x+d.width||p&&j+z.height+F<f.y+f.height)){var r=d.x+j+F;var q=d.y+(m?B:B/4);if(p){r=d.x+A+(C.width>0?C.width+A:0);q=d.y+j+F}this.renderer.text(v,r,q,!p?g:d.width-2*A-B-(C.width>0?C.width+A:0),p?g:d.height-2*A-B-(C.height>0?C.height+A:0),l,{"class":c.style},true,c.halign,
c.valign)}}u.width+=2*A+B+C.width+s+(p&&C.width>0?A:0);u.height+=2*A+B+C.height+H+(!p&&C.height>0?A:0);var b={};if(!e){var q=a.jqx._ptrnd(d.y);if(p)this.renderer.line(a.jqx._ptrnd(d.x+d.width),d.y,a.jqx._ptrnd(d.x+d.width),d.y+d.height,{stroke:J.color,"stroke-width":1});else this.renderer.line(a.jqx._ptrnd(d.x),q,a.jqx._ptrnd(d.x+d.width+1),q,{stroke:J.color,"stroke-width":1})}if(!e){var L=J.unitInterval;if(isNaN(L))L=D;for(var G=0;G<=k.rangeLength+L;G+=L){var I=0;if(p){I=a.jqx._ptrnd(d.y+G*d.height/
k.rangeLength);if(I>d.y+d.height)break}else{I=a.jqx._ptrnd(d.x+G*d.width/k.rangeLength);if(I>d.x+d.width)break}if(J.visible||G==k.rangeLength){if(p)this.renderer.line(a.jqx._ptrnd(f.x),I,a.jqx._ptrnd(f.x+f.width),I,{stroke:J.color,"stroke-width":1});else this.renderer.line(I,a.jqx._ptrnd(f.y),I,a.jqx._ptrnd(f.y+f.height),{stroke:J.color,"stroke-width":1});b[I]=true}}}if(!e&&n.visible){var o=n.unitInterval;if(isNaN(o))o=D;for(var G=0;G<=k.rangeLength+o;G+=o){var I=0;if(p)I=a.jqx._ptrnd(d.y+G*d.height/
k.rangeLength);else I=a.jqx._ptrnd(d.x+G*d.width/k.rangeLength);if(b[I-1])I--;else if(b[I+1])I++;if(p){if(I>d.y+d.height)break}else if(I>d.x+d.width)break;if(p)this.renderer.line(d.x+d.width,I,d.x+d.width-B,I,{stroke:J.color,"stroke-width":1});else this.renderer.line(I,d.y,I,d.y+B,{stroke:J.color,"stroke-width":1})}}u.width=a.jqx._rup(u.width);u.height=a.jqx._rup(u.height);return u},_renderValueAxis:function(k,e,j,l){var G=this.seriesGroups[k];var c=G.orientation=="horizontal";var h=G.valueAxis;if(!h)throw"SeriesGroup "+
k+" is missing valueAxis definition";var t={width:0,height:0};if(this._isPieOnlySeries()){if(j)return t;return}var r=this._stats.seriesGroups[k];if(!r||!r.isValid||false==h.displayValueAxis){if(j)return t;return}var m=h.descriptionClass;if(!m)m=this.toThemeProperty("jqx-chart-axis-description",null);var s={text:h.description,style:m,halign:"center",valign:"center",textRotationAngle:c?0:-90};var u=h.itemsClass;if(!u)u=this.toThemeProperty("jqx-chart-axis-text",null);var b={style:u,halign:"center",
valign:"center",textRotationAngle:0};var o=h.valuesOnTicks!=false;var d=h.dataField;var w=r.intervals;var D=r.min;var B=r.mu;var A=(c?e.width:e.height)/w;var q=e.y+e.height-A;var F=h.formatSettings;var f=G.type.indexOf("stacked")!=-1&&G.type.indexOf("100")!=-1;if(f&&!F)F={sufix:"%"};var z=[];var n={};n.data=[];n.itemWidth=A;if(!o)w=Math.max(w-1,1);for(var E=0;E<=w;E++){var C=o?D+E*B:D+(E+0.5)*B;var v=h.formatFunction?h.formatFunction(C):this._formatNumber(C,F);z.push(v);n.data.push(q+A/2);q-=A}n.rangeLength=
r.intervals*r.mu;if(G.valueAxis.flip!=true){n.data=n.data.reverse();z=z.reverse()}var H={visible:h.showGridLines!=false,color:h.gridLinesColor||"#888888",unitInterval:h.gridLinesInterval||h.unitInterval};var p={visible:h.showTickMarks!=false,color:h.tickMarksColor||"#888888",unitInterval:h.tickMarksInterval||h.unitInterval};return this._renderAxis(!c,s,b,e,l,B,o,z,n,H,p,j)},_buildStats:function(){var G={seriesGroups:new Array};this._stats=G;for(var C=0;C<this.seriesGroups.length;C++){var n=this.seriesGroups[C];
G.seriesGroups[C]={};var d=G.seriesGroups[C];d.isValid=true;var b=n.valueAxis!=undefined;var o=-1!=n.type.indexOf("stacked");var f=o&&-1!=n.type.indexOf("100");if(f){d.psums=new Array;d.nsums=new Array}var c=NaN,e=NaN;var E=NaN,H=NaN;var D=n.baselineValue||0;var B=this._getDataLen(C);var l=0;for(var A=0;A<B&&d.isValid;A++){var v=b?n.valueAxis.minValue:0;var z=b?n.valueAxis.maxValue:0;var j=0,k=0;if(typeof v!="number")v=NaN;if(typeof z!="number")z=NaN;for(var t=0;t<n.series.length;t++){var I=this._getDataValueAsNumber(A,
n.series[t].dataField,C);if(isNaN(I)){continue;throw"jqxChart: Data source contains invalid value at Index: "+A+", DataField: "+n.series[t].dataField;d.isValid=false;break}if((I>z||isNaN(z))&&(!b||isNaN(n.valueAxis.maxValue)?true:I<=n.valueAxis.maxValue))z=I;if((I<v||isNaN(v))&&(!b||isNaN(n.valueAxis.minValue)?true:I>=n.valueAxis.minValue))v=I;if(I>D)j+=I;else if(I<D)k+=I}var r=j-k;if(l<r)l=r;if(f){d.psums[A]=j;d.nsums[A]=k}if(z>e||isNaN(e))e=z;if(v<c||isNaN(c))c=v;if(j>E||isNaN(E))E=j;if(k<H||isNaN(H))H=
k}if(f){E=E==0?0:Math.max(E,-H);H=H==0?0:Math.min(H,-E)}var u=b?n.valueAxis.unitInterval:0;if(!u)u=o?(E-H)/10:(e-c)/10;var m=b?n.valueAxis.tickMarksInterval||u:0;var F=b?n.valueAxis.gridLinesInterval||u:0;if(c<H)H=c;if(e>E)E=e;var w=a.jqx._rnd(o?H:c,u,false);var q=a.jqx._rnd(o?E:e,u,true);if(f){q=q>0?100:0;w=w<0?-100:0;u=b?n.valueAxis.unitInterval:10;if(u<=0||u>=100)u=10;if(m<=0||m>=100)m=10;if(F<=0||F>=100)F=10}if(isNaN(q)||isNaN(w)||isNaN(u))continue;var h=(q-w)/(u==0?1:u);if(h<1)continue;var p=
q-w;d.rmax=o?E:e;d.rmin=o?H:c;d.min=w;d.max=q;d.mu=u;d.maxRange=l;d.intervals=h;d.tickMarksInterval=m;d.tickMarksIntervals=m==0?0:p/m;d.gridLinesInterval=F;d.gridLinesIntervals=F==0?0:p/F;if(p==0)p=1;d.scale=o?(E-H)/p:(e-c)/p}},_getDataLen:function(c){var b=this.source;if(c!=undefined&&c!=-1&&this.seriesGroups[c].source)b=this.seriesGroups[c].source;if(b instanceof a.jqx.dataAdapter)b=b.records;if(b)return b.length;return 0},_getDataValue:function(b,e,d){var c=this.source;if(d!=undefined&&d!=-1)c=
this.seriesGroups[d].source||c;if(c instanceof a.jqx.dataAdapter)c=c.records;if(!c||b<0||b>c.length-1)return NaN;return e&&e!=""?c[b][e]:c[b]},_getDataValueAsNumber:function(b,e,c){var d=this._getDataValue(b,e,c);if(this._isDate(d))return d.valueOf();if(typeof d!="number")d=parseFloat(d);if(typeof d!="number")d=undefined;return d},_renderPieSeries:function(d,D){var n=this._getDataLen(d);var r=this.seriesGroups[d];while(this._renderData.length<d+1)this._renderData.push(null);this._renderData[d]=[];
for(var g=0;g<r.series.length;g++){var J=r.series[g];var q=J.colorScheme||r.colorScheme||this.colorScheme;var h=J.initialAngle||0;var O=h;var L=J.radius||Math.min(D.width,D.height)*0.4;if(isNaN(L))L=1;var b=J.innerRadius||0;if(isNaN(b)||b>=L)b=0;var e=J.centerOffset||0;var I=a.jqx.getNum([J.offsetX,r.offsetX,D.width/2]);var G=a.jqx.getNum([J.offsetY,r.offsetY,D.height/2]);var E=this._getAnimProps(d,g);var w=E.enabled&&n<5E3&&this._isVML!=true?E.duration:0;this._renderData[d].push([]);var m=0;var o=
0;for(var Q=0;Q<n;Q++){var C=this._getDataValueAsNumber(Q,J.dataField,d);if(typeof C!="number")continue;if(C>0)m+=C;else o+=C}var l=m-o;if(l==0)l=1;for(var Q=0;Q<n;Q++){var C=this._getDataValueAsNumber(Q,J.dataField,d);if(typeof C!="number")continue;var p=Math.round(Math.abs(C)/l*360);if(Q+1==n)p=360+h-O;var H=D.x+I;var F=D.y+G;var M={x1:H,y1:F,innerRadius:b,outerRadius:L,key:d+"_"+g+"_"+Q};this._renderData[d][g].push(M);var N=this.renderer.pieslice(H,F,b,L,O,w>0?O:O+p,e);if(w>0){var S=e;if(a.isFunction(e))S=
e({seriesIndex:g,seriesGroupIndex:d,itemIndex:Q});if(isNaN(S))S=0;var t={x:H,y:F,innerRadius:b,outerRadius:L,fromAngle:O,toAngle:O+p,centerOffset:S};var k=this;this._animate(N,undefined,w,function(T,i,U){var s=i.fromAngle+U*(i.toAngle-i.fromAngle);var V=k.renderer.pieSlicePath(i.x,i.y,i.innerRadius,i.outerRadius,i.fromAngle,s,i.centerOffset);k.renderer.attr(T,{d:V})},t)}var K=this._getColors(d,g,Q,"radialGradient",L);this.renderer.attr(N,{fill:K.fillColor,stroke:K.lineColor,"stroke-width":1});var u=
O,P=O+p;var A=Math.abs(u-P);var R=A>180?1:0;if(A>360){u=0;P=360}var f=u*Math.PI*2/360;var v=P*Math.PI*2/360;var B=A/2+u;var c=B*Math.PI*2/360;var j=this._showLabel(d,g,Q,{x:0,y:0,width:0,height:0},"left","top",true);var z=J.labelRadius||L+Math.max(j.width,j.height);z+=e;var H=a.jqx._ptrnd(D.x+I+z*Math.cos(c)-j.width/2);var F=a.jqx._ptrnd(D.y+G-z*Math.sin(c)-j.height/2);this._showLabel(d,g,Q,{x:H,y:F,width:j.width,height:j.height},"left","top");this._installHandlers(N,d,g,Q);O+=p}}},_renderColumnSeries:function(g,
c){var r=this.seriesGroups[g];if(!r.series||r.series.length==0)return;var t=r.type.indexOf("stacked")!=-1;var e=t&&r.type.indexOf("100")!=-1;var q=this._getDataLen(g);var N=r.columnsGapPercent;if(isNaN(N)||N<0||N>100)N=25;var A=r.seriesGapPercent;if(isNaN(A)||A<0||A>100)A=10;var f=r.orientation=="horizontal";var K=c;if(f)K={x:c.y,y:c.x,width:c.height,height:c.width};var z=this._calcGroupOffsets(g,K);if(!z||z.xoffsets.length==0)return;for(var C=0;C<r.series.length;C++){var v=r.series[C];var F=v.dataField;
var E=this._getAnimProps(g,C);var b=E.enabled&&z.xoffsets.length<100?E.duration:0;var p=this._alignValuesWithTicks(g);var o=[];for(var G=z.xoffsets.first;G<=z.xoffsets.last;G++){var O=this._getDataValueAsNumber(G,F,g);if(typeof O!="number")continue;var J=z.xoffsets.data[G];if(p)J-=z.xoffsets.itemWidth/2;var I=J+z.xoffsets.itemWidth;var l=I-J+1;var M=(I-J+1)/(1+N/100);var n=!t&&r.series.length>1?M*A/100/(r.series.length-1):0;var L=M-n*(r.series.length-1);if(M<1)M=1;var k=0;if(!t&&r.series.length>1){L/=
r.series.length;k=C}var u=J+(l-M)/2+k*(n+L);if(k==r.series.length)L=l-J+M-u;var d=z.offsets[C][G].to;var D=z.offsets[C][G].from;var j=z.baseOffset;var H=D-d;var m={x:c.x+u,y:Math.min(d,D),width:L,height:Math.abs(H)};if(f){m={height:L,y:c.y+u};m.x=D;m.width=Math.abs(H);if(H>0)m.x-=H}o.push({itemIndex:G,rect:m,size:H,vertical:!f})}var B={groupIndex:g,seriesIndex:C,items:o};var w=this;this._animate(undefined,undefined,b,function(i,h,s){w._animateColumns(h,s)},B)}},_calcStackedItemSize:function(o,m,e,
h){var c=this._renderData[o];var g=0,n=0;for(var f=0;f<c.offsets.length;f++){var i=Math.abs(c.offsets[f][e].to-c.offsets[f][e].from);if(c.offsets[f][e].to<c.baseOffset)g+=i;else n+=i}var b=n*h;var k=g*h;g=0;n=0;var j=0;for(var f=0;f<=m;f++){j=Math.abs(c.offsets[f][e].to-c.offsets[f][e].from);if(c.offsets[f][e].to<c.baseOffset)g+=j;else n+=j}var l=Math.abs(c.offsets[m][e].to-c.offsets[m][e].from);if(c.offsets[m][e].to>=c.baseOffset){g=n;k=b}if(k<g-l)return 0;if(k>=g)return l;return k-(g-l)},_animateColumns:function(c,
f){var m=c.groupIndex;var k=c.seriesIndex;var l=this.seriesGroups[m];var o=l.series[k];var b=this._getColors(m,k,undefined,this._getGroupGradientType(m));var e=o.opacity||l.opacity;if(!e||e<0||e>1)e=1;var j=l.type.indexOf("stacked")!=-1;var g=c.items;for(var d=0;d<g.length;d++){var h=g[d].rect;var n=a.jqx._ptrnd(g[d].size*f);if(j){n=this._calcStackedItemSize(m,k,d,f);if(n==0)continue;if(g[d].size<0)n*=-1}if(g[d].element==undefined){g[d].element=this.renderer.rect(h.x,h.y,g[d].vertical?h.width:0,g[d].vertical?
0:h.height);this.renderer.attr(g[d].element,{fill:b.fillColor,"fill-opacity":e,stroke:b.lineColor,"stroke-width":1})}n=Math.abs(n);if(g[d].vertical==true)if(g[d].size<0)this.renderer.attr(g[d].element,{height:n});else this.renderer.attr(g[d].element,{y:h.y+h.height-n,height:n});else if(g[d].size<0)this.renderer.attr(g[d].element,{width:n});else this.renderer.attr(g[d].element,{x:h.x+h.width-n,width:n});if(f==1){this._installHandlers(g[d].element,m,k,d);this._showLabel(m,k,d,h)}}},_renderScatterSeries:function(f,
d){var m=this.seriesGroups[f];if(!m.series||m.series.length==0)return;var c=m.type=="bubble";var e=m.orientation=="horizontal";var G=d;if(e)G={x:d.y,y:d.x,width:d.height,height:d.width};var v=this._calcGroupOffsets(f,G);if(!v||v.xoffsets.length==0)return;var k=this._alignValuesWithTicks(f);for(var z=0;z<m.series.length;z++){var o=this._getColors(f,z,undefined,this._getGroupGradientType(f));var q=m.series[z];var C=q.dataField;var g=q.opacity||m.opacity;if(!g||g<0||g>1)g=1;var A=NaN,D=NaN;if(c)for(var E=
v.xoffsets.first;E<=v.xoffsets.last;E++){var J=this._getDataValueAsNumber(E,q.radiusDataField,f);if(typeof J!="number")throw"Invalid radiusDataField value at ["+E+"]";if(isNaN(A)||J<A)A=J;if(isNaN(D)||J>D)D=J}var l=q.minRadius;if(isNaN(l))l=d.width/50;var j=q.maxRadius;if(isNaN(j))j=d.width/25;if(l>j)throw"Invalid settings: minRadius must be less than or equal to maxRadius";var h=q.radius||5;var B=this._getAnimProps(f,z);var b=B.enabled&&v.xoffsets.length<5E3?B.duration:0;for(var E=v.xoffsets.first;E<=
v.xoffsets.last;E++){var J=this._getDataValueAsNumber(E,C,f);if(typeof J!="number")continue;var p=v.xoffsets.data[E];var n=v.offsets[z][E].to;if(isNaN(p)||isNaN(n))continue;if(e){var H=p;p=n;n=H+d.y}else p+=d.x;p=a.jqx._ptrnd(p);n=a.jqx._ptrnd(n);var t=h;if(c){var I=this._getDataValueAsNumber(E,q.radiusDataField,f);if(typeof I!="number")continue;t=l+(j-l)*(I-A)/Math.max(1,D-A);if(isNaN(t))t=l}var F=this.renderer.circle(p,n,b==0?t:0);this.renderer.attr(F,{fill:o.fillColor,"fill-opacity":g,stroke:o.lineColor,
"stroke-width":1});var w={from:0,to:t};var u=this;if(b>0)this._animate(F,undefined,b,function(r,i,s){u._animR(r,i,s)},w);this._installHandlers(F,f,z,E)}}},_animR:function(c,b,e){var d=Math.round((b.to-b.from)*e+b.from);if(this._isVML)this.renderer.updateCircle(c,undefined,undefined,d);else this.renderer.attr(c,{r:d})},_showToolTip:function(j,g,s,q,c){if(this.showToolTips==false)return;var p=this._getCategoryAxis(s);if(this._toolTipElement&&s==this._toolTipElement.gidx&&q==this._toolTipElement.sidx&&
c==this._toolTipElement.iidx)return;this._hideToolTip();if(this._pointMarker){j=parseInt(this._pointMarker.x+5);g=parseInt(this._pointMarker.y-5)}var f=this.seriesGroups[s];var k=f.series[q];var e=k.toolTipFormatSettings||f.toolTipFormatSettings;var o=k.toolTipFormatFunction||f.toolTipFormatFunction;var h=this._getColors(s,q,c);var l=this._getFormattedValue(s,q,c,e,o);var b=this._getDataValue(c,p.dataField,s);if(p.dataField==undefined||p.dataField=="")b=c;var v=p.toolTipFormatSettings||p.formatSettings;
var d=p.toolTipFormatFunction||p.formatFunction;if(p.type=="date")b=this._castAsDate(b);var w=this._formatValue(b,v,d);if(f.type!="pie"&&f.type!="donut")l=(k.displayText||k.dataField||"")+", "+w+": "+l;else{b=this._getDataValue(c,k.displayText||k.dataField,s);w=this._formatValue(b,v,d);l=w+": "+l}var r=k.toolTipClass||f.toolTipClass||this.toThemeProperty("jqx-chart-tooltip-text",null);var t=k.toolTipBackground||f.toolTipBackground||"#FFFFFF";var u=k.toolTipLineColor||f.toolTipLineColor||h.lineColor;
var n=this.renderer.measureText(l,0,{"class":r});n.width=n.width+5;n.height=n.height+6;rect=this.renderer.getRect();j=Math.max(j-5,rect.x);g=Math.max(g-n.height,rect.y);if(n.width>rect.width||n.height>rect.height)return;if(j+n.width>rect.x+rect.width)j=rect.x+rect.width-n.width-2;if(g+n.height>rect.y+rect.height)g=rect.y+rect.height-n.height-2;var i=this.renderer.rect(j,g,n.width,n.height);this.renderer.attr(i,{fill:t,"fill-opacity":0,stroke:u,rx:2,ry:2,"stroke-width":1});var m=this.renderer.text(l,
j,g,n.width,n.height,0,{"class":r,opacity:0},true,"center","center");this._toolTipElement={box:i,txt:m,sidx:q,gidx:s,iidx:c};this._animate(i,[{key:"fill-opacity",from:0,to:0.8}],200);this._animate(m,[{key:"opacity",from:0,to:1}],500)},_hideToolTip:function(){if(!this._toolTipElement)return;this.renderer.removeElement(this._toolTipElement.box);this.renderer.removeElement(this._toolTipElement.txt);this._toolTipElement=undefined},_showLabel:function(r,n,c,j,f,k,g){var p=this.seriesGroups[r];var b=p.series[n];
var i={width:0,height:0};if(b.showLabels==false||!b.showLabels&&!p.showLabels)return i;if(j.width<0||j.height<0)return i;var m=b.labelsAngle||p.labelsAngle||0;var o=b.labelOffset||p.labelOffset||{x:0,y:0};var e=b.labelClass||p.labelClass||this.toThemeProperty("jqx-chart-label-text",null);f=f||"center";k=k||"center";var q=this._getFormattedValue(r,n,c);var l=j.width;var d=j.height;if(l==0||d==0||g){i=this.renderer.measureText(q,m,{"class":e});if(g)return i;l=i.width;d=i.height}var s=this.renderer.text(q,
j.x+o.x,j.y+o.y,l,d,m,{},m!=0,f,k);this.renderer.attr(s,{"class":e});if(this._isVML){this.renderer.removeElement(s);this.renderer.getContainer()[0].appendChild(s)}},_getAnimProps:function(j,f){var e=this.seriesGroups[j];var c=e.series[f];var b=this.enableAnimations==true;if(e.enableAnimations)b=e.enableAnimations==true;if(c.enableAnimations)b=c.enableAnimations==true;var i=this.animationDuration;if(isNaN(i))i=1E3;var d=e.animationDuration;if(!isNaN(d))i=d;var h=c.animationDuration;if(!isNaN(h))i=
h;if(i>5E3)i=1E3;return{enabled:b,duration:i}},_renderLineSeries:function(e,F){var z=this.seriesGroups[e];if(!z.series||z.series.length==0)return;var l=z.type.indexOf("area")!=-1;var C=z.type.indexOf("stacked")!=-1;var b=C&&z.type.indexOf("100")!=-1;var R=z.type.indexOf("spline")!=-1;var m=z.type.indexOf("step")!=-1;if(m&&R)return;var p=this._getDataLen(e);var P=F.width/p;var v=Math.round(F.width/P);var d=Math.round(p/v);var U=z.orientation=="horizontal";var r=this._getCategoryAxis(e).flip==true;
var o=F;if(U)o={x:F.y,y:F.x,width:F.height,height:F.width};var t=this._calcGroupOffsets(e,o);if(!t||t.xoffsets.length==0)return;var H=this._alignValuesWithTicks(e);for(var M=z.series.length-1;M>=0;M--){var S=this._getLineSettings(e,M);var J=t.xoffsets.first;var w=J;do{var K=[];var E=-1;var j=0;var G=NaN;var u=NaN;var T=NaN;if(t.xoffsets.length<1)continue;var I=this._getAnimProps(e,M);var D=I.enabled&&t.xoffsets.length<1E4&&this._isVML!=true?I.duration:0;var n=J;for(var Q=J;Q<=t.xoffsets.last;Q++){J=
Q;var L=t.xoffsets.data[Q];if(L==undefined)continue;var h=t.offsets[M][Q].to;if(h==undefined){J++;break}w=Q;if(!l&&b){if(h<=o.y)h=o.y+1;if(h>=o.y+o.height)h=o.y+o.height-1}L=Math.max(L,1);j=L;if(m&&!isNaN(G)&&!isNaN(u))if(u!=h)K.push(U?{y:o.x+j,x:a.jqx._ptrnd(u)}:{x:o.x+j,y:a.jqx._ptrnd(u)});K.push(U?{y:o.x+j,x:a.jqx._ptrnd(h),index:Q}:{x:o.x+j,y:a.jqx._ptrnd(h),index:Q});G=j;u=h;if(isNaN(T))T=h}var f=o.x+t.xoffsets.data[n];var N=o.x+t.xoffsets.data[w];if(l&&z.alignEndPointsWithIntervals!=false){var q=
r?-1:1;if(f>o.x)f-=q*((f-o.x)%t.xoffsets.itemWidth+1);if(N<o.x+o.width)N+=q*(t.xoffsets.itemWidth-(N-o.x)%t.xoffsets.itemWidth-1)}N=a.jqx._ptrnd(N);f=a.jqx._ptrnd(f);var g=t.baseOffset;T=a.jqx._ptrnd(T);var c=a.jqx._ptrnd(h)||g;var B=this._calculateLine(K,g,D==0?1:0,l,U);if(B!="")B=this._buildLineCmd(B,f,N,T,c,g,l,R&&K.length>3,U);else B="M 0 0";var O=this.renderer.path(B,{"stroke-width":S.stroke,stroke:S.colors.lineColor,"fill-opacity":S.opacity,fill:l?S.colors.fillColor:"none"});this._installHandlers(O,
e,M);if(D>0){var A={groupIndex:e,seriesIndex:M,pointsArray:K,left:f,right:N,pyStart:T,pyEnd:c,yBase:g,isArea:l,isSpline:R};var k=this;this._animate(O,undefined,D,function(X,s,Y){var Z=k._calculateLine(s.pointsArray,s.yBase,Y,s.isArea,U);if(Z=="")return;var W=s.pointsArray.length;if(!s.isArea)W=Math.round(W*Y);Z=k._buildLineCmd(Z,s.left,s.right,s.pyStart,s.pyEnd,s.yBase,s.isArea,W>3&&s.isSpline,U);k.renderer.attr(X,{d:Z});if(Y==1){var aa=k._getLineSettings(s.groupIndex,s.seriesIndex);for(var V=0;V<
s.pointsArray.length;V++){k._showLabel(s.groupIndex,s.seriesIndex,s.pointsArray[V].index,{x:s.pointsArray[V].x,y:s.pointsArray[V].y,width:0,height:0});k._drawSymbol(k._getSymbol(s.groupIndex,s.seriesIndex),s.pointsArray[V].x,s.pointsArray[V].y,aa.colors.fillColor,aa.colors.lineColor,1,aa.opacity)}}},A)}else for(var Q=0;Q<K.length;Q++){this._showLabel(e,M,K[Q].index,{x:K[Q].x,y:K[Q].y,width:0,height:0});this._drawSymbol(this._getSymbol(e,M),K[Q].x,K[Q].y,S.colors.fillColor,S.colors.lineColor,S.stroke,
S.opacity)}}while(J<t.xoffsets.length-1)}},_calculateLine:function(f,l,g,h,e){var c="";var b=f.length;if(!h)b=Math.round(b*g);for(var d=0;d<b;d++){if(d>0)c+=" ";var j=f[d].y;var k=f[d].x;if(h)if(e)k=a.jqx._ptrnd((k-l)*g+l);else j=a.jqx._ptrnd((j-l)*g+l);c+=k+","+j}return c},_buildLineCmd:function(l,g,p,o,b,q,n,d,k){var f=l;if(d)f=this._getBezierPoints(l);var m=f.split(" ");var j=m[0].replace("C","");if(n){var e=k?o+","+g:g+","+o;var h=k?b+","+p:p+","+b;var c=k?q+","+g:g+","+q;var i=k?q+","+p:p+","+
q;f="M "+c+" L "+j+(d?"":" L "+j+" ")+f+(d?" L"+i+" M "+i:" "+i+" "+c);f+=" Z"}else if(d)f="M "+j+" "+f;else f="M "+j+" L "+j+" "+f;return f},_getLineSettings:function(f,c){var h=this.seriesGroups[f];var e=h.type.indexOf("area")!=-1;var b=this._getColors(f,c,undefined,this._getGroupGradientType(f));var d=h.series[c].opacity||h.opacity;if(!d||d<0||d>1)d=1;var g=h.series[c].lineWidth||h.lineWidth;if(!g||g=="auto"||isNaN(g)||g<1||g>15)g=e?2:3;return{colors:b,stroke:g,opacity:d}},_getColors:function(s,
p,d,e){var l=this.seriesGroups[s];if(l.type!="pie"&&l.type!="donut")d=undefined;var c=l.series[p].useGradient||l.useGradient;if(c==undefined)c=true;var q;if(!isNaN(d)){var k=this._getDataLen(s);q=this._getColor(l.series[p].colorScheme||l.colorScheme||this.colorScheme,p*k+d,s,p)}else q=this._getSeriesColor(s,p);var f=a.jqx._adjustColor(q,1.1);var b=a.jqx._adjustColor(q,0.9);var m=a.jqx._adjustColor(f,0.9);var h=q;var n=f;var i=[[0,1.5],[100,1]];var g=[[0,1],[25,1.1],[50,1.5],[100,1]];var o=[[0,1.3],
[90,1.2],[100,1]];if(c)if(e=="verticalLinearGradient"){h=this.renderer._toLinearGradient(q,true,i);n=this.renderer._toLinearGradient(f,true,i)}else if(e=="horizontalLinearGradient"){h=this.renderer._toLinearGradient(q,false,g);n=this.renderer._toLinearGradient(f,false,g)}else if(e=="radialGradient"){var r=undefined;var j=i;if((l.type=="pie"||l.type=="donut")&&d!=undefined&&this._renderData[s]&&this._renderData[s][p]){r=this._renderData[s][p][d];j=o}h=this.renderer._toRadialGradient(q,j,r);n=this.renderer._toRadialGradient(f,
j,r)}return{baseColor:q,fillColor:h,lineColor:b,fillSelected:n,lineSelected:m}},_installHandlers:function(d,j,i,c){var b=this;var h=this.seriesGroups[j];var e=this.seriesGroups[j].series[i];var f=h.type.indexOf("line")!=-1||h.type.indexOf("area")!=-1;if(!f)this.renderer.addHandler(d,"mousemove",function(g){g.preventDefault();b._startTooltipTimer(j,i,c)});this.renderer.addHandler(d,"mouseover",function(g){g.preventDefault();b._select(d,j,i,c);if(f)return;if(isNaN(c))return;b._raiseEvent("mouseover",
h,e,c)});this.renderer.addHandler(d,"mouseout",function(g){g.preventDefault();if(c!=undefined)b._cancelTooltipTimer();if(f)return;b._unselect();if(isNaN(c))return;b._raiseEvent("mouseout",h,e,c)});this.renderer.addHandler(d,"click",function(g){g.preventDefault();if(f)return;if(h.type.indexOf("column")!=-1)b._unselect();if(isNaN(c))return;b._raiseEvent("click",h,e,c)})},_getHorizontalOffset:function(u,p,j,h){var c=this._plotRect;var f=this._getDataLen(u);if(f==0)return{index:undefined,value:j};var n=
this._calcGroupOffsets(u,this._plotRect);if(n.xoffsets.length==0)return{index:undefined,value:undefined};var l=j-c.x;var k=h-c.y;var r=this.seriesGroups[u];if(r.orientation=="horizontal"){var t=l;l=k;k=t}var e=this._getCategoryAxis(u).flip==true;var b=undefined;var m=undefined;for(var q=0;q<n.xoffsets.length;q++){var s=n.xoffsets.data[q];var d=n.offsets[p][q].to;var o=Math.abs(l-s);if(isNaN(b)||b>o){b=o;m=q}}return{index:m,value:n.xoffsets.data[m]}},onmousemove:function(n,l){this._mouseX=n;this._mouseY=
l;this._hideToolTip();if(!this._selected)return;var m=this._plotRect;var b=this._paddedRect;if(n<b.x||n>b.x+b.width||l<b.y||l>b.y+b.height){this._unselect();return}var p=this._selected.group;var j=this.seriesGroups[p];var t=j.series[this._selected.series];var e=j.orientation=="horizontal";var k=this.seriesGroups[p].type;var m=this._plotRect;if(k.indexOf("line")!=-1||k.indexOf("area")!=-1){var d=this._getHorizontalOffset(p,this._selected.series,n,l);var h=d.index;if(h==undefined)return;if(this._selected.item!=
h){if(this._selected.item)this._raiseEvent("mouseout",j,t,this._selected.item);this._selected.item=h;this._raiseEvent("mouseover",j,t,h)}var r=this._getSymbol(this._selected.group,this._selected.series);if(r=="none")r="circle";var o=this._calcGroupOffsets(p,m);l=o.offsets[this._selected.series][h].to;if(l==undefined)return;n=d.value;if(e){var f=n;n=l;l=f+m.y}else n+=m.x;l=a.jqx._ptrnd(l);n=a.jqx._ptrnd(n);if(this._pointMarker)this.renderer.removeElement(this._pointMarker.element);var c=this._getSeriesColor(this._selected.group,
this._selected.series);var q=a.jqx._adjustColor(c,0.5);this._pointMarker={type:r,x:n,y:l};this._pointMarker.element=this._drawSymbol(r,n,l,c,q,1,1,8);this._startTooltipTimer(p,this._selected.series,h)}},_drawSymbol:function(g,i,h,j,k,d,e,m){var c;var f=m||6;var b=f/2;switch(g){case "none":return undefined;case "circle":c=this.renderer.circle(i,h,f/2);break;case "square":f=f-1;b=f/2;c=this.renderer.rect(i-b,h-b,f,f);break;case "diamond":var l="M "+(i-b)+","+h+" L "+i+","+(h+b)+" L "+(i+b)+","+h+" L "+
i+","+(h-b)+" Z";c=this.renderer.path(l);break;case "triangle_up":var l="M "+(i-b)+","+(h+b)+" L "+(i+b)+","+(h+b)+" L "+i+","+(h-b)+" Z";c=this.renderer.path(l);break;case "triangle_down":var l="M "+(i-b)+","+(h-b)+" L "+i+","+(h+b)+" L "+(i+b)+","+(h-b)+" Z";c=this.renderer.path(l);break;case "triangle_left":var l="M "+(i-b)+","+h+" L "+(i+b)+","+(h+b)+" L "+(i+b)+","+(h-b)+" Z";c=this.renderer.path(l);break;case "triangle_right":var l="M "+(i-b)+","+(h-b)+" L "+(i-b)+","+(h+b)+" L "+(i+b)+","+
h+" Z";c=this.renderer.path(l);break;default:c=this.renderer.circle(i,h,f)}this.renderer.attr(c,{fill:j,stroke:k,"stroke-width":d,"fill-opacity":e});return c},_getSymbol:function(f,b){var c=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"];var e=this.seriesGroups[f];var d=e.series[b];var h=undefined;if(d.symbolType!=undefined)h=d.symbolType;if(h==undefined)h=e.symbolType;if(h=="default")return c[b%c.length];else if(h!=undefined)return h;return"none"},_startTooltipTimer:function(h,
f,d){this._cancelTooltipTimer();var b=this;var e=b.seriesGroups[h];var c=this.toolTipShowDelay||this.toolTipDelay;if(isNaN(c)||c>1E4||c<0)c=500;this._tttimer=setTimeout(function(){b._showToolTip(b._mouseX,b._mouseY-3,h,f,d);var g=b.toolTipHideDelay;if(isNaN(g))g=4E3;b._tttimer=setTimeout(function(){b._hideToolTip()},g)},c)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(c){var b=this.seriesGroups[c];if(b.type.indexOf("area")!=-1)return b.orientation=="horizontal"?
"horizontalLinearGradient":"verticalLinearGradient";else if(b.type.indexOf("column")!=-1)return b.orientation=="horizontal"?"verticalLinearGradient":"horizontalLinearGradient";else if(b.type.indexOf("scatter")!=-1||b.type.indexOf("bubble")!=-1||b.type.indexOf("pie")!=-1||b.type.indexOf("donut")!=-1)return"radialGradient";return undefined},_select:function(d,h,f,c){if(this._selected&&this._selected.element!=d)this._unselect();this._selected={element:d,group:h,series:f,item:c};var e=this.seriesGroups[h];
var b=this._getColors(h,f,c,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1)b.fillSelected="none";this.renderer.attr(d,{stroke:b.lineSelected,fill:b.fillSelected})},_unselect:function(){if(this._selected){var h=this._selected.group;var f=this._selected.series;var c=this._selected.item;var e=this.seriesGroups[h];var d=e.series[f];var b=this._getColors(h,f,c,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1)b.fillColor=
"none";this.renderer.attr(this._selected.element,{stroke:b.lineColor,fill:b.fillColor});if(e.type.indexOf("line")!=-1||e.type.indexOf("area")!=-1&&!isNaN(c))this._raiseEvent("mouseout",e,d,c);this._selected=undefined}if(this._pointMarker){this.renderer.removeElement(this._pointMarker.element);this._pointMarker=undefined}},_raiseEvent:function(e,f,d,b){var c=d[e]||f[e];var g=0;for(;g<this.seriesGroups.length;g++)if(this.seriesGroups[g]==f)break;if(g==this.seriesGroups.length)return;if(c&&a.isFunction(c))c({event:e,
seriesGroup:f,serie:d,elementIndex:b,elementValue:this._getDataValue(b,d.dataField,g)})},_calcGroupOffsets:function(g,b){var o=this.seriesGroups[g];if(!o.series||o.series.length==0)return;var e=o.valueAxis.flip==true;if(!this._renderData)this._renderData=new Array;while(this._renderData.length<g+1)this._renderData.push(null);if(this._renderData[g]!=null)return this._renderData[g];var B=new Array;var p=o.type.indexOf("stacked")!=-1;var d=p&&o.type.indexOf("100")!=-1;var m=this._getDataLen(g);var D=
o.baselineValue||0;var E=this._stats.seriesGroups[g];if(!E||!E.isValid)return;if(D>E.max)D=E.max;if(D<E.min)D=E.min;var v=d?E.maxRange:E.max-E.min;var F=b.height/v;var f=0;if(d)if(E.min*E.max<0){v/=2;f=-(v+D)*F}else f=-D*F;else f=-(D-E.min)*F;if(e)f=-f+b.y;else f+=b.y+b.height;var t=new Array;var c=new Array;f=a.jqx._ptrnd(f);var l=E.min*E.max<0?b.height/2:b.height;for(var z=0;z<o.series.length;z++){B.push(new Array);for(var A=0;A<m;A++){var G=this._getDataValueAsNumber(A,o.series[z].dataField,g);
if(isNaN(G)){B[z].push({from:undefined,to:undefined});continue}if(G>E.rmax)G=E.rmax;if(G<E.rmin)G=E.rmin;var n=G>D?t:c;var C=F*(G-D);var s=f;if(p){if(d){var q=E.psums[A]-E.nsums[A];if(G>D){C=E.psums[A]/q*l;if(E.psums[A]!=0)C*=G/E.psums[A]}else{C=E.nsums[A]/q*l;if(E.nsums[A]!=0)C*=G/E.nsums[A]}}if(isNaN(n[A]))n[A]=f;s=n[A]}C=Math.abs(C);C=this._isVML?Math.round(C):a.jqx._rup(C);if(z==o.series.length-1&&d){var r=0;for(var w=0;w<z;w++)r+=Math.abs(B[w][A].to-B[w][A].from);r+=C;if(r<l)if(C>0.5)C=a.jqx._ptrnd(C+
l-r);else{var w=z-1;while(w>=0){var u=Math.abs(B[w][A].to-B[w][A].from);if(u>1){if(B[w][A].from>B[w][A].to)B[w][A].from+=l-r;break}w--}}}if(e)C*=-1;if(G<D){n[A]+=C;B[z].push({from:s,to:s+C-1})}else{n[A]-=C;B[z].push({from:s,to:s-C})}}}var C=F*Math.max(E.min,D);this._renderData[g]={baseOffset:f,offsets:B};this._renderData[g].xoffsets=this._calculateXOffsets(g,b);return this._renderData[g]},_isPointSeriesOnly:function(){for(var b=0;b<this.seriesGroups.length;b++){var c=this.seriesGroups[b];if(c.type.indexOf("line")==
-1&&c.type.indexOf("area")==-1&&c.type.indexOf("scatter")==-1&&c.type.indexOf("bubble")==-1)return false}return true},_alignValuesWithTicks:function(f){var b=this._isPointSeriesOnly();var e=this._getCategoryAxis(f);var d=e.valuesOnTicks==undefined?b:e.valuesOnTicks!=false;if(f==undefined)return d;var c=this.seriesGroups[f];if(c.valuesOnTicks==undefined)return d;return c.valuesOnTicks},_getYearsDiff:function(c,b){return b.getFullYear()-c.getFullYear()},_getMonthsDiff:function(c,b){return 12*(b.getFullYear()-
c.getFullYear())+b.getMonth()-c.getMonth()},_getDaysDiff:function(c,b){return(b.valueOf()-c.valueOf())/(1E3*24*3600)},_getDateDiff:function(e,d,c){var b=0;if(c=="year")b=this._getYearsDiff(e,d);else if(c=="month")b=this._getMonthsDiff(e,d);else b=this._getDaysDiff(e,d);return b},_getDatesArray:function(d,k,m,l){var f=[];var g=this._getDateDiff(d,k,m)+1;if(m=="year"){if(l)g++;var b=d.getFullYear();for(var e=0;e<g;e++){f.push(new Date(b,0,1,0,0,0,0));b++}}else if(m=="month"){if(l)g++;var h=d.getMonth();
var j=d.getFullYear();for(var e=0;e<g;e++){f.push(new Date(j,h,1,0,0,0,0));h++;if(h>11){j++;h=0}}}else if(m=="day")for(var e=0;e<g;e++){var c=new Date(d.valueOf()+e*1E3*3600*24);f.push(c)}return f},_calculateXOffsets:function(c,b){var j=this._getCategoryAxis(c);var u=new Array;var h=this._getDataLen(c);var D=j.type=="date";var m=D?this._castAsDate(j.minValue):this._castAsNumber(j.minValue);var o=D?this._castAsDate(j.maxValue):this._castAsNumber(j.maxValue);var s=m,v=o;if(isNaN(s)||isNaN(v))for(var w=
0;w<h;w++){var q=this._getDataValue(w,j.dataField,c);q=D?this._castAsDate(q):this._castAsNumber(q);if(q==undefined||isNaN(q))continue;if(q<s||isNaN(s))s=q;if(q>v||isNaN(v))v=q}s=m||s;v=o||v;if(D&&!(this._isDate(s)&&this._isDate(v)))throw"Invalid Date values";var r=j.maxValue!=undefined||j.minValue!=undefined;if(r&&(isNaN(v)||isNaN(s))){r=false;throw"Invalid min/max category values";}if(!r&&!D){s=0;v=h-1}var A=j.unitInterval;if(isNaN(A)||A<=0)A=1;var E=NaN;var g=this._alignValuesWithTicks(c);if(r)if(g)E=
v-s;else E=v-s+A;else{E=h-1;if(!g)E++}if(E==0)E=A;var t=0;var C=v;var z=s;if(D){E=this._getDateDiff(z,C,j.baseUnit);E=a.jqx._rnd(E,1,false);if(!g||g&&(j.baseUnit=="month"||j.baseUnit=="year"))E++;if(j.baseUnit!="day")if(j.baseUnit=="month"){z=new Date(z.getFullYear(),z.getMonth(),1);C=new Date(z);C.setMonth(C.getMonth()+E)}else{z=new Date(z.getFullYear(),0,1);C=new Date(z);C.setYear(C.getYear()+E)}t=a.jqx._rnd(this._getDateDiff(z,C,"day"),1,false);if(!g)t++}var f=Math.max(1,E/A);var d=b.width/f;var p=
c!=undefined&&this.seriesGroups[c].type.indexOf("column")!=-1;var l=0;if(!g&&(!D||j.baseUnit=="day")&&!p)l=d/2;var e=-1,k=-1;for(var w=0;w<h;w++){if(!r&&!D){u.push(a.jqx._ptrnd(l+(w-z)/E*b.width));if(e==-1)e=w;if(k==-1||k<w)k=w;continue}var q=this._getDataValue(w,j.dataField,c);q=D?this._castAsDate(q):this._castAsNumber(q);if(isNaN(q)||q<z||q>C){u.push(-1);continue}var B=D?this._getDateDiff(z,q,"day"):q-z;var n=a.jqx._ptrnd(l+B/(D?t:E)*b.width);u.push(n);if(e==-1)e=w;if(k==-1||k<w)k=w}if(j.flip==
true)u.reverse();return{data:u,first:e,last:k,length:k==-1?0:k-e+1,itemWidth:d,rangeLength:E,min:s,max:v,customRange:r}},_getCategoryAxis:function(b){if(b==undefined||this.seriesGroups.length<=b)return this.categoryAxis;return this.seriesGroups[b].categoryAxis||this.categoryAxis},_isGreyScale:function(e,b){var d=this.seriesGroups[e];var c=d.series[b];if(c.greyScale==true)return true;else if(c.greyScale==false)return false;if(d.greyScale==true)return true;else if(d.greyScale==false)return false;return this.greyScale==
true},_getSeriesColor:function(d,c){var b=this._getSeriesColorInternal(d,c);if(this._isGreyScale(d,c)&&b.indexOf("#")==0)b=a.jqx.toGreyScale(b);return b},_getSeriesColorInternal:function(l,c){var e=this.seriesGroups[l];var m=e.series[c];if(m.color)return m.color;var k=0;for(var d=0;d<=l;d++)for(var b in this.seriesGroups[d].series)if(d==l&&b==c)break;else k++;var h=this.colorScheme;if(e.colorScheme){h=e.colorScheme;sidex=c}if(h==undefined||h=="")h=this.colorSchemes[0].name;if(h)for(var d=0;d<this.colorSchemes.length;d++){var f=
this.colorSchemes[d];if(f.name==h){while(k>f.colors.length){k-=f.colors.length;if(++d>=this.colorSchemes.length)d=0;f=this.colorSchemes[d]}return f.colors[k%f.colors.length]}}return"#222222"},_getColor:function(d,f,k,h){if(d==undefined||d=="")d=this.colorSchemes[0].name;for(var g=0;g<this.colorSchemes.length;g++)if(d==this.colorSchemes[g].name)break;var e=0;while(e<=f){if(g==this.colorSchemes.length)g=0;var b=this.colorSchemes[g].colors.length;if(e+b<=f){e+=b;g++}else{var c=this.colorSchemes[g].colors[f-
e];if(this._isGreyScale(k,h)&&c.indexOf("#")==0)c=a.jqx.toGreyScale(c);return c}}},getColorScheme:function(b){for(var c in this.colorSchemes)if(this.colorSchemes[c].name==b)return this.colorSchemes[c].colors;return undefined},addColorScheme:function(c,b){for(var d in this.colorSchemes)if(this.colorSchemes[d].name==c){this.colorSchemes[d].colors=b;return}this.colorSchemes.push({name:c,colors:b})},removeColorScheme:function(b){for(var c in this.colorSchemes)if(this.colorSchemes[c].name==b){this.colorSchemes.splice(c,
1);break}},colorSchemes:[{name:"scheme01",colors:["#4572A7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",
colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#2F2933","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]}],_formatValue:function(c,f,b){if(c==undefined)return"";if(this._isObject(c)&&!b)return"";if(b){if(!a.isFunction(b))return c.toString();
try{return b(c)}catch(d){return d.message}}if(this._isNumber(c))return this._formatNumber(c,f);if(this._isDate(c))return this._formatDate(c,f);if(f)return(f.prefix||"")+c.toString()+(f.sufix||"");return c.toString()},_getFormattedValue:function(k,e,b,c,d){var h=this.seriesGroups[k];var m=h.series[e];var l="";var f=c,i=d;if(!i)i=m.formatFunction||h.formatFunction;if(!f)f=m.formatSettings||h.formatSettings;if(!m.formatFunction&&m.formatSettings)i=undefined;var j=this._getDataValue(b,m.dataField,k);
if(j)l=this._formatValue(j,f,i);return l||""},_isNumberAsString:function(d){if(typeof d!="string")return false;d=a.trim(d);for(var b=0;b<d.length;b++){var c=d.charAt(b);if(c>="0"&&c<="9"||c==","||c==".")continue;if(c=="-"&&b==0)continue;if(c=="("&&b==0||c==")"&&b==d.length-1)continue;return false}return true},_castAsDate:function(c){if(c instanceof Date&&!isNaN(c))return c;if(typeof c=="string"){var b=new Date(c);if(b!=undefined)return b}return undefined},_castAsNumber:function(c){if(c instanceof
Date&&!isNaN(c))return c.valueOf();if(typeof c=="string")if(this._isNumber(c))c=parseFloat(c);else{var b=new Date(c);if(b!=undefined)c=b.valueOf()}return c},_isNumber:function(b){if(typeof b=="string")if(this._isNumberAsString(b))b=parseFloat(b);return typeof b==="number"&&isFinite(b)},_isDate:function(b){return b instanceof Date},_isBoolean:function(b){return typeof b==="boolean"},_isObject:function(b){return b&&(typeof b==="object"||a.isFunction(b))||false},_formatDate:function(c,b){return c.toString()},
_formatNumber:function(n,e){if(!this._isNumber(n))return n;e=e||{};var q=e.decimalSeparator||".";var o=e.thousandsSeparator||"";var m=e.prefix||"";var p=e.sufix||"";var h=e.decimalPlaces||(n*100!=parseInt(n)*100?2:0);var l=e.negativeWithBrackets||false;var g=n<0;if(g&&l)n*=-1;var d=n.toString();var b;var k=Math.pow(10,h);d=(Math.round(n*k)/k).toString();if(isNaN(d))d="";b=d.lastIndexOf(".");if(h>0){if(b<0){d+=q;b=d.length-1}else if(q!==".")d=d.replace(".",q);while(d.length-1-b<h)d+="0"}b=d.lastIndexOf(q);
b=b>-1?b:d.length;var f=d.substring(b);var c=0;for(var j=b;j>0;j--,c++){if(c%3===0&&j!==b&&(!g||j>1||g&&l))f=o+f;f=d.charAt(j-1)+f}d=f;if(g&&l)d="("+d+")";return m+d+p},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:false},_getBezierPoints:function(e){var h=[];var f=e.split(" ");for(var d=0;d<f.length;d++){var j=f[d].split(",");h.push({x:parseFloat(j[0]),y:parseFloat(j[1])})}var k="";for(var d=0;d<h.length-1;d++){var b=[];
if(0==d){b.push(h[d]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+2])}else if(h.length-2==d){b.push(h[d-1]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+1])}else{b.push(h[d-1]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+2])}var c=[];var g=9;c.push({x:b[1].x,y:b[1].y});c.push({x:(-b[0].x+g*b[1].x+b[2].x)/g,y:(-b[0].y+g*b[1].y+b[2].y)/g});c.push({x:(b[1].x+g*b[2].x-b[3].x)/g,y:(b[1].y+g*b[2].y-b[3].y)/g});c.push({x:b[2].x,y:b[2].y});k+="C"+a.jqx._ptrnd(c[1].x)+","+a.jqx._ptrnd(c[1].y)+" "+a.jqx._ptrnd(c[2].x)+","+
a.jqx._ptrnd(c[2].y)+" "+a.jqx._ptrnd(c[3].x)+","+a.jqx._ptrnd(c[3].y)+" "}return k},_animTickInt:50,_animate:function(d,c,f,e,b,h){if(f==0){e(d,b,1);return}if(!this._animList){this._animList=[];this._animTicks=0}var g=this._animTicks+Math.round(f/this._animTickInt);if(h==undefined)h="easeInOutSine";this._animList.push({key:d,properties:c,startTick:this._animTicks,endTick:g,fn:e,context:b,easing:h});this._enableAnimTimer()},_stopAnimations:function(){clearTimeout(this._animtimer);this._animtimer=
undefined;this._animList=undefined},_enableAnimTimer:function(){if(!this._animtimer){var b=this;this._animtimer=setTimeout(function(){b._runAnimation()},this._animTickInt)}},_runAnimation:function(){if(this._animList&&this._animList.length>0){this._animTicks++;var m=[];for(var k=0;k<this._animList.length;k++){var n=this._animList[k];if(n.endTick>this._animTicks)m.push(n);var b=(this._animTicks-n.startTick)*this._animTickInt;var e=(n.endTick-n.startTick)*this._animTickInt;var l=e>0?b/e:0;var d=l;if(n.easing)d=
jQuery.easing[n.easing](l,b,0,1,e);if(l>1)l=1;if(n.endTick==n.startTick)d=1;if(n.fn){n.fn(n.key,n.context,d);continue}var g={};for(var h=0;h<n.properties.length;h++){var c=n.properties[h];var f=0;if(l==1)f=c.to;else f=d*(c.to-c.from)+c.from;g[c.key]=f}this.renderer.attr(n.key,g)}this._animList=m;if(this.renderer instanceof a.jqx.HTML5Renderer)this.renderer.refresh()}this._animtimer=null;this._enableAnimTimer()}});a.jqx.toGreyScale=function(b){var c=a.jqx.cssToRgb(b);c[0]=c[1]=c[2]=Math.round(0.3*
c[0]+0.59*c[1]+0.11*c[2]);var d=a.jqx.rgbToHex(c[0],c[1],c[2]);return"#"+d[0]+d[1]+d[2]},a.jqx._adjustColor=function(d,b){var e=a.jqx.cssToRgb(d);var d="#";for(var f=0;f<3;f++){var g=Math.round(b*e[f]);if(g>255)g=255;else if(g<=0)g=0;g=a.jqx.decToHex(g);if(g.toString().length==1)d+="0";d+=g}return d.toUpperCase()};a.jqx.decToHex=function(b){return b.toString(16)},a.jqx.hexToDec=function(b){return parseInt(b,16)};a.jqx.rgbToHex=function(e,d,c){return[a.jqx.decToHex(e),a.jqx.decToHex(d),a.jqx.decToHex(c)]};
a.jqx.hexToRgb=function(c,d,b){return[a.jqx.hexToDec(c),a.jqx.hexToDec(d),a.jqx.hexToDec(b)]};a.jqx.cssToRgb=function(b){if(b.indexOf("rgb")<=-1)return a.jqx.hexToRgb(b.substring(1,3),b.substring(3,5),b.substring(5,7));return b.substring(4,b.length-1).split(",")};a.jqx.swap=function(b,d){var c=b;b=d;d=c};a.jqx.getNum=function(b){if(!a.isArray(b)){if(isNaN(b))return 0}else for(var c=0;c<b.length;c++)if(!isNaN(b[c]))return b[c];return 0};a.jqx._ptrnd=function(c){if(!document.createElementNS){if(Math.round(c)==
c)return c;return a.jqx._rnd(c,1,false)}if(Math.abs(Math.round(c)-c)==0.5)return c;var b=a.jqx._rnd(c,1,false);return b-0.5};a.jqx._rup=function(c){var b=Math.round(c);if(c>b)b++;return b};a.jqx._rnd=function(c,e,d){if(isNaN(c))return c;var b=c-c%e;if(c==b)return b;if(d){if(c>b)b+=e}else if(b>c)b-=e;return b};a.jqx.commonRenderer={pieSlicePath:function(j,i,g,q,z,A,d){if(!q)q=1;var l=Math.abs(z-A);var o=l>180?1:0;if(l>=360)A=z+359.99;var p=z*Math.PI*2/360;var h=A*Math.PI*2/360;var v=j,u=j,f=i,e=i;
var m=!isNaN(g)&&g>0;if(m)d=0;if(d+g>0){if(d>0){var k=l/2+z;var w=k*Math.PI*2/360;j+=d*Math.cos(w);i-=d*Math.sin(w)}if(m){var t=g;v=j+t*Math.cos(p);f=i-t*Math.sin(p);u=j+t*Math.cos(h);e=i-t*Math.sin(h)}}var s=j+q*Math.cos(p);var r=j+q*Math.cos(h);var c=i-q*Math.sin(p);var b=i-q*Math.sin(h);var n="";if(m){n="M "+u+","+e;n+=" a"+g+","+g;n+=" 0 "+o+",1 "+(v-u)+","+(f-e);n+=" L"+s+","+c;n+=" a"+q+","+q;n+=" 0 "+o+",0 "+(r-s)+","+(b-c)}else{n="M "+r+","+b;n+=" a"+q+","+q;n+=" 0 "+o+",1 "+(s-r)+","+(c-
b);n+=" L"+j+","+i+" Z"}return n}};a.jqx.svgRenderer=function(){};a.jqx.svgRenderer.prototype={_svgns:"http://www.w3.org/2000/svg",init:function(f){var d="<table id=tblChart cellspacing='0' cellpadding='0' border='0' align='left' valign='top'><tr><td colspan=2 id=tdTop></td></tr><tr><td id=tdLeft></td><td class='chartContainer'></td></tr></table>";f.append(d);this.host=f;var b=f.find(".chartContainer");b[0].style.width=f.width()+"px";b[0].style.height=f.height()+"px";var h;try{var c=document.createElementNS(this._svgns,
"svg");c.setAttribute("id","svgChart");c.setAttribute("version","1.1");c.setAttribute("width","100%");c.setAttribute("height","100%");b[0].appendChild(c);this.canvas=c}catch(g){return false}this._id=(new Date).getTime();this.clear();this._layout();this._runLayoutFix();return true},_runLayoutFix:function(){var b=this;this._fixLayout()},_fixLayout:function(){var g=a(this.canvas).position();var d=parseFloat(g.left)==parseInt(g.left);var b=parseFloat(g.top)==parseInt(g.top);if(a.browser.msie){var d=true,
b=true;var e=this.host;var c=0,f=0;while(e&&e.position&&e[0].parentNode){var h=e.position();c+=parseFloat(h.left)-parseInt(h.left);f+=parseFloat(h.top)-parseInt(h.top);e=e.parent()}d=parseFloat(c)==parseInt(c);b=parseFloat(f)==parseInt(f)}if(!d)this.host.find("#tdLeft")[0].style.width="0.5px";if(!b)this.host.find("#tdTop")[0].style.height="0.5px"},_layout:function(){var c=a(this.canvas).offset();var b=this.host.find(".chartContainer");this._width=Math.max(a.jqx._rup(this.host.width())-1,0);this._height=
Math.max(a.jqx._rup(this.host.height())-1,0);b[0].style.width=this._width;b[0].style.height=this._height;this._fixLayout()},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0)this.canvas.removeChild(this.canvas.firstElementChild);this._defs=document.createElementNS(this._svgns,"defs");this._gradients={};this.canvas.appendChild(this._defs)},removeElement:function(c){if(c!=
undefined)try{if(c.parentNode)c.parentNode.removeChild(c);else this.canvas.removeChild(c)}catch(b){}},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElementNS(this._svgns,"g");b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0)return;this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(d){var e=document.createElementNS(this._svgns,
"clipPath");var b=document.createElementNS(this._svgns,"rect");this.attr(b,{x:d.x,y:d.y,width:d.width,height:d.height});this._clipId=this._clipId||0;e.id="cl"+this._id+"_"+(++this._clipId).toString();e.appendChild(b);this._defs.appendChild(e);return e},setClip:function(c,b){return this.attr(c,{"clip-path":"url(#"+b.id+")"})},_clipId:0,addHandler:function(b,d,c){b["on"+d]=c},shape:function(b,e){var c=document.createElementNS(this._svgns,b);if(!c)return undefined;for(var d in e)c.setAttribute(d,e[d]);
this._activeParent().appendChild(c);return c},measureText:function(m,d,e){var g=document.createElementNS(this._svgns,"text");this.attr(g,e);g.appendChild(g.ownerDocument.createTextNode(m));var l=this._activeParent();l.appendChild(g);var n=g.getBBox();if(isNaN(n.width)||isNaN(n.height)||Math.abs(n.width)==Infinity||Math.abs(n.height)==Infinity)return{width:0,height:0};var h=a.jqx._rup(n.width);var b=a.jqx._rup(n.height);l.removeChild(g);if(d==0)return{width:h,height:b};var j=d*Math.PI*2/360;var c=
Math.abs(Math.sin(j));var i=Math.abs(Math.cos(j));var f=Math.abs(h*c+b*i);var k=Math.abs(h*i+b*c);return{width:a.jqx._rup(k),height:a.jqx._rup(f)}},text:function(r,o,m,v,t,D,F,E,q,i){var u;if(!q)q="center";if(!i)i="center";if(E){u=this.beginGroup();var e=this.createClipRect({x:a.jqx._rup(o)-1,y:a.jqx._rup(m)-1,width:a.jqx._rup(v)+2,height:a.jqx._rup(t)+2});this.setClip(u,e)}var s=document.createElementNS(this._svgns,"text");this.attr(s,F);s.appendChild(s.ownerDocument.createTextNode(r));var l=this._activeParent();
l.appendChild(s);var b=s.getBBox();l.removeChild(s);var G=b.width;var j=b.height*0.6;var p=v||0;var B=t||0;if(!D||D==0){if(q=="center")o+=(p-G)/2;else if(q=="right")o+=p-G;m+=j;if(i=="center")m+=(B-j)/2;else if(i=="bottom")m+=B-j;if(!v)v=G;if(!t)t=j;this.attr(s,{x:a.jqx._rup(o),y:a.jqx._rup(m),width:a.jqx._rup(v),height:a.jqx._rup(t),cursor:"default"});l.appendChild(s);this.endGroup();return s}var f=D*Math.PI*2/360;var C=Math.sin(f);var g=Math.cos(f);var k=j*g+G*C;var n=G*g+j*C;var z=m;var d=o;o+=
(v-n)/2;m+=(t-k)/2;m+=j*g;if(q=="left")if(g>0){o=d;if(C<0)o-=C*j}else{o=d-g*G;if(C<0)o-=C*j}else if(q=="right")if(g>0){o=d+v-n;if(C<0)o+=C*j}else{o=d+v;if(C>=0)o-=C*j}if(i=="top")if(C<0){m=z-C*G;if(g>0)m+=g*j}else{m=z;if(g>0)m=z+j*g}else if(i=="bottom")if(C<0){m=z+t;if(g<=0)m+=j*g}else{m=z+t-G*C;if(g<0)m+=j*g}o=a.jqx._rup(o);m=a.jqx._rup(m);var A=this.shape("g",{transform:"translate("+o+","+m+")"});var c=this.shape("g",{transform:"rotate("+D+")"});A.appendChild(c);c.appendChild(s);l.appendChild(A);
this.endGroup();return A},line:function(d,f,c,e,g){var b=this.shape("line",{x1:d,y1:f,x2:c,y2:e});this.attr(b,g)},path:function(c,d){var b=this.shape("path");b.setAttribute("d",c);if(d)this.attr(b,d);return b},rect:function(b,g,c,e,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);e=a.jqx._rup(e);var d=this.shape("rect",{x:b,y:g,width:c,height:e});if(f)this.attr(d,f);return d},circle:function(b,d,c){return this.shape("circle",{cx:b,cy:d,r:c})},pieSlicePath:function(c,h,g,e,f,d,b){return a.jqx.commonRenderer.pieSlicePath(c,
h,g,e,f,d,b)},pieslice:function(j,h,g,d,f,b,i,c){var e=this.pieSlicePath(j,h,g,d,f,b,i);var k=this.shape("path");k.setAttribute("d",e);if(c)this.attr(k,c);return k},attr:function(b,d){if(!b||!d)return;for(var c in d)b.setAttribute(c,d[c])},getAttr:function(c,b){return c.getAttribute(b)},_gradients:{},_toLinearGradient:function(e,g,h){var c="grd"+e.replace("#","")+(g?"v":"h");var b="url(#"+c+")";if(this._gradients[b])return b;var d=document.createElementNS(this._svgns,"linearGradient");this.attr(d,
{x1:"0%",y1:"0%",x2:g?"0%":"100%",y2:g?"100%":"0%",id:c});for(var f in h){var j=document.createElementNS(this._svgns,"stop");var i="stop-color:"+a.jqx._adjustColor(e,h[f][1]);this.attr(j,{offset:h[f][0]+"%",style:i});d.appendChild(j)}this._defs.appendChild(d);this._gradients[b]=true;return b},_toRadialGradient:function(e,h,g){var c="grd"+e.replace("#","")+"r"+(g!=undefined?g.key:"");var b="url(#"+c+")";if(this._gradients[b])return b;var d=document.createElementNS(this._svgns,"radialGradient");if(g==
undefined)this.attr(d,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:c});else this.attr(d,{cx:g.x1,cy:g.y1,r:g.outerRadius,id:c,gradientUnits:"userSpaceOnUse"});for(var f in h){var j=document.createElementNS(this._svgns,"stop");var i="stop-color:"+a.jqx._adjustColor(e,h[f][1]);this.attr(j,{offset:h[f][0]+"%",style:i});d.appendChild(j)}this._defs.appendChild(d);this._gradients[b]=true;return b}};a.jqx.vmlRenderer=function(){};a.jqx.vmlRenderer.prototype={init:function(g){var f="<div class='chartContainer' style=\"position:relative;overflow:hidden;\"><div>";
g.append(f);this.host=g;var b=g.find(".chartContainer");b[0].style.width=g.width()+"px";b[0].style.height=g.height()+"px";var d=true;try{for(var c=0;c<document.namespaces.length;c++)if(document.namespaces[c].name=="v"&&document.namespaces[c].urn=="urn:schemas-microsoft-com:vml"){d=false;break}}catch(h){return false}if(a.browser.msie&&parseInt(a.browser.version)<9&&document.childNodes&&document.childNodes.length>0&&document.childNodes[0].data&&document.childNodes[0].data.indexOf("DOCTYPE")!=-1){if(d)document.namespaces.add("v",
"urn:schemas-microsoft-com:vml");this._ie8mode=true}else if(d){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().cssText="v\\:* { behavior: url(#default#VML); display: inline-block; }"}this.canvas=b[0];this._width=Math.max(a.jqx._rup(b.width()),0);this._height=Math.max(a.jqx._rup(b.height()),0);b[0].style.width=this._width+2;b[0].style.height=this._height+2;this._id=(new Date).getTime();this.clear();return true},getRect:function(){return{x:0,y:0,width:this._width,
height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0)this.canvas.removeChild(this.canvas.firstElementChild);this._gradients={}},removeElement:function(b){if(b!=null)b.parentNode.removeChild(b)},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElement("v:group");c.style.position="absolute";c.coordorigin="0,0";c.coordsize=this._width+","+this._height;c.style.left=0;c.style.top=
0;c.style.width=this._width;c.style.height=this._height;b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0)return;this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(b){var c=document.createElement("div");c.style.height=b.height+"px";c.style.width=b.width+"px";c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.overflow=
"hidden";this._clipId=this._clipId||0;c.id="cl"+this._id+"_"+(++this._clipId).toString();this._activeParent().appendChild(c);return c},setClip:function(c,b){b.appendChild(c)},_clipId:0,addHandler:function(b,d,c){a(b).bind(d,c)},measureText:function(o,d,e){var f=document.createElement("v:textbox");var m=document.createElement("span");m.appendChild(document.createTextNode(o));f.appendChild(m);if(e["class"])m.className=e["class"];var n=this._activeParent();n.appendChild(f);var h=a(f);var i=a.jqx._rup(h.width());
var b=a.jqx._rup(h.height());n.removeChild(f);if(b==0&&a.browser.msie&&parseInt(a.browser.version)<9){var p=h.css("font-size");if(p){b=parseInt(p);if(isNaN(b))b=0}}if(d==0)return{width:i,height:b};var k=d*Math.PI*2/360;var c=Math.abs(Math.sin(k));var j=Math.abs(Math.cos(k));var g=Math.abs(i*c+b*j);var l=Math.abs(i*j+b*c);return{width:a.jqx._rup(l),height:a.jqx._rup(g)}},text:function(o,l,k,r,p,A,C,B,n,g){var s=C.stroke||"black";var q;if(!n)n="center";if(!g)g="center";B=false;if(B){q=this.beginGroup();
var e=this.createClipRect({x:a.jqx._rup(l),y:a.jqx._rup(k),width:a.jqx._rup(r),height:a.jqx._rup(p)});this.setClip(q,e)}var b=document.createElement("v:textbox");b.style.position="absolute";var t=document.createElement("span");t.appendChild(document.createTextNode(o));if(C["class"])t.className=C["class"];b.appendChild(t);var j=this._activeParent();j.appendChild(b);var D=a(b).width();var i=a(b).height();j.removeChild(b);var m=r||0;var v=p||0;if(!A||A==0||Math.abs(A)!=90){if(n=="center")l+=(m-D)/2;
else if(n=="right")l+=m-D;if(g=="center")k=k+(v-i)/2;else if(g=="bottom")k=k+v-i;if(!r)r=D;if(!p)p=i;if(!q){b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.width=a.jqx._rup(r);b.style.height=a.jqx._rup(p)}j.appendChild(b);if(q){this.endGroup();return j}return b}var f=A*Math.PI*2/360;var d=Math.abs(D*Math.sin(f)-i*Math.cos(f));var z=Math.abs(D*Math.cos(f)+i*Math.sin(f));if(n=="center")l+=(m-z)/2;else if(n=="right")l+=m-z;if(g=="center")k=k+(v-d)/2;else if(g=="bottom")k=k+v-d;l=a.jqx._rup(l);
k=a.jqx._rup(k);var u=a.jqx._rup(l+z);var c=a.jqx._rup(k+d);if(Math.abs(A)==90){j.appendChild(b);b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";if(q){this.endGroup();return j}return b}return b},shape:function(b,e){var c=document.createElement(this._createElementMarkup(b));if(!c)return undefined;for(var d in e)c.setAttribute(d,e[d]);this._activeParent().appendChild(c);return c},line:function(e,g,d,f,h){var b="M "+e+","+
g+" L "+d+","+f+" X E";var c=this.path(b);this.attr(c,h);return c},_createElementMarkup:function(b){var c="<v:"+b+' style=""></v:'+b+">";if(this._ie8mode)c=c.replace('style=""','style="behavior: url(#default#VML);"');return c},path:function(c,e){var b=document.createElement(this._createElementMarkup("shape"));b.style.position="absolute";b.coordsize=this._width+" "+this._height;b.coordorigin="0 0";b.style.width=parseInt(this._width);b.style.height=parseInt(this._height);b.style.left=0;b.style.top=
0;var d=document.createElement(this._createElementMarkup("path"));d.v=c;b.appendChild(d);this._activeParent().appendChild(b);if(e)this.attr(b,e);return b},rect:function(b,g,c,d,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);d=a.jqx._rup(d);var e=this.shape("rect",f);e.style.position="absolute";e.style.left=b;e.style.top=g;e.style.width=c;e.style.height=d;e.strokeweight=0;return e},circle:function(b,e,d){var c=this.shape("oval");b=a.jqx._ptrnd(b-d);e=a.jqx._ptrnd(e-d);d=a.jqx._rup(d);c.style.position=
"absolute";c.style.left=b;c.style.top=e;c.style.width=d*2;c.style.height=d*2;return c},updateCircle:function(d,b,e,c){if(b==undefined)b=parseFloat(d.style.left)+parseFloat(d.style.width)/2;if(e==undefined)e=parseFloat(d.style.top)+parseFloat(d.style.height)/2;if(c==undefined)c=parseFloat(d.width)/2;b=a.jqx._ptrnd(b-c);e=a.jqx._ptrnd(e-c);c=a.jqx._rup(c);d.style.left=b;d.style.top=e;d.style.width=c*2;d.style.height=c*2},pieSlicePath:function(k,j,h,r,B,C,d){if(!r)r=1;var m=Math.abs(B-C);var p=m>180?
1:0;if(m>360){B=0;C=360}var q=B*Math.PI*2/360;var i=C*Math.PI*2/360;var w=k,v=k,f=j,e=j;var n=!isNaN(h)&&h>0;if(n)d=0;if(d>0){var l=m/2+B;var A=l*Math.PI*2/360;k+=d*Math.cos(A);j-=d*Math.sin(A)}if(n){var u=h;w=a.jqx._ptrnd(k+u*Math.cos(q));f=a.jqx._ptrnd(j-u*Math.sin(q));v=a.jqx._ptrnd(k+u*Math.cos(i));e=a.jqx._ptrnd(j-u*Math.sin(i))}var t=a.jqx._ptrnd(k+r*Math.cos(q));var s=a.jqx._ptrnd(k+r*Math.cos(i));var c=a.jqx._ptrnd(j-r*Math.sin(q));var b=a.jqx._ptrnd(j-r*Math.sin(i));r=a.jqx._ptrnd(r);h=a.jqx._ptrnd(h);
k=a.jqx._ptrnd(k);j=a.jqx._ptrnd(j);var g=Math.round(B*65535);var z=Math.round(C-B)*65536;var o="";if(n){o="M"+w+" "+f;o+=" AE "+k+" "+j+" "+h+" "+h+" "+g+" "+z;o+=" L "+s+" "+b;g=Math.round(B-C)*65535;z=Math.round(C)*65536;o+=" AE "+k+" "+j+" "+r+" "+r+" "+z+" "+g;o+=" L "+w+" "+f}else{o="M"+k+" "+j;o+=" AE "+k+" "+j+" "+r+" "+r+" "+g+" "+z}o+=" X E";return o},pieslice:function(k,i,h,e,g,b,j,d){var f=this.pieSlicePath(k,i,h,e,g,b,j);var c=this.path(f,d);if(d)this.attr(c,d);return c},_keymap:[{svg:"fill",
vml:"fillcolor"},{svg:"stroke",vml:"strokecolor"},{svg:"stroke-width",vml:"strokeweight"},{svg:"fill-opacity",vml:"fillopacity"},{svg:"opacity",vml:"opacity"},{svg:"cx",vml:"style.left"},{svg:"cy",vml:"style.top"},{svg:"height",vml:"style.height"},{svg:"width",vml:"style.width"},{svg:"x",vml:"style.left"},{svg:"y",vml:"style.top"},{svg:"d",vml:"v"}],_translateParam:function(b){for(var c in this._keymap)if(this._keymap[c].svg==b)return this._keymap[c].vml;return b},attr:function(c,e){if(!c||!e)return;
for(var d in e){var b=this._translateParam(d);if(b=="fillcolor"&&e[d].indexOf("grd")!=-1)c.type=e[d];else if(b=="opacity"||b=="fillopacity"){if(c.fill)c.fill.opacity=e[d]}else if(b.indexOf("style.")==-1)c[b]=e[d];else c.style[b.replace("style.","")]=e[d]}},getAttr:function(d,c){var b=this._translateParam(c);if(b=="opacity"||b=="fillopacity")if(d.fill)return d.fill.opacity;else return 1;if(b.indexOf("style.")==-1)return d[b];return d.style[b.replace("style.","")]},_gradients:{},_toRadialGradient:function(b,
d,c){return b},_toLinearGradient:function(g,i,j){if(this._ie8mode)return g;var d="grd"+g.replace("#","")+(i?"v":"h");var e="#"+d+"";if(this._gradients[e])return e;var f=document.createElement(this._createElementMarkup("fill"));f.type="gradient";f.method="linear";f.angle=i?0:90;var c="";for(var h in j){if(h>0)c+=", ";c+=j[h][0]+"% "+a.jqx._adjustColor(g,j[h][1])}f.colors=c;var b=document.createElement(this._createElementMarkup("shapetype"));b.appendChild(f);b.id=d;this.canvas.appendChild(b);return e}};
a.jqx.HTML5Renderer=function(){};a.jqx.ptrnd=function(c){if(Math.abs(Math.round(c)-c)==0.5)return c;var b=Math.round(c);if(b<c)b=b-1;return b+0.5};a.jqx.HTML5Renderer.prototype={_elements:{},init:function(b){try{this.host=b;this.host.append("<canvas id='__jqxCanvasWrap' style='width:100%; height: 100%;'/>");this.canvas=b.find("#__jqxCanvasWrap");this.canvas[0].width=b.width();this.canvas[0].height=b.height();this.ctx=this.canvas[0].getContext("2d")}catch(c){return false}return true},getContainer:function(){if(this.canvas&&
this.canvas.length==1)return this.canvas;return undefined},getRect:function(){return{x:0,y:0,width:this.canvas[0].width-1,height:this.canvas[0].height-1}},beginGroup:function(){},endGroup:function(){},setClip:function(){},createClipRect:function(b){},addHandler:function(b,d,c){},clear:function(){this._elements={};this._maxId=0;this._renderers._gradients={};this._gradientId=0},removeElement:function(b){if(this._elements[b.id])delete this._elements[b,id]},_maxId:0,shape:function(b,e){var c={type:b,
id:this._maxId++};for(var d in e)c[d]=e[d];this._elements[c.id]=c;return c},attr:function(b,d){for(var c in d)b[c]=d[c]},rect:function(b,g,c,e,f){if(isNaN(b))throw'Invalid value for "x"';if(isNaN(g))throw'Invalid value for "y"';if(isNaN(c))throw'Invalid value for "width"';if(isNaN(e))throw'Invalid value for "height"';var d=this.shape("rect",{x:b,y:g,width:c,height:e});if(f)this.attr(d,f);return d},path:function(b,d){var c=this.shape("path",d);this.attr(c,{d:b});return c},line:function(c,e,b,d,f){return this.path("M "+
c+","+e+" L "+b+","+d,f)},circle:function(b,f,d,e){var c=this.shape("circle",{x:b,y:f,r:d});if(e)this.attr(c,e);return c},pieSlicePath:function(c,h,g,e,f,d,b){return a.jqx.commonRenderer.pieSlicePath(c,h,g,e,f,d,b)},pieslice:function(j,h,g,e,f,b,i,c){var d=this.path(this.pieSlicePath(j,h,g,e,f,b,i),c);this.attr(d,{x:j,y:h,innerRadius:g,outerRadius:e,angleFrom:f,angleTo:b});return d},_getCSSStyle:function(c){var e=document.styleSheets;for(var d=0;d<e.length;d++)for(var b=0;e[d].cssRules&&b<e[d].cssRules.length;b++)if(e[d].cssRules[b].selectorText!=
undefined)if(e[d].cssRules[b].selectorText.indexOf(c)!=-1)return e[d].cssRules[b].style;return{}},measureText:function(o,e,f){var k="Arial";var p="10pt";var m="";if(f["class"]){var b=this._getCSSStyle(f["class"]);if(b.fontSize)p=b.fontSize;if(b.fontFamily)k=b.fontFamily;if(b.fontWeight)m=b.fontWeight}this.ctx.font=m+" "+p+" "+k;var h=this.ctx.measureText(o).width;var n=document.createElement("span");n.font=this.ctx.font;n.textContent=o;document.body.appendChild(n);var c=n.offsetHeight*0.6;document.body.removeChild(n);
if(e==0)return{width:h,height:c};var j=e*Math.PI*2/360;var d=Math.abs(Math.sin(j));var i=Math.abs(Math.cos(j));var g=Math.abs(h*d+c*i);var l=Math.abs(h*i+c*d);return{width:a.jqx._rup(l),height:a.jqx._rup(g)}},text:function(l,k,i,c,m,e,f,d,g,j){var n=this.shape("text",{text:l,x:k,y:i,width:c,height:m,angle:e,clip:d,halign:g,valign:j});if(f)this.attr(n,f);n.fontFamily="Arial";n.fontSize="10pt";n.fontWeight="";n.color="#000000";if(f["class"]){var b=this._getCSSStyle(f["class"]);n.fontFamily=b.fontFamily||
n.fontFamily;n.fontSize=b.fontSize||n.fontSize;n.fontWeight=b.fontWeight||n.fontWeight;n.color=b.color||n.color}var h=this.measureText(l,0,f);n.textWidth=h.width;n.textHeight=h.height;return n},_toLinearGradient:function(c,g,f){if(this._renderers._gradients[c])return c;var b=[];for(var e=0;e<f.length;e++)b.push({percent:f[e][0]/100,color:a.jqx._adjustColor(c,f[e][1])});var d="gr"+this._gradientId++;this.createGradient(d,g?"vertical":"horizontal",b);return d},_toRadialGradient:function(c,f){if(this._renderers._gradients[c])return c;
var b=[];for(var e=0;e<f.length;e++)b.push({percent:f[e][0]/100,color:a.jqx._adjustColor(c,f[e][1])});var d="gr"+this._gradientId++;this.createGradient(d,"radial",b);return d},_gradientId:0,createGradient:function(d,c,b){this._renderers.createGradient(d,c,b)},_renderers:{_gradients:{},createGradient:function(d,c,b){this._gradients[d]={orientation:c,colorStops:b}},setStroke:function(b,c){b.strokeStyle=c.stroke||"transparent";b.lineWidth=c["stroke-width"]||1},setFillStyle:function(m,e){m.fillStyle=
"transparent";if(e["fill-opacity"])m.globalAlpha=e["fill-opacity"];else m.globalAlpha=1;if(e.fill&&e.fill.indexOf("#")==-1&&this._gradients[e.fill]){var k=this._gradients[e.fill].orientation!="horizontal";var g=this._gradients[e.fill].orientation=="radial";var c=a.jqx.ptrnd(e.x);var l=a.jqx.ptrnd(e.y);var b=a.jqx.ptrnd(e.x+(k?0:e.width));var h=a.jqx.ptrnd(e.y+(k?e.height:0));var j;if((e.type=="circle"||e.type=="path")&&g){x=a.jqx.ptrnd(e.x);y=a.jqx.ptrnd(e.y);r1=e.innerRadius||0;r2=e.outerRadius||
e.r||0;j=m.createRadialGradient(x,y,r1,x,y,r2)}if(!g){if(isNaN(c)||isNaN(b)||isNaN(l)||isNaN(h)){c=0;l=0;b=k?0:m.canvas.width;h=k?m.canvas.height:0}j=m.createLinearGradient(c,l,b,h)}var d=this._gradients[e.fill].colorStops;for(var f=0;f<d.length;f++)j.addColorStop(d[f].percent,d[f].color);m.fillStyle=j}else if(e.fill)m.fillStyle=e.fill},rect:function(b,c){b.fillRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height);b.strokeRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height)},circle:function(b,
c){if(c.r==0)return;b.beginPath();b.arc(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.r,0,Math.PI*2,false);b.closePath();b.fill();b.stroke()},_parsePoint:function(c){var b=this._parseNumber(c);var d=this._parseNumber(c);return{x:b,y:d}},_parseNumber:function(d){var e=false;for(var b=this._pos;b<d.length;b++){if(d[b]>="0"&&d[b]<="9"||d[b]=="."||d[b]=="-"&&!e){e=true;continue}if(!e&&(d[b]==" "||d[b]==",")){this._pos++;continue}break}var c=parseFloat(d.substring(this._pos,b));if(isNaN(c))return undefined;this._pos=
b;return c},_pos:0,_cmds:"mlcaz",_lastCmd:"",_isRelativeCmd:function(b){return a.jqx.string.contains(this._cmds,b)},_parseCmd:function(b){for(var c=this._pos;c<b.length;c++){if(a.jqx.string.containsIgnoreCase(this._cmds,b[c])){this._pos=c+1;this._lastCmd=b[c];return this._lastCmd}if(b[c]==" "){this._pos++;continue}if(b[c]>="0"&&b[c]<="9"){this._pos=c;if(this._lastCmd=="")break;else return this._lastCmd}}return undefined},_toAbsolutePoint:function(b){return{x:this._currentPoint.x+b.x,y:this._currentPoint.y+
b.y}},_currentPoint:{x:0,y:0},path:function(C,L){var z=L.d;this._pos=0;this._lastCmd="";var k=undefined;this._currentPoint={x:0,y:0};C.beginPath();var G=0;while(this._pos<z.length){var F=this._parseCmd(z);if(F==undefined)break;if(F=="M"||F=="m"){var D=this._parsePoint(z);if(D==undefined)break;C.moveTo(D.x,D.y);this._currentPoint=D;if(k==undefined)k=D;continue}if(F=="L"||F=="l"){var D=this._parsePoint(z);if(D==undefined)break;C.lineTo(D.x,D.y);this._currentPoint=D;continue}if(F=="A"||F=="a"){var g=
this._parseNumber(z);var f=this._parseNumber(z);var J=this._parseNumber(z)*(Math.PI/180);var N=this._parseNumber(z);var e=this._parseNumber(z);var o=this._parsePoint(z);if(this._isRelativeCmd(F))o=this._toAbsolutePoint(o);if(g==0||f==0)continue;var h=this._currentPoint;var I={x:Math.cos(J)*(h.x-o.x)/2+Math.sin(J)*(h.y-o.y)/2,y:-Math.sin(J)*(h.x-o.x)/2+Math.cos(J)*(h.y-o.y)/2};var j=Math.pow(I.x,2)/Math.pow(g,2)+Math.pow(I.y,2)/Math.pow(f,2);if(j>1){g*=Math.sqrt(j);f*=Math.sqrt(j)}var p=(N==e?-1:1)*
Math.sqrt((Math.pow(g,2)*Math.pow(f,2)-Math.pow(g,2)*Math.pow(I.y,2)-Math.pow(f,2)*Math.pow(I.x,2))/(Math.pow(g,2)*Math.pow(I.y,2)+Math.pow(f,2)*Math.pow(I.x,2)));if(isNaN(p))p=0;var H={x:p*g*I.y/f,y:p*-f*I.x/g};var B={x:(h.x+o.x)/2+Math.cos(J)*H.x-Math.sin(J)*H.y,y:(h.y+o.y)/2+Math.sin(J)*H.x+Math.cos(J)*H.y};var A=function(i){return Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))};var t=function(m,i){return(m[0]*i[0]+m[1]*i[1])/(A(m)*A(i))};var M=function(m,i){return(m[0]*i[1]<m[1]*i[0]?-1:1)*Math.acos(t(m,
i))};var E=M([1,0],[(I.x-H.x)/g,(I.y-H.y)/f]);var n=[(I.x-H.x)/g,(I.y-H.y)/f];var l=[(-I.x-H.x)/g,(-I.y-H.y)/f];var K=M(n,l);if(t(n,l)<=-1)K=Math.PI;if(t(n,l)>=1)K=0;if(e==0&&K>0)K=K-2*Math.PI;if(e==1&&K<0)K=K+2*Math.PI;var t=g>f?g:f;var w=g>f?1:g/f;var q=g>f?f/g:1;C.translate(B.x,B.y);C.rotate(J);C.scale(w,q);C.arc(0,0,t,E,E+K,1-e);C.scale(1/w,1/q);C.rotate(-J);C.translate(-B.x,-B.y);continue}if((F=="Z"||F=="z")&&k!=undefined){C.lineTo(k.x,k.y);this._currentPoint=k;continue}if(F=="C"||F=="c"){var d=
this._parsePoint(z);var c=this._parsePoint(z);var b=this._parsePoint(z);C.bezierCurveTo(d.x,d.y,c.x,c.y,b.x,b.y);this._currentPoint=b;continue}}C.fill();C.stroke();C.closePath()},text:function(q,v){var k=a.jqx.ptrnd(v.x);var i=a.jqx.ptrnd(v.y);var o=a.jqx.ptrnd(v.width);var n=a.jqx.ptrnd(v.height);var m=v.halign;var d=v.valign;var t=v.angle;var u=v.clip||true;q.save();if(!m)m="center";if(!d)d="center";if(u){q.rect(k-2,i-2,o+5,n+5);q.clip()}var z=v.textWidth;var f=v.textHeight;var l=o||0;var r=n||
0;q.fillStyle=v.color;q.font=v.fontWeight+" "+v.fontSize+" "+v.fontFamily;if(!t||t==0){if(m=="center")k+=(l-z)/2;else if(m=="right")k+=l-z;i+=f;if(d=="center")i+=(r-f)/2;else if(d=="bottom")i+=r-f;if(!o)o=z;if(!n)n=f;q.fillText(v.text,k,i);q.restore();return}var c=t*Math.PI*2/360;var s=Math.sin(c);var e=Math.cos(c);var g=f*e+z*s;var j=z*e+f*s;var p=i;var b=k;k+=(o-j)/2;i+=(n-g)/2;i+=f*e;if(m=="left")if(e>0){k=b;if(s<0)k-=s*f}else{k=b-e*z;if(s<0)k-=s*f}else if(m=="right")if(e>0){k=b+o-j;if(s<0)k+=
s*f}else{k=b+o;if(s>=0)k-=s*f}if(d=="top")if(s<0){i=p-s*z;if(e>0)i+=e*f}else{i=p;if(e>0)i=p+f*e}else if(d=="bottom")if(s<0){i=p+n;if(e<=0)i+=f*e}else{i=p+n-z*s;if(e<0)i+=f*e}k=a.jqx._rup(k);i=a.jqx._rup(i);q.translate(k,i);q.rotate(c);q.fillText(v.text,0,0);q.restore()}},refresh:function(){this.ctx.clearRect(0,0,this.canvas[0].width,this.canvas[0].height);for(var b in this._elements){var c=this._elements[b];this._renderers.setFillStyle(this.ctx,c);this._renderers.setStroke(this.ctx,c);this._renderers[this._elements[b].type](this.ctx,
c)}}}})(jQuery);
(function(d){var b={defineInstance:function(){this.width=350;this.height=350;this.radius="50%";this.endAngle=270;this.startAngle=30;this.value=0;this.min=0;this.max=220;this.disabled=false;this.ticksDistance;this.colorScheme="scheme01";this.animationDuration=400;this.showRanges=true;this.easing="easeOutCubic";this.labels;this.pointer;this.cap;this.caption;this.border;this.ticksMinor;this.ticksMajor;this.style;this.ranges=[];this._radius;this._border=null;this._radiusDifference=2;this._pointer=null;
this._labels=[];this._cap=null;this._ticks=[];this._ranges=[];this._gauge=null;this._caption=null;this._animationTimeout=10;this._r=null;this._animations=[]},createInstance:function(e){this._radius=this.radius;this.endAngle=this.endAngle*Math.PI/180+Math.PI/2;this.startAngle=this.startAngle*Math.PI/180+Math.PI/2;this._refresh();this.setValue(this.value,0);this._r.getContainer().css("overflow","hidden")},_validateEasing:function(){return!!d.easing[this.easing]},_validateProperties:function(){if(this.startAngle===
this.endAngle)throw new Error("The end angle can not be equal to the start angle!");if(!this._validateEasing())this.easing="linear";this.ticksDistance=this._validatePercentage(this.ticksDistance,"20%");this.border=this._borderConstructor(this.border,this);this.style=this.style||{fill:"#ffffff",stroke:"#E0E0E0"};this.ticksMinor=new this._tickConstructor(this.ticksMinor,this);this.ticksMajor=new this._tickConstructor(this.ticksMajor,this);this.cap=new this._capConstructor(this.cap,this);this.pointer=
new this._pointerConstructor(this.pointer,this);this.labels=new this._labelsConstructor(this.labels,this);this.caption=new this._captionConstructor(this.caption,this);for(var e=0;e<this.ranges.length;e+=1)this.ranges[e]=new this._rangeConstructor(this.ranges[e],this)},_hostInit:function(){var h=this._getScale(this.width,"width",this.host.parent()),e=this._getScale(this.height,"height",this.host.parent()),g=this._outerBorderOffset(),i=this.host,f;i.width(h);i.height(e);this.radius=f=(this._getScale(this._radius,
"width",this.host)||h/2)-g;this._originalRadius=parseInt(this.radius,10)-this._radiusDifference;this._innerRadius=this._originalRadius;if(this.border)this._innerRadius-=this._getSize(this.border.size);i[0].innerHTML="<div />";this._gaugeParent=i.children();this._gaugeParent.width(h);this._gaugeParent.height(e);this._r.init(this._gaugeParent)},_refresh:function(){var e=null;this._isVML=false;if(document.createElementNS&&(this.renderEngine=="SVG"||this.renderEngine==undefined)){e=new d.jqx.svgRenderer;
if(!e.init(this.host)){if(this.renderEngine=="SVG")throw"Your browser does not support SVG";return}}if(e==null&&this.renderEngine!="HTML5"){e=new d.jqx.vmlRenderer;if(!e.init(this.host)){if(this.renderEngine=="VML")throw"Your browser does not support VML";return}this._isVML=true}if(e==null&&(this.renderEngine=="HTML5"||this.renderEngine==undefined)){e=new d.jqx.HTML5Renderer;if(!e.init(this.host))throw"Your browser does not support HTML5 Canvas";}this._r=e;this._validateProperties();this._hostInit();
this._removeElements();this._render();this.setValue(this.value,0)},refresh:function(){this._refresh.apply(this,Array.prototype.slice(arguments))},_outerBorderOffset:function(){var e=parseInt(this.border.style["stroke-width"],10)||1;return e/2},_removeCollection:function(f){for(var e=0;e<f.length;e+=1)d(f[e]).remove();f=[]},_render:function(){this._addBorder();this._addGauge();this._addRanges();this._addTicks();this._addLabels();this._addCaption();this._addPointer();this._addCap()},_addBorder:function(){if(!this.border.visible)return;
var e=this.border.style.fill,f=this._outerBorderOffset();if(!e)e="#BABABA";if(this.border.showGradient){if(e.indexOf("url")<0&&e.indexOf("#grd")<0)this._originalColor=e;else e=this._originalColor;e=this._r._toLinearGradient(e,true,[[0,1],[25,1.1],[50,1.5],[100,1]])}this._border=this._r.circle(this._originalRadius+f,this._originalRadius+f,this._originalRadius);this.border.style.fill=e;this._r.attr(this._border,this.border.style)},_addGauge:function(){var g=this._originalRadius,e=this._r._toLinearGradient("#ffffff",
[[3,2],[100,1]]),f=this._outerBorderOffset();this._gauge=this._r.circle(g+f,g+f,this._innerRadius);this._r.attr(this._gauge,this.style)},_addCap:function(){var e="visible",g=this._outerBorderOffset();if(!this.cap.visible)e="hidden";var h=this._originalRadius,f=this._getSize(this.cap.size),i;i=this._r.circle(h+g,h+g,f);this._capCenter=[h,h];this._r.attr(i,this.cap.style);d(i).css("visibility",e);this._cap=i},_addTicks:function(){var e=this.ticksMinor,l=this.ticksMajor,h=e.interval,k=l.interval,m={};
for(var g=this.min,f=this.min;g<=this.max||f<=this.max;g+=h,f+=k){if(f<=this.max&&l.visible){this._drawTick({angle:this._getAngleByValue(f),distance:this._getDistance(this.ticksDistance),style:l.style,size:this._getSize(l.size),type:"major"});m[f.toFixed(5)]=true}if(!m[g.toFixed(5)]&&e.visible)this._drawTick({angle:this._getAngleByValue(g),distance:this._getDistance(this.ticksDistance),style:e.style,size:this._getSize(e.size),type:"minor"})}this._handleTicksVisibility()},_handleTicksVisibility:function(){if(!this.ticksMinor.visible)this.host.children(".jqx-gauge-tick-minor").css("visibility",
"hidden");else this.host.children(".jqx-gauge-tick-minor").css("visibility","visible");if(!this.ticksMajor.visible)this.host.children(".jqx-gauge-tick-major").css("visibility","hidden");else this.host.children(".jqx-gauge-tick-major").css("visibility","visible")},_getSize:function(e){if(e.toString().indexOf("%")>=0)e=parseInt(e,10)/100*this._innerRadius;e=parseInt(e,10);return e},_getDistance:function(e){return this._getSize(e)+(this._originalRadius-this._innerRadius)},_drawTick:function(q){var j=
q.angle,g=q.distance,p=q.size,k=this._outerBorderOffset(),e=this._originalRadius,i=e-g,l=i-p,h=e+k+i*Math.sin(j),n=e+k+i*Math.cos(j),f=e+k+l*Math.sin(j),m=e+k+l*Math.cos(j),o;q.style["class"]=this.toThemeProperty("jqx-gauge-tick-"+q.type);if(this._isVML){h=Math.round(h);f=Math.round(f);n=Math.round(n);m=Math.round(m)}o=this._r.line(h,n,f,m,q.style);this._ticks.push(o)},_addRanges:function(){var f="visible";if(!this.showRanges)f="hidden";else{var e=this.ranges;for(var g=0;g<e.length;g+=1)this._addRange(e[g],
f)}},_getMaxRangeSize:function(){var f,h=-1,j,e;for(var g=0;g<this.ranges.length;g+=1){j=this.ranges[g].startWidth;e=this.ranges[g].endWidth;if(j>h)h=j;if(e>h)h=e}return h},_getRangeDistance:function(i,e){var h=this._getLabelsDistance(),f=this._getDistance(i),g=this._getMaxRangeSize();if(this.labels.position==="outside"){if(h<f+this._getMaxTickSize())return this._getDistance(this.ticksDistance)+g/2+this._getSize(this.ticksMajor.size)}else if(this.labels.position==="inside")if(h+this._getMaxTickSize()<
f)return this._getSize(this.border.size)+this._originalRadius/20;return f},_addRange:function(m,g){if(m.startValue<this.min||m.endValue>this.max)return;var p=this._getAngleByValue(m.startValue),j=this._getAngleByValue(m.endValue),n=this._originalRadius,f=n-this._getRangeDistance(m.startDistance,m.startWidth),r=n-this._getRangeDistance(m.endDistance,m.endWidth),l=m.startWidth,e=m.endWidth,k=this._outerBorderOffset(),i={x:n+k+f*Math.sin(p),y:n+k+f*Math.cos(p)},q={x:n+k+r*Math.sin(j),y:n+k+r*Math.cos(j)},
s=this._getProjectionPoint(p,n+k,f,l),o=this._getProjectionPoint(j,n+k,r,e),h="default",t,m;if(Math.abs(j-p)>Math.PI)h="opposite";if(this._isVML)t=this._rangeVMLRender(i,q,n,s,o,e,l,f,r,h);else t=this._rangeSVGRender(i,q,n,s,o,e,l,f,r,h);m.style.visibility=g;m.style["class"]=this.toThemeProperty("jqx-gauge-range");m=this._r.path(t,m.style);this._ranges.push(m)},_rangeSVGRender:function(i,m,k,o,l,e,j,f,n,h){var p="",f=k-f,n=k-n,g=["0,1","0,0"];if(h==="opposite")g=["1,1","1,0"];p="M"+i.x+","+i.y+" ";
p+="A"+(k-f)+","+(k-f)+" 100 "+g[0]+" "+m.x+","+m.y+" ";p+="L "+l.x+","+l.y+" ";p+="A"+(k-e-f)+","+(k-e-f)+" 100 "+g[1]+" "+o.x+","+o.y+" ";p+="L "+i.x+","+i.y+" ";p+="z";return p},_rangeVMLRender:function(p,m,h,w,i,l,n,q,s,f){h-=h-q+10;var o="",r=Math.floor(h+(n+l)/2),q=Math.floor(h-q),s=Math.floor(s),t={x:(w.x+i.x)/2,y:(w.y+i.y)/2},e=Math.sqrt((i.x-w.x)*(i.x-w.x)+(i.y-w.y)*(i.y-w.y)),v=Math.floor(t.x+Math.sqrt(h*h-e/2*(e/2))*(w.y-i.y)/e),u=Math.floor(t.y+Math.sqrt(h*h-e/2*(e/2))*(i.x-w.x)/e),x=
{x:(p.x+m.x)/2,y:(p.y+m.y)/2},g=Math.sqrt((m.x-p.x)*(m.x-p.x)+(m.y-p.y)*(m.y-p.y)),k=Math.floor(x.x+Math.sqrt(Math.abs(r*r-g/2*(g/2)))*(p.y-m.y)/g),j=Math.floor(x.y+Math.sqrt(Math.abs(r*r-g/2*(g/2)))*(m.x-p.x)/g);if(f==="opposite"){v=Math.floor(t.x-Math.sqrt(h*h-e/2*(e/2))*(w.y-i.y)/e);u=Math.floor(t.y-Math.sqrt(h*h-e/2*(e/2))*(i.x-w.x)/e);k=Math.floor(x.x-Math.sqrt(Math.abs(r*r-g/2*(g/2)))*(p.y-m.y)/g);j=Math.floor(x.y-Math.sqrt(Math.abs(r*r-g/2*(g/2)))*(m.x-p.x)/g)}h=Math.floor(h);m={x:Math.floor(m.x),
y:Math.floor(m.y)};p={x:Math.floor(p.x),y:Math.floor(p.y)};w={x:Math.floor(w.x),y:Math.floor(w.y)};i={x:Math.floor(i.x),y:Math.floor(i.y)};o="m "+m.x+","+m.y;o+="at "+(k-r)+" "+(j-r)+" "+(r+k)+" "+(r+j)+" "+m.x+","+m.y+" "+p.x+","+p.y;o+="l "+w.x+","+w.y;o+="m "+m.x+","+m.y;o+="l "+i.x+","+i.y;o+="at "+(v-h)+" "+(u-h)+" "+(h+v)+" "+(h+u)+" "+i.x+","+i.y+" "+w.x+","+w.y;o+="qx "+w.x+" "+w.y;return o},_getProjectionPoint:function(i,f,h,g){var e={x:f+(h-g)*Math.sin(i),y:f+(h-g)*Math.cos(i)};return e},
_addLabels:function(e){var f=this._getDistance(this._getLabelsDistance());for(currentLabel=this.min;currentLabel<=this.max;currentLabel+=this.labels.interval)if(this.labels.visible)this._addLabel({angle:this._getAngleByValue(currentLabel),value:currentLabel,distance:f,style:this.labels.className})},_getLabelsDistance:function(){var g=this._getMaxLabelSize(),f=this._getDistance(this.labels.distance),e=this._getDistance(this.ticksDistance);g=g.width;if(this.labels.position==="inside")return e+g-5;else if(this.labels.position===
"outside"){if(f<e-g*1.5)return f;return Math.max(e-g*1.5,0.6*g)}return this.labels.distance},_addLabel:function(q){var g=q.angle,f=this._originalRadius,o=f-q.distance,h=this.labels.offset,p=this.labels.formatValue,i=this._outerBorderOffset(),m=f+i+o*Math.sin(g)+h[0],k=f+i+o*Math.cos(g)+h[1],n=q.value,j=q.style||"",e,l;if(typeof p==="function")n=p(n);e=this._r.measureText(n,0,{"class":j});l=this._r.text(n,Math.round(m)-e.width/2,Math.round(k),e.width,e.height,0,{"class":this.toThemeProperty("jqx-gauge-label")});
this._labels.push(l)},_addCaption:function(){var l=this.caption.value,j=this.toThemeProperty("jqx-gauge-caption"),k=this.caption.offset,h=this._r.measureText(l,0,{"class":j}),e=this._getPosition(this.caption.position,h,k),i=this.caption.style,f=this._outerBorderOffset(),g=this._r.text(l,e.left+f,e.top+f,h.width,h.height,0,{"class":j});this._caption=g},_getPosition:function(e,f,j){var i=0,h=0,g=this._originalRadius;switch(e){case "left":i=(g-f.width)/2;h=g-f.height/2;break;case "right":i=g+(g-f.width)/
2;h=g-f.height/2;break;case "bottom":i=(2*g-f.width)/2;h=(g+2*g-f.height)/2;break;default:i=(2*g-f.width)/2;h=(g+f.height)/2;break}return{left:i+j[0],top:h+j[1]}},_addPointer:function(){var g="visible";if(!this.pointer.visible)g="hidden";var f=this._originalRadius,i=this._getSize(this.pointer.length),j=i*0.9,k=this._getAngleByValue(this.value),e=this.pointer.pointerType,h;h=this._computePointerPoints(this._getSize(this.pointer.width),k,i,e!=="default");this._pointer=this._r.path(h,this.pointer.style);
d(this._pointer).css("visibility",g)},_computePointerPoints:function(e,g,h,f){if(!f)return this._computeArrowPoints(e,g,h);else return this._computeRectPoints(e,g,h)},_computeArrowPoints:function(n,g,k){var f=this._originalRadius-0.5,l=Math.sin(g),q=Math.cos(g),j=this._outerBorderOffset(),o=f+j+k*l,m=f+j+k*q,i=f+j+n*q,e=f+j-n*l,h=f+j-n*q,s=f+j+n*l,p;if(this._isVML){i=Math.round(i);h=Math.round(h);e=Math.round(e);s=Math.round(s);o=Math.round(o);m=Math.round(m)}p="M "+i+","+e+" L "+h+","+s+" L "+o+
","+m+"";return p},_computeRectPoints:function(q,i,o){var f=this._originalRadius,p=Math.sin(i),t=Math.cos(i),u=o,l=this._outerBorderOffset(),n=f+l-q*t+o*p,h=f+l+q*p+o*t,m=f+l+q*t+o*p,g=f+l-q*p+o*t,k=f+l+q*t,e=f+l-q*p,j=f+l-q*t,v=f+l+q*p,s;if(this._isVML){k=Math.round(k);j=Math.round(j);e=Math.round(e);v=Math.round(v);n=Math.round(n);h=Math.round(h);m=Math.round(m);g=Math.round(g)}s="M "+k+","+e+" L "+j+","+v+" L "+n+","+h+" "+m+","+g;return s},_getAngleByValue:function(i){var h=this.startAngle,g=
this.endAngle,j=this.min,e=this.max,f=(h-g)/(e-j);return f*(i-this.min)+h+Math.PI},_setValue:function(g){if(g<=this.max&&g>=this.min){var h=this._getAngleByValue(g),e=this.pointer.pointerType,f=this._computePointerPoints(this._getSize(this.pointer.width),h,this._getSize(this.pointer.length),e!=="default");if(this._isVML)this._r.attr(this._pointer.childNodes[0],{v:f});else this._r.attr(this._pointer,{d:f});this.value=g}},propertyChangedHandler:function(e,f,h,g){if(f=="min")this.min=parseInt(g);if(f==
"max")this.max=parseInt(g);if(f=="value")this.value=parseInt(g);if(f==="disabled")if(g)this.disable();else this.enable();else if(f==="value"){this.value=h;this.setValue(g)}else{if(f==="startAngle")this.startAngle=this.startAngle*Math.PI/180-Math.PI/2;else if(f==="endAngle")this.endAngle=this.endAngle*Math.PI/180-Math.PI/2;else if(f==="colorScheme"){this.pointer.style=null;this.cap.style=null}else if(f==="radius")this._radius=g;if(f!=="animationDuration"&&f!=="easing")this._refresh()}if(this._r instanceof
d.jqx.HTML5Renderer)this._r.refresh()},_tickConstructor:function(f,e){if(this.host)return new this._tickConstructor(f,e);f=f||{};this.size=e._validatePercentage(f.size,"10%");this.interval=parseFloat(f.interval);if(!this.interval)this.interval=5;this.style=f.style||{stroke:"#898989","stroke-width":1};if(typeof f.visible==="undefined")this.visible=true;else this.visible=f.visible},_capConstructor:function(g,e){var f=e._getColorScheme(e.colorScheme)[0];if(this.host)return new this._capConstructor(g,
e);g=g||{};if(typeof g.visible==="undefined")this.visible=true;else this.visible=g.visible;this.size=e._validatePercentage(g.size,"4%");this.style=g.style||{fill:f,"stroke-width":"1px",stroke:f,"z-index":30}},_pointerConstructor:function(g,e){var f=e._getColorScheme(e.colorScheme)[0];if(this.host)return new this._pointerConstructor(g,e);g=g||{};if(typeof g.visible==="undefined")this.visible=true;else this.visible=g.visible;this.pointerType=g.pointerType;if(this.pointerType!=="default"&&this.pointerType!==
"rectangle")this.pointerType="default";this.style=g.style||{"z-index":0,stroke:f,fill:f,"stroke-width":1};this.length=e._validatePercentage(g.length,"70%");this.width=e._validatePercentage(g.width,"2%")},_labelsConstructor:function(f,e){if(this.host)return new this._labelsConstructor(f,e);f=f||{};if(typeof f.visible==="undefined")this.visible=true;else this.visible=f.visible;this.offset=f.offset;if(!(this.offset instanceof Array))this.offset=[0,-10];this.interval=parseFloat(f.interval);if(!this.interval)this.interval=
20;this.distance=e._validatePercentage(f.distance,"38%");this.position=f.position;if(this.position!=="inside"&&this.position!=="outside")this.position="none";this.formatValue=f.formatValue;if(typeof this.formatValue!=="function")this.formatValue=function(g){return g}},_captionConstructor:function(f,e){if(this.host)return new this._captionConstructor(f,e);f=f||{};if(typeof f.visible==="undefined")this.visible=true;else this.visible=f.visible;this.value=f.value||"";this.position=f.position;if(this.position!==
"bottom"&&this.position!=="top"&&this.position!=="left"&&this.position!=="right")this.position="bottom";this.offset=f.offset;if(!(this.offset instanceof Array))this.offset=[0,0]},_rangeConstructor:function(f,e){if(this.host)return new this._rangeConstructor(f,e);f=f||{};this.startDistance=e._validatePercentage(f.startDistance,"5%");this.endDistance=e._validatePercentage(f.endDistance,"5%");this.style=f.style||{fill:"#000000",stroke:"#111111"};this.startWidth=parseInt(f.startWidth,10);if(!this.startWidth)this.startWidth=
10;this.startWidth=Math.max(this.startWidth,2);this.endWidth=parseInt(f.endWidth,10);if(!this.endWidth)this.endWidth=10;this.endWidth=Math.max(this.endWidth,2);this.startValue=parseInt(f.startValue,10);if(!this.startValue)this.startValue=0;this.endValue=parseInt(f.endValue,10);if(!this.endValue)this.endValue=100},_borderConstructor:function(f,e){if(this.host)return new this._borderConstructor(f,e);f=f||{};this.size=e._validatePercentage(f.size,"10%");this.style=f.style||{stroke:"#cccccc"};if(typeof f.showGradient===
"undefined")this.showGradient=true;else this.showGradient=f.showGradient;if(typeof f.visible==="undefined")this.visible=true;else this.visible=f.visible}};var c={_events:["valueChanging","valueChanged"],_animationTimeout:10,_schemes:d.jqx._jqxChart.prototype.colorSchemes,_getScale:function(e,g,f){if(e&&e.toString().indexOf("%")>=0){e=parseInt(e,10)/100;return f[g]()*e}return parseInt(e,10)},_removeElements:function(){this.host.children(".chartContainer").remove();this.host.children("#tblChart").remove()},
_getMaxLabelSize:function(){var h=this.max,e=this.min,g=this._r.measureText(h,0,{"class":this.toThemeProperty("jqx-gauge-label")}),f=this._r.measureText(e,0,{"class":this.toThemeProperty("jqx-gauge-label")});if(f.width>g.width)return f;return g},disable:function(){this.disabled=true;this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))},enable:function(){this.disabled=false;this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},destroy:function(){this._removeElements()},
_validatePercentage:function(f,e){if(parseFloat(f)!==0&&(!f||!parseInt(f,10)))f=e;return f},_getColorScheme:function(f){var e;for(var g=0;g<this._schemes.length;g+=1){e=this._schemes[g];if(e.name===f)return e.colors}return null},setValue:function(e,f){if(!this.disabled){if(e>this.max)e=this.max;if(e<this.min)e=this.min;f=f||this.animationDuration||0;var g=f/this._animationTimeout;this._animate((e-this.value)/g,this.value,e,f)}},_animate:function(f,h,e,g){if(this._timeout)this._endAnimation(this.value,
false);if(!g){this._endAnimation(e,true);return}this._animateHandler(f,h,e,0,g)},_animateHandler:function(g,j,e,i,h){var f=this;if(i<=h)this._timeout=setTimeout(function(){f.value=j+(e-j)*d.easing[f.easing](i/h,i,0,1,h);f._setValue(f.value);f._raiseEvent(0,{value:f.value});f._animateHandler(g,j,e,i+f._animationTimeout,h)},this._animationTimeout);else this._endAnimation(e,true)},_endAnimation:function(e,f){clearTimeout(this._timeout);this._timeout=null;this._setValue(e);if(f)this._raiseEvent(1,{value:e})},
_getMaxTickSize:function(){return Math.max(this._getSize(this.ticksMajor.size),this._getSize(this.ticksMinor.size))},_raiseEvent:function(g,f){var h=d.Event(this._events[g]),e;h.args=f||{};e=this.host.trigger(h);return e}},a={defineInstance:function(){this.value=-50;this.max=40;this.min=-60;this.width=100;this.height=300;this.pointer={};this.labels={};this.animationDuration=1E3;this.showRanges={};this.ticksMajor={size:"15%",interval:5};this.ticksMinor={size:"10%",interval:2.5};this.ranges=[];this.easing=
"easeOutCubic";this.colorScheme="scheme01";this.disabled=false;this.rangesOffset=0;this.background={};this.ticksPosition="both";this.rangeSize="5%";this.scaleStyle=null;this.ticksOffset=null;this.scaleLength="90%";this.orientation="vertical";this._originalColor;this._width;this._height;this._r},createInstance:function(){this.host.css("overflow","hidden")},refresh:function(f){var e=null;this._isVML=false;if(document.createElementNS&&(this.renderEngine=="SVG"||this.renderEngine==undefined)){e=new d.jqx.svgRenderer;
if(!e.init(this.host)){if(this.renderEngine=="SVG")throw"Your browser does not support SVG";return}}if(e==null&&this.renderEngine!="HTML5"){e=new d.jqx.vmlRenderer;if(!e.init(this.host)){if(this.renderEngine=="VML")throw"Your browser does not support VML";return}this._isVML=true}if(e==null&&(this.renderEngine=="HTML5"||this.renderEngine==undefined)){e=new d.jqx.HTML5Renderer;if(!e.init(this.host))throw"Your browser does not support HTML5 Canvas";}this._r=e;this._validateProperties();this._reset();
this._init();this._performLayout();this._render()},_getBorderSize:function(){var f=1,e;if(this._isVML)f=0;if(this.background){e=(parseInt(this.background.style["stroke-width"],10)||f)/2;if(this._isVML)return Math.round(e);return e}return f},_validateProperties:function(){this.background=this._backgroundConstructor(this.background,this);this.ticksOffset=this.ticksOffset||this._getDefaultTicksOffset();this.rangesOffset=this.rangesOffset||0;this.rangeSize=this._validatePercentage(this.rangeSize,5);this.ticksOffset[0]=
this._validatePercentage(this.ticksOffset[0],"5%");this.ticksOffset[1]=this._validatePercentage(this.ticksOffset[1],"5%");this.ticksMinor=this._tickConstructor(this.ticksMinor,this);this.ticksMajor=this._tickConstructor(this.ticksMajor,this);this.scaleStyle=this.scaleStyle||this.ticksMajor.style;this.labels=this._labelsConstructor(this.labels,this);this.pointer=this._pointerConstructor(this.pointer,this);for(var e=0;e<this.ranges.length;e+=1)this.ranges[e]=this._rangeConstructor(this.ranges[e],this)},
_getDefaultTicksOffset:function(){if(this.orientation==="horizontal")return["5%","36%"];return["36%","5%"]},_handleOrientation:function(){if(this.orientation==="vertical")d.extend(this,linearVerticalGauge);else d.extend(this,linearHorizontalGauge)},_reset:function(){this.host.empty()},_performLayout:function(){var e=parseInt(this.background.style["stroke-width"],10)||1;this._width-=e;this._height-=e;this.host.css("padding",e/2)},_init:function(){var f=this._getBorderSize(),e;this._width=this._getScale(this.width,
"width",this.host.parent())-3;this._height=this._getScale(this.height,"height",this.host.parent())-3;this.element.innerHTML="<div/>";this.host.width(this._width);this.host.height(this._height);this.host.children().width(this._width);this.host.children().height(this._height);this._r.init(this.host.children());e=this._r.getContainer();e.width(this._width);e.height(this._height)},_render:function(){this._renderBackground();this._renderTicks();this._renderLabels();this._renderRanges();this._renderPointer()},
_renderBackground:function(){if(!this.background.visible)return;var g=this.background.style,f=d.jqx._rup(this._getBorderSize()),e="rect",h;g=this._handleShapeOptions(g);if(this.background.backgroundType==="roundedRectangle"&&this._isVML)e="roundrect";if(!this._Vml){g.x=f;g.y=f}h=this._r.shape(e,g);if(this._isVML)this._fixVmlRoundrect(h,g)},_handleShapeOptions:function(g){var e=this.background.style.fill,f=this._getBorderSize();if(!e)e="#cccccc";if(this.background.showGradient){if(e.indexOf("url")<
0&&e.indexOf("#grd")<0)this._originalColor=e;else e=this._originalColor;e=this._r._toLinearGradient(e,this.orientation==="horizontal",[[1,1.1],[90,1.5]])}this.background.style.fill=e;if(this.background.backgroundType==="roundedRectangle")if(this._isVML)g.arcsize=this.background.borderRadius+"%";else{g.rx=this.background.borderRadius;g.ry=this.background.borderRadius}g.width=this._width-1;g.height=this._height-1;return g},_fixVmlRoundrect:function(g,f){var e=this._getBorderSize();g.style.position=
"absolute";g.style.left=e;g.style.top=e;g.style.width=this._width-1;g.style.height=this._height-1;g.strokeweight=0;delete f.width;delete f.height;delete f.arcsize;this._r.attr(g,f)},_renderTicks:function(){var k=Math.abs(this.max-this.min),h=this.ticksMinor,f=this.ticksMajor,i=k/f.interval,g=k/h.interval,e,j;e={size:this._getSize(f.size),style:f.style,visible:f.visible,interval:f.interval};j={size:this._getSize(h.size),style:h.style,visible:h.visible,interval:h.interval,checkOverlap:true};if(this.ticksPosition===
"near"||this.ticksPosition==="both"){this._ticksRenderHandler(e);this._ticksRenderHandler(j)}if(this.ticksPosition==="far"||this.ticksPosition==="both"){e.isFar=true;j.isFar=true;this._ticksRenderHandler(e);this._ticksRenderHandler(j)}this._renderConnectionLine()},_ticksRenderHandler:function(f){if(!f.visible)return;var i=this._getSize(this.ticksOffset[0],"width"),g=this._getSize(this.ticksOffset[1],"height"),e=this._getBorderSize(),h=this._calculateTickOffset()+this._getMaxTickSize();if(f.isFar)h+=
f.size;this._drawTicks(f,e,h+e)},_drawTicks:function(g,f,j){var e;for(var h=this.min;h<=this.max;h+=g.interval){e=this._valueToCoordinates(h);if(!g.checkOverlap||!this._overlapTick(h))this._renderTick(g.size,e,g.style,j)}},_calculateTickOffset:function(){var f=this._getSize(this.ticksOffset[0],"width"),e=this._getSize(this.ticksOffset[1],"height"),g=e;if(this.orientation==="vertical")g=f;return g},_overlapTick:function(e){e+=this.min;if(e%this.ticksMinor.interval===e%this.ticksMajor.interval)return true;
return false},_renderConnectionLine:function(){if(!this.ticksMajor.visible&&!this.ticksMinor.visible)return;var f=this._getScaleLength(),e=this._getBorderSize(),h=this._valueToCoordinates(this.max),j=this._valueToCoordinates(this.min),i=this._getMaxTickSize(),g=i+e;if(this.orientation==="vertical"){g+=this._getSize(this.ticksOffset[0],"width");this._r.line(g,h,g,j,this.scaleStyle)}else{g+=this._getSize(this.ticksOffset[1],"height");this._r.line(h,g,j,g,this.scaleStyle)}},_getScaleLength:function(){return this._getSize(this.scaleLength,
this.orientation==="vertical"?"height":"width")},_renderTick:function(e,i,f,h){var g=this._handleTickCoordinates(e,i,h);this._r.line(Math.round(g.x1),Math.round(g.y1),Math.round(g.x2),Math.round(g.y2),f)},_handleTickCoordinates:function(e,g,f){if(this.orientation==="vertical")return{x1:f-e,x2:f,y1:g,y2:g};return{x1:g,x2:g,y1:f-e,y2:f}},_getTickCoordinates:function(f,g){var e=this._handleTickCoordinates(f,0,this._calculateTickOffset());if(this.orientation==="vertical")e=e.x1;else e=e.y1;e+=f;return e},
_renderLabels:function(){if(!this.labels.visible)return;var g=this._getSize(this.ticksOffset[0],"width"),i=this._getMaxTickSize(),k=this.labels.position,j="height",f=this._getBorderSize(),h=this._calculateTickOffset()+i,e;if(this.orientation==="vertical"){g=this._getSize(this.ticksOffset[1],"height");j="width"}e=this._getMaxLabelSize()[j];if(k==="near"||k==="both")this._labelListRender(h-i-e+f,g+f,e,"near");if(k==="far"||k==="both")this._labelListRender(h+i+e+f,g+f,e,"far")},_labelListRender:function(k,
e,f,m){var h=this.labels.interval,n=Math.abs(this.max-this.min)/h,g=this._getScaleLength(),j=g/n,o=this.orientation==="vertical"?this.max:this.min;k+=this._getSize(this.labels.offset);for(var l=0;l<=n;l+=1){this._renderLabel(e,m,k,f,o);o+=this.orientation==="vertical"?-h:h;e+=j}},_renderLabel:function(f,m,j,g,n){var i={"class":this.toThemeProperty("jqx-gauge-label")},h=this.labels.interval,l,e,k;k=this.labels.formatValue(n,m);e=this._r.measureText(k,0,i);if(this.orientation==="vertical"){l=m==="near"?
g-e.width:0;this._r.text(k,Math.round(j)+l-g/2,Math.round(f-e.height/2),e.width,e.height,0,i)}else{l=m==="near"?g-e.height:0;this._r.text(k,Math.round(f-e.width/2),Math.round(j)+l-g/2,e.width,e.height,0,i)}},_renderRanges:function(){if(!this.showRanges)return;var h=this.orientation==="vertical"?"width":"height",j=this._getSize(this.rangesOffset,h),g=this._getSize(this.rangeSize,h),e;for(var f=0;f<this.ranges.length;f+=1){e=this.ranges[f];e.size=g;this._renderRange(e,j)}},_renderRange:function(q,k){var h=
this._getScaleLength(),j=this._getBorderSize(),i=this._getSize(this.ticksOffset[0],"width"),g=this._getSize(this.ticksOffset[1],"height"),n=this._getMaxTickSize(),p=this._getSize(q.size),m=this._valueToCoordinates(q.endValue);var f=q.startValue;if(f<this.min)f=this.min;var o=Math.abs(this._valueToCoordinates(f)-m),l,e;if(this.orientation==="vertical")l=this._r.rect(i+n+k-p+j,m,q.size,o,q.style);else{e=o;l=this._r.rect(this._valueToCoordinates(q.startValue),g+n+j,e,q.size,q.style)}this._r.attr(l,q.style)},
_renderPointer:function(){if(!this.pointer.visible)return;if(this.pointer.pointerType==="default")this._renderColumnPointer();else this._renderArrowPointer()},_renderColumnPointer:function(){this._pointer=this._r.rect(0,0,0,0,this.pointer.style);this._r.attr(this._pointer,this.pointer.style);this._setValue(this.value)},_renderArrowPointer:function(){var e=this._getArrowPathByValue(0);this._pointer=this._r.path(e,this.pointer.style)},_getArrowPathByValue:function(n){var h=this._getBorderSize(),l=Math.ceil(this._valueToCoordinates(n))+
h,f=h,g=Math.ceil(this._getSize(this.ticksOffset[0],"width")),e=Math.ceil(this._getSize(this.ticksOffset[1],"height")),i=Math.ceil(this._getSize(this.pointer.offset)),m=Math.ceil(this._getMaxTickSize()),q=Math.ceil(this._getSize(this.pointer.size)),j=Math.ceil(Math.sqrt(q*q/3)),p,k,o;if(this.orientation==="vertical"){f+=g+m+i;k=i>=0?f+q:f-q;p="M "+f+" "+l+" L "+k+" "+(l-j)+" L "+k+" "+(l+j)}else{f+=g+m*2+j+i;o=l;l=f;f=o;k=i>=0?l-q:l+q;p="M "+f+" "+l+" L "+(f-j)+" "+k+" L "+(f+j)+" "+k}return p},_setValue:function(e){if(this.pointer.pointerType===
"default")this._performColumnPointerLayout(e);else this._performArrowPointerLayout(e);this.value=e},_performColumnPointerLayout:function(h){var e=this._valueToCoordinates(this.min),m=this._valueToCoordinates(h),p=Math.abs(e-m),k=this._getBorderSize(),j=this._getSize(this.ticksOffset[0],"width"),g=this._getSize(this.ticksOffset[1],"height"),n=this._getMaxTickSize(),f=this._getSize(this.pointer.size),l=this._getSize(this.pointer.offset),o={},i;if(this.orientation==="vertical"){i=j+n;o={left:i+l+1+k,
top:m,height:p,width:f}}else{i=g+n;o={left:e,top:i+l-f-1+k,height:f,width:p}}this._setRectAttrs(o)},_performArrowPointerLayout:function(f){var e=this._getArrowPathByValue(f);if(this._isVML){this._r.attr(this._pointer.childNodes[0],{v:e});this._pointer.v=e}else this._r.attr(this._pointer,{d:e})},_setRectAttrs:function(e){if(!this._isVML){this._r.attr(this._pointer,{x:e.left});this._r.attr(this._pointer,{y:e.top});this._r.attr(this._pointer,{width:e.width});this._r.attr(this._pointer,{height:e.height})}else{this._pointer.style.top=
e.top;this._pointer.style.left=e.left;this._pointer.style.width=e.width;this._pointer.style.height=e.height}},_valueToCoordinates:function(h){var e=this._getBorderSize(),j=this._getScaleLength(),g=this._getSize(this.ticksOffset[0],"width"),f=this._getSize(this.ticksOffset[1],"height"),i=Math.abs(this.min-h),k=Math.abs(this.max-this.min);if(this.orientation==="vertical")return this._height-i/k*j-(this._height-f-j)+e;return i/k*j+(this._width-g-j)+e},_getSize:function(e,f){f=f||(this.orientation===
"vertical"?"width":"height");if(e.toString().indexOf("%")>=0)e=parseInt(e,10)/100*this["_"+f];e=parseInt(e,10);return e},propertyChangedHandler:function(f,g,i,h){if(g=="min")this.min=parseInt(h);if(g=="max")this.max=parseInt(h);if(g=="value")this.value=parseInt(h);if(g==="disabled")if(h)this.disable();else this.enable();else if(g==="value"){this.value=i;this.setValue(h)}else{if(g==="colorScheme")this.pointer.style=null;else if(g==="orientation"&&i!==h){var e=this.ticksOffset[0];this.ticksOffset[0]=
this.ticksOffset[1];this.ticksOffset[1]=e}if(g!=="animationDuration"&&g!=="easing")this.refresh()}if(this._r instanceof d.jqx.HTML5Renderer)this._r.refresh()},_backgroundConstructor:function(g,e){if(this.host)return new this._backgroundConstructor(g,e);var f={rectangle:true,roundedRectangle:true};g=g||{};this.style=g.style||{stroke:"#cccccc",fill:null};if(g.visible||typeof g.visible==="undefined")this.visible=true;else this.visible=false;if(f[g.backgroundType])this.backgroundType=g.backgroundType;
else this.backgroundType="roundedRectangle";if(this.backgroundType==="roundedRectangle")if(typeof g.borderRadius==="number")this.borderRadius=g.borderRadius;else this.borderRadius=15;if(typeof g.showGradient==="undefined")this.showGradient=true;else this.showGradient=g.showGradient},_tickConstructor:function(f,e){if(this.host)return new this._tickConstructor(f,e);this.size=e._validatePercentage(f.size,"10%");this.interval=parseFloat(f.interval);if(!this.interval)this.interval=5;this.style=f.style||
{stroke:"#A1A1A1","stroke-width":"1px"};if(typeof f.visible==="undefined")this.visible=true;else this.visible=f.visible},_labelsConstructor:function(f,e){if(this.host)return new this._labelsConstructor(f,e);this.position=f.position;if(this.position!=="far"&&this.position!=="near"&&this.position!=="both")this.position="both";if(typeof f.formatValue==="function")this.formatValue=f.formatValue;else this.formatValue=function(g){return g};this.visible=f.visible;if(this.visible!==false&&this.visible!==
true)this.visible=true;if(typeof f.interval!=="number")this.interval=10;else this.interval=f.interval;this.offset=e._validatePercentage(f.offset,0)},_rangeConstructor:function(f,e){if(this.host)return new this._rangeConstructor(f,e);if(typeof f.startValue==="number")this.startValue=f.startValue;else this.startValue=e.min;if(typeof f.endValue==="number"&&f.endValue>f.startValue)this.endValue=f.endValue;else this.endValue=this.startValue+1;this.style=f.style||{fill:"#dddddd",stroke:"#dddddd"}},_pointerConstructor:function(g,
e){if(this.host)return new this._pointerConstructor(g,e);var f=e._getColorScheme(e.colorScheme)[0];this.pointerType=g.pointerType;if(this.pointerType!=="default"&&this.pointerType!=="arrow")this.pointerType="default";this.style=g.style||{fill:f,stroke:f,"stroke-width":1};this.size=e._validatePercentage(g.size,"7%");this.visible=g.visible;if(this.visible!==true&&this.visible!==false)this.visible=true;this.offset=e._validatePercentage(g.offset,0)}};d.extend(b,c);d.extend(a,c);d.jqx.jqxWidget("jqxLinearGauge",
"",{});d.jqx.jqxWidget("jqxGauge","",{});d.extend(d.jqx._jqxGauge.prototype,b);d.extend(d.jqx._jqxLinearGauge.prototype,a)})(jQuery);
(function(a){a.jqx.jqxWidget("jqxCheckBox","",{});a.extend(a.jqx._jqxCheckBox.prototype,{defineInstance:function(){this.animationShowDelay=300,this.animationHideDelay=300,this.width=null;this.height=null;this.boxSize="13px";this.checked=false;this.hasThreeStates=false;this.disabled=false;this.enableContainerClick=true;this.locked=false;this.groupName="";this.keyboardCheck=true;this.enableHover=true;this.events=["checked","unchecked","indeterminate","change"]},createInstance:function(b){var d=this;
this.setSize();this.propertyChangeMap.width=function(e,g,f,h){d.setSize()};this.propertyChangeMap.height=function(e,g,f,h){d.setSize()};this.checkbox=a("<div><div><span></span></div></div>");this.host.attr("tabIndex",0);this.host.prepend(this.checkbox);this.host.append(a('<div style="clear: both;"></div>'));this.checkMark=a(this.checkbox).find("span");this.box=a(this.checkbox).find("div");this.box.addClass(this.toThemeProperty("jqx-checkbox-default"));this.box.addClass(this.toThemeProperty("jqx-fill-state-normal"));
this.box.addClass(this.toThemeProperty("jqx-rc-all"));if(this.disabled)this.disable();this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-checkbox"));if(this.locked)this.host.css("cursor","auto");var c=this.element.getAttribute("checked");if(c=="checked"||c=="true"||c==true)this.checked=true;this._addInput();this._render();this._addHandlers()},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;this.input=a("<input type='hidden'/>");
this.host.append(this.input);this.input.attr("name",b);this.input.val(this.checked)},refresh:function(b){if(!b){this.setSize();this._render()}},setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height)},
_addHandlers:function(){var d=this;var c=a.jqx.mobile.isTouchDevice();var b="click";if(c)b="touchend";this.addHandler(this.box,b,function(e){if(!d.disabled&&!d.enableContainerClick&&!d.locked){d.toggle();if(d.updated){e.owner=d;d.updated(e,d.checked,d.oldChecked)}e.preventDefault();return false}});this.addHandler(this.host,"keydown",function(e){if(!d.disabled&&!d.locked&&d.keyboardCheck)if(e.keyCode==32){d.toggle();e.preventDefault();return false}});this.addHandler(this.host,b,function(e){if(!d.disabled&&
d.enableContainerClick&&!d.locked){d.toggle();e.preventDefault();return false}});this.addHandler(this.host,"selectstart",function(e){if(!d.disabled&&d.enableContainerClick){e.preventDefault();return false}});this.addHandler(this.host,"mouseup",function(e){if(!d.disabled&&d.enableContainerClick)e.preventDefault()});this.addHandler(this.host,"focus",function(e){if(!d.disabled&&!d.locked){if(d.enableHover)d.box.addClass(d.toThemeProperty("jqx-checkbox-hover"));d.box.addClass(d.toThemeProperty("jqx-fill-state-focus"));
e.preventDefault();d.hovered=true;return false}});this.addHandler(this.host,"blur",function(e){if(!d.disabled&&!d.locked){if(d.enableHover)d.box.removeClass(d.toThemeProperty("jqx-checkbox-hover"));d.box.removeClass(d.toThemeProperty("jqx-fill-state-focus"));e.preventDefault();d.hovered=false;return false}});this.addHandler(this.host,"mouseenter",function(e){if(d.locked)d.host.css("cursor","arrow");if(d.enableHover)if(!d.disabled&&d.enableContainerClick&&!d.locked){d.box.addClass(d.toThemeProperty("jqx-checkbox-hover"));
d.box.addClass(d.toThemeProperty("jqx-fill-state-hover"));e.preventDefault();d.hovered=true;return false}});this.addHandler(this.host,"mouseleave",function(e){if(d.enableHover)if(!d.disabled&&d.enableContainerClick&&!d.locked){d.box.removeClass(d.toThemeProperty("jqx-checkbox-hover"));d.box.removeClass(d.toThemeProperty("jqx-fill-state-hover"));e.preventDefault();d.hovered=false;return false}});this.addHandler(this.box,"mouseenter",function(){if(d.locked)return;if(!d.disabled&&!d.enableContainerClick){d.box.addClass(d.toThemeProperty("jqx-checkbox-hover"));
d.box.addClass(d.toThemeProperty("jqx-fill-state-hover"))}});this.addHandler(this.box,"mouseleave",function(){if(!d.disabled&&!d.enableContainerClick){d.box.removeClass(d.toThemeProperty("jqx-checkbox-hover"));d.box.removeClass(d.toThemeProperty("jqx-fill-state-hover"))}})},_removeHandlers:function(){var c=a.jqx.mobile.isTouchDevice();var b="click";if(c)b="touchend";this.removeHandler(this.box,b);this.removeHandler(this.box,"mouseenter");this.removeHandler(this.box,"mouseleave");this.removeHandler(this.host,
b);this.removeHandler(this.host,"mouseup");this.removeHandler(this.host,"selectstart");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"blur");this.removeHandler(this.host,"focus")},_render:function(){if(this.boxSize==null)this.boxSize=13;this.box.width(this.boxSize);this.box.height(this.boxSize);this.checkMark.width(this.boxSize);this.checkMark.height(this.boxSize);if(!this.disabled)if(this.enableContainerClick)this.host.css("cursor",
"pointer");else this.host.css("cursor","auto");else this.disable();this.updateStates()},_setState:function(b){if(this.checked!=b){this.checked=b;this.checkMark.removeClass();if(this.checked){this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked"));this.checkMark.css("opacity",1)}else if(this.checked==null){this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate"));this.checkMark.css("opacity",1)}}},check:function(){this.checked=true;var b=this;this.checkMark.removeClass();
if(a.browser.msie)this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked"));else{this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked"));this.checkMark.css("opacity",0);this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){})}var c=a.find(this.toThemeProperty(".jqx-checkbox",true));if(this.groupName!=null&&this.groupName.length>0)a.each(c,function(){var d=a(this).jqxCheckBox("groupName");if(d==b.groupName&&this!=b.element)a(this).jqxCheckBox("uncheck")});
this._raiseEvent("0",true);this._raiseEvent("3",{checked:true});this.input.val(this.checked)},uncheck:function(){this.checked=false;var b=this;if(a.browser.msie)b.checkMark.removeClass();else{this.checkMark.css("opacity",1);this.checkMark.stop().animate({opacity:0},this.animationHideDelay,function(){b.checkMark.removeClass()})}this._raiseEvent("1");this._raiseEvent("3",{checked:false});this.input.val(this.checked)},indeterminate:function(){this.checked=null;this.checkMark.removeClass();if(a.browser.msie)this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate"));
else{this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate"));this.checkMark.css("opacity",0);this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){})}this._raiseEvent("2");this._raiseEvent("3",{checked:null});this.input.val(this.checked)},toggle:function(){if(this.disabled)return;if(this.locked)return;if(this.groupName!=null&&this.groupName.length>0){if(this.checked!=true){this.checked=true;this.updateStates()}return}this.oldChecked=this.checked;if(this.checked==
true)this.checked=this.hasThreeStates?null:false;else this.checked=this.checked!=null;this.updateStates();this.input.val(this.checked)},updateStates:function(){if(this.checked)this.check();else if(this.checked==false)this.uncheck();else if(this.checked==null)this.indeterminate()},disable:function(){this.disabled=true;if(this.checked==true)this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-disabled"));else if(this.checked==null)this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled"));
this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled-box"));this.host.addClass(this.toThemeProperty("jqx-checkbox-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled"))},enable:function(){if(this.checked==true)this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-disabled"));else if(this.checked==null)this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled"));
this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled-box"));this.host.removeClass(this.toThemeProperty("jqx-checkbox-disabled"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled"));this.disabled=false},destroy:function(){this._removeHandlers();this.host.removeClass();this.host.remove()},_raiseEvent:function(g,e){var c=this.events[g];var f=new jQuery.Event(c);f.owner=this;f.args=e;try{var b=this.host.trigger(f)}catch(d){}return b},
propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c==b.enableContainerClick&&!b.disabled&&!b.locked)if(d)b.host.css("cursor","pointer");else b.host.css("cursor","auto");if(c=="theme")a.jqx.utilities.setTheme(e,d,b.host);if(c=="checked")if(d!=e)switch(d){case true:b.check();break;case false:b.uncheck();break;case null:b.indeterminate();break}if(c=="disabled")if(d!=e)if(d)b.disable();else b.enable()}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxButtonGroup","",{});a.extend(a.jqx._jqxButtonGroup.prototype,{defineInstance:function(){this.mode="default";this.roundedCorners=true;this.disabled=false;this.enableHover=false;this.orientation="horizontal";this._eventsMap={mousedown:"touchstart",mouseup:"touchend"};this._events=["selected","unselected","buttonclick"];this._buttonId={};this._selected=null;this._pressed=null;this._baseId="group_button"},createInstance:function(b){this._isTouchDevice=a.jqx.mobile.isTouchDevice();
var c=this;this.addHandler(this.host,"selectstart",function(d){if(!c.disabled)d.preventDefault()})},refresh:function(){this._refreshButtons()},_getEvent:function(b){if(this._isTouchDevice){var c=this._eventsMap[b]||b;c+="."+this.element.id;return c}b+="."+this.element.id;return b},_refreshButtons:function(){if(this.lastElement)this.lastElement.remove();this.lastElement=a("<div style='clear: both;'></div>");var c=this.host.children(),d=c.length,e;for(var b=0;b<d;b+=1){e=a(c[b]);this._refreshButton(e,
b,d)}this.lastElement.appendTo(this.host)},_refreshButton:function(c,b,d){(function(e){e=this._render(e);this._removeStyles(e);this._addStyles(e,b,d);this._performLayout(e);this._removeButtonListeners(e);this._addButtonListeners(e);this._handleButtonId(e,b)}).apply(this,[c])},destroy:function(){this._removeStyles();this._removeEventListeners()},_render:function(b){if(b[0].tagName.toLowerCase()==="button")return this._renderFromButton(b);else return this._renderButton(b)},_renderButton:function(b){var c;
b.wrapInner("<div/>");return b},_removeStyles:function(b){this.host.removeClass("jqx-widget");this.host.removeClass("jqx-rc-all");b.removeClass(this.toThemeProperty("jqx-fill-state-normal"));b.removeClass(this.toThemeProperty("jqx-group-button-normal"));b.removeClass(this.toThemeProperty("jqx-rc-tl"));b.removeClass(this.toThemeProperty("jqx-rc-bl"));b.removeClass(this.toThemeProperty("jqx-rc-tr"));b.removeClass(this.toThemeProperty("jqx-rc-br"));b.css("margin-left",0)},_addStyles:function(c,b,d){this.host.addClass("jqx-widget");
this.host.addClass("jqx-rc-all");this.host.addClass("jqx-buttongroup");c.addClass(this.toThemeProperty("jqx-button"));c.addClass(this.toThemeProperty("jqx-group-button-normal"));c.addClass(this.toThemeProperty("jqx-fill-state-normal"));if(this.roundedCorners)if(b===0)this._addRoundedCorners(c,true);else if(b===d-1)this._addRoundedCorners(c,false);if(this.orientation=="horizontal")c.css("margin-left",-parseInt(c.css("border-left-width"),10));else c.css("margin-top",-parseInt(c.css("border-left-width"),
10))},_addRoundedCorners:function(b,c){if(this.orientation=="horizontal")if(c){b.addClass(this.toThemeProperty("jqx-rc-tl"));b.addClass(this.toThemeProperty("jqx-rc-bl"))}else{b.addClass(this.toThemeProperty("jqx-rc-tr"));b.addClass(this.toThemeProperty("jqx-rc-br"))}else if(c){b.addClass(this.toThemeProperty("jqx-rc-tl"));b.addClass(this.toThemeProperty("jqx-rc-tr"))}else{b.addClass(this.toThemeProperty("jqx-rc-bl"));b.addClass(this.toThemeProperty("jqx-rc-br"))}},_centerContent:function(c,b){c.css({"margin-top":(b.height()-
c.height())/2,"margin-left":(b.width()-c.width())/2});return c},_renderFromButton:function(b){var c=b.val();if(c=="")c=b.html();var e;var d=b[0].id;b.wrap("<div/>");e=b.parent();e.attr("style",b.attr("style"));b.remove();e.html(c);e[0].id=d;return e},_performLayout:function(b){if(this.orientation=="horizontal")b.css("float","left");else b.css("float","none");this._centerContent(a(b.children()),b)},_mouseEnterHandler:function(d){var b=d.data.self,c=a(d.currentTarget);if(b._isDisabled(c)||!b.enableHover)return;
c.addClass(b.toThemeProperty("jqx-group-button-hover"));c.addClass(b.toThemeProperty("jqx-fill-state-hover"))},_mouseLeaveHandler:function(d){var b=d.data.self,c=a(d.currentTarget);if(b._isDisabled(c)||!b.enableHover)return;c.removeClass(b.toThemeProperty("jqx-group-button-hover"));c.removeClass(b.toThemeProperty("jqx-fill-state-hover"))},_mouseDownHandler:function(d){var b=d.data.self,c=a(d.currentTarget);if(b._isDisabled(c))return;b._pressed=c;c.addClass(b.toThemeProperty("jqx-group-button-pressed"));
c.addClass(b.toThemeProperty("jqx-fill-state-pressed"))},_mouseUpHandler:function(d){var b=d.data.self,c=a(d.currentTarget);if(b._isDisabled(c))return;b._handleSelection(c);b._pressed=null;c=b._buttonId[c[0].id];b._raiseEvent(2,{index:c.num,button:c.btn})},_isDisabled:function(b){if(!b||!b[0])return false;return this._buttonId[b[0].id].disabled},_documentUpHandler:function(d){var b=d.data.self,c=b._pressed;if(c&&!b._buttonId[c[0].id].selected){c.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));
b._pressed=null}},_addButtonListeners:function(c){var b=this;this.addHandler(c,this._getEvent("mouseenter"),this._mouseEnterHandler,{self:this});this.addHandler(c,this._getEvent("mouseleave"),this._mouseLeaveHandler,{self:this});this.addHandler(c,this._getEvent("mousedown"),this._mouseDownHandler,{self:this});this.addHandler(c,this._getEvent("mouseup"),this._mouseUpHandler,{self:this});this.addHandler(a(document),this._getEvent("mouseup"),this._documentUpHandler,{self:this})},_removeButtonListeners:function(b){this.removeHandler(b,
this._getEvent("mouseenter"),this._mouseEnterHandler);this.removeHandler(b,this._getEvent("mouseleave"),this._mouseLeaveHandler);this.removeHandler(b,this._getEvent("mousedown"),this._mouseDownHandler);this.removeHandler(b,this._getEvent("mouseup"),this._mouseUpHandler);this.removeHandler(a(document),this._getEvent("mouseup"),this._documentUpHandler)},_handleSelection:function(b){if(this.mode==="radio")this._handleRadio(b);else if(this.mode==="checkbox")this._handleCheckbox(b);else this._handleDefault(b)},
_handleRadio:function(b){var c=this._getSelectedButton();if(c&&c.btn[0].id!==b[0].id)this._unselectButton(c.btn,true);for(var d in this._buttonId){this._buttonId[d].selected=true;this._unselectButton(this._buttonId[d].btn,false)}this._selectButton(b,true)},_handleCheckbox:function(c){var b=this._buttonId[c[0].id];if(b.selected)this._unselectButton(b.btn,true);else this._selectButton(c,true)},_handleDefault:function(b){this._selectButton(b,false);for(var c in this._buttonId){this._buttonId[c].selected=
true;this._unselectButton(this._buttonId[c].btn,false)}},_getSelectedButton:function(){for(var b in this._buttonId)if(this._buttonId[b].selected)return this._buttonId[b];return null},_getSelectedButtons:function(){var b=[];for(var c in this._buttonId)if(this._buttonId[c].selected)b.push(this._buttonId[c].num);return b},_getButtonByIndex:function(b){var d;for(var c in this._buttonId)if(this._buttonId[c].num===b)return this._buttonId[c];return null},_selectButton:function(c,d){var b=this._buttonId[c[0].id];
if(b.selected)return;b.btn.addClass(this.toThemeProperty("jqx-group-button-pressed"));b.btn.addClass(this.toThemeProperty("jqx-fill-state-pressed"));b.selected=true;if(d)this._raiseEvent(0,{index:b.num,button:b.btn})},_unselectButton:function(c,d){var b=this._buttonId[c[0].id];if(!b.selected)return;b.btn.removeClass(this.toThemeProperty("jqx-group-button-pressed"));b.btn.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));b.selected=false;if(d)this._raiseEvent(1,{index:b.num,button:b.btn})},
setSelection:function(b){if(this.mode==="checkbox")if(typeof b==="number")this._setSelection(b);else for(var c=0;c<b.length;c+=1)this._setSelection(b[c]);else if(typeof b==="number"&&this.mode==="radio")this._setSelection(b)},_setSelection:function(b){var c=this._getButtonByIndex(b);this._handleSelection(c.btn)},getSelection:function(){if(this.mode==="radio")return this._getSelectedButton().num;else if(this.mode==="checkbox")return this._getSelectedButtons();return undefined},disable:function(){var c;
for(var b in this._buttonId){c=this._buttonId[b];this.disableAt(c.num)}},enable:function(){var c;for(var b in this._buttonId){c=this._buttonId[b];this.enableAt(c.num)}},disableAt:function(b){var c=this._getButtonByIndex(b);if(!c.disabled){c.disabled=true;c.btn.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}},enableAt:function(b){var c=this._getButtonByIndex(b);if(c.disabled){c.disabled=false;c.btn.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))}},_handleButtonId:function(b,
d){var f=b[0].id,e={btn:b,num:d,selected:false},c;if(!f)f=this._baseId+(new Date).getTime();b[0].id=f;this._buttonId[f]=e;return f},_raiseEvent:function(d,c){var b=a.Event(this._events[d]);b.args=c;return this.host.trigger(b)},_unselectAll:function(){for(var b in this._buttonId)this._unselectButton(this._buttonId[b].btn,false)},propertyChangedHandler:function(b,c,e,d){if(c==="mode"){if(d!="checkbox")this._unselectAll();return}else if(c==="disabled")if(d)this.disable();else this.enable();else this.refresh()}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxListBox","",{});a.extend(a.jqx._jqxListBox.prototype,{defineInstance:function(){this.disabled=false;this.width=null;this.height=null;this.items=new Array;this.multiple=false;this.selectedIndex=-1;this.selectedIndexes=new Array;this.source=null;this.scrollBarSize=15;this.enableHover=true;this.enableSelection=true;this.visualItems=new Array;this.groups=new Array;this.equalItemsWidth=true;this.itemHeight=-1;this.visibleItems=new Array;this.emptyGroupText="Group";this.checkboxes=
false;this.hasThreeStates=false;this.autoHeight=false;this.roundedcorners=true;this.touchMode="auto";this.displayMember="";this.valueMember="";this.searchMode="startswithignorecase";this.incrementalSearch=true;this.incrementalSearchDelay=700;this.allowDrag=false;this.allowDrop=true;this.dropAction="default";this.touchModeStyle="auto";this.keyboardNavigation=true;this.enableMouseWheel=true;this.multipleextended=false;this.events=["select","unselect","change","checkChange","dragStart","dragEnd","rendered"]},
createInstance:function(b){this.render()},render:function(){this.element.innerHTML="";var b=this;this.host.addClass(this.toThemeProperty("jqx-listbox"));this.host.addClass(this.toThemeProperty("jqx-reset"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));var f=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){this.host.width(this.width);f=true}if(this.height!=
null&&this.height.toString().indexOf("%")!=-1){this.host.height(this.height);if(this.host.height()==0)this.host.height(200);f=true}if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);var c=a("<div tabIndex=0 style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div tabIndex=1 style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='listBoxContent' tabIndex=2 style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar"+
this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>");this._addInput();this.host.attr("tabIndex",1);this.host.append(c);var e=this.host.find("#verticalScrollBar"+this.element.id);if(!e.jqxScrollBar){alert("jqxscrollbar.js is not loaded.");
return}this.vScrollBar=e.jqxScrollBar({vertical:true,theme:this.theme,touchMode:this.touchMode,largestep:parseInt(this.host.height())/2});var d=this.host.find("#horizontalScrollBar"+this.element.id);this.hScrollBar=d.jqxScrollBar({vertical:false,touchMode:this.touchMode,theme:this.theme});this.content=this.host.find("#listBoxContent");this.content[0].id="listBoxContent"+this.element.id;this.bottomRight=this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-listbox-bottomright"));this.bottomRight[0].id=
"bottomRight"+this.element.id;this.vScrollBar.css("visibility","inherit");this.hScrollBar.css("visibility","inherit");this.vScrollInstance=a.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=a.data(this.hScrollBar[0],"jqxScrollBar").instance;if(this.isTouchDevice()){var g=a("<div class='overlay' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>");
this.content.parent().append(g);this.overlayContent=this.host.find(".overlay")}this._updateTouchScrolling();this.host.addClass("jqx-disableselect");if(f)a(window).resize(function(){b._updateSize()});if(this.host.jqxDragDrop)jqxListBoxDragDrop()},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;else this.host.attr("name","");this.input=a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b)},_updateTouchScrolling:function(){var b=this;if(this.isTouchDevice()){b.enableHover=
false;var c=this.overlayContent?this.overlayContent:this.content;a(c).unbind("touchstart.touchScroll");a(c).unbind("touchmove.touchScroll");a(c).unbind("touchend.touchScroll");a(c).unbind("touchcancel.touchScroll");a.jqx.mobile.touchScroll(c,b.vScrollInstance.max,function(f,e){if(b.vScrollBar.css("visibility")!="hidden"){var d=b.vScrollInstance.value;b.vScrollInstance.setPosition(d+e);b._lastScroll=new Date}if(b.hScrollBar.css("visibility")!="hidden"){var d=b.hScrollInstance.value;b.hScrollInstance.setPosition(d+
f);b._lastScroll=new Date}},this.element.id);if(b.vScrollBar.css("visibility")!="visible"&&b.hScrollBar.css("visibility")!="visible")a.jqx.mobile.setTouchScroll(false,this.element.id);else a.jqx.mobile.setTouchScroll(true,this.element.id)}},isTouchDevice:function(){var b=a.jqx.mobile.isTouchDevice();if(this.touchMode==true){b=true;a.jqx.mobile.setMobileSimulator(this.element)}else if(this.touchMode==false)b=false;if(b&&this.touchModeStyle!=false)this.scrollBarSize=10;if(b)this.host.addClass(this.toThemeProperty("jqx-touch"));
return b},beginUpdate:function(){this.updatingListBox=true},endUpdate:function(){this.updatingListBox=false;this._addItems();this._renderItems()},beginUpdateLayout:function(){this.updating=true},resumeUpdateLayout:function(){this.updating=false;this.vScrollInstance.value=0;this._render(false)},_updateSize:function(){var c=this;var d=c.host.width();var b=c.host.height();if(!c._oldWidth)c._oldWidth=d;if(!c._oldHeight)c._oldHeight=b;setTimeout(function(){if(d!=c._oldWidth){c._updatescrollbars();c._renderItems()}if(b!=
c._oldHeight)if(c.items)if(c.items.length>0&&c.virtualItemsCount*c.items[0].height<b)c._render(false);else{c._updatescrollbars();c._renderItems()}c._oldWidth=d;c._oldHeight=b},1)},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c=="source"||c=="checkboxes"){b.clearSelection();b.refresh()}if(c=="scrollBarSize"||c=="equalItemsWidth")if(d!=e)b._updatescrollbars();if(c=="disabled")b._renderItems();if(c=="touchMode"){b._removeHandlers();b.vScrollBar.jqxScrollBar({touchMode:d});
b.hScrollBar.jqxScrollBar({touchMode:d});b._updateTouchScrolling();b._addHandlers();b._render(false)}if(!this.updating)if(c=="width"||c=="height")setTimeout(function(){b.vScrollInstance.value=0;if(c=="width"){if(e!=d){b.host.width(d);b._updatescrollbars();b._renderItems()}}else if(e!=d){b.host.height(d);if(b.items)if(b.items.length>0&&b.virtualItemsCount*b.items[0].height<d)b._render(false);else{b._updatescrollbars();b._renderItems()}}},1);if(c=="theme")if(e!=d){b.hScrollBar.jqxScrollBar({theme:b.theme});
b.vScrollBar.jqxScrollBar({theme:b.theme});b.host.removeClass();b.host.addClass(b.toThemeProperty("jqx-listbox"));b.host.addClass(b.toThemeProperty("jqx-widget"));b.host.addClass(b.toThemeProperty("jqx-widget-content"));b.host.addClass(b.toThemeProperty("jqx-reset"));b.host.addClass(b.toThemeProperty("jqx-rc-all"));b.refresh()}if(c=="selectedIndex"){b.clearSelection();b.selectIndex(d,true)}if(c=="displayMember"||c=="valueMember"){if(e!=d){var f=b.selectedIndex;b.refresh();b.selectedIndex=f;b.selectedIndexes[f]=
f}b._renderItems()}if(c=="autoHeight")b._render()},loadFromSelect:function(i){if(i==null)return;var c="#"+i;var f=a(c);if(f.length>0){var e=f.find("option");var b=f.find("optgroup");var d=0;var h=-1;var g=new Array;a.each(e,function(){var l=b.find(this).length>0;var n=null;if(this.text!=this.value&&(this.label==null||this.label==""))this.label=this.text;var m={disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this};var k=a.browser.msie&&a.browser.version<8;if(k)if(m.value==
""&&this.text!=null&&this.text.length>0)m.value=this.text;if(l){n=b.find(this).parent()[0].label;m.group=n}if(this.selected)h=d;g[d]=m;d++});this.source=g;this.fromSelect=true;this.clearSelection();this.selectedIndex=h;this.selectedIndexes[this.selectedIndex]=this.selectedIndex;this.refresh()}},refresh:function(c){var b=this;if(this.vScrollBar==undefined)return;this.visibleItems=new Array;var d=function(e){if(e==true)if(b.selectedIndex!=-1){var f=b.selectedIndex;b.selectedIndex=-1;b._stopEvents=true;
b.selectIndex(f,false,true);if(b.selectedIndex==-1)b.selectedIndex=f;b._stopEvents=false}};if(a.jqx.dataAdapter&&this.source!=null&&this.source._source){this.databind(this.source);d(c);return}this.items=this.loadItems(this.source);this._render(false,c==true);d(c)},_render:function(c,b){this._addItems();this._renderItems();this.vScrollInstance.setPosition(0);this._cachedItemHtml=new Array;if(c==undefined||c)if(this.items!=undefined&&this.items!=null)if(this.selectedIndex>=0&&this.selectedIndex<this.items.length)this.selectIndex(this.selectedIndex,
true,true,true);if(this.allowDrag&&this._enableDragDrop){this._enableDragDrop();if(this.isTouchDevice()){this._removeHandlers();if(this.overlayContent){this.overlayContent.remove();this.overlayContent=null}this._updateTouchScrolling();this._addHandlers();return}}this._updateTouchScrolling();this._raiseEvent("6");if(this.rendered)this.rendered()},_createID:function(){var b=Math.random()+"";b=b.replace(".","");b="99"+b;b=b/1;while(this.items[b]){b=Math.random()+"";b=b.replace(".","");b=b/1}return"listitem"+
b},_hitTest:function(c,f){var e=parseInt(this.vScrollInstance.value);var b=this._searchFirstVisibleIndex(f+e,this.renderedVisibleItems);if(this.renderedVisibleItems[b]!=undefined&&this.renderedVisibleItems[b].isGroup)return null;if(this.renderedVisibleItems.length>0){var d=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(d.height+d.top<f+e)return null}b=this._searchFirstVisibleIndex(f+e);return this.visibleItems[b];return null},_searchFirstVisibleIndex:function(e,f){if(e==undefined)e=
parseInt(this.vScrollInstance.value);var c=0;if(f==undefined||f==null)f=this.visibleItems;var b=f.length;while(c<=b){mid=parseInt((c+b)/2);var d=f[mid];if(d==undefined)break;if(d.initialTop>e&&d.initialTop+d.height>e)b=mid-1;else if(d.initialTop<e&&d.initialTop+d.height<=e)c=mid+1;else{return mid;break}}return 0},_renderItems:function(){if(this.items==undefined||this.items.length==0){this.visibleItems=new Array;return}if(this.updatingListBox==true)return;var F=this.vScrollInstance;var h=this.hScrollInstance;
var g=parseInt(F.value);var f=parseInt(h.value);var A=this.items.length;var L=this.host.width();var J=parseInt(this.content[0].style.width);var b=J+parseInt(h.max);var p=parseInt(this.vScrollBar[0].style.width)+2;if(this.vScrollBar[0].style.visibility!="visible")p=0;if(this.hScrollBar[0].style.visibility!="visible")b=J;var k=this._getVirtualItemsCount();var K=new Array;var E=0;var D=parseInt(this.element.style.height)+2;if(this.element.style.height.indexOf("%")!=-1)D=this.host.outerHeight();if(isNaN(D))D=
0;var s=0;var r=0;var O=0;if(F.value==0||this.visibleItems.length==0)for(var q=0;q<this.items.length;q++){var w=this.items[q];if(w.visible){w.top=-g;w.initialTop=-g;if(!w.isGroup&&w.visible){this.visibleItems[r++]=w;w.visibleIndex=r-1}this.renderedVisibleItems[O++]=w;w.left=-f;var c=w.top+w.height;if(c>=0&&w.top-w.height<=D)K[E++]={index:q,item:w};g-=w.height}}var l=g>0?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0;var M=0;E=0;var x=this.vScrollInstance.value;
var I=0;while(M<100+D){var w=this.renderedVisibleItems[l];if(w==undefined)break;if(w.visible){w.left=-f;var c=w.top+w.height-x;if(c>=0&&w.initialTop-x-w.height<=2*D)K[E++]={index:l,item:w}}l++;if(w.visible)M+=w.initialTop-x+w.height-M;I++;if(I>this.items.length-1)break}var n=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item");var i=this.toThemeProperty("jqx-listitem-state-group");var N=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled");
var B=0;var m=this;for(var q=0;q<this.visualItems.length;q++){var C=this.visualItems[q];var H=function(){var y=C[0].firstChild;if(m.checkboxes)y=C[0].lastChild;if(y!=null){y.style.visibility="hidden";y.className=""}if(m.checkboxes&&m.host.jqxCheckBox){var P=C.find(".chkbox");P.css({visibility:"hidden"})}};if(q<K.length){var w=K[q].item;if(w.initialTop-x>=D){H();continue}var z=a(C[0].firstChild);if(this.checkboxes)z=a(C[0].lastChild);if(z.length==0)continue;if(z[0]==null)continue;z[0].className="";
z[0].style.display="block";z[0].style.visibility="inherit";var o="";if(!w.isGroup&&!this.selectedIndexes[w.index]>=0)o=n;else o=i;if(w.disabled||this.disabled)o+=" "+N;if(this.roundedcorners)o+=" "+this.toThemeProperty("jqx-rc-all");z[0].className=o;if(this.renderer){if(!w.key)w.key=this.generatekey();if(!this._cachedItemHtml)this._cachedItemHtml=new Array;if(this._cachedItemHtml[w.key]){if(z[0].innerHTML!=this._cachedItemHtml[w.key])z[0].innerHTML=this._cachedItemHtml[w.key]}else{var v=this.renderer(w.index,
w.label,w.value);z[0].innerHTML=v;this._cachedItemHtml[w.key]=z[0].innerHTML}}else if(w.html!=null&&w.html.toString().length>0)z[0].innerHTML=w.html;else if(w.label!=null||w.value!=null)if(w.label!=null){if(z[0].innerHTML!==w.label)z[0].innerHTML=w.label}else{if(z[0].innerHTML!==w.value)z[0].innerHTML=w.value}else if(w.label==""||w.label==null){z[0].innerHTML="";z[0].style.height=w.height-10+"px"}C[0].style.left=w.left+"px";C[0].style.top=w.initialTop-x+"px";w.element=z[0];if(w.title)z[0].title=w.title;
if(this.equalItemsWidth&&!w.isGroup){if(s==0){var d=parseInt(b);var u=parseInt(z.outerWidth())-parseInt(z.width());d-=u;var G=1;if(G!=null)G=parseInt(G);else G=0;d-=2*G;s=d;if(this.checkboxes&&this.host.jqxCheckBox&&this.hScrollBar[0].style.visibility=="hidden")s-=18}if(J>this.virtualSize.width){z[0].style.width=s+"px";w.width=s}else{z[0].style.width=-4+this.virtualSize.width+"px";w.width=this.virtualSize.width-4}}else if(z.width()<this.host.width())z.width(this.host.width()-2);if(this.checkboxes&&
this.host.jqxCheckBox&&!w.isGroup){if(B==0){B=(parseInt(C.outerHeight(true))-16)/2;B++}var e=a(C.children()[0]);e[0].item=w;if(z[0].style.left!="18px")z[0].style.left="18px";e.css("top",B+"px");e.css({display:"block",visibility:"inherit"});var t=e.jqxCheckBox("checked");if(t!=w.checked)e.jqxCheckBox({checked:w.checked,disabled:w.disabled})}else if(this.checkboxes&&this.host.jqxCheckBox){var e=a(C.children()[0]);e.css({display:"none",visibility:"inherit"})}if(this.selectedIndexes[w.visibleIndex]>=
0&&!w.disabled){z.addClass(this.toThemeProperty("jqx-listitem-state-selected"));z.addClass(this.toThemeProperty("jqx-fill-state-pressed"))}}else H()}},generatekey:function(){var b=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()},_calculateVirtualSize:function(){var d=0;var q=2;var o=0;var g=a("<span></span>");var f=0;var c=this.host.outerHeight();a(document.body).append(g);var e=this.items.length;if(this.renderer||this.groups.length>
1||e>0&&this.items[0].html!=null)for(var o=0;o<e;o++){var r=this.items[o];if(r.isGroup&&r.label==""&&r.html=="")continue;if(!r.visible)continue;var k="";if(!r.isGroup)k+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all");else k+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all");k+=" "+this.toThemeProperty("jqx-fill-state-normal");if(this.isTouchDevice())k+=" "+this.toThemeProperty("jqx-touch");if(this.equalItemsWidth)g.css("float","left");g[0].className=k;if(this.renderer){var h=
this.renderer(r.index,r.label,r.value);g[0].innerHTML=h}else if(r.html!=null&&r.html.toString().length>0)g[0].innerHTML=r.html;else if(r.label!=null||r.value!=null)if(r.label!=null)g[0].innerHTML=r.label;else g[0].innerHTML=r.value;var b=g.outerHeight();var p=g.outerWidth();if(this.itemHeight>-1)b=this.itemHeight;r.height=b;r.width=p;q+=b;d=Math.max(d,p);if(q<=c)f++}else{var q=0;var i=0;var n="";var l=0;var m=0;for(var o=0;o<e;o++){var r=this.items[o];if(r.isGroup&&r.label==""&&r.html=="")continue;
if(!r.visible)continue;var k="";if(o==0){k+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all");k+=" "+this.toThemeProperty("jqx-fill-state-normal");k+=" "+this.toThemeProperty("jqx-widget");k+=" "+this.toThemeProperty("jqx-listbox");k+=" "+this.toThemeProperty("jqx-widget-content");if(this.isTouchDevice())k+=" "+this.toThemeProperty("jqx-touch");if(this.equalItemsWidth)g.css("float","left");g[0].className=k;if(r.html==null&&(r.label==""||r.label==null))g[0].innerHTML="Item";else if(r.html!=
null&&r.html.toString().length>0)g[0].innerHTML=r.html;else if(r.label!=null||r.value!=null)if(r.label!=null)g[0].innerHTML=r.label;else g[0].innerHTML=r.value;var b=g.outerHeight();if(this.itemHeight>-1)b=this.itemHeight;i=b}if(l!=undefined)m=l;if(r.html!=null&&r.html.toString().length>0){l=Math.max(l,r.html.toString().length);if(m!=l)n=r.html}else if(r.label!=null){l=Math.max(l,r.label.length);if(m!=l)n=r.label}else if(r.value!=null){l=Math.max(l,r.value.length);if(m!=l)n=r.value}r.height=i;q+=
i;if(q<=c)f++}g[0].innerHTML=n;d=g.outerWidth()}q+=2;if(f<10)f=10;g.remove();return{width:d,height:q,itemsPerPage:f}},_getVirtualItemsCount:function(){if(this.virtualItemsCount==0){var b=parseInt(this.host.height())/5;if(b>this.items.length)b=this.items.length;return b}else return this.virtualItemsCount},_addItems:function(){if(this.updatingListBox==true)return;if(this.items==undefined||this.items.length==0){this.virtualSize={width:0,height:0,itemsPerPage:0};this._updatescrollbars();this.renderedVisibleItems=
new Array;if(this.itemswrapper)this.itemswrapper.children().remove();return}var n=this;var h=0;this.visibleItems=new Array;this.renderedVisibleItems=new Array;this._removeHandlers();this.content[0].innerHTML="";this.itemswrapper=a('<div tabIndex=1 style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>');this.itemswrapper.height(2*this.host.height());this.content.append(this.itemswrapper);var i=this._calculateVirtualSize();var l=i.itemsPerPage*2;if(this.autoHeight)l=this.items.length;
this.virtualItemsCount=Math.min(l,this.items.length);var g=this;var f=i.width;this.virtualSize=i;this.itemswrapper.width(Math.max(this.host.width(),17+i.width));for(var k=0;k<this.virtualItemsCount;k++){var m=this.items[k];var b=a("<div style='border: none; tabIndex=0 width:100%; height: 100%; align:left; valign:top; position: absolute;'><span id='spanElement'></span></div>");b[0].id=n._createID();if(this.allowDrag&&this._enableDragDrop)b.addClass("draggable");b.appendTo(this.itemswrapper);if(this.checkboxes&&
this.host.jqxCheckBox){var e=a('<div tabIndex=1 style="background-color: transparent; padding: 0; margin: 0; position: absolute; float: left; width: 16px; height: 16px;" class="chkbox"/>');b.css("float","left");var c=a(b[0].firstChild);c.css("float","left");b.prepend(e);e.jqxCheckBox({checked:m.checked,animationShowDelay:0,animationHideDelay:0,disabled:m.disabled,enableContainerClick:false,keyboardCheck:false,hasThreeStates:this.hasThreeStates,theme:this.theme});m.checkBoxElement=e[0];var d=function(r,
q){var o=r.owner.element.item;if(o!=null){var p=r.args;if(q)g.checkIndex(o.index,true);else if(q==false)g.uncheckIndex(o.index,true);else g.indeterminateIndex(o.index,true)}g.focused=true};e.jqxCheckBox("updated",d)}b[0].style.height=m.height+"px";b[0].style.top=h+"px";h+=m.height;this.visualItems[k]=b}this._addHandlers();this._updatescrollbars();if(a.browser.msie&&a.browser.version<8){this.host.attr("hideFocus",true);this.host.find("div").attr("hideFocus",true)}},_updatescrollbars:function(){var k=
this.virtualSize.height;var h=this.virtualSize.width;var d=this.vScrollInstance;var c=this.hScrollInstance;this._arrange();var i=false;if(k>this.host.outerHeight()){var b=0;if(h>this.host.outerWidth())b=this.hScrollBar.outerHeight()+2;d.max=2+parseInt(k)+b-parseInt(this.host.height());if(this.vScrollBar[0].style.visibility!="inherit"){this.vScrollBar[0].style.visibility="inherit";i=true}}else if(this.vScrollBar[0].style.visibility!="hidden"){this.vScrollBar[0].style.visibility="hidden";i=true}var f=
0;if(this.vScrollBar[0].style.visibility!="hidden")f=this.scrollBarSize+6;var e=this.checkboxes?20:0;if(h>=this.host.outerWidth()-f-e){var g=c.max;if(this.vScrollBar[0].style.visibility=="inherit")c.max=e+f+parseInt(h)-this.host.width()+4;else c.max=e+parseInt(h)-this.host.width()+6;if(this.hScrollBar[0].style.visibility!="inherit"){this.hScrollBar[0].style.visibility="inherit";i=true}if(g!=c.max)c._arrange();if(this.vScrollBar[0].style.visibility=="inherit")d.max=2+parseInt(k)+this.hScrollBar.outerHeight()+
2-parseInt(this.host.height())}else if(this.hScrollBar[0].style.visibility!="hidden"){this.hScrollBar[0].style.visibility="hidden";i=true}c.setPosition(0);if(i)this._arrange();if(this.itemswrapper){this.itemswrapper.width(Math.max(this.host.width(),17+h));this.itemswrapper.height(2*this.host.height())}},clear:function(){this.source=null;this.clearSelection();this.refresh()},clearSelection:function(b){for(indx=0;indx<this.selectedIndexes.length;indx++)this.selectedIndexes[indx]=-1;this.selectedIndex=
-1;if(b!=false)this._renderItems()},unselectIndex:function(b,c){if(isNaN(b))return;this.selectedIndexes[b]=-1;if(c==undefined||c==true){this._renderItems();this._raiseEvent("1",{index:b,type:type})}this._updateInputSelection();this._raiseEvent("2",{index:b,item:this.getItem(b)})},getItem:function(c){if(c==-1||isNaN(c))return null;var b=null;var d=a.each(this.items,function(){if(this.index==c){b=this;return false}});return b},getVisibleItem:function(b){if(b==-1||isNaN(b))return null;return this.visibleItems[b]},
checkIndex:function(b,c){if(!this.checkboxes||!this.host.jqxCheckBox)return;if(isNaN(b))return;if(b<0||b>=this.visibleItems.length)return;if(this.visibleItems[b]!=null&&this.visibleItems[b].disabled)return;if(this.disabled)return;var d=this.getItem(b);if(d!=null){var e=a(d.checkBoxElement);d.checked=true;if(c==undefined||c==true)this._updateCheckedItems()}this._raiseEvent(3,{label:d.label,value:d.value,checked:true,item:d})},getCheckedItems:function(){if(!this.checkboxes||!this.host.jqxCheckBox)return null;
var b=new Array;a.each(this.items,function(){if(this.checked)b[b.length]=this});return b},getItemByValue:function(value){var found=false;var retvalue=null;var i=0;var items=this.items;while(!found&&i<items.length){var item=items[i];if(item.value==value){found=true;retvalue=item}else i++}return retvalue},checkAll:function(){if(!this.checkboxes||!this.host.jqxCheckBox)return;if(this.disabled)return;a.each(this.items,function(){this.checked=true});this._updateCheckedItems();var that=this;a.each(this.items,
function(){var d=this;that._raiseEvent(3,{label:d.label,value:d.value,checked:false,item:d})})},uncheckAll:function(){if(!this.checkboxes||!this.host.jqxCheckBox)return;if(this.disabled)return;a.each(this.items,function(){this.checked=false});this._updateCheckedItems();var that=this;a.each(this.items,function(){var d=this;that._raiseEvent(3,{label:d.label,value:d.value,checked:false,item:d})})},uncheckIndex:function(b,c){if(!this.checkboxes||!this.host.jqxCheckBox)return;if(isNaN(b))return;if(b<0||
b>=this.visibleItems.length)return;if(this.visibleItems[b]!=null&&this.visibleItems[b].disabled)return;if(this.disabled)return;var d=this.getItem(b);if(d!=null){var e=a(d.checkBoxElement);d.checked=false;if(c==undefined||c==true)this._updateCheckedItems()}this._raiseEvent(3,{label:d.label,value:d.value,checked:false,item:d})},indeterminateIndex:function(b,c){if(!this.checkboxes||!this.host.jqxCheckBox)return;if(isNaN(b))return;if(b<0||b>=this.visibleItems.length)return;if(this.visibleItems[b]!=null&&
this.visibleItems[b].disabled)return;if(this.disabled)return;var d=this.getItem(b);if(d!=null){var e=a(d.checkBoxElement);d.checked=null;if(c==undefined||c==true)this._updateCheckedItems()}this._raiseEvent(3,{checked:null})},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var b=this.getItems();var e=this.selectedIndexes;var d=[];for(var c in e)if(e[c]!=-1)d[d.length]=b[c];return d},getSelectedItem:function(){return this.getItem(this.selectedIndex)},_updateCheckedItems:function(){var b=
this.selectedIndex;this.clearSelection(false);var c=this.getCheckedItems();this.selectedIndex=b;this._renderItems();var d=a.data(this.element,"hoveredItem");if(d!=null){a(d).addClass(this.toThemeProperty("jqx-listitem-state-hover"));a(d).addClass(this.toThemeProperty("jqx-fill-state-hover"))}this._updateInputSelection()},selectIndex:function(k,r,c,d,n,b){if(isNaN(k))return;if(k<-1||k>=this.visibleItems.length)return;if(this.visibleItems[k]!=null&&this.visibleItems[k].disabled)return;if(this.disabled)return;
if(!this.multiple&&!this.multipleextended&&this.selectedIndex==k&&!d)return;if(this.checkboxes){this._updateCheckedItems();return}this.focused=true;var q=false;if(this.selectedIndex!=k)q=true;var p=this.selectedIndex;if(this.selectedIndex==k&&!this.multiple)p=-1;if(n==undefined)n="none";var h=this.getItem(k);var s=this.getItem(p);if(this.visibleItems&&this.visibleItems.length!=this.items.length){h=this.getVisibleItem(k);s=this.getVisibleItem(p)}if(d!=undefined&&d){this._raiseEvent("1",{index:p,type:n,
item:s,originalEvent:b});this.selectedIndex=k;this.selectedIndexes[p]=-1;this.selectedIndexes[k]=k;this._raiseEvent("0",{index:k,type:n,item:h,originalEvent:b})}else{var m=this;var e=function(t,x,v,w,u,i){m._raiseEvent("1",{index:x,type:v,item:w,originalEvent:i});m.selectedIndex=t;m.selectedIndexes[x]=-1;x=t;m.selectedIndexes[t]=t;m._raiseEvent("0",{index:t,type:v,item:u,originalEvent:i})};var l=function(t,x,v,w,u,i){if(m.selectedIndexes[t]==undefined||m.selectedIndexes[t]==-1){m.selectedIndexes[t]=
t;m.selectedIndex=t;m._raiseEvent("0",{index:t,type:v,item:u,originalEvent:i})}else{x=m.selectedIndexes[t];m.selectedIndexes[t]=-1;m.selectedIndex=-1;m._raiseEvent("1",{index:x,type:v,item:w,originalEvent:i})}};if(this.multipleextended)if(!this._shiftKey&&!this._ctrlKey)if(n!="keyboard"&&n!="mouse"){l(k,p,n,s,h,b);m._clickedIndex=k}else{this.clearSelection(false);m._clickedIndex=k;e(k,p,n,s,h,b)}else if(this._ctrlKey){if(n=="keyboard")this.clearSelection(false);l(k,p,n,s,h,b)}else{if(this._shiftKey){if(m._clickedIndex==
undefined)m._clickedIndex=p;var f=Math.min(m._clickedIndex,k);var o=Math.max(m._clickedIndex,k);this.clearSelection(false);for(var g=f;g<=o;g++){m.selectedIndexes[g]=g;m._raiseEvent("0",{index:g,type:n,item:this.getVisibleItem(g),originalEvent:b})}if(n!="keyboard")m.selectedIndex=m._clickedIndex;else m.selectedIndex=k}}else if(this.multiple)l(k,p,n,s,h,b);else e(k,p,n,s,h,b)}if(c==undefined||c==true)this._renderItems();if(r!=undefined&&r!=null&&r==true)this.ensureVisible(k);this._raiseEvent("2",{index:k,
item:h});this._updateInputSelection();return q},_updateInputSelection:function(){if(this.input){if(this.selectedIndex==-1)this.input.val("");else if(this.items[this.selectedIndex]!=undefined)this.input.val(this.items[this.selectedIndex].value);if(this.multiple||this.multipleextended||this.checkboxes){var b=!this.checkboxes?this.getSelectedItems():this.getCheckedItems();var d="";for(var c=0;c<b.length;c++)if(c==b.length-1)d+=b[c].value;else d+=b[c].value+",";this.input.val(d)}}},isIndexInView:function(c){if(isNaN(c))return false;
if(c<0||c>=this.items.length)return false;var d=this.vScrollInstance.value;var e=this.visibleItems[this.selectedIndex];if(e==undefined)return true;var b=e.initialTop;var f=e.height;if(b-d<0||b-d+f>=this.host.outerHeight())return false;return true},_itemsInPage:function(){var b=0;var c=this;a.each(this.items,function(){if(this.initialTop+this.height>=c.content.height())return false;b++});return b},_firstItemIndex:function(){if(this.visibleItems!=null)if(this.visibleItems[0].isGroup)return this._nextItemIndex(0);
else return 0;return-1},_lastItemIndex:function(){if(this.visibleItems!=null)if(this.visibleItems[this.visibleItems.length-1].isGroup)return this._prevItemIndex(this.visibleItems.length-1);else return this.visibleItems.length-1;return-1},_nextItemIndex:function(b){for(indx=b+1;indx<this.visibleItems.length;indx++)if(this.visibleItems[indx])if(!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},_prevItemIndex:function(b){for(indx=b-1;indx>=0;indx--)if(this.visibleItems[indx])if(!this.visibleItems[indx].disabled&&
!this.visibleItems[indx].isGroup)return indx;return-1},_getMatches:function(g,d){if(g==undefined||g.length==0)return-1;if(d==undefined)d=0;var b=this.getItems();var f=this;var c=-1;var e=0;a.each(b,function(h){var l="";if(!this.isGroup){if(this.label)l=this.label;else if(this.value)l=this.value;else if(this.title)l=this.title;else l="jqxItem";var k=false;switch(f.searchMode){case "containsignorecase":k=a.jqx.string.containsIgnoreCase(l,g);break;case "contains":k=a.jqx.string.contains(l,g);break;case "equals":k=
a.jqx.string.equals(l,g);break;case "equalsignorecase":k=a.jqx.string.equalsIgnoreCase(l,g);break;case "startswith":k=a.jqx.string.startsWith(l,g);break;case "startswithignorecase":k=a.jqx.string.startsWithIgnoreCase(l,g);break;case "endswith":k=a.jqx.string.endsWith(l,g);break;case "endswithignorecase":k=a.jqx.string.endsWithIgnoreCase(l,g);break}if(k&&this.visibleIndex>=d){c=this.visibleIndex;return false}}});return c},findItems:function(e){var b=this.getItems();var d=this;var c=0;var f=new Array;
a.each(b,function(g){var k="";if(!this.isGroup){if(this.label)k=this.label;else if(this.value)k=this.value;else if(this.title)k=this.title;else k="jqxItem";var h=false;switch(d.searchMode){case "containsignorecase":h=a.jqx.string.containsIgnoreCase(k,e);break;case "contains":h=a.jqx.string.contains(k,e);break;case "equals":h=a.jqx.string.equals(k,e);break;case "equalsignorecase":h=a.jqx.string.equalsIgnoreCase(k,e);break;case "startswith":h=a.jqx.string.startsWith(k,e);break;case "startswithignorecase":h=
a.jqx.string.startsWithIgnoreCase(k,e);break;case "endswith":h=a.jqx.string.endsWith(k,e);break;case "endswithignorecase":h=a.jqx.string.endsWithIgnoreCase(k,e);break}if(h)f[c++]=this}});return f},_handleKeyDown:function(b){var p=b.keyCode;var q=this;var k=q.selectedIndex;var d=q.selectedIndex;var m=false;if(!this.keyboardNavigation)return;var i=function(){if(q.multiple)q.clearSelection(false)};if(b.altKey)p=-1;if(q.incrementalSearch){var r=-1;if(!q._searchString)q._searchString="";if((p==8||p==46)&&
q._searchString.length>=1)q._searchString=q._searchString.substr(0,q._searchString.length-1);var c=String.fromCharCode(p);var l=!isNaN(parseInt(c));if(p>=65&&p<=97||l||p==8||p==32||p==46){if(!b.shiftKey)c=c.toLocaleLowerCase();var o=1+q.selectedIndex;if(p!=8&&p!=32&&p!=46)if(q._searchString.length>0&&q._searchString.substr(0,1)==c)o=1+q.selectedIndex;else q._searchString+=c;if(p==32)q._searchString+=" ";var h=this._getMatches(q._searchString,o);r=h;if(r==q._lastMatchIndex||r==-1){var h=this._getMatches(q._searchString,
0);r=h}q._lastMatchIndex=r;if(r>=0){i();q.selectIndex(r,false,false,false,"keyboard",b);var e=q.isIndexInView(r);if(!e)q.ensureVisible(r);else q._renderItems()}}if(q._searchTimer!=undefined)clearTimeout(q._searchTimer);if(p==27||p==13)q._searchString="";q._searchTimer=setTimeout(function(){q._searchString=""},q.incrementalSearchDelay);if(r>=0)return}if(this.checkboxes)return true;if(p==33){var g=q._itemsInPage();if(q.selectedIndex-g>=0){i();q.selectIndex(d-g,false,false,false,"keyboard",b)}else{i();
q.selectIndex(q._firstItemIndex(),false,false,false,"keyboard",b)}q._searchString=""}if(p==32&&this.checkboxes){var f=this.getItem(k);if(f!=null){q._updateItemCheck(f,k);b.preventDefault()}q._searchString=""}if(p==36){i();q.selectIndex(q._firstItemIndex(),false,false,false,"keyboard",b);q._searchString=""}if(p==35){i();q.selectIndex(q._lastItemIndex(),false,false,false,"keyboard",b);q._searchString=""}if(p==34){var g=q._itemsInPage();if(q.selectedIndex+g<q.visibleItems.length){i();q.selectIndex(d+
g,false,false,false,"keyboard",b)}else{i();q.selectIndex(q._lastItemIndex(),false,false,false,"keyboard",b)}q._searchString=""}if(p==38){q._searchString="";if(q.selectedIndex>0){var n=q._prevItemIndex(q.selectedIndex);if(n!=q.selectedIndex&&n!=-1){i();q.selectIndex(n,false,false,false,"keyboard",b)}else return true}else return false}else if(p==40){q._searchString="";if(q.selectedIndex+1<q.visibleItems.length){var n=q._nextItemIndex(q.selectedIndex);if(n!=q.selectedIndex&&n!=-1){i();q.selectIndex(n,
false,false,false,"keyboard",b)}else return true}else return false}if(p==35||p==36||p==38||p==40||p==34||p==33){var e=q.isIndexInView(q.selectedIndex);if(!e)q.ensureVisible(q.selectedIndex);else q._renderItems();return false}return true},_updateItemCheck:function(b,c){if(b.checked==true)b.checked=this.hasThreeStates?null:false;else b.checked=b.checked!=null;switch(b.checked){case true:this.checkIndex(c);break;case false:this.uncheckIndex(c);break;default:this.indeterminateIndex(c);break}},wheel:function(d,
c){if(c.autoHeight||!c.enableMouseWheel){d.returnValue=true;return true}var e=0;if(!d)d=window.event;if(d.originalEvent&&d.originalEvent.wheelDelta)d.wheelDelta=d.originalEvent.wheelDelta;if(d.wheelDelta)e=d.wheelDelta/120;else if(d.detail)e=-d.detail/3;if(e){var b=c._handleDelta(e);if(b){if(d.preventDefault)d.preventDefault();if(d.originalEvent!=null)d.originalEvent.mouseHandled=true;if(d.stopPropagation!=undefined)d.stopPropagation()}if(b){b=false;d.returnValue=b;return b}else return false}if(d.preventDefault)d.preventDefault();
d.returnValue=false},_handleDelta:function(d){var c=this.vScrollInstance.value;if(d<0)this.scrollDown();else this.scrollUp();var b=this.vScrollInstance.value;if(c!=b)return true;return false},getTouches:function(b){if(b.originalEvent)if(b.originalEvent.touches&&b.originalEvent.touches.length)return b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)return b.originalEvent.changedTouches;if(!b.touches){b.touches=new Array;b.touches[0]=b.originalEvent}return b.touches},
focus:function(){this.focused=true;this.content.focus();var b=this;setTimeout(function(){b.content.focus()},10)},_removeHandlers:function(){var b=this;this.removeHandler(a(document),"keydown.listbox"+this.element.id);this.removeHandler(a(document),"keyup.listbox"+this.element.id);this.removeHandler(this.vScrollBar,"valuechanged");this.removeHandler(this.hScrollBar,"valuechanged");this.removeHandler(this.host,"mousewheel");this.removeHandler(this.host,"keydown");this.removeHandler(this.content,"mouseleave");
this.removeHandler(this.content,"focus");this.removeHandler(this.content,"blur");this.removeHandler(this.content,"mouseenter");this.removeHandler(this.content,"mouseup");this.removeHandler(this.content,"mousedown");this.removeHandler(this.content,"touchend");this.removeHandler(this.content,"mousemove");if(a.browser.msie)this.removeHandler(this.content,"selectstart");if(this.overlayContent)this.removeHandler(this.overlayContent,"touchend")},_addHandlers:function(){var k=this;this.focused=false;var l=
false;var i=0;var e=null;var i=0;var b=0;var g=new Date;var d=this.isTouchDevice();if(this.width!=null&&this.width.toString().indexOf("%")!=-1||this.height!=null&&this.height.toString().indexOf("%")!=-1){a(window).unbind("resize."+this.element.id);a(window).bind("resize."+this.element.id,function(){if(k.host.height()!=k._oldheight||k.host.width()!=k._oldwidth){k._oldwidth=k.host.width();k._oldheight=k.host.height();if(k.items)if(k.items.length>0&&k.virtualItemsCount*k.items[0].height<k._oldheight)k._render(false);
else{k._updatescrollbars();k._renderItems()}}})}this.addHandler(this.vScrollBar,"valuechanged",function(m){if(a.browser.msie&&a.browser.version>9)setTimeout(function(){k._renderItems()},1);else k._renderItems()});this.addHandler(this.hScrollBar,"valuechanged",function(){k._renderItems()});this.addHandler(this.host,"mousewheel",function(m){k.wheel(m,k)});this.addHandler(a(document),"keydown.listbox"+this.element.id,function(m){k._ctrlKey=m.ctrlKey;k._shiftKey=m.shiftKey});this.addHandler(a(document),
"keyup.listbox"+this.element.id,function(m){k._ctrlKey=m.ctrlKey;k._shiftKey=m.shiftKey});this.addHandler(this.host,"keydown",function(m){if(k.focused)return k._handleKeyDown(m)});this.addHandler(this.content,"mouseleave",function(m){k.focused=false;var n=a.data(k.element,"hoveredItem");if(n!=null){a(n).removeClass(k.toThemeProperty("jqx-listitem-state-hover"));a(n).removeClass(k.toThemeProperty("jqx-fill-state-hover"))}});this.addHandler(this.content,"focus",function(m){k.focused=true});this.addHandler(this.content,
"blur",function(m){k.focused=false});this.addHandler(this.content,"mouseenter",function(m){k.focused=true});if(this.enableSelection){var f=k.isTouchDevice();var h=!f?"mousedown":"touchend";if(this.overlayContent)this.addHandler(this.overlayContent,"touchend",function(o){if(f){k._newScroll=new Date;if(k._newScroll-k._lastScroll<500)return false}var r=k.getTouches(o);var q=r[0];var s=k.host.offset();var p=parseInt(q.pageX);var t=parseInt(q.pageY);if(k.touchmode==true){p=parseInt(q._pageX);t=parseInt(q._pageY)}p=
p-s.left;t=t-s.top;var u=k._hitTest(p,t);if(u!=null&&!u.isGroup){if(k.checkboxes){var n=a(u.element).offset();var m=parseInt(n.left);if(p<=m+20)if(u.checked)k.uncheckIndex(u.visibleIndex);else k.checkIndex(u.visibleIndex)}if(u.html.indexOf("href")!=-1)setTimeout(function(){k.selectIndex(u.visibleIndex,false,true,false,"mouse",o)},100);else k.selectIndex(u.visibleIndex,false,true,false,"mouse",o)}});var c=a.jqx.utilities.hasTransform(this.host);this.addHandler(this.content,h,function(m){if(f){k._newScroll=
new Date;if(k._newScroll-k._lastScroll<500)return false}k.focused=true;if(!k.isTouchDevice())k.content.focus();if(m.target.id!="listBoxContent"+k.element.id&&k.itemswrapper[0]!=m.target){var q=m.target;var v=a(q).offset();var p=k.host.offset();if(c){var n=a.jqx.mobile.getLeftPos(q);var s=a.jqx.mobile.getTopPos(q);v.left=n;v.top=s;n=a.jqx.mobile.getLeftPos(k.element);s=a.jqx.mobile.getTopPos(k.element);p.left=n;p.top=s}var r=parseInt(v.top)-parseInt(p.top);var t=parseInt(v.left)-parseInt(p.left);var u=
k._hitTest(t,r);if(u!=null&&!u.isGroup){var o=function(x,w){if(!k._shiftKey)k._clickedIndex=x.visibleindex;if(!k.checkboxes)k.selectIndex(x.visibleIndex,false,true,false,"mouse",w);else{k.selectedIndex=x.visibleIndex;if(t>=20)k._updateItemCheck(x,x.visibleIndex)}};if(u.html.indexOf("href")!=-1)setTimeout(function(){o(u,m)},100);else o(u,m)}if(h=="mousedown")return false}return true});this.addHandler(this.content,"mouseup",function(m){k.vScrollInstance.handlemouseup(k,m)});if(a.browser.msie)this.addHandler(this.content,
"selectstart",function(m){return false})}var d=this.isTouchDevice();if(this.enableHover&&!d)this.addHandler(this.content,"mousemove",function(m){if(d)return true;if(!k.enableHover)return true;var o=a.browser.msie==true&&a.browser.version<9?0:1;if(m.target==null)return true;if(k.disabled)return true;k.focused=true;var q=k.vScrollInstance.isScrolling();if(!q&&m.target.id!="listBoxContent"+k.element.id)if(k.itemswrapper[0]!=m.target){var s=m.target;var A=a(s).offset();var r=k.host.offset();if(c){var n=
a.jqx.mobile.getLeftPos(s);var u=a.jqx.mobile.getTopPos(s);A.left=n;A.top=u;n=a.jqx.mobile.getLeftPos(k.element);u=a.jqx.mobile.getTopPos(k.element);r.left=n;r.top=u}var t=parseInt(A.top)-parseInt(r.top);var v=parseInt(A.left)-parseInt(r.left);var z=k._hitTest(v,t);if(z!=null&&!z.isGroup&&!z.disabled){var p=a.data(k.element,"hoveredItem");if(p!=null){a(p).removeClass(k.toThemeProperty("jqx-listitem-state-hover"));a(p).removeClass(k.toThemeProperty("jqx-fill-state-hover"))}a.data(k.element,"hoveredItem",
z.element);var w=a(z.element);w.addClass(k.toThemeProperty("jqx-listitem-state-hover"));w.addClass(k.toThemeProperty("jqx-fill-state-hover"))}}})},_arrange:function(){var c=null;var l=null;var h=this;var f=function(o){o=h.host.height();if(o==0){o=200;h.host.height(o)}return o};if(this.width!=null&&this.width.toString().indexOf("px")!=-1)c=this.width;else if(this.width!=undefined&&!isNaN(this.width))c=this.width;if(this.height!=null&&this.height.toString().indexOf("px")!=-1)l=this.height;else if(this.height!=
undefined&&!isNaN(this.height))l=this.height;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){this.host.width(this.width);c=this.host.width()}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){this.host.height(this.height);l=f(l)}var k=this.host.css("border-width");if(k==null)k=0;if(c!=null){c=parseInt(c);if(parseInt(this.element.style.width)!=parseInt(this.width))this.host.width(this.width)}if(!this.autoHeight){if(l!=null){l=parseInt(l);if(parseInt(this.element.style.height)!=
parseInt(this.height)){this.host.height(this.height);f(l)}}}else if(this.virtualSize)if(this.hScrollBar.css("visibility")!="hidden"){this.host.height(this.virtualSize.height+parseInt(this.scrollBarSize)+3);this.height=this.virtualSize.height+parseInt(this.scrollBarSize)+3}else{this.host.height(this.virtualSize.height);this.height=this.virtualSize.height}var b=this.scrollBarSize;if(isNaN(b)){b=parseInt(b);if(isNaN(b))b="17px";else b=b+"px"}b=parseInt(b);var g=4;var n=2;var i=0;if(this.vScrollBar)if(this.vScrollBar[0].style.visibility!=
"hidden")i=b+g;else this.vScrollInstance.setPosition(0);else return;if(this.hScrollBar)if(this.hScrollBar[0].style.visibility!="hidden")n=b+g;else this.hScrollInstance.setPosition(0);else return;var m=parseInt(l)-g-b;if(m<0)m=0;this.hScrollBar.height(b);this.hScrollBar.css({top:m+"px",left:"0px"});this.hScrollBar.width(c-b-g+"px");if(i==0)this.hScrollBar.width(c-2);if(b!=parseInt(this.vScrollBar[0].style.width))this.vScrollBar.width(b);if(parseInt(l)-n!=parseInt(this.vScrollBar[0].style.height))this.vScrollBar.height(parseInt(l)-
n+"px");this.vScrollBar.css({left:parseInt(c)-parseInt(b)-g+"px",top:"0px"});var e=this.vScrollInstance;e.disabled=this.disabled;e._arrange();var d=this.hScrollInstance;d.disabled=this.disabled;d._arrange();if(this.vScrollBar[0].style.visibility!="hidden"&&this.hScrollBar[0].style.visibility!="hidden"){this.bottomRight.css("visibility","inherit");this.bottomRight.css({left:1+parseInt(this.vScrollBar.css("left")),top:1+parseInt(this.hScrollBar.css("top"))});this.bottomRight.width(parseInt(b)+3);this.bottomRight.height(parseInt(b)+
3)}else this.bottomRight.css("visibility","hidden");if(parseInt(this.content[0].style.width)!=parseInt(c)-i)this.content.width(parseInt(c)-i);if(parseInt(this.content[0].style.height)!=parseInt(l)-n)this.content.height(parseInt(l)-n);if(this.overlayContent){this.overlayContent.width(parseInt(c)-i);this.overlayContent.height(parseInt(l)-n)}},ensureVisible:function(d){var c=this.isIndexInView(d);if(!c){if(d<0)return;if(this.autoHeight){var b=a.data(this.vScrollBar[0],"jqxScrollBar").instance;b.setPosition(0)}else for(indx=
0;indx<this.visibleItems.length;indx++){var e=this.visibleItems[indx];if(e.visibleIndex==d&&!e.isGroup){var b=a.data(this.vScrollBar[0],"jqxScrollBar").instance;b.setPosition(e.initialTop);break}}}this._renderItems()},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return false;var b=this.vScrollInstance;if(b.value+b.largestep<=b.max){b.setPosition(b.value+b.largestep);return true}else{b.setPosition(b.max);return true}return false},scrollUp:function(){if(this.vScrollBar.css("visibility")==
"hidden")return false;var b=this.vScrollInstance;if(b.value-b.largestep>=b.min){b.setPosition(b.value-b.largestep);return true}else if(b.value!=b.min){b.setPosition(b.min);return true}return false},databind:function(h){this.records=new Array;var d=h._source?true:false;var i=new a.jqx.dataAdapter(h,{autoBind:false});if(d){i=h;h=h._source}var g=function(k){if(h.type!=undefined)i._options.type=h.type;if(h.formatdata!=undefined)i._options.formatData=h.formatdata;if(h.contenttype!=undefined)i._options.contentType=
h.contenttype;if(h.async!=undefined)i._options.async=h.async};var c=function(q,p){var r=function(s){if(typeof s==="string"){var u=s;var v=s}else{var v=s[q.valueMember];var u=s[q.displayMember]}var t=new a.jqx._jqxListBox.item;t.label=u;t.value=v;t.html="";t.visible=true;t.originalItem=s;t.group="";t.groupHtml="";t.disabled=false;return t};if(p!=undefined){var n=i._changedrecords[0];if(n){a.each(i._changedrecords,function(){var s=this.index;var t=this.record;if(p!="remove")var u=r(t);switch(p){case "update":q.updateAt(u,
s);break;case "add":q.insertAt(u,s);break;case "remove":q.removeAt(s);break}});return}}q.records=i.records;var m=q.records.length;q.items=new Array;for(var o=0;o<m;o++){var k=q.records[o];var l=r(k);l.index=o;q.items[o]=l}q._render()};g(this);var f=this;switch(h.datatype){case "local":case "array":default:if(h.localdata!=null){i.dataBind();c(this);i.unbindBindingUpdate(this.element.id);i.bindBindingUpdate(this.element.id,function(k){c(f,k)})}break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":case "csv":case "tab":if(h.localdata!=
null){i.dataBind();c(this);i.unbindBindingUpdate(this.element.id);i.bindBindingUpdate(this.element.id,function(){c(f)});return}var e={};if(i._options.data)a.extend(i._options.data,e);else{if(h.data)a.extend(e,h.data);i._options.data=e}var b=function(){c(f)};i.unbindDownloadComplete(f.element.id);i.bindDownloadComplete(f.element.id,b);i.dataBind()}},loadItems:function(h){if(h==null){this.groups=new Array;this.items=new Array;this.visualItems=new Array;return}var n=this;var f=0;var d=0;var b=0;this.groups=
new Array;this.items=new Array;this.visualItems=new Array;var e=new Array;a.map(h,function(s){if(s==undefined)return null;var p=new a.jqx._jqxListBox.item;var t=s.group;var o=s.groupHtml;var u=s.title;if(u==null||u==undefined)u="";if(t==null||t==undefined)t="";if(o==null||o==undefined)o="";if(!n.groups[t]){n.groups[t]={items:new Array,index:-1,caption:t,captionHtml:o};f++;var q=f+"jqxGroup";n.groups[q]=n.groups[t];d++;n.groups.length=d}var r=n.groups[t];r.index++;r.items[r.index]=p;if(typeof s===
"string"){p.label=s;p.value=s}else if(s.label==null&&s.value==null&&s.html==null&&s.group==null&&s.groupHtml==null){p.label=s.toString();p.value=s.toString()}else{p.label=s.label||s.value;p.value=s.value||s.label}if(typeof s!="string"){if(n.displayMember!="")if(s[n.displayMember])p.label=s[n.displayMember];if(n.valueMember!="")p.value=s[n.valueMember]}p.originalItem=s;p.title=u;p.html=s.html||"";p.group=t;p.checked=s.checked||false;p.groupHtml=s.groupHtml||"";p.disabled=s.disabled||false;p.visible=
s.visible||true;p.index=b;e[b]=p;b++;return p});var c=new Array;var k=0;if(this.fromSelect==undefined||this.fromSelect==false)for(indx=0;indx<d;indx++){var f=indx+1;var i=f+"jqxGroup";var l=this.groups[i];if(l==undefined||l==null)break;if(indx==0&&l.caption==""&&l.captionHtml==""&&d<=1)return l.items;else{var g=new a.jqx._jqxListBox.item;g.isGroup=true;g.label=l.caption;if(l.caption==""&&l.captionHtml==""){l.caption=this.emptyGroupText;g.label=l.caption}g.html=l.captionHtml;c[k]=g;k++}for(j=0;j<l.items.length;j++){c[k]=
l.items[j];k++}}else{var k=0;var m=new Array;a.each(e,function(){if(!m[this.group])if(this.group!=""){var o=new a.jqx._jqxListBox.item;o.isGroup=true;o.label=this.group;c[k]=o;k++;m[this.group]=true}c[k]=this;k++})}return c},_mapItem:function(c){var b=new a.jqx._jqxListBox.item;if(typeof c==="string"){b.label=c;b.value=c}else if(typeof c==="number"){b.label=c.toString();b.value=c.toString()}else{b.label=c.label||c.value;b.value=c.value||c.label}if(b.label==undefined&&b.value==undefined&&b.html==undefined)b.label=
b.value=c;b.html=c.html||"";b.group=c.group||"";b.title=c.title||"";b.groupHtml=c.groupHtml||"";b.disabled=c.disabled||false;b.visible=c.visible||true;return b},addItem:function(b){if(this.items==undefined||this.items.length==0){this.source=new Array;this.source[0]=b;this.refresh();return}return this.insertAt(b,this.items.length)},updateAt:function(d,c){if(d!=null){var b=this._mapItem(d);this.items[c].value=b.value;this.items[c].label=b.label;this.items[c].html=b.html;this.items[c].disabled=b.disabled}this._cachedItemHtml=
[];this._renderItems();if(this.rendered)this.rendered()},insertAt:function(l,f){if(l==null)return false;this._cachedItemHtml=[];if(this.items==undefined||this.items.length==0){this.source=new Array;this.source[0]=l;this.refresh();if(this.rendered)this.rendered();return false}var g=this._mapItem(l);if(f==-1||f==undefined||f==null||f>=this.items.length){g.index=this.items.length;this.items[this.items.length]=g}else{var c=new Array;var k=0;var e=false;var h=0;for(var b=0;b<this.items.length;b++){if(this.items[b].isGroup==
false)if(h>=f&&!e){c[k++]=g;g.index=f;h++;e=true}c[k]=this.items[b];if(!this.items[b].isGroup){c[k].index=h;h++}k++}this.items=c}this.visibleItems=new Array;this.renderedVisibleItems=new Array;var d=a.data(this.vScrollBar[0],"jqxScrollBar").instance;var i=d.value;d.setPosition(0);this._addItems();this._renderItems();if(this.allowDrag&&this._enableDragDrop)this._enableDragDrop();d.setPosition(i);if(this.rendered)this.rendered();return true},removeAt:function(g){if(g<0||g>this.items.length-1)return false;
var d=this.items[g].height;this.items.splice(g,1);var c=new Array;var k=0;var e=false;var h=0;for(var b=0;b<this.items.length;b++){c[k]=this.items[b];if(!this.items[b].isGroup){c[k].index=h;h++}k++}this.items=c;var f=a.data(this.vScrollBar[0],"jqxScrollBar").instance;var f=a.data(this.vScrollBar[0],"jqxScrollBar").instance;var i=f.value;f.setPosition(0);this.visibleItems=new Array;this.renderedVisibleItems=new Array;if(this.items.length>0){if(this.virtualSize){this.virtualSize.height-=d;var l=this.virtualSize.itemsPerPage*
2;if(this.autoHeight)l=this.items.length;this.virtualItemsCount=Math.min(l,this.items.length)}this._updatescrollbars()}else this._addItems();this._renderItems();if(this.allowDrag&&this._enableDragDrop)this._enableDragDrop();if(this.vScrollBar.css("visibility")!="hidden")f.setPosition(i);else f.setPosition(0);if(this.rendered)this.rendered();return true},removeItem:function(b){this.removeAt(b.index)},getItems:function(){return this.items},disableAt:function(b){if(!this.items)return false;if(b<0||b>
this.items.length-1)return false;this.items[b].disabled=true;this._renderItems();return true},enableAt:function(b){if(!this.items)return false;if(b<0||b>this.items.length-1)return false;this.items[b].disabled=false;this._renderItems();return true},destroy:function(){this._removeHandlers();this.vScrollBar.jqxScrollBar("destroy");this.hScrollBar.jqxScrollBar("destroy");this.vScrollBar.remove();this.hScrollBar.remove();this.host.removeClass("jqx-listbox jqx-rc-all");this.host.remove()},_raiseEvent:function(f,
c){if(this._stopEvents==true)return true;if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;this._updateInputSelection();var e=new jQuery.Event(d);e.owner=this;e.args=args;if(this.host!=null)var b=this.host.trigger(e);return b}})})(jQuery);
(function(a){a.jqx._jqxListBox.item=function(){var b={group:"",groupHtml:"",selected:false,isGroup:false,highlighted:false,value:null,label:"",html:null,visible:true,disabled:false,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:false,visibleIndex:-1};return b}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxTree","",{});a.extend(a.jqx._jqxTree.prototype,{defineInstance:function(){this.items=new Array;this.width=null;this.height=null;this.easing="easeInOutCirc";this.animationShowDuration="fast";this.animationHideDuration="fast";this.treeElements=new Array;this.disabled=false;this.enableHover=true;this.keyboardNavigation=true;this.enableKeyboardNavigation=true;this.toggleMode="dblclick";this.source=null;this.checkboxes=false;this.checkSize=13;this.toggleIndicatorSize=16;
this.hasThreeStates=false;this.selectedItem=null;this.touchMode="auto";this.allowDrag=true;this.allowDrop=true;this.animationHideDelay=0;this.dropAction="default";this.events=["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart"]},createInstance:function(c){var b=this;this.propertyChangeMap.disabled=function(f,h,g,j){if(b.disabled)b.host.addClass(b.toThemeProperty("jqx-tree-disabled"));else b.host.removeClass(b.toThemeProperty("jqx-tree-disabled"))};if(this.width!=
null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);if(this.width!=null&&this.width.toString().indexOf("%")!=-1)this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("%")!=-1)this.host.height(this.height);
this.host.attr("tabIndex",1);if(this.disabled)this.host.addClass(this.toThemeProperty("jqx-tree-disabled"));if(this.host.jqxDragDrop)jqxTreeDragDrop();this.originalInnerHTML=this.element.innerHTML;this.createdTree=false;if(this.element.innerHTML.indexOf("UL")){var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);this.createdTree=true}}if(this.source!=null){var d=this.loadItems(this.source);this.element.innerHTML=d;var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);
this.createdTree=true}}this._itemslength=this.items.length;if(!this.createdTree)if(this.host.find("ul").length==0){this.host.append(a("<ul></ul>"));var e=this.host.find("ul:first");if(e.length>0){this.createTree(e[0]);this.createdTree=true}this.createdTree=true}if(this.createdTree==true){this._render();this._handleKeys()}this._updateCheckLayout(0)},checkItems:function(f,h){var e=this;if(f!=null){var d=0;var g=false;var b=0;var j=a(f.element).find("li");b=j.length;a.each(j,function(k){var l=e.itemMapping["id"+
this.id].item;if(l.checked!=false){if(l.checked==null)g=true;d++}});if(f!=h)if(d==b)this.checkItem(f.element,true);else if(d>0)this.checkItem(f.element,null);else this.checkItem(f.element,false);else{var c=h.checked;var j=a(h.element).find("li");a.each(j,function(){var k=e.itemMapping["id"+this.id].item;e.checkItem(this,c)})}this.checkItems(this._parentItem(f),h)}else{var c=h.checked;var j=a(h.element).find("li");a.each(j,function(){var k=e.itemMapping["id"+this.id].item;e.checkItem(this,c)})}},_handleKeys:function(){var b=
this;this.addHandler(this.host,"keydown",function(j){var g=j.keyCode;if(b.keyboardNavigation||b.enableKeyboardNavigation)if(b.selectedItem!=null){var f=b.selectedItem.element;switch(g){case 32:if(b.checkboxes){b.fromKey=true;var h=a(b.selectedItem.checkBoxElement).jqxCheckBox("checked");b.checkItem(b.selectedItem.element,!h);if(b.hasThreeStates)b.checkItems(b.selectedItem,b.selectedItem)}return false;case 33:var e=b._getItemsOnPage();var d=b.selectedItem;for(i=0;i<e;i++)d=b._prevVisibleItem(d);if(d!=
null){b.selectItem(d.element);b.ensureVisible(d.element)}else{b.selectItem(b._firstItem().element);b.ensureVisible(b._firstItem().element)}return false;case 34:var e=b._getItemsOnPage();var c=b.selectedItem;for(i=0;i<e;i++)c=b._nextVisibleItem(c);if(c!=null){b.selectItem(c.element);b.ensureVisible(c.element)}else{b.selectItem(b._lastItem().element);b.ensureVisible(b._lastItem().element)}return false;case 37:if(b.selectedItem.hasItems)b.collapseItem(f);return false;case 39:if(b.selectedItem.hasItems)b.expandItem(f);
return false;case 13:if(b.selectedItem.hasItems)if(b.selectedItem.isExpanded)b.collapseItem(f);else b.expandItem(f);return false;case 36:b.selectItem(b._firstItem().element);b.ensureVisible(b._firstItem().element);return false;case 35:b.selectItem(b._lastItem().element);b.ensureVisible(b._lastItem().element);return false;case 38:var d=b._prevVisibleItem(b.selectedItem);if(d!=null){b.selectItem(d.element);b.ensureVisible(d.element)}return false;case 40:var c=b._nextVisibleItem(b.selectedItem);if(c!=
null){b.selectItem(c.element);b.ensureVisible(c.element)}return false}}})},_firstItem:function(){var d=null;var c=this;var f=this.host.find("ul:first");var e=a(f).find("li");for(i=0;i<=e.length-1;i++){var b=e[i];d=this.itemMapping["id"+b.id].item;if(c._isVisible(d))return d}return null},_lastItem:function(){var d=null;var c=this;var f=this.host.find("ul:first");var e=a(f).find("li");for(i=e.length-1;i>=0;i--){var b=e[i];d=this.itemMapping["id"+b.id].item;if(c._isVisible(d))return d}return null},_parentItem:function(d){if(d==
null||d==undefined)return null;var c=d.parentElement;var b=null;a.each(this.items,function(){if(this.element==c){b=this;return false}});return b},_nextVisibleItem:function(c){if(c==null||c==undefined)return null;var b=c;while(b!=null){b=b.nextItem;if(this._isVisible(b)&&!b.disabled)return b}return null},_prevVisibleItem:function(c){if(c==null||c==undefined)return null;var b=c;while(b!=null){b=b.prevItem;if(this._isVisible(b)&&!b.disabled)return b}return null},_isVisible:function(c){if(c==null||c==
undefined)return false;if(!this._isElementVisible(c.element))return false;var b=this._parentItem(c);if(b==null)return true;if(b!=null){if(!this._isElementVisible(b.element))return false;if(b.isExpanded)while(b!=null){b=this._parentItem(b);if(b!=null&&!this._isElementVisible(b.element))return false;if(b!=null&&!b.isExpanded)return false}else return false}return true},_getItemsOnPage:function(){var d=0;var c=this.panel.jqxPanel("getVScrollPosition");var b=parseInt(this.host.height());var f=0;var e=
this._firstItem();if(parseInt(a(e.element).height())>0)while(f<=b){f+=parseInt(a(e.element).outerHeight());d++}return d},_isElementVisible:function(b){if(b==null)return false;if(a(b).css("display")!="none"&&a(b).css("visibility")!="hidden")return true;return false},refresh:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=
-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);if(this.panel){if(this.width!=null&&this.width.toString().indexOf("%")!=-1){var b=this;this.panel.jqxPanel("width","100%");a(window).resize(function(){b._calculateWidth()})}else this.panel.jqxPanel("width",this.host.width());this.panel.jqxPanel("height",this.height);this.panel.jqxPanel("_arrange")}this._calculateWidth()},loadItems:function(c){if(c==null)return;var b=this;this.items=new Array;
var d="<ul>";a.map(c,function(e){if(e==undefined)return null;d+=b._parseItem(e)});d+="</ul>";return d},_parseItem:function(l){var f="";if(l==undefined)return null;var j=l.label;if(!l.label&&l.html)j=l.html;if(!j)j="Item";if(typeof l==="string")j=l;var g=false;if(l.expanded!=undefined&&l.expanded)g=true;var e=false;if(l.locked!=undefined&&l.locked)e=true;var c=false;if(l.selected!=undefined&&l.selected)c=true;var d=false;if(l.disabled!=undefined&&l.disabled)d=true;var k=false;if(l.checked!=undefined&&
l.checked)k=true;var h=l.icon;var b=l.iconsize;f+="<li";if(g)f+=' item-expanded="true" ';if(e)f+=' item-locked="true" ';if(d)f+=' item-disabled="true" ';if(c)f+=' item-selected="true" ';if(b)f+=' item-iconsize="'+l.iconsize+'" ';if(h!=null&&h!=undefined)f+=' item-icon="'+h+'" ';if(l.label&&!l.html)f+=' item-label="'+j+'" ';if(l.value!=null)f+=' item-value="'+l.value+'" ';if(l.checked!=undefined)f+=' item-checked="'+k+'" ';if(l.id!=undefined)f+=' id="'+l.id+'" ';else f+=' id="'+this.createID()+'" ';
f+=">"+j;if(l.items)f+=this.loadItems(l.items);f+="</li>";return f},ensureVisible:function(d){if(d==null||d==undefined)return;var c=this.panel.jqxPanel("getVScrollPosition");var e=this.panel.jqxPanel("getHScrollPosition");var b=parseInt(this.host.height());var f=a(d).position().top;if(f<=c||f>=b+c)this.panel.jqxPanel("scrollTo",e,f-b+a(d).outerHeight())},hitTest:function(g,f){var d=this;var b=this;var e=null;if(b._visibleItems){var c=parseInt(b.host.offset().left);var h=b.host.outerWidth();a.each(b._visibleItems,
function(k){if(g>=c&&g<c+h)if(this.top+5<f&&f<this.top+this.height){var j=a(this.element).parents("li:first");if(j.length>0){e=b.getItem(j[0]);if(e!=null){e.height=this.height;e.top=this.top;return false}}}})}return e},addTo:function(n,p,m){var k=this;var l=new Array;if(!a.isArray(n))l[0]=n;else l=n;var g="";var o=this;a.each(l,function(){g+=o._parseItem(this)});var b=a("<div>"+g+"</div>");if(k.element.innerHTML.indexOf("UL"))var h=k.host.find("ul:first");if(p==undefined&&p==null)h.append(b);else{p=
a(p);var d=p.find("ul:first");if(d.length==0){ulElement=a("<ul></ul>");a(p).append(ulElement);d=p.find("ul:first");var q=k.itemMapping["id"+p[0].id].item;q.subtreeElement=d[0];q.hasItems=true;d.addClass(k.toThemeProperty("jqx-tree-dropdown"));d.append(b);var f=d.find("li:first");q.parentElement=f}else d.append(b)}var c=a(b).find("li");for(var j=0;j<c.length;j++)this._createItem(c[j]);var e=function(r){o._refreshMapping(false);o._updateItemsNavigation();if(r&&this.allowDrag&&this._enableDragDrop)this._enableDragDrop();
if(o.selectedItem!=null){a(o.selectedItem.titleElement).addClass(o.toThemeProperty("jqx-fill-state-pressed"));a(o.selectedItem.titleElement).addClass(o.toThemeProperty("jqx-tree-item-selected"))}};if(m==false){e(true);this._raiseEvent("4",{items:this.getItems()});return}e(false);o._render();this._raiseEvent("4",{items:this.getItems()});if(this.allowDrag&&this._enableDragDrop)this._enableDragDrop()},removeItem:function(b,c){if(b==undefined||b==null)return;var d=this;var e=b.id;if(this.host.find("#"+
b.id).length>0)a(b).remove();if(c==false){this._raiseEvent("5");return}d._updateItemsNavigation();d._render();if(d.selectedItem!=null)if(d.selectedItem.element==b){a(d.selectedItem.titleElement).removeClass(d.toThemeProperty("jqx-fill-state-pressed"));a(d.selectedItem.titleElement).removeClass(d.toThemeProperty("jqx-tree-item-selected"));d.selectedItem=null}this._raiseEvent("5");if(this.allowDrag&&this._enableDragDrop)this._enableDragDrop()},clear:function(){this.items=new Array;this.itemMapping=
new Array;var b=this.host.find("ul:first");if(b.length>0)b[0].innerHTML="";this.selectedItem=null},disableItem:function(b){if(b==null)return false;var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.disabled=true;a(d.titleElement).addClass(c.toThemeProperty("jqx-fill-state-disabled"));a(d.titleElement).addClass(c.toThemeProperty("jqx-tree-item-disabled"));if(c.checkboxes&&d.checkBoxElement)a(d.checkBoxElement).jqxCheckBox({disabled:true});return false}})},checkItem:function(c,e){if(c==
null)return false;var d=this;var b=false;a.each(d.items,function(){var f=this;if(f.element==c&&!f.disabled){b=true;f.checked=e;a(f.checkBoxElement).jqxCheckBox({checked:e});return false}});if(b)this._raiseEvent("6",{element:c,checked:e})},enableItem:function(b){if(b==null)return false;var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.disabled=false;a(d.titleElement).removeClass(c.toThemeProperty("jqx-fill-state-disabled"));a(d.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-disabled"));
if(c.checkboxes&&d.checkBoxElement)a(d.checkBoxElement).jqxCheckBox({disabled:false});return false}})},enableAll:function(){var b=this;a.each(b.items,function(){var c=this;c.disabled=false;a(c.titleElement).removeClass(b.toThemeProperty("jqx-tree-item-disabled"));a(c.titleElement).removeClass(b.toThemeProperty("jqx-fill-state-disabled"));if(b.checkboxes&&c.checkBoxElement)a(c.checkBoxElement).jqxCheckBox({disabled:false})})},lockItem:function(b){if(b==null)return false;var c=this;a.each(c.items,function(){var d=
this;if(d.element==b){d.locked=true;return false}})},unlockItem:function(b){if(b==null)return false;var c=this;a.each(c.items,function(){var d=this;if(d.element==b){d.locked=false;return false}})},getItems:function(){return this.items},getItem:function(b){if(b==null||b==undefined)return null;if(this.itemMapping["id"+b.id]){var c=this.itemMapping["id"+b.id].item;return c}return null},isExpanded:function(b){if(b==null||b==undefined)return false;var c=this.itemMapping["id"+b.id].item;if(c!=null)return c.isExpanded;
return false},isSelected:function(b){if(b==null||b==undefined)return false;var c=this.itemMapping["id"+b.id].item;if(c!=null)return c==this.selectedItem;return false},getPrevItem:function(c){var d=this.getItem(c);var b=this._prevVisibleItem(d);return b},getNextItem:function(c){var d=this.getItem(c);var b=this._nextVisibleItem(d);return b},getSelectedItem:function(b){return this.selectedItem},selectItem:function(b){if(this.disabled)return;var c=this;if(b==null||b==undefined){if(c.selectedItem!=null){a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-fill-state-pressed"));
a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-selected"));c.selectedItem=null}return}if(this.selectedItem!=null&&this.selectedItem.element==b)return;var d=this.selectedItem!=null?this.selectedItem.element:null;a.each(c.items,function(){var e=this;if(!e.disabled)if(e.element==b)if(c.selectedItem==null||c.selectedItem!=null&&c.selectedItem.titleElement!=e.titleElement){if(c.selectedItem!=null){a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-fill-state-pressed"));
a(c.selectedItem.titleElement).removeClass(c.toThemeProperty("jqx-tree-item-selected"))}a(e.titleElement).addClass(c.toThemeProperty("jqx-fill-state-pressed"));a(e.titleElement).addClass(c.toThemeProperty("jqx-tree-item-selected"));c.selectedItem=e}});this._raiseEvent("2",{element:b,prevElement:d})},collapseAll:function(){var c=this;var b=c.items;a.each(b,function(){var d=this;if(d.isExpanded==true)c._collapseItem(c,d)})},expandAll:function(){var b=this;a.each(this.items,function(){var c=this;if(c.hasItems)b._expandItem(b,
c)})},collapseItem:function(b){if(b==null)return false;var c=this;a.each(this.items,function(){var d=this;if(d.isExpanded==true&&d.element==b){c._collapseItem(c,d);return false}});return true},expandItem:function(b){if(b==null)return false;var c=this;a.each(c.items,function(){var d=this;if(d.isExpanded==false&&d.element==b&&!d.disabled&&!d.locked){c._expandItem(c,d);if(d.parentElement)c.expandItem(d.parentElement)}});return true},_getClosedSubtreeOffset:function(c){var b=a(c.subtreeElement);var e=
-b.outerHeight();var d=-b.outerWidth();d=0;return{left:d,top:e}},_collapseItem:function(g,k,d,b){if(g==null||k==null)return false;if(k.disabled)return false;if(g.disabled)return false;if(g.locked)return false;var e=a(k.subtreeElement);var l=this._getClosedSubtreeOffset(k);var h=l.top;var c=l.left;$treeElement=a(k.element);var f=g.animationHideDelay;f=0;if(e.data("timer").show!=null){clearTimeout(e.data("timer").show);e.data("timer").show=null}var j=function(){k.isExpanded=false;if(g.checkboxes){var m=
e.find(".chkbox");m.stop();m.css("opacity",1);e.find(".chkbox").animate({opacity:0},50)}e.slideUp(g.animationHideDuration,function(){k.isCollapsing=false;g._calculateWidth();var n=a(k.arrow);if(n.length>0){n.removeClass();n.addClass(g.toThemeProperty("jqx-tree-item-arrow-collapse"))}e.hide();g._raiseEvent("1",{element:k.element})})};if(f>0)e.data("timer").hide=setTimeout(function(){j()},f);else j()},_expandItem:function(g,k){if(g==null||k==null)return false;if(k.isExpanded)return false;if(k.locked)return false;
if(k.disabled)return false;if(g.disabled)return false;var e=a(k.subtreeElement);if(e.data("timer")!=null&&e.data("timer").hide!=null)clearTimeout(e.data("timer").hide);var j=a(k.element);var h=0;var d=0;if(parseInt(e.css("top"))==h){k.isExpanded=true;return}var c=a(k.arrow);if(c.length>0){c.removeClass();c.addClass(g.toThemeProperty("jqx-tree-item-arrow-expand"))}if(g.checkboxes){var f=e.find(".chkbox");f.stop();f.css("opacity",0);f.animate({opacity:1},g.animationShowDuration)}e.slideDown(g.animationShowDuration,
g.easing,function(){k.isExpanded=true;k.isExpanding=false;g._raiseEvent("0",{element:k.element});g._calculateWidth()});if(g.checkboxes){g._updateCheckItemLayout(k);if(k.subtreeElement){var b=a(k.subtreeElement).find("li");a.each(b,function(){var l=g.getItem(this);if(l!=null)g._updateCheckItemLayout(l)})}}},_calculateWidth:function(){var d=this;var e=this.checkboxes?20:0;var c=0;a.each(this.items,function(){var f=a(this.element).height();if(f!=0){var j=this.titleElement.outerWidth()+20+e+(1+this.level)*
25;c=Math.max(c,j);if(this.hasItems){var g=parseInt(a(this.titleElement).css("padding-top"));if(isNaN(g))g=0;g=g*2;g+=2;var h=(g+a(this.titleElement).height())/2-17/2;if(a.browser.msie&&a.browser.version<9)a(this.arrow).css("margin-top","3px");else if(parseInt(h)>=0)a(this.arrow).css("margin-top",parseInt(h)+"px")}}});if(this.toggleIndicatorSize>16)c=c+this.toggleIndicatorSize-16;if(c>this.host.width()){var b=c-this.host.width();d.panel.jqxPanel({horizontalScrollBarMax:b})}else d.panel.jqxPanel({horizontalScrollBarMax:null});
d.panel.jqxPanel("_arrange")},_initialize:function(e,b){var d=this;var c=0;this.host.removeClass();this.host.addClass(d.toThemeProperty("jqx-widget"));this.host.addClass(d.toThemeProperty("jqx-widget-content"));this.host.addClass(d.toThemeProperty("jqx-tree"));this._updateDisabledState();a.each(this.items,function(){var l=this;$element=a(l.element);var j=null;var h=a(l.arrow);if(h.length>0){h.unbind("hover");h.remove()}j=a('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+
$element[0].id+'"></span>');j.prependTo($element);j.css("float","left");j.width(d.toggleIndicatorSize);if(!l.isExpanded)j.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse"));else j.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand"));var k=parseInt(a(this.titleElement).css("padding-top"));if(isNaN(k))k=0;k=k*2;k+=2;var m=(k+a(this.titleElement).height())/2-17/2;if(a.browser.msie&&a.browser.version<9)j.css("margin-top","3px");else if(parseInt(m)>=0)j.css("margin-top",parseInt(m)+"px");
$element.addClass(d.toThemeProperty("jqx-disableselect"));j.addClass(d.toThemeProperty("jqx-disableselect"));var f="click";var g=d.isTouchDevice();if(g)f="touchend";j.bind(f,function(){if(!l.isExpanded)d._expandItem(d,l);else d._collapseItem(d,l);return false});d.addHandler(j,"selectstart",function(){return false});d.addHandler(j,"mouseup",function(){if(!g)return false});j.hover(function(){j.removeClass();if(l.isExpanded)j.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand-hover"));else j.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse-hover"))},
function(){j.removeClass();if(l.isExpanded)j.addClass(d.toThemeProperty("jqx-tree-item-arrow-expand"));else j.addClass(d.toThemeProperty("jqx-tree-item-arrow-collapse"))});l.hasItems=a(l.element).find("li").length>0;l.arrow=j[0];if(!l.hasItems)j.css("visibility","hidden");$element.css("float","none")})},_getOffset:function(b){var f=a(window).scrollTop();var h=a(window).scrollLeft();var c=a.jqx.mobile.isSafariMobileBrowser();var g=a(b).offset();var e=g.top;var d=g.left;if(c!=null&&c)return{left:d-
h,top:e-f};else return a(b).offset()},_renderHover:function(c,e,b){var d=this;if(!b){a(e.titleElement).unbind("hover");a(e.titleElement).hover(function(){if(!e.disabled&&d.enableHover&&!d.disabled){a(e.titleElement).addClass(d.toThemeProperty("jqx-fill-state-hover"));a(e.titleElement).addClass(d.toThemeProperty("jqx-tree-item-hover"))}},function(){if(!e.disabled&&d.enableHover&&!d.disabled){a(e.titleElement).removeClass(d.toThemeProperty("jqx-fill-state-hover"));a(e.titleElement).removeClass(d.toThemeProperty("jqx-tree-item-hover"))}})}},
_updateDisabledState:function(){if(this.disabled)this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));else this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},render:function(){this._updateItemsNavigation();this._render()},_render:function(e){if(a.browser.msie&&a.browser.version<8){var f=this;a.each(this.items,function(){var m=a(this.element);var o=m.parent();var l=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13;m.css("min-width",
l);var n=parseInt(o.css("min-width"));if(isNaN(n))n=0;var k=m.css("min-width");if(n<parseInt(m.css("min-width")))o.css("min-width",k);this.titleElement[0].style.width=null})}var j=1E3;var c=[5,5];var f=this;a.data(f.element,"animationHideDelay",f.animationHideDelay);a.data(document.body,"treeel",this);this._initialize();var d=this.isTouchDevice();if(d&&this.toggleMode=="dblclick")this.toggleMode="click";if(e==undefined||e==true)a.each(this.items,function(){f._updateItemEvents(f,this)});if(this.host.jqxPanel){if(this.host.find("#panel"+
this.element.id).length>0){this.panel.jqxPanel({touchMode:this.touchMode});return}this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');var b=this.host.find("div:first");var g="fixed";if(this.height==null||this.height=="auto")g="verticalwrap";if(this.width==null||this.width=="auto")if(g=="fixed")g="horizontalwrap";else g="wrap";b.jqxPanel({theme:this.theme,width:this.width,height:this.height,
autoUpdateInterval:30,touchMode:this.touchMode,autoUpdate:true,sizeMode:g});if(this.height==null||this.height!=null&&this.height.toString().indexOf("%")!=-1)if(this.isTouchDevice()){b.unbind("touchend.touchScroll touchcancel.touchScroll");b.unbind("touchmove.touchScroll");b.unbind("touchstart.touchScroll")}var h=a.data(b[0],"jqxPanel").instance;if(h!=null){this.vScrollInstance=h.vScrollInstance;this.hScrollInstance=h.hScrollInstance}this.panelInstance=h;if(a.browser.msie&&a.browser.version<8){this.host.attr("hideFocus",
true);this.host.find("div").attr("hideFocus",true);this.host.find("ul").attr("hideFocus",true)}b[0].className="";this.panel=b}this._raiseEvent("3",this)},_updateItemEvents:function(g,f){var c=this.isTouchDevice();if(c)this.toggleMode="touchend";var e=a(f.element);if(g.enableRoundedCorners)e.addClass(g.toThemeProperty("jqx-rc-all"));var b=!c?"click":"touchend";g.removeHandler(a(f.checkBoxElement),b);g.addHandler(a(f.checkBoxElement),b,function(j){if(!g.disabled)if(!this.treeItem.disabled){this.treeItem.checked=
!this.treeItem.checked;g.checkItem(this.treeItem.element,this.treeItem.checked);if(g.hasThreeStates)g.checkItems(this.treeItem,this.treeItem)}return false});g.removeHandler(e,"mousedown");g.removeHandler(e,"mouseenter");g.removeHandler(e,"mouseleave");g.removeHandler(e,"mousedown");g.removeHandler(e,"mouseup");g.removeHandler(e,"selectstart");g._renderHover(e,f,c);var d=a(f.subtreeElement);if(d.length>0){var h=f.isExpanded?"block":"none";d.css({overflow:"hidden",display:h});d.data("timer",{})}g.removeHandler(a(f.titleElement),
"dblclick");g.removeHandler(a(f.titleElement),"click");g.addHandler(a(f.titleElement),"selectstart",function(j){return false});if(a.browser.opera){g.removeHandler(a(f.titleElement),"mousedown");g.addHandler(a(f.titleElement),"mousedown",function(j){return false})}if(g.toggleMode!="click")g.addHandler(a(f.titleElement),"click",function(j){g.selectItem(f.element);if(g.panel!=null)g.panel.jqxPanel({focused:true});g.host.focus()});g.removeHandler(a(f.titleElement),g.toggleMode);g.addHandler(a(f.titleElement),
g.toggleMode,function(j){if(d.length>0)clearTimeout(d.data("timer").hide);if(g.panel!=null)g.panel.jqxPanel({focused:true});g.selectItem(f.element);if(f.isExpanding==undefined)f.isExpanding=false;if(f.isCollapsing==undefined)f.isCollapsing=false;g.panel.jqxPanel({autoUpdate:false});if(d.length>0)if(!f.isExpanded){if(false==f.isExpanding){f.isExpanding=true;g._expandItem(g,f)}}else if(false==f.isCollapsing){f.isCollapsing=true;g._collapseItem(g,f,true)}g.panel.jqxPanel({autoUpdate:true})})},isTouchDevice:function(){if(this._isTouchDevice!=
undefined)return this._isTouchDevice;var b=a.jqx.mobile.isTouchDevice();if(this.touchMode==true)b=true;else if(this.touchMode==false)b=false;this._isTouchDevice=b;return b},createID:function(){var b=Math.random()+"";b=b.replace(".","");b="99"+b;b=b/1;while(this.items[b]){b=Math.random()+"";b=b.replace(".","");b=b/1}return"treeItem"+b},createTree:function(b){if(b==null)return;var d=this;var f=a(b).find("li");var c=0;this.items=new Array;this.itemMapping=new Array;a(b).addClass(d.toThemeProperty("jqx-tree-dropdown-root"));
for(var e=0;e<f.length;e++)this._createItem(f[e]);this._updateItemsNavigation();this._updateCheckStates();if(this.allowDrag&&this._enableDragDrop)this._enableDragDrop()},_updateCheckLayout:function(c){var b=this;a.each(this.items,function(){if(this.level==c||c==undefined)b._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(b){if(this.checkboxes)if(a(b.titleElement).css("display")!="none"){var c=a(b.checkBoxElement);var d=a(b.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2;
c.css("margin-top",d);if(a.browser.msie&&a.browser.version<8)b.titleElement.css("margin-left",parseInt(this.checkSize)+25);else c.css("margin-left",this.toggleIndicatorSize)}},_updateCheckStates:function(){var b=this;if(b.hasThreeStates)a.each(this.items,function(){b._updateCheckState(this)});else a.each(this.items,function(){if(this.checked==null)b.checkItem(this.element,false)})},_updateCheckState:function(e){if(e==null||e==undefined)return;var d=this;var c=0;var f=false;var b=0;var g=a(e.element).find("li");
b=g.length;if(e.checked&&b>0)a.each(g,function(h){var k=d.itemMapping["id"+this.id].item;var j=k.element.getAttribute("item-checked");if(j==undefined||j==null||j=="true"||j==true)d.checkItem(k.element,true)});a.each(g,function(h){var j=d.itemMapping["id"+this.id].item;if(j.checked!=false){if(j.checked==null)f=true;c++}});if(b>0)if(c==b)this.checkItem(e.element,true);else if(c>0)this.checkItem(e.element,null);else this.checkItem(e.element,false)},_updateItemsNavigation:function(){var f=this.host.find("ul:first");
var e=a(f).find("li");var c=0;for(i=0;i<e.length;i++){var b=e[i];if(this.itemMapping["id"+b.id]){var d=this.itemMapping["id"+b.id].item;if(!d)continue;d.prevItem=null;d.nextItem=null;if(i>0)if(this.itemMapping["id"+e[i-1].id])d.prevItem=this.itemMapping["id"+e[i-1].id].item;if(i<e.length-1)if(this.itemMapping["id"+e[i+1].id])d.nextItem=this.itemMapping["id"+e[i+1].id].item}}},_applyTheme:function(e,h){var f=this;this.host.removeClass("jqx-tree-"+e);this.host.removeClass("jqx-widget-"+e);this.host.removeClass("jqx-widget-content-"+
e);this.host.addClass(f.toThemeProperty("jqx-tree"));this.host.addClass(f.toThemeProperty("jqx-widget"));var b=this.host.find("ul:first");a(b).removeClass(f.toThemeProperty("jqx-tree-dropdown-root-"+e));a(b).addClass(f.toThemeProperty("jqx-tree-dropdown-root"));var g=a(b).find("li");for(var d=0;d<g.length;d++){var c=g[d];a(c).children().each(function(){if(this.tagName=="ul"||this.tagName=="UL"){a(this).removeClass(f.toThemeProperty("jqx-tree-dropdown-"+e));a(this).addClass(f.toThemeProperty("jqx-tree-dropdown"));
return false}})}a.each(this.items,function(){var l=this;var k=a(l.element);k.removeClass(f.toThemeProperty("jqx-tree-item-li-"+e));k.addClass(f.toThemeProperty("jqx-tree-item-li"));a(l.titleElement).removeClass(f.toThemeProperty("jqx-tree-item-"+e));a(l.titleElement).addClass(f.toThemeProperty("jqx-tree-item"));a(l.titleElement).removeClass("jqx-item-"+e);a(l.titleElement).addClass(f.toThemeProperty("jqx-item"));var j=a(l.arrow);if(!l.isExpanded)j.addClass(f.toThemeProperty("jqx-tree-item-arrow-collapse"));
else j.addClass(f.toThemeProperty("jqx-tree-item-arrow-expand"));if(l.checkBoxElement)a(l.checkBoxElement).jqxCheckBox({theme:h});if(f.enableRoundedCorners){k.removeClass("jqx-rc-all-"+e);k.addClass(f.toThemeProperty("jqx-rc-all"))}});if(this.host.jqxPanel)this.panel.jqxPanel({theme:h})},_refreshMapping:function(d){var c=this.host.find("li");var b=new Array;var m=new Array;var f=a.data(document.body,"treeItemsStorage");var h=this;for(var g=0;g<c.length;g++){var j=c[g];var l=f[j.id];m[m.length]=l;
if(d==undefined||d==true)this._updateItemEvents(this,l);l.level=a(j).parents("li").length;l.treeInstance=this;var k=null;var e=null;a(l.titleElement).removeClass(h.toThemeProperty("jqx-fill-state-pressed"));a(l.titleElement).removeClass(h.toThemeProperty("jqx-tree-item-selected"));a(j).children().each(function(){if(this.tagName=="ul"||this.tagName=="UL"){l.subtreeElement=this;a(this).addClass(h.toThemeProperty("jqx-tree-dropdown"));return false}});a(j).parents().each(function(){if(this.tagName=="li"||
this.tagName=="LI"){e=this.id;k=this;return false}});l.parentElement=k;l.parentId=e;l.hasItems=a(l.element).find("li").length>0;if(l!=null){b[g]={element:j,item:l};b["id"+j.id]=b[g]}}this.itemMapping=b;this.items=m},_createItem:function(c){if(c==null||c==undefined)return;var q=c.id;if(!q)q=this.createID();var C=c;var m=a(c);C.id=q;var g=a.data(document.body,"treeItemsStorage");if(g==undefined)g=new Array;var v=this.items.length;this.items[v]=new a.jqx._jqxTree.jqxTreeItem;this.treeElements[q]=this.items[v];
g[C.id]=this.items[v];a.data(document.body,"treeItemsStorage",g);v=this.items.length;var x=0;var E=this;var e=null;a(C).children().each(function(){if(this.tagName=="ul"||this.tagName=="UL"){E.items[v-1].subtreeElement=this;a(this).addClass(E.toThemeProperty("jqx-tree-dropdown"));return false}});a(C).parents().each(function(){if(this.tagName=="li"||this.tagName=="LI"){x=this.id;e=this;return false}});var u=c.getAttribute("item-expanded");if(u==null||u==undefined||u!="true"&&u!=true)u=false;else u=
true;m.removeAttr("item-expanded");var D=c.getAttribute("item-locked");if(D==null||D==undefined||D!="true"&&D!=true)D=false;else D=true;m.removeAttr("item-locked");var r=c.getAttribute("item-selected");if(r==null||r==undefined||r!="true"&&r!=true)r=false;else r=true;m.removeAttr("item-selected");var d=c.getAttribute("item-disabled");if(d==null||d==undefined||d!="true"&&d!=true)d=false;else d=true;m.removeAttr("item-disabled");var j=c.getAttribute("item-checked");if(j==null||j==undefined||j!="true"&&
j!=true)j=false;else j=true;var F=c.getAttribute("item-title");if(F==null||F==undefined||F!="true"&&F!=true)F=false;m.removeAttr("item-title");var A=c.getAttribute("item-icon");var s=c.getAttribute("item-iconsize");var l=c.getAttribute("item-label");var t=c.getAttribute("item-value");m.removeAttr("item-icon");m.removeAttr("item-iconsize");m.removeAttr("item-label");m.removeAttr("item-value");var z=this.items[v-1];z.id=q;z.value=t;z.icon=A;z.iconsize=s;z.parentId=x;z.disabled=d;z.parentElement=e;z.element=
c;z.locked=D;z.selected=r;z.checked=j;z.isExpanded=u;z.treeInstance=this;this.itemMapping[v-1]={element:C,item:z};this.itemMapping["id"+C.id]=this.itemMapping[v-1];var h=false;var B=false;h=false;if(!h||!B)if(a(C.firstChild).length>0){if(z.icon){var s=z.iconsize;if(!s)s=16;var A=a('<img width="'+s+'" height="'+s+'" style="float: left;" class="itemicon" src="'+z.icon+'"/>');a(C).prepend(A);A.css("margin-right","4px")}var b=C.innerHTML.indexOf("<ul");if(b==-1)b=C.innerHTML.indexOf("<UL");if(b==-1){z.originalTitle=
C.innerHTML;a(C).wrapInner('<div style="display: inline-block;"/>');z.titleElement=a(a(C)[0].firstChild)}else{var y=C.innerHTML.substring(0,b);y=a.trim(y);z.originalTitle=y;y=a('<div style="display: inline-block;">'+y+"</div>");var n=a(C).find("ul:first");n.remove();C.innerHTML="";a(C).prepend(y);a(C).append(n);z.titleElement=y}if(a.browser.msie&&a.browser.version<8)a(a(C)[0].firstChild).css("display","inline-block")}else{z.originalTitle="Item";a(C).append(a("<span>Item</span>"));a(C.firstChild).wrap("<span/>");
z.titleElement=a(C)[0].firstChild;if(a.browser.msie&&a.browser.version<8)a(C.firstChild).css("display","inline-block")}var w=a(z.titleElement);var p=this.toThemeProperty("jqx-rc-all");if(this.allowDrag)w.addClass("draggable");if(l==null||l==undefined){l=z.titleElement;z.label=a.trim(w.text())}else z.label=l;a(C).addClass(this.toThemeProperty("jqx-tree-item-li"));p+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item");w[0].className=w[0].className+" "+p;z.level=a(c).parents("li").length;
if(this.checkboxes)if(this.host.jqxCheckBox){var o=a('<div style="position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>');o.width(parseInt(this.checkSize));o.height(parseInt(this.checkSize));a(C).prepend(o);o.jqxCheckBox({checked:z.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:d,theme:this.theme});w.css("margin-left",parseInt(this.checkSize)+6);z.checkBoxElement=o[0];o[0].treeItem=z;var f=w.outerHeight()/2-1-parseInt(this.checkSize)/2;o.css("margin-top",
f);if(a.browser.msie&&a.browser.version<8){w.css("width","1%");w.css("margin-left",parseInt(this.checkSize)+25)}else o.css("margin-left",this.toggleIndicatorSize)}else alert("jqxcheckbox.js is not loaded.");else if(a.browser.msie&&a.browser.version<8)w.css("width","1%");if(d)this.disableItem(z.element);if(r)this.selectItem(z.element);if(a.browser.msie&&a.browser.version<8){a(C).css("margin","0px");a(C).css("padding","0px")}z.hasItems=a(c).find("li").length>0},destroy:function(){this.host.removeClass();
this.host.remove()},_raiseEvent:function(f,c){if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);e.owner=this;e.args=args;var b=this.host.trigger(e);return b},propertyChangedHandler:function(d,l,b,j){if(this.isInitialized==undefined||this.isInitialized==false)return;if(l=="disabled")d._updateDisabledState();if(l=="theme")d._applyTheme(b,j);if(l=="keyboardNavigation")d.enableKeyboardNavigation=j;if(l=="width"||l=="height"){d.refresh();d._initialize();
d._calculateWidth();if(d.host.jqxPanel){var k="fixed";if(this.height==null||this.height=="auto")k="verticalwrap";if(this.width==null||this.width=="auto")if(k=="fixed")k="horizontalwrap";else k="wrap";this.panel.jqxPanel({sizeMode:k})}}if(l=="touchMode"){d._isTouchDevice=null;if(j)d.enableHover=false;d._render()}if(l=="source")if(this.source!=null){var m=[];a.each(d.items,function(){if(this.isExpanded)m[m.length]={label:this.label,level:this.level}});var f=d.loadItems(d.source);if(!d.host.jqxPanel)d.element.innerHTML=
f;else{d.panel.jqxPanel("setcontent",f);d.host.css("border","none")}var e=d.disabled;var g=d.host.find("ul:first");if(g.length>0){d.createTree(g[0]);d._render()}var h=d;var c=h.animationShowDuration;h.animationShowDuration=0;d.disabled=false;if(m.length>0)a.each(d.items,function(){for(var n=0;n<m.length;n++)if(m[n].label==this.label&&m[n].level==this.level){var o=h.getItem(this.element);h._expandItem(h,o)}});d.disabled=e;h.animationShowDuration=c}if(l=="hasThreeStates"){d._render();d._updateCheckStates()}if(l==
"toggleIndicatorSize"){d._updateCheckLayout();d._render()}}})})(jQuery);(function(a){a.jqx._jqxTree.jqxTreeItem=function(e,d,b){var c={label:null,id:e,parentId:d,parentElement:null,parentItem:null,disabled:false,selected:false,locked:false,checked:false,level:0,isExpanded:false,hasItems:false,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null};return c}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxDragDrop","",{});a.extend(a.jqx._jqxDragDrop.prototype,{defineInstance:function(){this.restricter="document";this.handle=false;this.feedback="clone";this.opacity=0.6;this.revert=false;this.revertDuration=400;this.distance=5;this.disabled=false;this.tolerance="intersect";this.data=null;this.dropAction="default";this.dragZIndex=99999;this.appendTo="parent";this.cursor="move";this.onDragEnd=null;this.onDrag=null;this.onDragStart=null;this.onTargetDrop=null;this.onDropTargetEnter=
null;this.onDropTargetLeave=null;this.initFeedback=null;this._touchEvents={mousedown:"touchstart",click:"touchstart",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave"};this._restricter=null;this._zIndexBackup=0;this._targetEnterFired=false;this._oldOpacity=1;this._feedbackType;this._isTouchDevice=false;this._events=["dragStart","dragEnd","dragging","dropTargetEnter","dropTargetLeave"]},createInstance:function(){this._createDragDrop()},_createDragDrop:function(){var c=
a.data(document.body,"jqx-draggables")||1;this.appendTo=this._getParent();this._isTouchDevice=a.jqx.mobile.isTouchDevice();if(/(static|relative)/.test(this.host.css("position")))if(!this.feedback||this.feedback==="original"){var d=this._getRelativeOffset(this.host);var b=this.appendTo.offset();if(this.appendTo.css("position")!="static")b={left:0,top:0};this.element.style.position="absolute";this.element.style.left=b.left+d.left+"px";this.element.style.top=b.top+d.top+"px"}this._validateProperties();
this._idHandler(c);if(this.disabled)this.disable();if(typeof this.dropTarget==="string")this.dropTarget=a(this.dropTarget);this._refresh();c+=1;a.data(document.body,"jqx-draggables",c);this.host.addClass("jqx-draggable");if(!this.disabled)this.host.css("cursor",this.cursor)},_getParent:function(){var b=this.appendTo;if(typeof this.appendTo==="string")switch(this.appendTo){case "parent":b=this.host.parent();break;case "document":b=a(document);break;case "body":b=a(document.body);break;default:b=a(this.appendTo);
break}return b},_idHandler:function(b){if(!this.element.id){var c="jqx-draggable-"+b;this.element.id=c}},_refresh:function(){this._removeEventHandlers();this._addEventHandlers()},_getEvent:function(b){if(this._isTouchDevice)return this._touchEvents[b];else return b},_validateProperties:function(){if(this.feedback==="clone")this._feedbackType="clone";else this._feedbackType="original";if(this.dropAction!=="default")this.dropAction="nothing"},_removeEventHandlers:function(){this.removeHandler(this.host,
"dragstart");this.removeHandler(this.host,this._getEvent("mousedown")+".draggable."+this.element.id,this._mouseDown);this.removeHandler(a(document),this._getEvent("mousemove")+".draggable."+this.element.id,this._mouseMove);this.removeHandler(a(document),this._getEvent("mouseup")+".draggable."+this.element.id,this._mouseUp)},_addEventHandlers:function(){var b=this;this.addHandler(this.host,"dragstart",function(e){e.preventDefault();return false});this.addHandler(this.host,this._getEvent("mousedown")+
".draggable."+this.element.id,this._mouseDown,{self:this});this.addHandler(a(document),this._getEvent("mousemove")+".draggable."+this.element.id,this._mouseMove,{self:this});this.addHandler(a(document),this._getEvent("mouseup")+".draggable."+this.element.id,this._mouseUp,{self:this});if(document.referrer!=""||window.frameElement)if(window.top!=null){var d="";if(window.parent&&document.referrer)d=document.referrer;if(d.indexOf(document.location.host)!=-1){var c=function(e){b._mouseUp(b)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",
c,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",c)}}},_mouseDown:function(e){var b=e.data.self,d=b._getMouseCoordinates(e),c=b._mouseCapture(e);b._originalPageX=d.left;b._originalPageY=d.top;if(!b._mouseStarted)b._mouseUp(e);if(c)b._mouseDownEvent=e;if(e.which!==1||!c)return true;e.preventDefault()},_mouseMove:function(c){var b=c.data.self;if(b._mouseStarted){b._mouseDrag(c);return c.preventDefault()}if(b._mouseDownEvent&&b._isMovedDistance(c)){if(b._mouseStart(b._mouseDownEvent,
c))b._mouseStarted=true;else b._mouseStarted=false;if(b._mouseStarted)b._mouseDrag(c);else b._mouseUp(c)}return!b._mouseStarted},_mouseUp:function(c){var b;if(c.data&&c.data.self)b=c.data.self;else b=this;b._mouseDownEvent=false;b._movedDistance=false;if(b._mouseStarted){b._mouseStarted=false;b._mouseStop(c)}if(b.feedback&&b.feedback[0]&&b._feedbackType!=="original"&&typeof b.feedback.remove==="function"&&!b.revert)b.feedback.remove();return false},cancelDrag:function(){var b=this.revertDuration;
this.revertDuration=0;this._mouseDownEvent=false;this._movedDistance=false;this._mouseStarted=false;this._mouseStop();this.feedback.remove();this.revertDuration=b},_isMovedDistance:function(b){var c=this._getMouseCoordinates(b);if(this._movedDistance)return true;if(c.left>=this._originalPageX+this.distance||c.left<=this._originalPageX-this.distance||c.top>=this._originalPageY+this.distance||c.top<=this._originalPageY-this.distance){this._movedDistance=true;return true}return false},_getMouseCoordinates:function(b){if(this._isTouchDevice)return{left:b.originalEvent.touches[0].pageX,
top:b.originalEvent.touches[0].pageY};else return{left:b.pageX,top:b.pageY}},destroy:function(){this.host.removeData("draggable").unbind(".draggable").removeClass("jqx-draggable jqx-draggable-dragging jqx-draggable-disabled");this._removeEventHandlers();this.isDestroyed=true;return this},_disableSelection:function(b){b.each(function(){a(this).attr("unselectable","on").css({"-ms-user-select":"none","-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=
function(){return false}})})},_enableSelection:function(b){b.each(function(){a(this).attr("unselectable","off").css({"-ms-user-select":"text","-moz-user-select":"text","-webkit-user-select":"text","user-select":"text"}).each(function(){this.onselectstart=null})})},_mouseCapture:function(b){if(this.disabled)return false;if(!this._getHandle(b))return false;this._disableSelection(this.host);return true},_getScrollParent:function(b){var c;if(a.browser.msie&&/(static|relative)/.test(b.css("position"))||
/absolute/.test(b.css("position")))c=b.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position",1))&&/(auto|scroll)/.test(a.css(this,"overflow",1)+a.css(this,"overflow-y",1)+a.css(this,"overflow-x",1))}).eq(0);else c=b.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow",1)+a.css(this,"overflow-y",1)+a.css(this,"overflow-x",1))}).eq(0);return/fixed/.test(b.css("position"))||!c.length?a(document):c},_mouseStart:function(d){var c=this._getMouseCoordinates(d),
b=this._getParentOffset(this.host);this.feedback=this._createFeedback(d);this._zIndexBackup=this.feedback.css("z-index");this.feedback[0].style.zIndex=this.dragZIndex;this._backupFeedbackProportions();this._backupeMargins();this._positionType=this.feedback.css("position");this._scrollParent=this._getScrollParent(this.feedback);this._offset=this.positionAbs=this.host.offset();this._offset={top:this._offset.top-this.margins.top,left:this._offset.left-this.margins.left};a.extend(this._offset,{click:{left:c.left-
this._offset.left,top:c.top-this._offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset(),hostRelative:this._getRelativeOffset(this.host)});this.position=this._generatePosition(d);this.originalPosition=this._fixPosition();if(this.restricter)this._setRestricter();this.feedback.addClass(this.toThemeProperty("jqx-draggable-dragging"));this._raiseEvent(0,d);if(this.onDragStart&&typeof this.onDragStart==="function")this.onDragStart(this.position);this._mouseDrag(d,true);return true},
_fixPosition:function(){var c=this._getRelativeOffset(this.host),b=this.position;b={left:this.position.left+c.left,top:this.position.top+c.top};return b},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.feedback[0].style.left=this.position.left+"px";this.feedback[0].style.top=this.position.top+"px";this._raiseEvent(2,b);if(this.onDrag&&typeof this.onDrag==="function")this.onDrag(this.data,this.position);this._handleTarget();
return false},_over:function(b,d,e){if(this.dropTarget){var f=false,c=this;a.each(this.dropTarget,function(g,h){f=c._overItem(h,b,d,e);if(f.over)return false})}return f},_overItem:function(i,c,e,g){i=a(i);var b=i.offset(),f=i.outerHeight(),d=i.outerWidth(),h;if(!i||i[0]===this.element)return;switch(this.tolerance){case "intersect":if(c.left+e>b.left&&c.left<b.left+d&&c.top+g>b.top&&c.top<b.top+f)h=true;break;case "fit":if(e+c.left<=b.left+d&&c.left>=b.left&&g+c.top<=b.top+f&&c.top>=b.top)h=true;break}return{over:h,
target:i}},_handleTarget:function(){if(this.dropTarget){var b=this.feedback.offset(),c=this.feedback.outerWidth(),d=this.feedback.outerWidth(),e=this._over(b,c,d);if(e.over){if(!this._targetEnterFired){this._targetEnterFired=true;this._raiseEvent(3,{target:e.target});if(this.onDropTargetEnter&&typeof this.onDropTargetEnter==="function")this.onDropTargetEnter()}}else if(this._targetEnterFired){this._targetEnterFired=false;this._raiseEvent(4,{target:e.target});if(this.onDropTargetLeave&&typeof this.onDropTargetLeave===
"function")this.onDropTargetLeave()}}},_mouseStop:function(d){var e=false,b=this._fixPosition(),c={width:this.host.outerWidth(),height:this.host.outerHeight()};this.feedback[0].style.opacity=this._oldOpacity;if(!this.revert)this.feedback[0].style.zIndex=this._zIndexBackup;this._enableSelection(this.host);if(this.dropped){e=this.dropped;this.dropped=false}if((!this.element||!this.element.parentNode)&&this.feedback==="original")return false;this._dropElement(b);this.feedback.removeClass(this.toThemeProperty("jqx-draggable-dragging"));
this._raiseEvent(1,d);if(this.onDragEnd&&typeof this.onDragEnd==="function")this.onDragEnd(this.data);if(this.onTargetDrop&&typeof this.onTargetDrop==="function"&&this._over(b,c.width,c.height).over)this.onTargetDrop(this.data);this._revertHandler();return false},_dropElement:function(b){if(this.dropAction==="default"&&this.feedback&&this.feedback[0]!==this.element&&this.feedback!=="original")if(!this.revert)if(!/(fixed|absolute)/.test(this.host.css("position"))){this.host.css("position","relative");
var c=this._getRelativeOffset(this.host);b=this.position;b.left-=c.left;b.top-=c.top;this.element.style.left=b.left+"px";this.element.style.top=b.top+"px"}},_revertHandler:function(){if(this.revert||a.isFunction(this.revert)&&this.revert()){var b=this;if(this._feedbackType!="original"){if(this.feedback!=null)if(this.dropAction!="none")a(this.feedback).animate({left:b.originalPosition.left-b._offset.hostRelative.left,top:b.originalPosition.top-b._offset.hostRelative.top},parseInt(this.revertDuration,
10),function(){if(b.feedback&&b.feedback[0]&&b._feedbackType!=="original"&&typeof b.feedback.remove==="function")b.feedback.remove()});else if(b.feedback&&b.feedback[0]&&b._feedbackType!=="original"&&typeof b.feedback.remove==="function")b.feedback.remove()}else{this.element.style.zIndex=this.dragZIndex;a(this.host).animate({left:b.originalPosition.left-b._offset.hostRelative.left,top:b.originalPosition.top-b._offset.hostRelative.top},parseInt(this.revertDuration,10),function(){b.element.style.zIndex=
b._zIndexBackup})}}},_getHandle:function(b){var c;if(!this.handle)c=true;else a(this.handle,this.host).find("*").andSelf().each(function(){if(this==b.target)c=true});return c},_createFeedback:function(c){var b;if(typeof this._feedbackType==="function")b=this._feedbackType();else if(this._feedbackType==="clone")b=this.host.clone().removeAttr("id");else b=this.host;if(!/(absolute|fixed)/.test(b.css("position")))b.css("position","absolute");if(this.appendTo[0]!==this.host.parent()[0]||b[0]!==this.element){var d=
{};b.css({left:this.host.offset().left-this._getParentOffset(this.host).left+this._getParentOffset(b).left,top:this.host.offset().top-this._getParentOffset(this.host).top+this._getParentOffset(b).top});b.appendTo(this.appendTo)}if(typeof this.initFeedback==="function")this.initFeedback(b);return b},_getParentOffset:function(c){var c=c||this.feedback;this._offsetParent=c.offsetParent();var b=this._offsetParent.offset();if(this._positionType=="absolute"&&this._scrollParent[0]!==document&&a.contains(this._scrollParent[0],
this._offsetParent[0])){b.left+=this._scrollParent.scrollLeft();b.top+=this._scrollParent.scrollTop()}if(this._offsetParent[0]==document.body||this._offsetParent[0].tagName&&this._offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this._offsetParent.css("border-top-width"),10)||0),left:b.left+(parseInt(this._offsetParent.css("border-left-width"),10)||0)}},_getRelativeOffset:function(c){var d=this._scrollParent||c.parent();c=c||this.feedback;if(c.css("position")===
"relative"){var b=this.host.position();return{top:b.top-(parseInt(c.css("top"),10)||0),left:b.left-(parseInt(c.css("left"),10)||0)}}else return{top:0,left:0}},_backupeMargins:function(){this.margins={left:parseInt(this.host.css("margin-left"),10)||0,top:parseInt(this.host.css("margin-top"),10)||0,right:parseInt(this.host.css("margin-right"),10)||0,bottom:parseInt(this.host.css("margin-bottom"),10)||0}},_backupFeedbackProportions:function(){this.feedback[0].style.opacity=this.opacity;this._feedbackProportions=
{width:this.feedback.outerWidth(),height:this.feedback.outerHeight()}},_setRestricter:function(){if(this.restricter=="parent")this.restricter=this.feedback[0].parentNode;if(this.restricter=="document"||this.restricter=="window")this._handleNativeRestricter();if(typeof this.restricter.left!=="undefined"&&typeof this.restricter.top!=="undefined"&&typeof this.restricter.height!=="undefined"&&typeof this.restricter.width!=="undefined")this._restricter=[this.restricter.left,this.restricter.top,this.restricter.width,
this.restricter.height];else if(!/^(document|window|parent)$/.test(this.restricter)&&this.restricter.constructor!=Array)this._handleDOMParentRestricter();else if(this.restricter.constructor==Array)this._restricter=this.restricter},_handleNativeRestricter:function(){this._restricter=[this.restricter==="document"?0:a(window).scrollLeft()-this._offset.relative.left-this._offset.parent.left,this.restricter==="document"?0:a(window).scrollTop()-this._offset.relative.top-this._offset.parent.top,(this.restricter===
"document"?0:a(window).scrollLeft())+a(this.restricter==="document"?document:window).width()-this._feedbackProportions.width-this.margins.left,(this.restricter==="document"?0:a(window).scrollTop())+(a(this.restricter==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this._feedbackProportions.height-this.margins.top]},_handleDOMParentRestricter:function(){var d=a(this.restricter),b=d[0];if(!b)return;var c=a(b).css("overflow")!=="hidden";this._restricter=[(parseInt(a(b).css("borderLeftWidth"),
10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0),(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0),(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this._feedbackProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this._feedbackProportions.height-
this.margins.top-this.margins.bottom];this._restrictiveContainer=d},_convertPositionTo:function(f,c){if(!c)c=this.position;var e,b,g;if(f==="absolute")e=1;else e=-1;if(this._positionType==="absolute"&&!(this._scrollParent[0]!=document&&a.contains(this._scrollParent[0],this._offsetParent[0])))b=this._offsetParent;else b=this._scrollParent;g=/(html|body)/i.test(b[0].tagName);return this._getPosition(c,e,g,b)},_getPosition:function(c,d,e,b){return{top:c.top+this._offset.relative.top*d+this._offset.parent.top*
d-(a.browser.safari&&a.browser.version<526&&this._positionType=="fixed"?0:(this._positionType=="fixed"?-this._scrollParent.scrollTop():e?0:b.scrollTop())*d),left:c.left+this._offset.relative.left*d+this._offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this._positionType=="fixed"?0:(this._positionType=="fixed"?-this._scrollParent.scrollLeft():e?0:b.scrollLeft())*d)}},_generatePosition:function(f){var b=this._positionType=="absolute"&&!(this._scrollParent[0]!=document&&a.contains(this._scrollParent[0],
this._offsetParent[0]))?this._offsetParent:this._scrollParent,i=/(html|body)/i.test(b[0].tagName);var e=this._getMouseCoordinates(f),d=e.left,c=e.top;if(this.originalPosition){var h;if(this.restricter){if(this._restrictiveContainer){var g=this._restrictiveContainer.offset();h=[this._restricter[0]+g.left,this._restricter[1]+g.top,this._restricter[2]+g.left,this._restricter[3]+g.top]}else h=this._restricter;if(e.left-this._offset.click.left<h[0])d=h[0]+this._offset.click.left;if(e.top-this._offset.click.top<
h[1])c=h[1]+this._offset.click.top;if(e.left-this._offset.click.left>h[2])d=h[2]+this._offset.click.left;if(e.top-this._offset.click.top>h[3])c=h[3]+this._offset.click.top}}return{top:c-this._offset.click.top-this._offset.relative.top-this._offset.parent.top+(a.browser.safari&&a.browser.version<526&&this._positionType=="fixed"?0:this._positionType=="fixed"?-this._scrollParent.scrollTop():i?0:b.scrollTop()),left:d-this._offset.click.left-this._offset.relative.left-this._offset.parent.left+(a.browser.safari&&
a.browser.version<526&&this._positionType=="fixed"?0:this._positionType=="fixed"?-this._scrollParent.scrollLeft():i?0:b.scrollLeft())}},_raiseEvent:function(c,e){if(this.triggerEvents!=undefined&&this.triggerEvents==false)return;var b=this._events[c],d=a.Event(b),e=e||{};e.position=this.position;e.element=this.element;this.data=this.data;a.extend(e,this.data);d.args=e;return this.host.trigger(d)},disable:function(){this.disabled=true;this.host.addClass(this.toThemeProperty("jqx-draggable-disabled"))},
enable:function(){this.disabled=false;this.host.removeClass(this.toThemeProperty("jqx-draggable-disabled"))},propertyChangedHandler:function(b,c,e,d){if(c==="dropTarget"){if(typeof d==="string")b.dropTarget=a(d)}else if(c=="cursor")b.host.css("cursor",b.cursor)}})})(jQuery);
(function(a){jqxListBoxDragDrop=function(){a.extend(a.jqx._jqxListBox.prototype,{_hitTestBounds:function(b,c,e){var f=b.host.offset();var g=e-parseInt(f.top);var i=c-parseInt(f.left);var k=b._hitTest(i,g);if(g<0)return null;if(b.items&&b.items.length>0)var h=b.items[b.items.length-1];if(k!=null){var d=parseInt(f.left);var j=d+b.host.width();if(d<=c+k.width/2&&c<=j)return k;return null}return null},_handleDragStart:function(d,c){var b=a.jqx.mobile.isTouchDevice();if(b)if(c.allowDrag)d.bind("touchstart",
function(){a.jqx.mobile.setTouchScroll(false,c.element.id)});d.unbind("dragStart");d.bind("dragStart",function(i){if(c.allowDrag&&!c.disabled){c.feedbackElement=a("<div style='z-index: 99999; position: absolute;'></div>");c.feedbackElement.addClass(c.toThemeProperty("jqx-listbox-feedback"));c.feedbackElement.appendTo(a(document.body));c.feedbackElement.hide();c.isDragging=true;c._dragCancel=false;var f=i.args.position;var h=c._hitTestBounds(c,f.left,f.top);var j=a.find(".jqx-listbox");c._listBoxes=
j;a.each(c._listBoxes,function(){var k=a.data(this,"jqxListBox").instance;k._enableHover=k.enableHover;k.enableHover=false;a.jqx.mobile.setTouchScroll(false,c.element.id)});if(h!=null&&!h.isGroup){c._dragItem=h;var g=function(){c._dragCancel=true;a(i.args.element).jqxDragDrop({triggerEvents:false});a(i.args.element).jqxDragDrop("cancelDrag");clearInterval(c._autoScrollTimer);a(i.args.element).jqxDragDrop({triggerEvents:true});a.each(c._listBoxes,function(){var k=a.data(this,"jqxListBox").instance;
if(k._enableHover!=undefined){k.enableHover=k._enableHover;a.jqx.mobile.setTouchScroll(true,c.element.id)}})};if(c.dragStart){var e=c.dragStart(h);if(e==false){g();return false}}if(h.disabled)g();c._raiseEvent(4,{label:h.label,value:h.value,originalEvent:i.args})}}return false})},_handleDragging:function(c,b){c.unbind("dragging");c.bind("dragging",function(f){var e=f.args;var d=e.position;if(b._dragCancel)return;var g=b._getMouseCoordinates(f);b._dragOverItem=null;b.feedbackElement.hide();a.each(b._listBoxes,
function(){var l=a(this).offset();var n=l.top+20;var h=a(this).height()+n-40;var j=l.left;var i=a(this).width();var o=j+i;var m=a.data(this,"jqxListBox").instance;var p=m._hitTestBounds(m,d.left,d.top);var k=m.vScrollInstance;if(p!=null)if(m.allowDrop&&!m.disabled){b._dragOverItem=p;if(p.element){b.feedbackElement.show();var q=a(p.element).offset().top+1;if(d.top>q+p.height/2)q=q+p.height;b.feedbackElement.css("top",q);b.feedbackElement.css("left",j);if(m.vScrollBar.css("visibility")!="visible")b.feedbackElement.width(a(this).width());
else b.feedbackElement.width(a(this).width()-20)}}if(g.left>=j&&g.left<o)if(e.position.top<n&&e.position.top>=n-30){clearInterval(m._autoScrollTimer);if(k.value!=0)b.feedbackElement.hide();m._autoScrollTimer=setInterval(function(){var r=m.scrollUp();if(!r)clearInterval(m._autoScrollTimer)},100)}else if(e.position.top>h&&e.position.top<h+30){clearInterval(m._autoScrollTimer);if(m.vScrollBar.css("visibility")!="hidden"&&k.value!=k.max)b.feedbackElement.hide();m._autoScrollTimer=setInterval(function(){var r=
m.scrollDown();if(!r)clearInterval(m._autoScrollTimer)},100)}else clearInterval(m._autoScrollTimer);else{if(b._dragOverItem==null)b.feedbackElement.hide();clearInterval(m._autoScrollTimer)}})})},_handleDragEnd:function(c,b){var d=a.find(".jqx-listbox");c.unbind("dragEnd");c.bind("dragEnd",function(f){clearInterval(b._autoScrollTimer);var k=f.args.position;var g=a.find(".jqx-listbox");var h=null;b.feedbackElement.remove();if(b._dragCancel)return;a.each(g,function(){var v=parseInt(a(this).offset().left);
var t=v+a(this).width();var w=a.data(this,"jqxListBox").instance;clearInterval(w._autoScrollTimer);if(w._enableHover!=undefined){w.enableHover=w._enableHover;a.jqx.mobile.setTouchScroll(true,b.element.id)}if(b._dragItem!=null)if(k.left+b._dragItem.width/2>=v&&k.left<t){var u=parseInt(a(this).offset().top);var s=u+a(this).height();if(k.top>=u&&k.top<=s)h=a(this)}});var r=b._dragItem;if(h!=null&&h.length>0){var n=a.data(h[0],"jqxListBox").instance;var l=n.allowDrop;if(l&&!n.disabled){var n=a.data(h[0],
"jqxListBox").instance;var o=n._hitTestBounds(n,k.left,k.top);o=b._dragOverItem;if(o!=null&&!o.isGroup){var q=true;if(b.dragEnd){q=b.dragEnd(r,o,f.args);if(q==false){a(f.args.element).jqxDragDrop({triggerEvents:false});a(f.args.element).jqxDragDrop("cancelDrag");clearInterval(b._autoScrollTimer);a(f.args.element).jqxDragDrop({triggerEvents:true});if(f.preventDefault)f.preventDefault();if(f.stopPropagation)f.stopPropagation();return false}if(q==undefined)q=true}if(q){var e=o.index;var j=function(){var t=
o.index;for(var s=t-2;s<=t+2;s++)if(n.items&&n.items.length>s){var u=n.items[s];if(u!=null)if(u.label==r.label&&u.value==r.value)return s}return t};if(n.dropAction!="none"){var p=a(o.element).offset().top+1;n.content.find(".draggable").jqxDragDrop("destroy");if(k.top>p+o.height/2)n.insertAt(b._dragItem,o.index+1);else n.insertAt(b._dragItem,o.index);if(b.dropAction=="default"){if(r.index>0)b.selectIndex(r.index-1);b.removeItem(r)}var m=j();n.selectIndex(m)}}}else if(n.dropAction!="none"){n.content.find(".draggable").jqxDragDrop("destroy");
n.addItem(b._dragItem);if(n.dropAction=="default"){if(r.index>0)b.selectIndex(r.index-1);b.removeItem(r)}n.selectIndex(0)}}}else if(b.dragEnd){var i=b.dragEnd(r,f.args);if(false==i){if(f.preventDefault)f.preventDefault();if(f.stopPropagation)f.stopPropagation();return false}}if(r!=null)b._raiseEvent(5,{label:r.label,value:r.value,originalEvent:f.args});return false})},_enableDragDrop:function(){if(this.allowDrag&&this.host.jqxDragDrop){var c=this.content.find(".draggable");if(c.length>0){c.jqxDragDrop({cursor:"arrow",
revertDuration:0,appendTo:"body",dragZIndex:99999,revert:true});this._autoScrollTimer=null;var b=this;b._dragItem=null;b._handleDragStart(c,b);b._handleDragging(c,b);b._handleDragEnd(c,b)}}},_getMouseCoordinates:function(b){this._isTouchDevice=a.jqx.mobile.isTouchDevice();if(this._isTouchDevice)return{left:b.args.originalEvent.touches[0].pageX,top:b.args.originalEvent.touches[0].pageY};else return{left:b.args.pageX,top:b.args.pageY}}})};jqxTreeDragDrop=function(){a.extend(a.jqx._jqxTree.prototype,
{_syncItems:function(c){this._visibleItems=new Array;var b=this;a.each(c,function(){var e=a(this);if(e.css("display")!="none"){var d=e.outerHeight();if(e.height()>0){var f=parseInt(e.offset().top);b._visibleItems[b._visibleItems.length]={element:this,top:f,height:d,bottom:f+d}}}})},_hitTestBounds:function(b,g,f){var d=this;var e=null;if(b._visibleItems){var c=parseInt(b.host.offset().left);var h=b.host.outerWidth();a.each(b._visibleItems,function(j){if(g>=c&&g<c+h)if(this.top+5<f&&f<this.top+this.height){var i=
a(this.element).parents("li:first");if(i.length>0){e=b.getItem(i[0]);if(e!=null){e.height=this.height;e.top=this.top;return false}}}})}return e},_handleDragStart:function(d,c){if(c._dragOverItem)c._dragOverItem.titleElement.removeClass(c.toThemeProperty("jqx-fill-state-hover"));var b=a.jqx.mobile.isTouchDevice();if(b)if(c.allowDrag)d.bind("touchstart",function(){a.jqx.mobile.setTouchScroll(false,"panel"+c.element.id)});d.unbind("dragStart");d.bind("dragStart",function(g){c.feedbackElement=a("<div style='z-index: 99999; position: absolute;'></div>");
c.feedbackElement.addClass(c.toThemeProperty("jqx-listbox-feedback"));c.feedbackElement.appendTo(a(document.body));c.feedbackElement.hide();c._dragCancel=false;var e=g.args.position;var f=a.find(".jqx-tree");c._trees=f;a.each(f,function(){var j=a.data(this,"jqxTree").instance;var l=j.host.find(".draggable");j._syncItems(l);if(j.allowDrag&&!j.disabled){var i=a(g.target).parents("li:first");if(i.length>0){var k=j.getItem(i[0]);if(k){c._dragItem=k;if(j.dragStart){var h=j.dragStart(k);if(h==false){c._dragCancel=
true;a(g.args.element).jqxDragDrop({triggerEvents:false});a(g.args.element).jqxDragDrop("cancelDrag");clearInterval(c._autoScrollTimer);a(g.args.element).jqxDragDrop({triggerEvents:j});return false}}j._raiseEvent(8,{label:k.label,value:k.value,originalEvent:g.args})}}}});return false})},_getMouseCoordinates:function(b){this._isTouchDevice=a.jqx.mobile.isTouchDevice();if(this._isTouchDevice)return{left:b.args.originalEvent.touches[0].pageX,top:b.args.originalEvent.touches[0].pageY};else return{left:b.args.pageX,
top:b.args.pageY}},_handleDragging:function(c,b){var c=this.host.find(".draggable");c.unbind("dragging");c.bind("dragging",function(h){var f=h.args;var d=f.position;var e=b._trees;if(b._dragCancel)return;if(b._dragOverItem)b._dragOverItem.titleElement.removeClass(b.toThemeProperty("jqx-fill-state-hover"));var i=true;var g=b._getMouseCoordinates(h);b._lastDraggingPosition=g;a.each(e,function(){var m=a(this).offset();var q=m.top+20;var j=a(this).height()+q-40;var l=m.left;var k=a(this).width();var r=
l+k;var p=a.data(this,"jqxTree").instance;if(p.disabled||!p.allowDrop)return;var n=p.vScrollInstance;var s=p._hitTestBounds(p,g.left,g.top);if(s!=null){if(b._dragOverItem)b._dragOverItem.titleElement.removeClass(p.toThemeProperty("jqx-fill-state-hover"));b._dragOverItem=s;if(s.element){b.feedbackElement.show();var t=s.top;var o=g.top;b._dropPosition="before";if(o>t+s.height/3){t=s.top+s.height/2;b._dragOverItem.titleElement.addClass(b.toThemeProperty("jqx-fill-state-hover"));b.feedbackElement.hide();
b._dropPosition="inside"}if(o>s.top+s.height-s.height/3){t=s.top+s.height;b._dragOverItem.titleElement.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b.feedbackElement.show();b._dropPosition="after"}b.feedbackElement.css("top",t);var l=-2+parseInt(s.titleElement.offset().left);b.feedbackElement.css("left",l);b.feedbackElement.width(a(s.titleElement).width()+12)}}if(g.left>=l&&g.left<r){if(g.top+20>=q&&g.top<=q+p.host.height())i=false;if(g.top<q&&g.top>=q-30){clearInterval(p._autoScrollTimer);
if(n.value!=0)b.feedbackElement.hide();p._autoScrollTimer=setInterval(function(){var v=p.panelInstance.scrollUp();var u=p.host.find(".draggable");p._syncItems(u);if(!v)clearInterval(p._autoScrollTimer)},100)}else if(g.top>j&&g.top<j+30){clearInterval(p._autoScrollTimer);if(n.value!=n.max)b.feedbackElement.hide();p._autoScrollTimer=setInterval(function(){var v=p.panelInstance.scrollDown();var u=p.host.find(".draggable");p._syncItems(u);if(!v)clearInterval(p._autoScrollTimer)},100)}else clearInterval(p._autoScrollTimer)}else clearInterval(p._autoScrollTimer)});
if(i)if(b.feedbackElement)b.feedbackElement.hide()})},_handleDragEnd:function(c,b){c.unbind("dragEnd");c.bind("dragEnd",function(f){var d=b.host.find(".draggable");clearInterval(b._autoScrollTimer);var k=f.args.position;var s=b._trees;var t=null;var n=a.jqx.mobile.isTouchDevice();var g=n?b._lastDraggingPosition:b._getMouseCoordinates(f);b.feedbackElement.remove();if(b._dragCancel)return false;if(b._dragOverItem)b._dragOverItem.titleElement.removeClass(b.toThemeProperty("jqx-fill-state-hover"));a.each(s,
function(){var y=parseInt(a(this).offset().left);var w=y+a(this).width();var v=a.data(this,"jqxTree").instance;clearInterval(v._autoScrollTimer);if(b._dragItem!=null)if(g.left>=y&&g.left<w){var x=parseInt(a(this).offset().top);var u=x+a(this).height();if(g.top>=x&&g.top<=u)t=a(this)}});var r=b._dragItem;if(t!=null&&t.length>0){var l=t.jqxTree("allowDrop");if(l){var m=a.data(t[0],"jqxTree").instance;var o=b._dragOverItem;if(o!=null&&b._dragOverItem.treeInstance.element.id==m.element.id){var q=true;
if(b.dragEnd){q=b.dragEnd(r,o,f.args,b._dropPosition,t);if(q==false){a(f.args.element).jqxDragDrop({triggerEvents:false});a(f.args.element).jqxDragDrop("cancelDrag");clearInterval(b._autoScrollTimer);a(f.args.element).jqxDragDrop({triggerEvents:true})}if(undefined==q)q=true}if(q){var e=function(){var u=b._dragItem.treeInstance;u._refreshMapping();u._updateItemsNavigation();u._render();if(u.checkboxes)u._updateCheckStates();b._dragItem.treeInstance=m;b._syncItems(b._dragItem.treeInstance.host.find(".draggable"))};
if(m.dropAction!="none")if(b._dragItem.id!=b._dragOverItem.id)if(b._dropPosition=="inside"){m._drop(b._dragItem.element,b._dragOverItem.element,-1,m);e()}else{var i=0;if(b._dropPosition=="after")i++;m._drop(b._dragItem.element,b._dragOverItem.parentElement,i+a(b._dragOverItem.element).index(),m);e()}m._render();var p=m.host.find(".draggable");b._syncItems(p);b._dragOverItem=null;b._dragItem=null;m._refreshMapping();m._updateItemsNavigation();m.selectedItem=null;m.selectItem(r.element);if(m.checkboxes)m._updateCheckStates()}}else if(m.dropAction!=
"none")if(m.allowDrop){b._dragItem.parentElement=null;m._drop(b._dragItem.element,null,-1,m);var h=b._dragItem.treeInstance;h._refreshMapping();h._updateItemsNavigation();if(h.checkboxes)h._updateCheckStates();var p=h.host.find(".draggable");b._syncItems(p);b._dragItem.treeInstance=m;m.items[m.items.length]=b._dragItem;m._render();m.selectItem(r.element);m._refreshMapping();m._updateItemsNavigation();var p=m.host.find(".draggable");m._syncItems(p);if(m.checkboxes)m._updateCheckStates();b._dragOverItem=
null;b._dragItem=null}}}else if(b.dragEnd){var j=b.dragEnd(r,f.args);if(false==j)return false}if(r!=null)b._raiseEvent(7,{label:r.label,value:r.value,originalEvent:f.args});return false})},_drop:function(f,b,e,c){if(a(b).parents("#"+f.id).length>0)return;if(b!=null)if(b.id==f.id)return;var h=this;if(c.element.innerHTML.indexOf("UL"))var i=c.host.find("ul:first");if(b==undefined&&b==null)if(e==undefined||e==-1)i.append(f);else if(i.children("li").eq(e).length==0)i.children("li").eq(e-1).after(f);else{if(i.children("li").eq(e)[0].id!=
f.id)i.children("li").eq(e).before(f)}else if(e==undefined||e==-1){b=a(b);var d=b.find("ul:first");if(d.length==0){ulElement=a("<ul></ul>");a(b).append(ulElement);d=b.find("ul:first");var g=c.itemMapping["id"+b[0].id].item;g.subtreeElement=d[0];g.hasItems=true;d.addClass(c.toThemeProperty("jqx-tree-dropdown"));d.append(f);f=d.find("li:first");g.parentElement=f}else d.append(f)}else{b=a(b);var d=b.find("ul:first");if(d.length==0){ulElement=a("<ul></ul>");a(b).append(ulElement);d=b.find("ul:first");
if(b){var g=c.itemMapping["id"+b[0].id].item;g.subtreeElement=d[0];g.hasItems=true}d.addClass(c.toThemeProperty("jqx-tree-dropdown"));d.append(f);f=d.find("li:first");g.parentElement=f}else if(d.children("li").eq(e).length==0)d.children("li").eq(e-1).after(f);else if(d.children("li").eq(e)[0].id!=f.id)d.children("li").eq(e).before(f)}},_enableDragDrop:function(){if(this.allowDrag&&this.host.jqxDragDrop){var d=this.host.find(".draggable");var c=this;if(d.length>0){d.jqxDragDrop({cursor:"arrow",revertDuration:0,
appendTo:"body",dragZIndex:99999,revert:true,initFeedback:function(e){var g=a('<span style="white-space: nowrap;" class="'+c.toThemeProperty("jqx-fill-state-normal")+'">'+e.text()+"</span>");a(document.body).append(g);var f=g.width();g.remove();e.width(f+5);e.addClass(c.toThemeProperty("jqx-fill-state-pressed"))}});var b=d.jqxDragDrop("isDestroyed");if(b)d.jqxDragDrop("_createDragDrop");this._autoScrollTimer=null;c._dragItem=null;c._handleDragStart(d,c);c._handleDragging(d,c);c._handleDragEnd(d,c)}}}})}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxComboBox","",{});a.extend(a.jqx._jqxComboBox.prototype,{defineInstance:function(){this.disabled=false;this.width=null;this.height=null;this.items=new Array;this.selectedIndex=-1;this.source=null;this.scrollBarSize=15;this.arrowSize=18;this.enableHover=true;this.enableSelection=true;this.visualItems=new Array;this.groups=new Array;this.equalItemsWidth=true;this.itemHeight=-1;this.visibleItems=new Array;this.emptyGroupText="Group";if(this.openDelay==undefined)this.openDelay=
350;if(this.closeDelay==undefined)this.closeDelay=400;this.animationType="default";this.dropDownWidth="auto";this.dropDownHeight="200px";this.autoDropDownHeight=false;this.enableBrowserBoundsDetection=false;this.dropDownHorizontalAlignment="left";this.searchMode="startswithignorecase";this.autoComplete=false;this.remoteAutoComplete=false;this.remoteAutoCompleteDelay=500;this.minLength=2;this.displayMember="";this.valueMember="";this.keyboardSelection=true;this.renderer=null;this.autoOpen=false;this.checkboxes=
false;this.promptText="";this.events=["open","close","select","unselect","change","checkChange"]},createInstance:function(b){this.render()},render:function(){this.isanimating=false;this.element.innerHTML="";var f=a("<div tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-left: none; border-top: none; border-bottom: none; float: left; position: absolute;'/><div id='dropdownlistArrow' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'/></div></div>");
this.comboStructure=f;if(a.jqx._jqxListBox==null||a.jqx._jqxListBox==undefined)throw"jqxListBox is not loaded.";this.touch=a.jqx.mobile.isTouchDevice();this.host.append(f);this.dropdownlistWrapper=this.host.find("#dropdownlistWrapper");this.dropdownlistArrow=this.host.find("#dropdownlistArrow");this.dropdownlistContent=this.host.find("#dropdownlistContent");this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content"));this.dropdownlistContent.addClass(this.toThemeProperty("jqx-widget-content"));
this.dropdownlistWrapper[0].id="dropdownlistWrapper"+this.element.id;this.dropdownlistArrow[0].id="dropdownlistArrow"+this.element.id;this.dropdownlistContent[0].id="dropdownlistContent"+this.element.id;this.dropdownlistContent.append(a('<input autocomplete="off" style="margin: 0; padding: 0; border: 0;" type="textarea"/>'));this.input=this.dropdownlistContent.find("input");this.input.addClass(this.toThemeProperty("jqx-combobox-input"));this.input.addClass(this.toThemeProperty("jqx-widget-content"));
var b=this.host.attr("name");if(!b)b=this.element.id;this.input.attr("name",b);try{var k="listBox"+this.element.id;var g=a(a.find("#"+k));if(g.length>0)g.remove();var c=a("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+this.element.id+"'><div id='innerListBox"+this.element.id+"'></div></div>");c.hide();c.appendTo(document.body);this.container=c;this.listBoxContainer=a(a.find("#innerListBox"+this.element.id));var d=this.width;if(this.dropDownWidth!=
"auto")d=this.dropDownWidth;if(this.dropDownHeight==null)this.dropDownHeight=200;var i=this;this.container.width(parseInt(d)+25);this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.jqxListBox({checkboxes:this.checkboxes,renderer:this.renderer,itemHeight:this.itemHeight,incrementalSearch:false,width:d,scrollBarSize:this.scrollBarSize,autoHeight:this.autoDropDownHeight,height:this.dropDownHeight,displayMember:this.displayMember,valueMember:this.valueMember,source:this.source,
theme:this.theme,rendered:function(){i.listBox=a.data(i.listBoxContainer[0],"jqxListBox").instance;i.listBoxContainer.jqxListBox("selectIndex",i.selectedIndex);i.renderSelection("mouse");if(i.remoteAutoComplete){i.container.height(i.listBox.virtualSize.height+25);i.listBoxContainer.height(i.listBox.virtualSize.height);if(i.searchString!=undefined){var e=i.listBoxContainer.jqxListBox("items");if(e)if(e.length>0){if(!i.isOpened())i.open()}else i.close();else i.close()}}if(i.rendered)i.rendered()}});
this.listBoxContainer.css({position:"absolute",zIndex:1E5,top:0,left:0});this.listBoxContainer.css("border-top-width","1px");this.listBox=a.data(this.listBoxContainer[0],"jqxListBox").instance;this.listBox.enableSelection=this.enableSelection;this.listBox.enableHover=this.enableHover;this.listBox.equalItemsWidth=this.equalItemsWidth;this.listBox.selectIndex(this.selectedIndex);this.listBox._arrange();this.addHandler(this.host,"loadContent",function(e){i._arrange()});this.addHandler(this.listBoxContainer,
"unselect",function(e){i._raiseEvent("3",{index:e.args.index,type:e.args.type,item:e.args.item})});this.addHandler(this.listBoxContainer,"change",function(e){i._raiseEvent("4",{index:e.args.index,type:e.args.type,item:e.args.item})});if(this.animationType=="none")this.container.css("display","none");else this.container.hide()}catch(h){}var l=this;l.input.attr("disabled",l.disabled);this.propertyChangeMap.disabled=function(e,n,m,o){if(o){e.host.addClass(l.toThemeProperty("jqx-combobox-state-disabled"));
e.host.addClass(l.toThemeProperty("jqx-fill-state-disabled"));e.dropdownlistContent.addClass(l.toThemeProperty("jqx-combobox-content-disabled"))}else{e.host.removeClass(l.toThemeProperty("jqx-combobox-state-disabled"));e.host.removeClass(l.toThemeProperty("jqx-fill-state-disabled"));e.dropdownlistContent.removeClass(l.toThemeProperty("jqx-combobox-content-disabled"))}e.input.attr("disabled",l.disabled)};if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-combobox-state-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));
this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-disabled"))}this.host.addClass(this.toThemeProperty("jqx-combobox-state-normal"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.dropdownlistArrowIcon=a("<div></div>");this.dropdownlistArrowIcon.addClass(this.toThemeProperty("icon-arrow-down"));this.dropdownlistArrowIcon.addClass(this.toThemeProperty("icon"));
this.dropdownlistArrow.append(this.dropdownlistArrowIcon);this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-normal"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-r"));this._setSize();this._updateHandlers();this.addHandler(this.input,"keyup.textchange",function(e){var m=i._search(e)});if(a.browser.msie&&a.browser.version<8)if(this.host.parents(".jqx-window").length>0){var j=this.host.parents(".jqx-window").css("z-index");
c.css("z-index",j+10);this.listBoxContainer.css("z-index",j+10)}if(this.checkboxes)this.input.attr("readonly",true)},_search:function(e){if(e.keyCode==9)return;if(this.searchMode=="none"||this.searchMode==null||this.searchMode=="undefined")return;if(e.keyCode==16||e.keyCode==17||e.keyCode==20)return false;if(!this.isanimating){if(e.altKey&&e.keyCode==38){this.hideListBox();return false}if(e.altKey&&e.keyCode==40){if(!this.isOpened())this.showListBox();return false}}if(e.keyCode==37||e.keyCode==39)return false;
if(e.altKey||e.keyCode==18)return;if(e.keyCode>=33&&e.keyCode<=40)return;var g=this.input.val();if(g.length==0&&!this.autoComplete){this.hideListBox();this.listBox.selectIndex(-1,true);return}if(this.remoteAutoComplete){var d=this;var b=function(){d.listBox.vScrollInstance.value=0;d.selectedIndex=-1;d.listBox.selectedIndex=-1;d.listBox.clearSelection()};if(g.length>=d.minLength){if(!e.ctrlKey&&!e.shiftKey&&!e.altKey){if(d.searchString!=g){if(this._searchTimer)clearTimeout(this._searchTimer);if(e.keyCode!=
13&&e.keyCode!=27)this._searchTimer=setTimeout(function(){b();d.listBox.autoHeight=true;d.searchString=d.input.val();d.search(d.input.val())},this.remoteAutoCompleteDelay)}d.searchString=g}}else{if(this._searchTimer)clearTimeout(this._searchTimer);b();d.searchString=d.input.val();d.listBoxContainer.jqxListBox({source:null})}return}var d=this;var f=this._getMatches(g);var h=f.matchItems;var c=f.index;if(d.autoComplete){if(h.length>0||g==""){this.listBox.vScrollInstance.value=0;this.listBox._addItems();
this.listBox.autoHeight=false;if(this.listBox.virtualSize.height<parseInt(this.dropDownHeight)){this.listBox.autoHeight=true;this.container.height(this.listBox.virtualSize.height+25);this.listBoxContainer.height(this.listBox.virtualSize.height);this.listBox._arrange()}else{this.listBox.height=this.dropDownHeight;this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.height(parseInt(this.dropDownHeight));this.listBox._arrange()}this.listBox._addItems();this.listBox._renderItems();
c=0}else c=-1;if(c==-1)this.hideListBox()}if(e.keyCode=="13")return;else if(e.keyCode=="27"){if(this.tempSelectedIndex!=undefined){this.listBox.selectIndex(this.tempSelectedIndex,true);this.renderSelection("mouse")}this.hideListBox();e.preventDefault();return false}else if(c>-1){if(!this.isOpened()&&!this.opening){this.tempSelectedIndex=this.listBox.selectedIndex;this.showListBox()}this.listBox.selectIndex(c,true)}else if(c==-1)this.listBox.selectIndex(c,true)},setContent:function(b){this.input.val(b)},
_getMatches:function(f){var b=this.getItems();if(b==undefined)return{index:-1,mathItem:new Array};var e=this;var c=-1;var g=new Array;var d=0;a.each(b,function(h){var k="";if(!this.isGroup){if(this.label)k=this.label;else if(this.value)k=this.value;else if(this.title)k=this.title;else k="jqxItem";var j=false;switch(e.searchMode){case "containsignorecase":j=a.jqx.string.containsIgnoreCase(k,f);break;case "contains":j=a.jqx.string.contains(k,f);break;case "equals":j=a.jqx.string.equals(k,f);break;case "equalsignorecase":j=
a.jqx.string.equalsIgnoreCase(k,f);break;case "startswith":j=a.jqx.string.startsWith(k,f);break;case "startswithignorecase":j=a.jqx.string.startsWithIgnoreCase(k,f);break;case "endswith":j=a.jqx.string.endsWith(k,f);break;case "endswithignorecase":j=a.jqx.string.endsWithIgnoreCase(k,f);break}if(e.autoComplete&&!j)this.visible=false;if(j&&e.autoComplete){g[d++]=this;this.visible=true}if(f==""&&e.autoComplete){this.visible=true;j=false}if(j&&!e.autoComplete){c=this.visibleIndex;return false}}});return{index:c,
matchItems:g}},findItems:function(e){var b=this.getItems();var d=this;var c=0;var f=new Array;a.each(b,function(g){var j="";if(!this.isGroup){if(this.label)j=this.label;else if(this.value)j=this.value;else if(this.title)j=this.title;else j="jqxItem";var h=false;switch(d.searchMode){case "containsignorecase":h=a.jqx.string.containsIgnoreCase(j,e);break;case "contains":h=a.jqx.string.contains(j,e);break;case "equals":h=a.jqx.string.equals(j,e);break;case "equalsignorecase":h=a.jqx.string.equalsIgnoreCase(j,
e);break;case "startswith":h=a.jqx.string.startsWith(j,e);break;case "startswithignorecase":h=a.jqx.string.startsWithIgnoreCase(j,e);break;case "endswith":h=a.jqx.string.endsWith(j,e);break;case "endswithignorecase":h=a.jqx.string.endsWithIgnoreCase(j,e);break}if(h)f[c++]=this}});return f},_resetautocomplete:function(){a.each(this.listBox.items,function(b){this.visible=true});this.listBox.vScrollInstance.value=0;this.listBox._addItems();this.listBox.autoHeight=false;this.listBox.height=this.dropDownHeight;
this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.height(parseInt(this.dropDownHeight));this.listBox._arrange();this.listBox._addItems();this.listBox._renderItems()},getItems:function(){var b=this.listBox.items;return b},_setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);
else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);var e=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){e=true;this.host.width(this.width)}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){e=true;this.host.height(this.height)}if(e){c._arrange();var c=this;var b=this.host.width();if(this.dropDownWidth!="auto")b=this.dropDownWidth;this.listBoxContainer.jqxListBox({width:b});this.container.width(parseInt(b)+25);var d=function(){c._arrange();
if(c.dropDownWidth=="auto"){var f=c.host.width();c.listBoxContainer.jqxListBox({width:f});c.container.width(parseInt(f)+25)}};a(window).unbind("resize."+this.element.id);a(window).bind("resize."+this.element.id,function(){d()})}},isOpened:function(){var c=this;var b=a.data(document.body,"openedComboJQXListBox");if(this.container.css("display")!="block")return false;if(b!=null&&b==c.listBoxContainer)return true;return false},_updateHandlers:function(){var b=this;var c=false;this.removeHandlers();if(!this.touch)this.host.hover(function(){if(!b.disabled&&
b.enableHover){c=true;b.host.addClass(b.toThemeProperty("jqx-combobox-state-hover"));b.dropdownlistArrowIcon.addClass(b.toThemeProperty("icon-arrow-down-hover"));b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-combobox-arrow-hover"));b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-fill-state-hover"))}},function(){if(!b.disabled&&b.enableHover){b.host.removeClass(b.toThemeProperty("jqx-combobox-state-hover"));b.dropdownlistArrowIcon.removeClass(b.toThemeProperty("icon-arrow-down-hover"));b.dropdownlistArrow.removeClass(b.toThemeProperty("jqx-combobox-arrow-hover"));
b.dropdownlistArrow.removeClass(b.toThemeProperty("jqx-fill-state-hover"));c=false}});if(b.autoOpen){this.addHandler(this.host,"mouseenter",function(){var e=b.isOpened();if(!e&&b.autoOpen){b.open();b.host.focus()}});a(document).bind("mousemove."+b.element.id,function(h){var g=b.isOpened();if(g&&b.autoOpen){var l=b.host.offset();var k=l.top;var j=l.left;var i=b.container.offset();var e=i.left;var f=i.top;canClose=true;if(h.pageY>=k&&h.pageY<=k+b.host.height()+2)if(h.pageX>=j&&h.pageX<j+b.host.width())canClose=
false;if(h.pageY>=f&&h.pageY<=f+b.container.height()-20)if(h.pageX>=e&&h.pageX<e+b.container.width())canClose=false;if(canClose)b.close()}})}this.addHandler(this.dropdownlistArrow,"mousedown",function(g){if(!b.disabled){var e=b.container.css("display")=="block";if(!b.isanimating)if(e)b.hideListBox();else{if(b.autoComplete)b._resetautocomplete();if(b.autoDropDownHeight){b.container.height(b.listBoxContainer.height()+25);var f=b.listBoxContainer.jqxListBox("autoHeight");if(!f){b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight});
b.listBox._arrange();b.listBox.ensureVisible(0);b.listBox._renderItems();b.container.height(b.listBoxContainer.height()+25)}}b.showListBox()}}});this.addHandler(this.input,"focus",function(){b.host.addClass(b.toThemeProperty("jqx-combobox-state-focus"));b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))});this.addHandler(this.input,"blur",function(){b.host.removeClass(b.toThemeProperty("jqx-combobox-state-focus"));b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"));if(b._searchTimer)clearTimeout(b._searchTimer)});
this.addHandler(a(document),"mousedown."+this.element.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.element.id});if(this.touch)this.addHandler(a(document),"touchstart."+this.element.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.element.id});if(document.referrer!=""||window.frameElement)if(window.top!=null){if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var d=function(e){if(b.isOpened()){var f=
{me:b,listbox:b.listBox,id:b.element.id};e.data=f}};if(window.top.document.addEventListener)window.top.document.addEventListener("mousedown",d,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmousedown",d)}}this.addHandler(this.host,"keydown",function(g){var f=b.container.css("display")=="block";if(b.host.css("display")=="none")return true;if(g.keyCode=="13")if(f&&!b.isanimating){b.renderSelection("mouse");b.hideListBox();if(!b.keyboardSelection)b._raiseEvent("2",
{index:b.selectedIndex,type:"keyboard",item:b.getItem(b.selectedIndex)});else if(b.autoComplete)b._raiseEvent("2",{index:b.selectedIndex,type:"keyboard",item:b.listBox.getVisibleItem(b.selectedIndex)});return false}else if(!f)b.showListBox();if(g.keyCode==115){if(!b.isanimating)if(!b.isOpened())b.showListBox();else if(b.isOpened())b.hideListBox();return false}if(g.altKey)if(b.host.css("display")=="block")if(!b.isanimating)if(g.keyCode==38){if(b.isOpened())b.hideListBox()}else if(g.keyCode==40)if(!b.isOpened())b.showListBox();
if(g.keyCode=="27"){if(b.tempSelectedIndex!=undefined)b.selectIndex(b.tempSelectedIndex);b.hideListBox();g.preventDefault();return false}if(f&&!b.disabled)return b.listBox._handleKeyDown(g);else if(!b.disabled&&!f){var e=g.keyCode;if(e==33||e==34||e==35||e==36||e==38||e==40)return b.listBox._handleKeyDown(g)}});this.addHandler(this.listBoxContainer,"checkChange",function(e){b.renderSelection("mouse");b._raiseEvent(5,{label:e.args.label,value:e.args.value,checked:e.args.checked,item:e.args.item})});
this.addHandler(this.listBoxContainer,"select",function(e){if(!b.disabled)if(e.args.type!="keyboard"||b.keyboardSelection){b.renderSelection(e.args.type);b._raiseEvent("2",{index:e.args.index,type:e.args.type,item:e.args.item});if(e.args.type=="mouse")if(!b.checkboxes)b.hideListBox()}});if(this.listBox!=null&&this.listBox.content!=null)this.addHandler(this.listBox.content,"click",function(e){if(!b.disabled){b.renderSelection("mouse");if(!b.touch&&!b.ishiding)if(!b.checkboxes)b.hideListBox()}})},removeHandlers:function(){var b=
this;this.removeHandler(this.dropdownlistWrapper,"mousedown");this.removeHandler(this.host,"keydown");this.host.unbind("hover");this.removeHandler(this.input,"focus");this.removeHandler(this.input,"blur");this.removeHandler(this.host,"mouseenter");a(document).unbind("mousemove."+b.element.id)},getItem:function(b){var c=this.listBox.getItem(b);return c},renderSelection:function(h){if(h==undefined||h=="none")return;if(this.listBox==null)return;var j=this.listBox.visibleItems[this.listBox.selectedIndex];
if(this.checkboxes){var e=this.getCheckedItems();if(e!=null&&e.length>0)j=e[0];else j=null}if(j==null){if(!this.remoteAutoComplete)this.input.val(this.promptText);return}this.selectedIndex=this.listBox.selectedIndex;var c=a("<span></span>");if(j.label!=undefined&&j.label!=null&&j.label.toString().length>0)c.html(j.label);else if(j.value!=undefined&&j.value!=null&&j.value.toString().length>0)c.html(j.value);else if(j.title!=undefined&&j.title!=null&&j.title.toString().length>0)c.html(j.title);else c.html("jqxItem");
var b=c.outerHeight();if(this.checkboxes){var f=this.getCheckedItems();var g="";for(var d=0;d<f.length;d++)if(d==f.length-1)g+=f[d].label;else g+=f[d].label+",";this.input.val(g)}else this.input.val(c.text());c.remove();if(this.renderSelectedItem){var k=this.renderSelectedItem(this.listBox.selectedIndex,j);if(k!=undefined)this.input.val(k)}},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source});this.renderSelection("mouse");if(this.source==null)this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null});
this.clearSelection()},clearSelection:function(b){this.selectedIndex=-1;this.listBox.clearSelection();this.input.val("")},unselectIndex:function(b,c){if(isNaN(b))return;this.listBox.unselectIndex(b,c);this.renderSelection("mouse")},selectIndex:function(b,d,e,c){this.listBox.selectIndex(b,d,e,c);this.renderSelection("mouse");this.selectedIndex=b},getSelectedIndex:function(){return this.selectedIndex},getSelectedItem:function(){return this.getItem(this.selectedIndex)},getCheckedItems:function(){return this.listBox.getCheckedItems()},
checkIndex:function(b){this.listBox.checkIndex(b)},uncheckIndex:function(b){this.listBox.uncheckIndex(b)},indeterminateIndex:function(b){this.listBox.indeterminateIndex(b)},getItemByValue:function(value){this.listBox.getItemByValue(value)},checkAll:function(){this.listBox.checkAll()},uncheckAll:function(){this.listBox.uncheckAll()},insertAt:function(c,b){if(c==null)return false;return this.listBox.insertAt(c,b)},addItem:function(b){return this.listBox.addItem(b)},removeAt:function(c){var b=this.listBox.removeAt(c);
this.renderSelection("mouse");return b},ensureVisible:function(b){this.listBox.ensureVisible(b)},disableAt:function(b){this.listBox.disableAt(b)},enableAt:function(b){this.listBox.enableAt(b)},_findPos:function(c){while(c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c)))c=c.nextSibling;var b=a(c).offset();return[b.left,b.top]},testOffset:function(h,f,c){var g=h.outerWidth();var j=h.outerHeight();var i=a(window).width()+a(window).scrollLeft();var e=a(window).height()+a(window).scrollTop();
if(f.left+g>i)if(g>this.host.width()){var d=this.host.offset().left;var b=g-this.host.width();f.left=d-b+2}if(f.left<0)f.left=parseInt(this.host.offset().left)+"px";f.top-=Math.min(f.top,f.top+j>e&&e>j?Math.abs(j+c+23):0);return f},open:function(){this.showListBox()},close:function(){this.hideListBox()},hide:function(){this.close()},show:function(){this.open()},showListBox:function(){if(this.listBox.items&&this.listBox.items.length==0)return;var o=this;var d=this.listBoxContainer;var i=this.listBox;
var l=a(window).scrollTop();var g=a(window).scrollLeft();var j=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())+"px";var f=parseInt(this.host.offset().left)+"px";if(a.browser.mozilla);if(!this.keyboardSelection){this.listBox.selectIndex(this.selectedIndex);this.listBox.ensureVisible(this.selectedIndex)}this.tempSelectedIndex=this.selectedIndex;var n=a.jqx.mobile.isSafariMobileBrowser();this.ishiding=false;var c=a.jqx.utilities.hasTransform(this.host);if(c||n!=null&&n){f=
a.jqx.mobile.getLeftPos(this.element);j=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight())}this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected"));this.dropdownlistArrowIcon.addClass(this.toThemeProperty("icon-arrow-down-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.container.css("left",f);this.container.css("top",j);i._arrange();
var e=true;var p=false;if(this.dropDownHorizontalAlignment=="right"){var k=this.container.width();var b=Math.abs(k-this.host.width());if(k>this.host.width())this.container.css("left",25+parseInt(f)-b+"px");else this.container.css("left",25+parseInt(f)+b+"px")}if(this.enableBrowserBoundsDetection){var h=this.testOffset(d,{left:parseInt(this.container.css("left")),top:parseInt(j)},parseInt(this.host.outerHeight()));if(parseInt(this.container.css("top"))!=h.top){p=true;d.css("top",23)}else d.css("top",
0);this.container.css("top",h.top);this.container.css("top",h.top);if(parseInt(this.container.css("left"))!=h.left)this.container.css("left",h.left)}if(this.animationType=="none"){this.container.css("display","block");a.data(document.body,"openedComboJQXListBoxParent",o);a.data(document.body,"openedComboJQXListBox",d);d.css("margin-top",0);d.css("opacity",1)}else{this.container.css("display","block");var m=d.outerHeight();d.stop();if(this.animationType=="fade"){d.css("margin-top",0);d.css("opacity",
0);d.animate({opacity:1},this.openDelay,function(){o.isanimating=false;o.opening=false;a.data(document.body,"openedComboJQXListBoxParent",o);a.data(document.body,"openedComboJQXListBox",d)})}else{d.css("opacity",1);if(p)d.css("margin-top",m);else d.css("margin-top",-m);this.isanimating=true;this.opening=true;d.animate({"margin-top":0},this.openDelay,function(){o.isanimating=false;o.opening=false;a.data(document.body,"openedComboJQXListBoxParent",o);a.data(document.body,"openedComboJQXListBox",d)})}}i._renderItems();
this._raiseEvent("0",i)},hideListBox:function(){var f=this.listBoxContainer;var g=this.listBox;var c=this.container;if(this.container.css("display")=="none")return;this.tempSelectedIndex=undefined;var d=this;a.data(document.body,"openedComboJQXListBox",null);if(this.animationType=="none")this.container.css("display","none");else if(!this.ishiding){var b=f.outerHeight();f.css("margin-top",0);f.stop();this.isanimating=true;var e=-b;if(parseInt(this.container.offset().top)<parseInt(this.host.offset().top))e=
b;if(this.animationType=="fade"){f.css({opacity:1});f.animate({opacity:0},this.closeDelay,function(){d.isanimating=false;c.css("display","none");d.ishiding=false})}else f.animate({"margin-top":e},this.closeDelay,function(){d.isanimating=false;c.css("display","none");d.ishiding=false})}this.ishiding=true;this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected"));this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("icon-arrow-down-selected"));this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected"));
this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._raiseEvent("1",g)},closeOpenedListBox:function(e){var d=e.data.me;var b=a(e.target);var c=e.data.listbox;if(c==null)return true;if(a(e.target).ischildof(e.data.me.host))return;var f=d;var g=false;a.each(b.parents(),function(){if(this.className!="undefined")if(this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1){g=true;return false}if(this.className.indexOf("jqx-combobox")!=-1){if(d.element.id==
this.id)g=true;return false}}});if(c!=null&&!g){if(!d.touch)if(d.tempSelectedIndex!=undefined){d.listBox.selectIndex(d.tempSelectedIndex,true);d.renderSelection("mouse")}d.hideListBox()}return true},loadFromSelect:function(b){this.listBox.loadFromSelect(b)},refresh:function(b){this._setSize();this._arrange();if(this.listBox)this.renderSelection()},_arrange:function(){var f=parseInt(this.host.width());var b=parseInt(this.host.height());var e=this.arrowSize;var d=this.arrowSize;var h=1;var c=f-d-1*
h;if(c>0)this.dropdownlistContent.width(c+"px");this.dropdownlistContent.height(b);this.dropdownlistContent.css("left",0);this.dropdownlistContent.css("top",0);this.dropdownlistArrow.width(d);this.dropdownlistArrow.height(b);this.dropdownlistArrow.css("left",1+c+"px");this.input.css("width","100%");this.input.addClass(this.toThemeProperty("jqx-rc-all"));var g=parseInt(b)/2-parseInt(this.input.height())/2;if(g>0)this.input.css("margin-top",g)},destroy:function(){this.listBoxContainer.remove();this.host.removeClass();
this.removeHandler(a(document),"mousedown."+this.element.id,self.closeOpenedListBox)},_raiseEvent:function(f,c){if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);e.owner=this;if(f==2||f==3||f==4||f==5)e.args=c;var b=this.host.trigger(e);return b},propertyChangedHandler:function(b,c,f,e){if(b.isInitialized==undefined||b.isInitialized==false)return;if(c=="autoOpen")b._updateHandlers();if(c=="renderer")b.listBox.renderer=b.renderer;if(c=="itemHeight")b.listBox.itemHeight=
e;if(c=="source"){b.input.val("");b.listBoxContainer.jqxListBox({source:b.source});b.renderSelection("mouse");if(b.source==null)b.clearSelection()}if(c=="displayMember"||c=="valueMember"){b.listBoxContainer.jqxListBox({displayMember:b.displayMember,valueMember:b.valueMember});b.renderSelection("mouse")}if(c=="autoDropDownHeight"){b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight});if(b.autoDropDownHeight)b.container.height(b.listBoxContainer.height()+25);else{b.listBoxContainer.jqxListBox({height:b.dropDownHeight});
b.container.height(parseInt(b.dropDownHeight)+25)}}if(c=="dropDownHeight")if(!b.autoDropDownHeight){b.listBoxContainer.jqxListBox({height:b.dropDownHeight});b.container.height(parseInt(b.dropDownHeight)+25)}if(c=="dropDownWidth"||c=="scrollBarSize"){var d=b.width;if(b.dropDownWidth!="auto")d=b.dropDownWidth;b.listBoxContainer.jqxListBox({width:d,scrollBarSize:b.scrollBarSize});b.container.width(parseInt(d)+25)}if(c=="autoComplete")b._resetautocomplete();if(c=="checkboxes"){b.listBoxContainer.jqxListBox({checkboxes:b.checkboxes});
if(b.checkboxes)b.input.attr("readonly",true)}if(c=="theme"&&e!=null){b.listBoxContainer.jqxListBox({theme:e});b.dropdownlistContent.removeClass();b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content"));b.dropdownlistContent.addClass(b.toThemeProperty("jqx-widget-content"));b.input.removeClass();b.input.addClass(b.toThemeProperty("jqx-combobox-input"));b.input.addClass(this.toThemeProperty("jqx-widget-content"));b.host.removeClass();b.host.addClass(b.toThemeProperty("jqx-combobox-state-normal"));
b.host.addClass(b.toThemeProperty("jqx-rc-all"));b.host.addClass(b.toThemeProperty("jqx-widget"));b.host.addClass(b.toThemeProperty("jqx-widget-content"));b.dropdownlistArrow.removeClass();b.dropdownlistArrowIcon.addClass(b.toThemeProperty("icon-arrow-down"));b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-combobox-arrow-normal"));b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-fill-state-normal"))}if(c=="width"||c=="height"){b._setSize();if(c=="width")if(b.dropDownWidth=="auto"){var d=b.host.width();
b.listBoxContainer.jqxListBox({width:d});b.container.width(parseInt(d)+25)}b._arrange()}if(c=="selectedIndex"){b.listBox.selectIndex(e);b.renderSelection("mouse")}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxDropDownList","",{});a.extend(a.jqx._jqxDropDownList.prototype,{defineInstance:function(){this.disabled=false;this.width=null;this.height=null;this.items=new Array;this.selectedIndex=-1;this.source=null;this.scrollBarSize=15;this.arrowSize=19;this.enableHover=true;this.enableSelection=true;this.visualItems=new Array;this.groups=new Array;this.equalItemsWidth=true;this.itemHeight=-1;this.visibleItems=new Array;this.emptyGroupText="Group";this.checkboxes=false;if(this.openDelay==
undefined)this.openDelay=350;if(this.closeDelay==undefined)this.closeDelay=400;this.animationType="default";this.autoOpen=false;this.dropDownWidth="auto";this.dropDownHeight="200px";this.autoDropDownHeight=false;this.keyboardSelection=true;this.enableBrowserBoundsDetection=false;this.dropDownHorizontalAlignment="left";this.displayMember="";this.valueMember="";this.searchMode="startswithignorecase";this.incrementalSearch=true;this.incrementalSearchDelay=700;this.renderer=null;this.promptText="Please Choose:";
this.events=["open","close","select","unselect","change","checkChange"]},createInstance:function(b){this.render()},render:function(){this.element.innerHTML="";this.isanimating=false;var d=a("<div tabIndex=0 style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropdownlistArrow' style='background-color: transparent; border: none; float: right; position: relative;'><div></div></div></div></div>");
this._addInput();if(a.jqx._jqxListBox==null||a.jqx._jqxListBox==undefined)alert("jqxListBox is not loaded.");var h=this;this.touch=a.jqx.mobile.isTouchDevice();this.comboStructure=d;this.host.append(d);this.dropdownlistWrapper=this.host.find("#dropdownlistWrapper");this.dropdownlistArrow=this.host.find("#dropdownlistArrow");this.arrow=a(this.dropdownlistArrow.children()[0]);this.dropdownlistContent=this.host.find("#dropdownlistContent");this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content"));
this.dropdownlistWrapper.addClass(this.toThemeProperty("jqx-disableselect"));this.addHandler(this.dropdownlistWrapper,"selectstart",function(){return false});this.dropdownlistWrapper[0].id="dropdownlistWrapper"+this.element.id;this.dropdownlistArrow[0].id="dropdownlistArrow"+this.element.id;this.dropdownlistContent[0].id="dropdownlistContent"+this.element.id;var j=this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content")+" "+this.toThemeProperty("jqx-dropdownlist-state-normal")+
" "+this.toThemeProperty("jqx-rc-all")+" "+this.toThemeProperty("jqx-fill-state-normal");this.element.className+=" "+j;this._firstDiv=this.host.find("div:first");try{var k="listBox"+this.element.id;var f=a(a.find("#"+k));if(f.length>0)f.remove();var b=a("<div style='overflow: hidden; background-color: transparent; border: none; position: absolute;' id='listBox"+this.element.id+"'><div id='innerListBox"+this.element.id+"'></div></div>");b.hide();b.appendTo(document.body);this.container=b;this.listBoxContainer=
a(a.find("#innerListBox"+this.element.id));var c=this.width;if(this.dropDownWidth!="auto")c=this.dropDownWidth;if(this.dropDownHeight==null)this.dropDownHeight=200;var h=this;this.container.width(parseInt(c)+25);this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.jqxListBox({checkboxes:this.checkboxes,itemHeight:this.itemHeight,width:c,searchMode:this.searchMode,incrementalSearch:this.incrementalSearch,incrementalSearchDelay:this.incrementalSearchDelay,displayMember:this.displayMember,
valueMember:this.valueMember,height:this.dropDownHeight,autoHeight:this.autoDropDownHeight,scrollBarSize:this.scrollBarSize,selectedIndex:this.selectedIndex,source:this.source,theme:this.theme,rendered:function(){if(h.selectedIndex!=h.listBoxContainer.jqxListBox("selectedIndex")){h.listBox=a.data(h.listBoxContainer[0],"jqxListBox").instance;h.listBoxContainer.jqxListBox({selectedIndex:h.selectedIndex});h.renderSelection("mouse")}else h.renderSelection("mouse")},renderer:this.renderer});this.listBoxContainer.css({position:"absolute",
zIndex:9999999999999,top:0,left:0});this.listBox=a.data(this.listBoxContainer[0],"jqxListBox").instance;this.listBox.enableSelection=this.enableSelection;this.listBox.enableHover=this.enableHover;this.listBox.equalItemsWidth=this.equalItemsWidth;this.listBox.selectIndex(this.selectedIndex);this.listBox._arrange();this.addHandler(this.listBoxContainer,"unselect",function(e){h._raiseEvent("3",{index:e.args.index,type:e.args.type,item:e.args.item})});this.addHandler(this.listBoxContainer,"change",function(e){h._raiseEvent("4",
{index:e.args.index,type:e.args.type,item:e.args.item})});if(this.animationType=="none")this.container.css("display","none");else this.container.hide()}catch(g){}var l=this;this.propertyChangeMap.disabled=function(e,n,m,o){if(o){e.host.addClass(l.toThemeProperty("jqx-dropdownlist-state-disabled"));e.host.addClass(l.toThemeProperty("jqx-fill-state-disabled"));e.dropdownlistContent.addClass(l.toThemeProperty("jqx-dropdownlist-content-disabled"))}else{e.host.removeClass(l.toThemeProperty("jqx-dropdownlist-state-disabled"));
e.host.removeClass(l.toThemeProperty("jqx-fill-state-disabled"));e.dropdownlistContent.removeClass(l.toThemeProperty("jqx-dropdownlist-content-disabled"))}};if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled"))}this.arrow.addClass(this.toThemeProperty("icon-arrow-down"));this.arrow.addClass(this.toThemeProperty("icon"));
this._setSize();this._updateHandlers();if(a.browser.msie&&a.browser.version<8)if(this.host.parents(".jqx-window").length>0){var i=this.host.parents(".jqx-window").css("z-index");b.css("z-index",i+10);this.listBoxContainer.css("z-index",i+10)}},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;this.input=a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b)},getItems:function(){if(!this.listBox)return new Array;return this.listBox.items},_setSize:function(){if(this.width!=
null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);var e=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){e=true;this.host.width(this.width)}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){e=true;
this.host.height(this.height)}if(e){var c=this;var b=this.host.width();if(this.dropDownWidth!="auto")b=this.dropDownWidth;this.listBoxContainer.jqxListBox({width:b});this.container.width(parseInt(b)+25);var d=function(){c._arrange();if(c.dropDownWidth=="auto"){var f=c.host.width();c.listBoxContainer.jqxListBox({width:f});c.container.width(parseInt(f)+25)}};a(window).unbind("resize."+this.element.id);a(window).bind("resize."+this.element.id,function(){d()})}},isOpened:function(){var c=this;var b=a.data(document.body,
"openedJQXListBox"+this.element.id);if(b!=null&&b==c.listBoxContainer)return true;return false},_updateHandlers:function(){var b=this;var c=false;this.removeHandlers();if(!this.touch)this.host.hover(function(){if(!b.disabled&&b.enableHover){c=true;b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-hover"));b.arrow.addClass(b.toThemeProperty("icon-arrow-down-hover"));b.host.addClass(b.toThemeProperty("jqx-fill-state-hover"))}},function(){if(!b.disabled&&b.enableHover){b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-hover"));
b.host.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b.arrow.removeClass(b.toThemeProperty("icon-arrow-down-hover"));c=false}});this.addHandler(this.dropdownlistWrapper,"mousedown",function(f){if(!b.disabled){var e=b.container.css("display")=="block";if(!b.isanimating)if(e)b.hideListBox();else b.showListBox()}});if(b.autoOpen){this.addHandler(this.host,"mouseenter",function(){var e=b.isOpened();if(!e&&b.autoOpen){b.open();b.host.focus()}});a(document).bind("mousemove."+b.element.id,function(h){var g=
b.isOpened();if(g&&b.autoOpen){var l=b.host.offset();var k=l.top;var j=l.left;var i=b.container.offset();var e=i.left;var f=i.top;canClose=true;if(h.pageY>=k&&h.pageY<=k+b.host.height())if(h.pageX>=j&&h.pageX<j+b.host.width())canClose=false;if(h.pageY>=f&&h.pageY<=f+b.container.height())if(h.pageX>=e&&h.pageX<e+b.container.width())canClose=false;if(canClose)b.close()}})}this.addHandler(a(document),"mousedown."+this.element.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.element.id});
if(this.touch)this.addHandler(a(document),"touchstart."+this.element.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.element.id});if(document.referrer!=""||window.frameElement)if(window.top!=null){if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var d=function(e){if(b.isOpened()){var f={me:b,listbox:b.listBox,id:b.element.id};e.data=f}};if(window.top.document.addEventListener)window.top.document.addEventListener("mousedown",
d,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmousedown",d)}}this.addHandler(this.host,"keydown",function(f){var e=b.container.css("display")=="block";if(b.host.css("display")=="none")return true;if(f.keyCode=="13")if(!b.isanimating)if(e){b.renderSelection();b.hideListBox();if(!b.keyboardSelection)b._raiseEvent("2",{index:b.selectedIndex,type:"keyboard",item:b.getItem(b.selectedIndex)})}else b.showListBox();if(f.keyCode==115){if(!b.isanimating)if(!b.isOpened())b.showListBox();
else if(b.isOpened())b.hideListBox();return false}if(f.altKey)if(b.host.css("display")=="block")if(f.keyCode==38){if(b.isOpened())b.hideListBox()}else if(f.keyCode==40)if(!b.isOpened())b.showListBox();if(f.keyCode=="27")if(!b.ishiding){b.hideListBox();if(b.tempSelectedIndex!=undefined)b.selectIndex(b.tempSelectedIndex)}if(e&&!b.disabled)return b.listBox._handleKeyDown(f)});this.addHandler(this.listBoxContainer,"checkChange",function(e){b.renderSelection();b._updateInputSelection();b._raiseEvent(5,
{label:e.args.label,value:e.args.value,checked:e.args.checked,item:e.args.item})});this.addHandler(this.listBoxContainer,"select",function(e){if(!b.disabled)if(e.args.type!="keyboard"||b.keyboardSelection){b.renderSelection();b._raiseEvent("2",{index:e.args.index,type:e.args.type,item:e.args.item,originalEvent:e.args.originalEvent});if(e.args.type=="mouse")if(!b.checkboxes)b.hideListBox()}});if(this.listBox)if(this.listBox.content)this.addHandler(this.listBox.content,"click",function(e){if(!b.disabled){b.renderSelection("mouse");
if(!b.touch)if(!b.ishiding)if(!b.checkboxes)b.hideListBox();if(!b.keyboardSelection){if(b._oldSelectedInd==undefined)b._oldSelectedIndx=b.selectedIndex;if(b.selectedIndex!=b._oldSelectedIndx){b._raiseEvent("2",{index:b.selectedIndex,type:"keyboard",item:b.getItem(b.selectedIndex)});b._oldSelectedIndx=b.selectedIndex}}}});this.addHandler(this._firstDiv,"focus",function(){b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-focus"));b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))});
this.addHandler(this._firstDiv,"blur",function(){b.host.removeClass(b.toThemeProperty("jqx-dropdownlist-state-focus"));b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"))})},removeHandlers:function(){var b=this;this.removeHandler(this.dropdownlistWrapper,"mousedown");if(this.listBox)if(this.listBox.content)this.removeHandler(this.listBox.content,"click");this.removeHandler(this.host,"loadContent");this.removeHandler(this.listBoxContainer,"checkChange");this.removeHandler(this.host,"keydown");
this.removeHandler(this._firstDiv,"focus");this.removeHandler(this._firstDiv,"blur");this.host.unbind("hover");this.removeHandler(this.host,"mouseenter");a(document).unbind("mousemove."+b.element.id)},getItem:function(b){var c=this.listBox.getItem(b);return c},renderSelection:function(){if(this.listBox==null)return;var p=this.listBox.getItem(this.listBox.selectedIndex);var m=this;if(this.checkboxes){var g=this.getCheckedItems();if(g!=null&&g.length>0)p=g[0];else p=null}if(p==null){var d=a('<span style="color: inherit; border: none; background-color: transparent;"></span>');
d.appendTo(a(document.body));d.addClass(this.toThemeProperty("jqx-widget"));d.addClass(this.toThemeProperty("jqx-listitem-state-normal"));d.addClass(this.toThemeProperty("jqx-item"));d.html(this.promptText);var c=this.dropdownlistContent.css("padding-top");var q=this.dropdownlistContent.css("padding-bottom");d.css("padding-top",c);d.css("padding-bottom",q);var b=d.outerHeight();d.remove();d.removeClass();this.dropdownlistContent.html(d);var o=this.host.height();if(this.height!=null&&this.height!=
undefined)o=parseInt(this.height);var n=parseInt((parseInt(o)-parseInt(b))/2);if(n>0){this.dropdownlistContent.css("margin-top",n+"px");this.dropdownlistContent.css("margin-bottom",n+"px")}if(this.selectionRenderer){this.dropdownlistContent.html(this.selectionRenderer());this._updateInputSelection()}this.selectedIndex=this.listBox.selectedIndex;return}this.selectedIndex=this.listBox.selectedIndex;var d=a('<span style="color: inherit; border: none; background-color: transparent;"></span>');d.appendTo(a(document.body));
d.addClass(this.toThemeProperty("jqx-widget"));d.addClass(this.toThemeProperty("jqx-listitem-state-normal"));d.addClass(this.toThemeProperty("jqx-item"));var e=false;try{if(p.html!=undefined&&p.html!=null&&p.html.toString().length>0)d.html(p.html);else if(p.label!=undefined&&p.label!=null&&p.label.toString().length>0)d.html(p.label);else if(p.value!=undefined&&p.value!=null&&p.value.toString().length>0)d.html(p.value);else if(p.title!=undefined&&p.title!=null&&p.title.toString().length>0)d.html(p.title);
else if(p.label==""||p.label==null){e=true;d.html("Item")}}catch(l){var h=l}var c=this.dropdownlistContent.css("padding-top");var q=this.dropdownlistContent.css("padding-bottom");d.css("padding-top",c);d.css("padding-bottom",q);var b=d.outerHeight();if((p.label==""||p.label==null)&&e)d.html("");d.remove();d.removeClass();if(this.selectionRenderer)this.dropdownlistContent.html(this.selectionRenderer(d,p.index,p.label,p.value));else if(this.checkboxes){var j=this.getCheckedItems();var k="";for(var f=
0;f<j.length;f++)if(f==j.length-1)k+=j[f].label;else k+=j[f].label+",";d.text(k);d.css("max-width",this.host.width()-30);d.css("overflow","hidden");d.css("display","block");d.css("width",this.host.width()-30);d.css("text-overflow","ellipsis");this.dropdownlistContent.html(d)}else this.dropdownlistContent.html(d);var o=this.host.height();if(this.height!=null&&this.height!=undefined)o=parseInt(this.height);var n=parseInt((parseInt(o)-parseInt(b))/2);if(n>0){this.dropdownlistContent.css("margin-top",
n+"px");this.dropdownlistContent.css("margin-bottom",n+"px")}if(this.dropdownlistContent&&this.input)this._updateInputSelection()},_updateInputSelection:function(){if(this.input){if(this.selectedIndex==-1)this.input.val("");else this.input.val(this.dropdownlistContent.text());if(this.checkboxes){var b=this.getCheckedItems();var d="";if(b!=null)for(var c=0;c<b.length;c++)if(c==b.length-1)d+=b[c].value;else d+=b[c].value+",";this.input.val(d)}}},setContent:function(b){this.dropdownlistContent.html(b);
this._updateInputSelection()},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source});this.renderSelection("mouse");if(this.source==null)this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null});this.clearSelection()},clearSelection:function(b){this.selectedIndex=-1;this.listBox.clearSelection();this.renderSelection();this.dropdownlistContent.html("")},unselectIndex:function(b,c){if(isNaN(b))return;this.listBox.unselectIndex(b,c);this.renderSelection()},
selectIndex:function(b,d,e,c){this.listBox.selectIndex(b,d,e,c);this.renderSelection()},getSelectedIndex:function(){return this.selectedIndex},getSelectedItem:function(){return this.getItem(this.selectedIndex)},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(b){this.listBox.checkIndex(b)},uncheckIndex:function(b){this.listBox.uncheckIndex(b)},indeterminateIndex:function(b){this.listBox.indeterminateIndex(b)},checkAll:function(){this.listBox.checkAll()},uncheckAll:function(){this.listBox.uncheckAll()},
insertAt:function(c,b){if(c==null)return false;return this.listBox.insertAt(c,b)},addItem:function(b){return this.listBox.addItem(b)},removeAt:function(c){var b=this.listBox.removeAt(c);this.renderSelection("mouse");return b},ensureVisible:function(b){this.listBox.ensureVisible(b)},disableAt:function(b){this.listBox.disableAt(b)},enableAt:function(b){this.listBox.enableAt(b)},_findPos:function(c){while(c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c)))c=c.nextSibling;var b=a(c).offset();
return[b.left,b.top]},testOffset:function(h,f,c){var g=h.outerWidth();var j=h.outerHeight();var i=a(window).width()+a(window).scrollLeft();var e=a(window).height()+a(window).scrollTop();if(f.left+g>i)if(g>this.host.width()){var d=this.host.offset().left;var b=g-this.host.width();f.left=d-b+2}if(f.left<0)f.left=parseInt(this.host.offset().left)+"px";f.top-=Math.min(f.top,f.top+j>e&&e>j?Math.abs(j+c+22):0);return f},open:function(){this.showListBox()},close:function(){this.hideListBox()},hide:function(){this.close()},
show:function(){this.open()},showListBox:function(){var o=this;var d=this.listBoxContainer;var i=this.listBox;var l=a(window).scrollTop();var g=a(window).scrollLeft();var j=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px";var f=parseInt(this.host.offset().left)+"px";var n=a.jqx.mobile.isSafariMobileBrowser();if(this.listBox==null)return;var c=a.jqx.utilities.hasTransform(this.host);this.ishiding=false;if(!this.keyboardSelection){this.listBox.selectIndex(this.selectedIndex);
this.listBox.ensureVisible(this.selectedIndex)}this.tempSelectedIndex=this.selectedIndex;if(this.autoDropDownHeight)this.container.height(this.listBoxContainer.height()+25);if(c||n!=null&&n){f=a.jqx.mobile.getLeftPos(this.element);j=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight())}d.stop();this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected"));this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.arrow.addClass(this.toThemeProperty("icon-arrow-down-selected"));
this.container.css("left",f);this.container.css("top",j);i._arrange();var e=true;var p=false;if(this.dropDownHorizontalAlignment=="right"){var k=this.container.width();var b=Math.abs(k-this.host.width());if(k>this.host.width())this.container.css("left",25+parseInt(f)-b+"px");else this.container.css("left",25+parseInt(f)+b+"px")}if(this.enableBrowserBoundsDetection){var h=this.testOffset(d,{left:parseInt(this.container.css("left")),top:parseInt(j)},parseInt(this.host.outerHeight()));if(parseInt(this.container.css("top"))!=
h.top){p=true;d.css("top",23)}else d.css("top",0);this.container.css("top",h.top);if(parseInt(this.container.css("left"))!=h.left)this.container.css("left",h.left)}if(this.animationType=="none"){this.container.css("display","block");a.data(document.body,"openedJQXListBoxParent",o);a.data(document.body,"openedJQXListBox"+this.element.id,d);d.css("margin-top",0);d.css("opacity",1)}else{this.container.css("display","block");o.isanimating=true;if(this.animationType=="fade"){d.css("margin-top",0);d.css("opacity",
0);d.animate({opacity:1},this.openDelay,function(){a.data(document.body,"openedJQXListBoxParent",o);a.data(document.body,"openedJQXListBox"+o.element.id,d);o.ishiding=false;o.isanimating=false})}else{d.css("opacity",1);var m=d.outerHeight();if(p)d.css("margin-top",m);else d.css("margin-top",-m);d.animate({"margin-top":0},this.openDelay,function(){a.data(document.body,"openedJQXListBoxParent",o);a.data(document.body,"openedJQXListBox"+o.element.id,d);o.ishiding=false;o.isanimating=false})}}i._renderItems();
this._raiseEvent("0",i)},hideListBox:function(){var f=this.listBoxContainer;var g=this.listBox;var c=this.container;var d=this;a.data(document.body,"openedJQXListBox"+this.element.id,null);if(this.animationType=="none")this.container.css("display","none");else if(!d.ishiding){f.stop();var b=f.outerHeight();f.css("margin-top",0);d.isanimating=true;var e=-b;if(parseInt(this.container.offset().top)<parseInt(this.host.offset().top))e=b;if(this.animationType=="fade"){f.css({opacity:1});f.animate({opacity:0},
this.closeDelay,function(){c.css("display","none");d.isanimating=false;d.ishiding=false})}else f.animate({"margin-top":e},this.closeDelay,function(){c.css("display","none");d.isanimating=false;d.ishiding=false})}this.ishiding=true;this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this.arrow.removeClass(this.toThemeProperty("icon-arrow-down-selected"));this._raiseEvent("1",g)},closeOpenedListBox:function(e){var d=
e.data.me;var b=a(e.target);var c=e.data.listbox;if(c==null)return true;if(a(e.target).ischildof(e.data.me.host))return true;if(!d.isOpened())return true;var f=d;var g=false;a.each(b.parents(),function(){if(this.className!="undefined")if(this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1){g=true;return false}if(this.className.indexOf("jqx-dropdownlist")!=-1){if(d.element.id==this.id)g=true;return false}}});if(c!=null&&!g&&d.isOpened())d.hideListBox();return true},loadFromSelect:function(b){this.listBox.loadFromSelect(b)},
refresh:function(b){this._setSize();this._arrange();if(this.listBox)this.renderSelection()},_arrange:function(){var f=parseInt(this.host.width());var b=parseInt(this.host.height());var e=this.arrowSize;var d=this.arrowSize;var g=3;var c=f-d-2*g;if(c>0)this.dropdownlistContent.width(c+"px");this.dropdownlistContent.height(b);this.dropdownlistContent.css("left",0);this.dropdownlistContent.css("top",0);this.dropdownlistArrow.width(d);this.dropdownlistArrow.height(b)},destroy:function(){this.removeHandler(this.listBoxContainer,
"select");this.removeHandler(this.listBoxContainer,"unselect");this.removeHandler(this.listBoxContainer,"change");this.removeHandler(this.dropdownlistWrapper,"selectstart");this.removeHandler(this.dropdownlistWrapper,"mousedown");this.removeHandler(this.host,"keydown");this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBox.content,"click");this.removeHandlers();this.listBoxContainer.jqxListBox("destroy");this.listBoxContainer.remove();this.host.removeClass();this.removeHandler(a(document),
"mousedown."+this.element.id,self.closeOpenedListBox);if(this.touch)this.removeHandler(a(document),"touchstart."+this.element.id);this.host.remove()},_raiseEvent:function(f,c){if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);e.owner=this;if(f==2||f==3||f==4||f==5)e.args=c;var b=this.host.trigger(e);return b},propertyChangedHandler:function(b,c,f,e){if(b.isInitialized==undefined||b.isInitialized==false)return;if(c=="autoOpen")b._updateHandlers();
if(c=="renderer")b.listBox.renderer=b.renderer;if(c=="itemHeight")b.listBox.itemHeight=e;if(c=="source"){b.listBoxContainer.jqxListBox({source:b.source});b.listBox.selectedIndex=-1;b.listBox.selectIndex(this.selectedIndex);b.renderSelection();if(e==null)b.clear()}if(c=="displayMember"||c=="valueMember"){b.listBoxContainer.jqxListBox({displayMember:b.displayMember,valueMember:b.valueMember});b.renderSelection()}if(c=="theme"&&e!=null){b.listBoxContainer.jqxListBox({theme:e});b.dropdownlistContent.removeClass();
b.dropdownlistContent.addClass(b.toThemeProperty("jqx-dropdownlist-content"));b.dropdownlistWrapper.removeClass();b.dropdownlistWrapper.addClass(b.toThemeProperty("jqx-disableselect"));b.host.removeClass();b.host.addClass(b.toThemeProperty("jqx-fill-state-normal"));b.host.addClass(b.toThemeProperty("jqx-dropdownlist-state-normal"));b.host.addClass(b.toThemeProperty("jqx-rc-all"));b.host.addClass(b.toThemeProperty("jqx-widget"));b.host.addClass(b.toThemeProperty("jqx-widget-content"));b.arrow.removeClass();
b.arrow.addClass(b.toThemeProperty("icon-arrow-down"));b.arrow.addClass(b.toThemeProperty("icon"))}if(c=="autoDropDownHeight"&&e!=f){b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight});if(b.autoDropDownHeight)b.container.height(b.listBoxContainer.height()+25);else{b.listBoxContainer.jqxListBox({height:b.dropDownHeight});b.container.height(parseInt(b.dropDownHeight)+25)}}if(c=="searchMode")b.listBoxContainer.jqxListBox({searchMode:b.searchMode});if(c=="incrementalSearch")b.listBoxContainer.jqxListBox({incrementalSearch:b.incrementalSearch});
if(c=="incrementalSearchDelay")b.listBoxContainer.jqxListBox({incrementalSearchDelay:b.incrementalSearchDelay});if(c=="dropDownHeight")if(!b.autoDropDownHeight){b.listBoxContainer.jqxListBox({height:b.dropDownHeight});b.container.height(parseInt(b.dropDownHeight)+25)}if(c=="dropDownWidth"||c=="scrollBarSize"){var d=b.width;if(b.dropDownWidth!="auto")d=b.dropDownWidth;b.listBoxContainer.jqxListBox({width:d,scrollBarSize:b.scrollBarSize});b.container.width(parseInt(d)+25)}if(c=="width"||c=="height")if(e!=
f){this.refresh();if(c=="width")if(b.dropDownWidth=="auto"){var d=b.host.width();b.listBoxContainer.jqxListBox({width:d});b.container.width(parseInt(d)+25)}}if(c=="checkboxes")b.listBoxContainer.jqxListBox({checkboxes:b.checkboxes});if(c=="selectedIndex")if(b.listBox!=null){b.listBox.selectIndex(e);b.renderSelection()}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxWindow","",{});a.extend(a.jqx._jqxWindow.prototype,{defineInstance:function(){this.height="auto";this.width=200;this.minHeight=50;this.maxHeight=600;this.minWidth=50;this.maxWidth=800;this.showCloseButton=true;this.disabled=false;this.autoOpen=true;this.keyboardCloseKey="esc";this.title="";this.content="";this.draggable=true;this.resizable=true;this.animationType="fade";this.closeAnimationDuration=250;this.showAnimationDuration=250;this.isModal=false;this.position=
"center";this.closeButtonSize=16;this.closeButtonAction="hide";this.modalOpacity=0.3;this.dragArea=null;this.okButton=null;this.cancelButton=null;this.dialogResult={OK:false,Cancel:false,None:true};this.collapsed=false;this.showCollapseButton=false;this.collapseAnimationDuration=150;this.collapseButtonSize=16;this._events=["created","closed","moving","moved","open","collapse","expand","open","close"];this._invalidArgumentExceptions={invalidHeight:"Invalid height!",invalidWidth:"Invalid width!",invalidMinHeight:"Invalid minHeight!",
invalidMaxHeight:"Invalid maxHeight!",invalidMinWidth:"Invalid minWidth!",invalidMaxWidth:"Invalid maxWidth",invalidKeyCode:"Invalid keyCode!",invalidAnimationType:"Invalid animationType!",invalidCloseAnimationDuration:"Invalid closeAnimationDuration!",invalidShowAnimationDuration:"Invalid showAnimationDuration!",invalidPosition:"Invalid position!",invalidCloseButtonSize:"Invalid closeButtonSize!",invalidCollapseButtonSize:"Invalid collapseButtonSize!",invalidCloseButtonAction:"Invalid cluseButtonAction!",
invalidModalOpacity:"Invalid modalOpacity!",invalidDragArea:"Invalid dragArea!",invalidDialogResult:"Invalid dialogResult!",invalidIsModal:"You can have just one modal window!"};this._enableResizeCollapseBackup;this._enableResizeBackup;this._heightBeforeCollapse;this._minHeightBeforeCollapse;this._mouseDown=false;this._isDragging=false;this._rightContentWrapper=null;this._leftContentWrapper=null;this._headerContentWrapper=null;this._closeButton=null;this._collapseButton=null;this._title=null;this._content=
null;this._mousePosition={};this._windowPosition={};this._modalBackground=null;this._SCROLL_WIDTH=21;this._visible=true;this._touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave",click:"touchstart"}},createInstance:function(){this.host.detach();a(document.body).append(this.host);this._isTouchDevice=a.jqx.mobile.isTouchDevice();this._validateProperties();this._createStructure();this._refresh();if(!this.autoOpen)this.host.css("display",
"none");this._fixWindowZIndex();this._setStartupSettings();this._positionWindow();this._raiseEvent(0);if(this.autoOpen){this._performLayout();var e=this;setTimeout(function(){e._performLayout()},250)}},refresh:function(){this._performLayout()},_setStartupSettings:function(){if(this.disabled)this.disable();if(this.collapsed){this.collapsed=false;this.collapse(0)}if(!this.autoOpen){this.hide(null,0.0010,true);this._visible=false}if(this.title!==null&&this.title!=="")this.setTitle(this.title);if(this.content!==
null&&this.content!=="")this.setContent(this.content);this.title=this._headerContentWrapper.html();this.content=this._content.html()},_fixWindowZIndex:function(){var f=a.data(document.body,"jqxwindows-list")||[],k=901,e;if(!this.isModal){if(this._indexOf(this.host,f)<0)f.push(this.host);a.data(document.body,"jqxwindows-list",f);if(f.length>1){var i=f[f.length-2];k=parseInt(i.css("z-index"),10)+1}}else{if(f){f=this._removeFromArray(this.host,f);a.data(document.body,"jqxwindows-list",f)}k=1800;var h=
1299;var g=this;a.each(a(".jqx-window-modal"),function(l){k++;if(this==g._modalBackground[0]){g._modalBackground.css("z-index",1800+l);return false}});a.data(document.body,"jqxwindow-modal",this.host)}this.host.css("z-index",k);this._sortByStyle("z-index",f)},_validateProperties:function(){try{this._validateSize();this._validateAnimationProperties();this._validateInteractionProperties();this._validateModalProperties();if(!this.position)throw new Error(this._invalidArgumentExceptions.invalidPosition);
if(isNaN(this.closeButtonSize)||parseInt(this.closeButtonSize)<0)throw new Error(this._invalidArgumentExceptions.invalidCloseButtonSize);if(isNaN(this.collapseButtonSize)||parseInt(this.collapseButtonSize)<0)throw new Error(this._invalidArgumentExceptions.invalidCollapseButtonSize);}catch(e){alert(e)}},_validateModalProperties:function(){if(this.modalOpacity<0||this.modalOpacity>1)throw new Error(this._invalidArgumentExceptions.invalidModalOpacity);if(this.isModal&&!this._singleModalCheck())throw new Error(this._invalidArgumentExceptions.invalidIsModal);
},_validateSize:function(){this._validateSizeLimits();if(this.height!=="auto"&&isNaN(parseInt(this.height)))throw new Error(this._invalidArgumentExceptions.invalidHeight);if(this.width!=="auto"&&isNaN(parseInt(this.width)))throw new Error(this._invalidArgumentExceptions.invalidWidth);if(this.height!=="auto"&&this.height<this.minHeight)this.height=this.minHeight;if(this.width<this.minWidth)this.width=this.minWidth;if(this.height!=="auto"&&this.height>this.maxHeight)this.height=this.maxHeight;if(this.width>
this.maxWidth)this.width=this.maxWidth;if(this.dragArea===null)return;if(this.dragArea&&(this.dragArea.height!==null&&this.host.height()>this.dragArea.height||parseInt(this.height,10)>this.dragArea.height)||this.dragArea.width!==null&&this.width>this.dragArea.width||this.maxHeight>this.dragArea.height||this.maxWidth>this.dragArea.width);},_validateSizeLimits:function(){if(isNaN(parseInt(this.minHeight)))throw new Error(this._invalidArgumentExceptions.invalidMinHeight);if(isNaN(parseInt(this.maxHeight)))throw new Error(this._invalidArgumentExceptions.invalidMaxHeight);
if(isNaN(parseInt(this.minWidth)))throw new Error(this._invalidArgumentExceptions.invalidMinWidth);if(isNaN(parseInt(this.maxWidth)))throw new Error(this._invalidArgumentExceptions.invalidMaxWidth);if(this.minHeight>this.maxHeight)throw new Error(this._invalidArgumentExceptions.invalidMinHeight);if(this.minWidth>this.maxWidth)throw new Error(this._invalidArgumentExceptions.invalidMinWidth);},_validateAnimationProperties:function(){if(this.animationType!=="fade"&&this.animationType!=="slide"&&this.animationType!==
"combined"&&this.animationType!=="none")throw new Error(this._invalidArgumentExceptions.invalidAnimationType);if(isNaN(parseInt(this.closeAnimationDuration),10)||this.closeAnimationDuration<0)throw new Error(this._invalidArgumentExceptions.invalidCloseAnimationDuration);if(isNaN(parseInt(this.showAnimationDuration),10)||this.showAnimationDuration<0)throw new Error(this._invalidArgumentExceptions.invalidShowAnimationDuration);},_validateInteractionProperties:function(){if(parseInt(this.keyCode,10)<
0||parseInt(this.keyCode,10)>130&&this.keyCode!=="esc")throw new Error(this._invalidArgumentExceptions.invalidKeyCode);if(this.dragArea!==null&&(typeof this.dragArea.width==="undefined"||typeof this.dragArea.height==="undefined"||typeof this.dragArea.left==="undefined"||typeof this.dragArea.top==="undefined"))throw new Error(this._invalidArgumentExceptions.invalidDragArea);if(!this.dialogResult||!this.dialogResult.OK&&!this.dialogResult.Cancel&&!this.dialogResult.None)throw new Error(this._invalidArgumentExceptions.invalidDialogResult);
if(this.closeButtonAction!=="hide"&&this.closeButtonAction!=="close")throw new Error(this._invalidArgumentExceptions.invalidCloseButtonAction);},_singleModalCheck:function(){var e=a.data(document.body,"jqxwindows-list")||[],f=e.length;while(f){f-=1;if(a(e[f].attr("id")).jqxWindow("isModal"))return false}return true},_createStructure:function(){var e=this.host.children("DIV");if(e.length===1){this._header=a("<div>"+this.host.attr("caption")+"</div>");this.host.prepend(this._header);this.host.attr("caption",
"");this._content=a(e[0])}else if(e.length===2){this._header=a(e[0]);this._content=a(e[1])}else throw new Error("Invalid structure!");},_refresh:function(){this._render();this._addStyles();this._performLayout();this._removeEventHandlers();this._addEventHandlers();this._initializeResize()},_render:function(){this._addHeaderWrapper();this._addCloseButton();this._addCollapseButton();this._removeModal();this._makeModal()},_addHeaderWrapper:function(){if(!this._headerContentWrapper){this._header.wrapInner('<div style="float:left;"></div>');
this._headerContentWrapper=this._header.children(0)}},_addCloseButton:function(){if(!this._closeButton){this._closeButtonWrapper=a('<div class="'+this.toThemeProperty("jqx-window-close-button-background")+'"></div>');this._closeButton=a('<div style="width: 100%; height: 100%;" class="'+this.toThemeProperty("jqx-window-close-button")+'"></div>');this._closeButtonWrapper.append(this._closeButton);this._header.append(this._closeButtonWrapper)}},_addCollapseButton:function(){if(!this._collapseButton){this._collapseButtonWrapper=
a('<div class="'+this.toThemeProperty("jqx-window-collapse-button-background")+'"></div>');this._collapseButton=a('<div style="width: 100%; height: 100%;" class="'+this.toThemeProperty("jqx-window-collapse-button")+'"></div>');this._collapseButtonWrapper.append(this._collapseButton);this._header.append(this._collapseButtonWrapper)}},_removeModal:function(){if(!this.isModal&&typeof this._modalBackground==="object"&&this._modalBackground!==null&&this._modalBackground.length>=1){a("."+this.toThemeProperty("jqx-window-modal")).remove();
this._modalBackground=null}},_makeModal:function(){if(this.isModal&&(!this._modalBackground||this._modalBackground.length<1)){var g=a.data(document.body,"jqxwindows-list");if(g){this._removeFromArray(this.host,g);a.data(document.body,"jqxwindows-list",g)}this._modalBackground=a("<div></div>");this._modalBackground.addClass(this.toThemeProperty("jqx-window-modal"));this._setModalBackgroundStyles();a(document.body).append(this._modalBackground);this.addHandler(this._modalBackground,this._getEvent("click"),
function(){return false});var f=this;var e=function(i,k){var h=a(i).parents().get();for(j=0;j<h.length;j++)if(a(h[j]).is(k))return true;return false};this.addHandler(this._modalBackground,"mouseup",function(h){f._stopResizing(f);h.preventDefault();return false});this.addHandler(this._modalBackground,"mousedown",function(i){var h=f._getTabbables();if(h.length>0){h[0].focus(1);setTimeout(function(){h[0].focus(1)},100)}i.preventDefault();return false});this.addHandler(a(document),"keydown.window"+this.element.id,
function(k){if(k.keyCode!==9)return;var i=f._getTabbables();var l=null;var h=null;if(i.length>0){l=i[0];h=i[i.length-1]}if(k.target==f.element)return;if(l==null)return;if(!e(k.target,f.host)){l.focus(1);return false}if(k.target===h&&!k.shiftKey){l.focus(1);return false}else if(k.target===l&&k.shiftKey){h.focus(1);return false}})}},_addStyles:function(){this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-window"));this.host.addClass(this.toThemeProperty("jqx-widget"));
this.host.addClass(this.toThemeProperty("jqx-widget-content"));this._header.addClass(this.toThemeProperty("jqx-window-header"));this._content.addClass(this.toThemeProperty("jqx-window-content"));this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._content.addClass(this.toThemeProperty("jqx-widget-content"));this._header.addClass(this.toThemeProperty("jqx-disableselect"));this._header.addClass(this.toThemeProperty("jqx-rc-t"));this._content.addClass(this.toThemeProperty("jqx-rc-b"));
this.element.tabIndex=0;this.host.find("DIV").css("tab-index",0);this.host.attr("hideFocus","true").css("outline","none")},_performHeaderLayout:function(){this._handleHeaderButtons();this._header.css("position","relative");this._performHeaderCloseButtonLayout();this._performHeaderCollapseButtonLayout();this._centerElement(this._headerContentWrapper,this._header,"y","margin");this._centerElement(this._closeButtonWrapper,this._header,"y","margin");this._centerElement(this._collapseButtonWrapper,this._header,
"y","margin")},_handleHeaderButtons:function(){if(!this.showCloseButton)this._closeButtonWrapper.css("visibility","hidden");else{this._closeButtonWrapper.css("visibility","visible");this._closeButtonWrapper.width(this.closeButtonSize);this._closeButtonWrapper.height(this.closeButtonSize)}if(!this.showCollapseButton)this._collapseButtonWrapper.css("visibility","hidden");else{this._collapseButtonWrapper.css("visibility","visible");this._collapseButtonWrapper.width(this.collapseButtonSize);this._collapseButtonWrapper.height(this.collapseButtonSize)}},
_performHeaderCloseButtonLayout:function(){var e=parseInt(this._header.css("padding-right"),10);if(!isNaN(e)){this._closeButtonWrapper.width(this._closeButton.width());this._closeButtonWrapper.css("margin-right",e)}this._closeButtonWrapper.css({position:"absolute",right:"0px"});this._centerElement(this._closeButton,this._closeButton.parent(),"y")},_performHeaderCollapseButtonLayout:function(){var e=parseInt(this._header.css("padding-right"),10);if(!isNaN(e)){this._collapseButtonWrapper.width(this.collapseButtonSize);
this._collapseButtonWrapper.height(this.collapseButtonSize);this._collapseButtonWrapper.css("margin-right",e)}this._collapseButtonWrapper.css({position:"absolute",right:this.showCloseButton?this._closeButton.outerWidth(true):0});this._centerElement(this._collapseButton,this._collapseButton.parent(),"y")},_performWidgetLayout:function(){var e;if(this.width!=="auto")this.host.css("width",this.width);if(!this.collapsed){if(this.height!=="auto")this.host.height(this.height);else this.host.height(this.host.height());
this.host.css("min-height",this.minHeight)}this._setChildrenLayout();e=this._validateMinSize();this.host.css({"max-height":this.maxHeight,"min-width":this.minWidth,"max-width":this.maxWidth});if(!e)this._setChildrenLayout()},_setChildrenLayout:function(){this._header.width(this.host.width()-(this._header.outerWidth(true)-this._header.width()));this._content.width(this.host.width()-(this._content.outerWidth(true)-this._content.width()));this._content.height(this.host.height()-this._header.outerHeight(true)-
(this._content.outerHeight(true)-this._content.height()))},_validateMinSize:function(){var f=true;if(this.minHeight<this._header.height()){this.minHeight=this._header.height();f=false}var h=this._header.children(0).outerWidth(true),e=this._header.children(1).outerWidth(true),g=h+e;if(this.minWidth<100){this.minWidth=Math.min(g,100);f=false}return f},_centerElement:function(h,f,e,g){if(typeof f.left==="number"&&typeof f.top==="number"&&typeof f.height==="number"&&typeof f.width==="number")this._centerElementInArea(h,
f,e);else this._centerElementInParent(h,f,e,g)},_centerElementInParent:function(e,m,h,f){h=h.toLowerCase();if(f)f+="-";else f="";if(h.indexOf("y")>=0){var g=e.outerHeight(true),k=m.height(),i=(k-g)/2;e.css(f+"top",i+"px")}if(h.indexOf("x")>=0){var o=e.outerWidth(true);var n=m.width();var l=(n-o)/2;e.css(f+"left",l+"px")}},_centerElementInArea:function(f,e,h){h=h.toLowerCase();if(h.indexOf("y")>=0){var g=f.outerHeight(true);var k=e.height;var i=(k-g)/2;f.css("top",i+e.top+"px")}if(h.indexOf("x")>=
0){var n=f.outerWidth(true);var m=e.width;var l=(m-n)/2;f.css("left",l+e.left+"px")}},_removeEventHandlers:function(){this.removeHandler(this._header,this._getEvent("mousedown"));this.removeHandler(this._header,this._getEvent("mousemove"));this.removeHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"));this.removeHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"));this.removeHandler(this.host,"keydown");this.removeHandler(this._closeButton,this._getEvent("click"));
this.removeHandler(this._closeButton,this._getEvent("mouseenter"));this.removeHandler(this._closeButton,this._getEvent("mouseleave"));this.removeHandler(this._collapseButton,this._getEvent("click"));this.removeHandler(this._collapseButton,this._getEvent("mouseenter"));this.removeHandler(this._collapseButton,this._getEvent("mouseleave"));this.removeHandler(this.host,this._getEvent("mousedown"));this.removeHandler(a(this.okButton),this._getEvent("click"),this._setDialogResultHandler);this.removeHandler(a(this.cancelButton),
this._getEvent("click"),this._setDialogResultHandler);this.removeHandler(this._header,this._getEvent("mouseenter"));this.removeHandler(this._header,this._getEvent("mouseleave"));this.removeHandler(this.host,"resizing",this._windowResizeHandler)},_removeFromArray:function(e,g){var f=this._indexOf(e,g);if(f>=0)return g.splice(this._indexOf(e,g),1);else return g},_sortByStyle:function(e,l){for(var h=0;h<l.length;h++)for(var f=l.length-1;f>h;f--){var m=l[f],k=l[f-1],g;if(parseInt(m.css(e),10)<parseInt(k.css(e),
10)){g=m;l[f]=k;l[f-1]=g}}},_initializeResize:function(){if(this.resizable){var e=this;this.initResize({target:this.host,alsoResize:e._content,maxWidth:e.maxWidth,minWidth:e.minWidth,maxHeight:e.maxHeight,minHeight:e.minHeight,indicatorSize:10,resizeParent:e.dragArea})}},_removeResize:function(){this.removeResize()},_getEvent:function(e){if(this._isTouchDevice)return this._touchEvents[e];else return e},_addEventHandlers:function(){this._addDragDropHandlers();this._addCloseHandlers();this._addCollapseHandlers();
this._addFocusHandlers();this._documentResizeHandlers();this._closeButtonHover();this._collapseButtonHover();this._addDialogButtonsHandlers();this._addHeaderHoverEffect();this._addResizeHandlers();this.addHandler(this._header,this._getEvent("mousemove"),this._addHeaderCursorHandlers,{self:this})},_addResizeHandlers:function(){var e=this;this.addHandler(this.host,"resizing",this._windowResizeHandler,{self:this})},_windowResizeHandler:function(f){var e=f.data.self;e._header.width(e.host.width()-(e._header.outerWidth(true)-
e._header.width()));e.width=f.args.width;e.height=f.args.height},_addHeaderHoverEffect:function(){var e=this;this.addHandler(this._header,this._getEvent("mouseenter"),function(){a(this).addClass(e.toThemeProperty("jqx-window-header-hover"))});this.addHandler(this._header,this._getEvent("mouseleave"),function(){a(this).removeClass(e.toThemeProperty("jqx-window-header-hover"))})},_addDialogButtonsHandlers:function(){if(this.okButton)this.addHandler(a(this.okButton),this._getEvent("click"),this._setDialogResultHandler,
{self:this,result:"ok"});if(this.cancelButton)this.addHandler(a(this.cancelButton),this._getEvent("click"),this._setDialogResultHandler,{self:this,result:"cancel"})},_documentResizeHandlers:function(){var e=this;if(this.isModal)a(window).resize(function(){if(typeof e._modalBackground==="object"&&e._modalBackground!==null){e._modalBackground.width(e._getDocumentSize().width);e._modalBackground.height(e._getDocumentSize().height)}})},_setDialogResultHandler:function(f){var e=f.data.self;e._setDialogResult(f.data.result);
e.closeWindow()},_setDialogResult:function(e){this.dialogResult.OK=false;this.dialogResult.None=false;this.dialogResult.Cancel=false;e=e.toLowerCase();switch(e){case "ok":this.dialogResult.OK=true;break;case "cancel":this.dialogResult.Cancel=true;break;default:this.dialogResult.None=true}},_getDocumentSize:function(){var e=a.browser.msie&&a.browser.version<9?4:0,f=a.browser.msie&&a.browser.version<9?4:0;if(document.body.scrollHeight>document.body.clientHeight&&a.browser.msie&&a.browser.version<9)e=
this._SCROLL_WIDTH;if(document.body.scrollWidth>document.body.clientWidth&&a.browser.msie&&a.browser.version<9)f=this._SCROLL_WIDTH;return{width:a(document).width()-e,height:a(document).height()-f}},_closeButtonHover:function(){var e=this;this.addHandler(this._closeButton,this._getEvent("mouseenter"),function(){e._closeButton.addClass(e.toThemeProperty("jqx-window-close-button-hover"))});this.addHandler(this._closeButton,this._getEvent("mouseleave"),function(){e._closeButton.removeClass(e.toThemeProperty("jqx-window-close-button-hover"))})},
_collapseButtonHover:function(){var e=this;this.addHandler(this._collapseButton,this._getEvent("mouseenter"),function(){e._collapseButton.addClass(e.toThemeProperty("jqx-window-collapse-button-hover"))});this.addHandler(this._collapseButton,this._getEvent("mouseleave"),function(){e._collapseButton.removeClass(e.toThemeProperty("jqx-window-collapse-button-hover"))})},_setModalBackgroundStyles:function(){if(this.isModal){this._modalBackground.fadeTo(0,this.modalOpacity);this._modalBackground.css({position:"absolute",
top:"0px",left:"0px",width:this._getDocumentSize().width,height:this._getDocumentSize().height,"z-index":1299});if(!this.autoOpen)this._modalBackground.css("display","none")}},_addFocusHandlers:function(){var e=this;this.addHandler(this.host,this._getEvent("mousedown"),function(){if(!e.isModal)e.bringToFront()})},_indexOf:function(f,g){for(var e=0;e<g.length;e++)if(g[e][0]===f[0])return e;return-1},_addCloseHandlers:function(){var e=this;this.addHandler(this._closeButton,this._getEvent("click"),this._closeWindow,
{self:this});if(this.keyboardCloseKey!=="none"){if(typeof this.keyboardCloseKey!=="number"&&this.keyboardCloseKey.toLowerCase()==="esc")this.keyboardCloseKey=27;this.addHandler(this.host,"keydown",function(f){if(f.keyCode===e.keyboardCloseKey)e._closeWindow(f)},{self:this})}},_addCollapseHandlers:function(){var e=this;this.addHandler(this._collapseButton,this._getEvent("click"),function(){if(!e.collapsed)e.collapse();else e.expand()})},_closeWindow:function(f){var e=f.data.self.closeWindow()},_addHeaderCursorHandlers:function(f){var e=
f.data.self;if(e.resizeArea&&e.resizable){e._header.css("cursor",e._resizeWrapper.css("cursor"));return}else if(e.draggable){e._header.css("cursor","move");return}e._header.css("cursor","default");if(e._resizeWrapper&&e._resizeWrapper.length>0)e._resizeWrapper.css("cursor","default")},_addDragDropHandlers:function(){if(this.draggable){var e=this;this.addHandler(this._header,this._getEvent("mousedown"),function(h){e._headerMouseDownHandler(e,h);return true});this.addHandler(this._header,"dragstart",
function(h){if(h.preventDefault)h.preventDefault();return false});this.addHandler(this._header,this._getEvent("mousemove"),function(h){return e._headerMouseMoveHandler(e,h)});this.addHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"),function(h){return e._dragHandler(e,h)});this.addHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"),function(h){return e._dropHandler(e,h)});try{if(document.referrer!=""||window.frameElement){if(window.top!=null)if(window.parent&&
document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var g=function(h){e._dropHandler(e,h)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",g,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",g)}}}catch(f){}}},_headerMouseDownHandler:function(e,f){if(!e.isModal)e.bringToFront();if(e._resizeDirection==null){e._mousePosition.x=e._isTouchDevice?f.originalEvent.touches[0].pageX:
f.pageX;e._mousePosition.y=e._isTouchDevice?f.originalEvent.touches[0].pageY:f.pageY;e._mouseDown=true;e._isDragging=false}},_headerMouseMoveHandler:function(e,h){if(e._mouseDown&&!e._isDragging){var g=e._isTouchDevice?h.originalEvent.touches[0].pageX:h.pageX,f=e._isTouchDevice?h.originalEvent.touches[0].pageY:h.pageY;if(g+3<e._mousePosition.x||g-3>e._mousePosition.x||f+3<e._mousePosition.y||f-3>e._mousePosition.y){e._isDragging=true;e._mousePosition={x:g,y:f};e._windowPosition={x:e.host.offset().left,
y:e.host.offset().top};a(document.body).addClass(e.toThemeProperty("jqx-disableselect"))}return false}return true},_dropHandler:function(g,k){var f=true;if(g._isDragging&&!g.isResizing&&!g._resizeDirection){var e=parseInt(g.host.css("left"),10),l=parseInt(g.host.css("top"),10),i=g._isTouchDevice?0:k.pageX,h=g._isTouchDevice?0:k.pageY;g.enableResize=g._enableResizeBackup;g._enableResizeBackup="undefined";g._raiseEvent(3,e,l,i,h);f=false;if(k.preventDefault!="undefined")k.preventDefault();if(k.originalEvent!=
null)k.originalEvent.mouseHandled=true;if(k.stopPropagation!="undefined")k.stopPropagation()}g._isDragging=false;g._mouseDown=false;a(document.body).removeClass(g.toThemeProperty("jqx-disableselect"));return f},_dragHandler:function(m,h){if(m._isDragging&&!m.isResizing&&!m._resizeDirection){var l=m._isTouchDevice?h.originalEvent.which:h.which;if(typeof m._enableResizeBackup==="undefined")m._enableResizeBackup=m.enableResize;m.enableResize=false;if(l===0&&a.browser.msie&&a.browser.version<8)return m._dropHandler(m,
h);var k=m._isTouchDevice?h.originalEvent.touches[0].pageX:h.pageX,i=m._isTouchDevice?h.originalEvent.touches[0].pageY:h.pageY,g=k-m._mousePosition.x,e=i-m._mousePosition.y,f=m._windowPosition.x+g,n=m._windowPosition.y+e;m.move(f,n,h);h.preventDefault();return false}return true},_validateCoordinates:function(e,l,i,k){var h=this._getDraggingArea();e=e<h.left?h.left:e;l=l<h.top?h.top:l;var f=this.host.outerWidth(true);var g=this.host.outerHeight(true);if(e+f>=h.width+h.left-2*k)e=h.width+h.left-f-k;
if(l+g>=h.height+h.top-i)l=h.height+h.top-g-i;return{x:e,y:l}},_performLayout:function(){this._performHeaderLayout();this._performWidgetLayout()},_parseDragAreaAttributes:function(){if(this.dragArea!==null){this.dragArea.height=parseInt(this.dragArea.height,10);this.dragArea.width=parseInt(this.dragArea.width,10);this.dragArea.top=parseInt(this.dragArea.top,10);this.dragArea.left=parseInt(this.dragArea.left,10)}},_positionWindow:function(){this._parseDragAreaAttributes();if(this.position instanceof
Array&&this.position.length===2&&typeof this.position[0]==="number"&&typeof this.position[1]==="number")this.host.css({left:this.position[0],top:this.position[1]});else if(this.position instanceof Object&&this.position.x!=="undefined"&&this.position.y!="undefined")this.host.css({left:this.position.x,top:this.position.y});else this._positionFromLiteral()},_getDraggingArea:function(){var e={};e.left=this.dragArea&&this.dragArea.left?this.dragArea.left:0;e.top=this.dragArea&&this.dragArea.top?this.dragArea.top:
0;e.width=this.dragArea&&this.dragArea.width?this.dragArea.width:this._getDocumentSize().width;e.height=this.dragArea&&this.dragArea.height?this.dragArea.height:this._getDocumentSize().height;return e},_positionFromLiteral:function(){if(!(this.position instanceof Array))this.position=this.position.split(",");var e=this.position.length,f=this._getDraggingArea();while(e){e-=1;this.position[e]=this.position[e].replace(/ /g,"");switch(this.position[e]){case "top":this.host.css("top",f.top);break;case "left":this.host.css("left",
f.left);break;case "bottom":this.host.css("top",f.height-this.host.height()+f.top);break;case "right":this.host.css("left",f.left+f.width-this.host.width());break;default:if(!this.dragArea)f=a(window);this._centerElement(this.host,f,"xy");break}}},_raiseEvent:function(g){var f=this._events[g],h=a.Event(f),e={};if(g===2||g===3){e.x=arguments[1];e.y=arguments[2];e.pageX=arguments[3];e.pageY=arguments[4]}if(f==="closed"||f==="hide")e.dialogResult=this.dialogResult;h.args=e;return this.host.trigger(h)},
_destroy:function(){this.host.remove();if(this._modalBackground!==null)this._modalBackground.remove()},_toClose:function(f,e){return f&&e[0]===this.element||e[0]!==this.element&&typeof e[0]==="object"},propertyChangedHandler:function(e,f,h,g){this._validateProperties();switch(f){case "dragArea":this._positionWindow();break;case "collapseButtonSize":this._performLayout();break;case "closeButtonSize":this._performLayout();break;case "isModal":this._refresh();this._fixWindowZIndex();break;case "keyboardCloseKey":this._removeEventHandlers();
this._addEventHandlers();break;case "disabled":if(g)this.disable();else{this.disabled=true;this.enable()}break;case "showCloseButton":case "showCollapseButton":this._performLayout();break;case "height":this._performLayout();break;case "width":this._performLayout();break;case "title":this.setTitle(g);break;case "content":this.setContent(g);break;case "draggable":this._removeEventHandlers();this._addEventHandlers();this._initializeResize();break;case "resizable":if(this.collapsed&&g)this.resizable=
h;else if(g)this._initializeResize();else this._removeResize();break;case "position":this._positionWindow();break;case "modalOpacity":this._setModalBackgroundStyles();break;case "okButton":if(g)this._addDialogButtonsHandlers();else this.removeHandler(this.okButton);break;case "cancelButton":if(g)this._addDialogButtonsHandlers();else this.removeHandler(this.cancelButton);break;case "collapsed":if(g){if(!h){this.collapsed=false;this.collapse(0)}}else if(h){this.collapsed=true;this.expand(0)}case "theme":a.jqx.utilities.setTheme(h,
g,this.host);break;case "enableResize":return;default:return}},collapse:function(g){if(!this.collapsed&&!this.host.is(":animated")){if(this.enableResize){this._enableResizeCollapseBackup=true;this.enableResize=false}var e=this,h=this._header.outerHeight(true),i=parseInt(this._header.css("border-bottom-width"),10),f=parseInt(this._header.css("margin-bottom"),10),g=!isNaN(parseInt(g))?g:this.collapseAnimationDuration;if(!isNaN(i))h-=2*i;if(!isNaN(f))h+=f;this._heightBeforeCollapse=this.host.height();
this._minHeightBeforeCollapse=this.host.css("min-height");this.host.css("min-height",h);this.host.animate({height:h},g,function(){e.collapsed=true;e._collapseButton.addClass(e.toThemeProperty("jqx-window-collapse-button-collapsed"));e._content.css("display","none");e._raiseEvent(5)})}},expand:function(f){if(this.collapsed&&!this.host.is(":animated")){var e=this,f=!isNaN(parseInt(f))?f:this.collapseAnimationDuration;this.host.animate({height:this._heightBeforeCollapse},f,function(){e.collapsed=false;
e.host.css("min-height",e._minHeightBeforeCollapse);e._collapseButton.removeClass(e.toThemeProperty("jqx-window-collapse-button-collapsed"));if(e._enableResizeCollapseBackup)e.enableResize=true;e._content.css("display","block");e._raiseEvent(6);e._performWidgetLayout()})}},closeAll:function(h){h=typeof h==="object"?false:h;var g=a.data(document.body,"jqxwindows-list"),f=g.length,e=a.data(document.body,"jqxwindow-modal")||[];while(f){f-=1;if(this._toClose(h,g[f])){g[f].jqxWindow("closeWindow","close");
g.splice(f,1)}}if(this._toClose(h,e)){e.jqxWindow("closeWindow","close");a.data(document.body,"jqxwindow-modal",[])}a.data(document.body,"jqxwindows-list",g)},setTitle:function(e){this._headerContentWrapper.html(e);this._performLayout()},setContent:function(f){this._contentInitialized=false;var e=this._content,g=false;while(!g){e.css("height","auto");e.css("width","auto");if(e.is(".jqx-window"))g=true;else e=e.parent()}this._content.html(f);this._performLayout()},disable:function(){this.disabled=
true;this._removeEventHandlers();this._header.addClass(this.toThemeProperty("jqx-window-header-disabled"));this._closeButton.addClass(this.toThemeProperty("jqx-window-close-button-disabled"));this._collapseButton.addClass(this.toThemeProperty("jqx-window-collapse-button-disabled"));this._content.addClass(this.toThemeProperty("jqx-window-content-disabled"));this.host.addClass(this.toThemeProperty("jqx-window-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._removeResize()},
enable:function(){if(this.disabled){this._addEventHandlers();this._header.removeClass(this.toThemeProperty("jqx-window-header-disabled"));this._content.removeClass(this.toThemeProperty("jqx-window-content-disabled"));this._closeButton.removeClass(this.toThemeProperty("jqx-window-close-button-disabled"));this._collapseButton.removeClass(this.toThemeProperty("jqx-window-collapse-button-disabled"));this.host.removeClass(this.toThemeProperty("jqx-window-disabled"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));
this.disabled=false;this._initializeResize()}},isOpen:function(){return this._visible},closeWindow:function(f){var e=this;f=typeof f==="undefined"?this.closeButtonAction:f;this.hide(function(){if(f==="close")e._destroy()})},bringToFront:function(){var f=a.data(document.body,"jqxwindows-list"),l=f[f.length-1],k=parseInt(l.css("z-index"),10),g=this._indexOf(this.host,f);for(var e=f.length-1;e>g;e-=1){var h=parseInt(f[e].css("z-index"),10)-1;f[e].css("z-index",h)}this.host.css("z-index",k);this._sortByStyle("z-index",
f)},hide:function(g,f,e){f=f||this.closeAnimationDuration;switch(this.animationType){case "none":this.host.css("display","none");break;case "fade":this.host.fadeOut(f,function(){if(g instanceof Function)g()});case "slide":this.host.slideUp(f,function(){if(g instanceof Function)g()});case "combined":this.host.hide(f,function(){if(g instanceof Function)g()})}this._visible=false;if(this.isModal)this._modalBackground.hide();if(e!==true){this._raiseEvent(1);this._raiseEvent(8)}},open:function(f,e){this.show(f,
e)},close:function(g,f,e){this.hide(g,f,e)},show:function(h,g){this._setDialogResult("none");g=g||this.showAnimationDuration;switch(this.animationType){case "none":this.host.css("display","block");break;case "fade":this.host.fadeIn(g,function(){if(h instanceof Function)h()});case "slide":this.host.slideDown(g,function(){if(h instanceof Function)h()});case "combined":this.host.show(g,function(){if(h instanceof Function)h()})}if(this.isModal)this._modalBackground.show();var f=this;if(!this._visible)if(g>
150&&this.animationType!="none")setTimeout(function(){if(!f._contentInitialized)if(f.initContent)f.initContent();f._raiseEvent(7)},g-150);else{if(!f._contentInitialized)if(f.initContent)f.initContent();this._raiseEvent(7)}this._visible=true;this._performLayout();var e=function(){f._content.focus()};e();setTimeout(function(){e()},100)},_getTabbables:function(){var f=this._content.find("*");var e=new Array;a.each(f,function(){if(d(this))e[e.length]=this});return e},move:function(n,m,e,h){var g=0,f=
0,l,k,i,n=parseInt(n,10),m=parseInt(m,10);if(a.browser.msie){if(a(window).width()>a(document).width()&&!this.dragArea)f=this._SCROLL_WIDTH;if(a(window).height()<a(document).height()&&document.documentElement.clientWidth>document.documentElement.scrollWidth&&!this.dragArea)g=this._SCROLL_WIDTH}l=this._validateCoordinates(n,m,f,g);if(parseInt(this.host.css("left"),10)!==l.x||parseInt(this.host.css("top"),10)!==l.y){if(e){k=this._isTouchDevice?e.originalEvent.touches[0].pageX:e.pageX;i=this._isTouchDevice?
e.originalEvent.touches[0].pageY:e.pageY}if(h!==false)this._raiseEvent(2,l.x,l.y,k,i)}this.element.style.left=l.x+"px";this.element.style.top=l.y+"px"}});function c(g,e){var k=g.nodeName.toLowerCase();if("area"===k){var i=g.parentNode,h=i.name,f;if(!g.href||!h||i.nodeName.toLowerCase()!=="map")return false;f=a("img[usemap=#"+h+"]")[0];return!!f&&b(f)}return(/input|select|textarea|button|object/.test(k)?!g.disabled:"a"==k?g.href||e:e)&&b(g)}function b(e){return!a(e).parents().andSelf().filter(function(){return a.css(this,
"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function d(g){var e=a.attr(g,"tabindex"),f=isNaN(e);return(f||e>=0)&&c(g,!f)}})(jQuery);
var resizeModule=function(a){return{resizeConfig:function(){this.resizeTarget=null;this.resizeIndicatorSize=10;this.resizeTargetChildren=null;this.isResizing=false;this.resizeArea=false;this.minWidth=1;this.maxWidth=100;this.minHeight=1;this.maxHeight=100;this.resizeParent=null;this.enableResize=true;this._cursorBackup;this._resizeEvents=["resizing","resized","resize"];this._resizeMouseDown=false;this._resizeCurrentMode=null;this._mouseResizePosition={};this._resizeMethods=null;this._SCROLL_WIDTH=
21},_resizeExceptions:{invalidTarget:"Invalid target!",invalidMinHeight:"Invalid minimal height!",invalidMaxHeight:"Invalid maximum height!",invalidMinWidth:"Invalid minimum width!",invalidMaxWidth:"Invalid maximum width!",invalidIndicatorSize:"Invalid indicator size!",invalidSize:"Invalid size!"},removeResize:function(){if(this.resizeTarget){var d=a(this.resizeTarget.children(".jqx-resize"));d.detach();var c=d.children();this._removeResizeEventListeners();for(var b=0;b<c.length;b+=1){a(c[b]).detach();
this.resizeTarget.append(c[b])}d.remove()}},initResize:function(c){this.resizeConfig();this.resizeTarget=a(c.target);this.resizeIndicatorSize=c.indicatorSize||10;if(this.resizeTarget.is("textarea")){var b=this._resizableTextArea();this.resizeIndicatorSize=this.resizeIndicatorSize>=10?this.resizeIndicatorSize:10}this.maxWidth=c.maxWidth||100;this.minWidth=c.minWidth||1;this.maxHeight=c.maxHeight||100;this.minHeight=c.minHeight||1;this.resizeParent=c.resizeParent;this._parseResizeParentProperties();
this._validateResizeProperties();this._validateResizeTargetDimensions();this._getChildren(this.resizeTarget.maxWidth,this.resizeTarget.minWidth,this.resizeTarget.maxHeight,this.resizeTarget.minHeight,c.alsoResize,b);this._refreshResize();this._cursorBackup=this.resizeTarget.css("cursor");if(this._cursorBackup==="auto")this._cursorBackup="default"},_validateResizeTargetDimensions:function(){this.resizeTarget.maxWidth=this.maxWidth;this.resizeTarget.minWidth=3*this.resizeIndicatorSize>this.minWidth?
3*this.resizeIndicatorSize:this.minWidth;this.resizeTarget.maxHeight=this.maxHeight;this.resizeTarget.minHeight=3*this.resizeIndicatorSize>this.minHeight?3*this.resizeIndicatorSize:this.minHeight},_parseResizeParentProperties:function(){if(this.resizeParent){this.resizeParent.left=parseInt(this.resizeParent.left,10);this.resizeParent.top=parseInt(this.resizeParent.top,10);this.resizeParent.width=parseInt(this.resizeParent.width,10);this.resizeParent.height=parseInt(this.resizeParent.height,10)}},
_resizableTextArea:function(){var b=this.resizeTarget;b.wrap(a("<div></div>"));this.resizeTarget=b.parent();this.resizeTarget.css({position:"absolute",left:b.offset().left,top:b.offset().top,margin:"5px"});b.css({"z-index":0,position:"relative",top:"0px",left:"0px",margin:this.resizeIndicatorSize+"px",resize:"none"});return b},_getChildren:function(g,d,f,h,b,c){this.resizeTargetChildren=a(b);this.resizeTargetChildren.toArray();this.resizeTargetChildren.push(c);var e=this.resizeTargetChildren.length;
while(e){e-=1;this.resizeTargetChildren[e]=a(this.resizeTargetChildren[e])}},_refreshResize:function(){this._renderResize();this._performResizeLayout();this._removeResizeEventListeners();this._addResizeEventHandlers()},_renderResize:function(){this.resizeTarget.wrapInner(a("<div></div>"));this._resizeWrapper=this.resizeTarget.children(0);this._resizeWrapper.addClass("jqx-resize");this._resizeWrapper.addClass("jqx-rc-all");this._resizeWrapper.css("z-index",8E3)},_performResizeLayout:function(){this._resizeWrapper.height(this.resizeTarget.height());
this._resizeWrapper.width(this.resizeTarget.width())},_removeResizeEventListeners:function(){var b=this.resizeTarget.attr("id");this._resizeWrapper.unbind("mousemove.resize"+b);this._resizeWrapper.unbind("mousedown.resize"+b);a(document).unbind("mousemove.resize"+b);a(document).unbind("mouseup.resize"+b)},_addResizeEventHandlers:function(){var e=this.resizeTarget.attr("id");var b=this;this._resizeWrapper.bind("mousemove.resize."+e,{self:this},function(f){b._resizeCursorChangeHandler(b,f)});this._resizeWrapper.bind("mousedown.resize."+
e,{self:this},function(f){b._resizeMouseDownHandler(b,f)});a(document).bind("mousemove.resize."+e,{self:this},function(f){b._resizeHandler(b,f)});a(document).bind("mouseup.resize."+e,{self:this},function(f){b._stopResizing(b,f)});try{if(document.referrer!=""||window.frameElement){var d=function(f){b._stopResizing(b,f)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",d,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",
d)}}catch(c){}},_stopResizing:function(b,c){if(b.enableResize){if(b.isResizing)b._raiseResizeEvent(1);b._resizeMouseDown=false;b.isResizing=false;b._resizeDirection=null;if(b.resizeTarget)b.resizeTarget.removeClass("jqx-disableselect")}if(b._cursorBackup=="undefined")b._cursorBackup="default";if(b._resizeWrapper)b._resizeWrapper.css("cursor",b._cursorBackup)},_resizeHandler:function(b,c){if(b.enableResize)if(b.isResizing&&b._resizeDirection){if(c.which===0&&a.browser.msie&&a.browser.version<9)b._stopResizing(c);
b._performResize(c.pageX,c.pageY);return false}else return b._resizeCaptureCursor(c.pageX,c.pageY)},_resizeCaptureCursor:function(c,b){if(this._resizeMouseDown&&!this.isResizing&&this._resizeDirection)if(c+3<this._mouseResizePosition.x||c-3>this._mouseResizePosition.x||b+3<this._mouseResizePosition.y||b-3>this._mouseResizePosition.y){this._changeCursor(c-parseInt(this.resizeTarget.css("left")),b-parseInt(this.resizeTarget.css("top")));this._mouseResizePosition={x:c,y:b};this._prepareResizeMethods(this._resizeDirection);
this._resizeBackupData();this.isResizing=true;this.resizeTarget.addClass("jqx-disableselect");return false}},_resizeBackupData:function(){this.resizeTarget.lastWidth=this.resizeTarget.width();this.resizeTarget.lastHeight=this.resizeTarget.height();this.resizeTarget.x=parseInt(this.resizeTarget.css("left"),10);this.resizeTarget.y=parseInt(this.resizeTarget.css("top"),10);this._resizeBackupChildrenSize()},_resizeBackupChildrenSize:function(){var b=this.resizeTargetChildren.length,c;while(b){b-=1;c=
this.resizeTargetChildren[b];this.resizeTargetChildren[b].lastWidth=c.width();this.resizeTargetChildren[b].lastHeight=c.height()}},_performResize:function(e,d){var c=e-this._mouseResizePosition.x,b=d-this._mouseResizePosition.y;if(this._resizeDirection)this._resize(this.resizeTarget,c,b)},_resizeCursorChangeHandler:function(b,c){if(b.enableResize)if(!b.isResizing)b._changeCursor(c.pageX-parseInt(b.resizeTarget.css("left")),c.pageY-parseInt(b.resizeTarget.css("top")))},_resizeMouseDownHandler:function(b,
c){if(b.enableResize)if(b._resizeDirection!==null){b._resizeMouseDown=true;b._mouseResizePosition.x=c.pageX;b._mouseResizePosition.y=c.pageY;c.preventDefault()}},_validateResizeProperties:function(){try{if(!this.resizeTarget||this.resizeTarget.length!==1)throw new Error(this._resizeExceptions.invalidTarget);if(this.minHeight<0||isNaN(parseInt(this.minHeight)))throw new Error(this._resizeExceptions.invalidMinHeight);if(this.maxHeight<=0||isNaN(parseInt(this.maxHeight)))throw new Error(this._resizeExceptions.invalidMaxHeight);
if(this.minWidth<0||isNaN(parseInt(this.minWidth)))throw new Error(this._resizeExceptions.invalidMinWidth);if(this.maxWidth<0||isNaN(parseInt(this.maxWidth)))throw new Error(this._resizeExceptions.invalidMaxWidth);if(this.resizeIndicatorSize<0||isNaN(parseInt(this.resizeIndicatorSize)))throw new Error(this._resizeExceptions.invalidIndicatorSize);if(this.minHeight>this.maxHeight||this.minWidth>this.maxWidth)throw new Error(this._resizeExceptions.invalidSize);if(this.resizeParent&&this.resizeParent.width&&
this.resizeParent.height&&this.resizeParent.left&&this.resizeParent.top&&(this.resizeParent.width<this.resizeTarget.width()||this.resizeParent.width<this.maxWidth||this.resizeParent.height<this.resizeTarget.height()||this.resizeParent.height<this.maxHeight))throw new Error(this._resizeExceptions.invalidSize);}catch(b){alert(b)}},_changeCursor:function(b,c){if(this.isResizing||this._resizeMouseDown)return;this.resizeArea=true;if(b<=this.resizeIndicatorSize&&b>=0&&c<=this.resizeIndicatorSize&&c>0){this._resizeWrapper.css("cursor",
"nw-resize");this._resizeDirection="topleft"}else if(c<=this.resizeIndicatorSize&&c>0&&b>=this.resizeTarget.width()-this.resizeIndicatorSize){this._resizeWrapper.css("cursor","ne-resize");this._resizeDirection="topright"}else if(c>=this.resizeTarget.height()-this.resizeIndicatorSize&&c<this.resizeTarget.height()&&b<=this.resizeIndicatorSize&&b>=0){this._resizeWrapper.css("cursor","sw-resize");this._resizeDirection="bottomleft"}else if(c>=this.resizeTarget.height()-this.resizeIndicatorSize&&c<this.resizeTarget.height()&&
b>=this.resizeTarget.width()-this.resizeIndicatorSize&&b<this.resizeTarget.width()){this._resizeWrapper.css("cursor","se-resize");this._resizeDirection="bottomright"}else if(b<=this.resizeIndicatorSize&&b>=0){this._resizeWrapper.css("cursor","e-resize");this._resizeDirection="left"}else if(c<=this.resizeIndicatorSize&&c>0){this._resizeWrapper.css("cursor","n-resize");this._resizeDirection="top"}else if(c>=this.resizeTarget.height()-this.resizeIndicatorSize&&c<this.resizeTarget.height()){this._resizeWrapper.css("cursor",
"n-resize");this._resizeDirection="bottom"}else if(b>=this.resizeTarget.width()-this.resizeIndicatorSize&&b<this.resizeTarget.width()){this._resizeWrapper.css("cursor","e-resize");this._resizeDirection="right"}else{this._resizeWrapper.css("cursor",this._cursorBackup);this._resizeDirection=null;this.resizeArea=false}},_prepareResizeMethods:function(b){this._resizeMethods=[];if(b.indexOf("left")>=0)this._resizeMethods.push(this._resizeLeft);if(b.indexOf("top")>=0)this._resizeMethods.push(this._resizeTop);
if(b.indexOf("right")>=0)this._resizeMethods.push(this._resizeRight);if(b.indexOf("bottom")>=0)this._resizeMethods.push(this._resizeBottom)},_validateResize:function(e,b,f,d,c){if(f==="horizontal"||f==="both")return this._validateWidth(e,d,c);else if(f==="vertical"||f==="both")return this._validateHeight(b,d,c);return{result:false,fix:0}},_getParent:function(){if(this.resizeParent!==null&&this.resizeParent!=="undefined"&&this.resizeParent.height&&this.resizeParent.width&&this.resizeParent.top&&this.resizeParent.left)return this.resizeParent;
return{left:0,top:0,width:a(document).width(),height:a(document).height()}},_validateHeight:function(d,h,g){var i=0,c=h.outerHeight(true)-h.height(),b=false,f=d,e=this._getParent();if(a(window).width()>a(document).width()&&a.browser.msie&&e.height===a(document).height())i=this._SCROLL_WIDTH;if(g==="bottom"&&d+h.position().top+i+c>e.height+e.top)return{fix:e.height-h.position().top-i-c+e.top,result:false};if(g==="top"&&h.lastHeight-d+h.y<e.top)return{fix:d+(h.lastHeight-d+h.y)-e.top,result:false};
if(d<h.minHeight)return{fix:h.minHeight,result:false};if(d>h.maxHeight)return{fix:h.maxHeight,result:false};return{result:true,fix:d}},_validateWidth:function(h,g,f){var i=0,c=g.outerWidth(true)-g.width(),b=false,e=h,d=this._getParent();if(a(window).height()<a(document).height()&&a.browser.msie&&document.documentElement.clientWidth>=document.documentElement.scrollWidth&&d.width===a(document).width())i=this._SCROLL_WIDTH;if(f==="right"&&h+g.position().left+i+c>d.width+d.left)return{fix:d.width-g.position().left-
i-c+d.left,result:false};if(f==="left"&&g.lastWidth-h+g.x<d.left)return{fix:h+(g.lastWidth-h+g.x)-d.left,result:false};if(h<g.minWidth)return{fix:g.minWidth,result:false};if(h>g.maxWidth)return{fix:g.maxWidth,result:false};return{result:true,fix:h}},_resize:function(e,c,b){var f=this._resizeDirection;for(method in this._resizeMethods)if(this._resizeMethods[method]instanceof Function){var d={element:e,x:c,y:b,self:this};this._resizeMethods[method](d)}this._performResizeLayout()},_setResizeChildrenSize:function(c,
d){var f=this.resizeTargetChildren.length;while(f){f--;if(d==="width"){var e=this.resizeTargetChildren[f].lastWidth-(this.resizeTarget.lastWidth-c);if(e<this.resizeTarget.maxWidth&&e>0)this.resizeTargetChildren[f].width(e)}else{var b=this.resizeTargetChildren[f].lastHeight-(this.resizeTarget.lastHeight-c);if(b<this.resizeTarget.maxHeight&&b>0)this.resizeTargetChildren[f].height(b)}}},_resizeRight:function(c){var d=c.element.lastWidth+c.x,b=c.self._validateResize(d,0,"horizontal",c.element,"right");
if(!b.result)d=b.fix;if(c.element.width()!==d){c.self._setResizeChildrenSize(d,"width");c.element.width(d);c.self._raiseResizeEvent(0)}return d},_resizeLeft:function(d){var e=d.element.lastWidth-d.x,c=d.self._validateResize(e,0,"horizontal",d.element,"left"),b=d.element.x+d.x;if(!c.result){b=d.element.x+(d.element.lastWidth-c.fix);e=c.fix;return}if(d.element.width()!==e){d.self._setResizeChildrenSize(e,"width");d.element.width(e);d.element.css("left",b);d.self._raiseResizeEvent(0)}return e},_resizeBottom:function(d){var c=
d.element.lastHeight+d.y,b=d.self._validateResize(0,c,"vertical",d.element,"bottom");if(!b.result)c=b.fix;if(d.element.height()!==c){d.self._setResizeChildrenSize(c,"height");d.element.height(c);d.self._raiseResizeEvent(0)}return c},_resizeTop:function(d){var c=d.element.lastHeight-d.y,b=d.self._validateResize(0,c,"vertical",d.element,"top"),e=d.element.y+d.y;if(!b.result){e=d.element.y+(d.element.lastHeight-b.fix);c=b.fix;return}if(d.element.height()!==c){d.self._setResizeChildrenSize(c,"height");
d.element.height(c);d.element.css("top",e);d.self._raiseResizeEvent(0)}return c},_raiseResizeEvent:function(d){var c=this._resizeEvents[d],e=a.Event(c),b={};b.width=this.resizeTarget.width();b.height=this.resizeTarget.height();e.args=b;if(d==0){var c=this._resizeEvents[2],f=a.Event(c);f.args=b;this.resizeTarget.trigger(f)}return this.resizeTarget.trigger(e)}}}(jQuery);$.extend($.jqx._jqxWindow.prototype,resizeModule);
(function(a){a.jqx.jqxWidget("jqxDocking","",{});a.extend(a.jqx._jqxDocking.prototype,{defineInstance:function(){this.orientation="horizontal";this.mode="default";this.floatingWindowOpacity=0.3;this.panelsRoundedCorners=true;this.disabled=false;this.width="auto";this.height="auto";this.windowsMode=null;this.cookies=false;this.cookieOptions={};this.windowsOffset=5;this._windowOptions={};this._draggedFired=false;this._dragging=false;this._draggingItem=null;this._panels=[];this._windows=[];this._indicator=
null;this._events=["dragEnd","dragStart"]},createInstance:function(){this._refresh(true);if(this.disabled){this.disabled=false;this.disable()}},refresh:function(b){if(!b)this._performLayout()},_refresh:function(b){this._render();this._removeClasses();this._addClasses();this._setWindowsOptions(true);this._performLayout();this._cookieHandler();this._cookieExporter();this._removeEventListeners();this._addEventListeners()},_addClasses:function(){this.host.addClass("jqx-docking");for(var b=0;b<this._panels.length;b+=
1){this._panels[b].addClass(this.toThemeProperty("jqx-docking-panel"));if(this.panelsRoundedCorners)this._panels[b].addClass(this.toThemeProperty("jqx-rc-all"))}for(var b=0;b<this._windows.length;b+=1)this._windows[b].addClass(this.toThemeProperty("jqx-docking-window"))},_removeClasses:function(){this.host.removeClass("jqx-docking");for(var b=0;b<this._panels.length;b+=1){this._panels[b].removeClass(this.toThemeProperty("jqx-docking-panel"));this._panels[b].removeClass(this.toThemeProperty("jqx-rc-all"))}for(var b=
0;b<this._windows.length;b+=1)this._windows[b].removeClass(this.toThemeProperty("jqx-docking-window"))},_render:function(){var b=this.host.children("div"),d;for(var c=0;c<b.length;c+=1){this._panels.push(a(b[c]));this._renderWindows(a(b[c]))}},_renderWindows:function(b){var d=b.children("div");for(var c=0;c<d.length;c+=1){this._windows.push(a(d[c]));a(d[c]).jqxWindow({theme:this.theme,enableResize:false,width:a(d[c]).css("width"),maxWidth:Number.MAX_VALUE});a(d[c]).detach();b.append(a(d[c]))}b.append('<div class="spacer" style="clear: both;"></div>')},
_performLayout:function(){this.host.css("width",this.width);this.host.css("height",this.height);this._performWindowsLayout();this._performPanelsLayout();this._performWindowsLayout()},_performPanelsLayout:function(){var b,e=this.host.width(),c=0;for(var d=0;d<this._panels.length;d+=1){b=this._panels[d];b.css("height","auto");b.css("min-width","auto");if(this.orientation==="vertical"){b.css("width","auto");b.css("float","none")}else{c+=this._handleHorizontalSize(b,c,e);if(d>0)b.css("margin-left",-this.windowsOffset)}b.css("min-width",
b.width())}if(this.orientation==="horizontal")if(c<e)this._fillContainer(e,c)},_handleHorizontalSize:function(b,c,g){var e=g/this._panels.length,d,f=b.outerWidth()-b.width();b.css("float","left");if(b.css("width")==="auto"||parseInt(b.css("width"),10)===0)b.width(e-f);if(c+b.outerWidth()>=g)if(c+e<g){d=e-f;b.css("min-width",d);b.width(d)}else{d=b.width()-(c+b.outerWidth()-g);b.css("min-width",d);b.width(d)}return b.outerWidth()},_fillContainer:function(f,b){var d=this._panels.length,e=this._panels[d-
1],c=f-b+e.width();if(a.browser.msie&&a.browser.version<9)c-=this._panels.length;e.width(c)},_performWindowsLayout:function(){var b;for(var c=0;c<this._windows.length;c+=1){b=this._getWindowOptions(this._windows[c]);if(this._windows[c].ischildof(this.host))if(b){if(b.mode!=="floating"){this._windows[c].css("margin",this.windowsOffset);this._windows[c].css("position","static")}}else if(this.mode!=="floating"){this._windows[c].css("position","static");this._windows[c].css("margin",this.windowsOffset)}this._setWindowSize(this._windows[c],
b)}},_setWindowSize:function(c,b){if(b.mode!=="floating")if(c.ischildof(this.host))if(this.orientation==="vertical")c.jqxWindow("width",c.parent().width()-(c.outerWidth()-c.width())-2*this.windowsOffset);else c.jqxWindow("width",c.parent().width()-(c.outerWidth()-c.width())-2*this.windowsOffset);this._setWindowOption(c,"size",{width:c.width(),height:c.height()})},_setWindowsOptions:function(b){for(var f=0;f<this._windows.length;f+=1){var g,c=this._windows[f].attr("id"),d=this._getWindowOptions(c);
if(!b)var e="TEDX";g=null;if(this.windowsMode&&this.windowsMode.hasOwnProperty(c)){g=this.windowsMode[c];this._setWindowOption(this._windows[f],"mode",g)}else if(typeof d!=="undefined"&&typeof d.mode==="undefined"){g=this.mode;this._setWindowOption(this._windows[f],"mode",g)}if(b){this._setWindowOption(this._windows[f],"resizable",true);if(g=="floating")this._windows[f].jqxWindow({enableResize:true});else this._windows[f].jqxWindow({enableResize:false});this._setWindowOption(this._windows[f],"size",
{height:this._windows[f].height(),width:this._windows[f].width()})}}},_removeEventListeners:function(){for(var b=0;b<this._windows.length;b+=1){this.removeHandler(this._windows[b],"moving",this._itemDragging);this.removeHandler(this._windows[b],"moved",this._itemDrop);this.removeHandler(this._windows[b],"resized",this._itemResized);this.removeHandler(this._windows[b],"collapse",this._collapsed);this.removeHandler(this._windows[b],"expand",this._expanded)}},_addEventListeners:function(){for(var b=
0;b<this._windows.length;b+=1)this._addEventListenersTo(this._windows[b]);var c=this;a(window).bind("resize."+this.element.id,function(d){c._performLayout()})},_addEventListenersTo:function(b){this.addHandler(b,"moving",this._itemDragging,{self:this});this.addHandler(b,"moved",this._itemDrop,{self:this});this.addHandler(b,"resized",this._itemResized,{self:this});this.addHandler(b,"collapse",this._collapsed,{self:this});this.addHandler(b,"expand",this._expanded,{self:this})},_itemDragging:function(g){var d=
g.data.self,f=a(g.target),e=d._getWindowOptions(f);f.removeClass(d.toThemeProperty("jqx-docking-window"));f.css("margin","0px");if(!d._dragging)d._prepareForDragging(f);if(e.mode==="floating")return;var b={x:g.args.pageX,y:g.args.pageY},c=d._getMouseOverPanel(b);if(c)d._mouseOverPanel(c,b);else d._mouseLeavePanel();if(!d._draggedFired){d._raiseEvent(1,{window:a(f).attr("id")});d._draggedFired=true}return g.preventDefault()},_prepareForDragging:function(c){this._dragging=true;var b={parent:c.parent(),
next:c.next(),prev:c.prev()};this._setWindowOption(c,"lastPosition",b);c.detach();a(document.body).append(c);this._setDraggingStyles(c);this._draggingItem=c},_setDraggingStyles:function(b){b.css({position:"absolute",left:b.offset().left,top:b.offset().top});b.fadeTo(0,this.floatingWindowOpacity)},_getMouseOverPanel:function(c){var e,b,g,f;for(var d=0;d<this._panels.length;d+=1)if(this._isMouseOverItem(this._panels[d],c,false))return this._panels[d];return null},_mouseOverPanel:function(c,b){if(this._dragging){var e=
c.children("div"),d=this._getHoverWindow(b,e);if(d==="indicator")return;var f=this._centerOffset(d,b);this._handleIndicator(c,d,f)}},_getHoverWindow:function(c,f){var e,b,h,g;if(this._isMouseOverItem(this._indicator,c,true))return"indicator";for(var d=0;d<f.length;d+=1)if(this._isMouseOverItem(a(f[d]),c,true))return a(f[d]);return null},_centerOffset:function(f,b){if(f){var e={x:f.offset().left,y:f.offset().top},g=f.height(),d=f.width(),c;c=e.y+g/2;if(b.y>c)return"next";return"prev"}return"all"},
_handleIndicator:function(c,d,e){var b=this._getIndicator(d);if(e==="all")if(this.orientation==="vertical")b.insertBefore(c.children(".spacer"));else c.append(b);else if(e==="prev")b.insertBefore(d);else b.insertAfter(d);this._resizeIndicator(b,c)},_getIndicator:function(){var b=this._indicator;if(!b)b=a('<div class="'+this.toThemeProperty("jqx-docking-drop-indicator")+'"></div>');this._indicator=b;this._indicator.css("margin",this.windowsOffset);if(this.orientation==="vertical")this._indicator.css("float",
"left");return b},_resizeIndicator:function(c,b){if(this.orientation==="horizontal"){c.width(b.width()-(c.outerWidth(true)-c.width()));c.height(this._draggingItem.height())}else{c.width(this._draggingItem.width());c.height(this._draggingItem.height())}},_mouseLeavePanel:function(b){if(this._indicator){this._indicator.remove();this._indicator=null}},_itemDrop:function(d){var b=d.data.self,c=a(d.currentTarget);b._dragging=false;if(b._indicator){c.detach();c.insertAfter(b._indicator);b._indicator.remove();
b._dropFixer(c)}else b._dropHandler(c);c.fadeTo(0,1);b._indicator=null;b._cookieExporter();b._draggedFired=false;b._raiseEvent(0,{window:c.attr("id")})},_dropFixer:function(b){b.css("position","static");b.addClass(this.toThemeProperty("jqx-docking-window"));b.css("margin",this.windowsOffset);b.jqxWindow("enableResize",false);if(this.orientation==="horizontal")this._fixWindowSize(b)},_dropHandler:function(c){var b=this._getWindowOptions(c);if(b.mode==="docked")this._dropDocked(c);else this._dropFloating(c)},
_dropDocked:function(d){var c=this._getWindowOptions(d),b=c.lastPosition;d.detach();if(b.next[0])d.insertBefore(b.next);else if(b.prev[0])d.insertAfter(b.prev);else b.parent.append(d);this._dropFixer(d)},_fixWindowSize:function(b){a(b).jqxWindow({width:b.parent().width()-(b.outerWidth()-b.width())-2*parseInt(this.windowsOffset,10)})},_itemResized:function(d){var b=d.data.self,c=a(d.currentTarget);b._setWindowOption(c,"size",{width:d.args.width,height:d.args.height});b._cookieExporter()},_dropFloating:function(c){var b;
if(!a(c).jqxWindow("collapsed")){b=this._getWindowOptions(c);a(c).jqxWindow("enableResize",b.resizable)}a(document.body).append(c);this._restoreWindowSize(c)},_restoreWindowSize:function(c){var b=this._getWindowOptions(c);a(c).jqxWindow({width:b.size.width})},_isMouseOverItem:function(i,e,d){if(!i)return false;var j=i.outerWidth(true),g=i.outerHeight(true),b=i.width(),h=i.height(),f=i.offset().top,c=i.offset().left;if(d){f-=(g-h)/2;c-=(j-b)/2;b=j;h=g}if(c<=e.x&&c+b>=e.x&&f<=e.y&&f+h+2*this._draggingItem.height()/
3>=e.y)return true;return false},_cookieHandler:function(){if(this.cookies){var b=a.jqx.cookie.cookie("jqxDocking"+this.element.id);if(b!==null){this.importLayout(b);layoutImported=true}}},_cookieExporter:function(){if(this.cookies)a.jqx.cookie.cookie("jqxDocking"+this.element.id,this.exportLayout(),this.cookieOptions)},_indexOf:function(c,d){for(var b=0;b<d.length;b+=1)if(c[0]===d[b][0])return b;return-1},_exportFixed:function(){var e=[],g="",b,f;for(var d=0;d<this._panels.length;d+=1){g+='"panel'+
d+'": {';b=this._panels[d].children();for(var c=0;c<b.length;c+=1){f=a(b[c]);if(f.attr("id")){e.push(f);g+='"'+f.attr("id")+'":{"collapsed":'+f.jqxWindow("collapsed")+"},"}}if(b.length>1)g=g.substring(0,g.length-1);g+="},"}g=g.substring(0,g.length-1);return{JSON:g,children:e}},_exportFloating:function(c){var e="",d;e+='"floating":{';for(var b=0;b<this._windows.length;b+=1){d=a(this._windows[b]);if(this._indexOf(d,c)===-1)e+='"'+d.attr("id")+'":{"x":"'+d.css("left")+'","y":"'+d.css("top")+'","width":"'+
d.jqxWindow("width")+'","height":"'+d.jqxWindow("height")+'","collapsed":'+d.jqxWindow("collapsed")+"},"}if(e.substring(e.length-1,e.length)===",")e=e.substring(0,e.length-1);e+="}";return e},_importFixed:function(b){for(var c in b)if(c!=="orientation"&&c!=="floating"&&b.hasOwnProperty(c)){order=c.substring(c.length-1,c.length);order=parseInt(order,10);children=b[c];for(var c in children){a("#"+c).css("position","static");if(children[c].collapsed)(function(d){setTimeout(function(){a("#"+d).jqxWindow("collapsed",
true)},0)})(c);this._panels[order].append(a("#"+c));if(this.orientation==="horizontal")this._fixWindowSize(a("#"+c))}}},_importFloating:function(d){var f=d.floating,c,b;for(var e in f)if(f.hasOwnProperty(e)){a("#"+e).css("position","absolute");a(document.body).append(a("#"+e));b=this._dragging;a("#"+e).jqxWindow("move",f[e].x,f[e].y);this._dragging=b;a("#"+e).jqxWindow("width",f[e].width);a("#"+e).jqxWindow("height",f[e].height);a("#"+e).jqxWindow("enableResize",true);this._setWindowsOptions(true);
(function(g){setTimeout(function(){a("#"+g).jqxWindow("collapsed",f[g].collapsed)},0)})(e);a("#"+e).fadeTo(0,1)}},_getWindowOptions:function(b){if(typeof b==="object"&&b!==null)if(b.length>0)b=b.attr("id");else b=b.id;return this._windowOptions[b]},_setWindowOption:function(c,b,d){if(typeof c==="object"&&c!==null)if(c.length>0)c=c.attr("id");else c=c.id;if(typeof this._windowOptions[c]==="undefined")this._windowOptions[c]={};this._windowOptions[c][b]=d;if(b==="mode")this.setWindowMode(c,d)},_expanded:function(c){var b=
c.data.self;b._cookieExporter()},_collapsed:function(c){var b=c.data.self;b._cookieExporter()},_raiseEvent:function(b){var c=a.Event(this._events[b]);c.args=arguments[1];return this.host.trigger(c)},_moveWindow:function(e,c,b){var d=c.children();var g=null;var f=0;a.each(d,function(h){if(a(this).css("position")=="static"){if(f==b&&this!=e[0])g=this;f++}});if(f<=b)e.appendTo(c);else if(g!=null)e.insertBefore(g);e.css("position","static")},propertyChangedHandler:function(b,c,e,d){switch(c){case "theme":a.each(b._windows,
function(){this.jqxWindow({theme:d})});break;case "orientation":case "height":case "width":b._performLayout();b._cookieExporter();break;case "panelsRoundedCorners":b._removeClasses();b._addClasses();break;case "disabled":if(d){b.disabled=false;b.disable()}else{b.disabled=true;b.enable()}break;case "windowsMode":case "mode":b._setWindowsOptions(false);break;case "cookies":b._cookieExporter();break;case "windowsOffset":b._performLayout();break}},destroy:function(){this._removeEventListeners();this.host.remove();
this.windowsMode=null;this.cookieOptions=null;this._windowOptions=null;this._panels=null;this._windows=null;this._events=null},disable:function(){if(!this.disabled){this.disabled=true;this._removeEventListeners();for(var b=0;b<this._windows.length;b+=1){this._windows[b][0].style.opacity="";a(this._windows[b]).jqxWindow("disable")}}},enable:function(){if(this.disabled){this.disabled=false;this._addEventListeners();for(var b=0;b<this._windows.length;b+=1)a(this._windows[b]).jqxWindow("enable")}},move:function(f,
c,b){var c=this._panels[c];if(!c)return;var e=a(c.children(".spacer")),d;e.detach();f=a("#"+f);d=this._getWindowOptions(f);if(d.mode==="floating")return;else this._moveWindow(f,c,b);c.append(e);this._cookieExporter();this._dropFixer(f)},exportLayout:function(){var c="{",b=this._exportFixed();c+=b.JSON+","+this._exportFloating(b.children)+',"orientation": "'+this.orientation+'"';c+="}";return c},importLayout:function(g){try{var f=a.parseJSON(g),b,c;this.orientation=f.orientation;this._performLayout();
this._importFixed(f);this._importFloating(f)}catch(d){alert("Invalid JSON string.")}},setWindowMode:function(c,d){var c=a("#"+c),b=this._getWindowOptions(c);if(d==="floating"){c.css("position","absolute");this._windowOptions[c.attr("id")]["mode"]=d}else if(b.mode==="floating"&&c.css("position")==="absolute")if(b.lastPosition)this._dropDocked(c);else{this._panels[0].append(c);this._dropFixer(c)}this._windowOptions[c.attr("id")]["mode"]=d},hideCloseButton:function(b){a("#"+b).jqxWindow("showCloseButton",
false)},showCloseButton:function(b){a("#"+b).jqxWindow("showCloseButton",true)},hideCollapseButton:function(b){a("#"+b).jqxWindow("showCollapseButton",false)},showCollapseButton:function(b){a("#"+b).jqxWindow("showCollapseButton",true)},expandWindow:function(b,c){a("#"+b).jqxWindow("expand",c)},collapseWindow:function(b,c){a("#"+b).jqxWindow("collapse",c)},setWindowProperty:function(c,b,d){a("#"+c).jqxWindow(b,d)},getWindowProperty:function(c,b){return a("#"+c).jqxWindow(b)},setWindowPosition:function(d,
b,e){var d=a("#"+d),c=this._getWindowOptions(d);if(c.mode==="floating"){d.css("position","absolute");a(d).jqxWindow("move",b,e,null,false)}},hideAllCloseButtons:function(){for(var b=0;b<this._windows.length;b+=1)this._windows[b].jqxWindow("showCloseButton",false)},hideAllCollapseButtons:function(){for(var b=0;b<this._windows.length;b+=1)this._windows[b].jqxWindow("showCollapseButton",false)},showAllCloseButtons:function(){for(var b=0;b<this._windows.length;b+=1)this._windows[b].jqxWindow("showCloseButton",
true)},showAllCollapseButtons:function(){for(var b=0;b<this._windows.length;b+=1)this._windows[b].jqxWindow("showCollapseButton",true)},pinWindow:function(b){a("#"+b).jqxWindow("draggable",false)},unpinWindow:function(b){a("#"+b).jqxWindow("draggable",true)},setDraggingMode:function(c){var b=a("#"+c);this._prepareForDragging(b);b.fadeTo(0,1)},enableWindowResize:function(b){b=a("#"+b);if(b.css("position")==="absolute"){this._setWindowOption(b,"resizable",true);b.jqxWindow("enableResize",true)}},disableWindowResize:function(b){b=
a("#"+b);this._setWindowOption(b,"resizable",false);b.jqxWindow("enableResize",false)},addWindow:function(e,f,d,c){var b="#"+e;a(b).jqxWindow({theme:this.theme,enableResize:false,width:a(b).css("width"),maxWidth:Number.MAX_VALUE});this._panels[0].append(a(b));this._windows.push(a(b));if(f)this._setWindowOption(a(b),"mode",f);else this._setWindowOption(a(b),"mode",this.mode);this._setWindowOption(a(b),"size",{width:a(b).width(),height:a(b).height()});this._addEventListenersTo(a(b));if(typeof d!=="undefined"&&
typeof c!=="undefined")this.move(e,d,c);this._dropFixer(a(b))},closeWindow:function(b){a("#"+b).jqxWindow("closeWindow")}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxDockPanel","",{});a.extend(a.jqx._jqxDockPanel.prototype,{defineInstance:function(){this.width=null;this.height=null;this.lastchildfill=true;this.disabled=false;this.events=["layout"]},createInstance:function(c){var b=this;this.host.addClass(this.toThemeProperty("jqx-progressbar"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);
if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);this.childrenCount=a(this.host).children().length;this.host.wrapInner('<div style="overflow: hidden; width: 100%; height: 100%;" class="innerContainer"></div>');this.$wrapper=this.host.find(".innerContainer");this.$wrapper.css("position","relative");this.sizeCache=new Array;this.performLayout();a(window).resize(function(){b.refresh()})},
render:function(){this.sizeCache=new Array;this.performLayout()},performLayout:function(){if(this.disabled)return;var e=this.childrenCount;var d=0;var c=0;var b=0;var h=0;var f=this;var g={width:this.host.width(),height:this.host.height()};if(this.sizeCache.length<this.$wrapper.children().length)a.each(this.$wrapper.children(),function(i){var k=a(this);k.css("position","absolute");var j={width:k.css("width"),height:k.css("height")};f.sizeCache[i]=j});a.each(this.$wrapper.children(),function(j){var l=
this.getAttribute("dock");if(l==undefined)l="left";if(j==e-1&&f.lastchildfill)l="fill";var k=a(this);k.css("position","absolute");k.css("width",f.sizeCache[j].width);k.css("height",f.sizeCache[j].height);var i={width:k.outerWidth(),height:k.outerHeight()};var m={x:b,y:h,width:Math.max(0,g.width-(b+d)),height:Math.max(0,g.height-(h+c))};if(j<e)switch(l){case "left":b+=i.width;m.width=i.width;break;case "top":h+=i.height;m.height=i.height;break;case "right":d+=i.width;m.x=Math.max(0,g.width-d);m.width=
i.width;break;case "bottom":c+=i.height;m.y=Math.max(0,g.height-c);m.height=i.height;break}k.css("left",m.x);k.css("top",m.y);k.css("width",m.width);k.css("height",m.height)});this._raiseevent(0)},destroy:function(){},_raiseevent:function(g,d,f){if(this.isInitialized!=undefined&&this.isInitialized==true){var c=this.events[g];var e=new jQuery.Event(c);e.previousValue=d;e.currentValue=f;e.owner=this;var b=this.host.trigger(e);return b}},propertyChangedHandler:function(c,d,b,e){if(!this.isInitialized)return},
refresh:function(){this.performLayout()}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxMaskedInput","",{});a.extend(a.jqx._jqxMaskedInput.prototype,{defineInstance:function(){this.value=null;this.mask="99999";this.width=null;this.height=25;this.textAlign="left";this.readOnly=false,this.promptChar="_";this.inputMode="advanced";this.events=["valuechanged","textchanged","mousedown","mouseup","keydown","keyup","keypress"]},createInstance:function(b){this.render()},render:function(){this.element.innerHTML="";this.host.attr({role:"maskedinput"});this.host.addClass(this.toThemeProperty("jqx-input"));
this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));maskEditor=this;this.maskbox=a("<input autocomplete='off' type='textarea'/>").appendTo(this.host);this.maskbox.addClass(this.toThemeProperty("jqx-reset"));this.maskbox.addClass(this.toThemeProperty("jqx-input-content"));this.maskbox.addClass(this.toThemeProperty("jqx-widget-content"));var c=this.host.attr("name");if(!c)c=this.element.id;
this.maskbox.attr("name",c);var e=this;this.propertyChangeMap.disabled=function(g,k,h,l){if(l)g.maskbox.addClass(e.toThemeProperty("jqx-input-disabled"));else g.maskbox.removeClass(e.toThemeProperty("jqx-input-disabled"))};if(this.disabled){this.maskbox.addClass(this.toThemeProperty("jqx-input-disabled"));this.maskbox.attr("disabled",true);this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}this.selectedText="";this._addHandlers();this.self=this;this.oldValue=this._value();this.items=
new Array;this._initializeLiterals();this._render();if(this.value!=null)this.inputValue(this.value.toString());var e=this;var d=a.jqx.mobile.isOperaMiniMobileBrowser();if(d){this.inputMode="simple";this.addHandler(a(document),"click",e._exitSimpleInputMode,e)}this.addHandler(this.maskbox,"blur",function(g){if(e.inputMode=="simple"){e._exitSimpleInputMode(g,e,false);return false}e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus"))});this.addHandler(this.maskbox,"focus",function(g){if(e.inputMode==
"simple"){e.maskbox.val(e._getEditValue());a.data(e.maskbox,"simpleInputMode",true);return false}e.host.addClass(e.toThemeProperty("jqx-fill-state-focus"))});var e=this;if(this.host.parents("form").length>0)this.host.parents("form").bind("reset",function(){setTimeout(function(){e.clearValue()},10)});if(a.jqx.mobile.isChromeMobileBrowser()&&!d){var b="";var f=setInterval(function(){var h=a(e.maskbox).val();var g=e._selection();if(h.length<b.length){var k=g.start;if(k<e.items.length&&e.items[k].canEdit&&
e.items[k].character!=e.promptChar)e.items[k].character=e.promptChar;var h=e._getString();e.maskedValue(h);e._setSelectionStart(k)}if(h!=b)b=h},10)}},_exitSimpleInputMode:function(b,n,g){if(n==undefined)n=b.data;if(n==null)return;if(g==undefined){if(b.target!=null&&n.element!=null)if(b.target.id!=undefined&&b.target.id.toString().length>0&&n.host.find("#"+b.target.id).length>0||b.target==n.element)return;var e=n.host.offset();var d=e.left;var f=e.top;var c=n.host.width();var l=n.host.height();var o=
a(b.target).offset();if(o.left>=d&&o.left<=d+c)if(o.top>=f&&o.top<=f+l)return}if(n.disabled||n.readOnly)return;var k=a.data(n.maskbox,"simpleInputMode");if(k==null)return;var h=n.maskbox.val();n.inputValue(h,true);a.data(n.maskbox,"simpleInputMode",null);return false},_addHandlers:function(){var b=this;this.addHandler(this.maskbox,"mousedown",function(c){return b._raiseEvent(2,c)});this.addHandler(this.maskbox,"mouseup",function(c){return b._raiseEvent(3,c)});this.addHandler(this.maskbox,"keydown",
function(c){return b._raiseEvent(4,c)});this.addHandler(this.maskbox,"keyup",function(c){return b._raiseEvent(5,c)});this.addHandler(this.maskbox,"keypress",function(c){return b._raiseEvent(6,c)})},_getString:function(){var b="";for(i=0;i<this.items.length;i++){var c=this.items[i].character;if(this.items[i].character==this.promptChar&&this.promptChar!=this.items[i].defaultCharacter)b+=this.items[i].defaultCharacter;else b+=c}return b},_initializeLiterals:function(){if(this.mask==undefined||this.mask==
null){this.items=new Array;return}this.mask=this.mask.toString();var f=this.mask.length;for(i=0;i<f;i++){var g=this.mask.substring(i,i+1);var e="";var b=false;if(g=="#"){e="(\\d|[+]|[-])";b=true}else if(g=="9"||g=="0"){e="\\d";b=true}else if(g=="$")b=false;else if(g=="/"||g==":")b=false;else if(g=="A"||g=="a"){e="\\w";b=true}else if(g=="c"||g=="C"){e=".";b=true}else if(g=="L"||g=="l"){e="\\p{L}";b=true}var c=this;var d=function(l,k,h){d.character=l;d.regex=k;d.canEdit=h;d.defaultCharacter=c.promptChar};
if(b)d(this.promptChar,e,b);else d(g,e,b);this.items[i]=d}},setRegex:function(d,e,b,c){if(d==null||d==undefined||e==null||e==undefined)return;if(d<this.items.length){this.items[d].regex=e;if(b!=null&&b!=undefined)this.items[d].canEdit=b;if(c!=null&&c!=undefined)this.items[d].defaultCharacter=c}},_match:function(c,b){var d=new RegExp(b,"i");return d.test(c)},_raiseEvent:function(d,q){var p=this.events[d];var g={};g.owner=this;var o=q.charCode?q.charCode:q.keyCode?q.keyCode:0;var r=true;var n=this.readOnly;
var b=new jQuery.Event(p);b.owner=this;g.value=this.inputValue();g.text=this.maskedValue();b.args=g;r=this.host.trigger(b);if(this.inputMode!="simple")if(d==4){if(n||this.disabled)return false;var h=this;if(a.jqx.mobile.isChromeMobileBrowser()){var l=h._selection();window.setTimeout(function(){var s=a.data(h.maskbox,"selectionstart");if(s!=null&&s!=l.start)a.data(h.maskbox,"selectionstart",l.start);r=h._handleKeyDown(q,o)},25)}else r=this._handleKeyDown(q,o)}else if(d==5){if(n||this.disabled)r=false}else{if(d==
6){if(n||this.disabled)return false;r=this._handleKeyPress(q,o)}}else if(d==4||d==5||d==6){if(n||this.disabled)return false;var e=String.fromCharCode(o);var k=parseInt(e);var f=true;if(!isNaN(k)){f=true;var c=this.maskbox.val().toString().length;if(c>=this._getEditStringLength()&&this._selection().length==0)f=false}if(!q.ctrlKey&&!q.shiftKey)if(o>=65&&o<=90)f=false;return f}return r},_handleKeyPress:function(g,c){var d=this._selection();var b=this;if(g.ctrlKey&&c==97||g.ctrlKey&&c==65)return true;
if(c==8){if(d.start>0)b._setSelectionStart(d.start);return false}if(c==46){if(d.start<this.items.length)b._setSelectionStart(d.start);return false}if(a.browser.msie)this._insertKey(c);var f=this._isSpecialKey(c);return f},_insertKey:function(c){var d=this._selection();var b=this;if(d.start>=0&&d.start<this.items.length){var e=String.fromCharCode(c);var f=false;a.each(this.items,function(g,k){if(g<d.start)return;var h=b.items[g];if(!h.canEdit)return;if(b._match(e,h.regex)){if(!f&&d.length>0){for(j=
d.start;j<d.end;j++)if(b.items[j].canEdit)b.items[j].character=b.promptChar;var l=b._getString();b.maskedValue(l);f=true}h.character=e;var l=b._getString();b.maskedValue(l);if(d.start<b.items.length)b._setSelectionStart(g+1);return false}else return false})}},_deleteSelectedText:function(){var c=this._selection();var b=false;if(c.start>0||c.length>0){for(i=c.start;i<c.end;i++)if(i<this.items.length&&this.items[i].canEdit&&this.items[i].character!=this.promptChar){this.items[i].character=this.promptChar;
b=true}var d=this._getString();this.maskedValue(d);return b}},_saveSelectedText:function(){var b=this._selection();var c="";if(b.start>0||b.length>0)for(i=b.start;i<b.end;i++)if(this.items[i].canEdit)c+=this.items[i].character;window.clipboardData.setData("Text",c);return c},_pasteSelectedText:function(){var e=this._selection();var f="";var d=0;var b=e.start;var c=window.clipboardData.getData("Text");if(c!=this.selectedText&&c.length>0){this.selectedText=c;if(this.selectedText==null||this.selectedText==
undefined)return}if(e.start>=0||e.length>0)for(i=e.start;i<this.items.length;i++)if(this.items[i].canEdit)if(d<this.selectedText.length){this.items[i].character=this.selectedText[d];d++;b=1+i}var f=this._getString();this.maskedValue(f);if(b<this.items.length)this._setSelectionStart(b);else this._setSelectionStart(this.items.length)},_handleKeyDown:function(h,p){var o=this._selection();if(h.ctrlKey&&p==97||h.ctrlKey&&p==65)return true;if(h.ctrlKey&&p==120||h.ctrlKey&&p==88){this.selectedText=this._saveSelectedText(h);
this._deleteSelectedText(h);return false}if(h.ctrlKey&&p==99||h.ctrlKey&&p==67){this.selectedText=this._saveSelectedText(h);return false}if(h.ctrlKey&&p==122||h.ctrlKey&&p==90)return false;if(h.ctrlKey&&p==118||h.ctrlKey&&p==86||h.shiftKey&&p==45){this._pasteSelectedText();return false}if(o.start>=0&&o.start<this.items.length){var f=String.fromCharCode(p);var q=this.items[o.start]}if(p==8){if(o.length==0)for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit&&i<o.end&&this.items[i].character!=
this.promptChar){this._setSelection(i,i+1);break}o=this._selection();var g=this._deleteSelectedText();if(o.start>0||o.length>0)if(o.start<=this.items.length)if(g)this._setSelectionStart(o.start);else this._setSelectionStart(o.start-1);return false}if(p==190)for(i=0;i<this.items.length;i++)if(this.items[i].character=="."){this._setSelectionStart(i+1);break}if(p==46){if(o.length==0)for(i=0;i<this.items.length;i++)if(this.items[i].canEdit&&i>=o.start&&this.items[i].character!=this.promptChar){this._setSelection(i,
i+1);break}var b=o;o=this._selection();var d=this._deleteSelectedText();if(o.start>=0||o.length>=0)if(o.start<this.items.length)if(o.length<=1)if(b.end!=o.end)this._setSelectionStart(o.end);else this._setSelectionStart(o.end+1);else this._setSelectionStart(o.start);return false}if(a.browser.msie==null){var n=this.maskbox.val();var k=this;if(p>=96&&p<=105)p=p-48;k._insertKey(p);var c=this.maskbox.val();if(n.toString()!=c.toString())return false}var l=this._isSpecialKey(p);if(p==189)return false;if(!a.browser.mozilla)return true;
return l},_isSpecialKey:function(b){if(b!=8&&b!=9&&b!=13&&b!=35&&b!=36&&b!=37&&b!=39&&b!=46)return false;return true},_selection:function(){if("selectionStart"in this.maskbox[0]){var f=this.maskbox[0];var g=f.selectionEnd-f.selectionStart;return{start:f.selectionStart,end:f.selectionEnd,length:g,text:f.value}}else{var c=document.selection.createRange();if(c==null)return{start:0,end:f.value.length,length:0};var b=this.maskbox[0].createTextRange();var d=b.duplicate();b.moveToBookmark(c.getBookmark());
d.setEndPoint("EndToStart",b);var g=c.text.length;return{start:d.text.length,end:d.text.length+c.text.length,length:g,text:c.text}}},_setSelection:function(d,b){if("selectionStart"in this.maskbox[0]){this.maskbox[0].focus();this.maskbox[0].setSelectionRange(d,b)}else{var c=this.maskbox[0].createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",d);c.select()}},_setSelectionStart:function(b){this._setSelection(b,b)},refresh:function(b){if(!b)this._render()},_render:function(){var c=
parseInt(this.host.css("border-left-width"));var g=parseInt(this.host.css("border-left-width"));var f=parseInt(this.host.css("border-left-width"));var d=parseInt(this.host.css("border-left-width"));var k=parseInt(this.host.css("height"))-f-d;var e=parseInt(this.host.css("width"))-c-g;if(this.width!=null&&this.width.toString().indexOf("px")!=-1)e=this.width;else if(this.width!=undefined&&!isNaN(this.width))e=this.width;if(this.height!=null&&this.height.toString().indexOf("px")!=-1)k=this.height;else if(this.height!=
undefined&&!isNaN(this.height))k=this.height;e=parseInt(e);k=parseInt(k);this.maskbox.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0});this.maskbox.css("text-align",this.textAlign);var l=this.maskbox.css("font-size");if(!isNaN(k))this.maskbox.css("height",parseInt(l)+4+"px");if(!isNaN(e))this.maskbox.css("width",e-2);var h=parseInt(k)-2*parseInt(f)-2*parseInt(d)-parseInt(l);if(isNaN(h))h=0;if(!isNaN(k))this.host.height(k);if(!isNaN(e))this.host.width(e);
var b=h/2;if(a.browser.msie&&a.browser.version<8)b=h/4;this.maskbox.css("padding-right","0px");this.maskbox.css("padding-left","0px");this.maskbox.css("padding-top",b);this.maskbox.css("padding-bottom",h/2);this.maskbox.val(this._getString())},destroy:function(){this.element.removeClass("jqx-rc-all");this.maskbox.remove();this.element.remove()},maskedValue:function(b){if(b===undefined)return this._value();this.value=b;this._refreshValue();if(this.oldValue!==b){this._raiseEvent(1,b);this.oldValue=
b;this._raiseEvent(0,b)}return this},_value:function(){var b=this.maskbox.val();return b},propertyChangedHandler:function(c,d,b,e){if(this.isInitialized==undefined||this.isInitialized==false)return;if(d==="value"){if(e==undefined||e==null)e="";e=e.toString();this.inputValue(e)}if(d==="theme")a.jqx.utilities.setTheme(b,e,this.host);if(d=="disabled")if(e){c.maskbox.addClass(c.toThemeProperty("jqx-input-disabled"));c.host.addClass(c.toThemeProperty("jqx-fill-state-disabled"));c.maskbox.attr("disabled",
true)}else{c.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));c.host.removeClass(this.toThemeProperty("jqx-input-disabled"));c.maskbox.attr("disabled",false)}if(d=="readOnly")this.readOnly=e;if(d=="promptChar"){for(i=0;i<c.items.length;i++)if(c.items[i].character==c.promptChar){c.items[i].character=e;c.items[i].defaultCharacter=e}c.promptChar=e}if(d=="textAlign"){c.maskbox.css("text-align",e);c.textAlign=e}if(d=="mask"){c.mask=e;c.items=new Array;c._initializeLiterals();c.value=c._getString();
c._refreshValue()}if(d=="width"){c.width=e;c._render()}else if(d=="height"){c.height=e;c._render()}},_value:function(){var b=this.value;return b},_getEditStringLength:function(){var b="";for(i=0;i<this.items.length;i++)if(this.items[i].canEdit)b+=this.items[i].character;return b.length},_getEditValue:function(){var b="";for(i=0;i<this.items.length;i++)if(this.items[i].canEdit&&this.items[i].character!=this.promptChar)b+=this.items[i].character;return b},parseValue:function(e){if(e==undefined||e==
null)return null;var c=e.toString();var f="";var b=0;for(m=0;m<c.length;m++){var d=c.substring(m,m+1);for(i=b;i<this.items.length;i++)if(this.items[i].canEdit&&this._match(d,this.items[i].regex)){f+=d;b=i;break}}return f},clearValue:function(){this.inputValue("",true)},val:function(b){if(b!=undefined&&typeof b!="object")this.inputValue(b);return this.maskbox.val()},inputValue:function(f,c){if(f==undefined||f==null){var e="";for(i=0;i<this.items.length;i++)if(this.items[i].canEdit)e+=this.items[i].character;
return e}else{var b=0;if(typeof f=="number")f=f.toString();for(i=0;i<this.items.length;i++)if(this.items[i].canEdit)if(this._match(f.substring(b,b+1),this.items[i].regex)){this.items[i].character=f.substring(b,b+1);b++}else if(c)this.items[i].character=this.promptChar;var d=this._getString();this.maskedValue(d);return this.inputValue()}},_refreshValue:function(){var c=this.maskedValue();var b=0;for(i=0;i<this.items.length;i++)if(c.length>b){if(this.items[i].canEdit&&this.items[i].character!=c[b])if(this._match(c[b],
this.items[i].regex)&&c[b].length==1)this.items[i].character=c[b];b++}this.value=this._getString();c=this.value;this.maskbox.val(c)}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxMenu","",{});a.extend(a.jqx._jqxMenu.prototype,{defineInstance:function(){this.items=new Array;this.mode="horizontal";this.width=null;this.height=null;this.easing="easeInOutSine";this.animationShowDuration=200;this.animationHideDuration=200;this.autoCloseInterval=0;this.animationHideDelay=100;this.animationShowDelay=100;this.menuElements=new Array;this.autoSizeMainItems=false;this.autoCloseOnClick=true;this.autoCloseOnMouseLeave=true;this.enableRoundedCorners=true;
this.disabled=false;this.autoOpenPopup=true;this.enableHover=true;this.autoOpen=true;this.autoGenerate=true;this.clickToOpen=false;this.showTopLevelArrows=false;this.touchMode="auto";this.source=null;this.events=["shown","closed","itemclick","initialized"]},createInstance:function(d){var c=this;this.host.css("display","block");this.propertyChangeMap.disabled=function(h,k,j,l){if(c.disabled){c.host.addClass(c.toThemeProperty("jqx-fill-state-disabled"));c.host.addClass(c.toThemeProperty("jqx-menu-disabled"))}else{c.host.removeClass(c.toThemeProperty("jqx-fill-state-disabled"));
c.host.removeClass(c.toThemeProperty("jqx-menu-disabled"))}};this.setSize();var b=false;var f=this;if(f.width!=null&&f.width.toString().indexOf("%")!=-1)b=true;if(f.height!=null&&f.height.toString().indexOf("%")!=-1)b=true;a(window).bind("resize.menu"+this.element.id,function(){if(b){if(f.refreshTimer)clearTimeout(f.refreshTimer);f.refreshTimer=setTimeout(function(){f.refresh()},1)}});if(b)setInterval(function(){var j=f.host.width();var h=f.host.height();if(f._lastWidth!=j||f._lastHeight!=h)f.refresh();
f._lastWidth=j;f._lastHeight=h},100);if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.host.addClass(this.toThemeProperty("jqx-menu-disabled"))}this.host.attr("tabIndex",1);this.host.css("outline","none");if(this.source)if(this.source!=null){var e=this.loadItems(this.source);this.element.innerHTML=e}if(this.element.innerHTML.indexOf("UL")){var g=this.host.find("ul:first");if(g.length>0)this._createMenu(g[0])}this.host.data("autoclose",{});this._render();var f=
this;if(a.browser.msie&&a.browser.version<8)this.host.attr("hideFocus",true)},loadItems:function(c,e){if(c==null)return;if(c.length==0)return"";var b=this;this.items=new Array;var d="<ul>";if(e)d='<ul style="width:'+e+';">';a.map(c,function(f){if(f==undefined)return null;d+=b._parseItem(f)});d+="</ul>";return d},_parseItem:function(f){var c="";if(f==undefined)return null;var b=f.label;if(!f.label&&f.html)b=f.html;if(!b)b="Item";if(typeof f==="string")b=f;var e=false;if(f.selected!=undefined&&f.selected)e=
true;var d=false;if(f.disabled!=undefined&&f.disabled)d=true;c+="<li";if(d)c+=' item-disabled="true" ';if(f.label&&!f.html)c+=' item-label="'+b+'" ';if(f.value!=null)c+=' item-value="'+f.value+'" ';if(f.id!=undefined)c+=' id="'+f.id+'" ';c+=">"+b;if(f.items)if(f.subMenuWidth)c+=this.loadItems(f.items,f.subMenuWidth);else c+=this.loadItems(f.items);c+="</li>";return c},setSize:function(){if(this.width!=null&&this.width.toString().indexOf("%")!=-1)this.host.width(this.width);else if(this.width!=null&&
this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("%")!=-1)this.host.height(this.height);else if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height)},isTouchDevice:function(){if(this._isTouchDevice!=undefined)return this._isTouchDevice;
var b=a.jqx.mobile.isTouchDevice();if(this.touchMode==true)b=true;else if(this.touchMode==false)b=false;if(b){this.host.addClass(this.toThemeProperty("jqx-touch"));a(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))}this._isTouchDevice=b;return b},refresh:function(b){if(!b)this.setSize()},_closeAll:function(f){var d=f!=null?f.data:this;var b=d.items;a.each(b,function(){var e=this;if(e.hasItems==true)if(e.isOpen)d._closeItem(d,e)});if(d.mode=="popup")if(f!=null){var c=d._isRightClick(f);
if(!c)d.close()}},closeItem:function(e){if(e==null)return false;var b=e;var c=document.getElementById(b);var d=this;a.each(d.items,function(){var f=this;if(f.isOpen==true&&f.element==c){d._closeItem(d,f);if(f.parentId)d.closeItem(f.parentId)}});return true},openItem:function(e){if(e==null)return false;var b=e;var c=document.getElementById(b);var d=this;a.each(d.items,function(){var f=this;if(f.isOpen==false&&f.element==c){d._openItem(d,f);if(f.parentId)d.openItem(f.parentId)}});return true},_getClosedSubMenuOffset:function(c){var b=
a(c.subMenuElement);var f=-b.outerHeight();var e=-b.outerWidth();var d=c.level==0&&this.mode=="horizontal";if(d)e=0;else f=0;switch(c.openVerticalDirection){case "up":case "center":f=b.outerHeight();break}switch(c.openHorizontalDirection){case "left":if(d)e=0;else e=b.outerWidth();break;case "center":if(d)e=0;else e=b.outerWidth();break}return{left:e,top:f}},_closeItem:function(l,o,g,c){if(l==null||o==null)return false;var j=a(o.subMenuElement);var b=o.level==0&&this.mode=="horizontal";var f=this._getClosedSubMenuOffset(o);
var m=f.top;var e=f.left;$menuElement=a(o.element);var k=j.closest("div.jqx-menu-popup");if(k!=null){var h=l.animationHideDelay;if(c==true)h=0;if(j.data("timer").show!=null){clearTimeout(j.data("timer").show);j.data("timer").show=null}var n=function(){o.isOpen=false;if(!a.browser.msie&&this.animationtype=="fade");if(b){if(!a.browser.msie);j.stop().animate({top:m},l.animationHideDuration,function(){a(o.element).removeClass(l.toThemeProperty("jqx-fill-state-pressed"));a(o.element).removeClass(l.toThemeProperty("jqx-menu-item-top-selected"));
var p=a(o.arrow);if(p.length>0&&l.showTopLevelArrows){p.removeClass();if(o.openVerticalDirection=="down")p.addClass(l.toThemeProperty("jqx-menu-item-arrow-down"));else p.addClass(l.toThemeProperty("jqx-menu-item-arrow-up"))}k.css({display:"none"});if(l.animationHideDuration==0)j.css({top:m});l._raiseEvent("1",o)})}else{if(!a.browser.msie);j.stop().animate({left:e},l.animationHideDuration,function(){if(l.animationHideDuration==0)j.css({left:e});if(o.level>0){a(o.element).removeClass(l.toThemeProperty("jqx-fill-state-pressed"));
a(o.element).removeClass(l.toThemeProperty("jqx-menu-item-selected"));var p=a(o.arrow);if(p.length>0){p.removeClass();if(o.openHorizontalDirection!="left")p.addClass(l.toThemeProperty("jqx-menu-item-arrow-right"));else p.addClass(l.toThemeProperty("jqx-menu-item-arrow-left"))}}else{a(o.element).removeClass(l.toThemeProperty("jqx-fill-state-pressed"));a(o.element).removeClass(l.toThemeProperty("jqx-menu-item-top-selected"));var p=a(o.arrow);if(p.length>0){p.removeClass();if(o.openHorizontalDirection!=
"left")p.addClass(l.toThemeProperty("jqx-menu-item-arrow-top-right"));else p.addClass(l.toThemeProperty("jqx-menu-item-arrow-top-left"))}}k.css({display:"none"});l._raiseEvent("1",o)})}};if(h>0)j.data("timer").hide=setTimeout(function(){n()},h);else n();if(g!=undefined&&g){var d=j.children();a.each(d,function(){if(l.menuElements[this.id]&&l.menuElements[this.id].isOpen){var p=a(l.menuElements[this.id].subMenuElement);l._closeItem(l,l.menuElements[this.id],true,true)}})}}},getSubItems:function(j,h){if(j==
null)return false;var g=this;var c=new Array;if(h!=null)a.extend(c,h);var d=j;var f=this.menuElements[d];var b=a(f.subMenuElement);var e=b.find(".jqx-menu-item");a.each(e,function(){c[this.id]=g.menuElements[this.id];var k=g.getSubItems(this.id,c);a.extend(c,k)});return c},disable:function(g,d){if(g==null)return;var c=g;var f=this;if(this.menuElements[c]){var e=this.menuElements[c];e.disabled=d;var b=a(e.element);e.element.disabled=d;a.each(b.children(),function(){this.disabled=d});if(d){b.addClass(f.toThemeProperty("jqx-menu-item-disabled"));
b.addClass(f.toThemeProperty("jqx-fill-state-disabled"))}else{b.removeClass(f.toThemeProperty("jqx-menu-item-disabled"));b.removeClass(f.toThemeProperty("jqx-fill-state-disabled"))}}},_setItemProperty:function(g,c,f){if(g==null)return;var b=g;var e=this;if(this.menuElements[b]){var d=this.menuElements[b];if(d[c])d[c]=f}},setItemOpenDirection:function(d,c,e){if(d==null)return;var k=d;var g=this;var f=a.browser.msie&&a.browser.version<8;if(this.menuElements[k]){var j=this.menuElements[k];if(c!=null){j.openHorizontalDirection=
c;if(j.hasItems&&j.level>0){var h=a(j.element);if(h!=undefined){var b=a(j.arrow);if(j.arrow==null){b=a('<span id="arrow'+h[0].id+'"></span>');if(!f)b.prependTo(h);else b.appendTo(h)}b.removeClass();if(j.openHorizontalDirection=="left")b.addClass(g.toThemeProperty("jqx-menu-item-arrow-left"));else b.addClass(g.toThemeProperty("jqx-menu-item-arrow-right"));b.css("visibility","visible");if(!f){b.css("display","block");b.css("float","right")}else{b.css("display","inline-block");b.css("float","none")}}}}if(e!=
null){j.openVerticalDirection=e;var b=a(j.arrow);var h=a(j.element);if(h!=undefined){if(j.arrow==null){b=a('<span id="arrow'+h[0].id+'"></span>');if(!f)b.prependTo(h);else b.appendTo(h)}b.removeClass();if(j.openVerticalDirection=="down")b.addClass(g.toThemeProperty("jqx-menu-item-arrow-down"));else b.addClass(g.toThemeProperty("jqx-menu-item-arrow-up"));b.css("visibility","visible");if(!f){b.css("display","block");b.css("float","right")}else{b.css("display","inline-block");b.css("float","none")}}}}},
_getSiblings:function(c){var d=new Array;var b=0;for(i=0;i<this.items.length;i++){if(this.items[i]==c)continue;if(this.items[i].parentId==c.parentId&&this.items[i].hasItems)d[b++]=this.items[i]}return d},_openItem:function(s,r,q){if(s==null||r==null)return false;if(r.isOpen)return false;if(r.disabled)return false;if(s.disabled)return false;var l=1E3;if(q!=undefined)l=q;var e=s.animationHideDuration;s.animationHideDuration=0;s._closeItem(s,r,true,true);s.animationHideDuration=e;this.host.focus();var f=
[5,5];var t=a(r.subMenuElement);if(t!=null)t.stop();if(t.data("timer").hide!=null)clearTimeout(t.data("timer").hide);var o=t.closest("div.jqx-menu-popup");var h=a(r.element);var j=r.level==0?this._getOffset(r.element):h.position();if(r.level>0&&this.hasTransform){var p=parseInt(h.offset().top)-parseInt(this._getOffset(r.element).top);j.top+=p}if(r.level==0&&this.mode=="popup")j=h.offset();var k=r.level==0&&this.mode=="horizontal";var b=k?j.left:this.menuElements[r.parentId]!=null&&this.menuElements[r.parentId].subMenuElement!=
null?parseInt(a(a(this.menuElements[r.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-f[0]:parseInt(t.outerWidth());o.css({visibility:"visible",display:"block",left:b,top:k?j.top+h.outerHeight():j.top,zIndex:l});t.css("display","block");if(this.mode!="horizontal"&&r.level==0){var d=this._getOffset(this.element);o.css("left",-1+d.left+this.host.outerWidth());t.css("left",-t.outerWidth())}else{var c=this._getClosedSubMenuOffset(r);t.css("left",c.left);t.css("top",c.top)}o.css({height:parseInt(t.outerHeight())+
parseInt(f[1])+"px"});var n=0;var g=0;switch(r.openVerticalDirection){case "up":if(k){t.css("top",t.outerHeight());n=f[1];o.css({display:"block",top:j.top-o.outerHeight(),zIndex:l})}else{n=f[1];t.css("top",t.outerHeight());o.css({display:"block",top:j.top-o.outerHeight()+f[1]+h.outerHeight(),zIndex:l})}break;case "center":if(k){t.css("top",0);o.css({display:"block",top:j.top-o.outerHeight()/2+f[1],zIndex:l})}else{t.css("top",0);o.css({display:"block",top:j.top+h.outerHeight()/2-o.outerHeight()/2+
f[1],zIndex:l})}break}switch(r.openHorizontalDirection){case "left":if(k)o.css({left:j.left-(o.outerWidth()-h.outerWidth()-f[0])});else{g=f[0];t.css("left",o.outerWidth());o.css({left:j.left-o.outerWidth()})}break;case "center":if(k)o.css({left:j.left-(o.outerWidth()/2-h.outerWidth()/2-f[0]/2)});else{o.css({left:j.left-(o.outerWidth()/2-h.outerWidth()/2-f[0]/2)});t.css("left",o.outerWidth())}break}if(k){if(parseInt(t.css("top"))==n){r.isOpen=true;return}}else if(parseInt(t.css("left"))==g){r.isOpen==
true;return}a.each(s._getSiblings(r),function(){s._closeItem(s,this,true,true)});var m=a.data(s.element,"animationHideDelay");s.animationHideDelay=m;if(this.autoCloseInterval>0){if(this.host.data("autoclose")!=null&&this.host.data("autoclose").close!=null)clearTimeout(this.host.data("autoclose").close);if(this.host.data("autoclose")!=null)this.host.data("autoclose").close=setTimeout(function(){s._closeAll()},this.autoCloseInterval)}t.data("timer").show=setTimeout(function(){if(o!=null)if(k){t.stop();
t.css("left",g);if(!a.browser.msie);h.addClass(s.toThemeProperty("jqx-fill-state-pressed"));h.addClass(s.toThemeProperty("jqx-menu-item-top-selected"));var u=a(r.arrow);if(u.length>0&&s.showTopLevelArrows){u.removeClass();if(r.openVerticalDirection=="down")u.addClass(s.toThemeProperty("jqx-menu-item-arrow-down-selected"));else u.addClass(s.toThemeProperty("jqx-menu-item-arrow-up-selected"))}if(s.animationShowDuration==0){t.css({top:n});r.isOpen=true;s._raiseEvent("0",r)}else t.animate({top:n},s.animationShowDuration,
s.easing,function(){r.isOpen=true;s._raiseEvent("0",r)})}else{t.stop();t.css("top",n);if(!a.browser.msie);if(r.level>0){h.addClass(s.toThemeProperty("jqx-fill-state-pressed"));h.addClass(s.toThemeProperty("jqx-menu-item-selected"));var u=a(r.arrow);if(u.length>0){u.removeClass();if(r.openHorizontalDirection!="left")u.addClass(s.toThemeProperty("jqx-menu-item-arrow-right-selected"));else u.addClass(s.toThemeProperty("jqx-menu-item-arrow-left-selected"))}}else{h.addClass(s.toThemeProperty("jqx-fill-state-pressed"));
h.addClass(s.toThemeProperty("jqx-menu-item-top-selected"));var u=a(r.arrow);if(u.length>0){u.removeClass();if(r.openHorizontalDirection!="left")u.addClass(s.toThemeProperty("jqx-menu-item-arrow-right-selected"));else u.addClass(s.toThemeProperty("jqx-menu-item-arrow-left-selected"))}}if(!a.browser.msie);if(s.animationShowDuration==0){t.css({left:g});s._raiseEvent("0",r);r.isOpen=true}else t.animate({left:g},s.animationShowDuration,s.easing,function(){s._raiseEvent("0",r);r.isOpen=true})}},this.animationShowDelay)},
_applyOrientation:function(h,c){var f=this;var e=0;this.host.removeClass(f.toThemeProperty("jqx-menu-horizontal"));this.host.removeClass(f.toThemeProperty("jqx-menu-vertical"));this.host.removeClass(f.toThemeProperty("jqx-menu"));this.host.removeClass(f.toThemeProperty("jqx-widget"));this.host.addClass(f.toThemeProperty("jqx-widget"));this.host.addClass(f.toThemeProperty("jqx-menu"));if(h!=undefined&&c!=undefined&&c=="popup"){if(this.host.parent().length>0&&this.host.parent().parent().length>0&&this.host.parent().parent()[0]==
document.body){var g=a.data(document.body,"jqxMenuOldHost"+this.element.id);if(g!=null){var d=this.host.closest("div.jqx-menu-wrapper");d.remove();d.appendTo(g);this.host.css("display","block");this.host.css("visibility","visible");d.css("display","block");d.css("visibility","visible")}}}else if(h==undefined&&c==undefined)a.data(document.body,"jqxMenuOldHost"+this.element.id,this.host.parent()[0]);if(this.autoOpenPopup)if(this.mode=="popup"){a(document).bind("contextmenu",function(j){return false});
a(document).bind("mousedown.menu"+this.element.id,f,this._openContextMenu)}else{a(document).unbind("contextmenu");a(document).unbind("mousedown.menu"+this.element.id,this._openContextMenu)}else{a(document).unbind("contextmenu");a(document).unbind("mousedown.menu"+this.element.id,this._openContextMenu)}switch(this.mode){case "horizontal":this.host.addClass(f.toThemeProperty("jqx-widget-header"));this.host.addClass(f.toThemeProperty("jqx-menu-horizontal"));a.each(this.items,function(){var l=this;$element=
a(l.element);var k=a(l.arrow);k.removeClass();if(l.hasItems&&l.level>0){var k=a('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');k.prependTo($element);k.css("float","right");k.addClass(f.toThemeProperty("jqx-menu-item-arrow-right"));l.arrow=k[0]}if(l.level==0){a(l.element).css("float","left");if(!l.ignoretheme&&l.hasItems&&f.showTopLevelArrows){var k=a('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');
var j=a.browser.msie&&a.browser.version<8;if(l.arrow==null)if(!j)k.prependTo($element);else k.appendTo($element);else k=a(l.arrow);if(l.openVerticalDirection=="down")k.addClass(f.toThemeProperty("jqx-menu-item-arrow-down"));else k.addClass(f.toThemeProperty("jqx-menu-item-arrow-up"));k.css("visibility","visible");if(!j){k.css("display","block");k.css("float","right")}else k.css("display","inline-block");l.arrow=k[0]}else if(!l.ignoretheme&&l.hasItems&&!f.showTopLevelArrows)if(l.arrow!=null){var k=
a(l.arrow);k.remove();l.arrow=null}e=Math.max(e,$element.height())}});break;case "vertical":case "popup":this.host.addClass(f.toThemeProperty("jqx-menu-vertical"));a.each(this.items,function(){var k=this;$element=a(k.element);if(k.hasItems&&!k.ignoretheme){if(k.arrow)a(k.arrow).remove();var j=a('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');j.prependTo($element);j.css("float","right");if(k.level==0)j.addClass(f.toThemeProperty("jqx-menu-item-arrow-top-right"));
else j.addClass(f.toThemeProperty("jqx-menu-item-arrow-right"));k.arrow=j[0]}$element.css("float","none")});if(this.mode=="popup"){this.host.addClass(f.toThemeProperty("jqx-widget-content"));this.host.wrap('<div class="jqx-menu-wrapper" style="z-index:'+999999999+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>');var d=this.host.closest("div.jqx-menu-wrapper");d[0].id="menuWrapper"+this.element.id;
d.appendTo(a(document.body))}else this.host.addClass(f.toThemeProperty("jqx-widget-header"));if(this.mode=="popup"){var b=this.host.height();this.host.css("position","absolute");this.host.css("top","0");this.host.css("left","0");this.host.height(b);this.host.css("display","none")}break}},_getOffset:function(c){var g=a(window).scrollTop();var j=a(window).scrollLeft();var d=a.jqx.mobile.isSafariMobileBrowser();var h=a(c).offset();var f=h.top;var e=h.left;if(this.hasTransform||d!=null&&d){var b={left:a.jqx.mobile.getLeftPos(c),
top:a.jqx.mobile.getTopPos(c)};return b}else return a(c).offset()},_isRightClick:function(c){var b;if(!c)var c=window.event;if(c.which)b=c.which==3;else if(c.button)b=c.button==2;return b},_openContextMenu:function(d){var c=d.data;var b=c._isRightClick(d);if(b)c.open(parseInt(d.clientX)+5,parseInt(d.clientY)+5)},close:function(){var c=this;var d=a.data(this.element,"contextMenuOpened"+this.element.id);if(d){var b=this.host;a.each(c.items,function(){var e=this;if(e.hasItems)c._closeItem(c,e)});a.each(c.items,
function(){var e=this;if(e.isOpen==true){$submenu=a(e.subMenuElement);var f=$submenu.closest("div.jqx-menu-popup");f.hide(this.animationHideDuration)}});this.host.hide(this.animationHideDuration);a.data(c.element,"contextMenuOpened"+this.element.id,false);c._raiseEvent("1",c)}},open:function(e,d){if(this.mode=="popup"){var c=0;if(this.host.css("display")=="block"){this.close();c=this.animationHideDuration}var b=this;if(e==undefined||e==null)e=0;if(d==undefined||d==null)d=0;setTimeout(function(){b.host.show(b.animationShowDuration);
b.host.css("visibility","visible");a.data(b.element,"contextMenuOpened"+b.element.id,true);b._raiseEvent("0",b);b.host.css("z-index",9999);if(e!=undefined&&d!=undefined)b.host.css({left:e,top:d})},c)}},_renderHover:function(c,e,b){var d=this;if(!b){c.unbind("hover");if(!e.ignoretheme)c.hover(function(){if(!e.disabled&&!e.separator&&d.enableHover&&!d.disabled)if(e.level>0){c.addClass(d.toThemeProperty("jqx-fill-state-hover"));c.addClass(d.toThemeProperty("jqx-menu-item-hover"))}else{c.addClass(d.toThemeProperty("jqx-fill-state-hover"));
c.addClass(d.toThemeProperty("jqx-menu-item-top-hover"))}},function(){if(!e.disabled&&!e.separator&&d.enableHover&&!d.disabled)if(e.level>0){c.removeClass(d.toThemeProperty("jqx-fill-state-hover"));c.removeClass(d.toThemeProperty("jqx-menu-item-hover"))}else{c.removeClass(d.toThemeProperty("jqx-fill-state-hover"));c.removeClass(d.toThemeProperty("jqx-menu-item-top-hover"))}})}},_closeAfterClick:function(c){var b=c!=null?c.data:this;var d=false;if(b.autoCloseOnClick){a.each(a(c.target).parents(),function(){if(this.className.indexOf)if(this.className.indexOf("jqx-menu")!=
-1){d=true;return false}});if(!d){c.data=b;b._closeAll(c)}}},_autoSizeHorizontalMenuItems:function(){var c=this;if(c.autoSizeMainItems&&this.mode=="horizontal"){var b=this.maxHeight;if(parseInt(b)>parseInt(this.host.height()))b=parseInt(this.host.height());b=parseInt(this.host.height());a.each(this.items,function(){var m=this;$element=a(m.element);if(m.level==0&&b>0){var d=$element.children().length>0?parseInt($element.children().height()):$element.height();var g=c.host.find("ul:first");var h=parseInt(g.css("padding-top"));
var n=parseInt(g.css("margin-top"));var k=b-2*(n+h);var j=parseInt(k)/2-d/2;var e=parseInt(j);var l=parseInt(j);$element.css("padding-top",e);$element.css("padding-bottom",l);if(parseInt($element.outerHeight())>k){var f=1;$element.css("padding-top",e-f);e=e-f}}})}},_render:function(f,b){var g=1E3;var c=[5,5];var e=this;a.data(e.element,"animationHideDelay",e.animationHideDelay);var d=this.isTouchDevice();a.data(document.body,"menuel",this);if(this.autoCloseOnClick){this.removeHandler(a(document),
"mousedown.menu"+this.element.id,e._closeAfterClick);this.addHandler(a(document),"mousedown.menu"+this.element.id,e._closeAfterClick,e);if(d)this.addHandler(a(document),"touchstart.menu"+this.element.id,e._closeAfterClick,e)}this.hasTransform=a.jqx.utilities.hasTransform(this.host);this._applyOrientation(f,b);if(e.enableRoundedCorners)this.host.addClass(e.toThemeProperty("jqx-rc-all"));a.each(this.items,function(){var p=this;var l=a(p.element);if(e.enableRoundedCorners)l.addClass(e.toThemeProperty("jqx-rc-all"));
e.removeHandler(l,"click");e.addHandler(l,"click",function(u){if(p.disabled)return;e._raiseEvent("2",{item:p.element,event:u});if(!e.autoOpen){if(p.level>0)if(e.autoCloseOnClick&&!d&&!e.clickToOpen){u.data=e;e._closeAll(u)}}else if(e.autoCloseOnClick&&!d&&!e.clickToOpen)if(p.closeOnClick){u.data=e;e._closeAll(u)}if(d&&e.autoCloseOnClick){u.data=e;if(!p.hasItems)e._closeAll(u)}if(u.target.tagName!="A"&&u.target.tagName!="a"){var s=p.anchor!=null?a(p.anchor):null;if(s!=null&&s.length>0){var r=s.attr("href");
var t=s.attr("target");if(r!=null)if(t!=null)window.open(r,t);else window.location=r}}});e.removeHandler(l,"mouseenter");e.removeHandler(l,"mouseleave");e._renderHover(l,p,d);if(p.subMenuElement!=null){var m=a(p.subMenuElement);m.wrap('<div class="jqx-menu-popup" style="border: none; background-color: transparent; z-index:'+g+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"></div></div>');
m.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-m.outerHeight()});m.data("timer",{});if(p.level>0)m.css("left",-m.outerWidth());else if(e.mode=="horizontal")m.css("left",0);g++;var o=a(p.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(a(p.subMenuElement).outerWidth())+parseInt(c[0])+"px",height:parseInt(a(p.subMenuElement).outerHeight())+parseInt(c[1])+"px"});var q=l.closest("div.jqx-menu-popup");if(q.length>0){var h=m.css("margin-left");var k=m.css("margin-right");
var j=m.css("padding-left");var n=m.css("padding-right");o.appendTo(q);m.css("margin-left",h);m.css("margin-right",k);m.css("padding-left",j);m.css("padding-right",n)}else{var h=m.css("margin-left");var k=m.css("margin-right");var j=m.css("padding-left");var n=m.css("padding-right");o.appendTo(a(document.body));m.css("margin-left",h);m.css("margin-right",k);m.css("padding-left",j);m.css("padding-right",n)}if(!d&&!e.clickToOpen){e.addHandler(l,"mouseenter",function(){if(e.autoOpen||p.level>0&&!e.autoOpen)clearTimeout(m.data("timer").hide);
if(p.parentId&&p.parentId!=0)if(e.menuElements[p.parentId]){var r=e.menuElements[p.parentId].isOpen;if(!r)return}if(e.autoOpen||p.level>0&&!e.autoOpen)e._openItem(e,p);return false});e.addHandler(l,"mousedown",function(){if(!e.autoOpen&&p.level==0){clearTimeout(m.data("timer").hide);if(m!=null)m.stop();if(!p.isOpen)e._openItem(e,p);else e._closeItem(e,p,true)}});e.addHandler(l,"mouseleave",function(s){if(e.autoCloseOnMouseLeave){clearTimeout(m.data("timer").hide);var v=a(p.subMenuElement);var r={left:parseInt(s.pageX),
top:parseInt(s.pageY)};var u={left:parseInt(v.offset().left),top:parseInt(v.offset().top),width:parseInt(v.outerWidth()),height:parseInt(v.outerHeight())};var t=true;if(u.left-5<=r.left&&r.left<=u.left+u.width+5)if(u.top<=r.top&&r.top<=u.top+u.height)t=false;if(t)e._closeItem(e,p,true)}});e.removeHandler(o,"mouseenter");e.addHandler(o,"mouseenter",function(){clearTimeout(m.data("timer").hide)});e.removeHandler(o,"mouseleave");e.addHandler(o,"mouseleave",function(r){if(e.autoCloseOnMouseLeave){clearTimeout(m.data("timer").hide);
clearTimeout(m.data("timer").show);if(m!=null)m.stop();e._closeItem(e,p,true)}})}else{e.removeHandler(l,"mousedown");e.addHandler(l,"mousedown",function(r){clearTimeout(m.data("timer").hide);if(m!=null)m.stop();if(p.level==0&&!p.isOpen){r.data=e;e._closeAll(r)}if(!p.isOpen)e._openItem(e,p);else e._closeItem(e,p,true)})}}});this._autoSizeHorizontalMenuItems();this._raiseEvent("3",this)},createID:function(){var b=Math.random()+"";b=b.replace(".","");b="99"+b;b=b/1;while(this.items[b]){b=Math.random()+
"";b=b.replace(".","");b=b/1}return"menuItem"+b},_createMenu:function(m,o){if(m==null)return;if(o==undefined)o=true;if(o==null)o=true;var t=this;var f=a(m).find("li");var g=0;for(var n=0;n<f.length;n++){var c=f[n];var s=a(c);if(c.className.indexOf("jqx-menu")==-1&&this.autoGenerate==false)continue;var d=c.id;if(!d)d=this.createID();if(o){c.id=d;this.items[g]=new a.jqx._jqxMenu.jqxMenuItem;this.menuElements[d]=this.items[g]}g+=1;var l=0;var r=this;s.children().each(function(){if(!o){a(this).removeClass();
if(r.autoGenerate){a(r.items[g-1].subMenuElement).removeClass();a(r.items[g-1].subMenuElement).addClass(r.toThemeProperty("jqx-widget-content"));a(r.items[g-1].subMenuElement).addClass(r.toThemeProperty("jqx-menu-dropdown"))}}if(this.className.indexOf("jqx-menu-dropdown")!=-1){if(o)r.items[g-1].subMenuElement=this;return false}else if(r.autoGenerate&&(this.tagName=="ul"||this.tagName=="UL")){if(o)r.items[g-1].subMenuElement=this;a(this).removeClass();a(this).addClass(r.toThemeProperty("jqx-widget-content"));
a(this).addClass(r.toThemeProperty("jqx-menu-dropdown"));return false}});s.parents().each(function(){if(this.className.indexOf("jqx-menu-item")!=-1){l=this.id;return false}else if(r.autoGenerate&&(this.tagName=="li"||this.tagName=="LI")){l=this.id;return false}});var j=false;var q=c.getAttribute("type");var p=c.getAttribute("ignoretheme");if(p){if(p=="true"||p==true)p=true}else p=false;if(!q)q=c.type;else if(q=="separator")var j=true;if(!j)if(l)q="sub";else q="top";var b=this.items[g-1];if(o){b.id=
d;b.parentId=l;b.type=q;b.separator=j;b.element=f[n];var h=s.find("a:first");b.level=s.parents("li").length;b.anchor=h.parents("li").length==b.level+1?h:null}b.ignoretheme=p;var e=this.menuElements[l];if(e!=null)if(e.ignoretheme){b.ignoretheme=e.ignoretheme;p=e.ignoretheme}if(this.autoGenerate)if(q=="separator"){s.removeClass();s.addClass(this.toThemeProperty("jqx-menu-item-separator"))}else if(!p){s.removeClass();if(b.level>0){s.addClass(this.toThemeProperty("jqx-item"));s.addClass(this.toThemeProperty("jqx-menu-item"))}else{s.addClass(this.toThemeProperty("jqx-item"));
s.addClass(this.toThemeProperty("jqx-menu-item-top"))}}if(o&&!p)b.hasItems=s.find("li").length>0}},destroy:function(){var c=this.host.closest("div.jqx-menu-wrapper");c.remove();var b=this;this.removeHandler(a(document),"mousedown.menu"+this.element.id,b._closeAfterClick);this.removeHandler(a(document),"mouseup.menu"+this.element.id,b._closeAfterClick);a(window).unbind("resize.menu"+b.element.id);a.each(this.items,function(){var e=this;var d=a(e.element);b.removeHandler(d,"click");b.removeHandler(d,
"selectstart");b.removeHandler(d,"mouseenter");b.removeHandler(d,"mouseleave");b.removeHandler(d,"mousedown");b.removeHandler(d,"mouseleave")});a.data(document.body,"menuel",null);this.items=new Array;this.host.removeClass();this.host.remove()},_raiseEvent:function(f,c){if(c==undefined)c={owner:null};var d=this.events[f];args=c;args.owner=this;var e=new jQuery.Event(d);if(f=="2"){args=c.item;args.owner=this;a.extend(e,c.event);e.type="itemclick"}e.owner=this;e.args=args;var b=this.host.trigger(e);
return b},propertyChangedHandler:function(b,d,g,f){if(this.isInitialized==undefined||this.isInitialized==false)return;if(f==g)return;if(d=="touchMode"){this._isTouchDevice=null;b._render(f,g)}if(d=="source")if(b.source!=null){var c=b.loadItems(b.source);b.element.innerHTML=c;var e=b.host.find("ul:first");if(e.length>0){b.refresh();b._createMenu(e[0]);b._render()}}if(d=="autoCloseOnClick")if(f==false)a(document).unbind("mousedown.menu"+this.element.id,b._closeAll);else a(document).bind("mousedown.menu"+
this.element.id,b,b._closeAll);else if(d=="mode"||d=="width"||d=="height"||d=="showTopLevelArrows"){b.refresh();if(d=="mode")b._render(f,g);else b._applyOrientation()}else if(d=="theme")a.jqx.utilities.setTheme(g,f,b.host)}})})(jQuery);
(function(a){a.jqx._jqxMenu.jqxMenuItem=function(e,d,c){var b={id:e,parentId:d,parentItem:null,anchor:null,type:c,disabled:false,level:0,isOpen:false,hasItems:false,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:true};return b}})(jQuery);
(function(a){a.jqx.jqxWidget("jqxExpander","",{});a.extend(a.jqx._jqxExpander.prototype,{defineInstance:function(){this.expandAnimationDuration=350,this.collapseAnimationDuration=400,this.expanded=true;this.disabled=false;this.animationType="slide";this.headerPosition="top";this.toggleMode="click";this.arrowPosition="right";this.showArrow=true;this.height="auto";this.width="auto";this._content=null;this.enableHover=true;this.toggleBehaviour="header";this._header=null;this._triggerMethod=undefined;
this._contentResizeMethod=undefined;this._firstSlideExpand=true;this._events=["expanding","expanded","collapsing","collapsed"];this._directions={left:"right",right:"left",top:"bottom",bottom:"top"};this._invalidArgumentExceptions={invalidExpandAnimationDuration:"The duration of the expanding animation is invalid.",invalidCollapseAnimationDuration:"The duration of the collapsing animation is invalid.",invalidAnimationType:"The animation type is invalid.",invalidHeaderPosition:"The header position is invalid.",
invalidToggleMode:"The toggle mode is invalid.",invalidArrowPosition:"The arrow position is invalid.",invalidExpanderSize:"This size is not valid.",invalidExpanderStructure:"Please add 2 sub div elements to your html that will represent the expander header and content."}},createInstance:function(b){this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-expander"));this.host.css("visibility","hidden");this._header=this.host.children("."+this.toThemeProperty("jqx-expander-header",
true));this._content=this.host.children("."+this.toThemeProperty("jqx-expander-content",true));this._setExpanderSize();var f=this.host.children("div");if(f.length>0){if(this._header.length==0){this._header=a(f[0]);this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._header.addClass(this.toThemeProperty("jqx-expander-header"))}if(this._content.length==0&&f.length>1){this._content=a(f[1]);this._content.addClass(this.toThemeProperty("jqx-widget-content"));this._content.addClass(this.toThemeProperty("jqx-expander-content"))}}try{if(this._header==
null||this._content==null)throw this._invalidArgumentExceptions.invalidExpanderStructure;}catch(c){alert(c.Data)}this._createExpander();var e=this;if(this.expanded){this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"));this._content.addClass(this.toThemeProperty("jqx-expander-content-expanded"));this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed"));var d=this.host.find(".jqx-expander-arrow");d.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))}this.host.css("visibility",
"visible")},_setExpanderSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height)},_createExpander:function(){var c=this._content[0];a.data(c,"isAnimating",false);this._firstSlideExpand=true;this._validateProperties();
this._render(true);this._applyTheme();this._performLayout();this._addEventHandlers();if(!this.expanded)this._absoluteCollapse();var b=this},_absoluteCollapse:function(b){var b=b||this;if(b.animationType!=="none")b._content.css("visibility","hidden");if(b.animationType==="slide")b._slideCollapse(0);else if(b.animationType==="fade")b._fadeCollapse(0);else if(b.animationType==="none")b._toggleCollapse();if((!b.height||b.height==="auto")&&b.animationType!=="none")b._content.height(0);this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));
this._content.removeClass(this.toThemeProperty("jqx-expander-content-expanded"));b._raiseEvent(3)},_validateProperties:function(){try{if(this.expandAnimationDuration<=0)throw this._invalidArgumentExceptions.invalidExpandAnimationDuration;if(this.collapseAnimationDuration<=0)throw this._invalidArgumentExceptions.invalidCollapseAnimationDuration;if((parseInt(this.width)<=0||parseInt(this.height)<=0)&&(this.width!="auto"&&this.height!="auto"||this.width!=undefined&&this.height!=undefined))throw this._invalidArgumentExceptions.invalidExpanderSize;
if(this.animationType!="slide"&&this.animationType!="fade"&&this.animationType!="none")throw this._invalidArgumentExceptions.invalidAnimationType;if(this.headerPosition!="top"&&this.headerPosition!="bottom")throw this._invalidArgumentExceptions.invalidHeaderPosition;if(this.toggleMode!="click"&&this.toggleMode!="none"&&this.toggleMode!="dblclick"&&this.toggleMode!="mouseenter")throw this._invalidArgumentExceptions.invalidToggleMode;if(this.arrowPosition!="left"&&this.arrowPosition!="right")throw this._invalidArgumentExceptions.invalidArrowPosition;
}catch(b){alert(b)}},_addEventHandlers:function(b){var c=this;var g=this._content;var f=this._header.children(this.toThemeProperty(".jqx-expander-arrow",true));if(this.toggleBehaviour!="arrow"){this.removeHandler(this._header,"click");this.removeHandler(this._header,"dblclick");this.removeHandler(this._header,"mouseover")}else{this.removeHandler(f,"click");this.removeHandler(f,"dblclick");this.removeHandler(f,"mouseover")}if(b!=undefined&&b!=this.toggleBehavior)if(b=="arrow"){this.removeHandler(f,
"click");this.removeHandler(f,"dblclick");this.removeHandler(f,"mouseover")}else{this.removeHandler(this._header,"click");this.removeHandler(this._header,"dblclick");this.removeHandler(this._header,"mouseover")}this.removeHandler(this._header,"mouseenter");this.removeHandler(this._header,"mouseleave");this.removeHandler(this._header,"mousedown");this.removeHandler(this._header,"mouseup");this.removeHandler(this._header,"selectstart");if(this._triggerMethod===undefined)c._triggerMethod=function(h){c._expanderTrigger(c);
return false};var e=this.toggleBehaviour=="arrow"?f:this._header;this.addHandler(this._header,"mousedown",function(){return false});this.addHandler(this._header,"mouseup",function(){return false});this.addHandler(this._header,"selectstart",function(){return false});switch(this.toggleMode){case "click":this.addHandler(e,"click",this._triggerMethod);this._header.removeClass(this.toThemeProperty("jqx-expander-header-toggle-none"));break;case "dblclick":this.addHandler(e,"dblclick",this._triggerMethod);
this._header.removeClass(this.toThemeProperty("jqx-expander-header-toggle-none"));break;case "mouseenter":this.addHandler(e,"mouseover",this._triggerMethod);this._header.removeClass(this.toThemeProperty("jqx-expander-header-toggle-none"));break;case "none":this._header.addClass(this.toThemeProperty("jqx-expander-header-toggle-none"));break}this.removeHandler(a(window),"resize.expander"+this.element.id);this.addHandler(a(window),"resize.expander"+this.element.id,function(){if(a.data(g,"isAnimating")==
false)c._performLayout()});var d=a.jqx.mobile.isTouchDevice();this.addHandler(this._header,"mouseenter",function(){if(!c.disabled&&c.enableHover&&!d){c._header.addClass(c.toThemeProperty("jqx-expander-header-hover"));c._header.addClass(c.toThemeProperty("jqx-fill-state-hover"))}});this.addHandler(this._header,"mouseleave",function(){if(!c.disabled&&c.enableHover&&!d){c._header.removeClass(c.toThemeProperty("jqx-expander-header-hover"));c._header.removeClass(c.toThemeProperty("jqx-fill-state-hover"))}})},
_expanderTrigger:function(b){if(!b.disabled)if(b.expanded)b.collapse();else b.expand()},_render:function(b){if(b)this._headerRender();switch(this.headerPosition){case "top":this._header.detach();this._content.detach();this._header.appendTo(this.host);this._content.appendTo(this.host);break;case "bottom":this._header.detach();this._content.detach();this._content.appendTo(this.host);this._header.appendTo(this.host);break}this._content.wrap('<div class="jqx-expander-contentWrapper" style="background-color: transparent; margin: 0; padding: 0; position: relative; overflow: hidden;">');
this.$contentWrapper=this._content.closest(".jqx-expander-contentWrapper")},_performLayout:function(){if(!a.data(this._content[0],"isAnimating")){var b=this.host.width();this._headerPerformLayout();if(this.height&&this.height!=="auto"){this.host.height(parseInt(this.height)+"px");var c=parseInt(this._content.css("border-top-width"))+parseInt(this._content.css("border-bottom-width"))+parseInt(this._content.css("padding-bottom"))+parseInt(this._content.css("padding-top"));this._content.height(parseInt(this.host.innerHeight())-
parseInt(this._header.outerHeight())-c);a.data(this._content,"contentHeight",this._content.height())}else{this._header.height("auto");this._content.height("auto");this.host.height("auto");a.data(this._content,"contentHeight","auto")}if(this.width)if(this.width=="auto"&&a.browser.msie&&a.browser.version<8)this.host.width(b);else this.host.width(this.width);else this.host.width("100%");return}},_headerRender:function(){var c=a('<div class="'+this.toThemeProperty("jqx-expander-arrow")+'"></div>');var b=
a('<div class="'+this.toThemeProperty("jqx-expander-header-content")+'"></div>');b.html(this._header.html());this._header.empty();c.appendTo(this._header);b.appendTo(this._header);if(this.showArrow){var e="jqx-expander-arrow-"+(this.expanded?this._directions[this.headerPosition]:this.headerPosition);var d=e;c.addClass(this.toThemeProperty(d))}},_headerPerformLayout:function(){var g=this._header.children(this.toThemeProperty(".jqx-expander-arrow",true));var f=this._header.children(this.toThemeProperty(".jqx-expander-header-content",
true));var c=g.outerWidth();var e=this._header.innerWidth();switch(this.arrowPosition){case "left":g.removeClass(this.toThemeProperty("jqx-expander-arrow-align-right"));g.addClass(this.toThemeProperty("jqx-expander-arrow-align-left"));g.css("float","left");break;case "right":g.removeClass(this.toThemeProperty("jqx-expander-arrow-align-left"));g.addClass(this.toThemeProperty("jqx-expander-arrow-align-right"));g.css("float","right");break}this._fitContent(this,g,f);var b=this._header.height();var d=
parseInt(b)/2-parseInt(f.height())/2;f.css("margin-top",d+"px");var d=parseInt(b)/2-parseInt(g.height())/2;g.css("margin-top",d+"px")},_fitContent:function(d,c,b){},_showSpecificArrowDirection:function(b){this._header.children(this.toThemeProperty(".jqx-expander-arrow",true)).removeClass(this.toThemeProperty("jqx-expander-arrow-"+this._directions[b]));this._header.children(this.toThemeProperty(".jqx-expander-arrow",true)).addClass(this.toThemeProperty("jqx-expander-arrow-"+b))},_applyTheme:function(){if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-expander-disabled"));
this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"));this._content.addClass(this.toThemeProperty("jqx-expander-content-disabled"))}switch(this.headerPosition){case "top":this._header.removeClass(this.toThemeProperty("jqx-expander-header-bottom"));this._content.removeClass(this.toThemeProperty("jqx-expander-content-top"));this._header.addClass(this.toThemeProperty("jqx-expander-header-top"));this._content.addClass(this.toThemeProperty("jqx-expander-content-bottom"));
break;case "bottom":this._header.removeClass(this.toThemeProperty("jqx-expander-header-top"));this._content.removeClass(this.toThemeProperty("jqx-expander-content-bottom"));this._header.addClass(this.toThemeProperty("jqx-expander-header-bottom"));this._content.addClass(this.toThemeProperty("jqx-expander-content-top"));break}},destroy:function(){this.host.removeClass()},_raiseEvent:function(g,c){if(c==undefined)c={owner:null};var d=this._events[g];args=c;args.owner=this;var f=false;if(g==1){if(this.showArrow)this._showSpecificArrowDirection(this._directions[this.headerPosition]);
this.expanded=true}if(g==3){if(this.showArrow)this._showSpecificArrowDirection(this.headerPosition);this.expanded=false}var e=new jQuery.Event(d);e.owner=this;e.cancel=f;var b=this.host.trigger(e);if(!e.cancel){if(g==0){if(this.showArrow)this._showSpecificArrowDirection(this._directions[this.headerPosition]);return e.cancel}if(g==2){if(this.showArrow)this._showSpecificArrowDirection(this.headerPosition);return e.cancel}}return b},collapse:function(){var b=this._raiseEvent(2);if(b)return;if(this.element!=
null)if(this.animationType!="none"){a.data(this._content[0],"isAnimating",true);this._content.css("visibility","visible");if(!this.height||this.height==="auto")this._content.height(a.data(this._content,"contentHeight"));this._content.stop();if(this.animationType=="slide")this._slideCollapse(this.collapseAnimationDuration,true);else if(this.animationType=="fade")this._fadeCollapse(this.collapseAnimationDuration,true)}else this._toggleCollapse(true);this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));
this._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._content.removeClass(this.toThemeProperty("jqx-expander-content-expanded"));var c=this.host.find(".jqx-expander-arrow");c.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded"))},_toggleCollapse:function(c){var b=this;a(b._content).hide(0,function(){b._collapseCallback(b,c)})},_fadeCollapse:function(d,c){var b=this;if(!this.height||this.height==="auto")a(b._content).fadeOut(d,function(){b._collapseCallback(b,c)});
else a(b._content).fadeTo(d,0.01,function(){b._collapseCallback(b,c)})},_collapseCallback:function(c,b){a.data(c._content[0],"isAnimating",false);if(b){c._raiseEvent(3);c._content.css("height","0");c._content.css("visibility","hidden")}},_slideCollapse:function(g,f){var d=this;var e=d._content;var c=a(d._header);var b=Math.max(2,parseInt(c.css("border-bottom-width"))+parseInt(c.css("border-top-width")));if(isNaN(b))b=0;if(a.browser.mozilla)b=1;e.stop();switch(this.headerPosition){case "top":if(g==
0)a(e).css({"margin-top":-parseInt(e.height())-b+"px"});else a(e).animate({"margin-top":-parseInt(e.height())-b+"px"},g,"easeInOutSine",function(){d._collapseCallback(d,f)});break;case "bottom":if(this.height&&this.height!=="auto")a(e).animate({bottom:-parseInt(e.height())+"px"},g,"linear",function(){d._collapseCallback(d,f)});else a(e).animate({"margin-bottom":-parseInt(e.height())+"px"},g,"easeInOutSine",function(){d._collapseCallback(d,f)});break}},expand:function(){this._raiseEvent(0);if(this.element!=
null)if(this.animationType!="none"){this._content.css("display","block");a.data(this._content[0],"isAnimating",true);this._content.css("visibility","visible");if(!this.height||this.height==="auto")this._content.height(a.data(this._content,"contentHeight"));else if(this._content.height()==0)this._content.height(this._content.height(a.data(this._content,"contentHeight")));this._content.stop();if(this.animationType=="slide")this._slideExpand(this.expandAnimationDuration,true);else if(this.animationType==
"fade")this._fadeExpand(this.expandAnimationDuration,true)}else{this._content.css("display","none");this._toggleExpand(true)}this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"));this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._content.addClass(this.toThemeProperty("jqx-expander-content-expanded"));var b=this.host.find(".jqx-expander-arrow");b.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))},_toggleExpand:function(c){var b=this;this._content.css("visibility",
"visible");if(!this.height||this.height==="auto")this._content.height(a.data(this._content,"contentHeight"));else if(this._content.height()==0)this._content.height(this._content.height(a.data(this._content,"contentHeight")));a(b._content).show(0,function(){b._expandCallback(b,c)})},_fadeExpand:function(d,c){var b=this;if(!this.height||this.height==="auto")a(b._content).fadeIn(d,function(){b._expandCallback(b,c)});else a(b._content).fadeTo(d,1,function(){b._expandCallback(b,c)})},_expandCallback:function(c,
b){a.data(c._content[0],"isAnimating",false);if(b)c._raiseEvent(1)},_slideExpand:function(e,d){if(this._firstSlideExpand){this._slideCollapse(0,false);this._firstSlideExpand=false}var b=this;var c=this._content;c.stop();switch(this.headerPosition){case "top":if(e==0)a(c).css({"margin-top":"0px"});else a(c).animate({"margin-top":"0px"},e,"easeInOutSine",function(){b._expandCallback(b,d)});break;case "bottom":if(this.height&&this.height!=="auto")a(c).animate({bottom:"0px"},e,"linear",function(){b._expandCallback(b,
d)});else a(c).animate({"margin-bottom":"0px"},e,"easeInOutSine",function(){b._expandCallback(b,d)});break}},setContentHeight:function(b){this._content.height(b);a.data(this._content,"contentHeight",b);if(b==="auto")this._content.css("minHeight",0);if(!this.expanded)this._absoluteCollapse()},disable:function(){this.disabled=true;this._applyTheme()},enable:function(){this.disabled=false;this.host.removeClass(this.toThemeProperty("jqx-expander-disabled"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled"));
this._content.removeClass(this.toThemeProperty("jqx-expander-content-disabled"))},setHeaderContent:function(c){if(c){var b=this._header.children(this.toThemeProperty(".jqx-expander-header-content",true));b.html(c);this._performLayout()}},setContent:function(b){if(b){this._content.html(b);this._performLayout()}},getContent:function(){if(this._content!=null)return this._content.html();return null},getHeaderContent:function(){return this._header.children(this.toThemeProperty(".jqx-expander-header-content",
true)).html()},propertyChangedHandler:function(g,r,f,o){if(this.isInitialized==undefined||this.isInitialized==false)return;if(r=="theme"){this.host.removeClass();this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-expander"));this._header.removeClass();this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._header.addClass(this.toThemeProperty("jqx-expander-header"));this._content.removeClass();this._content.addClass(this.toThemeProperty("jqx-widget-content"));
this._content.addClass(this.toThemeProperty("jqx-expander-content"));var q=this.host.find(".jqx-expander-arrow");var m=this.host.find(".jqx-expander-header-content");q.removeClass();q.addClass(this.toThemeProperty("jqx-expander-arrow"));m.addClass(this.toThemeProperty("jqx-expander-header-content"));this._applyTheme();if(this.showArrow){var k="jqx-expander-arrow-"+(this.expanded?this._directions[this.headerPosition]:this.headerPosition);var e=k;q.addClass(this.toThemeProperty(e))}this._headerPerformLayout()}if(r==
"showArrow"){var p=this.host.find("."+this.toThemeProperty("jqx-expander-arrow",true));if(o)p.css("visibility","visible");else p.css("visibility","hidden")}else if(r=="arrowPosition")this._headerPerformLayout();else if(r=="toggleMode")this._addEventHandlers();else if(r=="toggleBehavior")this._addEventHandlers(f);else if(r=="disabled"){this.disabled=o;if(o){this.host.addClass(this.toThemeProperty("jqx-expander-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"));
this._content.addClass(this.toThemeProperty("jqx-expander-content-disabled"))}else{this.host.removeClass(this.toThemeProperty("jqx-expander-disabled"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled"));this._content.removeClass(this.toThemeProperty("jqx-expander-content-disabled"))}}else if(r=="expanded"&&!o){var s=this.expandAnimationDuration;var b=this.collapseAnimationDuration;this.collapseAnimationDuration=
0;this.expandAnimationDuration=0;this.collapse();this.expandAnimationDuration=s;this.collapseAnimationDuration=b}else if(r=="expanded"&&o){var d=undefined;if(r=="expanded"&&o)d=this._content.height();if(d){this._content.height(d);a.data(this._content,"contentHeight",d)}var s=this.expandAnimationDuration;var b=this.collapseAnimationDuration;this.collapseAnimationDuration=0;this.expandAnimationDuration=0;this.expand();this.expandAnimationDuration=s;this.collapseAnimationDuration=b}else if(r=="headerPosition"){var j=
a("<div></div>").html(this._header.children(this.toThemeProperty(".jqx-expander-header-content",true)).html());var l=a("<div></div>").html(this._content.html());var c=this._header.attr("class").split(/\s+/);var n=this._content.attr("class").split(/\s+/);var d=undefined;if(r=="expanded"&&o)d=this._content.height();this.$contentWrapper.detach();this._content.detach();this._header.detach();this._content=l;this._header=j;this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._header.addClass(this.toThemeProperty("jqx-expander-header"));
this._content.addClass(this.toThemeProperty("jqx-widget-content"));this._content.addClass(this.toThemeProperty("jqx-expander-content"));for(var h=0;h<c.length;h++)this._header.addClass(c[h]);for(var h=0;h<n.length;h++)this._content.addClass(n[h]);this._createExpander();if(d){this._content.height(d);a.data(this._content,"contentHeight",d)}}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxNavigationBar","",{});a.extend(a.jqx._jqxNavigationBar.prototype,{defineInstance:function(){this.expandAnimationDuration=350,this.collapseAnimationDuration=350,this.disabled=false;this.animationType="slide";this.toggleMode="click";this.expandMode="single";this.sizeMode="auto";this.showArrow=true;this.arrowPosition="right";this.expandedIndexes=undefined;this.expandedIndex=-1;this.height="auto";this.width="auto";this._expandersList=[];this._toggleModesBackup=[];this._expandedIndexes=
undefined;this._maxHeight=0;this._currentExpandedItem=null;this._events=["expandingItem","expandedItem","collapsingItem","collapsedItem"];this._invalidArgumentExceptions={invalidStructure:"Invalid structure of the navigation bar!",invalidExpandAnimationDuration:"Expand animation duration is invalid!",invalidCollapseAnimationDuration:"Collapse animation duration is invalid!",invalidAnimationType:"The animation type is invalid!",invalidToggleMode:"The toggle mode is invalid!",invalidArrowPosition:"The arrow position is invalid!",
invalidNavigationBarSize:"This size is not valid!",invalidExpandModeException:"The expand mode you've entered is invalid!",invalidExpandedIndexesLength:"expandedIndexes is not with valid size.",invalidExpandedIndex:"Invalid expanded index!",invalidModeException:"You can't use fitAvailableHeight in multiple expand mode!",invalidSizeMode:"You have entered invalid size mode!"}},createInstance:function(c){this.host.addClass(this.toThemeProperty("jqx-navigationbar"));this.host.addClass(this.toThemeProperty("jqx-widget"));
this.host.css("visibility","hidden");var e=this.host.children("."+this.toThemeProperty("jqx-expander-header",true)).detach();var b=this.host.children("."+this.toThemeProperty("jqx-expander-content",true)).detach();try{if(e.length===0||b.length===0){var f=this._addExpanderClasses();e=f.headersList;b=f.contentsList}if(e.length!=b.length)throw this._invalidArgumentExceptions.invalidStructure;}catch(d){alert(d)}this.headersList=e;this.contentsList=b;this._createNavigationBar(e,b);this.host.css("visibility",
"visible")},_addExpanderClasses:function(){var f=this.host.children("div");if(f.length>0){var e=[];for(var d=0,c=0;d<f.length;d+=2,c++){e[c]=a(f[d]).detach();e[c].addClass(this.toThemeProperty("jqx-widget-header"));e[c].addClass(this.toThemeProperty("jqx-expander-header"))}if(f.length>1){var b=[];for(var d=1,c=0;d<f.length;d+=2,c++){b[c]=a(f[d]).detach();b[c].addClass(this.toThemeProperty("jqx-widget-content"));b[c].addClass(this.toThemeProperty("jqx-expander-content"))}}else throw this._invalidArgumentExceptions.invalidStructure;
}else throw this._invalidArgumentExceptions.invalidStructure;return{headersList:e,contentsList:b}},_updateExpandedIndexes:function(c){if(c==null||c==undefined)c=0;this._expandedIndexes=[];if(this.expandedIndexes===undefined)this.expandedIndexes=[];else{for(var b=0;b<c;b++)this._expandedIndexes[b]=false;for(var b=0;b<this.expandedIndexes.length;b++)if(this.expandedIndexes[b]<c)this._expandedIndexes[this.expandedIndexes[b]]=true}},_createNavigationBar:function(c,b){this._updateExpandedIndexes(c.length);
this._render(c,b);this._refreshNavigationBar()},_refreshNavigationBar:function(){this._validateProperties();this._fixView();this._performLayout();this._fixView()},_collapseItems:function(){for(var b=0;b<this._expandersList.length;b++)if(!this._expandedIndexes[b])a(this._expandersList[b]).jqxExpander("_absoluteCollapse")},_removeArrayItem:function(c,d){var b=this._getItemIndex(c,d);if(b>=0)d.splice(b,1)},_removeEventHandlers:function(){var b=this;a.each(this._expandersList,function(){var c=this;b.removeHandler(a(c),
"expanded");b.removeHandler(a(c),"collapsed");b.removeHandler(a(c),"collapsing");b.removeHandler(a(c),"expanding");b.removeHandler(a(window),"load")})},_addEventHandlers:function(c){var b=this;this.addHandler(a(c),"mouseenter",function(){c.css("z-index",100)});this.addHandler(a(c),"mouseleave",function(){c.css("z-index",0)});this.addHandler(a(c),"expanded",function(){var d=b._getItemIndex(c,b._expandersList);b._expandedIndexes[d]=true;if(b.expandMode==="single")b.expandedIndex=d;a(this).css("margin-bottom",
0);var e=b._getItemIndex(this,b._expandersList);if(b.expandedIndexes[e]==undefined)b.expandedIndexes.push(e);b._raiseEvent(1,b._getItemIndex(this,b._expandersList))});this.addHandler(a(c),"collapsed",function(){var d=b._getItemIndex(c,b._expandersList);b._expandedIndexes[d]=false;b._removeArrayItem(b._getItemIndex(this,b._expandersList),b.expandedIndexes);b._raiseEvent(3,b._getItemIndex(this,b._expandersList))});this.addHandler(a(c),"collapsing",function(d){b._raiseEvent(2,b._getItemIndex(this,b._expandersList));
if(b.expandMode==="single")a(this).jqxExpander("toggleMode",b.toggleMode)});this.addHandler(a(c),"expanding",function(d){if(b.expandMode==="single"||b.expandMode==="toggle"){if(b._currentExpandedItem&&b._getItemIndex(d.owner.element,b._expandersList)>=0){b.collapseAt(b._getItemIndex(b._currentExpandedItem,b._expandersList));a(b._currentExpandedItem).jqxExpander("toggleMode",b.toggleMode);if((b.sizeMode==="maxItemHeight"||b.sizeMode==="fitAvailableHeight")&&(a.browser.webkit||a.browser.opera||a.browser.msie&&
parseInt(a.browser.version)<9));}b._currentExpandedItem=this;if(b.expandMode==="single")a(this).jqxExpander("toggleMode","none");if(b.animationType!=="none");}b._raiseEvent(0,b._getItemIndex(this,b._expandersList))});this.addHandler(a(window),"load",function(d){if(b.sizeMode==="maxItemHeight")b._refreshNavigationBar()})},_getItemIndex:function(c,d){for(var b=0;b<d.length;b++)if(d[b]===c||d[b][0]===c)return b;return-1},_validateProperties:function(){try{if((parseInt(this.width)<=0||parseInt(this.height)<=
0)&&(this.width!=="auto"&&this.height!=="auto"||this.width!==undefined&&this.height!==undefined))throw this._invalidArgumentExceptions.invalidNavigationBarSize;if(this.animationType!=="slide"&&this.animationType!=="none"&&this.animationType!=="fade")throw this._invalidArgumentExceptions.invalidAnimationType;if(this.expandMode!=="single"&&this.expandMode!=="multiple"&&this.expandMode!=="none"&&this.expandMode!=="toggle")throw this._invalidArgumentExceptions.invalidExpandMode;if(this.expandedIndexes.length>
this._expandersList.length)throw this._invalidArgumentExceptions.invalidExpandedIndexesLength;if(this.expandedIndex>this._expandersList.length-1)throw this._invalidArgumentExceptions.invalidExpandedIndex;if(this.sizeMode!=="auto"&&this.sizeMode!=="fitAvailableHeight"&&this.sizeMode!=="maxItemHeight")throw this._invalidArgumentExceptions.invalidSizeMode;if(this.expandMode==="multiple"&&this.sizeMode==="fitAvailableHeight")throw this._invalidArgumentExceptions.invalidModeException;}catch(b){alert(b)}},
_render:function(e,c){this._maxHeight=0;for(var d=0;d<e.length;d++){var h=a(e[d]).addClass(this.toThemeProperty("jqx-expander-header"));var f=a(c[d]).addClass(this.toThemeProperty("jqx-expander-content"));h.addClass(this.toThemeProperty("jqx-widget-header"));f.addClass(this.toThemeProperty("jqx-widget-content"));var b=a('<div class="'+this.toThemeProperty("jqx-expander")+'"></div>');b.append(h);b.append(f);this.host.append(b);this._expandersList[d]=this._createExpanderByNavigationBarExpandMode(d,
b);var g=parseInt(a(this._expandersList[d]).children(".jqx-expander-contentWrapper",true).children(this.toThemeProperty(".jqx-expander-content",true)).outerHeight());if(this._maxHeight<g)this._maxHeight=g;this._addEventHandlers(this._expandersList[d])}},_performLayout:function(){var d=0;for(var b=0;b<this._expandersList.length;b++)d+=this._expandersList[b].children(this.toThemeProperty(".jqx-expander-header",true)).outerHeight();switch(this.sizeMode){case "auto":break;case "fitAvailableHeight":for(var c=
0;c<this._expandersList.length;c++){var f=0;f+=parseInt(this._expandersList[0].children(this.toThemeProperty(".jqx-expander-header",true)).css("border-top-width"))+parseInt(this._expandersList[this._expandersList.length-1].children(".jqx-expander-contentWrapper").children(this.toThemeProperty(".jqx-expander-content",true)).css("border-bottom-width"));var e=parseInt(this.height)-d;a(this._expandersList[c]).jqxExpander("setContentHeight",e)}break;case "maxItemHeight":for(var c=0;c<this._expandersList.length;c++)a(this._expandersList[c]).jqxExpander("setContentHeight",
this._maxHeight);break}this._performHostLayout(d)},_performHostLayout:function(d){if(this.width)this.host.width(this.width);for(var c=0;c<this._expandersList.length;c++)if(!this._expandedIndexes[c])a(this._expandersList[c]).jqxExpander("expanded",false);else a(this._expandersList[c]).jqxExpander("expanded",true);if(this.sizeMode==="maxItemHeight"&&this.expandMode==="single"){var b=parseInt(this._expandersList[this._expandersList.length-1].children(".jqx-expander-contentWrapper",true).children(this.toThemeProperty(".jqx-expander-content",
true)).css("border-bottom-width"));this.host.height(d+this._maxHeight+b+"px")}else if(this.sizeMode==="fitAvailableHeight"&&(this.expandMode==="toggle"||this.expandMode==="single"))this.host.height(parseInt(this.height));else this.host.height("auto")},_fixView:function(){for(var b=0;b<this._expandersList.length;b++){this._expandersList[b].css("position","relative");var d=this._expandersList[b].children("."+this.toThemeProperty("jqx-expander-header",true));var c=this._expandersList[b].children("."+
this.toThemeProperty("jqx-expander-contentWrapper",true));if(b>0)d.css("margin-top","-1px");c.css("border-left-width","0px");c.css("border-right-width","0px");c.css("border-top-width","0px");c.css("border-bottom-width","0px");c.children().css("border-top-width","0px");if(b!==0&&b!==this._expandersList.length-1)this._removeRoundedCorners(this._expandersList[b],true,true);if(b===0)this._removeRoundedCorners(this._expandersList[b],false,true);if(b===this._expandersList.length-1)this._removeRoundedCorners(this._expandersList[b],
true,false)}},_createExpander:function(b,c){var d=a(b).jqxExpander({expanded:true,width:this.width,arrowPosition:this.arrowPosition,expandAnimationDuration:this.expandAnimationDuration,collapseAnimationDuration:this.collapseAnimationDuration,disabled:this.disabled,animationType:this.animationType,showArrow:this.showArrow,toggleMode:c,theme:this.theme});return d},_createExpanderByNavigationBarExpandMode:function(c,b){var d=this;var e;switch(this.expandMode){case "single":e=this._singleExpandModeCreateExpander(c,
b);break;case "multiple":e=this._multipleExpandModeCreateExpander(c,b);break;case "toggle":e=this._toggleExpandModeCreateExpander(c,b);break;case "none":e=this._noneExpandModeCreateExpander(c,b);break}return e},_disableItems:function(){for(var b=0;b<this._expandersList.length;b++){this._toggleModesBackup[b]=a(this._expandersList[b]).jqxExpander("toggleMode");a(this._expandersList[b]).jqxExpander("toggleMode","none")}},_enableItems:function(){for(var b=0;b<this._expandersList.length;b++)a(this._expandersList[b]).jqxExpander("toggleMode",
this._toggleModesBackup[b])},_isValidIndex:function(b){return b<this._expandersList.length},_toggleExpandModeCreateExpander:function(c,b){var d;if(this.expandedIndex===c){d=this._createExpander(b,this.toggleMode,true);this._expandedIndexes[c]=true;this._currentExpandedItem=d}else{d=this._createExpander(b,this.toggleMode,false);this._expandedIndexes[c]=false}return d},_singleExpandModeCreateExpander:function(c,b){var d;if(this.expandedIndex===-1&&c===0||this.expandedIndex===c){d=this._createExpander(b,
this.toggleMode,true);this._expandedIndexes[c]=true;this._currentExpandedItem=d}else{d=this._createExpander(b,this.toggleMode,false);this._expandedIndexes[c]=false}return d},_multipleExpandModeCreateExpander:function(c,b){var d;if(this._expandedIndexes[c]){d=this._createExpander(b,this.toggleMode,this._expandedIndexes[c]);this._expandedIndexes[c]=true}else{d=this._createExpander(b,this.toggleMode,this._expandedIndexes[c]);this._expandedIndexes[c]=false}return d},_noneExpandModeCreateExpander:function(c,
b){var d;if(this._expandedIndexes[c]){d=this._createExpander(b,this.toggleMode,this._expandedIndexes[c]);this._expandedIndexes[c]=true}else{d=this._createExpander(b,this.toggleMode,this._expandedIndexes[c]);this._expandedIndexes[c]=false}return d},_removeRoundedCorners:function(f,d,b){if(d){var e=a(f).children(this.toThemeProperty(".jqx-expander-header",true));e.css("-moz-border-radius","0px");f.css("-moz-border-radius-topleft","0px");f.css("-moz-border-radius-topright","0px");e.css("border-radius",
"0px");f.css("border-top-left-radius","0px");f.css("border-top-right-radius","0px")}if(b){var c=a(f).children(".jqx-expander-contentWrapper").children(this.toThemeProperty(".jqx-expander-content",true));c.css("-moz-border-radius","0px");f.css("-moz-border-radius-topleft","0px");f.css("-moz-border-radius-topright","0px");c.css("border-radius","0px");f.css("border-bottom-left-radius","0px");f.css("border-bottom-right-radius","0px")}},collapseAt:function(b){if(this._isValidIndex(b)){a(this._expandersList[b]).jqxExpander("collapse");
this._expandedIndexes[b]=false;this.expandedIndexes.splice(b,1);if(this.expandedIndex==b)this.expandedIndex=-1}},expandAt:function(b){if(this._isValidIndex(b)){a(this._expandersList[b]).jqxExpander("expand");this._expandedIndexes[b]=true;this.expandedIndex=b}},getItemStates:function(){return this._expandedIndexes},disableAt:function(b){if(this._isValidIndex(b))if(!a(this._expandersList[b]).jqxExpander("disabled"))a(this._expandersList[b]).jqxExpander("disabled",true)},enableAt:function(b){if(this._isValidIndex(b))if(a(this._expandersList[b]).jqxExpander("disabled"))a(this._expandersList[b]).jqxExpander("disabled",
false)},setContentAt:function(b,c){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("setContent",c)},setHeaderContentAt:function(b,c){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("setHeaderContent",c)},getHeaderContentAt:function(b){if(this._isValidIndex(b))return a(this._expandersList[b]).jqxExpander("getHeaderContent");return null},getContentAt:function(b){if(this._isValidIndex(b))return a(this._expandersList[b]).jqxExpander("getContent");return null},lockAt:function(b){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("toggleMode",
"none")},unlockAt:function(b){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("toggleMode",this.toggleMode)},showArrowAt:function(b){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("showArrow",true)},hideArrowAt:function(b){if(this._isValidIndex(b))a(this._expandersList[b]).jqxExpander("showArrow",false)},disable:function(){for(var b=0;b<this._expandersList.length;b++)this.disableAt(b)},enable:function(){for(var b=0;b<this._expandersList.length;b++)this.enableAt(b)},
destroy:function(){this.host.removeClass()},_raiseEvent:function(f,d){if(d==undefined)d=-1;var c=this._events[f];var e=a.Event(c);e.owner=d;e.item=d;var b=this.host.trigger(e);return b},_getHeaders:function(){var c=[];for(var b=0;b<this._expandersList.length;b++)c[b]=a('<div class="'+this.toThemeProperty("jqx-expander-header")+'" />').append(a(this._expandersList[b]).jqxExpander("getHeaderContent"));return c},_getContents:function(){var b=[];for(var c=0;c<this._expandersList.length;c++)b[c]=a('<div class="'+
this.toThemeProperty("jqx-expander-content")+'" />').append(a(this._expandersList[c]).jqxExpander("getContent"));return b},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;this._validateProperties();if(c==="arrowPosition")a.each(b._expandersList,function(){this.jqxExpander({arrowPosition:d})});else if(c==="expandAnimationDuration")a.each(b._expandersList,function(){this.jqxExpander({expandAnimationDuration:d})});else if(c==="collapseAnimationDuration")a.each(b._expandersList,
function(){this.jqxExpander({collapseAnimationDuration:d})});else if(c==="showArrow")a.each(b._expandersList,function(){this.jqxExpander({showArrow:d})});else if(c==="toggleMode")a.each(b._expandersList,function(){this.jqxExpander({toggleMode:d})});else if(c==="theme")a.each(b._expandersList,function(){this.jqxExpander({theme:d})});else if(c==="animationType")a.each(b._expandersList,function(){this.jqxExpander({animationType:d})});else if(c==="disabled")a.each(b._expandersList,function(){this.jqxExpander({disabled:d})});
else if(c==="expandedIndexes")a.each(b.expandedIndexes,function(){if(d)b.expandAt(this);else b.collapseAt(this)});else if(c==="disabled")if(d)this.disable();else this.enable();else{this._updateExpandedIndexes(this.headersList.length);this._refreshNavigationBar()}}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxNumberInput","",{});a.jqx.textInput={};a.extend(a.jqx.textInput,{addHandler:function(b){a(b).data("lastValue",a(b).val());a(b).bind("keyup.textchange",a.jqx.textInput.handler);a(b).bind("cut.textchange paste.textchange input.textchange",a.jqx.textInput.delayedHandler)},removeHandler:function(b){a(b).unbind(".textchange")},handler:function(b){a.jqx.textInput.triggerIfChanged(a(this))},delayedHandler:function(c){var b=a(this);setTimeout(function(){a.jqx.textInput.triggerIfChanged(b)},
25)},triggerIfChanged:function(d){var e=d.val();var c=d.data("lastValue");if(e!==d.data("lastValue")){d.trigger("textchange",[d.data("lastValue")]);var b=false;if(d.val()===""&&d.val()!=c){b=true;d.data("emptyValue",true)}else{b=false;d.data("emptyValue",false)}d.trigger("showPlaceHolder",b);d.data("lastValue",e)}}});a.extend(a.jqx._jqxNumberInput.prototype,{defineInstance:function(){this.value=null;this.decimal=0;this.min=-99999999;this.max=99999999;this.width=null;this.validationMessage="Invalid value";
this.height=50;this.textAlign="right";this.readOnly=false;this.promptChar="_";this.decimalDigits=2;this.decimalSeparator=".";this.groupSeparator=",";this.groupSize=3;this.symbol="";this.symbolPosition="left";this.digits=8;this.negative=false;this.negativeSymbol="-";this.disabled=false;this.inputMode="advanced";this.spinButtons=false;this.spinButtonsWidth=18;this.spinButtonsStep=1;this.autoValidate=true;this.spinMode="advanced";this.events=["valuechanged","textchanged","mousedown","mouseup","keydown",
"keyup","keypress"];this.invalidArgumentExceptions=["invalid argument exception"]},createInstance:function(g){this.host.attr({role:"numberInput"});if(a.jqx.mobile.isTouchDevice()){this.inputMode="simple";this.spinMode="simple"}this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));if(this.spinButtons)this._spinButtons();else{this.numberInput=
a("<input autocomplete='off' type='textarea'/>").appendTo(this.host);this.numberInput.addClass(this.toThemeProperty("jqx-input-content"));this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))}var b=this.host.attr("name");if(!b)b=this.element.id;this.numberInput.attr("name",b);if(a.jqx.mobile.isTouchDevice()||this.inputMode=="textbox"){var h=this;this.numberInput.bind("change",function(){if(!h.parsing)h.parsing=true;if(h.parsing){if(h.numberInput.val()&&h.numberInput.val().indexOf("-")==
0)h.setvalue("negative",true);else h.setvalue("negative",false);h.ValueString=h.GetValueString(h.numberInput.val(),h.decimalSeparator,h.decimalSeparator!="");h.ValueString=(new Number(h.ValueString)).toFixed(h.decimalDigits);h._parseDecimalInSimpleMode();h.decimal=h.ValueString;h.parsing=false}})}var f=a.data(this.host[0],"jqxNumberInput");f.jqxNumberInput=this;var h=this;this.addHandler(this.host,"loadContent",function(o){h._render()});if(this.host.parents("form").length>0)this.host.parents("form").bind("reset",
function(){setTimeout(function(){h.setDecimal(0)},10)});this.propertyChangeMap.disabled=function(o,r,q,s){if(s){o.numberInput.addClass(n.toThemeProperty("jqx-input-disabled"));o.numberInput.attr("disabled",true)}else{o.host.removeClass(n.toThemeProperty("jqx-input-disabled"));o.numberInput.attr("disabled",false)}if(o.spinButtons&&o.host.jqxRepeatButton){o.upbutton.jqxRepeatButton({disabled:s});o.downbutton.jqxRepeatButton({disabled:s})}};if(this.disabled){this.numberInput.addClass(this.toThemeProperty("jqx-input-disabled"));
this.numberInput.attr("disabled",true);this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}this.selectedText="";this.decimalSeparatorPosition=-1;var c=this.element.id;var d=this.element;var n=this;this.oldValue=this._value();this.items=new Array;var l=this.value;var e=this.decimal;this._initializeLiterals();this._render();this.setDecimal(e);var h=this;setTimeout(function(){h._render(false)},100);this._addHandlers()},refresh:function(b){if(!b)this._render()},wheel:function(d,c){var e=
0;if(!d)d=window.event;if(d.originalEvent&&d.originalEvent.wheelDelta)d.wheelDelta=d.originalEvent.wheelDelta;if(d.wheelDelta)e=d.wheelDelta/120;else if(d.detail)e=-d.detail/3;if(e){var b=c._handleDelta(e);if(d.preventDefault)d.preventDefault();if(d.originalEvent!=null)d.originalEvent.mouseHandled=true;if(d.stopPropagation!=undefined)d.stopPropagation();if(b){b=false;d.returnValue=b;return b}else return false}if(d.preventDefault)d.preventDefault();d.returnValue=false},_handleDelta:function(b){if(b<
0)this.spinDown();else this.spinUp();return true},_addHandlers:function(){var b=this;this.addHandler(this.numberInput,"mousedown",function(e){return b._raiseEvent(2,e)});this._mousewheelfunc=this._mousewheelfunc||function(e){if(!b.editcell){b.wheel(e,b);return false}};this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var d=a.jqx.mobile.isOperaMiniMobileBrowser();if(d){this.inputMode="simple";var c=a.jqx.mobile.isOperaMiniBrowser();
if(c)b.numberInput.attr("readonly",true);this.addHandler(a(document),"click."+this.element.id,b._exitSimpleInputMode,b)}this.addHandler(this.numberInput,"focus",function(e){if(b.inputMode=="simple");a.data(b.numberInput,"selectionstart",b._selection().start);b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"))});this.addHandler(this.numberInput,"blur",function(e){if(b.inputMode=="simple")b._exitSimpleInputMode(e,b,false);if(b.autoValidate){var f=b.getDecimal();if(f>b.max)b.setDecimal(b.max);
if(f<b.min)b.setDecimal(b.min)}b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"));return true});this.addHandler(this.numberInput,"mouseup",function(e){return b._raiseEvent(3,e)});this.addHandler(this.numberInput,"keydown",function(e){return b._raiseEvent(4,e)});this.addHandler(this.numberInput,"keyup",function(e){return b._raiseEvent(5,e)});this.addHandler(this.numberInput,"keypress",function(e){return b._raiseEvent(6,e)})},_removeHandlers:function(){var b=this;this.removeHandler(this.numberInput,
"mousedown");var c=a.jqx.mobile.isOperaMiniMobileBrowser();if(c)this.removeHandler(a(document),"click."+this.element.id,b._exitSimpleInputMode,b);this.removeHandler(this.numberInput,"focus");this.removeHandler(this.numberInput,"blur");this.removeHandler(this.numberInput,"mouseup");this.removeHandler(this.numberInput,"keydown");this.removeHandler(this.numberInput,"keyup");this.removeHandler(this.numberInput,"keypress")},_spinButtons:function(){if(this.host.jqxRepeatButton){if(!this.numberInput){this.numberInput=
a("<input autocomplete='off' style='float: left;' type='textarea'/>");this.numberInput.appendTo(this.host);this.numberInput.addClass(this.toThemeProperty("jqx-input-content"));this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))}else this.numberInput.css("float","left");this.spincontainer=a('<div style="float: left; height: 100%; overflow: hidden; position: relative;"></div>');this.host.append(this.spincontainer);this.upbutton=a('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');
this.spincontainer.append(this.upbutton);this.upbutton.jqxRepeatButton({overrideTheme:true,disabled:this.disabled,roundedCorners:"top-right"});this.downbutton=a('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');this.spincontainer.append(this.downbutton);this.downbutton.jqxRepeatButton({overrideTheme:true,disabled:this.disabled,roundedCorners:"bottom-right"});var b=this;this.downbutton.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.upbutton.addClass(this.toThemeProperty("jqx-fill-state-normal"));
this.upbutton.addClass(this.toThemeProperty("jqx-rc-tr"));this.downbutton.addClass(this.toThemeProperty("jqx-rc-br"));this.addHandler(this.downbutton,"mouseup",function(c){if(!b.disabled){b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._downArrow.removeClass(b.toThemeProperty("icon-arrow-down-selected"))}});this.addHandler(this.upbutton,"mouseup",function(c){if(!b.disabled){b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._upArrow.removeClass(b.toThemeProperty("icon-arrow-up-selected"))}});
this.removeHandler(a(document),"mouseup."+this.element.id);this.addHandler(a(document),"mouseup."+this.element.id,function(c){b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._upArrow.removeClass(b.toThemeProperty("icon-arrow-up-selected"));b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._downArrow.removeClass(b.toThemeProperty("icon-arrow-down-selected"))});this.addHandler(this.downbutton,"mousedown",function(c){if(!b.disabled){b.downbutton.addClass(b.toThemeProperty("jqx-fill-state-pressed"));
b._downArrow.addClass(b.toThemeProperty("icon-arrow-down-selected"));c.preventDefault();c.stopPropagation();return false}});this.addHandler(this.upbutton,"mousedown",function(c){if(!b.disabled){b.upbutton.addClass(b.toThemeProperty("jqx-fill-state-pressed"));b._upArrow.addClass(b.toThemeProperty("icon-arrow-up-selected"));c.preventDefault();c.stopPropagation();return false}});this.upbutton.hover(function(){if(!b.disabled)b.upbutton.addClass(b.toThemeProperty("jqx-fill-state-hover"))},function(){b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-hover"));
b._upArrow.removeClass(b.toThemeProperty("icon-arrow-up-hover"))});this.downbutton.hover(function(){if(!b.disabled)b.downbutton.addClass(b.toThemeProperty("jqx-fill-state-hover"))},function(){b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b._downArrow.removeClass(b.toThemeProperty("icon-arrow-down-hover"))});this.upbutton.css("border-width","0px");this.downbutton.css("border-width","0px");if(this.disabled){this.upbutton[0].disabled=true;this.downbutton[0].disabled=true}else{this.upbutton[0].disabled=
false;this.downbutton[0].disabled=false}this.spincontainer.addClass(this.toThemeProperty("jqx-input"));this.spincontainer.addClass(this.toThemeProperty("jqx-rc-r"));this.spincontainer.css("border-width","0px");this.spincontainer.css("border-left-width","1px");this._upArrow=this.upbutton.find("div");this._downArrow=this.downbutton.find("div");this._upArrow.addClass(this.toThemeProperty("icon-arrow-up"));this._downArrow.addClass(this.toThemeProperty("icon-arrow-down"));this._upArrow.addClass(this.toThemeProperty("jqx-input-icon"));
this._downArrow.addClass(this.toThemeProperty("jqx-input-icon"));var b=this;this._upArrow.hover(function(){if(!b.disabled)b._upArrow.addClass(b.toThemeProperty("icon-arrow-up-hover"))},function(){b._upArrow.removeClass(b.toThemeProperty("icon-arrow-up-hover"))});this._downArrow.hover(function(){if(!b.disabled)b._downArrow.addClass(b.toThemeProperty("icon-arrow-down-hover"))},function(){b._downArrow.removeClass(b.toThemeProperty("icon-arrow-down-hover"))});this.addHandler(this.downbutton,"click",function(){if(b._selection().start==
0)b._setSelectionStart(b.numberInput.val().length);b.spinDown()});this.addHandler(this.upbutton,"click",function(){if(b._selection().start==0)b._setSelectionStart(b.numberInput.val().length);b.spinUp()})}},spinDown:function(){var n=this;if(n.spinMode=="none")return;if(!n.disabled){var o=n.decimal;var q=this._selection();var h=parseFloat(n.decimal);if(n.spinButtonsStep<0)n.spinButtonsStep=1;var c=parseInt(n.decimal)+n.spinButtonsStep;c=c.toString().length;var e=c<=n.digits;if(n.spinMode!="advanced"){if(h>
0&&h+n.spinButtonsStep<=n.max&&e){var u=1;for(f=0;f<n.decimalDigits;f++)u=u*10;var d=u*h-u*n.spinButtonsStep;d=d/u;if(d<0)d=0;d=this._parseDecimalValueToEditorValue(d);n._setDecimal(d)}}else{var r=this._getspindecimal();var l=this._getSeparatorPosition();var h=parseFloat(r.decimal);if(n.spinButtonsStep<0)n.spinButtonsStep=1;var c=parseInt(h)+n.spinButtonsStep;c=c.toString().length;var e=c<=n.digits;var u=1;var b=r.decimal.indexOf(".");if(b!=-1){var g=r.decimal.length-b-1;var u=1;for(var f=0;f<g;f++)u=
u*10;h-=new Number(n.spinButtonsStep/u);if(h<0)h=0;h=h.toFixed(g);var b=h.toString().indexOf(".");if(b==-1)h=h.toString()+".";var s=h.toString()+r.afterdecimal;s=new Number(s);s=s.toFixed(n.decimalDigits);s=this._parseDecimalValueToEditorValue(s);if(s>=n.min)n._setDecimal(s)}else if(h>0&&h-n.spinButtonsStep<=n.max&&e){var d=u*h-u*n.spinButtonsStep;d=d/u;var s=d.toString()+r.afterdecimal;if(s<0)s=0;s=this._parseDecimalValueToEditorValue(s);if(s>=n.min)n._setDecimal(s)}}if(s==undefined||this.inputMode!=
"simple"){this._setSelectionStart(q.start);return}if(s!=undefined&&(o==undefined||o.toString().length==s.length))this._setSelectionStart(q.start);else this._setSelectionStart(q.start-1)}},_getspindecimal:function(){var g=this._selection();var l="";var f=this._getSeparatorPosition();var o=this._getVisibleItems();var b=this._getHiddenPrefixCount();var n=this.numberInput.val();if(this.numberInput.val().length==g.start&&g.length==0){this._setSelection(g.start,g.start+1);g=this._selection()}var e=this.inputMode!=
"advanced";for(i=0;i<g.start;i++){if(e){var h=n.substring(i,i+1);var d=!isNaN(parseInt(h));if(d)l+=h;if(h==this.decimalSeparator)l+=h;continue}if(o[i].canEdit&&o[i].character!=this.promptChar)l+=o[i].character;else if(!o[i].canEdit&&this.decimalSeparatorPosition!=-1&&o[i]==o[this.decimalSeparatorPosition-b]){if(l.length==0)l="0";l+=o[i].character}}var c="";for(i=g.start;i<o.length;i++){if(e){var h=n.substring(i,i+1);var d=!isNaN(parseInt(h));if(d)c+=h;if(h==this.decimalSeparator)c+=h;continue}if(o[i].canEdit&&
o[i].character!=this.promptChar)c+=o[i].character;else if(!o[i].canEdit&&this.decimalSeparatorPosition!=-1&&o[i]==o[this.decimalSeparatorPosition-b])c+=o[i].character}return{decimal:this._parseDecimalValue(l),afterdecimal:this._parseDecimalValue(c)}},_parseDecimalValue:function(c){if(this.decimalSeparator!="."){var d=c.toString().indexOf(this.decimalSeparator);if(d>=0){var b=c.toString().substring(0,d)+"."+c.toString().substring(d+1);return b}}return c},_parseDecimalValueToEditorValue:function(c){if(this.decimalSeparator!=
"."){var d=c.toString().indexOf(".");if(d>=0){var b=c.toString().substring(0,d)+this.decimalSeparator+c.toString().substring(d+1);return b}}return c},spinUp:function(){var n=this;if(n.spinMode=="none")return;if(!n.disabled){var q=this._selection();var o=n.decimal;var h=parseFloat(n.decimal);if(n.spinButtonsStep<0)n.spinButtonsStep=1;var c=parseInt(n.decimal)+n.spinButtonsStep;c=c.toString().length;var f=c<=n.digits;if(n.spinMode!="advanced"){if(h+n.spinButtonsStep<=n.max&&f){var u=1;for(i=0;i<n.decimalDigits;i++)u=
u*10;var e=u*h+u*n.spinButtonsStep;e=e/u;e=this._parseDecimalValueToEditorValue(e);n._setDecimal(e)}}else{var r=this._getspindecimal();var l=this._getSeparatorPosition();var h=parseFloat(r.decimal);if(n.spinButtonsStep<0)n.spinButtonsStep=1;var c=parseInt(h)+n.spinButtonsStep;c=c.toString().length;var f=c<=n.digits;var u=1;var b=r.decimal.indexOf(".");if(b!=-1){var g=r.decimal.length-b-1;var u=1;for(i=0;i<g;i++)u=u*10;h+=new Number(n.spinButtonsStep/u);h=h.toFixed(g);var b=h.toString().indexOf(".");
if(b==-1)h=h.toString()+".";var s=h.toString()+r.afterdecimal;s=new Number(s);s=s.toFixed(n.decimalDigits);var d=(new Number(s)).toFixed(n.decimalDigits);if(d<=n.max){s=this._parseDecimalValueToEditorValue(s);n._setDecimal(s)}else s=undefined}else if(h+n.spinButtonsStep<=n.max&&f){var e=u*h+u*n.spinButtonsStep;e=e/u;var s=e.toString()+r.afterdecimal;var d=(new Number(s)).toFixed(n.decimalDigits);if(d<=n.max){s=this._parseDecimalValueToEditorValue(s);n._setDecimal(s)}else s=undefined}}if(s==undefined||
this.inputMode!="simple"){this._setSelectionStart(q.start);return}if(s!=undefined&&(o==undefined||o.toString().length==s.length))this._setSelectionStart(q.start);else this._setSelectionStart(1+q.start)}},_exitSimpleInputMode:function(b,n,g){if(n==undefined)n=b.data;if(n==null)return;if(g==undefined){if(b.target!=null&&n.element!=null)if(b.target.id!=undefined&&b.target.id.toString().length>0&&n.host.find("#"+b.target.id).length>0||b.target==n.element)return;var e=n.host.offset();var d=e.left;var f=
e.top;var c=n.host.width();var l=n.host.height();var o=a(b.target).offset();if(o.left>=d&&o.left<=d+c)if(o.top>=f&&o.top<=f+l)return}if(a.jqx.mobile.isOperaMiniBrowser())n.numberInput.attr("readonly",true);if(n.disabled||n.readOnly)return;var h=a.data(n.numberInput,"simpleInputMode");if(h==null)return;a.data(n.numberInput,"simpleInputMode",null);this._parseDecimalInSimpleMode();return false},_parseDecimalInSimpleMode:function(){var e=this;var c=e.getvalue("negative");var b=this.ValueString;if(b==
undefined)b=this.GetValueString(this.numberInput.val(),this.decimalSeparator,this.decimalSeparator!="");var f=c?"-":"";if(this.symbolPosition=="left")f+=this.symbol;var d=this.digits%this.groupSize;if(d==0)d=this.groupSize;var g=b.toString();f+=g;if(this.symbolPosition=="right")f+=this.symbol;e.numberInput.val(f)},_enterSimpleInputMode:function(f,d){if(d==undefined)d=f.data;var e=this._selection();if(d==null)return;var c=d.getvalue("negative");var b=d.decimal;if(c)if(b>0)b=-b;d.numberInput.val(b);
a.data(d.numberInput,"simpleInputMode",true);if(a.jqx.mobile.isOperaMiniBrowser())d.numberInput.attr("readonly",false);this._parseDecimalInSimpleMode();this._setSelectionStart(e.start)},setvalue:function(b,c){if(this[b]!=undefined)if(b=="decimal")this._setDecimal(c);else{this[b]=c;this.propertyChangedHandler(this,b,c,c)}},getvalue:function(b){if(b=="decimal")if(this.negative!=undefined&&this.negative==true)return-Math.abs(this[b]);if(b in this)return this[b];return null},_getString:function(){var b=
"";for(i=0;i<this.items.length;i++){var c=this.items[i].character;b+=c}return b},_literal:function(d,b,c,e){return{character:d,regex:b,canEdit:c,isSeparator:e}},_initializeLiterals:function(){if(this.inputMode=="textbox")return;var f=0;var d=this.negativeSymbol.length;for(i=0;i<d;i++){var e=this.negativeSymbol.substring(i,i+1);var l="";var b=false;var n=null;if(this.negative)n=this._literal(e,l,b,false);else n=this._literal("",l,b,false);this.items[f]=n;f++}var c=this.symbol.length;if(this.symbolPosition==
"left")for(i=0;i<c;i++){var e=this.symbol.substring(i,i+1);var l="";var b=false;var n=this._literal(e,l,b,false);this.items[f]=n;f++}var g=this.digits%this.groupSize;if(g==0)g=this.groupSize;for(i=0;i<this.digits;i++){var e=this.promptChar;var l="\\d";var b=true;var n=this._literal(e,l,b,false);this.items[f]=n;f++;if(i<this.digits-1&&this.groupSeparator!=undefined&&this.groupSeparator.length>0){g--;if(g==0){g=this.groupSize;var h=this._literal(this.groupSeparator,"",false,false);this.items[f]=h;f++}}else if(i==
this.digits-1)n.character=0}this.decimalSeparatorPosition=-1;if(this.decimalDigits!=undefined&&this.decimalDigits>0){var e=this.decimalSeparator;if(e.length==0)e=".";var n=this._literal(e,"",false,true);this.items[f]=n;this.decimalSeparatorPosition=f;f++;for(i=0;i<this.decimalDigits;i++){var q=0;var l="\\d";var o=this._literal(q,l,true,false);this.items[f]=o;f++}}if(this.symbolPosition=="right")for(i=0;i<c;i++){var e=this.symbol.substring(i,i+1);var l="";var b=false;var n=this._literal(e,l,b);this.items[f]=
n;f++}},_match:function(c,b){var d=new RegExp(b,"i");return d.test(c)},_raiseEvent:function(d,v){var u=this.events[d];var l={};l.owner=this;if(this.host.css("display")=="none")return true;var s=v.charCode?v.charCode:v.keyCode?v.keyCode:0;var w=true;var r=this.readOnly;var n=this;if(d==3||d==2)if(!this.disabled)if(this.inputMode!="simple")this._handleMouse(v);else return true;if(d==0){var c=this.getvalue("decimal");if(this.max<c||this.min>c)this.host.addClass(this.toThemeProperty("jqx-input-invalid"));
else{this.host.removeClass(this.toThemeProperty("jqx-input-invalid"));this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"))}}var b=new jQuery.Event(u);b.owner=this;l.value=this.getvalue("decimal");l.text=this.numberInput.val();b.args=l;w=this.host.trigger(b);var n=this;if(this.inputMode=="textbox")return w;if(this.inputMode!="simple")if(d==4){if(r||this.disabled)return false;w=n._handleKeyDown(v,s)}else if(d==5){if(r||this.disabled)w=false}else{if(d==
6){if(r||this.disabled)return false;w=n._handleKeyPress(v,s)}}else if(d==4||d==5||d==6){if(a.jqx.mobile.isTouchDevice())return true;if(r||this.disabled)return false;var f=String.fromCharCode(s);var o=parseInt(f);var g=true;if(!v.ctrlKey&&!v.shiftKey)if(s>=65&&s<=90)g=false;if(d==6&&a.browser.opera!=undefined)if(s==8)return false;if(g){if(d==4)g=n._handleSimpleKeyDown(v,s);if(!a.browser.msie){var h=v;if(h.ctrlKey&&s==99||h.ctrlKey&&s==67||h.ctrlKey&&s==122||h.ctrlKey&&s==90||h.ctrlKey&&s==118||h.ctrlKey&&
s==86||h.shiftKey&&s==45){if(d==6&&a.browser.webkit)n._handleSimpleKeyDown(v,s);return false}}if(v.ctrlKey&&s==97||v.ctrlKey&&s==65)return true;if(d==6&&g){var q=this._isSpecialKey(s);return q}}return g}return w},GetSelectionInValue:function(h,g,f,e){var c=0;for(i=0;i<g.length;i++){if(i>=h)break;var d=g.substring(i,i+1);var b=!isNaN(parseInt(d));if(b||e&&g.substring(i,i+1)==f)c++}return c},GetSelectionLengthInValue:function(g,h,f,e){var c=0;for(i=0;i<f.length;i++){if(i>=g+h)break;var d=f.substring(i,
i+1);var b=!isNaN(parseInt(d));if(h>0&&i>=g&&b||i>=g&&f[i].toString()==e)c++}return c},GetInsertTypeByPositionInValue:function(e,g,h,f){var c="before";var b=this.GetValueString(h,g,f);var d=this.GetDigitsToSeparator(0,b);if(e>d)c="after";return c},RemoveRange:function(f,e,q,g,x,b){var h=this.digits;var r=f;var y=e;var c=0;var s=this.decimal;var C=this._selection();var q=this.numberInput.val();var g=this.decimalSeparator;var l=g!="";if(y==0&&this.ValueString.length<this.decimalPossibleChars-1)return c;
var z=this.GetSeparatorPositionInText(g,q);if(!x)z=this.GetSeparatorPositionInText(".",q);if(z<0&&!l&&q.length>1)z=q.length;if(z==-1)z=q.length;var d=l?1:0;if(e<2&&b==true){var B=this.ValueString.length-this.decimalDigits-d;if(B==h&&f+e<z)y++}var n="";for(var w=0;w<q.length;w++){if(w<r||w>=r+y){n+=q.substring(w,w+1);continue}else{var v=q.substring(w,w+1);if(v==g){n+=g;continue}else{var v=q.substring(w,w+1);if(w>z){n+="0";continue}}}var v=q.substring(w,w+1);var u=!isNaN(parseInt(v));if(u)c++}if(n.length==
0)n="0";if(x)this.numberInput.val(n);else this.ValueString=n;var o=n.substring(0,1);if(o==g&&isNaN(parseInt(o))){var A="0"+n;n=A}this.ValueString=this.GetValueString(n,g,l);this.decimal=this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(r);return c},InsertDigit:function(w,C){if(typeof this.digits!="number")this.digits=parseInt(this.digits);if(typeof this.decimalDigits!="number")this.decimalDigits=parseInt(this.decimalDigits);var l=1+this.digits;var D=this._selection();var q=
this.getvalue("negative");var d=false;if(D.start==0&&this.symbol!=""&&this.symbolPosition=="left"){this._setSelectionStart(D.start+1);D=this._selection();d=true}if(q&&d||q&&!d&&D.start==0){this._setSelectionStart(D.start+1);D=this._selection()}var A=this.numberInput.val().substring(D.start,D.start+1);var s=this.numberInput.val();var g=this.decimalSeparator;var n=g!=""&&this.decimalDigits>0;if(A==this.symbol&&this.symbolPosition=="right")if(this.decimalDigits==0){this.ValueString=this.GetValueString(s,
g,n);if(this.ValueString.length>=l)return}else return;this.ValueString=this.GetValueString(s,g,n);var z=this.ValueString;if(this.decimalDigits>0&&C>=z.length)C=z.length-1;var u="";if(C<z.length)u=z.substring(C,C+1);var h=false;var B=false;var e=this.GetInsertTypeByPositionInValue(C,g,s,n);if(e=="after")h=true;var b=n?1:0;if(u!="."&&this.ValueString.length-this.decimalDigits-b>=l-1)h=true;var v=false;var x=n?1:0;if(!h&&this.ValueString&&this.ValueString.length>=this.digits+this.decimalDigits+x)return;
if(h&&u!="."){if(v)C++;var r=z.substring(0,C);if(r.length==z.length)if(this.ValueString.length>=this.digits+this.decimalDigits+x)return;var y=w;var c="";if(C+1<z.length)c=z.substring(C+1);var o=r+y+c;this.ValueString=o}else{var r=z.substring(0,C);var y=w;var c=z.substring(C);var o=r+y+c;if(z.substring(0,1)=="0"){o=y+z.substring(1);if(u=="."){this._setSelectionStart(D.start-1);D=this._selection()}}this.ValueString=o}if(q)this.decimal=-this.ValueString;else this.decimal=this.ValueString;this._parseDecimalInSimpleMode();
var f=D.start;f+=1;this._setSelectionStart(f);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val())},GetStringToSeparator:function(h,f,e){var d="";var b=f;var g=this.GetSeparatorPositionInText(f,h);var c=h.subString(0,g);d=this.GetValueString(c,f,e);return d},GetSeparatorPositionInText:function(c,d){var b=-1;for(i=0;i<d.length;i++)if(d.substring(i,i+1)==c){b=i;break}return b},GetValueString:function(g,f,e){var c="";for(i=0;i<g.length;i++){var d=g.substring(i,
i+1);var b=!isNaN(parseInt(d));if(b)c+=d;if(d==f)c+=f}return c},Backspace:function(){var d=this._selection();var e=this._selection();var f=this.numberInput.val();if(d.start==0&&d.length==0)return;this.isBackSpace=true;var c=f.substring[d.start,d.start+1];var b=!isNaN(parseInt(c));if(d.start>0&&d.length==0){this._setSelectionStart(d.start-1);var d=this._selection()}this.Delete();this._setSelectionStart(e.start-1);this.isBackSpace=false},Delete:function(c){var e=this._selection();var g=this.numberInput.val();
var f=e.start;var h=e.length;h=Math.max(h,1);this.ValueString=this.GetValueString(g,this.decimalSeparator,this.decimalSeparator!="");this.RemoveRange(e.start,h,this.ValueString,".",false);var d=this.ValueString.substring(0,1);var b=!isNaN(parseInt(d));if(!b)this.ValueString="0"+this.ValueString;this.decimal=this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(f);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val())},insertsimple:function(d){var l=
this._selection();var n=this.numberInput.val();if(l.start==n.length&&this.decimalDigits>0)return;var b=this.decimal;var g=this.decimalSeparator;this.ValueString=this.GetValueString(n,g,g!="");var h=this.GetSelectionInValue(l.start,n,g,g!="");var e=this.GetSelectionLengthInValue(l.start,l.length,n,g);var f=this.GetDigitsToSeparator(0,this.ValueString);var c=false;if(this.decimalDigits>0&&h>=this.ValueString.length)h--;this.RemoveRange(l.start,e,this.ValueString,g,false,true);this.InsertDigit(d,h,l)},
GetDigitsToSeparator:function(c,b){if(b.indexOf(".")<0)return b.length;for(i=0;i<b.length;i++)if(b.substring(i,i+1)=="."){c=i;break}return c},_handleSimpleKeyDown:function(g,s){var r=this._selection();if(r.start>=0&&r.start<this.items.length)var c=String.fromCharCode(s);if(s==8){this.Backspace();return false}if(s==190||s==110){var f=this.GetSeparatorPositionInText(".",this.numberInput.val());this._setSelectionStart(f+1);return false}if(s==188){var q=this.numberInput.val();for(d=r.start;d<q.length;d++)if(q[d]==
this.groupSeparator){this._setSelectionStart(1+d);break}return false}if(g.ctrlKey&&s==99||g.ctrlKey&&s==67){var r=this._selection();var u="";var o=this.numberInput.val();if(r.start>0||r.length>0)for(var d=r.start;d<r.end;d++)u+=o.substring(d,d+1);if(a.browser.msie)window.clipboardData.setData("Text",u);this.savedText=u;return false}if(g.ctrlKey&&s==122||g.ctrlKey&&s==90)return false;if(g.ctrlKey&&s==118||g.ctrlKey&&s==86||g.shiftKey&&s==45){if(this.savedText!=null&&this.savedText.length>0)for(var d=
0;d<this.savedText.length;d++){var l=parseInt(this.savedText.substring(d,d+1));if(!isNaN(l))this.insertsimple(l)}return false}var c=String.fromCharCode(s);var l=parseInt(c);if(s>=96&&s<=105){l=s-96;s=s-48}if(!isNaN(l)){var h=this;this.insertsimple(l);return false}if(s==46){this.Delete();return false}if(s==189||s==45){var b=this.getvalue("negative");if(b==false)this.setvalue("negative",true);else this.setvalue("negative",false);this._parseDecimalInSimpleMode();this._setSelectionStart(r.start)}if(s==
38){this.spinUp();return false}else if(s==40){this.spinDown();return false}var n=this._isSpecialKey(s);if(!a.browser.mozilla)return true;return n},_getEditRange:function(){var c=0;var b=0;for(i=0;i<this.items.length;i++)if(this.items[i].canEdit){c=i;break}for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit){b=i;break}return{start:c,end:b}},_getVisibleItems:function(){var b=new Array;var c=0;for(i=0;i<this.items.length;i++)if(this.items[i].character.toString().length>0){b[c]=this.items[i];
c++}return b},_hasEmptyVisibleItems:function(){var b=this._getVisibleItems();for(i=0;i<b.length;i++)if(b[i].canEdit&&b[i].character==this.promptChar)return true;return false},_getFirstVisibleNonEmptyIndex:function(){var b=this._getVisibleItems();for(i=0;i<b.length;i++)if(b[i].canEdit&&b[i].character!=this.promptChar)return i},_handleMouse:function(f,b){var d=this._selection();if(d.length<=1){var c=this._getFirstVisibleNonEmptyIndex();if(d.start<c)this._setSelectionStart(c)}},_insertKey:function(l){this.numberInput[0].focus();
var d=String.fromCharCode(l);var e=parseInt(d);if(isNaN(e))return;var q=0;for(i=0;i<this.items.length;i++)if(this.items[i].character.length==0)q++;var g=this._selection();var b=this;if(g.start>=0&&g.start<=this.items.length){var f=false;var h=this._getFirstVisibleNonEmptyIndex();if(g.start<h&&g.length==0)if(!isNaN(d)||d==" "){this._setSelectionStart(h);g=this._selection()}var c=this._getFirstEditableItemIndex();var o=this._getLastEditableItemIndex();var n=this._getVisibleItems();a.each(n,function(y,
C){if(g.start>y&&y!=n.length-1)return;var F=n[y];if(y>o)F=n[o];if(isNaN(d)||d==" ")return;if(!F.canEdit)return;var B=b._getSeparatorPosition();if(b._match(d,F.regex)){if(!f&&g.length>0){for(j=g.start+q;j<g.end+q;j++)if(b.items[j].canEdit)if(j>B)b.items[j].character="0";else b.items[j].character=b.promptChar;var E=b._getString();f=true}var B=b._getSeparatorPosition();var z=b._hasEmptyVisibleItems();if(g.start<=B&&z){var w=y;if(b.decimalSeparatorPosition==-1&&g.start==B)w=y+1;var v="";for(p=0;p<w;p++)if(n[p].canEdit&&
n[p].character!=b.promptChar)v+=n[p].character;v+=d;var x=b.decimal<1?1:0;if(g.start==B&&b.decimalSeparatorPosition!=-1){v+=b.decimalSeparator;x=0}for(p=w+x;p<n.length;p++)if(n[p].character==b.decimalSeparator&&n[p].isSeparator)v+=n[p].character;else if(n[p].canEdit&&n[p].character!=b.promptChar)v+=n[p].character;if(b.decimalSeparator!=".")v=b._parseDecimalValue(v);v=parseFloat(v).toString();v=new Number(v);v=v.toFixed(b.decimalDigits);if(b.decimalSeparator!=".")v=b._parseDecimalValueToEditorValue(v);
b.setvalue("decimal",v);var E=b._getString();if(g.end<B)b._setSelectionStart(g.end+x);else b._setSelectionStart(g.end);if(g.length>=1)b._setSelectionStart(g.end);if(g.length==b.numberInput.val().length){var r=b._moveCaretToDecimalSeparator();var D=b.decimalSeparatorPosition>=0?1:0;b._setSelectionStart(r-D)}}else if(g.start<B||g.start>B){if(b.numberInput.val().length==g.start&&b.decimalSeparatorPosition!=-1)return false;else if(b.numberInput.val().length==g.start&&b.decimalSeparatorPosition==-1&&!z)return false;
var v="";var s=false;for(p=0;p<y;p++){if(n[p].canEdit&&n[p].character!=b.promptChar)v+=n[p].character;if(n[p].character==b.decimalSeparator&&n[p].isSeparator){v+=n[p].character;s=true}}v+=d;var x=b.decimal<1?1:0;if(!s&&g.start==B-1){v+=b.decimalSeparator;s=true}for(p=y+1;p<n.length;p++)if(!s&&n[p].character==b.decimalSeparator&&n[p].isSeparator)v+=n[p].character;else if(n[p].canEdit&&n[p].character!=b.promptChar)v+=n[p].character;b.setvalue("decimal",v);var E=b._getString();if(b.decimalSeparatorPosition<
0&&F==n[o]){b._setSelectionStart(y);return false}var A=E.indexOf(b.symbol);var u=!b.getvalue("negative")?0:1;if(A<=u)A=E.length;if(g.start<A)b._setSelectionStart(y+1);else b._setSelectionStart(y);if(g.length>=1);if(g.length==b.numberInput.val().length){var r=b._moveCaretToDecimalSeparator();b._setSelectionStart(r-1)}}return false}})}},_handleKeyPress:function(h,d){var f=this._selection();var b=this;if(h.ctrlKey&&d==97||h.ctrlKey&&d==65)return true;if(d==8){if(f.start>0)b._setSelectionStart(f.start);
return false}if(d==46){if(f.start<this.items.length)b._setSelectionStart(f.start);return false}if(d==45){var c=this.getvalue("negative");if(c==false)this.setvalue("negative",true);else this.setvalue("negative",false)}if(a.browser.msie)this._insertKey(d);var g=this._isSpecialKey(d);return g},_deleteSelectedText:function(){var d=this._selection();var c="";var f=this._getSeparatorPosition();var b=this._getVisibleItems();var e=this._getHiddenPrefixCount();if(this.numberInput.val().length==d.start&&d.length==
0){this._setSelection(d.start,d.start+1);d=this._selection()}for(i=0;i<d.start;i++)if(b[i].canEdit&&b[i].character!=this.promptChar)c+=b[i].character;else if(!b[i].canEdit&&this.decimalSeparatorPosition!=-1&&b[i]==b[this.decimalSeparatorPosition-e]){if(c.length==0)c="0";c+=b[i].character}for(i=d.start;i<d.end;i++)if(i>f&&this.decimalSeparatorPosition!=-1){if(b[i].canEdit&&b[i].character!=this.promptChar)c+="0"}else if(!b[i].canEdit&&this.decimalSeparatorPosition!=-1&&b[i]==b[this.decimalSeparatorPosition-
e]){if(c.length==0)c="0";c+=b[i].character}for(i=d.end;i<b.length;i++)if(b[i].canEdit&&b[i].character!=this.promptChar)c+=b[i].character;else if(!b[i].canEdit&&this.decimalSeparatorPosition!=-1&&b[i]==b[this.decimalSeparatorPosition-e]){if(c.length==0)c="0";c+=b[i].character}this.setvalue("decimal",c);return d.length>0},_restoreInitialState:function(){var b=parseInt(this.decimalDigits);if(b>0)b+=2;for(k=this.items.length-1;k>this.items.length-1-b;k--)if(this.items[k].canEdit&&this.items[k].character==
this.promptChar)this.items[k].character=0},clearDecimal:function(){if(this.inputMode=="textbox"){this.numberInput.val();return}for(i=0;i<this.items.length;i++)if(this.items[i].canEdit)this.items[i].character=this.promptChar;this._restoreInitialState()},_saveSelectedText:function(){var c=this._selection();var d="";var b=this._getVisibleItems();if(c.start>0||c.length>0)for(i=c.start;i<c.end;i++)if(b[i].canEdit&&b[i].character!=this.promptChar)d+=b[i].character;else if(b[i].isSeparator)d+=b[i].character;
if(a.browser.msie)window.clipboardData.setData("Text",d);return d},_pasteSelectedText:function(){var f=this._selection();var l="";var e=0;if(window.clipboardData){var d=window.clipboardData.getData("Text");if(d!=this.selectedText&&d.length>0){this.selectedText=window.clipboardData.getData("Text");if(this.selectedText==null||this.selectedText==undefined)return}}var c=f.start;var b=this._getVisibleItems();this.selectedText=a.data(document.body,"jqxSelection");for(t=0;t<this.selectedText.length;t++){var g=
parseInt(this.selectedText[t]);if(!isNaN(g)){var h=48+g;this._insertKey(h)}}},_getHiddenPrefixCount:function(){var b=0;if(!this.negative)b++;if(this.symbolPosition=="left")for(i=0;i<this.symbol.length;i++)if(this.symbol.substring(i,i+1)=="")b++;return b},_getEditableItem:function(){var b=this._selection();for(i=0;i<this.items.length;i++)if(i<b.start)if(this.items[i].canEdit&&this.items[i].character!=this.promptChar)return this.items[i];return null},_getEditableItems:function(){var c=new Array;var b=
0;for(i=0;i<this.items.length;i++)if(this.items[i].canEdit){c[b]=this.items[i];b++}return c},_getValidSelectionStart:function(b){for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit&&this.items[i].character!=this.promptChar)return i;return-1},_getEditableItemIndex:function(c){var e=this._selection();var f=this._getHiddenPrefixCount();var b=this._getVisibleItems();var d=e.start;var g=-1;for(i=0;i<d;i++)if(i<b.length&&b[i].canEdit)g=i+f;if(g==-1&&e.length>0){d=e.end;for(i=0;i<d;i++)if(i<b.length&&
b[i].canEdit){g=i+f;break}}return g},_getEditableItemByIndex:function(b){for(k=0;k<this.items.length;k++)if(k>b)if(this.items[k].canEdit&&this.items[k].character!=this.promptChar)return k;return-1},_getFirstEditableItemIndex:function(){var b=this._getVisibleItems();for(m=0;m<b.length;m++)if(b[m].character!=this.promptChar&&b[m].canEdit&&b[m].character!="0")return m;return-1},_getLastEditableItemIndex:function(){var b=this._getVisibleItems();for(m=b.length-1;m>=0;m--)if(b[m].character!=this.promptChar&&
b[m].canEdit)return m;return-1},_moveCaretToDecimalSeparator:function(){for(i=this.items.length-1;i>=0;i--)if(this.items[i].character==this.decimalSeparator&&this.items[i].isSeparator){if(!this.negative){this._setSelectionStart(i);return i}else{this._setSelectionStart(i+1);return i}break}return this.numberInput.val().length},_handleBackspace:function(){var e=this._selection();var f=this._getHiddenPrefixCount();var b=this._getEditableItemIndex()-f;if(b>=0){if(e.length==0&&b!=-1)this._setSelection(b,
b+1);var g=e.start>this._getSeparatorPosition()+1&&this.decimalSeparatorPosition>0;if(g)e=this._selection();var d=this._deleteSelectedText();if(e.length<1||g)this._setSelectionStart(e.start);else if(e.length>=1)this._setSelectionStart(e.end);if(e.length==this.numberInput.val().length){var c=this._moveCaretToDecimalSeparator();this._setSelectionStart(c-1)}}else this._setSelectionStart(e.start)},_handleKeyDown:function(d,o){var n=this._selection();if(d.ctrlKey&&o==97||d.ctrlKey&&o==65)return true;if(d.ctrlKey&&
o==120||d.ctrlKey&&o==88){this.selectedText=this._saveSelectedText(d);a.data(document.body,"jqxSelection",this.selectedText);this._handleBackspace();return false}if(d.ctrlKey&&o==99||d.ctrlKey&&o==67){this.selectedText=this._saveSelectedText(d);a.data(document.body,"jqxSelection",this.selectedText);return false}if(d.ctrlKey&&o==122||d.ctrlKey&&o==90)return false;if(d.ctrlKey&&o==118||d.ctrlKey&&o==86||d.shiftKey&&o==45){this._pasteSelectedText();return false}if(n.start>=0&&n.start<this.items.length){var b=
String.fromCharCode(o);var r=this.items[n.start]}if(o==8){this._handleBackspace();return false}if(o==190||o==110){this._moveCaretToDecimalSeparator();return false}if(o==188){var l=this.numberInput.val();for(i=n.start;i<l.length;i++)if(l[i]==this.groupSeparator){this._setSelectionStart(1+i);break}return false}if(a.browser.msie==null){var b=String.fromCharCode(o);var g=parseInt(b);if(o>=96&&o<=105){g=o-96;o=o-48}if(!isNaN(g)){var f=this;f._insertKey(o);return false}}if(o==46){var q=this._getVisibleItems();
if(n.start<q.length){var c=q[n.start].canEdit==false?2:1;if(n.length==0)this._setSelection(n.start+c,n.start+c+n.length);this._handleBackspace();if(new Number(this.decimal)<1||n.start>this._getSeparatorPosition())this._setSelectionStart(n.end+c);else if(n.start+1<this.decimalSeparatorPosition)this._setSelectionStart(n.end+c)}return false}if(o==38){this.spinUp();return false}else if(o==40){this.spinDown();return false}var h=this._isSpecialKey(o);if(!a.browser.mozilla)return true;return h},_isSpecialKey:function(b){if(b!=
8&&b!=9&&b!=13&&b!=35&&b!=36&&b!=37&&b!=39&&b!=27&&b!=46)return false;return true},_selection:function(){if("selectionStart"in this.numberInput[0]){var f=this.numberInput[0];var g=f.selectionEnd-f.selectionStart;return{start:f.selectionStart,end:f.selectionEnd,length:g,text:f.value}}else{var c=document.selection.createRange();if(c==null)return{start:0,end:f.value.length,length:0};var b=this.numberInput[0].createTextRange();var d=b.duplicate();b.moveToBookmark(c.getBookmark());d.setEndPoint("EndToStart",
b);var g=c.text.length;return{start:d.text.length,end:d.text.length+c.text.length,length:g,text:c.text}}},_setSelection:function(e,b){try{if("selectionStart"in this.numberInput[0]){this.numberInput[0].focus();this.numberInput[0].setSelectionRange(e,b)}else{var c=this.numberInput[0].createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",e);c.select()}}catch(d){}},_setSelectionStart:function(b){this._setSelection(b,b);a.data(this.numberInput,"selectionstart",b)},_render:function(f){var c=
parseInt(this.host.css("border-left-width"));var h=parseInt(this.host.css("border-left-width"));var g=parseInt(this.host.css("border-left-width"));var d=parseInt(this.host.css("border-left-width"));var n=parseInt(this.host.css("height"))-g-d;var e=parseInt(this.host.css("width"))-c-h;if(this.width!=null&&this.width.toString().indexOf("px")!=-1)e=this.width;else if(this.width!=undefined&&!isNaN(this.width))e=this.width;if(this.height!=null&&this.height.toString().indexOf("px")!=-1)n=this.height;else if(this.height!=
undefined&&!isNaN(this.height))n=this.height;e=parseInt(e);n=parseInt(n);this.numberInput.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0});this.numberInput.css("text-align",this.textAlign);var o=this.numberInput.css("font-size");if(!isNaN(n))this.numberInput.css("height",parseInt(o)+4+"px");if(!isNaN(e))this.numberInput.css("width",e-2);var l=n-2*g-2*d-parseInt(o);if(isNaN(l))l=0;if(!isNaN(n))this.host.height(n);if(!isNaN(e))this.host.width(e);if(this.spinButtons&&
this.spincontainer){e-=parseInt(this.spinButtonsWidth-2);this.spincontainer.width(this.spinButtonsWidth);this.upbutton.width(this.spinButtonsWidth+2);this.downbutton.width(this.spinButtonsWidth+2);this.upbutton.height(Math.round(n/2));this.downbutton.height(Math.round(n/2));this.spincontainer.width(this.spinButtonsWidth);this.numberInput.css("width",e-5);this.numberInput.css("margin-right","2px")}var b=l/2;if(a.browser.msie&&a.browser.version<8)b=l/4;this.numberInput.css("padding-left","0px");this.numberInput.css("padding-right",
"0px");this.numberInput.css("padding-top",b);this.numberInput.css("padding-bottom",l/2);if(f==undefined||f==true){this.numberInput.val(this._getString());if(this.inputMode!="advanced")this._parseDecimalInSimpleMode()}},destroy:function(){this._removeHandlers();this.host.remove()},inputValue:function(b){if(b===undefined)return this._value();this.propertyChangedHandler(this,"value",this._value,b);this._refreshValue();return this},_value:function(){var b=this.numberInput.val();return b},val:function(b){if(b!=
undefined&&typeof b!="object")this.setDecimal(b);else return this.getDecimal()},getDecimal:function(){if(this.inputMode=="simple")this._parseDecimalInSimpleMode();var b=this.getvalue("negative");if(b&&this.decimal>0)return-this.decimal;return this.decimal},setDecimal:function(d){var b=d;if(this.decimalSeparator!="."){d=d.toString();var f=d.indexOf(".");if(f!=-1){var c=d.substring(0,f);var e=d.substring(f+1);d=c+this.decimalSeparator+e}if(d<0)this.setvalue("negative",true);else this.setvalue("negative",
false);this._setDecimal(d)}else{if(d<0)this.setvalue("negative",true);else this.setvalue("negative",false);this._setDecimal(Math.abs(d))}if(b==null)this.numberInput.val("")},_setDecimal:function(l){if(l==null||l==undefined)l=0;if(l.toString().indexOf("e")!=-1)l=0;this.clearDecimal();var n=l.toString();var o="";var b="";var c=true;if(n.length==0)n="0";for(var e=0;e<n.length;e++){if(n.substring(e,e+1)==this.decimalSeparator){c=false;continue}if(c)o+=n.substring(e,e+1);else b+=n.substring(e,e+1)}if(o.length>
0)o=parseFloat(o).toString();var g=this.digits;if(g<o.length)o=o.substr(0,g);var d=0;var h=this._getSeparatorPosition();var f=this._getHiddenPrefixCount();h=h+f;for(e=h;e>=0;e--)if(e<this.items.length&&this.items[e].canEdit)if(d<o.length){this.items[e].character=o.substring(o.length-d-1,o.length-d);d++}d=0;for(e=h;e<this.items.length;e++)if(this.items[e].canEdit)if(d<b.length){this.items[e].character=b.substring(d,d+1);d++}this._refreshValue();this.ValueString=(new Number(l)).toFixed(this.decimalDigits);
if(this.inputMode!="advanced"){this._parseDecimalInSimpleMode();this._raiseEvent(1,this.ValueString)}},_getSeparatorPosition:function(){var b=this._getHiddenPrefixCount();if(this.decimalSeparatorPosition>0)return this.decimalSeparatorPosition-b;return this.items.length-b},_setTheme:function(){this.host.removeClass();this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));
if(this.spinButtons){this.downbutton.removeClass();this.upbutton.removeClass();this.downbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));this.upbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));this._upArrow.removeClass();this._downArrow.removeClass();this._upArrow.addClass(this.toThemeProperty("icon-arrow-up"));this._downArrow.addClass(this.toThemeProperty("icon-arrow-down"))}this.numberInput.removeClass();this.numberInput.addClass(this.toThemeProperty("jqx-input-content"))},
propertyChangedHandler:function(c,d,g,f){if(d=="digits"||d=="groupSize"||d=="decimalDigits")if(f<0)throw new Exception(this.invalidArgumentExceptions[0]);if(d==="theme")a.jqx.utilities.setTheme(g,f,c.host);if(d=="digits")if(f!=g)c.digits=parseInt(f);if(d=="decimalDigits")if(f!=g)c.decimalDigits=parseInt(f);if(d=="digits"||d=="symbol"||d=="symbolPosition"||d=="groupSize"||d=="groupSeparator"||d=="decimalDigits"||d=="negativeSymbol"){var b=c.decimal;if(g!=f){var e=c._selection();c.items=new Array;c._initializeLiterals();
c.value=c._getString();c._refreshValue();c._setSelection(e.start,e.end);c._setDecimal(b)}}if(d=="spinButtons")if(c.spincontainer){if(!f)c.spincontainer.css("display","none");else c.spincontainer.css("display","block");c._render()}else c._spinButtons();if(d=="negative"&&c.inputMode=="advanced"){var e=c._selection();var h=0;if(f){c.items[0].character=c.negativeSymbol[0];h=1}else{c.items[0].character="";h=-1}c._refreshValue();if(c.isInitialized)c._setSelection(e.start+h,e.end+h)}if(d=="decimal")c.setDecimal(f);
if(d==="value"){c.value=f;c.setDecimal(f);c._raiseEvent(1,f)}if(d=="textAlign"){c.textAlign=f;c._render()}if(d=="disabled"){c.numberInput.attr("disabled",f);if(c.disabled)c.host.addClass(c.toThemeProperty("jqx-fill-state-disabled"));else c.host.removeClass(c.toThemeProperty("jqx-fill-state-disabled"))}if(d=="readOnly")c.readOnly=f;if(d=="promptChar"){for(i=0;i<c.items.length;i++)if(c.items[i].character==c.promptChar)c.items[i].character=f;c.promptChar=f}if(d=="width"){c.width=f;c._render()}else if(d==
"height"){c.height=f;c._render()}},_value:function(){var b=this.value;return b},_refreshValue:function(){var e=this.value;var b=0;this.value=this._getString();e=this.value;var d="";for(i=0;i<this.items.length;i++){if(this.items[i].canEdit&&this.items[i].character!=this.promptChar)d+=this.items[i].character;if(i==this.decimalSeparatorPosition)d+="."}this.decimal=d;var c=false;if(this.oldValue!==e){this.oldValue=e;this._raiseEvent(0,e);c=true}if(this.inputMode!="simple"){this.numberInput.val(e);if(c)this._raiseEvent(1,
e)}if(e==null)this.numberInput.val("")}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxProgressBar","",{});a.extend(a.jqx._jqxProgressBar.prototype,{defineInstance:function(){this.value=0;this.oldValue=null;this.max=100;this.min=0;this.orientation="horizontal";this.width=null;this.height=null;this.showText=false;this.animationDuration=300;this.disabled=false;this.events=["valuechanged","invalidvalue","complete"]},createInstance:function(c){var b=this;this.host.addClass(this.toThemeProperty("jqx-progressbar"));this.host.addClass(this.toThemeProperty("jqx-widget"));
this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height);this.valueDiv=a("<div></div>").appendTo(this.element);
if(this.orientation=="horizontal"){this.valueDiv.width(0);this.valueDiv.addClass(this.toThemeProperty("jqx-progressbar-value"))}else{this.valueDiv.height(0);this.valueDiv.addClass(this.toThemeProperty("jqx-progressbar-value-vertical"))}this.valueDiv.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.feedbackElementHost=a("<div style='width: 100%; height: 100%; position: relative;'></div>").appendTo(this.host);this.feedbackElement=a("<span class='text'></span>").appendTo(this.feedbackElementHost);
this.feedbackElement.addClass(this.toThemeProperty("jqx-progressbar-text"));this.oldValue=this._value();this.refresh();a(window).resize(function(){b.refresh()})},destroy:function(){this.host.removeClass();this.valueDiv.removeClass();this.valueDiv.remove();this.feedbackElement.remove()},_raiseevent:function(g,d,f){if(this.isInitialized!=undefined&&this.isInitialized==true){var c=this.events[g];var e=new jQuery.Event(c);e.previousValue=d;e.currentValue=f;e.owner=this;var b=this.host.trigger(e);return b}},
actualValue:function(b){if(b===undefined)return this._value();a.jqx.setvalueraiseevent(this,"value",b);return this._value()},propertyChangedHandler:function(c,d,b,f){if(!this.isInitialized)return;var e=this;if(d=="min"&&c.value<f)c.value=f;else if(d=="max"&&c.value>f)c.value=f;if(d==="value"&&e.value!=undefined){e.value=f;e.oldValue=b;if(f<e.min||f>e.max)e._raiseevent(1,b,f);e.refresh();if(e._value()===e.max)e._raiseevent(2,b,f)}if(d=="renderText"||d=="orientation"||d=="showText"||d=="min"||d=="max")e.refresh();
else if(d=="width"&&e.width!=undefined){if(e.width!=undefined&&!isNaN(e.width)){e.host.width(e.width);e.refresh()}}else if(d=="height"&&e.height!=undefined)if(e.height!=undefined&&!isNaN(e.height)){e.host.height(e.height);e.refresh()}if(d=="disabled")e.refresh()},_value:function(){var c=this.value;if(typeof c!=="number"){var b=parseInt(c);if(isNaN(b))c=0;else c=b}return Math.min(this.max,Math.max(this.min,c))},_percentage:function(){return 100*this._value()/this.max},_textwidth:function(d){var c=
a("<span>"+d+"</span>");a(this.host).append(c);var b=c.width();c.remove();return b},_textheight:function(d){var c=a("<span>"+d+"</span>");a(this.host).append(c);var b=c.height();c.remove();return b},refresh:function(){var i=this.actualValue();var m=this._percentage();if(this.disabled){this.host.addClass(this.toThemeProperty("jqx-progressbar-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));return}else{this.host.removeClass(this.toThemeProperty("jqx-progressbar-disabled"));
this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));a(this.element.children[0]).show()}if(isNaN(i))return;if(isNaN(m))return;if(this.oldValue!==i){this._raiseevent(0,this.oldValue,i);this.oldValue=i}var k=this.host.outerHeight();var b=this.host.outerWidth();if(this.width!=null)b=parseInt(this.width);if(this.height!=null)k=parseInt(this.height);var c=parseInt(this.host.outerWidth())/2;var f=parseInt(this.host.outerHeight())/2;if(isNaN(m))m=0;var g=this;try{var j=this.element.children[0];
if(this.orientation=="horizontal"){a(j).toggle(i>=this.min);a(j).animate({width:m.toFixed(0)+"%"},this.animationDuration,function(){});this.feedbackElementHost.css("margin-top",-this.host.height())}else{a(j).toggle(i>=this.min);this.feedbackElementHost.animate({"margin-top":-(m.toFixed(0)*g.host.height())/100},this.animationDuration,function(){});a(j).animate({height:m.toFixed(0)+"%"},this.animationDuration,function(){if(m.toFixed(0)==g.min)a(j).hide()})}}catch(e){}this.feedbackElement.html(m.toFixed(0)+
"%").toggle(this.showText==true);if(this.renderText)this.feedbackElement.html(this.renderText(m.toFixed(0)+"%"));this.feedbackElement.css("position","absolute");this.feedbackElement.css("top","50%");this.feedbackElement.css("left","0");var h=this.feedbackElement.height();var d=this.feedbackElement.width();var l=Math.floor(c-parseInt(d)/2);this.feedbackElement.css({left:l,"margin-top":-parseInt(h)/2+"px"})}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxRadioButton","",{});a.extend(a.jqx._jqxRadioButton.prototype,{defineInstance:function(){this.animationShowDelay=300,this.animationHideDelay=300,this.width=null;this.height=null;this.boxSize="13px";this.checked=false;this.hasThreeStates=false;this.disabled=false;this.enableContainerClick=true;this.locked=false;this.groupName="";this.events=["checked","unchecked","indeterminate","change"]},createInstance:function(b){this.setSize();var d=this;this.propertyChangeMap.width=
function(e,g,f,h){d.setSize()};this.propertyChangeMap.height=function(e,g,f,h){d.setSize()};this.radiobutton=a("<div><div><span></span></div></div>");this.host.attr("tabIndex",0);this.host.prepend(this.radiobutton);this.host.append(a('<div style="clear: both;"></div>'));this.checkMark=a(this.radiobutton).find("span");this.box=a(this.radiobutton).find("div");this._supportsRC=true;if(a.browser.msie&&a.browser.version<9)this._supportsRC=false;this.box.addClass(this.toThemeProperty("jqx-fill-state-normal"));
this.box.addClass(this.toThemeProperty("jqx-radiobutton-default"));this.host.addClass(this.toThemeProperty("jqx-widget"));if(this.disabled)this.disable();this.host.addClass(this.toThemeProperty("jqx-radiobutton"));if(this.locked)this.host.css("cursor","auto");var c=this.element.getAttribute("checked");if(c=="checked"||c=="true"||c==true)this.checked=true;this._addInput();this._render();this._addHandlers()},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;this.input=a("<input type='hidden'/>");
this.host.append(this.input);this.input.attr("name",b)},refresh:function(b){if(!b){this.setSize();this._render()}},setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1)this.host.width(this.width);else if(this.width!=undefined&&!isNaN(this.width))this.host.width(this.width);if(this.height!=null&&this.height.toString().indexOf("px")!=-1)this.host.height(this.height);else if(this.height!=undefined&&!isNaN(this.height))this.host.height(this.height)},_addHandlers:function(){var b=
this;this.addHandler(this.box,"click",function(c){if(!b.disabled&&!b.enableContainerClick){b.toggle();c.preventDefault();return false}});this.addHandler(this.host,"keydown",function(c){if(!b.disabled&&!b.locked)if(c.keyCode==32){b.toggle();c.preventDefault();return false}});this.addHandler(this.host,"click",function(c){if(!b.disabled&&b.enableContainerClick){b.toggle();c.preventDefault();return false}});this.addHandler(this.host,"selectstart",function(c){if(!b.disabled&&b.enableContainerClick)c.preventDefault()});
this.addHandler(this.host,"mouseup",function(c){if(!b.disabled&&b.enableContainerClick)c.preventDefault()});this.addHandler(this.host,"mousedown",function(c){if(!b.disabled&&b.enableContainerClick){b.host.focus();c.preventDefault()}});this.addHandler(this.host,"focus",function(c){if(!b.disabled&&b.enableContainerClick&&!b.locked){b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.addClass(b.toThemeProperty("jqx-fill-state-focus"));c.preventDefault();return false}});this.addHandler(this.host,
"blur",function(c){if(!b.disabled&&b.enableContainerClick&&!b.locked){b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.removeClass(b.toThemeProperty("jqx-fill-state-focus"));c.preventDefault();return false}});this.addHandler(this.host,"mouseenter",function(c){if(!b.disabled&&b.enableContainerClick&&!b.locked){b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.addClass(b.toThemeProperty("jqx-fill-state-hover"));c.preventDefault();return false}});this.addHandler(this.host,
"mouseleave",function(c){if(!b.disabled&&b.enableContainerClick&&!b.locked){b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover"));c.preventDefault();return false}});this.addHandler(this.box,"mouseenter",function(){if(!b.disabled&&!b.enableContainerClick){b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.addClass(b.toThemeProperty("jqx-fill-state-hover"))}});this.addHandler(this.box,"mouseleave",function(){if(!b.disabled&&
!b.enableContainerClick){b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover"));b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover"))}})},_removeHandlers:function(){this.removeHandler(this.box,"click");this.removeHandler(this.box,"mouseenter");this.removeHandler(this.box,"mouseleave");this.removeHandler(this.host,"click");this.removeHandler(this.host,"mouseup");this.removeHandler(this.host,"mousedown");this.removeHandler(this.host,"selectstart");this.removeHandler(this.host,"mouseenter");
this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur")},_render:function(){if(this.boxSize==null)this.boxSize=13;this.box.width(this.boxSize);this.box.height(this.boxSize);if(!this.disabled)if(this.enableContainerClick)this.host.css("cursor","pointer");else this.host.css("cursor","auto");else this.disable();this.updateStates()},check:function(){this.checked=true;var b=this;this.checkMark.removeClass();
this.checkMark.addClass(this.toThemeProperty("jqx-fill-state-pressed"));if(a.browser.msie)if(!this.disabled)this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"));else{this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled"));this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"))}else{if(!this.disabled)this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"));else{this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled"));
this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"))}this.checkMark.css("opacity",0);this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){})}var c=a.find(".jqx-radiobutton");if(this.groupName==null)this.groupName="";a.each(c,function(){var d=a(this).jqxRadioButton("groupName");if(d==b.groupName&&this!=b.element)a(this).jqxRadioButton("uncheck")});this._raiseEvent("0");this._raiseEvent("3",{checked:true});if(this.checkMark.height()==0){this.checkMark.height(this.boxSize);
this.checkMark.width(this.boxSize)}this.input.val(this.checked)},uncheck:function(){var c=this.checked;this.checked=false;var b=this;if(a.browser.msie)b.checkMark.removeClass();else{this.checkMark.css("opacity",1);this.checkMark.stop().animate({opacity:0},this.animationHideDelay,function(){b.checkMark.removeClass()})}if(c){this._raiseEvent("1");this._raiseEvent("3",{checked:false})}this.input.val(this.checked)},indeterminate:function(){var b=this.checked;this.checked=null;this.checkMark.removeClass();
if(a.browser.msie)this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate"));else{this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate"));this.checkMark.css("opacity",0);this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){})}if(b!=null){this._raiseEvent("2");this._raiseEvent("3",{checked:null})}this.input.val(this.checked)},toggle:function(){if(this.disabled)return;if(this.locked)return;var b=this.checked;if(this.checked==
true)this.checked=this.hasTreeStates?null:true;else this.checked=true;if(b!=this.checked)this.updateStates();this.input.val(this.checked)},updateStates:function(){if(this.checked)this.check();else if(this.checked==false)this.uncheck();else if(this.checked==null)this.indeterminate()},disable:function(){this.disabled=true;if(this.checked==true)this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled"));else if(this.checked==null)this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled"));
this.box.addClass(this.toThemeProperty("jqx-radiobutton-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))},enable:function(){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));if(this.checked==true)this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-disabled"));else if(this.checked==null)this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled"));this.box.removeClass(this.toThemeProperty("jqx-radiobutton-disabled"));
this.disabled=false},destroy:function(){this._removeHandlers()},_raiseEvent:function(g,e){var c=this.events[g];var f=new jQuery.Event(c);f.owner=this;f.args=e;try{var b=this.host.trigger(f)}catch(d){}return b},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false)return;if(c==this.enableContainerClick&&!this.disabled&&!this.locked)if(d)this.host.css("cursor","pointer");else this.host.css("cursor","auto");if(c=="checked")switch(d){case true:this.check();
break;case false:this.uncheck();break;case null:this.indeterminate();break}if(c=="theme")a.jqx.utilities.setTheme(e,d,this.host);if(c=="disabled")if(d)this.disable();else this.enable()}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxRating","",{});a.extend(a.jqx._jqxRating.prototype,{defineInstance:function(){this.count=5;this.disabled=false;this.value=0;this.height="auto";this.width="auto";this.precision=1;this.singleVote=false;this.itemHeight="20";this.itemWidth="20";this._itemHeight;this._itemWidth;this._images=[];this._events=["change"];this._invalidArgumentExceptions={invalidPrecision:"The value of the precision property is invalid!",invalidWidth:"Width you've entered is invalid!",invalidHeight:"Height you've entered is invalid!",
invalidCount:"You've entered invalid value for the count property!",invalidValue:"You've entered invalid value property!"}},createInstance:function(b){this._createRating()},_createRating:function(){this.host.css("display","none");this.host.empty();this._addInput();this._validateProperties();this._render();this._performLayout();this._removeEventHandlers();this._addEventHandlers();this.host.css("display","block")},_addInput:function(){var b=this.host.attr("name");if(!b)b=this.element.id;this.input=
a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b);this.input.val(this.value.toString())},_render:function(){for(var b=1;b<=this.count;b++){this._images[b-1]=a('<div style="float:left;width:auto;height:auto;"><div style="position:absolute;width:auto;height:auto;visibility:hidden;" class="jqx-rating-hoverWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-hover")+'"></div><div style="visibility:hidden;width:auto;height:auto;" class="'+
this.toThemeProperty("jqx-rating-image-backward")+'"></div></div><div style="position:absolute;width:auto;height:auto;" class="jqx-rating-voteWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-default")+'"></div><div style="width:0;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-backward")+'"></div></div></div>');this.host.append(this._images[b-1])}},_performLayout:function(){for(var d=1;d<=this.count;d++){var e=this._images[d-
1].find(this.toThemeProperty(".jqx-rating-image-backward",true)),h=this._images[d-1].find(this.toThemeProperty(".jqx-rating-image-default",true)),c=this._images[d-1].find(this.toThemeProperty(".jqx-rating-image-hover",true)),b=this._getImageName(h),f=this._getImageName(c),g=this._getImageName(e);h.css("background-image","none");c.css("background-image","none");e.css("background-image","none");this._appendImage(c,f,d-1);this._appendImage(e,g,d-1);this._appendImage(h,b,d-1)}},_setControlSize:function(c,
b){this.host.css("height",this.height);this.host.css("width",this.width);if(this.itemHeight&&this.itemHeight!=="auto")this._itemHeight=parseInt(this.itemHeight);else this._itemHeight=b;if(this.itemWidth&&this.itemWidth!=="auto")this._itemWidth=parseInt(this.itemWidth);else this._itemWidth=c},_appendImage:function(b,d,e){var c=this;var f=a('<img style="-moz-user-select:-moz-none;-khtml-user-select: none;-webkit-user-select:none;user-select:none;" class="'+this.toThemeProperty("jqx-rating-image")+'" src="'+
d+'" />');b.append(f);f.load(function(){if(!c._initialized){c._setControlSize(a(this).width(),a(this).height());c._setValue(c.value,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward");c._initialized=true}c._images[e].height(c._itemHeight);a(this).height(c._itemHeight);c._images[e].width(c._itemWidth);a(this).width(c._itemWidth)});return f},_validateProperties:function(){try{if(this.precision<0.0010||this.precision>1)throw this._invalidArgumentExceptions.invalidPrecision;
if(this.height!=="auto"&&parseInt(this.height)<0)throw this._invalidArgumentExceptions.invalidHeight;if(this.width!=="auto"&&parseInt(this.width)<0)throw this._invalidArgumentExceptions.invalidWidth;if(this.count<=0)throw this._invalidArgumentExceptions.invalidCount;if(this.value>this.count||this.value<0)throw this._invalidArgumentExceptions.invalidValue;}catch(b){alert(b)}},_getImageIndex:function(c){var b=0;while(c!==this._images[b][0])b++;return++b},_getRating:function(h,d){var g=this._getImageIndex(h);
if(this.precision<1){var f=parseInt(d)-parseInt(a(h).position().left),c=this._itemWidth*this.precision,e=0;while(e<f)e+=c;if(e>parseInt(this._itemWidth)-c)e=parseInt(this._itemWidth);var b=e/a(h).width();g-=1-b}return g},_addEventHandlers:function(){var b=this;for(var c=0;c<this.count;c++){if(!a.jqx.mobile.isTouchDevice()){this.addHandler(this._images[c],"mousemove",function(d){var e=b._getRating(this,d.pageX);b._setValue(e,".jqx-rating-hoverWrapper",".jqx-rating-image-hover",".jqx-rating-image-backward")});
this.addHandler(this._images[c],"mouseenter",function(e){var f=b._getImageIndex(this);for(var d=0;d<f;d++){b._images[d].children(".jqx-rating-hoverWrapper").css("z-index","10");b._images[d].children(".jqx-rating-voteWrapper").css("z-index","1");b._images[d].children(".jqx-rating-hoverWrapper").css("visibility","visible")}});this.addHandler(this._images[c],"mouseleave",function(e){var f=b._getImageIndex(this);for(var d=0;d<f;d++){b._images[d].children(".jqx-rating-voteWrapper").css("z-index","10");
b._images[d].children(".jqx-rating-hoverWrapper").css("z-index","1");b._images[d].children(".jqx-rating-hoverWrapper").css("visibility","hidden")}})}this.addHandler(this._images[c],"click",function(d){var e=b._getRating(this,d.pageX);b._raiseEvent(0,e);b._setValue(e,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward");if(b.singleVote)b.disable();d.stopPropagation()});this.addHandler(this._images[c],"dragstart",function(d){return false})}},_removeEventHandlers:function(){for(var b=
0;b<this.count;b++){this.removeHandler(this._images[b],"mousemove");this.removeHandler(this._images[b],"mouseenter");this.removeHandler(this._images[b],"mouseleave");this.removeHandler(this._images[b],"click");this.removeHandler(this._images[b],"dragstart")}},_getImageName:function(c){var b=c.css("background-image");b=b.replace('url("',"");b=b.replace('")',"");b=b.replace("url(","");b=b.replace(")","");return b},_setValue:function(d,k,h,f){for(var e=1;e<=this.count;e++){var j=1,g=this._images[e-1].children(k),
c=g.children(h),b=g.children(f);if(e>d)if(Math.abs(e-d)<1)j=1-Math.abs(e-d);else j=0;c.width(this._itemWidth*j);b.width(this._itemWidth-parseInt(c.width()));g.children(this.toThemeProperty(f)).children(0).css("margin-left",-this._itemWidth*j+"px")}},_raiseEvent:function(d,c){var b=new a.Event(this._events[d]);b.owner=this;b.value=c;b.oldvalue=this.value;this.value=c;if(this.input)this.input.val(this.value.toString());return this.host.trigger(b)},setValue:function(b){this._setValue(b,".jqx-rating-voteWrapper",
".jqx-rating-image-default",".jqx-rating-image-backward");this.value=b},getValue:function(){return this.value},disable:function(){this._removeEventHandlers();this.disabled=true},enable:function(){this._removeEventHandlers();this._addEventHandlers();this.disabled=false},propertyChangedHandler:function(b,c,e,d){this._validateProperties();if(c==="disabled"){if(d)this.disable();else this.enable();return}else if(c==="precision"){this.precision=d;return}else this._createRating()}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxSlider","",{});a.extend(a.jqx._jqxSlider.prototype,{defineInstance:function(){this.disabled=false;this.width=300;this.height=30;this.step=1;this.max=10;this.min=0;this.orientation="horizontal";this.showTicks=true;this.ticksPosition="both";this.ticksFrequency=2;this.showButtons=true;this.buttonsPosition="both";this.mode="default";this.showRange=true;this.rangeSlider=false;this.value=0;this.values=[0,10];this.tooltip=true;this.sliderButtonSize=14;this.tickSize=7;this._dimentions=
{vertical:{size:"height",oSize:"width",outerOSize:"outerWidth",outerSize:"outerHeight",dimention:"top",oDimention:"left",start:"_startY",mouse:"_mouseStartY",page:"pageY",opposite:"horizontal"},horizontal:{size:"width",oSize:"height",outerOSize:"outerHeight",outerSize:"outerWidth",dimention:"left",oDimention:"top",start:"_startX",mouse:"_mouseStartX",page:"pageX",opposite:"vertical"}};this._touchEvents={mousedown:"touchstart",click:"touchstart",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",
mouseleave:"mouseleave"};this._events=["change","slide","slideEnd","slideStart","created"];this._invalidArgumentExceptions={invalidWidth:"Invalid width.",invalidHeight:"Invalid height.",invalidStep:"Invalid step.",invalidMaxValue:"Invalid maximum value.",invalidMinValue:"Invalid minimum value.",invalidTickFrequency:"Invalid tick frequency.",invalidValue:"Invalid value.",invalidValues:"Invalid values.",invalidTicksPosition:"Invalid ticksPosition",invalidButtonsPosition:"Invalid buttonsPosition"};this._lastValue=
[];this._track=null;this._leftButton=null;this._rightButton=null;this._slider=null;this._rangeBar=null;this._slideEvent=null;this._capturedElement=null;this._slideStarted=false},createInstance:function(b){this.host.addClass(this.toThemeProperty("jqx-slider"));this.host.addClass(this.toThemeProperty("jqx-widget"));this._isTouchDevice=a.jqx.mobile.isTouchDevice();this.host.width(this.width);this.host.height(this.height);this._refresh();this._raiseEvent(4,{value:this.getValue()});this._addInput()},_addInput:function(){var b=
this.host.attr("name");if(!b)b=this.element.id;this.input=a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b);if(!this.rangeSlider)this.input.val(this.value.toString());else if(this.values)this.input.val(this.value.rangeStart.toString()+"-"+this.value.rangeEnd.toString())},_getDimention:function(b){return this._dimentions[this.orientation][b]},_getEvent:function(b){if(this._isTouchDevice)return this._touchEvents[b];else return b},refresh:function(b){if(!b)this._refresh()},
_refresh:function(){this._render();this._performLayout();this._removeEventHandlers();this._addEventHandlers();this._initialSettings()},_render:function(){this._addTrack();this._addSliders();this._addTickContainers();this._addContentWrapper();this._addButtons();this._addRangeBar()},_addTrack:function(){if(this._track===null||this._track.length<1){this._track=a('<div class="'+this.toThemeProperty("jqx-slider-track")+'"></div>');this.host.append(this._track)}this._track.attr("style","");this._track.removeClass(this.toThemeProperty("jqx-slider-track-"+
this._getDimention("opposite")));this._track.addClass(this.toThemeProperty("jqx-slider-track-"+this.orientation));this._track.addClass(this.toThemeProperty("jqx-fill-state-normal"));this._track.addClass(this.toThemeProperty("jqx-rc-all"))},_addSliders:function(){if(this._slider===null||this._slider.length<1){this._slider={};this._slider.left=a('<div class="'+this.toThemeProperty("jqx-slider-slider")+'"></div>');this._track.append(this._slider.left);this._slider.right=a('<div class="'+this.toThemeProperty("jqx-slider-slider")+
'"></div>');this._track.append(this._slider.right)}this._slider.left.removeClass(this.toThemeProperty("jqx-slider-slider-"+this._getDimention("opposite")));this._slider.left.addClass(this.toThemeProperty("jqx-slider-slider-"+this.orientation));this._slider.right.removeClass(this.toThemeProperty("jqx-slider-slider-"+this._getDimention("opposite")));this._slider.right.addClass(this.toThemeProperty("jqx-slider-slider-"+this.orientation));this._slider.right.addClass(this.toThemeProperty("jqx-fill-state-normal"));
this._slider.left.addClass(this.toThemeProperty("jqx-fill-state-normal"))},_addTickContainers:function(){if(this._bottomTicks!==null||this._bottomTicks.length<1||this._topTicks!==null||this._topTicks.length<1)this._addTickContainers();if(!this.showTicks){this._bottomTicks.css("visibility","hidden");this._topTicks.css("visibility","hidden")}else{this._bottomTicks.css("visibility","visible");this._topTicks.css("visibility","visibility")}},_addTickContainers:function(){if(typeof this._bottomTicks===
"undefined"||this._bottomTicks.length<1){this._bottomTicks=a('<div class="'+this.toThemeProperty("jqx-slider-tickscontainer")+'" style=""></div>');this.host.prepend(this._bottomTicks)}if(typeof this._topTicks==="undefined"||this._topTicks.length<1){this._topTicks=a('<div class="'+this.toThemeProperty("jqx-slider-tickscontainer")+'" style=""></div>');this.host.append(this._topTicks)}},_addButtons:function(){if(this._leftButton===null||this._leftButton.length<1||this._rightButton===null||this._rightButton.length<
1)this._createButtons();if(!this.showButtons||this.rangeSlider){this._rightButton.css("display","none");this._leftButton.css("display","none")}else{this._rightButton.css("display","block");this._leftButton.css("display","block")}},_createButtons:function(){this._leftButton=a('<div class="jqx-slider-left"><div style="width: 100%; height: 100%;"></div></div>');this._rightButton=a('<div class="jqx-slider-right"><div style="width: 100%; height: 100%;"></div></div>');this.host.prepend(this._rightButton);
this.host.prepend(this._leftButton);this._leftButton.jqxRepeatButton({theme:this.theme,delay:250,width:this.sliderButtonSize,height:this.sliderButtonSize});this._rightButton.jqxRepeatButton({theme:this.theme,delay:250,width:this.sliderButtonSize,height:this.sliderButtonSize})},_addContentWrapper:function(){if(this._contentWrapper===undefined||this._contentWrapper.length===0){this.host.wrapInner("<div></div>");this._contentWrapper=this.host.children(0)}if(this.orientation==="horizontal")this._contentWrapper.css("float",
"left");else this._contentWrapper.css("float","none")},_addTicks:function(b){if(!this.showTicks)return;var g=this.max-this.min,d=b[this._getDimention("size")](),f=Math.round(g/this.ticksFrequency),h=d/f;b.empty();this._addTick(b,0,this.min);for(var c=1;c<f;c++){var e=c*h;e=Math.floor(e);this._addTick(b,e,c)}this._addTick(b,f*h,this.max)},_addTick:function(c,b,f){var d,e=c[this._getDimention("oSize")]();if(this.orientation==="horizontal"){d=a('<div style="float: left; position:absolute; left:'+b+'px;" class="'+
this.toThemeProperty("jqx-slider-tick-horizontal")+'"></div>');this._tickLayout(c,d)}else{d=a('<div style="float: none; position:absolute; top:'+b+'px;" class="'+this.toThemeProperty("jqx-slider-tick-vertical")+'"></div>');this._tickLayout(c,d)}d.addClass(this.toThemeProperty("jqx-slider-tick"));d.addClass(this.toThemeProperty("jqx-fill-state-pressed"));c.append(d);d[this._getDimention("oSize")](this.tickSize)},_tickLayout:function(b,c){var d=b[this._getDimention("oSize")]();if(b[0]===this._topTicks[0])c.css(this._getDimention("oDimention"),
"2px");else c.css(this._getDimention("oDimention"),d-this.tickSize-2)},_addRangeBar:function(){if(this._rangeBar===null||this._rangeBar.length<1){this._rangeBar=a('<div class="'+this.toThemeProperty("jqx-slider-rangebar")+'"></div>');this._rangeBar.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._rangeBar.addClass(this.toThemeProperty("jqx-rc-all"));this._track.append(this._rangeBar)}if(!this.showRange)this._rangeBar.css("display","none");else this._rangeBar.css("display","block")},
_getLeftDisplacement:function(){if(!this.showButtons)return 0;if(this.rangeSlider)return 0;switch(this.buttonsPosition){case "left":return this._leftButton[this._getDimention("outerSize")](true)+this._rightButton[this._getDimention("outerSize")](true);case "right":return 0;default:return this._leftButton[this._getDimention("outerSize")](true)}return 0},_performLayout:function(){this.host.width(this.width);this.host.height(this.height);var b=this.host.height();if(this._getDimention("size")=="width")b=
this.host.width();this._performButtonsLayout();this._performTrackLayout(b);this._contentWrapper[this._getDimention("size")](this._track[this._getDimention("size")]());this._contentWrapper[this._getDimention("oSize")](this[this._getDimention("oSize")]);this._performTicksLayout();this._performRangeBarLayout();if(this.rangeSlider)this._slider.left.css("visibility","visible");else this._slider.left.css("visibility","hidden");this._refreshRangeBar();if(this.orientation=="vertical")if(this.showButtons){var c=
parseInt((this._leftButton.width()-this._track.width())/2);this._track.css("margin-left",-2+c+"px")}},_performTrackLayout:function(b){this._track[this._getDimention("size")](b-(this.showButtons&&!this.rangeSlider?this._leftButton[this._getDimention("outerSize")](true)+this._rightButton[this._getDimention("outerSize")](true):0));this._slider.left.css("left",0);this._slider.left.css("top",0);this._slider.right.css("left",0);this._slider.right.css("top",0)},_performTicksLayout:function(){this._performTicksContainerLayout();
this._addTicks(this._topTicks);this._addTicks(this._bottomTicks);this._topTicks.css("visibility","hidden");this._bottomTicks.css("visibility","hidden");if((this.ticksPosition==="top"||this.ticksPosition==="both")&&this.showTicks)this._bottomTicks.css("visibility","visible");if((this.ticksPosition==="bottom"||this.ticksPosition==="both")&&this.showTicks)this._topTicks.css("visibility","visible")},_performTicksContainerLayout:function(){var f=this._getDimention("size");var e=this._getDimention("oSize");
var b=this._getDimention("outerOSize");this._topTicks[f](this._track[f]());this._bottomTicks[f](this._track[f]());var d=-1+(this[e]-this._track[b](true))/2;this._topTicks[e](parseInt(d));var c=-1+(this[e]-this._track[b](true))/2;this._bottomTicks[e](parseInt(c));if(this.orientation==="vertical"){this._topTicks.css("float","left");this._track.css("float","left");this._bottomTicks.css("float","left")}else{this._topTicks.css("float","none");this._track.css("float","none");this._bottomTicks.css("float",
"none")}},_performButtonsLayout:function(){this._addButtonsStyles();this._addButtonsClasses();this._addButtonsHover();this._orderButtons();this._centerElement(this._rightButton);this._centerElement(this._leftButton);this._layoutButtons()},_addButtonsStyles:function(){this._leftButton.css("background-position","center");this._rightButton.css("background-position","center");if(this.orientation==="vertical"){this._leftButton.css("float","none");this._rightButton.css("float","none")}else{this._leftButton.css("float",
"left");this._rightButton.css("float","left")}},_addButtonsClasses:function(){var b={prev:"left",next:"right"};if(this.orientation==="vertical")b={prev:"up",next:"down"};this._leftButton.addClass(this.toThemeProperty("jqx-rc-all"));this._rightButton.addClass(this.toThemeProperty("jqx-rc-all"));this._leftButton.addClass(this.toThemeProperty("jqx-slider-button"));this._rightButton.addClass(this.toThemeProperty("jqx-slider-button"));this._leftArrow=this._leftButton.find("div");this._rightArrow=this._rightButton.find("div");
this._leftArrow.removeClass(this.toThemeProperty("icon-arrow-left"));this._rightArrow.removeClass(this.toThemeProperty("icon-arrow-right"));this._leftArrow.removeClass(this.toThemeProperty("icon-arrow-up"));this._rightArrow.removeClass(this.toThemeProperty("icon-arrow-down"));this._leftArrow.addClass(this.toThemeProperty("icon-arrow-"+b.prev));this._rightArrow.addClass(this.toThemeProperty("icon-arrow-"+b.next))},_addButtonsHover:function(){var c=this,b={prev:"left",next:"right"};if(this.orientation===
"vertical")b={prev:"up",next:"down"};this.addHandler(a(document),"mouseup.arrow"+this.element.id,function(){c._leftArrow.removeClass(c.toThemeProperty("icon-arrow-"+b.prev+"-selected"));c._rightArrow.removeClass(c.toThemeProperty("icon-arrow-"+b.next+"-selected"))});this.addHandler(this._leftButton,"mousedown",function(){if(!c.disabled)c._leftArrow.addClass(c.toThemeProperty("icon-arrow-"+b.prev+"-selected"))});this.addHandler(this._leftButton,"mouseup",function(){if(!c.disabled)c._leftArrow.removeClass(c.toThemeProperty("icon-arrow-"+
b.prev+"-selected"))});this.addHandler(this._rightButton,"mousedown",function(){if(!c.disabled)c._rightArrow.addClass(c.toThemeProperty("icon-arrow-"+b.next+"-selected"))});this.addHandler(this._rightButton,"mouseup",function(){if(!c.disabled)c._rightArrow.removeClass(c.toThemeProperty("icon-arrow-"+b.next+"-selected"))});this._leftButton.hover(function(){if(!c.disabled)c._leftArrow.addClass(c.toThemeProperty("icon-arrow-"+b.prev+"-hover"))},function(){if(!c.disabled)c._leftArrow.removeClass(c.toThemeProperty("icon-arrow-"+
b.prev+"-hover"))});this._rightButton.hover(function(){if(!c.disabled)c._rightArrow.addClass(c.toThemeProperty("icon-arrow-"+b.next+"-hover"))},function(){if(!c.disabled)c._rightArrow.removeClass(c.toThemeProperty("icon-arrow-"+b.next+"-hover"))})},_layoutButtons:function(){if(this.orientation==="horizontal")this._horizontalButtonsLayout();else this._verticalButtonsLayout()},_horizontalButtonsLayout:function(){var b=2+Math.ceil(this.sliderButtonSize/2);if(this.buttonsPosition=="left"){this._leftButton.css("margin-right",
"0px");this._rightButton.css("margin-right",b)}else if(this.buttonsPosition=="right"){this._leftButton.css("margin-left",2+b);this._rightButton.css("margin-right","0px")}else{this._leftButton.css("margin-right",b);this._rightButton.css("margin-left",2+b)}},_verticalButtonsLayout:function(){var b=2+Math.ceil(this.sliderButtonSize/2);if(this.buttonsPosition=="left"){this._leftButton.css("margin-bottom","0px");this._rightButton.css("margin-bottom",b)}else if(this.buttonsPosition=="right"){this._leftButton.css("margin-top",
2+b);this._rightButton.css("margin-bottom","0px")}else{this._leftButton.css("margin-bottom",b);this._rightButton.css("margin-top",2+b)}},_orderButtons:function(){this._rightButton.detach();this._leftButton.detach();switch(this.buttonsPosition){case "left":this.host.prepend(this._rightButton);this.host.prepend(this._leftButton);break;case "right":this.host.append(this._leftButton);this.host.append(this._rightButton);break;case "both":this.host.prepend(this._leftButton);this.host.append(this._rightButton);
break}},_performRangeBarLayout:function(){this._rangeBar[this._getDimention("oSize")](this._track[this._getDimention("oSize")]());this._rangeBar[this._getDimention("size")](this._track[this._getDimention("size")]());this._rangeBar.css("position","absolute");this._rangeBar.css("left",0);this._rangeBar.css("top",0)},_centerElement:function(c){var b=(a(c.parent())[this._getDimention("oSize")]()-c[this._getDimention("outerOSize")]())/2;c.css("margin-"+[this._getDimention("dimention")],0);c.css("margin-"+
[this._getDimention("oDimention")],b);return c},_raiseEvent:function(d,b){var c=a.Event(this._events[d]);c.args=b;if(d===1){c.args.cancel=false;this._slideEvent=c}this._lastValue[d]=b.value;return this.host.trigger(c)},_initialSettings:function(){if(this.rangeSlider)if(typeof this.value!=="number")this.setValue(this.value);else this.setValue(this.values);else this.setValue(this.value);if(this.disabled)this.disable();this.element.tabIndex=0;this.host.find("DIV").css("tab-index",0)},_addEventHandlers:function(){var b=
this;this.addHandler(this._slider.right,this._getEvent("mousedown"),this._startDrag,{self:this});this.addHandler(this._slider.left,this._getEvent("mousedown"),this._startDrag,{self:this});this.addHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"),function(){b._stopDrag(b)});if(document.referrer!=""||window.frameElement)if(window.top!=null){var c=function(e){b._stopDrag(b)};if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=
-1)if(window.top.document)if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",c,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",c)}this.addHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"),this._performDrag,{self:this});var d=this;this.addHandler(this._slider.left,"mouseenter",function(){if(!d.disabled)b._slider.left.addClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._slider.right,
"mouseenter",function(){if(!d.disabled)b._slider.right.addClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._slider.left,"mouseleave",function(){if(!d.disabled)b._slider.left.removeClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._slider.right,"mouseleave",function(){if(!d.disabled)b._slider.right.removeClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(this._slider.left,"mousedown",function(){if(!d.disabled)b._slider.left.addClass(b.toThemeProperty("jqx-fill-state-pressed"))});
this.addHandler(this._slider.right,"mousedown",function(){if(!d.disabled)b._slider.right.addClass(b.toThemeProperty("jqx-fill-state-pressed"))});this.addHandler(this._slider.left,"mouseup",function(){if(!d.disabled)b._slider.left.removeClass(b.toThemeProperty("jqx-fill-state-pressed"))});this.addHandler(this._slider.right,"mouseup",function(){if(!d.disabled)b._slider.right.removeClass(b.toThemeProperty("jqx-fill-state-pressed"))});this.addHandler(this._leftButton,this._getEvent("click"),this._leftButtonHandler,
{self:this});this.addHandler(this._rightButton,this._getEvent("click"),this._rightButtonHandler,{self:this});this.addHandler(this._track,this._getEvent("mousedown"),this._trackMouseDownHandler,{self:this});this.element.onselectstart=function(){return false};this._addMouseWheelListeners();this._addKeyboardListeners()},_addMouseWheelListeners:function(){var b=this;this.addHandler(this.host,"mousewheel",function(d){var c=d.wheelDelta;if(d.originalEvent&&d.originalEvent.wheelDelta)d.wheelDelta=d.originalEvent.wheelDelta;
if(!("wheelDelta"in d))c=d.detail*-40;if(c>0)b.incrementValue();else b.decrementValue();d.preventDefault()})},_addKeyboardListeners:function(){var b=this;this.addHandler(this.host,"keydown",function(c){switch(c.keyCode){case 40:case 37:b.decrementValue();return false;case 38:case 39:b.incrementValue();return false;case 36:if(b.rangeSlider)b.setValue([b.values[0],b.max]);else b.setValue(b.min);return false;case 35:if(b.rangeSlider)b.setValue([b.min,b.values[1]]);else b.setValue(b.max);return false}})},
_trackMouseDownHandler:function(g){var c=g.data.self,g=c._isTouchDevice?g.originalEvent.touches[0]:g,b=c._track.offset()[c._getDimention("dimention")],d=g[c._getDimention("page")]-c._slider.left[c._getDimention("size")]()/2,f=c._getClosest(d),e=parseInt(c._track[c._getDimention("size")]());var h=c._getValueByPosition(d);c._setValue(h,f);g.target=f;c._startDrag(g)},_getClosest:function(b){if(!this.rangeSlider)return this._slider.right;else{b=b-this._track.offset()[this._getDimention("dimention")]-
this._slider.left[this._getDimention("size")]()/2;if(Math.abs(parseInt(this._slider.left.css(this._getDimention("dimention")),10)-b)<Math.abs(parseInt(this._slider.right.css(this._getDimention("dimention")),10)-b))return this._slider.left;else return this._slider.right}},_removeEventHandlers:function(){this.removeHandler(this._slider.right,this._getEvent("mousedown"),this._startDrag);this.removeHandler(this._slider.left,this._getEvent("mousedown"),this._startDrag);this.removeHandler(a(document),this._getEvent("mouseup")+
"."+this.host.attr("id"),this._stopDrag);this.removeHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"),this._performDrag);this.removeHandler(this._leftButton,this._getEvent("click"),this._leftButtonHandler);this.removeHandler(this._rightButton,this._getEvent("click"),this._rightButtonHandler);this.removeHandler(this._track,this._getEvent("mousedown"),this._trackMouseDownHandler);this.element.onselectstart=null;this.removeHandler(this.host,this._getEvent("mousewheel"));this.removeHandler(this.host,
this._getEvent("keydown"))},_rightButtonHandler:function(c){var b=c.data.self;if(b.orientation=="horizontal")b.incrementValue();else b.decrementValue()},_leftButtonHandler:function(c){var b=c.data.self;if(b.orientation=="horizontal")b.decrementValue();else b.incrementValue()},_startDrag:function(c){var b=c.data.self;b._capturedElement=a(c.target);b._startX=a(c.target).offset().left;b._startY=a(c.target).offset().top;b._mouseStartX=b._isTouchDevice?c.originalEvent.touches[0].pageX:c.pageX;b._mouseStartY=
b._isTouchDevice?c.originalEvent.touches[0].pageY:c.pageY;return false},_stopDrag:function(b){if(b._slideStarted)b._raiseEvent(2,{value:b.getValue()});b._slider.left.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._slider.right.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._slideStarted=false;b._capturedElement=null},_performDrag:function(c){var b=c.data.self,c=b._isTouchDevice?c.originalEvent.touches[0]:c;if(b._capturedElement!==null){if(c.which===0&&a.browser.msie&&a.browser.version<
9){b._stopDrag(b);return false}b._isDragged(c[b._getDimention("page")]);if(b._slideStarted)return b._dragHandler(c[b._getDimention("page")])}},_isDragged:function(b){if(Math.abs(b-this[this._getDimention("mouse")])>2&&!this._slideStarted){this._slideStarted=true;if(this._valueChanged(3))this._raiseEvent(3,{value:this.getValue()})}else if(this._capturedElement===null)this._slideStarted=false},_dragHandler:function(b){b=b-this[this._getDimention("mouse")]+this[this._getDimention("start")];var c=this._getValueByPosition(b);
if(this.rangeSlider){var d=this._slider.right,f=this._slider.left;var e=this._getDimention("dimention");if(this._capturedElement[0]===f[0]){if(parseFloat(b)>d.offset()[e])b=d.offset()[e]}else if(parseFloat(b)<f.offset()[e])b=f.offset()[e]}this._setValue(c,this._capturedElement,b);return false},_getValueByPosition:function(b){if(this.mode==="default")return this._getFloatingValueByPosition(b);else return this._getFixedValueByPosition(b)},_getFloatingValueByPosition:function(b){var c=b-this._track.offset()[this._getDimention("dimention")]+
this._slider.left.width()/2,d=c/this._track[this._getDimention("size")](),e=(this.max-this.min)*d+this.min;if(this.orientation==="horizontal")return e;else return this.max+this.min-e},_getFixedValueByPosition:function(b){var g=this.step,f=(this.max-this.min)/g,c=this._track[this._getDimention("size")]()/f,e=this._track.offset()[this._getDimention("dimention")]-this._slider.left[this._getDimention("size")]()/2,h={number:-1,distance:Number.MAX_VALUE};for(var d=this.min;d<=this.max+this.step;d+=this.step){if(Math.abs(h.distance-
b)>Math.abs(e-b)){h.distance=e;h.number=d}e+=c}if(this.orientation==="horizontal")return h.number;else return this.max+this.min-h.number},_setValue:function(e,d,b){if(!this._slideEvent||!this._slideEvent.args.cancel){e=this._handleValue(e,d);this._setSliderPosition(e,d,b);this._fixZIndexes();if(this._valueChanged(1))var c=this._raiseEvent(1,{value:this.getValue()});if(this._valueChanged(0))this._raiseEvent(0,{value:this.getValue()});if(this.tooltip)d.attr("title",e);if(this.input)if(!this.rangeSlider)this.input.val(this.value.toString());
else if(this.values)this.input.val(this.value.rangeStart.toString()+"-"+this.value.rangeEnd.toString())}},_valueChanged:function(c){var b=this.getValue();return!this.rangeSlider&&this._lastValue[c]!==b||this.rangeSlider&&(typeof this._lastValue[c]!=="object"||Math.round(this._lastValue[c].rangeEnd)!==Math.round(b.rangeEnd)||Math.round(this._lastValue[c].rangeStart)!==Math.round(b.rangeStart))},_handleValue:function(c,b){c=this._validateValue(c,b);if(b[0]===this._slider.left[0])this.values[0]=c;if(b[0]===
this._slider.right[0])this.values[1]=c;if(this.rangeSlider)this.value={rangeStart:this.values[0],rangeEnd:this.values[1]};else this.value=c;return c},_fixZIndexes:function(){if(this.values[1]-this.values[0]<0.5&&this.max-this.values[0]<0.5){this._slider.left.css("z-index",20);this._slider.right.css("z-index",15)}else{this._slider.left.css("z-index",15);this._slider.right.css("z-index",20)}},_refreshRangeBar:function(){var b=this._slider.left.position()[this._getDimention("dimention")];if(this.orientation===
"vertical")b=this._slider.right.position()[this._getDimention("dimention")];this._rangeBar.css(this._getDimention("dimention"),b+this._slider.left[this._getDimention("size")]()/2);this._rangeBar[this._getDimention("size")](Math.abs(this._slider.right.position()[this._getDimention("dimention")]-this._slider.left.position()[this._getDimention("dimention")]))},_validateValue:function(c,b){if(c>this.max)c=this.max;if(c<this.min)c=this.min;if(b[0]===this._slider.left[0]){if(c>=this.values[1])c=this.values[1]}else if(c<=
this.values[0])c=this.values[0];return c},_setSliderPosition:function(f,e,b){var d=this._track[this._getDimention("size")](),c,g;if(b)b-=this._track.offset()[this._getDimention("dimention")];if(this.orientation==="horizontal")c=(f-this.min)/(this.max-this.min);else c=1-(f-this.min)/(this.max-this.min);g=typeof b==="undefined"||this.mode!=="default"?d*c-this._slider.left[this._getDimention("size")]()/2:b;g=this._validateDropPosition(g,e);e.css(this._getDimention("dimention"),g);this._refreshRangeBar()},
_validateDropPosition:function(e,d){var b=this._track[this._getDimention("size")](),c=d[this._getDimention("size")]();if(e<-c/2)e=-c/2;if(e>b-c/2)e=b-c/2;return Math.floor(e)},_addDisabledClasses:function(){this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))},_removeDisabledClasses:function(){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},propertyChangedHandler:function(b,c,e,d){switch(c){case "theme":a.jqx.utilities.setTheme(e,d,b.host);b._leftButton.jqxRepeatButton({theme:d});
b._rightButton.jqxRepeatButton({theme:d});break;case "disabled":if(d){b.disabled=true;b.disable()}else{b.disabled=false;b.enable()}break;case "width":b.width=parseInt(d);b._performLayout();b._initialSettings();break;case "height":b.height=parseInt(d);b._performLayout();b._initialSettings();break;case "min":b.min=parseFloat(d);if(!b.rangeSlider)b._setValue(d,b._slider.left);b._initialSettings();break;case "step":break;case "max":b.max=parseFloat(d);if(!b.rangeSlider)b._setValue(d,b._slider.left);b._initialSettings();
break;case "showTicks":case "ticksPosition":case "ticksFrequency":case "tickSize":b._performLayout();b._initialSettings();break;case "showRange":case "showButtons":case "orientation":b._render();b._performLayout();b._initialSettings();break;case "buttonsPosition":b._refresh();break;case "mode":break;case "rangeSlider":if(!d)b.value=b.value.rangeEnd;else b.value={rangeEnd:b.value,rangeStart:b.value};b._render();b._performLayout();b._initialSettings();break;case "value":if(!b.rangeSlider)b.value=parseFloat(d);
b.setValue(d);break;case "values":b.setValue(d);break;case "tooltip":if(!d){b._slider.left.removeAttr("title");b._slider.right.removeAttr("title")}break;default:b._refresh()}},incrementValue:function(b){if(b==undefined||isNaN(parseFloat(b)))b=this.step;if(this.rangeSlider){if(this.values[1]<this.max)this._setValue(this.values[1]+b,this._slider.right)}else if(this.values[1]>=this.min&&this.values[1]<this.max)this._setValue(this.values[1]+b,this._slider.right)},decrementValue:function(b){if(b==undefined||
isNaN(parseFloat(b)))b=this.step;if(this.rangeSlider){if(this.values[0]>this.min)this._setValue(this.values[0]-b,this._slider.left)}else if(this.values[1]<=this.max&&this.values[1]>this.min)this._setValue(this.values[1]-b,this._slider.right)},setValue:function(d){if(this.rangeSlider){var c,b;if(arguments.length<2)if(d instanceof Array){c=d[0];b=d[1]}else{if(typeof d==="object"&&typeof d.rangeStart!=="undefined"&&typeof d.rangeEnd!=="undefined"){c=d.rangeStart;b=d.rangeEnd}}else{c=arguments[0];b=arguments[1]}this._setValue(b,
this._slider.right);this._setValue(c,this._slider.left)}else{this._setValue(this.min,this._slider.left);this._setValue(d,this._slider.right)}},getValue:function(){return this.value},disable:function(){this._removeEventHandlers();this.disabled=true;this._addDisabledClasses();this._leftButton.jqxRepeatButton({disabled:this.disabled});this._rightButton.jqxRepeatButton({disabled:this.disabled})},enable:function(){this._addEventHandlers();this.disabled=false;this._removeDisabledClasses();this._leftButton.jqxRepeatButton({disabled:this.disabled});
this._rightButton.jqxRepeatButton({disabled:this.disabled})}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxSplitter","",{});a.extend(a.jqx._jqxSplitter.prototype,{defineInstance:function(){this.width=null;this.height=null;this.roundedcorners=false;this.panels=[];this.orientation="vertical";this.disabled=false;this.splitBarSize=5;this.enableCollapseAnimation=false;this.animationDuration="fast";this.cookies=false;this.cookieOptions={};this.touchSplitBarSize=15;this._dimentions={horizontal:{size:"height",outerSize:"outerHeight",dimention:"top",start:"_startY",mouse:"_mouseStartY",
page:"pageY",opposite:"vertical"},vertical:{size:"width",outerSize:"outerWidth",dimention:"left",start:"_startX",mouse:"_mouseStartX",page:"pageX",opposite:"horizontal"}};this._touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave"};this._isTouchDevice=false;this.touchMode="auto";this._splitBars=[];this._splitPanels=[];this._cursor="";this._panelWrapper=null;this._events=["resize","expanded","collapsed","resizeStart"];this._exceptions=
{invalidArgument:"Invalid ",invalidOrientation:"Invalid orientation!",invalidStructure:"Invalid structure!",invalidSplitBarSize:"Invalid splitbar size!"}},createInstance:function(){this._cursor=this.host.css("cursor");this._setSplitterSize();this._isTouchDevice=a.jqx.mobile.isTouchDevice();this._validateProperties();this._defaultLayout=true;this._refresh(true);this._defaultLayout=false;var e=a.data(document.body,"jqx-splitters")||[];e.push(this.host);a.data(document.body,"jqx-splitters",e);if(this.disabled){this.disabled=
false;this.disable()}this._splittersLayout();var d=this;setTimeout(function(){d.refresh()},10);if(this.element.style.height==""||this.element.style.width==""){var c=function(f){a.each(d._splitBars,function(){if(d.orientation=="vertical")this.splitBar.css("height",f);else this.splitBar.css("width",f)})};d._splliterAutoSizeTimer=setInterval(function(){c("100%");if(d.host.width()!=d._oldWidth||d.host.height()!=d._oldHeight)d._performLayout();else c(d.orientation=="vertical"?d.host.height():d.host.width());
d._oldWidth=d.host.width();d._oldHeight=d.host.height()},100)}this.windowWidth=a(window).width();this.windowHeight=a(window).height();var b=function(){if(d.host.css("display")!="block")return true;var f=false;a.each(d.host.parents(),function(){if(a(this).css("display")!="block"){f=true;return false}});return f};if(b())this._displayTimer=setInterval(function(){if(!b()){clearInterval(d._displayTimer);d.updateLayout()}},100)},_setSplitterSize:function(){var g=0,c,f,b=0,d=0,h=true;if(this.width==="auto"||
!isNaN(parseInt(this.width,10)))this.host.css("width",this.width);if(this.height==="auto"||!isNaN(parseInt(this.height,10)))this.host.css("height",this.height);for(var e=0;e<this.panels.length;e+=1){b=parseInt(this.panels[e].min,10);if(!this.panels[e].max)h=false;else d+=parseInt(this.panels[e].max,10);if(!isNaN(b))g+=b}this.host.css("min-"+this._getDimention("size"),g);if(h)if(d<9999)this.host.css("max-"+this._getDimention("size"),d)},_getDimention:function(b){return this._dimentions[this.orientation][b]},
_validateProperties:function(){try{this._validatePanels();this._validateStructure();this._validateOptions()}catch(b){alert(b)}},_validatePanels:function(){var e=["max","min","size","collapsed","collapsible","resizable"],b;for(var c=0;c<e.length;c+=1)for(var d=0;d<this.panels.length;d+=1)if(typeof this.panels[d][e[c]]!=="undefined")this._validatePanel(e[c],this.panels[d])},_validatePanel:function(d,b){var c;if(d!=="collapsed"&&d!=="collapsible"&&d!=="resizable"){c=b[d];b[d]=parseInt(b[d],10);if(isNaN(b[d]))throw new Error(this._exceptions.invalidArgument+
d+" for panel "+(i+1)+".");else if(typeof c==="string"&&c.indexOf("%")>=0){b["_"+d]=c;b[d]=this.host[this._getDimention("size")]()*b[d]/100}}else b[d]=this._parseBoolean(b[d])},_parseBoolean:function(b){return/^true$/i.test(b)},_validateStructure:function(){if(this.host.children("div").length<2)throw new Error(this._exceptions.invalidStructure);},_validateOptions:function(){if(this.orientation!=="vertical"&&this.orientation!=="horizontal")throw new Error(this._exceptions.invalidOrientation);if(parseInt(this.splitBarSize,
10)<0||isNaN(parseInt(this.splitBarSize,10)))throw new Error(this._exceptions.invalidSplitBarSize);if(parseInt(this.touchSplitBarSize,10)<0||isNaN(parseInt(this.touchSplitBarSize,10)))throw new Error(this._exceptions.invalidSplitBarSize);},_refresh:function(b){this._render();this._startupLayout(b);this._removeEventHandlers();this._addEventHandlers()},updateLayout:function(){this._setSplitterSize();this._addPanelProperties();this._refresh(true);this._splittersLayout();this._performLayout()},refresh:function(){this.updateLayout()},
_startupLayout:function(b){var c=false;if(b)if(this.cookies){var d=a.jqx.cookie.cookie("jqxSplitter"+this.element.id);if(d!==null){this.importLayout(d);c=true}}if(!c)this._refreshWidgetLayout()},_render:function(){this.host.addClass(this.toThemeProperty("jqx-splitter"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));if(this.roundedcorners)this.host.addClass(this.toThemeProperty("jqx-rc-all"));var d=this.host.children("div"),c;
if(this._panelWrapper)d=this._panelWrapper.children(".jqx-splitter-panel");if(this._splitPanels.length<1){for(var e=0;e<d.length;e+=1){c=a(d[e]);c.options={max:9007199254740992,min:0,collapsible:true,resizable:true,collapsed:false,size:c[this._getDimention("size")]()};this._splitPanels.push(c)}this._createSplitBars();this._addCollapseButtons();this._addPanelProperties();var g,f,b;for(var e=0;e<this._splitPanels.length;e+=1)if(e+1<this._splitPanels.length){g=this._splitPanels[e];f=this._splitPanels[e+
1];var b=this._splitBars[e];if(!g.options.resizable||!f.options.resizable)b.splitBar.css("cursor","default")}}this._wrapperHandler()},_createSplitBars:function(){var e,d,b;for(var c=0;c<this._splitPanels.length;c+=1)if(c+1<this._splitPanels.length){e=this._splitPanels[c];d=this._splitPanels[c+1];b={previous:e,next:d};b.splitBar=this._addSplitBar(e,d);this._splitBars.push(b)}},_addSplitBar:function(d,c){var b=a("<div/>");b.insertAfter(d);if(this.orientation==="horizontal")b.width(d.width());else b.height(d.height());
return b},_addCollapseButtons:function(){var d=this._splitBars.length;for(var c=0;c<d;c+=1){var b=a("<div/>");this._splitBars[c].splitBar.append(b);if(c!==0&&c!==d-1)b.css("visibility","hidden")}},_refreshWidgetLayout:function(){this._setSplitterSize();this._removeClasses();this._addClasses();this._validateSize();if(this._defaultLayout==true)this._applyOptions();this._performLayout()},_addClasses:function(){var d,b;for(var c=0;c<this._splitPanels.length;c+=1){this._splitPanels[c].addClass(this.toThemeProperty("jqx-splitter-panel"));
this._splitPanels[c].addClass(this.toThemeProperty("jqx-widget-content"));if(c<this._splitBars.length){b=this._splitBars[c].splitBar;d=b.children(0);b.addClass(this.toThemeProperty("jqx-splitter-splitbar-"+this.orientation));b.addClass(this.toThemeProperty("jqx-fill-state-normal"));b.removeClass(this.toThemeProperty("jqx-splitter-splitbar-"+this._getDimention("opposite")));d.addClass(this.toThemeProperty("jqx-splitter-collapse-button-"+this.orientation));d.addClass(this.toThemeProperty("jqx-fill-state-pressed"));
d.removeClass(this.toThemeProperty("jqx-splitter-collapse-button-"+this._getDimention("opposite")));if(a.browser.msie&&a.browser.version<=7){this._splitBars[c].previous.css("position","relative");this._splitBars[c].next.css("position","relative")}}}},_removeClasses:function(e){var b=this.theme;this.theme=e;for(var d=0;d<this._splitPanels.length;d+=1){this._splitPanels[d].removeClass(this.toThemeProperty("jqx-splitter-panel"));this._splitPanels[d].removeClass(this.toThemeProperty("jqx-widget-content"));
if(d<this._splitBars.length){var c=this._splitBars[d].splitBar.children(0);this._splitBars[d].splitBar.removeClass(this.toThemeProperty("jqx-splitter-splitbar-"+this.orientation));this._splitBars[d].splitBar.removeClass(this.toThemeProperty("jqx-fill-state-normal"));c.removeClass(this.toThemeProperty("jqx-splitter-collapse-button-"+this.orientation));c.removeClass(this.toThemeProperty("jqx-fill-state-pressed"))}}this.theme=b},_addPanelProperties:function(){var e=["max","min","size","collapsed","collapsible",
"resizable"],c=this.panels instanceof Array?this.panels:[];for(var d=0;d<this._splitPanels.length;d+=1)for(var b=0;b<e.length;b+=1)if(typeof c[d]!=="undefined"&&typeof c[d][e[b]]!=="undefined")this._splitPanels[d].options[e[b]]=c[d][e[b]];else if(e[b]==="size")if(this._splitPanels[d][0].style[this._getDimention("size")]!=="auto"&&this._splitPanels[d][0].style[this._getDimention("size")]!=="")this._splitPanels[d].options.size=this._splitPanels[d][this._getDimention("size")]();else if(this.orientation==
"horizontal")this._splitPanels[d].options.size=Math.floor(this.host.height()/this._splitPanels.length);else this._splitPanels[d].options.size=Math.floor(this.host.width()/this._splitPanels.length)},_addPanelSizeProperties:function(){panels=this.panels instanceof Array?this.panels:[];for(var c=0;c<this._splitPanels.length;c+=1){var b=this._splitPanels[c][0].style[this._getDimention("size")];if(b!=="auto"&&b!==""){if(panels[c]!=undefined)this._splitPanels[c].options.size=panels[c].size}else if(this.orientation==
"horizontal")this._splitPanels[c].options.size=Math.floor(this.host.height()/this._splitPanels.length);else this._splitPanels[c].options.size=Math.floor(this.host.width()/this._splitPanels.length)}},_wrapperHandler:function(){if(this._panelWrapper===null){this._panelWrapper=a('<div class="jqx-splitter-panel-wrapper" style="height: 100%;"></div>');this.host.wrapInner(this._panelWrapper);this._panelWrapper=this.host.children()}},_performLayout:function(){var b=this._splitBars.length;while(b){b-=1;this._performSplitterLayout(this._splitBars[b])}this._refreshLayout()},
_performSplitterLayout:function(b){if(this.orientation==="horizontal"){b.previous.css("float","none");b.splitBar.css("float","none");b.next.css("float","none");b.splitBar.css("width","100%");b.next.css("width","100%");b.previous.css("width","100%")}else{b.previous.css("float","left");b.splitBar.css("float","left");b.next.css("float","left");b.next.css("height","100%");b.previous.css("height","100%")}},_refreshLayout:function(){this._panelWrapper.css("width","100%");this._panelWrapper.css("height",
"100%");this._performSplitBarsLayout();this._performPanelLayout()},_performSplitBarsLayout:function(){var d=this.host.height(),e=this.host.width(),c=this._isTouchDevice?this.touchSplitBarSize:this.splitBarSize;for(var b=0;b<this._splitBars.length;b+=1){if(this.orientation==="vertical"){this._splitBars[b].splitBar.height(d);this._splitBars[b].splitBar.width(c)}else{this._splitBars[b].splitBar.width(e);this._splitBars[b].splitBar.height(c)}this._centerChild(this._splitBars[b].splitBar.children(0))}},
_centerChild:function(c){var b=this._isTouchDevice?this.touchSplitBarSize:this.splitBarSize;if(b!=5)if(this.orientation==="vertical"){c.width(b);c.height(45)}else{c.height(b);c.width(45)}var d=(a(c.parent()).height()-c.outerHeight())/2,e=(a(c.parent()).width()-c.outerWidth())/2;c.css("position","relative");if(this.orientation==="vertical"){c.css("top","50%");c.css("left","0");c.css("margin-top","-23px");c.css("margin-left","-0px")}else{c.css("left","50%");c.css("top","0");c.css("margin-left","-23px");
c.css("margin-top","-0px")}return c},_performPanelLayout:function(){var e=this._splitPanels.length,d=0,c=(e-1)*this._splitBars[0].splitBar[this._getDimention("outerSize")](true),b=this.host[this._getDimention("size")](),f;while(d<e){f=this._splitPanels[d];d++;if(!f.options.collapsed)c+=this._handlerPanelSize(f,c,b)}if(c<b)this._fillContainer(b,c,e-1)},_getBorderSize:function(c){if(c==null)return 0;var b=this.orientation=="vertical"?parseInt(c.css("border-left-width")):parseInt(c.css("border-top-width"));
return b},_handlerPanelSize:function(h,c,b){this._setPanelSize(h,h.options.size);var f=h.options.size,d;if(c+f>=b&&!h.options.collapsed){d=b-c;var e=this._getBorderSize(h),g=c+d-b;if(!isNaN(e))d-=e;d=Math.min(d,h.options.max);d=Math.max(d,h.options.min);if(!h.options.collapsed){h[this._getDimention("size")](d);h.options.size=d}}return h[this._getDimention("outerSize")](true)},_fillContainer:function(b,d,e){if(typeof e==="undefined")e=0;var h=this._splitPanels[e],c=b-d,f=h[this._getDimention("size")](),
g=c+f;if(e<=this._splitPanels.length){if(h.options.collapsed)this._fillHelper(d,b);else{if(g>h.options.max)h.options.max=g;h[this._getDimention("size")](g);h.options.size=g}return}g=Math.min(g,h.options.max);if(!h.options.collapsed){h[this._getDimention("size")](g);h.options.size=g}else g=f=0;if(g+(d-f)<b||h.options.collapsed)this._fillContainer(b,d-f+g,e-1)},_fillHelper:function(d,b){var c,f=false;for(var e=0;e<this._splitPanels.length&&!f;e+=1){c=this._splitPanels[e];if(!c.options.collapsed)f=true}c[this._getDimention("size")](b-
d+c[this._getDimention("size")]())},_applyOptions:function(){for(var c=0;c<this._splitPanels.length;c+=1){var b=this._splitPanels[c].options;if(b.collapsed){b.collapsed=false;this.collapseAt(c,true)}if(!b.collapsible)if(c<this._splitPanels.length-1)this.hideCollapseButtonAt(c);else{if(this._splitPanels.length>2)this.hideCollapseButtonAt(c-1)}else if(b.collapsible)if(c<this._splitPanels.length-1)this.showCollapseButtonAt(c);else this.showCollapseButtonAt(c-1)}},_validateSize:function(){var b,d=this._getDimention("size");
for(var c=0;c<this._splitPanels.length;c+=1){b=this._splitPanels[c].options;if(b.max<b.size)b.size=b.max;else if(b.min>b.size)b.min=b.size;this._splitPanels[c][d](b.size)}},_getEvent:function(b){if(this._isTouchDevice)return this._touchEvents[b];else return b},_removeEventHandlers:function(){var c=this._splitBars.length;var b=this;this.removeHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"));this.removeHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"));
while(c){c-=1;this._removeSplitBarHandlers(this._splitBars[c]);this._removeCollapseButtonHandlers(a(this._splitBars[c].splitBar.children(0)),c)}},_removeSplitBarHandlers:function(b){this.removeHandler(b.splitBar,this._getEvent("mouseenter"));this.removeHandler(b.splitBar,this._getEvent("mouseleave"));this.removeHandler(b.splitBar,this._getEvent("mousedown"))},_removeCollapseButtonHandlers:function(b){this.removeHandler(b,this._getEvent("mouseenter"));this.removeHandler(b,this._getEvent("mouseleave"));
this.removeHandler(b,this._getEvent("mousedown"))},_addEventHandlers:function(){var d=this._splitBars.length,b=this;b.autoResize=true;this.addHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"),function(){b.autoResize=false;b._stopDrag(b);b.autoResize=true});this.addHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"),function(e){b._performDrag(b,e)});this.addHandler(a(window),"resize."+this.element.id,function(g){if(!b.windowWidth)b.windowWidth=a(window).width();
if(!b.windowHeight)b.windowHeight=a(window).height();var f=a(window).width();var h=a(window).height();if(b.autoResize)if(f!=b.windowWidth||h!=b.windowHeight)if(typeof b.width==="string"&&b.width.indexOf("%")>=0&&b.orientation=="vertical"||typeof b.height==="string"&&b.height.indexOf("%")>=0&&b.orientation=="horizontal"){for(var e=0;e<b.panels.length;e+=1)if(b.panels[e]["_size"]!=undefined){b.panels[e]["size"]=b.panels[e]["_size"];b._validatePanel("size",b.panels[e])}b._addPanelSizeProperties()}b.windowWidth=
a(window).width();b.windowHeight=a(window).height();b._refreshLayout()});while(d){d-=1;this._addSplitBarHandlers(this._splitBars[d]);this._addCollapseButtonHandlers(a(this._splitBars[d].splitBar.children(0)),d)}if(document.referrer!=""||window.frameElement)if(window.top!=null){if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var c=function(e){b._stopDrag(b)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",
c,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",c)}}},_addSplitBarHandlers:function(b){var c=this;this.addHandler(b.splitBar,this._getEvent("mousedown"),this._startDrag,{self:this});this.addHandler(b.splitBar,this._getEvent("mouseenter"),function(){a(this).addClass(c.toThemeProperty("jqx-splitter-splitbar-hover"));a(this).addClass(c.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(b.splitBar,this._getEvent("mouseleave"),function(){a(this).removeClass(c.toThemeProperty("jqx-splitter-splitbar-hover"));
a(this).removeClass(c.toThemeProperty("jqx-fill-state-hover"))})},_addCollapseButtonHandlers:function(d,c){var b=this;this.addHandler(d,this._getEvent("mouseenter"),function(){d.addClass(b.toThemeProperty("jqx-splitter-collapse-button-hover"));d.addClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(d,this._getEvent("mouseleave"),function(){d.removeClass(b.toThemeProperty("jqx-splitter-collapse-button-hover"));d.removeClass(b.toThemeProperty("jqx-fill-state-hover"))});this.addHandler(d,
this._getEvent("mousedown"),function(e){var f=b._splitBars.length;if(f==1)a.each(b._splitPanels,function(h){var g=b._splitPanels[h].options;if(g.collapsible){b._collapseButtonClickHandler(h);return false}});else if(c<f/2)b._collapseButtonClickHandler(c);else b._collapseButtonClickHandler(1+c);if(e.stopPropagation!=undefined)e.stopPropagation();if(e.preventDefault!=undefined)e.preventDefault();return false})},_collapseButtonClickHandler:function(b){if(this._splitPanels[b].options.collapsed)this.expandAt(b);
else this.collapseAt(b)},_initOverlay:function(c){var b=this;if(b.overlay||c=="undefined"){b.overlay.remove();b.overlay=null}else if(c==true){b.overlay=a("<div style='background: #999999;'></div>");b.overlay.css("opacity",0.01);b.overlay.width(b.host.width());b.overlay.height(b.host.height());b.overlay.css("position","absolute");b.overlay.appendTo(a(document.body));var d=b.host.offset();b.overlay.css("left",d.left);b.overlay.css("top",d.top)}},_startDrag:function(f){var b=f.data.self;var g=b._indexOf(a(f.target));
b._resizeArea=b._splitBars[g];if(b._resizeArea!=null){b._initOverlay(true);if((typeof b._resizeArea.previous.options.resizable==="undefined"||b._resizeArea.previous.options.resizable)&&(typeof b._resizeArea.next.options.resizable==="undefined"||b._resizeArea.next.options.resizable)){var e=b._resizeArea.previous,c=b._resizeArea.next;if(!e.options.collapsed&&!c.options.collapsed&&!(c.options.max<=c[b._getDimention("outerSize")]()&&e.options.max<=e[b._getDimention("outerSize")]())){b._capturedElement=
b._makeClone(f.target);b._startX=b._capturedElement.offset().left;b._startY=b._capturedElement.offset().top;b._mouseStartX=b._isTouchDevice?f.originalEvent.touches[0].pageX:f.pageX;b._mouseStartY=b._isTouchDevice?f.originalEvent.touches[0].pageY:f.pageY;var d=b._getPanelOptions();b._raiseEvent(3,{firstPanel:{index:g,size:e.options.size},secondPanel:{index:g+1,size:c.options.size},panels:d})}}return false}},_makeClone:function(b){var c=a(b).clone();c.css({position:"absolute",top:a(b).offset().top,
left:a(b).offset().left});c.fadeTo(0,0.7);c.css("z-index",9999);a(document.body).append(c);return c},_clickCollapse:function(c){var b=c.data.self;b.collapseAt(0)},_performDrag:function(c,e){var d=c._isTouchDevice?e.originalEvent.touches[0][c._getDimention("page")]:e[c._getDimention("page")];if(e.which===0&&a.browser.msie&&a.browser.version<9){c._stopDrag(c);return false}if(c._capturedElement!==null&&typeof c._capturedElement!=="undefined"){var b=d-c[c._getDimention("mouse")]+c[c._getDimention("start")];
c._moveSplitBar(b);return false}return true},_moveSplitBar:function(b){b=this._validatePosition(b);if(b.invalid)this._capturedElement.addClass(this.toThemeProperty("jqx-splitter-invalid"));else this._capturedElement.removeClass(this.toThemeProperty("jqx-splitter-invalid"));this._capturedElement.css(this._getDimention("dimention"),b.position)},_validatePosition:function(b){var f=this._resizeArea,h=this._getNextBoundary(f),e=this._getPreviousBoundary(f),d=Math.min(h,h-f.next.options.min,e+f.previous.options.max),
c=Math.max(e,e+f.previous.options.min,h-f.next.options.max),g;if(c>d){g=f.next.offset()[this._getDimention("dimention")]-this._capturedElement[this._getDimention("outerSize")](true);return{position:g,invalid:true}}if(b<c)return{position:c,invalid:true};if(b>d)return{position:d,invalid:true};return{position:b,invalid:false}},_getNextBoundary:function(b){var d=b.next.offset()[this._getDimention("dimention")]+b.next[this._getDimention("size")]()-this._capturedElement[this._getDimention("outerSize")](true),
c=this._nextPanel(b.next);if(c!==null&&c.options.collapsed)d-=c.options.min;return d},_getPreviousBoundary:function(b){var d=b.previous.offset()[this._getDimention("dimention")],c=this._previousPanel(b.previous);if(c!==null&&c.options.collapsed)d+=c.options.min;return d},_previousPanel:function(b){var c=this._indexOfSplitPanel(b);if(c===0)return null;else return this._splitPanels[c-1]},_nextPanel:function(b){var c=this._indexOfSplitPanel(b);if(c===this._splitPanels.length-1)return null;else return this._splitPanels[c+
1]},_indexOfSplitPanel:function(b){var c=this._splitPanels.length;while(c){c-=1;if(this._splitPanels[c][0]===b[0])return c}return-1},_stopDrag:function(b){if(b._capturedElement){b._performAreaResize();b._capturedElement.remove()}b._capturedElement=null;b._initOverlay()},_performAreaResize:function(){var k=this._resizeArea,f=this._capturedElement.offset()[this._getDimention("dimention")]-this[this._getDimention("start")],g=k.previous[this._getDimention("size")]()+f,b=k.next[this._getDimention("size")]()-
f,c=this._indexOf(k.splitBar),j=k.previous[this._getDimention("size")]();this._setPanelSize(k.previous,g);this._setPanelSize(k.next,b);this._splittersLayout();if(this.cookies)a.jqx.cookie.cookie("jqxSplitter"+this.element.id,this.exportLayout(),this.cookieOptions);if(j!==g){var h=this._getPanelOptions();this._raiseEvent(0,{firstPanel:{index:c,size:g},secondPanel:{index:c+1,size:b},panels:h})}var e=-1;for(var d=0;d<this._splitPanels.length;d++)if(this._splitPanels[d]==k.previous)e=d;if(e>=0)if(this.panels[e])if(this.panels[e]["_size"]){if(this.orientation==
"horizontal")var l=f/(this.host.height()-2)*100;else var l=f/(this.host.width()-2)*100;l=Math.round(l);this.panels[e]["_size"]=parseInt(this.panels[e]["_size"])+l+"%";if(this.panels[e+1])this.panels[e+1]["_size"]=parseInt(this.panels[e+1]["_size"])-l+"%";this.autoResize=true}},_splittersLayout:function(){var c=a.data(document.body,"jqx-splitters")||[];for(var b=0;b<c.length;b+=1)if(c[b][0]!==this.element)a(c[b]).jqxSplitter("_performLayout")},_raiseEvent:function(b,d){var c=new a.Event(this._events[b]);
c.owner=this;c.args=d;return this.host.trigger(c)},_setPanelSize:function(b,c){if(!b.options.collapsed){b.options.size=parseInt(c);b[this._getDimention("size")](c)}else b[this._getDimention("size")](0)},_indexOf:function(b){var c=this._splitBars.length;while(c){c-=1;if(this._splitBars[c].splitBar[0]===b[0])return c}return-1},_neighborPanel:function(b){var c;if(b===this._splitPanels.length-1)c=this._splitPanels[b-1];else c=this._splitPanels[b+1];return c},_animateResize:function(b,d,f,g){var e={},
c=this;e[this._getDimention("size")]=d;b.animate(e,{step:function(){c._splittersLayout.call(c)},duration:f,complete:function(){c._splittersLayout.call(c);if(g&&g instanceof Function)g()}})},_addDisabledClasses:function(){var c;for(var b=0;b<this._splitBars.length;b+=1){c=this._splitBars[b].splitBar;c.addClass(this.toThemeProperty("jqx-splitter-splitbar-disabled"));c.children(0).addClass(this.toThemeProperty("jqx-splitter-collapse-button-disabled"))}this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))},
_removeDisabledClasses:function(){var c;for(var b=0;b<this._splitBars.length;b+=1){c=this._splitBars[b].splitBar;c.removeClass(this.toThemeProperty("jqx-splitter-splitbar-disabled"));c.children(0).removeClass(this.toThemeProperty("jqx-splitter-collapse-button-disabled"))}this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_closestSplitBar:function(d,c){for(var b=0;b<this._splitBars.length;b+=1)if(this._splitBars[b].previous[0]===d[0]&&this._splitBars[b].next[0]===c[0]||typeof c===
"undefined"&&this._splitBars[b].previous[0]===d[0]||this._splitBars[b].next[0]===d[0]&&this._splitBars[b].previous[0]===c[0])return this._splitBars[b].splitBar;return null},propertyChangedHandler:function(b,c,e,d){if(c=="touchMode")if(d){b.splitBarSize=b.touchSplitBarSize;b._performLayout()}if(c==="disabled")if(d)this.disable();else this.enable();else if(c==="theme")a.jqx.utilities.setTheme(e,d,this.host);else if(c==="panels"){this._validatePanels();this._addPanelProperties();this._refreshWidgetLayout()}else this._refreshWidgetLayout()},
exportLayout:function(){var b='{ "panels": [';for(var c=0;c<this._splitPanels.length;c+=1){b+="{";for(var d in this._splitPanels[c].options){b+='"'+d+'":';b+='"'+this._splitPanels[c].options[d]+'",'}b=b.substring(0,b.length-1)+" },"}b=b.substring(0,b.length-1)+'],                 "orientation": "'+this.orientation+'" }';return b},importLayout:function(b){try{var c=a.parseJSON(b);this.panels=c.panels;this.orientation=c.orientation;this._validatePanels();this._setSplitterSize();this._addPanelProperties();
this._refresh(false);this._splittersLayout();this._performLayout()}catch(d){alert(d)}},expandAt:function(e){if(e<=this._splitPanels.length&&e>=0&&this._splitPanels[e].options.collapsed){var h=this._neighborPanel(e),c=this._splitPanels[e],k=this,g=this.enableCollapseAnimation?this.animationDuration:0,f;c.options.collapsed=false;c.options.size=Math.min(c.options.size,h[this._getDimention("size")]());h.options.size=h[this._getDimention("size")]()-c.options.size;f=this._closestSplitBar(c,h);f.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"));
this._animateResize(h,h.options.size,g);this._animateResize(c,c.options.size,g,function(){var l=k._getPanelOptions();k._raiseEvent(0,{firstPanel:{index:e,size:c.options.size},secondPanel:{index:e+1,size:h.options.size}});k._raiseEvent(1,{index:e,expandedPanel:l[e],panels:l})});if(this.panels[e])if(this.panels[e]["_size"]){var b=e===this._splitPanels.length-1?e-1:e+1;var d=this.panels[b];if(d&&d._size){var j=this.orientation=="vertical"?parseInt(c.options.size)/this.host.width()*100:parseInt(c.options.size)/
this.host.height()*100;j=parseInt(j);d._size=parseInt(d._size)-j+"%";this.panels[e]["_size"]=j+"%";this.autoResize=true}}if(this.cookies)a.jqx.cookie.cookie("jqxSplitter"+this.element.id,this.exportLayout(),this.cookieOptions)}},_getPanelOptions:function(){var b=new Array;a.each(this._splitPanels,function(){b[b.length]=this.options});return b},collapseAt:function(f,j){var l=this._splitPanels[f].options;if(f<this._splitPanels.length&&f>=0&&!l.collapsed&&l.collapsible){var d=this._splitPanels[f],c=
d[this._getDimention("size")](),h=this.enableCollapseAnimation?this.animationDuration:0,k=this._neighborPanel(f),n=this,g;d.options.size=c?c:d.options.size;d.options.collapsed=true;g=this._closestSplitBar(d,k);g.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"));k.options.size=k[this._getDimention("size")]()+c;this._animateResize(k,k.options.size,h);this._animateResize(d,0,h,function(){if(j==undefined){var o=n._getPanelOptions();n._raiseEvent(0,{firstPanel:{index:f,size:0},secondPanel:{index:f+
1,size:k.options.size}});n._raiseEvent(2,{index:f,collapsedPanel:o[f],panels:o})}});if(this.panels[f])if(this.panels[f]["_size"]){var b=f===this._splitPanels.length-1?f-1:f+1;var e=this.panels[b];if(e&&e._size){var m=parseInt(this.panels[f]["_size"]);e._size=parseInt(e._size)+m+"%";this.panels[f]["_size"]="0%"}this.autoResize=true}if(this.cookies)a.jqx.cookie.cookie("jqxSplitter"+this.element.id,this.exportLayout(),this.cookieOptions)}},disable:function(){this._removeEventHandlers();this.disabled=
true;this._addDisabledClasses()},enable:function(){this._addEventHandlers();this.disabled=false;this._removeDisabledClasses()},showCollapseButtonAt:function(b){if(b>=0&&b<this._splitBars.length)this._splitBars[b].splitBar.children(0).css("visibility","inherit")},hideCollapseButtonAt:function(b){if(b>=0&&b<this._splitBars.length)this._splitBars[b].splitBar.children(0).css("visibility","hidden")}})})(jQuery);
(function(a){a.jqx.jqxWidget("jqxTabs","",{});a.extend(a.jqx._jqxTabs.prototype,{defineInstance:function(){this.scrollAnimationDuration=200;this.enabledHover=true;this.disabled=false;this.collapsible=false;this.animationType="none";this.enableScrollAnimation=true;this.contentTransitionDuration=450;this.toggleMode="click";this.selectedItem=0;this.height="auto";this.width="auto";this.position="top";this.selectionTracker=false;this.scrollable=true;this.scrollPosition="right";this.scrollStep=70;this.autoHeight=
true;this.headerHeight=null;this.showCloseButtons=false;this.canCloseAllTabs=true;this.dropAnimationDuration=250;this.closeButtonSize=16;this.arrowButtonSize=16;this.keyboardNavigation=true;this.reorder=false;this.enableDropAnimation=false;this.selectionTrackerAnimationDuration=300;this._isTouchDevice=false;this.roundedCorners=true;this._headerExpandingBalance=0;this._dragStarted=false;this._tabCaptured=false;this._lastUnorderedListPosition=0;this._selectedItem=0;this._titleList=[];this._contentList=
[];this._contentWrapper=null;this._unorderedList=null;this._scrollTimeout=null;this.isCollapsed=false;this._currentEvent=null;this._needScroll=true;this._isAnimated={};this._events=["created","selected","add","removed","enabled","disabled","selecting","unselecting","unselected","dragStart","dragEnd","locked","unlocked","collapsed","expanded","tabclick"];this._initTabContentList=[];this._invalidArgumentExceptions={invalidScrollAnimationDuration:"The scroll animation duration is not valid!",invalidWidth:"Width you've entered is invalid!",
invalidHeight:"Height you've entered is invalid!",invalidAnimationType:"You've entered invalid animation type!",invalidcontentTransitionDuration:"You've entered invalid value for contentTransitionDuration!",invalidToggleMode:"You've entered invalid value for toggleMode!",invalidPosition:"You've entered invalid position!",invalidScrollPosition:"You've entered invalid scroll position!",invalidScrollStep:"You've entered invalid scroll step!",invalidStructure:"Invalid structure!",invalidArrowSize:"Invalid scroll button size!",
invalidCloseSize:"Invalid close button size!",invalidDropAnimationDuration:"Invalid dropAnimationDuration!"}},createInstance:function(){this.host.addClass(this.toThemeProperty("jqx-tabs"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this._unorderedList=this.host.children("ul");this._titleList=this.host.children("ul").children("li");this._contentList=this.host.children("div");this._selectedItem=this.selectedItem;this._isTouchDevice=
a.jqx.mobile.isTouchDevice();this._needScroll=this.scrollable;if(this.selectionTracker)this.selectionTracker=this._seletionTrackerBrowserCheck();if(this._isTouchDevice){this.reorder=false;this.keyboardNavigation=false}var d=this.length();while(d){d--;this._titleList[d]=a(this._titleList[d]);this._contentList[d]=a(this._contentList[d])}this._validateProperties();this._refresh();this._moveSelectionTrack(this._selectedItem,0);if(this.disabled)this.disable();this.element.tabIndex=0;this._raiseEvent(0);
var b=false;var c=this;if(c.width!=null&&c.width.toString().indexOf("%")!=-1)b=true;if(c.height!=null&&c.height.toString().indexOf("%")!=-1)b=true;c._enableWindowResize();if(c._hiddenParent())c._intervalTimer=setInterval(function(){if(!c._hiddenParent()){c._refresh();clearInterval(c._intervalTimer)}},100)},_hiddenParent:function(){var c=this;if(c.host.css("display")!="block")return true;var b=false;a.each(c.host.parents(),function(){if(a(this).css("display")!="block"){b=true;return false}});return b},
_enableWindowResize:function(c){if(c==false){a(window).unbind("resize.tabs"+this.element.id);return}var b=false;var d=this;if(d.width!=null&&d.width.toString().indexOf("%")!=-1)b=true;if(d.height!=null&&d.height.toString().indexOf("%")!=-1)b=true;a(window).bind("resize.tabs"+this.element.id,function(){if(b){var f=d.host.width();var e=d.host.height();if(d._lastWidth!=f||d._lastHeight!=e){if(d.refreshTimer)clearTimeout(d.refreshTimer);d.refreshTimer=setTimeout(function(){d.refresh()},10)}d._lastWidth=
f;d._lastHeight=e}})},refresh:function(b){if(true!=b||b==undefined)this._performResize()},_seletionTrackerBrowserCheck:function(){var b="Browser CodeName: "+navigator.appCodeName+"";b+="Browser Name: "+navigator.appName+"";b+="Browser Version: "+navigator.appVersion+"";b+="Platform: "+navigator.platform+"";b+="User-agent header: "+navigator.userAgent+"";if(b.indexOf("IEMobile")!=-1)return false;if(b.indexOf("Windows Phone OS")!=-1)return false;if(a.browser.msie&&a.browser.version<=7)return false;
return true},_uiRefresh:function(b){this._unorderedListLeftBackup=this._unorderedList.css("left");if(b)this._render();this._addStyles();this._performLayout();this._prepareTabs();this._removeEventHandlers();this._addEventHandlers();if(this._unorderedListLeftBackup==="auto")this._unorderedListLeftBackup=this._getArrowsDisplacement();this._unorderedList.css("left",this._unorderedListLeftBackup)},_refresh:function(){this._uiRefresh(true)},_addStyles:function(){this._unorderedList.addClass(this.toThemeProperty("jqx-tabs-title-container"));
this._unorderedList.css({outline:"none","white-space":"nowrap","margin-top":"0px","margin-bottom":"0px",padding:"0px",background:"transparent",border:"none","border-style":"none","text-indent":"0px"});var b=this.length();while(b){b--;this._titleList[b].removeClass();this._titleList[b].css("padding","");this._titleList[b].addClass("jqx-reset");this._titleList[b].addClass("jqx-disableselect");this._titleList[b].addClass(this.toThemeProperty("jqx-tabs-title"));this._titleList[b].addClass(this.toThemeProperty("jqx-item"));
if(this.position=="bottom")this._titleList[b].addClass(this.toThemeProperty("jqx-tabs-title-bottom"));if(this._titleList[b].disabled){this._titleList[b].addClass(this.toThemeProperty("jqx-tabs-title-disable"));this._titleList[b].addClass(this.toThemeProperty("jqx-fill-state-disabled"))}this._titleList[b].removeClass(this.toThemeProperty("jqx-rc-b"));this._titleList[b].removeClass(this.toThemeProperty("jqx-rc-t"));this._contentList[b].removeClass(this.toThemeProperty("jqx-rc-b"));this._contentList[b].removeClass(this.toThemeProperty("jqx-rc-t"));
switch(this.position){case "top":this._titleList[b].addClass(this.toThemeProperty("jqx-rc-t"));this._contentList[b].addClass(this.toThemeProperty("jqx-rc-b"));break;case "bottom":this._titleList[b].addClass(this.toThemeProperty("jqx-rc-b"));this._contentList[b].addClass(this.toThemeProperty("jqx-rc-t"));break}}if(this.selectionTracker){this._selectionTracker.removeClass(this.toThemeProperty("jqx-rc-b"));this._selectionTracker.removeClass(this.toThemeProperty("jqx-rc-t"));switch(this.position){case "top":this._selectionTracker.addClass(this.toThemeProperty("jqx-rc-t"));
break;case "bottom":this._selectionTracker.addClass(this.toThemeProperty("jqx-rc-b"));break}}},_raiseEvent:function(d,g){var f=new a.Event(this._events[d]);f.owner=this;f.args=g;if(d===6||d===7){f.cancel=false;this._currentEvent=f}var b="";try{b=this.host.trigger(f);if(d==1){var e=this;if(this.selectionTracker||this.animationType!="none")setTimeout(function(){if(!e._initTabContentList[e.selectedItem])if(e.initTabContent){e.initTabContent(e.selectedItem);e._initTabContentList[e.selectedItem]=true}var h=
new a.Event("loadContent");h.owner=this;if(e._contentList.length>0&&e._contentList[e.selectedItem])e._contentList[e.selectedItem].find("div").trigger(h)},50+e.selectionTrackerAnimationDuration);else{var f=new a.Event("loadContent");if(!e._initTabContentList[e.selectedItem])if(e.initTabContent){e.initTabContent(e.selectedItem);e._initTabContentList[e.selectedItem]=true}f.owner=this;if(this._contentList.length>0&&this._contentList[this.selectedItem])this._contentList[this.selectedItem].find("div").trigger(f)}}}catch(c){}return b},
_getArrowsDisplacement:function(){if(!this._needScroll)return 0;var d;var c=this.arrowButtonSize;var b=this.arrowButtonSize;if(this.scrollPosition==="left")d=c+b;else if(this.scrollPosition==="both")d=c;else d=0;return d},_scrollRight:function(e,h){this._unorderedList.stop();this._unlockAnimation("unorderedList");var f=parseInt(this._unorderedList.width()+parseInt(this._unorderedList.css("margin-left")),10),j=parseInt(this.host.width(),10),g,k,b=parseInt(this._unorderedList.css("left"),10),c=this._getArrowsDisplacement(),
d=0,l=undefined;if(this.scrollable){g=parseInt(this._leftArrow.outerWidth(),10);k=parseInt(this._rightArrow.outerWidth(),10)}else{g=0;k=0}e=this.enableScrollAnimation?e:0;if(parseInt(this._headerWrapper.width(),10)>parseInt(this._unorderedList.css("margin-left"))+parseInt(this._unorderedList.width(),10))d=c;else if(Math.abs(b)+this.scrollStep<Math.abs(j-f)+g+k+c){d=b-this.scrollStep;l=b-this.scrollStep+parseInt(this._titleList[this._selectedItem].position().left)}else{d=j-f-(2*this.arrowButtonSize-
c);if(d<parseInt(this._unorderedList.css("left"),10)-4&&d>parseInt(this._unorderedList.css("left"),10)+4)l=j-f-g-k+parseInt(this._titleList[this._selectedItem].position().left)}this._performScrollAnimation(d,l,e)},_scrollLeft:function(f,g){this._unorderedList.stop();this._unlockAnimation("unorderedList");var b=parseInt(this._unorderedList.css("left")),c=this._getArrowsDisplacement(),e=0,d=undefined;f=this.enableScrollAnimation?f:0;if(parseInt(this._headerWrapper.width())>=parseInt(this._unorderedList.width()))e=
c;else if(b+this.scrollStep<c){e=b+this.scrollStep;d=b+this.scrollStep+parseInt(this._titleList[this._selectedItem].position().left)}else{e=c;if(e<parseInt(this._unorderedList.css("left"))-4&&e>parseInt(this._unorderedList.css("left"))+4)d=parseInt(this._titleList[this._selectedItem].position().left)}this._performScrollAnimation(e,d,f)},_performScrollAnimation:function(e,d,c){var b=this;if(d!==undefined)this._moveSelectionTrack(this._selectedItem,0,d);this._lockAnimation("unorderedList");this._unorderedList.animate({left:e},
c,function(){b._moveSelectionTrack(b.selectedItem,0);b._unlockAnimation("unorderedList")})},_addKeyboardHandlers:function(){var b=this;if(this.keyboardNavigation)this.addHandler(this.host,"keydown",function(d){if(!b._activeAnimation()){var e=b._selectedItem;var c=b.selectionTracker;switch(d.keyCode){case 37:b.previous();return true;case 39:b.next();return true;case 36:b.first();return true;case 35:b.last();return true;case 27:if(b._tabCaptured){b._cancelClick=true;b._uncapture(null,b.selectedItem);
b._tabCaptured=false}break}b.selectionTracker=c}return true})},_addScrollHandlers:function(){var b=this;this.addHandler(this._leftArrow,"mousedown",function(){b._startScrollRepeat(true,b.scrollAnimationDuration)});this.addHandler(this._rightArrow,"mousedown",function(){b._startScrollRepeat(false,b.scrollAnimationDuration)});this.addHandler(this._rightArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)});this.addHandler(this._leftArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)});
this.addHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler,this);this.addHandler(a(document),"mouseleave.tab"+this.element.id,this._mouseLeaveScrollDocumentHandler,this)},_mouseLeaveScrollDocumentHandler:function(c){var b=c.data;clearTimeout(b._scrollTimeout)},_mouseUpScrollDocumentHandler:function(c){var b=c.data;clearTimeout(b._scrollTimeout)},_mouseUpDragDocumentHandler:function(c){var b=c.data;if(b._tabCaptured&&b._dragStarted)b._uncapture(c);b._tabCaptured=false},
_addReorderHandlers:function(){var b=this;this.addHandler(a(document),"mousemove.tab"+this.element.id,this._moveElement,this);this.addHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler,this)},_addEventHandlers:function(){var d=this.length();while(d){d--;this._addEventListenerAt(d)}if(this.keyboardNavigation)this._addKeyboardHandlers();if(this.scrollable)this._addScrollHandlers();if(this.reorder&&!this._isTouchDevice)this._addReorderHandlers();var c=this;if(document.referrer!=
""||window.frameElement)if(window.top!=null){var b=function(e){if(c._tabCaptured){c._cancelClick=true;c._uncapture(null,c.selectedItem);c._tabCaptured=false}};if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1)if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",b,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",b)}},_getFocusedItem:function(f,e){var j=
this.length();while(j){j--;var h=this._titleList[j],g=parseInt(h.outerWidth(true)),d=parseInt(h.offset().left),c=parseInt(this._unorderedList.offset().left),k=parseInt(this.host.offset().left),b=d;if(b<=f&&b+g>=f&&h!==this._capturedElement&&!this._titleList[j].locked&&this._titleList[j].disabled!==true)return j}return-1},_simulateDropAnimation:function(p,f){var s=this;var r=function(){s._headerWrapper.css("visibility","visible");c.remove()};var o=this._headerWrapper.position().top;var h=this._headerWrapper.position().left;
var c=this._headerWrapper.clone();var d=c.children(0);var n=c.find(this.toThemeProperty(".jqx-tabs-selection-tracker-top",true));this._headerWrapper.css("visibility","hidden");n.css("display","none");c.appendTo(this.host);c.css({position:"absolute",left:h,top:this.position==="top"?o:o,height:c.height(),width:c.width()});var m=this.length();var b=0;var q=a(d.children()[p]);var k=a(d.children()[f]);for(var j=0;j<m;j++){var e=a(d.children()[j]);e.width(e.width());var g=this.isVisibleAt(j);if(!g&&j!=
p)e.css("visibility","hidden");if(j!==0)b+=parseInt(a(d.children()[j-1]).outerWidth(true));if(j!==p)e.css({position:"absolute",left:b,top:0});else e.css({position:"absolute",left:this._capturedElement.position().left,top:0});e.css("z-index",0)}var l=function(){s._selectedItem=-1;s.select(f);s._selectedItem=f};if(p>f){b=parseInt(k.css("left"));this._lockAnimation("simulation");q.animate({left:b},this.dropAnimationDuration,function(){r();s._unlockAnimation("simulation");l()});for(var j=f;j<p;j++){var e=
a(d.children()[j]);if(j===f)b+=q.outerWidth(true);else b+=a(d.children()[j-1]).outerWidth(true);this._lockAnimation("simulation");e.animate({left:b},this.dropAnimationDuration,function(){s._unlockAnimation("simulation");l()})}}else if(p<f){this._lockAnimation("simulation");q.animate({left:parseInt(k.css("left"))+parseInt(k.outerWidth(true))-parseInt(q.outerWidth(true))},this.dropAnimationDuration,function(){r();s._unlockAnimation("simulation");l()});for(var j=p+1;j<=f;j++){this._lockAnimation("simulation");
a(d.children()[j]).animate({left:parseInt(a(d.children()[j]).css("left"))-parseInt(q.outerWidth(true))},this.dropAnimationDuration,function(){s._unlockAnimation("simulation");l()})}}},_uncapture:function(e){var d=this.selectionTracker;this._unorderedListLeftBackup=this._unorderedList.css("left");this._dragStarted=false;this._tabCaptured=false;var b=this._indexOf(this._capturedElement);if(!this._capturedElement)return;switch(this.position){case "top":this._capturedElement.css("bottom",0);break;case "bottom":this._capturedElement.css("top",
0);break}if(e)var c=this._getFocusedItem(e.clientX,e.clientY);if(c===-1||!e)this._capturedElement.css("left",0);else{if(this.enableDropAnimation)this._simulateDropAnimation(b,c);this._raiseEvent(10,{item:b,dropIndex:c});this._reorderItems(c,b)}a.each(this._titleList,function(){this.css("position","static")});this._reorderHeaderElements();this._unorderedList.css({position:"relative",top:"0px"});this._prepareTabs();if(c===-1||!e){this._selectedItem=b;this._moveSelectionTrack(b,0);this._addSelectStyle(this._selectedItem,
true)}else{this._moveSelectionTrack(this._selectedItem,0);this._addSelectStyle(this._selectedItem,true)}if(document.selection)document.selection.clear();this._unorderedList.css("left",this._unorderedListLeftBackup);this.selectionTracker=d},_reorderItems:function(c,b){var d=this._titleList[this.selectedItem];var e=this._contentList[b];if(typeof this._capturedElement==="undefined")this._capturedElement=this._titleList[b];this._titleList[b].remove();if(b<c)this._titleList[b].insertAfter(this._titleList[c]);
else this._titleList[b].insertBefore(this._titleList[c]);this._reorderElementArrays(c,b);this._getSelectedItem(d);this._removeEventHandlers();this._addEventHandlers()},_reorderElementArrays:function(d,b){var e=this._titleList[this.selectedItem];var f=this._contentList[b];if(b<d){for(var c=b;c<=d;c++){this._titleList[c]=this._titleList[c+1];this._contentList[c]=this._contentList[c+1]}this._contentList[d]=f;this._titleList[d]=this._capturedElement}else{for(var c=b;c>=d;c--){this._titleList[c]=this._titleList[c-
1];this._contentList[c]=this._contentList[c-1]}this._contentList[d]=f;this._titleList[d]=this._capturedElement}},_getSelectedItem:function(c){var b=this.length();while(b){b--;if(this._titleList[b]===c){this._selectedItem=this.selectedItem=b;break}}},_moveElement:function(c,b){var b=c.data;if(b._tabCaptured){if(document.selection)document.selection.clear();if(!b._dragStarted){unorderedListLeft=-parseInt(b._unorderedList.css("left"),10);if(c.clientX+unorderedListLeft>b._startX+3||c.clientX+unorderedListLeft<
b._startX-3){b._prepareTabForDragging();b._dragStarted=true}}else{b._performDrag(c);clearTimeout(b._scrollTimeout);b._dragScroll(c)}}},_performDrag:function(c){var b=this.getZoomFactor();unorderedListLeft=-parseInt(this._unorderedList.css("left"),10);this._capturedElement.css("left",unorderedListLeft+c.clientX/b-this._startX/b);this._lastX=c.clientX/b;this._moveSelectionTrack(this.selectedItem,0)},getZoomFactor:function(){var c=1;if(document.body.getBoundingClientRect){var d=document.body.getBoundingClientRect();
var e=d.right-d.left;var b=document.body.offsetWidth;c=Math.round(e/b*100)/100}return c},_prepareTabForDragging:function(){this._capturedElement.css({position:"relative",left:"0px",top:"0px","z-index":"300"});this.selectedItem=this._indexOf(this._capturedElement);switch(this.position){case "top":this._capturedElement.css("bottom",parseInt(this._capturedElement.css("top")));break;case "bottom":this._capturedElement.css("top",parseInt(this._capturedElement.css("top")));break}this._raiseEvent(9,{item:this._indexOf(this._capturedElement)})},
_dragScroll:function(d){var c=parseInt(this._unorderedList.css("left"));var b=this;var e=parseInt(this._capturedElement.css("left"));if(d.clientX<=this._headerWrapper.offset().left){this._scrollLeft(this.scrollAnimationDuration);this._capturedElement.css("left",parseInt(this._capturedElement.css("left"))+this._lastUnorderedListPosition-c)}else if(d.clientX>this._headerWrapper.offset().left+parseInt(this._headerWrapper.width(),10)){this._scrollRight(this.scrollAnimationDuration);this._capturedElement.css("left",
parseInt(this._capturedElement.css("left"))+this._lastUnorderedListPosition-c)}else{this._unorderedList.stop();this._unlockAnimation("unorderedList");clearTimeout(this._scrollTimeout)}var b=this;this._scrollTimeout=setTimeout(function(){b._dragScroll(d)},this.scrollAnimationDuration);this._lastUnorderedListPosition=c},_captureElement:function(c,b){if(!this._tabCaptured&&!this._titleList[b].locked&&this._titleList[b].disabled!==true&&!this._activeAnimation()){unorderedListLeft=-parseInt(this._unorderedList.css("left"),
10);this._startX=unorderedListLeft+c.clientX;this._startY=c.clientY;this._lastX=c.clientX;this._lastY=c.clientY;this._tabCaptured=true;this._capturedElement=this._titleList[b]}},_titleInteractionTrigger:function(b){if(this._headerExpandingBalance>0)this._removeOppositeBorder();if(this._selectedItem!==b){this.select(this._titleList[b],"toggle");this._titleList[b].collapsed=false;if(!this.collapsible)if(this.height!=="auto")this._contentWrapper.css("visibility","visible");else this._contentWrapper.css("display",
"block")}else if(this.collapsible)if(this.isCollapsed)this.expand();else this.collapse()},collapse:function(){var c=this._selectedItem,b=this;this.isCollapsed=true;if(b.height!=="auto")b._contentWrapper.css("visibility","hidden");else b._contentWrapper.hide();b._raiseEvent(13,{item:c});if(this.position=="top"){b._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-collapsed"));b.host.addClass(this.toThemeProperty("jqx-tabs-collapsed"))}else{b._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-collapsed-bottom"));
b.host.addClass(this.toThemeProperty("jqx-tabs-collapsed-bottom"))}},expand:function(){var c=this._selectedItem,b=this;this.isCollapsed=false;this._select(c,b.contentTransitionDuration,null,false,true);if(b.height!=="auto")b._contentWrapper.css("visibility","visible");else b._contentWrapper.show();b._raiseEvent(14,{item:c});if(this.position=="top"){b._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-collapsed"));b.host.removeClass(this.toThemeProperty("jqx-tabs-collapsed"))}else{b._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-collapsed-bottom"));
b.host.removeClass(this.toThemeProperty("jqx-tabs-collapsed-bottom"))}},_addSelectHandler:function(c){var b=this;this.addHandler(this._titleList[c],"selectstart",function(d){return false});this.addHandler(this._titleList[c],this.toggleMode,function(d){return function(){b._raiseEvent("15",{item:d});if(!b._tabCaptured&&!b._cancelClick)b._titleInteractionTrigger(d);return true}}(c))},_addDragDropHandlers:function(c){var b=this;this.addHandler(this._titleList[c],"mousedown",function(d){b._captureElement(d,
c);return false});this.addHandler(this._titleList[c],"mouseup",function(d){if(b._tabCaptured&&b._dragStarted){b._cancelClick=true;b._uncapture(d,c)}else b._cancelClick=false;b._tabCaptured=false;return false})},_removeHoverStates:function(){var b=this;a.each(this._titleList,function(){this.removeClass(b.toThemeProperty("jqx-tabs-title-hover-top"));this.removeClass(b.toThemeProperty("jqx-tabs-title-hover-bottom"))})},_addHoverHandlers:function(c){var b=this;var d=this._titleList[c];this.addHandler(d,
"mouseenter",function(f){if(c!=b._selectedItem){if(b.position=="top")d.addClass(b.toThemeProperty("jqx-tabs-title-hover-top"));else d.addClass(b.toThemeProperty("jqx-tabs-title-hover-bottom"));d.addClass(b.toThemeProperty("jqx-fill-state-hover"));if(b.showCloseButtons){var e=d.children(0).children(b.toThemeProperty(".jqx-tabs-close-button",true));e.addClass(b.toThemeProperty("jqx-tabs-close-button-hover",true))}}});this.addHandler(d,"mouseleave",function(f){if(c!=b._selectedItem){if(b.position=="top")d.removeClass(b.toThemeProperty("jqx-tabs-title-hover-top"));
else d.removeClass(b.toThemeProperty("jqx-tabs-title-hover-bottom"));d.removeClass(b.toThemeProperty("jqx-fill-state-hover"));if(b.showCloseButtons){var e=d.children(0).children(b.toThemeProperty(".jqx-tabs-close-button",true));e.removeClass(b.toThemeProperty("jqx-tabs-close-button-hover",true))}}})},_addEventListenerAt:function(d){var c=this;if(this._titleList[d].disabled)return;if(this.reorder&&!this._isTouchDevice)this._addDragDropHandlers(d);this._addSelectHandler(d);if(this.enabledHover)this._addHoverHandlers(d);
var b=this._titleList[d].find(this.toThemeProperty(".jqx-tabs-close-button",true));this.removeHandler(b,"click");this.addHandler(b,"click",function(e){c.removeAt(d);return false})},_removeEventHandlers:function(){var b=this;var c=this.length();while(c){c--;this._removeEventListenerAt(c)}if(this.scrollable){this.removeHandler(this._leftArrow,"mousedown");this.removeHandler(this._rightArrow,"mousedown")}this.removeHandler(a(document),"mousemove.tab"+this.element.id,this._moveElement);this.removeHandler(a(document),
"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler);this.removeHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler);this.removeHandler(this.host,"keydown")},_removeEventListenerAt:function(d){var c=this;this.removeHandler(this._titleList[d],this.toggleMode);this.removeHandler(this._titleList[d],"mouseenter");this.removeHandler(this._titleList[d],"mouseleave");this.removeHandler(this._titleList[d],"mousedown");this.removeHandler(this._titleList[d],"mouseup");
var b=this._titleList[d].children(0).children(this.toThemeProperty(".jqx-tabs-close-button",true));this.removeHandler(b,"click")},_moveSelectionTrack:function(m,c,b){var n=this;if(m==-1)return;if(this._titleList.length==0)return;if(m>=this._titleList.length)return;if(this.selectionTracker){this._selectionTracker.stop();this._unlockAnimation("selectionTracker");if(b===undefined){var h=parseInt(this._titleList[m].position().left);if(!isNaN(parseInt(this._unorderedList.css("left"))))h+=parseInt(this._unorderedList.css("left"));
if(!isNaN(parseInt(this._unorderedList.css("margin-left"))))h+=parseInt(this._unorderedList.css("margin-left"));if(!isNaN(parseInt(this._titleList[m].css("margin-left"))))h+=parseInt(this._titleList[m].css("margin-left"));if(!isNaN(parseInt(this._titleList[m].css("margin-right"))));}else var h=b;var g=0;var e=0;if(this.position==="top"){g=parseInt(this._headerWrapper.height())-parseInt(this._titleList[m].outerHeight());if(!this.autoHeight)e+=parseInt(this._titleList[m].css("margin-top"))}this._lockAnimation("selectionTracker");
var l=parseInt(this._titleList[m].css("padding-left"))+parseInt(this._titleList[m].css("padding-right"));var f=this.position=="top"?0:1;var k=parseInt(this._headerWrapper.css("padding-top"));var j=parseInt(this._titleList[m].css("padding-top"))+parseInt(this._titleList[m].css("padding-bottom"));this._selectionTracker.css("visibility","visible");this._moveSelectionTrackerContainer.css("visibility","visible");var d=parseInt(this._titleList[m].css("margin-top"));if(isNaN(d))d=0;this._selectionTracker.animate({top:k+
d-f,left:h+"px",height:parseInt(this._titleList[m].height()+j),width:this._titleList[m].width()+l},c,function(){n._unlockAnimation("selectionTracker");n._selectionTracker.css("visibility","hidden");n._addSelectStyle(m,true);n._moveSelectionTrackerContainer.css("visibility","hidden")})}},_switchTabs:function(b,d){if(b!==d&&!this._activeAnimation()&&!this._tabCaptured){var c=this;this._raiseEvent(7,{item:d});this._raiseEvent(6,{item:b});if(this._currentEvent)if(this._currentEvent.cancel){this._currentEvent=
null;return}this._unselect(d,null,true);this._select(b,c.contentTransitionDuration,null,true);return true}return false},_activeAnimation:function(){for(child in this._isAnimated)if(this._isAnimated.hasOwnProperty(child))if(this._isAnimated[child])return true;return false},_indexOf:function(c){var b=this.length();while(b){b--;if(this._titleList[b][0]===c[0]||this._contentList[b][0]===c[0])return b}return-1},_validateProperties:function(){try{if(this.scrollAnimationDuration<0||isNaN(this.scrollAnimationDuration))throw new Error(this._invalidArgumentExceptions.invalidScrollAnimationDuration);
if(parseInt(this.width)<0&&this.width!=="auto")throw new Error(this._invalidArgumentExceptions.invalidWidth);if(parseInt(this.height)<0&&this.height!=="auto")throw new Error(this._invalidArgumentExceptions.invalidHeight);if(this.animationType!=="none"&&this.animationType!=="fade")throw new Error(this._invalidArgumentExceptions.invalidAnimationType);if(this.contentTransitionDuration<0||isNaN(this.contentTransitionDuration))throw new Error(this._invalidArgumentExceptions.invalidcontentTransitionDuration);
if(this.toggleMode!=="click"&&this.toggleMode!=="dblclick"&&this.toggleMode!=="mouseenter"&&this.toggleMode!=="none")throw new Error(this._invalidArgumentExceptions.invalidToggleMode);if(this.position!=="top"&&this.position!=="bottom")throw new Error(this._invalidArgumentExceptions.invalidPosition);if(this.scrollPosition!=="left"&&this.scrollPosition!=="right"&&this.scrollPosition!=="both")throw new Error(this._invalidArgumentExceptions.invalidScrollPosition);if(this.scrollStep<0||isNaN(this.scrollStep))throw new Error(this._invalidArgumentExceptions.invalidScrollStep);
if(this._titleList.length!==this._contentList.length)throw new Error(this._invalidArgumentExceptions.invalidStructure);if(this.arrowButtonSize<0||isNaN(this.arrowButtonSize))throw new Error(this._invalidArgumentExceptions.invalidArrowSize);if(this.closeButtonSize<0||isNaN(this.closeButtonSize))throw new Error(this._invalidArgumentExceptions.invalidCloseSize);if(this.dropAnimationDuration<0||isNaN(this.dropAnimationDuration))throw new Error(this._invalidArgumentExceptions.invalidDropAnimationDuration);
}catch(b){alert(b)}},_startScrollRepeat:function(d,c){var b=this;if(c<50)c=50;if(d)this._scrollLeft(c);else this._scrollRight(c);this._scrollTimeout=setTimeout(function(){b._startScrollRepeat(d,c-50)},c)},_performLayout:function(){var b=this.length();while(b){b--;if(this.position==="top"||this.position==="bottom")this._titleList[b].css("float","left")}this._enableWindowResize(false);this._fitToSize();this._performHeaderLayout();this._fitToSize();this._enableWindowResize(true)},updatetabsheader:function(){this._performHeaderLayout()},
_performResize:function(){this._fitToSize();this._positionArrows(this._totalItemsWidth);if(this._totalItemsWidth>this.host.width())this._unorderedList.width(this._totalItemsWidth);else this._unorderedList.width(this.host.width()-2);this._fitToSize()},_addArrows:function(){if(this._leftArrow&&this._rightArrow){this._leftArrow.remove();this._rightArrow.remove()}this._leftArrow=a('<div><span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-tabs-arrow-left")+'"></span></div>');
this._rightArrow=a('<div><span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-tabs-arrow-right")+'"></span></div>');this._leftArrow.addClass(this.toThemeProperty("jqx-tabs-arrow-background"));this._rightArrow.addClass(this.toThemeProperty("jqx-tabs-arrow-background"));this._leftArrow.addClass(this.toThemeProperty("jqx-widget-header"));this._rightArrow.addClass(this.toThemeProperty("jqx-widget-header"));this._headerWrapper.append(this._leftArrow);this._headerWrapper.append(this._rightArrow);
this._leftArrow.width(this.arrowButtonSize);this._leftArrow.height("100%");this._rightArrow.width(this.arrowButtonSize);this._rightArrow.height("100%");this._leftArrow.css({"z-index":"30"});this._rightArrow.css({"z-index":"30"});this._leftArrow.css("display","none");this._rightArrow.css("display","none")},_tabsWithVisibleCloseButtons:function(){if(!this.showCloseButtons)return 0;var c=this.length();var b=this;a.each(this._titleList,function(){var d=this.attr("hasclosebutton");if(d!=undefined&&d!=
null)if(d=="false"||d==false)c--});return c},_calculateTitlesSize:function(){var f=0;var d=0;var c=this.length();while(c){c--;this._titleList[c].css("position","static");this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true)).css("display","none");d+=parseInt(this._titleList[c].outerWidth(true));if(f<this._titleList[c].outerHeight(true))f=Math.round(parseInt(this._titleList[c].outerHeight(true)));if(this._titleList[c].height()==0){var e=this._titleList[c].clone();a(document.body).append(e);
f=Math.round(parseInt(e.outerHeight(true)));e.remove()}var b=this._titleList[c].attr("hasCloseButton");if(b!=undefined&&b!=null)if(b=="true"||b==true){d+=this.closeButtonSize;this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true)).css("display","block")}else{if(b=="false"||b==false)this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true)).css("display","none")}else if(this.showCloseButtons&&(this.canCloseAllTabs||this._tabsWithVisibleCloseButtons()>1)){d+=this.closeButtonSize;
this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true)).css("display","block")}this._titleList[c].height(this._titleList[c].height())}return{height:f,width:10+d}},_reorderHeaderElements:function(){if(this.selectionTracker)this._moveSelectionTrackerContainer.css({position:"absolute",height:"100%",top:"0px",left:"0px",width:"100%"});this._headerWrapper.css({position:"relative",left:"0px",top:"0px"});if(this.scrollable){this._rightArrow.css({width:this.arrowButtonSize,position:"absolute",
top:"0px"});this._leftArrow.css({width:this.arrowButtonSize,position:"absolute",top:"0px"});var b=this.theme&&this.theme.indexOf("ui-")!=-1?3:0;if(b>0){this._rightArrow.addClass(this.toThemeProperty("jqx-rc-r"));this._leftArrow.addClass(this.toThemeProperty("jqx-rc-l"))}switch(this.scrollPosition){case "both":this._rightArrow.css("right","0px");this._leftArrow.css("left","0px");break;case "left":this._rightArrow.css("left",this.arrowButtonSize+"px");this._leftArrow.css("left","0px");break;case "right":this._rightArrow.css("right",
-b+"px");this._leftArrow.css("right",this.arrowButtonSize-b+"px");break}}},_positionArrows:function(b){if(b>=parseInt(this._headerWrapper.width())&&this.scrollable){this._needScroll=true;if(this._unorderedList.position().left===0)this._unorderedListLeftBackup=this._getArrowsDisplacement()+"px";this._leftArrow.css("display","block");this._rightArrow.css("display","block")}else{this._needScroll=false;this._leftArrow.css("display","none");this._rightArrow.css("display","none");this._unorderedList.css("left",
0)}},_performHeaderLayout:function(){this._removeSelectStyle();var b=this._calculateTitlesSize();var d=b.height;var c=b.width;this._headerWrapper.height(d);this._unorderedList.height(d);if(this.headerHeight!=null&&this.headerHeight!="auto"){this._headerWrapper.height(this.headerHeight);this._unorderedList.height(this.headerHeight)}if(c>this.host.width())this._unorderedList.width(c);else this._unorderedList.width(this.host.width());if(a.browser.msie&&a.browser.version<8){this._unorderedList.css("position",
"relative");this._headerWrapper.css("overflow","hidden")}this._reorderHeaderElements();c=c+parseInt(this._unorderedList.css("margin-left"));this._totalItemsWidth=c;this._positionArrows(c);this._unorderedList.css({position:"relative",top:"0px"});this._verticalAlignElements();this._moveSelectionTrack(this._selectedItem,0);this._addSelectStyle(this.selectedItem)},_verticalAlignElements:function(){var l=this.length();var q=this._maxHeightTab();while(l){l--;var b=this._titleList[l].find(".jqx-tabs-titleContentWrapper"),
m=b.height(),p=this._titleList[l].find(this.toThemeProperty(".jqx-tabs-close-button",true)),n=parseInt(this._titleList[l].css("padding-top"));if(!n)n=0;if(this.autoHeight){var h=this._titleList[l].outerHeight(true)-this._titleList[l].height();var c=parseInt(this._titleList[l].css("padding-top"));var r=parseInt(this._titleList[l].css("padding-bottom"));var k=parseInt(this._titleList[l].css("border-top-width"));var f=parseInt(this._titleList[l].css("border-bottom-width"));this._titleList[l].height(this._unorderedList.outerHeight()-
c-r-k-f)}else if(this.position==="top"){var j=parseInt(this._unorderedList.height())-parseInt(this._titleList[l].outerHeight(true));if(parseInt(this._titleList[l].css("margin-top"))!==j&&j!==0)this._titleList[l].css("margin-top",j)}else this._titleList[l].height(this._titleList[l].height());this._titleList[l].children(0).height("100%");var e=parseInt(this._titleList[l].height());var g=parseInt(e)/2-parseInt(p.height())/2;p.css("margin-top",1+g);var o=parseInt(e)/2-parseInt(b.height())/2;b.css("margin-top",
o)}if(this.scrollable){var h=parseInt(this._headerWrapper.outerHeight())-this.arrowButtonSize;var d=h/2;this._rightArrow.children(0).css("margin-top",d);this._rightArrow.height("100%");this._leftArrow.height("100%");this._leftArrow.children(0).css("margin-top",d)}},_getImageUrl:function(c){var b=c.css("background-image");b=b.replace('url("',"");b=b.replace('")',"");b=b.replace("url(","");b=b.replace(")","");return b},_fitToSize:function(){this.host.width(this.width);if(this.width!="auto"){this._contentWrapper.css("width",
"100%");this._contentWrapper.width(this.host.width()-2)}if(this.height!=="auto"){this.host.height(this.height);var b=this.host.height()-this._headerWrapper.outerHeight()-2;this._contentWrapper.height(b)}else this._contentWrapper.css("height","auto")},_maxHeightTab:function(){var c=this.length();var d=-1;var b=-1;while(c){c--;if(d<parseInt(this._titleList[c].outerHeight(true)))b=c}return b},_addSelectionTracker:function(){if(this._moveSelectionTrackerContainer)this._moveSelectionTrackerContainer.remove();
this._moveSelectionTrackerContainer=a('<div class="'+this.toThemeProperty("jqx-tabs-selection-tracker-container")+'">');var b=this.toThemeProperty("jqx-tabs-selection-tracker-"+this.position);this._selectionTracker=a('<div class="'+b+'">');this._selectionTracker.css("color","inherit");this._moveSelectionTrackerContainer.append(this._selectionTracker);this._headerWrapper.append(this._moveSelectionTrackerContainer);this._selectionTracker.css({position:"absolute","z-index":"10",left:"0px",top:"0px",
display:"inline-block"})},_addContentWrapper:function(){var d="none";var b=this._contentWrapper==undefined;this._contentWrapper=this._contentWrapper||a('<div class="'+this.toThemeProperty("jqx-tabs-content")+'" style="float:'+d+';">');this._contentWrapper.addClass(this.toThemeProperty("jqx-widget-content"));var c=this.length();while(c){c--;this._contentList[c].addClass(this.toThemeProperty("jqx-tabs-content-element"))}if(b){this.host.find(".jqx-tabs-content-element").wrapAll(this._contentWrapper);
this._contentWrapper=this.host.find(".jqx-tabs-content")}if(this.roundedCorners){if(this.position=="top")this._contentWrapper.addClass(this.toThemeProperty("jqx-rc-b"));else this._contentWrapper.addClass(this.toThemeProperty("jqx-rc-t"));this.host.addClass(this.toThemeProperty("jqx-rc-all"))}},_addHeaderWrappers:function(){var b=this.length();this._unorderedList.remove();this._headerWrapper=this._headerWrapper||a('<div class="jqx-tabs-headerWrapper" style="outline: none;">');this._headerWrapper.remove();
if(this.position=="top")this._headerWrapper.prependTo(this.host);else this._headerWrapper.appendTo(this.host);this._unorderedList.appendTo(this._headerWrapper);this._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header"));this._headerWrapper.addClass(this.toThemeProperty("jqx-widget-header"));if(this.position=="bottom")this._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-bottom"));else this._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-bottom"));if(this.roundedCorners)if(this.position==
"top"){this._headerWrapper.addClass(this.toThemeProperty("jqx-rc-t"));this._headerWrapper.removeClass(this.toThemeProperty("jqx-rc-b"))}else{this._headerWrapper.removeClass(this.toThemeProperty("jqx-rc-t"));this._headerWrapper.addClass(this.toThemeProperty("jqx-rc-b"))}while(b){b--;if(this._titleList[b].children(".jqx-tabs-titleWrapper").length<=0){var c=a('<div class="jqx-tabs-titleWrapper" style="outline: none; position: relative;">');c.append(this._titleList[b].html());this._titleList[b].empty();
c.appendTo(this._titleList[b])}this._titleList[b].children(".jqx-tabs-titleWrapper").css("z-index","15")}},_render:function(){this._addCloseButtons();this._addHeaderWrappers();this._addContentWrapper();if(this.selectionTracker)this._addSelectionTracker();this._addArrows()},_addCloseButton:function(c){var f=c;if(this._titleList[f].find(this.toThemeProperty(".jqx-tabs-close-button",true)).length<=0&&this._titleList[f].find(".jqx-tabs-titleContentWrapper").length<=0){var d=a('<div class="jqx-tabs-titleContentWrapper"></div>');
d.css("float","left");d.addClass("jqx-disableselect");d.append(this._titleList[f].html());this._titleList[f].html("");var b=a('<div class="'+this.toThemeProperty("jqx-tabs-close-button")+'"></div>');b.css({height:this.closeButtonSize,width:this.closeButtonSize,"float":"left","font-size":"1px"});var e=this;this._titleList[f].append(d);this._titleList[f].append(b);if(!this.showCloseButtons)b.css("display","none")}},_addCloseButtons:function(){var b=this.length();while(b){b--;this._addCloseButton(b)}},
_prepareTabs:function(){var c=this.length();var b=this.selectionTracker;this.selectionTracker=false;while(c){c--;if(this._selectedItem!==c)this._unselect(c,null,false)}this._select(this._selectedItem,0,null,false);this.selectionTracker=b;if(this.initTabContent)if(!this._initTabContentList[this.selectedItem]){this.initTabContent(this.selectedItem);this._initTabContentList[this.selectedItem]=true}},_isValidIndex:function(b){return b>=0&&b<this.length()},_removeSelectStyle:function(){var c=this.length();
while(c){c--;var b=null;if(this.showCloseButtons){var b=this._titleList[c].children(0).children(this.toThemeProperty(".jqx-tabs-close-button",true));b.removeClass(this.toThemeProperty("jqx-tabs-close-button-selected"))}if(this.position=="top")this._titleList[c].removeClass(this.toThemeProperty("jqx-tabs-title-selected-top"));else this._titleList[c].removeClass(this.toThemeProperty("jqx-tabs-title-selected-bottom"));this._titleList[c].removeClass(this.toThemeProperty("jqx-fill-state-pressed"))}},_addSelectStyle:function(c,
e){var d=this.length();this._removeSelectStyle();if(!this.selectionTracker||e!=undefined&&e)if(c>=0&&this._titleList[c]!=undefined){var b=null;if(this.showCloseButtons)var b=this._titleList[c].children(0).children(this.toThemeProperty(".jqx-tabs-close-button",true));this._titleList[c].removeClass(this.toThemeProperty("jqx-fill-state-hover"));if(this.position=="top"){this._titleList[c].removeClass(this.toThemeProperty("jqx-tabs-title-hover-top"));this._titleList[c].addClass(this.toThemeProperty("jqx-tabs-title-selected-top"))}else{this._titleList[c].removeClass(this.toThemeProperty("jqx-tabs-title-hover-bottom"));
this._titleList[c].addClass(this.toThemeProperty("jqx-tabs-title-selected-bottom"))}this._titleList[c].addClass(this.toThemeProperty("jqx-fill-state-pressed"));if(b!=null)b.addClass(this.toThemeProperty("jqx-tabs-close-button-selected"))}},_addItemTo:function(g,c,e){if(c<g.length){var b=undefined,f=undefined;for(var d=c;d+1<g.length;d++)if(b===undefined){b=g[d+1];g[d+1]=g[d]}else{f=g[d+1];g[d+1]=b;b=f}if(b===undefined)b=g[c];g[c]=e;g.push(b)}else g.push(e)},_select:function(d,f,g,b,e){if(!this._tabCaptured){this.host.attr("hideFocus",
"true");var c=this;if(e==undefined)this._addSelectStyle(d);else this._addSelectStyle(d,e);if(this.isCollapsed&&this.collapsible){this._contentList[d].css("display","none");this._selectCallback(d,g,b);return}switch(this.animationType){case "none":if(!c.selectionTracker){for(i=0;i<this._contentList.length;i++)if(d!=i&&this._contentList[i].css("display")=="block")this._contentList[i].css("display","none");this._contentList[d].css("display","block")}else setTimeout(function(){c._contentList[d].css("display",
"block")},this.selectionTrackerAnimationDuration);this._selectCallback(d,g,b);break;case "fade":this._lockAnimation("contentListSelect");c._selectCallback(d,g,b);this._contentList[d].fadeIn(f,function(){c._unlockAnimation("contentListSelect")});break}}},_selectCallback:function(c,d,b){this._selectedItem=c;this.selectedItem=this._selectedItem;if(d)d();if(b)this._raiseEvent(1,{item:c})},_unselect:function(e,f,c){if(e>=0)if(!this._tabCaptured){var d=this;this._contentList[e].stop();if(this.animationType==
"fade")this._contentList[e].css("display","none");else if(this.selectionTracker)setTimeout(function(){d._contentList[e].css("display","none")},this.selectionTrackerAnimationDuration);else this._contentList[e].css("display","none");this._unselectCallback(e,f,c);if(!this.selectionTracker){this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-selected"));this._titleList[e].removeClass(this.toThemeProperty("jqx-fill-state-pressed"))}}else var b=12},_unselectCallback:function(c,d,b){if(b)this._raiseEvent(8,
{item:c});if(d)d()},disable:function(){var b=this.length();while(b){b--;this.disableAt(b)}},enable:function(){var b=this.length();while(b){b--;this.enableAt(b)}},getEnabledTabsCount:function(){var b=0;a.each(this._titleList,function(){if(!this.disabled)b++});return b},getDisabledTabsCount:function(){var b=0;a.each(this._titleList,function(){if(this.disabled)b++});return b},removeAt:function(d){if(this._isValidIndex(d)&&(this.canCloseAllTabs||this.length()>1)){this._removeHoverStates();var b=this,
c=this._titleList[this._selectedItem],e=parseInt(this._titleList[d].outerWidth(true)),j=this.getTitleAt(d);this._unorderedList.width(parseInt(this._unorderedList.width())-e);this._titleList[d].remove();this._contentList[d].remove();var h=0;this._titleList.splice(d,1);this._contentList.splice(d,1);this._addStyles();this._performHeaderLayout();this._removeEventHandlers();this._addEventHandlers();this._raiseEvent(3,{item:d,title:j});this._isAnimated={};if(this.selectedItem>0){this._selectedItem=-1;var g=
this._getPreviousIndex(this.selectedItem);this.select(g)}else{this._selectedItem=-1;var g=this._getNextIndex(this.selectedItem);this.select(g)}if(parseInt(this._unorderedList.css("left"))>this._getArrowsDisplacement())this._unorderedList.css("left",this._getArrowsDisplacement());if(parseInt(this._unorderedList.width())<=parseInt(this._headerWrapper.width())){var f=this.enableScrollAnimation?this.scrollAnimationDuration:0;this._lockAnimation("unorderedList");this._unorderedList.animate({left:0},f,
function(){b._unlockAnimation("unorderedList")})}}},removeFirst:function(){this.removeAt(0)},removeLast:function(){this.removeAt(this.length()-1)},disableAt:function(b){if(!this._titleList[b].disabled||this._titleList[b].disabled===undefined){if(this.selectedItem==b){var c=this.next();if(!c)c=this.previous()}this._titleList[b].disabled=true;this.removeHandler(this._titleList[b],this.toggleMode);if(this.enabledHover)this._titleList[b].unbind("mouseenter").unbind("mouseleave");this._removeEventListenerAt(b);
this._titleList[b].addClass(this.toThemeProperty("jqx-tabs-title-disable"));this._titleList[b].addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._raiseEvent(5,{item:b})}},enableAt:function(b){if(this._titleList[b].disabled){this._titleList[b].disabled=false;this._addEventListenerAt(b);this._titleList[b].removeClass(this.toThemeProperty("jqx-tabs-title-disable"));this._titleList[b].removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this._raiseEvent(4,{item:b})}},addAt:function(d,
g,f){if(d>=0||d<=this.length()){this._removeHoverStates();var b=a("<li>"+g+"</li>");var e=a("<div>"+f+"</div>");b.addClass(this.toThemeProperty("jqx-tabs-title"));b.addClass(this.toThemeProperty("jqx-item"));e.addClass(this.toThemeProperty("jqx-tabs-content-element"));if(this.position=="bottom")b.addClass(this.toThemeProperty("jqx-tabs-title-bottom"));var c=false;if(this._titleList.length==0)this._unorderedList.append(b);else if(d<this.length()&&d>=0)this._titleList[d].before(b);else this._titleList[this.length()-
1].after(b);e.appendTo(this._contentWrapper);this._addItemTo(this._titleList,d,b);this._addItemTo(this._contentList,d,e);if(this._selectedItem>d)this._selectedItem++;this._switchTabs(d,this._selectedItem);this._selectedItem=d;if(this.showCloseButtons&&this._titleList.length>0)this._addCloseButton(d);this._uiRefresh(c);this._raiseEvent(2,{item:d});this._moveSelectionTrack(this._selectedItem,0)}},addFirst:function(c,b){this.addAt(0,c,b)},addLast:function(c,b){this.addAt(this.length(),c,b)},select:function(c,
b){if(typeof c==="object")c=this._indexOf(c);var e=c>=0&&c<this._titleList.length?this._titleList[c].attr("canselect"):true;if(e==undefined||e=="true"||e==true)if(c!==this._selectedItem&&this._isValidIndex(c))if(!this._activeAnimation()&&!this._titleList[c].disabled){var d=this._switchTabs(c,this._selectedItem);if(d)this.ensureVisible(c)}},previous:function(c){var b=this._selectedItem;if(c!=undefined&&!isNaN(c))b=c;while(b>0&&b<this._titleList.length){b--;if(!this._titleList[b].disabled){this.select(b);
return true}}return false},_getPreviousIndex:function(c){if(c!=undefined&&!isNaN(c)){var b=c;while(c>0&&c<=this._titleList.length){c--;if(!this._titleList[c].disabled){return c;break}}return b}else return 0},_getNextIndex:function(c){if(c!=undefined&&!isNaN(c)){var b=c;while(c>=0&&c<this._titleList.length){if(!this._titleList[c].disabled){return c;break}c++}return b}else return 0},next:function(c){var b=this._selectedItem;if(c!=undefined&&!isNaN(c))b=c;while(b>=0&&b<this._titleList.length-1){b++;
if(!this._titleList[b].disabled){this.select(b);return true}}return false},first:function(){var b=0;if(this._titleList[b].disabled)this.next(b);else this.select(b)},last:function(){var b=this._titleList.length-1;if(this._titleList[b].disabled)this.previous(b);else this.select(b)},length:function(){return this._titleList.length},lockAt:function(b){if(this._isValidIndex(b)&&(!this._titleList[b].locked||this._titleList[b].locked===undefined)){this._titleList[b].locked=true;this._raiseEvent(11,{item:b})}},
unlockAt:function(b){if(this._isValidIndex(b)&&this._titleList[b].locked){this._titleList[b].locked=false;this._raiseEvent(12,{item:b})}},lockAll:function(){var b=this.length();while(b){b--;this.lockAt(b)}},unlockAll:function(){var b=this.length();while(b){b--;this.unlockAt(b)}},showCloseButtonAt:function(c){if(this._isValidIndex(c)){var b=this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true));b.css("display","block")}},hideCloseButtonAt:function(c){if(this._isValidIndex(c)){var b=
this._titleList[c].find(this.toThemeProperty(".jqx-tabs-close-button",true));b.css("display","none")}},hideAllCloseButtons:function(){var b=this.length();while(b){b--;this.hideCloseButtonAt(b)}},showAllCloseButtons:function(){var b=this.length();while(b){b--;this.showCloseButtonAt(b)}},getTitleAt:function(b){if(this._titleList[b])return this._titleList[b].text();return null},getContentAt:function(b){if(this._contentList[b])return this._contentList[b].text();return null},setTitleAt:function(b,c){if(this._titleList[b]){this._titleList[b].text(c);
if(this.showCloseButtons){this._addCloseButton(b);this._removeEventHandlers();this._addEventHandlers()}}},setContentAt:function(b,c){if(this._contentList[b])this._contentList[b].html(c)},ensureVisible:function(d){var l=this;if(d==undefined||d==-1||d==null)d=this.selectedItem;if(!this._isValidIndex(d))return false;var k=parseInt(this._titleList[d].position().left)+parseInt(this._unorderedList.css("margin-left"));var f=parseInt(this._unorderedList.css("left"));var j=parseInt(this._headerWrapper.outerWidth(true));
var e=parseInt(this._titleList[d].outerWidth(true));var h=f-this._getArrowsDisplacement();var b=j-this._getArrowsDisplacement()-h;var g,c;if(k<-h){g=-k+this._getArrowsDisplacement();c=this._getArrowsDisplacement()}else if(k+e>b-this._getArrowsDisplacement()){g=-k+j-e-(this.scrollable?2*this.arrowButtonSize-this._getArrowsDisplacement():0);c=j-e-this._getArrowsDisplacement()}else{this._moveSelectionTrack(d,this.selectionTrackerAnimationDuration);return true}this._lockAnimation("unorderedList");this._unorderedList.animate({left:g},
this.scrollAnimationDuration,function(){l._unlockAnimation("unorderedList");l._moveSelectionTrack(l._selectedItem,0);return true});this._moveSelectionTrack(d,this.selectionTrackerAnimationDuration,c);return true},isVisibleAt:function(d){var l=this;if(d==undefined||d==-1||d==null)d=this.selectedItem;if(!this._isValidIndex(d))return false;var k=parseInt(this._titleList[d].position().left)+parseInt(this._unorderedList.css("margin-left"));var f=parseInt(this._unorderedList.css("left"));var j=parseInt(this._headerWrapper.outerWidth(true));
var e=parseInt(this._titleList[d].outerWidth(true));var h=f-this._getArrowsDisplacement();var b=j-this._getArrowsDisplacement()-h;var g,c;if(k<-h)return false;else if(k+e>b)return false;else return true;return true},isDisabled:function(b){return this._titleList[b].disabled},_lockAnimation:function(b){if(this._isAnimated)this._isAnimated[b]=true},_unlockAnimation:function(b){if(this._isAnimated)this._isAnimated[b]=false},propertyChangedHandler:function(b,c,e,d){this._validateProperties();switch(c){case "touchMode":if(d){b.enabledHover=
false;b.keyboardNavigation=false}break;case "width":case "height":b._performResize();return;case "disabled":if(d)this.disable();else this.enable();return;case "showCloseButtons":if(d)this.showAllCloseButtons();else this.hideAllCloseButtons();this._moveSelectionTrack(this._selectedItem,this.selectionTrackerAnimationDuration);return;case "selectedItem":if(this._isValidIndex(d))this.select(d);return;case "scrollStep":case "contentTransitionDuration":case "scrollAnimationDuration":case "enableScrollAnimation":case "enableDropAnimation":return;
case "selectionTracker":if(d){this._refresh();this.select(this._selectedItem)}else if(this._selectionTracker!=null)this._selectionTracker.remove();return;case "scrollable":if(d){this._refresh();this.select(this._selectedItem)}else{this._leftArrow.remove();this._rightArrow.remove();this._performHeaderLayout()}return;case "autoHeight":this._performHeaderLayout();return;case "theme":a.jqx.utilities.setTheme(e,d,this.host);return}this._unorderedList.css("left","0px");this._refresh();this.select(this._selectedItem);
this._addSelectStyle(this._selectedItem,true)}})})(jQuery);
(function(b){b.jqx.jqxWidget("jqxGrid","",{});b.extend(b.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=false;this.width=600;this.height=400;this.pagerheight=28;this.groupsheaderheight=34;this.pagesize=10;this.pagesizeoptions=["5","10","20"];this.rowsheight=25;this.columnsheight=25;this.filterrowheight=30;this.groupindentwidth=30;this.rowdetails=false;this.enablerowdetailsindent=true;this.enablemousewheel=true;this.initrowdetails=null;this.editable=false;this.editmode="selectedcell";
this.pageable=false;this.groupable=false;this.sortable=false;this.filterable=false;this.autoshowfiltericon=true;this.showfiltercolumnbackground=true;this.showpinnedcolumnbackground=true;this.showsortcolumnbackground=true;this.altrows=false;this.altstart=1;this.altstep=1;this.showrowdetailscolumn=true;this.showtoolbar=false;this.toolbarheight=34;this.showstatusbar=false;this.statusbarheight=34;this.enableellipsis=true;this.groups=[];this.groupsrenderer=null;this.groupcolumnrenderer=null;this.groupsexpandedbydefault=
false;this.pagerrenderer=null;this.touchmode="auto";this.columns=[];this.selectedrowindex=-1;this.selectedrowindexes=new Array;this.selectedcells=new Array;this.selectedcell=null;this.tableZIndex=799;this.headerZIndex=499;this.updatefilterconditions=null;this.showaggregates=false;this.showfilterrow=false;this.autorowheight=false;this.autokoupdates=true;this.handlekeyboardnavigation=null;this.showsortmenuitems=true;this.showfiltermenuitems=true;this.showgroupmenuitems=true;this.enablebrowserselection=
false;this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:true,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null};this.dataview=null;this.updatedelay=0;this.autoheight=false;this.showheader=true;this.showgroupsheader=true;this.closeablegroups=true;this.scrollbarsize=15;this.virtualmode=false;this.sort=null;this.columnsmenu=
true;this.columnsresize=false;this.columnsreorder=false;this.columnsmenuwidth=15;this.autoshowcolumnsmenubutton=true;this.popupwidth="auto";this.sorttogglestates=2;this.rendergridrows=null;this.enableanimations=true;this.enabletooltips=false;this.selectionmode="singlerow";this.enablehover=true;this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.";this.verticalscrollbarstep=
5;this.verticalscrollbarlargestep=400;this.horizontalscrollbarstep=5;this.horizontalscrollbarlargestep=50;this.keyboardnavigation=true;this.touchModeStyle="auto";this.autoshowloadelement=true;this.showemptyrow=true;this.autosavestate=false;this.autoloadstate=false;this._updating=false;this._pagescache=new Array;this._pageviews=new Array;this._cellscache=new Array;this._rowdetailscache=new Array;this._rowdetailselementscache=new Array;this._requiresupdate=false;this._hasOpenedMenu=false;this.events=
["initialized","rowclick","rowselect","rowunselect","groupexpand","groupcollapse","sort","columnclick","cellclick","pagechanged","pagesizechanged","bindingcomplete","groupschanged","filter","columnresized","cellselect","cellunselect","cellbeginedit","cellendedit","cellvaluechanged","rowexpand","rowcollapse","rowdoubleclick","celldoubleclick"]},createInstance:function(d){var i=b("<div tabIndex=0 style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+
this.element.id+"' tabIndex=1 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='groupsheader' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+
this.element.id+"' tabIndex=2 style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='pager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div></div>");
this._fieldsmapping();this.element.innerText="";this.element.innerHTML="";this.host.append(i);this.host.addClass(this.toTP("jqx-grid"));this.host.addClass(this.toTP("jqx-reset"));this.host.addClass(this.toTP("jqx-rc-all"));this.host.addClass(this.toTP("jqx-widget"));this.host.addClass(this.toTP("jqx-widget-content"));this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toTP("jqx-reset"));var h=this.host.find("#verticalScrollBar"+
this.element.id);var g=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright"));if(!h.jqxScrollBar){alert("jqxscrollbar is not loaded.");return}this.editors=new Array;this.vScrollBar=h.jqxScrollBar({vertical:true,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:false});this.hScrollBar=g.jqxScrollBar({vertical:false,touchMode:this.touchmode,
step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,triggervaluechanged:false});this.pager=this.host.find("#pager");this.toolbar=this.host.find("#toolbar");this.toolbar[0].id="toolbar"+this.element.id;this.toolbar.addClass(this.toTP("jqx-grid-toolbar"));this.toolbar.addClass(this.toTP("jqx-widget-header"));this.statusbar=this.host.find("#statusbar");this.statusbar[0].id="statusbar"+this.element.id;this.statusbar.addClass(this.toTP("jqx-grid-statusbar"));
this.statusbar.addClass(this.toTP("jqx-widget-header"));this.pager.addClass(this.toTP("jqx-grid-pager"));this.pager.addClass(this.toTP("jqx-widget-header"));this.groupsheader=this.host.find("#groupsheader");this.groupsheader.addClass(this.toTP("jqx-grid-groups-header"));this.groupsheader.addClass(this.toTP("jqx-widget-header"));this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=b.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=
b.data(this.hScrollBar[0],"jqxScrollBar").instance;this.gridtable=null;this.dataloadelement=b('<div style="position: absolute;"></div>');this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width);this.dataloadelement.height(this.height);this.host.prepend(this.dataloadelement);this.isNestedGrid=this.host.parent()?this.host.parent().css("z-index")==2E3:false;if(this.localizestrings)this.localizestrings();if(this.rowdetailstemplate){if(undefined==this.rowdetailstemplate.rowdetails)this.rowdetailstemplate.rowdetails=
"<div></div>";if(undefined==this.rowdetailstemplate.rowdetailsheight)this.rowdetailstemplate.rowdetailsheight=200;if(undefined==this.rowdetailstemplate.rowdetailshidden)this.rowdetailstemplate.rowdetailshidden=true}if(this._testmodules())return;this.databind(this.source);if(this.showtoolbar)this.toolbar.css("visibility","visible");if(this.showstatusbar)this.statusbar.css("visibility","visible");if(this.pageable&&this._initpager)this._initpager();this._arrange();this.tableheight=null;var f=this;var e=
function(){if(f.content){f.content[0].scrollTop=0;f.content[0].scrollLeft=0}if(f.gridcontent){f.gridcontent[0].scrollLeft=0;f.gridcontent[0].scrollTop=0}};this.content.bind("mousedown",function(){e()});this.content.bind("scroll",function(j){e();return false});if(!this.showfilterrow){if(!this.showstatusbar&&!this.showtoolbar)this.host.addClass("jqx-disableselect");this.content.addClass("jqx-disableselect")}if(this.enablebrowserselection){this.content.removeClass("jqx-disableselect");this.host.removeClass("jqx-disableselect")}this.addHandler(this.host,
"loadContent",function(j){if(f.gridmenu&&f.gridmenu.width()<120){f._initmenu();f.prerenderrequired=true;f._rendercolumnheaders()}return false});if(this.width!=null&&this.width.toString().indexOf("%")!=-1||this.height!=null&&this.height.toString().indexOf("%")!=-1){this._updatesizeonwindowresize=true;b(window).bind("resize."+this.element.id,function(){var k=f.host.width();var j=f.host.height();if(f.autoheight)f._lastHeight=j;if(f._lastWidth!=k||f._lastHeight!=j)f._updatesize(f._lastWidth!=k,f._lastHeight!=
j);f._lastWidth=k;f._lastHeight=j})}if(this.renderstatusbar)this.renderstatusbar(this.statusbar);if(this.rendertoolbar)this.rendertoolbar(this.toolbar);if(this.disabled)this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.hasTransform=b.jqx.utilities.hasTransform(this.host)},_testmodules:function(){var k="";var h=this;var d=function(){if(k.length!="")k+=","};if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)){d();k+=" jqxmenu.js"}if(!this.host.jqxScrollBar){d();
k+=" jqxscrollbar.js"}if(!this.host.jqxButton){d();k+=" jqxbuttons.js"}if(!b.jqx.dataAdapter){d();k+=" jqxdata.js"}if(this.pageable&&!this.gotopage){d();k+="jqxgrid.pager.js"}if(this.filterable&&!this.applyfilters){d();k+=" jqxgrid.filter.js"}if(this.groupable&&!this._initgroupsheader){d();k+=" jqxgrid.grouping.js"}if(this.columnsresize&&!this.autoresizecolumns){d();k+=" jqxgrid.columnsresize.js"}if(this.columnsreorder&&!this.setcolumnindex){d();k+=" jqxgrid.columnsreorder.js"}if(this.sortable&&!this.sortby){d();
k+=" jqxgrid.sort.js"}if(this.editable&&!this.begincelledit){d();k+=" jqxgrid.edit.js"}if(this.showaggregates&&!this.getcolumnaggregateddata){d();k+=" jqxgrid.aggregates.js"}if(this.keyboardnavigation&&!this.selectrow){d();k+=" jqxgrid.selection.js"}if(k!=""||this.editable||this.filterable||this.pageable){var f=[];var j=function(i){switch(i){case "checkbox":if(!h.host.jqxCheckBox&&!f.checkbox){f.checkbox=true;d();k+=" jqxcheckbox.js"}break;case "numberinput":if(!h.host.jqxNumberInput&&!f.numberinput){f.numberinput=
true;d();k+=" jqxnumberinput.js"}break;case "datetimeinput":if(!h.host.jqxDateTimeInput&&!f.datetimeinput){d();f.datetimeinput=true;k+=" jqxdatetimeinput.js(requires: jqxcalendar.js, jquery.global.js)"}else if(!b.global&&!f.global){d();k+=" jquery.global.js"}else if(!h.host.jqxCalendar&&!f.calendar){d();k+=" jqxcalendar.js"}break;case "combobox":if(!h.host.jqxComboBox&&!f.combobox){d();f.combobox=true;k+=" jqxcombobox.js(requires: jqxlistbox.js)"}else if(!h.host.jqxListBox&&!f.listbox){d();f.listbox=
true;k+=" jqxlistbox.js"}break;case "dropdownlist":if(!h.host.jqxDropDownList&&!f.dropdownlist){d();f.dropdownlist=true;k+=" jqxdropdownlist.js(requires: jqxlistbox.js)"}else if(!h.host.jqxListBox&&!f.listbox){d();f.listbox=true;k+=" jqxlistbox.js"}break}};if(this.filterable||this.pageable)j("dropdownlist");for(var e=0;e<this.columns.length;e++){var g=this.columns[e].columntype;j(g);if(this.filterable&&this.showfilterrow){var g=this.columns[e].filtertype;if(g=="checkedlist"||g=="bool")j("checkbox");
if(g=="date")j("datetimeinput")}}if(k!=""){alert("Please, add references to the following module(s): "+k);this.host.remove();return true}}return false},focus:function(){this.wrapper.focus();var d=this;setTimeout(function(){d.wrapper.focus()},10);this.focused=true},hiddenParent:function(){var e=this;if(e.host.css("display")!="block")return true;var d=false;b.each(e.host.parents(),function(){if(b(this).css("display")=="none"){d=true;return false}});return d},_updatesize:function(i,h){if(this._loading)return;
var f=this;if(this.hiddenParent())return;var g=f.host.width();var e=f.host.height();if(!f._oldWidth)f._oldWidth=g;if(!f._oldHeight)f._oldHeight=e;if(f._resizeTimer)clearTimeout(f._resizeTimer);var d=b.browser.msie?10:10;f._resizeTimer=setTimeout(function(){if(g!=f._oldWidth||i==true){f._arrange();f._updatecolumnwidths();f._updatecellwidths();if(!(i==false&&f._oldWidth>g))f._renderrows(f.virtualsizeinfo)}if(e!=f._oldHeight||h==true){var k=f.groupable&&f.groups.length>0;var j=f.vScrollBar.css("visibility")!=
"visible";if(!f.autoheight){if(!k){f._arrange();f.virtualsizeinfo=f._calculatevirtualheight();if(parseInt(e)>=parseInt(f._oldHeight))f.prerenderrequired=true;f._renderrows(f.virtualsizeinfo)}else if(value>=oldvalue)f._render(true,false,false);else f.rendergridcontent(true,false);if(j&&f.vScrollBar.css("visibility")=="visible"){f._arrange();f._updatecolumnwidths();f._updatecellwidths()}}}f._oldWidth=g;f._oldHeight=e},d)},_fieldsmapping:function(){if(this.showToolbar)this._mapField("showtoolbar",this.showToolbar);
if(this.toolbarHeight)this._mapField("toolbarheight",this.toolbarHeight);if(this.pagerHeight)this._mapField("pagerHeight",this.pagerHeight);if(this.groupsHeaderHeight)this._mapField("groupsHeaderHeight",this.groupsHeaderHeight);if(this.pageSize)this._mapField("pageSize",this.pageSize);if(this.pagerHeight)this._mapField("pagerHeight",this.pagerHeight);if(this.pageSizeOptions)this._mapField("pageSizeOptions",this.pageSizeOptions);if(this.rowsHeight)this._mapField("rowsHeight",this.rowsHeight);if(this.columnsHeight)this._mapField("columnsHeight",
this.columnsHeight);if(this.groupIndentWidth)this._mapField("groupIndentWidth",this.groupIndentWidth);if(this.rowDetails)this._mapField("rowDetails",this.rowDetails);if(this.enableRowDetailsIndent)this._mapField("enableRowDetailsIndent",this.enableRowDetailsIndent);if(this.enableMouseWheel)this._mapField("enableMouseWheel",this.enableMouseWheel);if(this.initRowDetails)this._mapField("initRowDetails",this.initRowDetails);if(this.editMode)this._mapField("editMode",this.editMode);if(this.autoShowFilterIcon)this._mapField("autoShowFilterIcon",
this.autoShowFilterIcon);if(this.showFilterColumnBackground)this._mapField("showFilterColumnBackground",this.showFilterColumnBackground);if(this.showPinnedColumnBackground)this._mapField("showPinnedColumnBackground",this.showPinnedColumnBackground);if(this.showSortColumnBackground)this._mapField("showSortColumnBackground",this.showSortColumnBackground);if(this.altRows)this._mapField("altRows",this.altRows);if(this.altStart)this._mapField("altStart",this.altStart);if(this.altStep)this._mapField("altStep",
this.altStep);if(this.showRowDetailsColumn)this._mapField("showRowDetailsColumn",this.showRowDetailsColumn);if(this.groupsRenderer)this._mapField("groupsRenderer",this.groupsRenderer);if(this.groupColumnRenderer)this._mapField("groupColumnRenderer",this.groupColumnRenderer);if(this.groupsExpandedByDefault)this._mapField("groupsExpandedByDefault",this.groupsExpandedByDefault);if(this.pagerRenderer)this._mapField("pagerRenderer",this.pagerRenderer);if(this.updateDelay)this._mapField("updateDelay",this.updateDelay);
if(this.autoHeight)this._mapField("autoHeight",this.autoHeight);if(this.showHeader)this._mapField("showHeader",this.showHeader);if(this.showGroupsHeader)this._mapField("showGroupsHeader",this.showGroupsHeader);if(this.closeableGroups)this._mapField("closeableGroups",this.closeableGroups);if(this.scrollbarSize)this._mapField("scrollbarSize",this.scrollbarSize);if(this.virtualMode)this._mapField("virtualMode",this.virtualMode);if(this.columnsMenu)this._mapField("columnsMenu",this.columnsMenu);if(this.columnsResize)this._mapField("columnsResize",
this.columnsResize);if(this.columnsMenuWidth)this._mapField("columnsMenuWidth",this.columnsMenuWidth);if(this.sortToggleStates)this._mapField("sortToggleStates",this.sortToggleStates);if(this.renderGridRows)this._mapField("renderGridRows",this.renderGridRows);if(this.enableAnimations)this._mapField("enableAnimations",this.enableAnimations);if(this.enableTooltips)this._mapField("enableTooltips",this.enableTooltips);if(this.selectionMode)this._mapField("selectionMode",this.selectionMode);if(this.enableHover)this._mapField("enableHover",
this.enableHover);if(this.loadingErrorMessage)this._mapField("loadingErrorMessage",this.loadingErrorMessage);if(this.verticalScrollBarStep)this._mapField("verticalScrollBarStep",this.verticalScrollBarStep);if(this.verticalScrollBarLargeStep)this._mapField("verticalScrollBarLargeStep",this.verticalScrollBarLargeStep);if(this.horizontalScrollBarStep)this._mapField("horizontalScrollBarStep",this.horizontalScrollBarStep);if(this.horizontalScrollbarLargeStep)this._mapField("horizontalScrollbarLargeStep",
this.horizontalScrollbarLargeStep);if(this.keyboardNavigation)this._mapField("keyboardNavigation",this.keyboardNavigation)},_mapField:function(d,e){if(d==null)return false;this[d.toLowerCase()]=e},getTouches:function(d){if(d.originalEvent)if(d.originalEvent.touches&&d.originalEvent.touches.length)return d.originalEvent.touches;else if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length)return d.originalEvent.changedTouches;if(!d.touches){d.touches=new Array;d.touches[0]=d.originalEvent}return d.touches},
_updateTouchScrolling:function(){var d=this;if(d.isTouchDevice()){d.enablehover=false;if(d.gridcontent){d.gridcontent.unbind("touchstart.touchScroll");d.gridcontent.unbind("touchmove.touchScroll");d.gridcontent.unbind("touchend.touchScroll");d.gridcontent.unbind("touchcancel.touchScroll");b.jqx.mobile.touchScroll(d.gridcontent[0],d.vScrollInstance.max,function(g,f){if(d.vScrollBar.css("visibility")=="visible"){var e=d.vScrollInstance.value;d.vScrollInstance.setPosition(e+f)}if(d.hScrollBar.css("visibility")==
"visible"){var e=d.hScrollInstance.value;d.hScrollInstance.setPosition(e+g)}d._lastScroll=new Date})}}},isTouchDevice:function(){if(this.touchDevice!=undefined)return this.touchDevice;var d=b.jqx.mobile.isTouchDevice();this.touchDevice=d;if(this.touchmode==true){d=true;b.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=d}else if(this.touchmode==false)d=false;if(d&&this.touchModeStyle!=false){this.scrollbarsize=10;this.host.addClass(this.toThemeProperty("jqx-touch"));this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch"));
this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch"))}return d},toTP:function(d){return this.toThemeProperty(d)},localizestrings:function(d){this._cellscache=new Array;if(b.jqx.dataFormat)b.jqx.dataFormat.cleardatescache();if(this._loading){alert(this.loadingerrormessage);return false}if(d!=null){if(d.pagergotopagestring)this.gridlocalization.pagergotopagestring=d.pagergotopagestring;if(d.pagershowrowsstring)this.gridlocalization.pagershowrowsstring=d.pagershowrowsstring;
if(d.pagerrangestring)this.gridlocalization.pagerrangestring=d.pagerrangestring;if(d.pagernextbuttonstring)this.gridlocalization.pagernextbuttonstring=d.pagernextbuttonstring;if(d.pagerpreviousbuttonstring)this.gridlocalization.pagerpreviousbuttonstring=d.pagerpreviousbuttonstring;if(d.groupsheaderstring)this.gridlocalization.groupsheaderstring=d.groupsheaderstring;if(d.sortascendingstring)this.gridlocalization.sortascendingstring=d.sortascendingstring;if(d.sortdescendingstring)this.gridlocalization.sortdescendingstring=
d.sortdescendingstring;if(d.sortremovestring)this.gridlocalization.sortremovestring=d.sortremovestring;if(d.groupbystring)this.gridlocalization.groupbystring=d.groupbystring;if(d.groupremovestring)this.gridlocalization.groupremovestring=d.groupremovestring;if(d.firstDay)this.gridlocalization.firstDay=d.firstDay;if(d.days)this.gridlocalization.days=d.days;if(d.months)this.gridlocalization.months=d.months;if(d.AM)this.gridlocalization.AM=d.AM;if(d.PM)this.gridlocalization.PM=d.PM;if(d.patterns)this.gridlocalization.patterns=
d.patterns;if(d.percentsymbol)this.gridlocalization.percentsymbol=d.percentsymbol;if(d.currencysymbol)this.gridlocalization.currencysymbol=d.currencysymbol;if(d.currencysymbolposition)this.gridlocalization.currencysymbolposition=d.currencysymbolposition;if(d.decimalseparator)this.gridlocalization.decimalseparator=d.decimalseparator;if(d.thousandsseparator)this.gridlocalization.thousandsseparator=d.thousandsseparator;if(d.filterclearstring)this.gridlocalization.filterclearstring=d.filterclearstring;
if(d.filterstring)this.gridlocalization.filterstring=d.filterstring;if(d.filtershowrowstring)this.gridlocalization.filtershowrowstring=d.filtershowrowstring;if(d.filterselectallstring)this.gridlocalization.filterselectallstring=d.filterselectallstring;if(d.filterchoosestring)this.gridlocalization.filterchoosestring=d.filterchoosestring;if(d.filterorconditionstring)this.gridlocalization.filterorconditionstring=d.filterorconditionstring;if(d.filterandconditionstring)this.gridlocalization.filterandconditionstring=
d.filterandconditionstring;if(d.filterstringcomparisonoperators)this.gridlocalization.filterstringcomparisonoperators=d.filterstringcomparisonoperators;if(d.filternumericcomparisonoperators)this.gridlocalization.filternumericcomparisonoperators=d.filternumericcomparisonoperators;if(d.filterdatecomparisonoperators)this.gridlocalization.filterdatecomparisonoperators=d.filterdatecomparisonoperators;if(d.filterbooleancomparisonoperators)this.gridlocalization.filterbooleancomparisonoperators=d.filterbooleancomparisonoperators;
if(d.emptydatastring)this.gridlocalization.emptydatastring=d.emptydatastring;if(d.filterselectstring)this.gridlocalization.filterselectstring=d.filterselectstring;if(this._initpager)this._initpager();if(this._initgroupsheader)this._initgroupsheader();if(this._initmenu)this._initmenu();if(d.validationstring)this.gridlocalization.validationstring=d.validationstring;if(this.filterable&&this.showfilterrow)if(this._updatefilterrow){for(var e in this._filterrowcache)b(this._filterrowcache[e]).remove();
this._filterrowcache=[];this._updatefilterrow()}if(this.showaggregates&&this.refresheaggregates)this.refresheaggregates();this._renderrows(this.virtualsizeinfo)}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October",
"November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",
d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",
sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)",
"starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",
emptydatastring:"No data to display",filterselectstring:"Select Filter"}},_initmenu:function(){var q=this;if(this.host.jqxMenu){if(this.gridmenu){if(this.filterable)if(this._destroyfilterpanel)this._destroyfilterpanel();this.gridmenu.jqxMenu("destroy");this.gridmenu.remove()}this.menuitemsarray=new Array;this.gridmenu=b('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"></div>');this.host.append(this.gridmenu);var u=b("<ul></ul>");var h='<div class="jqx-grid-sortasc-icon"></div>';
var s=b("<li>"+h+this.gridlocalization.sortascendingstring+"</li>");var x='<div class="jqx-grid-sortdesc-icon"></div>';var v=b("<li>"+x+this.gridlocalization.sortdescendingstring+"</li>");var m='<div class="jqx-grid-sortremove-icon"></div>';var j=b("<li>"+m+this.gridlocalization.sortremovestring+"</li>");var i='<div class="jqx-grid-groupby-icon"></div>';var p=b("<li>"+i+this.gridlocalization.groupbystring+"</li>");var f=b("<li>"+i+this.gridlocalization.groupremovestring+"</li>");var d=b('<li type="separator"></li>');
var t=b('<li class="filter" style="height: 170px;" ignoretheme="true"><div class="filter"></div></li>');var l=this.gridlocalization.sortascendingstring.length;var r=this.gridlocalization.sortascendingstring;if(this.gridlocalization.sortdescendingstring.length>l){l=this.gridlocalization.sortdescendingstring.length;r=this.gridlocalization.sortdescendingstring}if(this.gridlocalization.sortremovestring.length>l){l=this.gridlocalization.sortremovestring.length;r=this.gridlocalization.sortremovestring}if(this.groupable&&
this._initgroupsheader&&this.showgroupmenuitems){if(this.gridlocalization.groupbystring.length>l){l=this.gridlocalization.groupbystring.length;r=this.gridlocalization.groupbystring}if(this.gridlocalization.groupremovestring.length>l){l=this.gridlocalization.groupremovestring.length;r=this.gridlocalization.groupremovestring}}var w=200;r=b.trim(r).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var g=b("<span>"+r+"</span>");g.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(g);w=g.outerWidth()+
60;g.remove();var e=0;if(this.sortable&&this._togglesort&&this.showsortmenuitems){u.append(s);this.menuitemsarray[0]=s[0];u.append(v);this.menuitemsarray[1]=v[0];u.append(j);this.menuitemsarray[2]=j[0];e=3}if(this.groupable&&this._initgroupsheader&&this.showgroupmenuitems){u.append(p);this.menuitemsarray[3]=p[0];u.append(f);this.menuitemsarray[4]=f[0];e+=2}var k=e*27+3;var o=true;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems)if(this._initfilterpanel){this.menuitemsarray[5]=t[0];
this.menuitemsarray[6]=t[0];u.append(d);u.append(t);k+=176;if(b.browser.msie&&b.browser.version<8)k+=20;var n=b(t).find("div:first");w+=20;this._initfilterpanel(this,n,"",w);o=false;this.removeHandler(b(document),"click.menu"+q.element.id,q._closemenuafterclick,q);this.addHandler(b(document),"click.menu"+q.element.id,q._closemenuafterclick,q)}else alert("jqxgrid.filter.js is not loaded.");this.gridmenu.append(u);if(b.browser.msie&&b.browser.version<8&&this.filterable){b("#listBoxfilter1"+this.element.id).css("z-index",
4990);b("#listBoxfilter2"+this.element.id).css("z-index",4990);b("#listBoxfilter3"+this.element.id).css("z-index",4990);b("#gridmenu"+this.element.id).css("z-index",5E3);b("#gridmenu"+this.element.id).bind("initialized",function(){b("#menuWrappergridmenu"+q.element.id).css("z-index",4980)})}if(this.menuitemsarray[0]==undefined)k=65;this.addHandler(this.gridmenu,"keydown",function(C){if(C.keyCode==27)q.gridmenu.jqxMenu("close");else if(C.keyCode==13&&q.filterable)if(q._buildfilter){var B=b(b.find("#filter1"+
q.element.id)).jqxDropDownList("container").css("display")=="block";var A=b(b.find("#filter2"+q.element.id)).jqxDropDownList("container").css("display")=="block";var y=b(b.find("#filter3"+q.element.id)).jqxDropDownList("container").css("display")=="block";var D=b(b.find("#filterclearbutton"+q.element.id)).hasClass("jqx-fill-state-focus");if(D){var z=b.data(document.body,"contextmenu"+q.element.id).column;q._clearfilter(q,q.element,z);q.gridmenu.jqxMenu("close")}else if(!B&&!A&&!y){var z=b.data(document.body,
"contextmenu"+q.element.id).column;q.gridmenu.jqxMenu("close");q._buildfilter(q,t,z)}}});if(this.popupwidth!="auto")w=this.popupwidth;this.gridmenu.jqxMenu({width:w,height:k,autoCloseOnClick:o,autoOpenPopup:false,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});if(this.filterable)this.gridmenu.jqxMenu("_setItemProperty",t[0].id,"closeOnClick",false);this._handlemenueevents()}else this.columnsmenu=false},_arrangemenu:function(){var i=this.gridlocalization.sortascendingstring.length;
var d=this.gridlocalization.sortascendingstring;if(this.gridlocalization.sortdescendingstring.length>i){i=this.gridlocalization.sortdescendingstring.length;d=this.gridlocalization.sortdescendingstring}if(this.gridlocalization.sortremovestring.length>i){i=this.gridlocalization.sortremovestring.length;d=this.gridlocalization.sortremovestring}if(this.groupable&&this._initgroupsheader){if(this.gridlocalization.groupbystring.length>i){i=this.gridlocalization.groupbystring.length;d=this.gridlocalization.groupbystring}if(this.gridlocalization.groupremovestring.length>
i){i=this.gridlocalization.groupremovestring.length;d=this.gridlocalization.groupremovestring}}var e=200;d=b.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");var f=b("<span>"+d+"</span>");f.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(f);e=f.outerWidth()+60;f.remove();var g=0;if(this.sortable&&this._togglesort&&this.showsortmenuitems)g=3;if(this.groupable&&this._initgroupsheader&&this.showgroupmenuitems)g+=2;var h=g*27+3;if(this.filterable&&this.showfiltermenuitems)if(this._initfilterpanel){h+=
176;e+=20;if(b.browser.msie&&b.browser.version<8)h+=20}if(this.menuitemsarray[0]==undefined)h=65;if(this.popupwidth!="auto")e=this.popupwidth;this.gridmenu.jqxMenu({width:e,height:h})},_closemenuafterclick:function(e){var h=e!=null?e.data:this;var f=false;if(e.target.className.indexOf("filter")!=-1)return;if(e.target.className.indexOf("jqx-grid-cell")!=-1){h.gridmenu.jqxMenu("close");return}var d=h.host.offset();var j=e.pageX;var i=e.pageY;b.each(b(e.target).parents(),function(){if(this.id!=null&&
this.id.indexOf("filter")!=-1){f=true;return false}if(this.className.indexOf("filter")!=-1){f=true;return false}if(this.className.indexOf("jqx-grid-cell")!=-1){h.gridmenu.jqxMenu("close");return false}if(this.className.indexOf("jqx-grid-column")!=-1){h.gridmenu.jqxMenu("close");return false}});if(f)return;try{var l=b(b.find("#filter1"+h.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(new Date-l<100)return;var k=b(b.find("#filter3"+h.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;
if(new Date-k<100)return}catch(g){}h.gridmenu.jqxMenu("close")},_handlemenueevents:function(){var d=this;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(e){d._closemenu()});this.removeHandler(this.gridmenu,"itemclick");this.addHandler(this.gridmenu,"itemclick",function(h){var g=h.args;for(var e=0;e<d.menuitemsarray.length;e++){var j=d.menuitemsarray[e];if(g==j){if(b(g).attr("ignoretheme")!=undefined)return;var k=b.data(document.body,"contextmenu"+d.element.id);
var f=k.column;if(d.filterable)d.gridmenu.jqxMenu("close");if(k!=null)switch(e){case 0:d.sortby(f.datafield,"ascending",null);break;case 1:d.sortby(f.datafield,"descending",null);break;case 2:d.sortby(f.datafield,null,null);break;case 3:d.addgroup(f.datafield);break;case 4:d.removegroup(f.datafield);break;case 5:var l=b(d.menuitemsarray[6]);b(l).css("display","block");break;case 7:break}break}}})},getdatainformation:function(){var d=this.dataview.totalrecords;if(this.summaryrows)d+=this.summaryrows.length;
return{rowscount:d,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var e=
this;this.hiddens=new Array;var d=this.hiddenboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.hiddens[h]=this.hidden}})},_updaterowheights:function(){var e=this;this.heights=new Array;var d=this.heightboundrows;b.each(d,function(g){if(this.index!=undefined){var f=this.index;var h=e.getrowvisibleindex(g);e.heights[h]=this.height}})},_updaterowdetails:function(){var d=this;this.details=new Array;var e=this.detailboundrows;b.each(e,function(g){if(this.index!=
undefined){var f=this.index;var h=d.getrowvisibleindex(g);d.details[h]=this.details}})},_getmenuitembyindex:function(d){if(d==undefined)return null;return this.menuitemsarray[d]},_closemenu:function(){if(this._hasOpenedMenu){if(this.gridmenu!=null)this.gridmenu.jqxMenu("close");var g=b.data(document.body,"contextmenu"+this.element.id);var e=16;if(g!=null&&this.autoshowcolumnsmenubutton){if(this.enableanimations){b(g.columnsmenu).animate({"margin-left":0},"fast",function(){b(g.columnsmenu).css("display",
"none")});g.column.iconscontainer.animate({"margin-left":-32},"fast")}else{b(g.columnsmenu).css("display","none");g.column.iconscontainer.css("margin-left",-32)}b.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=false;var i=this._getmenuitembyindex(5);if(i){var h=b(i).find("#filter1"+this.element.id);var d=b(i).find("#filter2"+this.element.id);var f=b(i).find("#filter3"+this.element.id);h.jqxDropDownList("hideListBox");d.jqxDropDownList("hideListBox");f.jqxDropDownList("hideListBox")}}},
scrolloffset:function(e,d){if(e==null||d==null||e==undefined||d==undefined)return;this.vScrollBar.jqxScrollBar("setPosition",e);this.hScrollBar.jqxScrollBar("setPosition",d)},scrollleft:function(d){if(d==null||d==undefined)return;this.hScrollBar.jqxScrollBar("setPosition",d)},scrolltop:function(d){if(d==null||d==undefined)return;this.vScrollBar.jqxScrollBar("setPosition",d)},beginupdate:function(){this._updating=true;this._datachanged=false},endupdate:function(){this.resumeupdate()},resumeupdate:function(){this._updating=
false;if(this._datachanged==true){var d=this.vScrollInstance.value;this.render(true,true,false);this._datachanged=false;if(d!=0&&d<this.vScrollInstance.max)this.scrolltop(d)}else{this.rendergridcontent(true);this._renderrows(this.virtualsizeinfo)}},updating:function(){return this._updating},showloadelement:function(){if(this.renderloadelement)this.dataloadelement.html(this.renderloadelement());b(this.dataloadelement).css("visibility","visible");b(this.dataloadelement).css("display","block")},hideloadelement:function(){b(this.dataloadelement).css("visibility",
"hidden");b(this.dataloadelement).css("display","none")},databind:function(e,f){if(this.host.css("display")=="block")if(this.autoshowloadelement){b(this.dataloadelement).css("visibility","visible");b(this.dataloadelement).css("display","block");this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height())}if(!this._initgroupsheader&&this.groups.length>0)this.groups=new Array;var d=this;if(e==null)e=new Array;if(!e.recordstartindex)e.recordstartindex=0;if(!e.recordendindex)e.recordendindex=
0;if(e.loadallrecords==undefined||e.loadallrecords==null)e.loadallrecords=true;if(e.sortcomparer==undefined||e.sortcomparer==null)e.sortcomparer=null;if(e.filter==undefined||e.filter==null)e.filter=null;if(e.sort==undefined||e.sort==null)e.sort=null;if(e.data==undefined||e.data==null)e.data=null;this.dataview=this.dataview||new b.jqx.dataview;if(b.jqx.dataview.sort)b.extend(this.dataview,new b.jqx.dataview.sort);if(b.jqx.dataview.grouping)b.extend(this.dataview,new b.jqx.dataview.grouping);this.dataview.suspendupdate();
this.dataview.pageable=this.pageable;this.dataview.groupable=this.groupable;this.dataview.groups=this.groups;this.dataview.virtualmode=this.virtualmode;this.dataview.grid=this;this.dataview._clearcaches();if(!d.initializedcall){if(this.pageable)if(e._source){if(e._source.pagenum!=undefined)this.dataview.pagenum=e._source.pagenum;if(e._source.pagesize!=undefined){this.pagesize=e._source.pagesize;this.dataview.pagesize=e._source.pagesize}else{this.dataview.pagesize=e._source.pagesize;if(this.dataview.pagesize==
undefined)this.dataview.pagesize=this.pagesize}}if(e.sortcolumn)this.dataview.sortfield=e.sortcolumn;if(e.sortdirection)this.dataview.sortfielddirection=e.sortdirection;if(this.autoloadstate)if(this.loadstate)this.loadstate()}this._loading=true;this.dataview.update=function(){d._loading=false;if(d.dataview.isupdating())d.dataview.resumeupdate(false);if(d.pageable&&d.pagerrenderer)if(d._initpager)d._initpager();else alert("jqxgrid.pager.js is not loaded.");if(d.source.sortcolumn&&d.sortby&&!d.virtualmode){d.render();
d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer);d.source.sortcolumn=null}else{var h=d.vScrollInstance.value;var i=d.hScrollInstance.value;var j=d.source.datatype;if(j!="local"||j!="array"){var k=d.virtualsizeinfo==null||d.virtualsizeinfo!=null&&d.virtualsizeinfo.virtualheight==0;if(!d.virtualmode||k||d.virtualmode&&d.pageable)if(d.initializedcall==true&&f=="pagechanged")d._render(true,true,false,false);else d._render(true,true,true,d.menuitemsarray&&!d.virtualmode);else if(d.virtualmode&&
d.dataview.totalrecords==0&&d.dataview.filters.length>0)d._render(true,true,true,d.menuitemsarray&&!d.virtualmode);else{d._pagescache=new Array;d._renderrows(d.virtualsizeinfo)}if(d.vScrollInstance.value!=h&&h<=d.vScrollInstance.max)d.vScrollInstance.setPosition(h);if(d.hScrollInstance.value!=i&&i<=d.hScrollInstance.max)d.hScrollInstance.setPosition(i)}}if(d.autoshowloadelement){b(d.dataloadelement).css("visibility","hidden");b(d.dataloadelement).css("display","none")}if(d.pageable)if(d.pagerrightbutton){d.pagerrightbutton.jqxButton({disabled:false});
d.pagerleftbutton.jqxButton({disabled:false});d.pagershowrowscombo.jqxDropDownList({disabled:false})}d._raiseEvent(11);if(!d.initializedcall){d._raiseEvent(0);d.initializedcall=true;if(d.ready)d.ready();if(d.autoloadstate)if(d.loadstate)d._loadselectionandcolumnwidths();if(d.width!=null&&d.width.toString().indexOf("%")!=-1||d.height!=null&&d.height.toString().indexOf("%")!=-1)d._updatesize(true);if(d.host.css("visibility")=="hidden"){var g=b.browser.msie&&b.browser.version<8;if(d.vScrollBar.css("visibility")==
"visible")d.vScrollBar.css("visibility","inherit");if(d.hScrollBar.css("visibility")=="visible")d.hScrollBar.css("visibility","inherit");d._intervalTimer=setInterval(function(){if(d.host.css("visibility")=="visible"){d._updatesize(true);clearInterval(d._intervalTimer)}},100)}}else d._updateTouchScrolling()};this.dataview.databind(e);if(this.dataview.isupdating())this.dataview.resumeupdate(false);this._initializeRows()},scrollto:function(e,d){if(undefined!=e)this.hScrollInstance.setPosition(e);if(undefined!=
d)this.vScrollInstance.setPosition(d)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(h){var e=this._getpagesize();var g=Math.floor(h/e);if(!this._pageviews[g]&&!this.pageable)this._updatepageviews();var n=false;if(this.pageable&&this.gotopage&&!this.virtualmode)if(this.dataview.pagenum!=g){this.gotopage(g);n=true}var l=this.vScrollInstance.value;var m=this._gettableheight()-this.rowsheight;var d=e*(h/e-g);d=Math.round(d);
if(this._pageviews[g]){var k=this._pageviews[g].top;var j=k+d*this.rowsheight;if(this.rowdetails)for(var f=e*g;f<h;f++)if(this.details[f])if(this.details[f].rowdetailshidden==false)j+=this.details[f].rowdetailsheight;if(j<l){this.scrolltop(j);n=true}else if(j>l+m+2){this.scrolltop(j-m);n=true}}else if(this.pageable){var j=d*this.rowsheight;if(this.rowdetails)for(var f=e*g;f<e*g+d;f++)if(this.details[f].rowdetailshidden==false)j+=this.details[f].rowdetailsheight;if(j<l||j>l+m){this.scrollto(0,j);n=
true}}return n},ensurecellvisible:function(h,d){var i=this.hScrollBar.jqxScrollBar("value");var n=this.ensurerowvisible(h);var e=0;var m=this;if(this.columns.records){var k=i;var l=this.host.width();var j=0;var f=this.vScrollBar.css("visibility")=="visible"?20:0;var g=false;b.each(this.columns.records,function(){if(this.datafield==d){var o=0;if(e+this.width>k+l-f){o=e+this.width-k-l+f;m.scrollleft(o+k);g=true}else if(e<=k){o=e-this.width;m.scrollleft(o);g=true}if(j==0){m.scrollleft(0);g=true}else if(j==
m.columns.records.length-1)if(m.hScrollBar.css("visibility")=="visible"){m.scrollleft(m.hScrollBar.jqxScrollBar("max"));g=true}return false}j++;e+=this.width});if(!g)m.scrollleft(k)}return n},setrowheight:function(e,d){if(this._loading){alert(this.loadingerrormessage);return false}if(e==null||d==null)return false;this.heightboundrows[e]={index:e,height:d};e=this.getrowvisibleindex(e);if(e<0)return false;if(this.rows.records[e])this.rows.records[e].height=d;else{row=new a(this,null);row.height=d;this.rows.replace(e,
row)}this.heights[e]=d;this.rendergridcontent(true);return true},getrowheight:function(d){if(d==null)return null;d=this.getrowvisibleindex(d);if(d<0)return false;if(this.rows.records[d])return this.rows.records[d].height},setrowdetails:function(e,f,d,h){if(e==undefined||e==null||e<0)return;var g=this.dataview.generatekey();this.detailboundrows[e]={index:e,details:{rowdetails:f,rowdetailsheight:d,rowdetailshidden:h,key:g}};e=this.getrowvisibleindex(e);if(e<0)return false;return this._setrowdetails(e,
f,d,h,g)},getcolumn:function(d){var e=null;if(this.columns.records)b.each(this.columns.records,function(){if(this.datafield==d){e=this;return false}});return e},_getcolumnindex:function(e){var d=-1;if(this.columns.records)b.each(this.columns.records,function(){d++;if(this.datafield==e)return false});return d},_getcolumnat:function(d){var e=this.columns.records[d];return e},_getprevvisiblecolumn:function(e){var d=this;while(e>0){e--;var f=d.getcolumnat(e);if(!f)return null;if(!f.hidden)return f}return null},
_getnextvisiblecolumn:function(e){var d=this;while(e<this.columns.records.length){e++;var f=d.getcolumnat(e);if(!f)return null;if(!f.hidden)return f}return null},getcolumnat:function(d){if(!isNaN(d)){var e=this.columns.records[d];return e}return null},_getcolumn:function(d){var e=null;b.each(this._columns,function(){if(this.datafield==d||this.dataField==d){e=this;return false}});return e},_setcolumnproperty:function(e,g,h){if(e==null||g==null||h==null)return null;var f=this.getcolumn(e);if(f==null)return;
f[g]=h;var d=this._getcolumn(e);if(d!=null)d[g]=h;this._cellscache=new Array;switch(g){case "text":this.prerenderrequired=true;this._rendercolumnheaders();if(this._groupsheader())if(this._initgroupsheader)this._initgroupsheader();break;case "hidden":case "hideable":case "renderer":case "cellsrenderer":case "align":case "cellsalign":case "cellsformat":case "pinned":case "contenttype":case "resizable":case "filterable":case "groupable":case "editable":case "cellclass":case "class":this.prerenderrequired=
true;this.rendergridcontent(true);if(this.updating())return false;this._renderrows(this.virtualsizeinfo);break;case "width":case "minwidth":case "maxwidth":if(this.updating())return false;this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo);break}},_getcolumnproperty:function(d,f){if(d==null||f==null)return null;var e=this.getcolumn(d);return e[f]},setcolumnproperty:function(d,e,f){this._setcolumnproperty(d,e,f)},getcolumnproperty:function(d,e){return this._getcolumnproperty(d,
e)},hidecolumn:function(d){this._setcolumnproperty(d,"hidden",true)},showcolumn:function(d){this._setcolumnproperty(d,"hidden",false)},iscolumnvisible:function(d){return!this._getcolumnproperty(d,"hidden")},pincolumn:function(d){this._setcolumnproperty(d,"pinned",true)},unpincolumn:function(d){this._setcolumnproperty(d,"pinned",false)},iscolumnpinned:function(d){return this._getcolumnproperty(d,"pinned")},_setrowdetails:function(j,d,n,h,e){if(n==0)n=100;if(j==null||n==null)return false;if(e!=null)this.details[j]=
{rowdetails:d,rowdetailsheight:n,rowdetailshidden:h,detailskey:e};else{var m=this.details[j]!=null?this.details[j].detailskey:null;var l={rowdetails:d,rowdetailsheight:n,rowdetailshidden:h,detailskey:m};var k=this;for(var g=0;g<this.detailboundrows.length;g++)if(this.detailboundrows[g]!=undefined){var f=this.detailboundrows[g];if(f.details.key==m){f.details.rowdetailsheight=l.rowdetailsheight;f.details.rowdetailshidden=l.rowdetailshidden;f.details.rowdetails=l.rowdetails;break}}this.details[j]=l}this.rendergridcontent(true);
return true},getrowdetails:function(d){if(d==null)return false;d=this.getrowvisibleindex(d);return this._getrowdetails(d)},_getrowdetails:function(d){if(d==null)return false;if(d<0)return false;if(this.details[d])return this.details[d];if(this.rowdetailstemplate)return this.rowdetailstemplate},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==null)return false;d=this.getrowvisibleindex(d);if(d<
0)return false;var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,false)},hiderowdetails:function(d){if(this._loading){alert(this.loadingerrormessage);return false}d=this.getrowvisibleindex(d);if(d<0)return false;var e=this._getrowdetails(d);return this._setrowdetailsvisibility(d,e,true)},_togglerowdetails:function(g){var d=g.visibleindex;var e=this._getrowdetails(d);if(e!=null){var f=!e.rowdetailshidden;return this._setrowdetailsvisibility(d,e,f)}return false},_setrowdetailsvisibility:function(e,
f,h){if(this.rowdetailstemplate){if(!this.details)this.details=new Array;if(!this.details[e]){this.details[e]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var g=this.dataview.generatekey();this.details[e].detailskey=g;this.detailboundrows[e]={index:e,details:this.details[e]}}}if(f!=null)this.details[e].rowdetailshidden=h;else return false;var d=this.details[e];if(h)this._raiseEvent(21,
{rowindex:e,details:d.rowdetails,height:d.rowdetailsheight});else this._raiseEvent(20,{rowindex:e,details:d.rowdetails,height:d.rowdetailsheight});return this._setrowdetails(e,d.rowdetails,d.rowdetailsheight,d.rowdetailshidden)},getrowvisibleindex:function(d){if(d==undefined||d==null||d<0)return false;if(this.virtualmode){var e=this.dataview.loadedrecords[d];if(e==undefined)return-1;return e.visibleindex}var e=this.dataview.bounditems[d];if(e==undefined)return-1;return e.visibleindex},hiderow:function(d){if(this._loading){alert(this.loadingerrormessage);
return false}if(d==undefined||d==null||d<0)return false;if(d==null)return false;this.hiddenboundrows[d]={index:d,hidden:true};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,true)},showrow:function(d){if(this._loading){alert(this.loadingerrormessage);return false}if(d==undefined||d==null||d<0)return false;if(d==null)return false;this.hiddenboundrows[d]={index:d,hidden:false};d=this.getrowvisibleindex(d);return this._setrowvisibility(d,false)},isrowhiddenat:function(d){if(d==null)return null;
d=this.getrowvisibleindex(d);if(this.rows.records[d])return this.rows.records[d].hidden},_setrowvisibility:function(d,f,e){if(d==null)return false;this.hiddens[d]=f;if(e==undefined||e){this.rendergridcontent(true);return true}return false},_loadrows:function(){if(!this._pageviews[this.dataview.pagenum]&&!this.pageable)return;var p=!this.pageable?this._pageviews[this.dataview.pagenum].top:0;if(!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined)return null;if(!this.virtualsizeinfo)return;
var t=this;var l=new Array;var q=new Array;var e=t.groupable&&t.groups.length>0;var j=this.dataview.totalrecords;var o=this.virtualsizeinfo.virtualheight;var s=0;this.rows.beginupdate();var f=this.dataview.pagesize;if(this.pageable&&e)f=this.dataview.rows.length;for(var g=0;g<f;g++){if(g>=this.dataview.rows.length)break;var k=this.dataview.rows[g];var u=null;if(!t.rows.records[k.visibleindex])u=new a(t,k);else{u=t.rows.records[k.visibleindex];u.setdata(k)}u.hidden=this.hiddens[u.visibleindex];if(this.rowdetailstemplate){u.rowdetails=
this.rowdetailstemplate.rowdetails;u.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight;u.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden}var d=this.details[u.visibleindex];if(d){u.rowdetails=d.rowdetails;u.rowdetailsheight=d.rowdetailsheight;u.rowdetailshidden=d.rowdetailshidden}else if(!this.rowdetailstemplate)u.rowdetails=null;if(e&&this.pageable&&u.parentbounddata!=null){var r=l[u.parentbounddata.uniqueid];if(r!=null){var n=this._findgroupstate(r.uniqueid);if(this._setsubgroupsvisibility)this._setsubgroupsvisibility(this,
u.parentbounddata,!n,false);u.hidden=this.hiddens[u.visibleindex]}if(r!=null&&r!=undefined){u.parentrow=r;r.subrows[r.subrows.length++]=u}}if(u.hidden)continue;var h=k.visibleindex;if(!this.heights[h])this.heights[h]=this.rowsheight;u.height=this.heights[h];if(this.rowdetails)if(u.rowdetails&&!u.rowdetailshidden)u.height+=u.rowdetailsheight;l[u.uniqueid]=u;q[s++]=u;u.top=p;p+=u.height;var m=h;t.rows.replace(m,u)}if(this.autoheight&&this.autorowheight)this._pageviews[0].height=p;this.rows.resumeupdate();
if(q.length>0)this._pagescache[this.dataview.pagenum]=q},_gettableheight:function(){if(this.tableheight!=undefined)return this.tableheight;var e=this.host.height();if(this.columnsheader){var d=this.columnsheader.outerHeight();if(!this.showheader)d=0}e-=d;if(this.hScrollBar[0].style.visibility=="visible")e-=this.hScrollBar.outerHeight();if(this.pageable)e-=this.pager.outerHeight();if(this._groupsheader())e-=this.groupsheader.outerHeight();if(this.showtoolbar)e-=this.toolbarheight;if(this.showstatusbar)e-=
this.statusbarheight;if(e>0){this.tableheight=e;return e}return this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;var d=Math.round(e/this.rowsheight);return d}if(this.autoheight||this.autorowheight){if(this.dataview.totalrows==0)return 1;return this.dataview.totalrows}if(this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0)return this.dataview.totalrows;return 100},
_calculatevirtualheight:function(){var n=this;var e=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gettableheight();var p=Math.round(e/this.rowsheight);this.heights=new Array;this.hiddens=new Array;this.details=new Array;this.expandedgroups=new Array;this.hiddenboundrows=new Array;this.heightboundrows=new Array;this.detailboundrows=new Array;var h=Math.max(this.dataview.totalrows,this.dataview.totalrecords);if(this.pageable){h=this.pagesize;if(this.pagesize>Math.max(this.dataview.totalrows,
this.dataview.totalrecords)&&this.autoheight)h=Math.max(this.dataview.totalrows,this.dataview.totalrecords)}var l=h*this.rowsheight;var m=0;var j=0;var k=0;var f=this._getpagesize();var d=f*this.rowsheight;var g=0;if(h+f>0)while(g<=h+f){m+=d;if(g-f<h&&g>=h){var o=g-h;if(o>0){k-=d;this._pageviews[j-1]={top:k,height:d-o*this.rowsheight}}break}else this._pageviews[j++]={top:k,height:d};k=m;g+=f}this.vScrollBar.jqxScrollBar({value:0});if(l>realheight&&!this.autoheight){this.vScrollBar.css("visibility",
"visible");this.vScrollBar.jqxScrollBar({max:l-realheight})}else this.vScrollBar.css("visibility","hidden");this.dataview.pagesize=f;this.dataview.updateview();return{visiblerecords:p,virtualheight:l}},_updatepageviews:function(){if(this.updating())return;this._pagescache=new Array;this._pageviews=new Array;this.tableheight=null;var t=this;var d=Math.round(this.host.height())+2*this.rowsheight;var u=Math.round(d/this.rowsheight);var m=Math.max(this.dataview.totalrows,this.dataview.totalrecords);var p=
m*this.rowsheight;var s=0;var f=0;var n=0;var o=0;var h=0;var g=this._getpagesize();if(!this.pageable)for(var l=0;l<m;l++){var r={index:l,height:this.heights[l],hidden:this.hiddens[l],details:this.details[l]};if(this.heights[l]==undefined){this.heights[l]=this.rowsheight;r.height=this.rowsheight}if(this.hiddens[l]==undefined){this.hiddens[l]=false;r.hidden=false}if(this.details[l]==undefined)this.details[l]=null;if(r.height!=t.rowsheight){p-=t.rowsheight;p+=r.height}if(r.hidden)p-=r.height;else{f+=
r.height;var j=0;if(this.rowdetails){if(this.rowdetailstemplate)if(!r.details)r.details=this.rowdetailstemplate;if(r.details&&r.details.rowdetails&&!r.details.rowdetailshidden){j=r.details.rowdetailsheight;f+=j;p+=j}}s+=r.height+j}h++;if(h>=g||l==m-1){this._pageviews[n++]={top:o,height:f};f=0;o=s;h=0}}else{if(this._updatepagedview)p=this._updatepagedview(m,p,0);if(this.autoheight)this._arrange()}var e=this._gettableheight();if(p>e){if(this.pageable&&this.gotopage){p=this._pageviews[0].height;if(p<
0)p=this._pageviews[0].height}if(this.vScrollBar.css("visibility")!="visible")this.vScrollBar.css("visibility","visible");if(p<=e||this.autoheight)this.vScrollBar.css("visibility","hidden");if(p-e>0){var q=p-e;this.vScrollBar.jqxScrollBar({max:q})}else this.vScrollBar.jqxScrollBar({value:0,max:p})}else{if(!this._loading)this.vScrollBar.css("visibility","hidden");this.vScrollBar.jqxScrollBar({value:0})}this._arrange();if(this.autoheight)u=Math.round(this.host.height()/this.rowsheight);this.virtualsizeinfo=
{visiblerecords:u,virtualheight:p}},updatebounddata:function(d){this.databind(this.source,d)},refreshdata:function(){this._refreshdataview();this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var f=this._pageviews[0].height;var e=this._gettableheight();if(f>e){if(this.pageable&&this.gotopage){f=this._pageviews[0].height;if(f<0)f=this._pageviews[0].height}if(this.vScrollBar.css("visibility")!="visible")this.vScrollBar.css("visibility","visible");if(f<=e||this.autoheight)this.vScrollBar.css("visibility",
"hidden");if(f-e>0){var d=f-e;this.vScrollBar.jqxScrollBar({max:d})}else this.vScrollBar.jqxScrollBar({value:0,max:f})}else{this.vScrollBar.css("visibility","hidden");this.vScrollBar.jqxScrollBar({value:0})}}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(d){if(d!=true)if(this.virtualsizeinfo!=null){this._cellscache=new Array;this._renderrows(this.virtualsizeinfo);this._updatesize()}},render:function(){this._render(true,true,true,true)},clear:function(){this.databind(null);
this.render()},_render:function(g,h,f,d){if(this.dataview==null)return;if(this.editcell!=null&&this.endcelledit)this.endcelledit(this.editcell.row,this.editcell.column,true,false);this.validationpopup=null;this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=h!=undefined?h:true;if(f){if(!this._requiresupdate)if(d!=false)this._initmenu();if(this.columns==null)this.columns=new b.jqx.collection(this.element);else this._initializeColumns()}this.tableheight=null;this._pagescache=
new Array;this._pageviews=new Array;this.visiblerows=new Array;this.hittestinfo=new Array;if(this._requiresupdate){this._clearcaches();if(d!=false)this._initmenu()}this.virtualsizeinfo=null;this.prerenderrequired=true;if(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)if(this.gridcontent){this._rowdetailscache=new Array;this._rowdetailselementscache=new Array;this.detailboundrows=new Array;this.details=new Array;this.gridcontent.html("");this.gridcontent=null}if(f){if(this.filterrow)this.filterrow.detach();
this.content.html("");this.columnsheader=this.columnsheader||b('<div style="overflow: hidden;"></div>');this.columnsheader.remove();this.columnsheader.addClass(this.toTP("jqx-widget-header"));this.columnsheader.addClass(this.toTP("jqx-grid-header"))}else if(this.gridcontent)this.gridcontent.html("");if(!this.showheader)this.columnsheader.css("display","none");else if(this.columnsheader)this.columnsheader.css("display","block");this.gridcontent=this.gridcontent||b('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');
this.gridcontent.remove();if(this.showfilterrow&&this.filterable)this.columnsheader.height(this.columnsheight+this.filterrowheight);else this.columnsheader.height(this.columnsheight);this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();if(this._initgroupsheader)this._initgroupsheader();this.selectionarea=this.selectionarea||b("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>");this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea"));
this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.content.append(this.selectionarea);this.tableheight=null;this.rendergridcontent(false,f);if(this.groups.length>0&&this.groupable){this.suspendgroupevents=true;if(this.collapseallgroups)if(!this.groupsexpandedbydefault){this.collapseallgroups(false);this._updatescrollbarsafterrowsprerender()}else this.expandallgroups(false);this.suspendgroupevents=false}if(this.pageable&&this.updatepagerdetails){this.updatepagerdetails();
if(this.autoheight){this._updatepageviews();if(this.autorowheight)this._renderrows(this.virtualsizeinfo)}}this._updateTouchScrolling();if(this.showaggregates&&this._updateaggregates)this._updateaggregates();var e=b.jqx.utilities.getBrowser();if(e.browser=="msie"&&parseInt(e.version)<9){this._overlayElement=b("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>");this.content.prepend(this._overlayElement);this._overlayElement.css("background","white");this._overlayElement.css("z-index",
9999999);this._overlayElement.css("opacity",1.0E-4)}if(this.rendered)this.rendered("full")},rendergridcontent:function(d,f){if(this.updating())return false;if(d==undefined||d==null)d=false;this._requiresupdate=d;var h=this.prerenderrequired;if(this.prerenderrequired)this._arrange();var g=this;var f=f;if(f==null||f==undefined)f=true;this.tableheight=null;g.virtualsizeinfo=g.virtualsizeinfo||g._calculatevirtualheight();if(g.pageable&&!g.autoheight)if(g.dataview.totalrows<g.pagesize)g._requiresupdate=
true;if(f)g._rendercolumnheaders();else{if(this._rendersortcolumn)this._rendersortcolumn();if(this._renderfiltercolumn)this._renderfiltercolumn()}g._renderrows(g.virtualsizeinfo);if(this.gridcontent[0].scrollTop!=0)this.gridcontent[0].scrollTop=0;if(this.gridcontent[0].scrollLeft!=0)this.gridcontent[0].scrollLeft=0;if(h){var e=this.tableheight;this._arrange();if(e!=this.tableheight&&this.autoheight)g._renderrows(g.virtualsizeinfo)}if(this.autosavestate)if(this.initializedcall!=null)if(this.savestate)this.savestate();
return true},_updatecolumnwidths:function(){var j=this.host.width();var d=j;var i="";if(this.columns==undefined||this.columns.records==undefined)return;var l=this;b.each(this.columns.records,function(m,n){if(!(this.hidden&&this.hideable))if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){var n=0;var o=l.vScrollBar[0].style.visibility=="hidden"?0:l.scrollbarsize+5;n=parseInt(this.width)*d/100;if(this._percentagewidth!=undefined)n=parseInt(this._percentagewidth)*(d-o)/100;
if(n<this.minwidth&&this.minwidth!="auto")n=this.minwidth;if(n>this.maxwidth&&this.maxwidth!="auto")n=this.maxwidth;j-=Math.round(n)}else if(this.width!="auto"&&!this._width)j-=this.width;else i+=this.text});var e=this._gettableheight();if(!this.autoheight)if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>e)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var k=this.dataview.loadedrootgroups.length*this.rowsheight;if(k>
e){j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}else if(this.vScrollBar.css("visibility")=="visible"){j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}}else{j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}else{j-=this.scrollbarsize+5;d-=this.scrollbarsize+5}var g=this.columnsheader.find("#columntable"+this.element.id);if(g.length==0)return;var h=g.find(".jqx-grid-column-header");var f=0;b.each(this.columns.records,function(n,r){var p=b(h[n]);var m=false;var q=this.width;if(this.width.toString().indexOf("%")!=
-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined)q=parseInt(this._percentagewidth)*d/100;else q=parseInt(this.width)*d/100;m=true}if(this.width!="auto"&&!this._width&&!m){if(parseInt(p[0].style.width)!=this.width)p.width(this.width)}else if(m){if(q<this.minwidth&&this.minwidth!="auto"){q=this.minwidth;this.width=q}if(q>this.maxwidth&&this.maxwidth!="auto"){q=this.maxwidth;this.width=q}if(parseInt(p[0].style.width)!=q){p.width(q);this.width=q}}else{var o=Math.round(j*(this.text.length/
i.length));if(isNaN(o))o=this.minwidth;if(o<0){$element=b("<span>"+this.text+"</span>");b(document.body).append($element);o=10+$element.width();$element.remove()}if(o<this.minwidth)o=this.minwidth;if(o>this.maxwidth)o=this.maxwidth;this._width="auto";this.width=o;p.width(this.width)}if(parseInt(p[0].style.left)!=f)p.css("left",f);if(!(this.hidden&&this.hideable))f+=this.width;this._requirewidthupdate=true});this.columnsheader.width(2+f);g.width(this.columnsheader.width());if(this.showfilterrow&&this.filterrow){this.filterrow.width(this.columnsheader.width());
this._updatefilterrowui()}},_rendercolumnheaders:function(){var w=this;if(!this.prerenderrequired){if(this._rendersortcolumn)this._rendersortcolumn();if(this._renderfiltercolumn)this._renderfiltercolumn();if(this.showfilterrow&&this.filterrow){this.filterrow.width(this.columnsheader.width());this._updatefilterrowui()}return}this._columnsbydatafield=new Array;this.columnsheader.find("#columntable"+this.element.id).remove();var g=b('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');
g[0].cells=new Array;var l=0;var h=0;var p="";var r=this.host.width();var e=r;var v=new Array;var q=new Array;b.each(this.columns.records,function(j,k){if(!(this.hidden&&this.hideable))if(this.width!="auto"&&!this._width)if(this.width<this.minwidth&&this.minwidth!="auto")r-=this.minwidth;else if(this.width>this.maxwidth&&this.maxwidth!="auto")r-=this.maxwidth;else if(this.width.toString().indexOf("%")!=-1){var k=0;k=parseInt(this.width)*e/100;if(k<this.minwidth&&this.minwidth!="auto")k=this.minwidth;
if(k>this.maxwidth&&this.maxwidth!="auto")k=this.maxwidth;r-=k}else{if(typeof this.width=="string")this.width=parseInt(this.width);r-=this.width}else p+=this.text;if(this.pinned)v[v.length]=this;else q[q.length]=this});for(var o=0;o<v.length;o++)this.columns.replace(o,v[o]);for(var m=0;m<q.length;m++)this.columns.replace(v.length+m,q[m]);var u=this.headerZIndex;var d=w.groupable?w.groups.length:0;if(this.rowdetails&&this.showrowdetailscolumn)d++;var n=w.columnsheader.height();if(this.showfilterrow)n=
this.columnsheight;var f=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>f)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var s=this.dataview.loadedrootgroups.length*this.rowsheight;if(s>f){r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}}else{r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}else if(!this.autoheight){r-=this.scrollbarsize+5;e-=this.scrollbarsize+5}b.each(this.columns.records,
function(N,K){var P=w.toTP("jqx-grid-column-header")+" "+w.toTP("jqx-widget-header");var y=b('<div style="position: absolute; height: 100%;" class="'+P+'"></div>');this.uielement=y;if(this.classname!=""&&this.classname)y.addClass(this.classname);y.css("z-index",u--);var F=this.width;var H=false;if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined)F=parseInt(this._percentagewidth)*e/100;else F=parseInt(this.width)*e/100;H=true}if(this.width!=
"auto"&&!this._width&&!H){if(F<this.minwidth&&this.minwidth!="auto")F=this.minwidth;if(F>this.maxwidth&&this.maxwidth!="auto")F=this.maxwidth;y.width(F)}else if(H){if(F<this.minwidth&&this.minwidth!="auto")F=this.minwidth;if(F>this.maxwidth&&this.maxwidth!="auto")F=this.maxwidth;this._percentagewidth=this.width;y.width(F);this.width=F}else{var J=Math.round(r*(this.text.length/p.length));if(isNaN(J))J=this.minwidth;if(J<0){$element=b("<span>"+this.text+"</span>");b(document.body).append($element);
J=10+$element.width();$element.remove()}if(J<this.minwidth)J=this.minwidth;if(J>this.maxwidth)J=this.maxwidth;this._width="auto";this.width=J;F=this.width;y.width(this.width)}if(this.hidden&&this.hideable)y.css("display","none");var k=b('<div style="height: 100%; width: 100%;"></div>');var B=b('<div style="display: none; left: 100%; top: 0%; position: absolute;"></div>');var E=b('<div style="width: 100%; height:100%;"></div>');E.addClass(w.toTP("jqx-grid-column-menubutton"));E.appendTo(B);B.height(n);
if(!w.enableanimations)B.css("margin-left",-16);var G=b('<div class="sortasc" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');var I=b('<div class="sortdesc" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');var M=b('<div class="filtericon" style="float: right; display: none; width: 16px;"><div style="width: 100%; height:100%;"></div></div>');if(!w.autoshowfiltericon&&this.filterable)M.css("display",
"block");G.height(n);I.height(n);M.height(n);G.find("div").addClass(w.toTP("jqx-grid-column-sortascbutton"));I.find("div").addClass(w.toTP("jqx-grid-column-sortdescbutton"));M.find("div").addClass(w.toTP("jqx-grid-column-filterbutton"));this.sortasc=G[0];this.sortdesc=I[0];this.filtericon=M[0];this.columnsmenu=B[0];g[0].cells[N]=y[0];B.width(w.columnsmenuwidth);var A=w.columnsmenu;var x=false;var L=false;if(w.groupable&&d>0&&l<d||w.rowdetails&&l<d){l++;A&=false;this.sortable=false;this.editable=false;
L=true}else{var C=this.renderer!=null?this.renderer(this.text,this.align):w._rendercolumnheader(this.text,this.align);if(C==null)C=w._rendercolumnheader(this.text,this.align);if(this.renderer!=null)C=b(C);A&=true;x=true}k.append(C);if(C!=null){var D=b('<div class="iconscontainer" style="margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"></div>');B.addClass(w.toTP("jqx-widget-header"));D.height(n);k.append(D);D.append(M);D.append(G);D.append(I);I.addClass(w.toTP("jqx-widget-header"));
G.addClass(w.toTP("jqx-widget-header"));M.addClass(w.toTP("jqx-widget-header"));this.iconscontainer=D}if(A){w._handlecolumnsmenu(w,k,y,B,this);if(!this.menu)B.hide()}y.append(k);g.append(y);if(w.groupable&&x){y[0].id=w.dataview.generatekey();if(w._handlecolumnstogroupsdragdrop)w._handlecolumnstogroupsdragdrop(this,y);else alert("jqxgrid.grouping.js is not loaded")}if(w.columnsreorder&&this.draggable)w._handlecolumnsdragreorder(this,y);var O=this;w.addHandler(y,"click",function(i){if(w.sorttogglestates>
0&&w._togglesort)w._togglesort(O);i.preventDefault();w._raiseEvent(7,{column:O.getcolumnproperties(),datafield:O.datafield,originalEvent:i})});if(O.resizable&&w.columnsresize&&!L){var z=false;var j="mousemove";if(w.isTouchDevice()){z=true;j="touchstart"}w.addHandler(y,j,function(Q){var i=parseInt(Q.pageX);var S=5;var U=parseInt(y.offset().left);if(w.hasTransform)U=b.jqx.utilities.getOffset(y).left;if(w._handlecolumnsresize){if(z){var R=w.getTouches(Q);var T=R[0];i=T.pageX;S=40;if(i>=U+O.width-S){w.resizablecolumn=
{columnelement:y,column:O};y.css("cursor","col-resize")}else{y.css("cursor","");w.resizablecolumn=null}return true}if(i>=U+O.width-S){if(i<=U+O.width+S){w.resizablecolumn={columnelement:y,column:O};y.css("cursor","col-resize");return false}}else{y.css("cursor","");w.resizablecolumn=null}}})}y.css("left",h);if(!(this.hidden&&this.hideable))h+=F;if(O.rendered){O.rendered(C);if(D!=null)D.hide()}});if(h>0)this.columnsheader.width(2+h);else this.columnsheader.width(h);this.columnsrow=g;w.columnsheader.append(g);
if(this.showfilterrow&&this._updatefilterrow){g.height(this.columnsheight);if(!this.filterrow){var t=b("<div></div>");t[0].id="filterrow."+this.element.id;t.height(this.filterrowheight);this.filterrow=t}this.columnsheader.append(this.filterrow);this._updatefilterrow()}g.width(h);if(this._handlecolumnsdragdrop)this._handlecolumnsdragdrop();if(this._handlecolumnsreorder)this._handlecolumnsreorder();if(this._rendersortcolumn)this._rendersortcolumn();if(this._renderfiltercolumn)this._renderfiltercolumn();
if(this._handlecolumnsresize)this._handlecolumnsresize()},_handlecolumnsmenu:function(n,e,f,h,k){n.dragmousedown=null;h[0].id=n.dataview.generatekey();e.append(h);f[0].columnsmenu=h[0];k.element=f[0];var j=16;var m=function(){if(!k.menu)return false;if(!n.resizing)if(n.menuitemsarray.length>0)if(!n.enableanimations){h.css("display","block");k.iconscontainer.css("margin-left","-48px")}else{h.css("display","block");h.stop();k.iconscontainer.stop();h.css("margin-left","0px");h.animate({"margin-left":-j},
"fast",function(){h.css("display","block")});k.iconscontainer.animate({"margin-left":-48},"fast")}};n.addHandler(f,"mouseenter",function(o){if(k.menu&&n.autoshowcolumnsmenubutton)m()});if(!n.autoshowcolumnsmenubutton){h.css("display","block");k.iconscontainer.css("margin-left","-48px");h.css({"margin-left":-j})}n.addHandler(f,"mouseleave",function(o){if(n.menuitemsarray.length>0&&k.menu){var p=b.data(document.body,"contextmenu"+n.element.id);if(p!=undefined&&h[0].id==p.columnsmenu.id)return;if(n.autoshowcolumnsmenubutton)if(!n.enableanimations){h.css("display",
"none");k.iconscontainer.css("margin-left","-32px")}else{h.css("margin-left",-j);h.stop();k.iconscontainer.stop();h.animate({"margin-left":0},"fast",function(){h.css("display","none")});k.iconscontainer.animate({"margin-left":-32},"fast")}}});var i=true;var d="";var g=b(k.filtericon);n.addHandler(h,"mousedown",function(o){i=!b.data(n.gridmenu[0],"contextMenuOpened"+n.gridmenu[0].id);d=b.data(document.body,"contextmenu"+n.element.id);if(d!=null)d=d.column.datafield});n.addHandler(g,"mousedown",function(o){i=
!b.data(n.gridmenu[0],"contextMenuOpened"+n.gridmenu[0].id);d=b.data(document.body,"contextmenu"+n.element.id);if(d!=null)d=d.column.datafield});var l=function(){if(!k.menu)return false;var r=h.offset();var x=h.height();if(!i){i=true;if(d==k.datafield){n._closemenu();return false}}var u=n.host.offset();if(n.hasTransform){u=b.jqx.utilities.getOffset(n.host);r=b.jqx.utilities.getOffset(h)}if(u.left+n.host.width()>parseInt(r.left)+n.gridmenu.width())n.gridmenu.jqxMenu("open",r.left,r.top+x);else n.gridmenu.jqxMenu("open",
h.width()+r.left-n.gridmenu.width(),r.top+x);if(n.gridmenu.width()<100)n._arrangemenu();n._hasOpenedMenu=true;var v=n._getmenuitembyindex(0);var o=n._getmenuitembyindex(1);var z=n._getmenuitembyindex(2);var w=n._getmenuitembyindex(3);var p=n._getmenuitembyindex(4);var A=n._getmenuitembyindex(5);if(v!=null&&o!=null&&z!=null){var s=k.sortable&&n.sortable;n.gridmenu.jqxMenu("disable",v.id,!s);n.gridmenu.jqxMenu("disable",o.id,!s);n.gridmenu.jqxMenu("disable",z.id,!s);if(k.datafield)if(n.sortcolumn==
k.datafield){var t=n.getsortinformation();if(s)if(t.sortdirection.ascending)n.gridmenu.jqxMenu("disable",v.id,true);else n.gridmenu.jqxMenu("disable",o.id,true)}else n.gridmenu.jqxMenu("disable",z.id,true)}if(w!=null&&p!=null)if(!n.groupable||!k.groupable){n.gridmenu.jqxMenu("disable",p.id,true);n.gridmenu.jqxMenu("disable",w.id,true)}else if(n.groups&&n.groups.indexOf(k.datafield)!=-1){n.gridmenu.jqxMenu("disable",w.id,true);n.gridmenu.jqxMenu("disable",p.id,false)}else{n.gridmenu.jqxMenu("disable",
w.id,false);n.gridmenu.jqxMenu("disable",p.id,true)}if(A!=null){n._updatefilterpanel(n,A,k);var q=0;if(n.sortable&&n._togglesort&&n.showsortmenuitems)q+=3;if(n.groupable&&n.addgroup&&n.showgroupmenuitems)q+=2;var y=q*27+3;if(b.browser.msie&&b.browser.version<8){y+=20;b(A).height(190)}if(n.filterable&&n.showfiltermenuitems)if(!k.filterable){n.gridmenu.height(y);b(A).css("display","none")}else{n.gridmenu.height(y+176);b(A).css("display","block")}}b.data(document.body,"contextmenu"+n.element.id,{column:k,
columnsmenu:h[0]})};n.addHandler(g,"click",function(o){if(!k.menu)return false;if(!n.showfilterrow){m();l()}return false});n.addHandler(h,"click",function(o){if(!k.menu)return false;l();return false})},_removecolumnhandlers:function(h){var e=this;var f=b(h.element);if(f.length>0){e.removeHandler(f,"mouseenter");e.removeHandler(f,"mouseleave");var g=b(h.filtericon);e.removeHandler(g,"mousedown");e.removeHandler(g,"click");e.removeHandler(f,"click");if(f[0].columnsmenu){var d=b(f[0].columnsmenu);e.removeHandler(d,
"click");e.removeHandler(d,"mousedown")}}},_rendercolumnheader:function(e,f){if(this.enableellipsis){if(f=="center")return b('<div style="overflow: hidden; text-overflow: ellipsis; text-align: center;"><a href="#">'+e+"</a></div>");var d=b('<a style="overflow: hidden; text-overflow: ellipsis; text-align: '+f+';" href="#">'+e+"</a>");return d}if(f=="center")return b('<div style="text-align: center; margin-top: 5px;"><a href="#">'+e+"</a></div>");var d=b('<a style="float: '+f+';" href="#">'+e+"</a>");
return d},_renderrows:function(d){var g=this;if((this.pageable||this.groupable)&&this.autoheight)if(this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length<this.dataview.rows.length)g.prerenderrequired=true;if(!this.pageable&&this.autoheight&&(this.virtualmode||this.unboundmode)){var i=this.source.totalrecords;if(!isNaN(i))if(this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=i)g.prerenderrequired=true}g._prerenderrows(d);if(g._requiresupdate){g._requiresupdate=false;
g._updatepageviews()}var f=function(){if(g._loading)return;if(g.WinJS)MSApp.execUnsafeLocalFunction(function(){g._rendervisualrows()});else g._rendervisualrows()};if(this.virtualmode){var h=function(){if(g.rendergridrows){var m=g._startboundindex;if(m==undefined)m=0;var k=m+1+g.dataview.pagesize;if(m!=null&&k!=null){var l=g.source._source?true:false;var n=!l?g.source.recordstartindex:g.source._source.recordstartindex;if(n!=m){if(!l){g.source.recordstartindex=m;g.source.recordendindex=k}else{g.source._source.recordstartindex=
m;g.source._source.recordendindex=k}g.updatebounddata()}}}};if(this.loadondemand){h();this.loadondemand=false}var e=this._browser==undefined?this._isIE10():this._browser;if(this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling())f();else if(e||b.browser.mozilla||navigator&&navigator.userAgent.indexOf("Safari")!=-1){if(this._scrolltimer!=null)clearTimeout(this._scrolltimer);this._scrolltimer=setTimeout(function(){f()},5)}else f()}else{if(navigator&&navigator.userAgent.indexOf("Chrome")==
-1&&navigator.userAgent.indexOf("Safari")!=-1)this.updatedelay=1;var e=this._browser==undefined?this._isIE10():this._browser;if(e)this.updatedelay=5;if(b.browser.mozilla&&this.updatedelay==0&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())){j=setTimeout(function(){f()},0.01);return}if(this.updatedelay==0)f();else{var j=b.data(document.body,"Grid"+this.element.id);if(j!=null)clearTimeout(j);if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()){j=setTimeout(function(){f()},
this.updatedelay);b.data(document.body,"Grid"+this.element.id,j)}else{b.data(document.body,"Grid"+this.element.id,null);f()}}}},_renderhorizontalscroll:function(){var k=this.hScrollInstance;var n=k.value;var f=parseInt(n);if(this.table==null)return;var t=this.table[0].rows.length;var s=this.columnsrow;var m=this.groupable&&this.groups.length>0?this.groups.length:0;var r=this.columns.records.length-m;var h=this.columns.records;var q=this.dataview.rows.length==0;if(q)for(var l=0;l<m+r;l++){var g=h[l];
if(!g.pinned){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}else for(var o=0;o<t;o++){var d=this.table[0].rows[o];for(var l=0;l<m+r;l++){var e=d.cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}}}if(this.showaggregates)if(this.statusbar[0].cells)for(var l=0;l<m+r;l++){var e=this.statusbar[0].cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=
-f+"px"}}}}if(this.showfilterrow&&this.filterrow)if(this.filterrow[0].cells)for(var l=0;l<m+r;l++){var e=this.filterrow[0].cells[l];if(e!=undefined){var g=h[l];if(!g.pinned){e.style.marginLeft=-f+"px";if(o==0){var p=s[0].cells[l];p.style.marginLeft=-f+"px"}}}}if(this.editcell&&!this.editrow)if(this._showcelleditor&&this.editcell.editing)this._showcelleditor(this.editcell.row,this.getcolumn(this.editcell.column),this.editcell.element,this.editcell.init)},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var d=
0;d<this._rowdetailselementscache.length;d++)b(this._rowdetailselementscache[d]).css("display","none")},_getvisualcolumnsindexes:function(e,m,i,l,d){if(this.rowdetails)return{start:0,end:i+l};var f=0;var k=-1;var g=i+l;var n=false;if(!d)for(var h=0;h<i+l;h++){var o=h;if(!n)if(this.columns.records[h].pinned)n=true;if(!this.columns.records[h].hidden)f+=this.columns.records[h].width;if(f>=e&&k==-1)k=h;if(f>m+e){g=h;break}}g++;if(g>i+l)g=i+l;if(k==-1||n)k=0;return{start:k,end:g}},_rendervisualrows:function(){if(!this.virtualsizeinfo)return;
var M=this.vScrollInstance;var m=this.hScrollInstance;var f=M.value;var w=m.value;var l=parseInt(f);var h=parseInt(w);var t=this._gettableheight();var B=this._hostwidth!=undefined?this._hostwidth:this.host.width();if(this.hScrollBar[0].style.visibility=="visible")t+=this.rowsheight;var x=this.groupable&&this.groups.length>0;this.visiblerows=new Array;this.hittestinfo=new Array;if(this.editcell&&this.editrow==undefined)this._hidecelleditor();if(this.editrow!=undefined)this._hideeditors();if(this.virtualmode&&
!this.pageable)this._pagescache=new Array;if(this._pagescache.length==0){this.dataview.updateview();this._loadrows()}if(this.vScrollBar[0].style.visibility!="visible")l=0;if(!this.pageable){var D=this._findvisiblerow(l,this._pageviews);if(D==-1){this._clearvisualrows();this._renderemptyrow();this._updaterowdetailsvisibility();return}if(D!=this.dataview.pagenum){this.dataview.pagenum=D;this.dataview.updateview();this._loadrows()}else if(!this._pagescache[this.dataview.pagenum])this._loadrows()}var W=
this.groupable&&this.groups.length>0?this.groups.length:0;var o=this.columns.records.length-W;var P=this._findvisiblerow(l,this._pagescache[this.dataview.pagenum]);var E=this._pagescache[this.dataview.pagenum];var I=P;if(I<0)I=0;var R=0;var O=0;var H=0;var e=0;var J=this.virtualsizeinfo.visiblerecords;var G=this.groupable?this.groups.length:0;var v=this.toTP("jqx-grid-cell");if(x)v=" "+this.toTP("jqx-grid-group-cell");if(this.isTouchDevice())v+=" "+this.toTP("jqx-touch");if(this.autorowheight)v+=
" jqx-grid-cell-wrap";var F=this.rowsheight;var A=I;var V=this._rendercell;var p=true;var n=this._getvisualcolumnsindexes(h,B,W,o,x);var d=n.start;var N=n.end;if(this.autoheight&&this.autorowheight)this._oldpageviewheight=this._pageviews[0].height;if(I>=0){this._updaterowdetailsvisibility();this._startboundindex=E!=null?E[I].bounddata.boundindex:0;for(var k=0;k<J&&O<J;k++){var Q=E!=undefined?E[I+k]:null;if(Q==null){I=-k;if(this._pagescache[this.dataview.pagenum+1]){E=this._pagescache[this.dataview.pagenum+
1];this.dataview.pagenum++}else{var q=this._pageviews.length;do if(this.dataview.pagenum<this._pageviews.length-1){this.dataview.pagenum++;E=undefined;if(this._pageviews[this.dataview.pagenum].height>0){this.dataview.updateview();this._loadrows();E=this._pagescache[this.dataview.pagenum]}}else{E=undefined;break}while(E==undefined&&this.dataview.pagenum<q)}if(E!=undefined)Q=E[I+k]}if(Q!=null){if(Q.hidden)continue;this._endboundindex=this._startboundindex+k;if(k==0){var j=Math.abs(l-Q.top);this.table[0].style.top=
-j+"px";e=-j}var g=this.table[0].rows[O];if(!g)continue;if(parseInt(g.style.height)!=Q.height)g.style.height=parseInt(Q.height)+"px";H+=Q.height;var L=this.rowdetails&&Q.rowdetails;var s=!Q.rowdetailshidden;if(L&&s){g.style.height=parseInt(Q.height-Q.rowdetailsheight)+"px";J++}var C=this._isrowselected(p,Q);for(var K=d;K<N;K++){var T=K;this._rendervisualcell(V,v,C,L,s,x,G,g,Q,T,O)}if(this.autorowheight&&this.autoheight){var F=this.rowsheight;for(var K=d;K<N;K++)F=Math.max(F,8+b(g.cells[K].firstChild).height());
g.style.height=parseInt(F)+"px";this.heights[this._startboundindex+k]=F;if(L&&s)F+=Q.rowdetailsheight;Q.height=F}if(Q.group!=undefined&&this._rendergroup)this._rendergroup(G,g,Q,W,o,O);this.visiblerows[this.visiblerows.length]=Q;this.hittestinfo[this.hittestinfo.length]={row:Q,visualrow:g,details:false};if(L&&s){O++;var g=this.table[0].rows[O];this._renderrowdetails(v,g,Q,W,o,O);this.visiblerows[this.visiblerows.length]=Q;this.hittestinfo[this.hittestinfo.length]={row:Q,visualrow:g,details:true}}if(H+
e>=t)break}else{cansetheight=true;this._clearvisualrow(h,x,O,W,o);if(H+R+e<=t)R+=F}O++}this._horizontalvalue=h;if(R>0)if(this.vScrollBar[0].style.visibility=="visible"){var U=parseInt(this.table.css("top"));var z=this._pageviews[this._pageviews.length-1];var r=M.max;var y=z.top+z.height-t;if(this.hScrollBar.css("visibility")=="visible")y+=this.scrollbarsize+20;if(r!=y)if(y>=0){M.max=y;M.setPosition(M.max)}}}if(this.autoheight&&this.autorowheight){this._pagescache=new Array;this._loadrows();this.visiblerows=
new Array;for(var S=0;S<this._pagescache[this.dataview.pagenum].length;S++){var u=this._pagescache[this.dataview.pagenum][S];this.visiblerows[this.visiblerows.length]=u;var L=this.rowdetails&&u.rowdetails;var s=!u.rowdetailshidden;if(L&&s)this.visiblerows[this.visiblerows.length]=u}this._arrange()}this._renderemptyrow()},_renderemptyrow:function(){if(this._loading)return;if(this.dataview.records.length==0&&this.showemptyrow){var j=false;if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>
0){var h=this.table[0].rows[0];for(var e=0;e<h.cells.length;e++){var d=b(h.cells[e]);if(d.css("display")!="none"&&!j){j=true;d[0].innerHTML="";var f=b("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");f.text(this.gridlocalization.emptydatastring);d.append(f);f.css("left",-f.width()/2);f.css("top",this._gettableheight()/2-f.height()/2);var g=Math.abs(parseInt(this.table[0].style.top));if(isNaN(g))g=0;b(h).height(this._gettableheight()+g);d.css("margin-left",
"0px");d.width(this.host.width())}d.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords;var f=this.hScrollInstance;var d=f.value;var g=parseInt(d);var i=this.groupable&&this.groups.length>0;for(var h=0;h<e;h++)this._clearvisualrow(g,i,h,0,this.columns.records.length)},_isrowselected:function(f,e){var d=false;if(f&&e.bounddata!=null)if(this.selectionmode!="singlerow"){if(this.selectedrowindexes.indexOf(e.bounddata.boundindex)!=
-1)d=true}else if(e.bounddata.boundindex==this.selectedrowindex)d=true;return d},_rendervisualcell:function(w,i,n,k,q,u,j,o,d,h,p){var f=null;var g=this.columns.records[h];if(g.hidden){var e=o.cells[h];e.innerHTML="";return}cellvalue=this._getcellvalue(g,d);var e=o.cells[h];var t=i;if(g.cellclassname!=""&&g.cellclassname)t+=" "+g.cellclassname;if(this.selectionmode.indexOf("cell")!=-1)if(this.selectedcells[d.boundindex+"_"+g.datafield])n=true;else n=false;var m=this.showsortcolumnbackground&&this.sortcolumn&&
g.datafield==this.sortcolumn;if(m)t+=" "+this.toTP("jqx-grid-cell-sort");if(g.filter&&this.showfiltercolumnbackground)t+=" "+this.toTP("jqx-grid-cell-filter");if(g.pinned&&this.showpinnedcolumnbackground)t+=" "+this.toTP("jqx-grid-cell-pinned");if(this.altrows&&d.group==undefined){var v=d.visibleindex;if(v>=this.altstart)if((this.altstart+v)%(1+this.altstep)==0){if(!m)t+=" "+this.toTP("jqx-grid-cell-alt");else t+=" "+this.toTP("jqx-grid-cell-sort-alt");if(g.filter&&this.showfiltercolumnbackground)t+=
" "+this.toTP("jqx-grid-cell-filter-alt");if(g.pinned&&this.showpinnedcolumnbackground)t+=" "+this.toTP("jqx-grid-cell-pinned-alt")}}if(h<=j)if(u||this.rowdetails){var r=b(e);var l=this.columns.records[h].width;if(parseInt(e.style.width)!=l)r.width(l)}var s=true;if(this.rowdetails&&k){if(q&&!u)t+=" "+this.toTP("jqx-grid-details-cell");else if(u)t+=" "+this.toTP("jqx-grid-group-details-cell");if(this.showrowdetailscolumn)if(d.group==undefined&&h==j){if(q)t+=" "+this.toTP("jqx-grid-group-expand");else t+=
" "+this.toTP("jqx-grid-group-collapse");s=false}}if(n&&s){t+=" "+this.toTP("jqx-grid-cell-selected");t+=" "+this.toTP("jqx-fill-state-pressed")}if(e.className!=t)e.className=t;if(d.group!=undefined){cellvalue="";e.title="";e.innerHTML="";return}w(this,g,d,cellvalue,e)},_rendercell:function(j,f,m,l,e){var g=m.uniqueid+"_"+f.visibleindex;if(j.editcell&&j.editrow==undefined){if(j.editcell.row==m.boundindex&&j.editcell.column==f.datafield){j.editcell.element=e;if(j.editcell.editing)if(j._showcelleditor){j._showcelleditor(j.editcell.row,
f,j.editcell.element,j.editcell.init);return}}}else if(j.editrow!=undefined)if(j.editrow==m.boundindex){j.editcells[f.datafield].element=e;if(j.editcells[f.datafield].editing)if(j._showcelleditor){j._showcelleditor(j.editcells[f.datafield].row,f,e,j.editcells[f.datafield].init);return}}var i=j._cellscache[g];if(i){if(f.columntype=="checkbox"){if(j.host.jqxCheckBox){if(l==="")l=null;var h=e.innerHTML.toString().length==0;if(e.checkbox&&!j.groupable&&!h){e.checkboxrow=m.boundindex;if(l=="")l=false;
if(l=="1")l=true;if(l=="0")l=false;if(l==1)l=true;if(l==0)l=false;if(l=="true")l=true;if(l=="false")l=false;e.checkbox.jqxCheckBox("_setState",l)}else j._rendercheckboxcell(j,e,f,m,l);return}}else if(f.columntype=="button")if(j.host.jqxButton){if(l=="")l=false;if(f.cellsrenderer!=null)l=f.cellsrenderer(m.boundindex,f.datafield,l,k,f.getcolumnproperties());if(e.button&&!j.groupable){e.buttonrow=m.boundindex;e.button.val(l)}else j._renderbuttoncell(j,e,f,m,l);return}var d=i.element;if(e.innerHTML!=
d){e.innerHTML=d;if(j.enabletooltips)e.title=i.title}return}if(j.enabletooltips){if(f.cellsformat!="")if(b.jqx.dataFormat)if(b.jqx.dataFormat.isNumber(l))l=b.jqx.dataFormat.formatnumber(l,f.cellsformat,j.gridlocalization);else if(b.jqx.dataFormat.isDate(l))l=b.jqx.dataFormat.formatdate(l,f.cellsformat,j.gridlocalization);e.title=l}if(f.columntype=="checkbox"){j._rendercheckboxcell(j,e,f,m,l);j._cellscache[g]={element:"",title:l};return}else if(f.columntype=="button"){if(f.cellsrenderer!=null)l=f.cellsrenderer(m.boundindex,
f.datafield,l,k,f.getcolumnproperties());j._renderbuttoncell(j,e,f,m,l);j._cellscache[g]={element:"",title:l};return}else if(f.columntype=="number")l=m.visibleindex;var k=j._defaultcellsrenderer(l,f);var d=null;if(f.cellsrenderer!=null)d=f.cellsrenderer(m.boundindex,f.datafield,l,k,f.getcolumnproperties());else d=k;if(d==null)d=k;if(j.WinJS)WinJS.Utilities.setInnerHTMLUnsafe(e,d);else e.innerHTML=d;j._cellscache[g]={element:e.innerHTML,title:l};return true},_isIE10:function(){if(this._browser==undefined){var d=
b.jqx.utilities.getBrowser();if(d.browser=="msie"&&parseInt(d.version)>9)this._browser=true;else this._browser=false}return this._browser},_rendercheckboxcell:function(f,d,e,j,g){if(f.host.jqxCheckBox){var i=b(d);if(g==="")g=null;if(g=="1")g=true;if(g=="0")g=false;if(g==1)g=true;if(g==0)g=false;if(g=="true")g=true;if(g=="false")g=false;if(i.find(".jqx-checkbox").length==0){d.innerHTML='<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>';
b(d.firstChild).jqxCheckBox({hasThreeStates:e.threestatecheckbox,enableContainerClick:false,animationShowDelay:0,animationHideDelay:0,locked:true,theme:f.theme,checked:g});if(this.editable&&e.editable)b(d.firstChild).jqxCheckBox({locked:false});d.checkbox=b(d.firstChild);d.checkboxrow=j.boundindex;var h=b.data(d.firstChild,"jqxCheckBox").instance;h.updated=function(n,m,p){if(e.editable){var o=f.table[0].rows.length;var r=f._getcolumnindex(e.datafield);if(f.editrow==undefined){if(e.cellbeginedit){var q=
e.cellbeginedit(j.boundindex,e.datafield,e.columntype,!m);if(q==false){f.setcellvalue(d.checkboxrow,e.datafield,!m,true);return}}for(var l=0;l<o;l++){var k=f.table[0].rows[l].cells[r].firstChild;b(k).jqxCheckBox("destroy")}if(f.editcell&&f.editcell.validated==false)f.setcellvalue(d.checkboxrow,e.datafield,!m,true);else{f._raiseEvent(17,{rowindex:d.checkboxrow,datafield:e.datafield,value:p,columntype:e.columntype});f.setcellvalue(d.checkboxrow,e.datafield,m,true);f._raiseEvent(18,{rowindex:d.checkboxrow,
datafield:e.datafield,oldvalue:p,value:m,columntype:e.columntype})}}}}}else{d.checkboxrow=j.boundindex;b(d.firstChild).jqxCheckBox("_setState",g)}}},_renderbuttoncell:function(f,d,e,i,g){if(f.host.jqxButton){var h=b(d);if(g=="")g=false;if(h.find(".jqx-button").length==0){d.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>';b(d.firstChild).val(g);b(d.firstChild).attr("hideFocus","true");b(d.firstChild).jqxButton({theme:f.theme,
height:f.rowsheight-4,width:e.width-4});d.button=b(d.firstChild);d.buttonrow=i.boundindex;b(d.firstChild).bind("click",function(j){if(e.buttonclick)e.buttonclick(d.buttonrow,j)})}else{d.buttonrow=i.boundindex;b(d.firstChild).val(g)}}},_clearvisualrow:function(g,f,o,i,n){var m=this.toTP("jqx-grid-cell");if(f)m=" "+this.toTP("jqx-grid-group-cell");var p=this.table[0].rows;for(var k=0;k<i+n;k++)if(p[o]){var e=p[o].cells[k];if(e.className!=m)e.className=m;var d=this.columns.records[k];if(this._horizontalvalue!=
g&&!d.pinned){var h=-g;e.style.marginLeft=-g+"px"}var l=d.width;if(l<d.minwidth)l=d.minwidth;if(l>d.maxwidth)l=d.maxwidth;if(parseInt(e.style.width)!=l)b(e).width(l);if(e.title!="")e.title="";if(e.innerHTML!="")e.innerHTML=""}if(p[o])if(parseInt(p[o].style.height)!=this.rowsheight)b(p[o]).height(this.rowsheight)},_findgroupstate:function(e){var d=this._findgroup(e);if(d==null)return false;return d.expanded},_findgroup:function(e){var d=null;if(this.expandedgroups[e])return this.expandedgroups[e];
return d},_clearcaches:function(){this._columnsbydatafield=new Array;this._pagescache=new Array;this._pageviews=new Array;this._cellscache=new Array;this.heights=new Array;this.hiddens=new Array;this.hiddenboundrows=new Array;this.heightboundrows=new Array;this.detailboundrows=new Array;this.details=new Array;this.expandedgroups=new Array;this._rowdetailscache=new Array;this._rowdetailselementscache=new Array;if(b.jqx.dataFormat)b.jqx.dataFormat.cleardatescache();this.tableheight=null},_getColumnText:function(d){if(this._columnsbydatafield==
undefined)this._columnsbydatafield=new Array;if(this._columnsbydatafield[d])return this._columnsbydatafield[d];var f=d;var e=null;b.each(this.columns.records,function(){if(this.datafield==d){f=this.text;e=this;return false}});this._columnsbydatafield[d]={label:f,column:e};return this._columnsbydatafield[d]},isscrollingvertically:function(){var d=this.vScrollBar.jqxScrollBar("isScrolling");return d},_renderrowdetails:function(n,t,d,s,l,v){var x=b(t);var g=0;var p=this.rowdetails&&this.showrowdetailscolumn?
(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(var o=0;o<=l;o++){var e=b(t.cells[o]);e[0].innerHTML="";e[0].className="jqx-grid-details-cell"}var e=b(t.cells[g]);e.css("width","100%");x.height(d.rowdetailsheight);e[0].className=n;var m=d.bounddata.boundindex;var j=m+"_";if(this._rowdetailscache[j]){var q=this._rowdetailscache[j];var w=q.html;if(this.initrowdetails){if(this._rowdetailscache[j].element){var f=this._rowdetailscache[j].element;
var i=e.offset();var u=this.gridcontent.offset();var r=parseInt(i.top)-parseInt(u.top);var k=parseInt(i.left)-parseInt(u.left);b(f).css("top",r);b(f).css("left",k);b(f).css("display","block")}}else e[0].innerHTML=w;return}e[0].innerHTML="";if(!this.enablerowdetailsindent)p=0;var h='<div style="overflow: hidden; width: 100%; height: 100%; margin-left: '+p+'px;">'+d.rowdetails+"</div>";this._rowdetailscache[j]={id:t.id,html:h};if(this.initrowdetails){var f=b(h)[0];b(this.gridcontent).prepend(b(f));
b(f).css("position","absolute");b(f).width(this.host.width()-p);b(f).height(e.height());var i=e.offset();b(f).css("z-index",2E3);if(this.isTouchDevice())b(f).css("z-index",99999);var i=e.offset();var u=this.gridcontent.offset();var r=parseInt(i.top)-parseInt(u.top);var k=parseInt(i.left)-parseInt(u.left);b(f).css("top",r);b(f).css("left",k);this.content[0].scrollTop=0;this.content[0].scrollLeft=0;this.initrowdetails(m,f,this.element,this.getrowdata(m));this._rowdetailscache[j].element=f;this._rowdetailselementscache[m]=
f}else e[0].innerHTML=h},_defaultcellsrenderer:function(e,d){if(d.cellsformat!="")if(!this.enabletooltips)if(b.jqx.dataFormat)if(b.jqx.dataFormat.isDate(e))e=b.jqx.dataFormat.formatdate(e,d.cellsformat,this.gridlocalization);else if(b.jqx.dataFormat.isNumber(e))e=b.jqx.dataFormat.formatnumber(e,d.cellsformat,this.gridlocalization);if(this.enableellipsis){if(d.cellsalign=="center")return'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: 5px;">'+
e+"</div>";if(d.cellsalign=="left")return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin: 4px;">'+e+"</div>";if(d.cellsalign=="right")return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin: 4px;">'+e+"</div>"}if(d.cellsalign=="center")return'<div style="text-align: center; margin-top: 5px;">'+e+"</div>";return'<span style="margin: 4px; float: '+d.cellsalign+';">'+e+"</span>"},_getcellvalue:function(d,
f){var e=null;e=f.bounddata[d.datafield];if(e==null)e="";return e},getcell:function(h,d){if(h==null||d==null)return null;var e=parseInt(h);var g=h;var f="";if(!isNaN(e))g=this.getrowdata(e);if(g!=null)f=g[d];return this._getcellresult(f,h,d)},getrenderedcell:function(h,d){if(h==null||d==null)return null;var e=parseInt(h);var g=h;var f="";if(!isNaN(e))g=this.getrenderedrowdata(e);if(g!=null)f=g[d];return this._getcellresult(f,h,d)},_getcellresult:function(k,n,e){var f=this.getcolumn(e);if(f==null||
f==undefined)return null;var i=f.getcolumnproperties();var g=i.hidden;var d=i.width;var m=i.pinned;var h=i.cellsalign;var j=i.cellsformat;var l=this.getrowheight(n);if(l==false)return null;return{value:k,row:n,column:e,width:d,height:l,hidden:g,pinned:m,align:h,format:j}},setcellvalue:function(j,q,t,f,n){if(j==null||q==null)return false;var e=parseInt(j);var i=e;var g=j;if(!isNaN(e))g=this.getrowdata(e);var r=false;if(this.filterable&&this._initfilterpanel&&this.dataview.filters.length)r=true;if(this.virtualmode)this._pagescache=
new Array;var m="";if(g!=null&&g[q]!=t){m=g[q];if(b.jqx.dataFormat.isNumber(m)){t=new Number(t);t=parseFloat(t);if(isNaN(t))t=0}g[q]=t;var w=this.getrenderedrowdata(e,true);w[q]=t;if(r){i=g.dataindex;this.dataview.cachedrecords[g.dataindex][q]=t}}else{this._renderrows(this.virtualsizeinfo);return false}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates)if(this.source._source._localdata){var s=this.source._source._localdata()[e];this.source.suspendKO=true;
this.source._source._localdata.replace(s,b.extend({},g));this.source.suspendKO=false}if(this.sortcolumn&&this.dataview.sortby){var o=this.getsortinformation();this.dataview.clearsortdata();this.dataview.sortby(o.sortcolumn,o.sortdirection.ascending)}this._cellscache=new Array;if(this.source.updaterow&&(n==undefined||n==true)){var l=false;var v=this;var p=function(x){if(false==x)v.setcellvalue(j,q,m,true,false)};try{var k=this.getrowid(i);l=this.source.updaterow(k,g,p);if(l==undefined)l=true}catch(u){l=
false;v.setcellvalue(j,q,m,true,false);return}}var h=this.vScrollInstance.value;if(this._updating&&f==undefined)f=false;if(f==true||f==undefined){var v=this;var d=function(){if(v.pageable&&v.updatepagerdetails){v.updatepagerdetails();if(v.autoheight)v._updatepageviews()}};if(r){this.dataview.refresh();this.rendergridcontent(true,true);d()}else if(this.sortcolumn){this.dataview.reloaddata();this.rendergridcontent(true,true);d()}else if(this.groupable&&this.groups.length>0){this.dataview.updateview();
this._renderrows(this.virtualsizeinfo)}else{this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}}this.vScrollInstance.setPosition(h);if(this.showaggregates&&this._updatecolumnsaggregates)this._updatecolumnsaggregates();this._raiseEvent(19,{rowindex:j,datafield:q,newvalue:t,oldvalue:m});return true},getcellvalue:function(h,d){if(h==null||d==null)return null;var e=parseInt(h);var g=h;if(!isNaN(e))g=this.getrowdata(e);if(g!=null){var f=g[d];return f}return null},getrows:function(){var f=
this.dataview.records.length;if(this.dataview.sortdata){var g=new Array;for(var d=0;d<f;d++){var e={};e=b.extend({},this.dataview.sortdata[d].value);g[d]=e}return g}else return this.dataview.records},getrowdata:function(d){if(d==undefined)d=0;if(this.virtualmode){var e=this.dataview.records[d];return e}else if(d>=0&&d<this.dataview.bounditems.length){var e=this.dataview.records[d];return e}return null},getrenderedrowdata:function(d,f){if(d==undefined)d=0;if(this.virtualmode){var g=this.getrowvisibleindex(d);
var e=this.dataview.loadedrecords[g];return e}if(d>=0&&d<this.dataview.bounditems.length){if(this.groupable&&this.groups.length>0){var g=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[g]}else{var e=this.dataview.loadedrecords[d];if(this.pageable&&(f==undefined||f==false))var e=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+d]}return e}return null},getloadedrows:function(){return this.dataview.loadedrecords},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;
if(this.pageable){var f=[];for(var e=0;e<this.dataview.pagesize;e++){var d=this.dataview.loadedrecords[e+this.dataview.pagesize*this.dataview.pagenum];if(d==undefined)break;f.push(d)}return f}else if(this._startboundindex!=undefined&&this._endboundindex!=undefined){var f=[];for(var e=this._startboundindex;e<=this._endboundindex;e++){var d=this.dataview.loadedrecords[e];if(d==undefined)break;f.push(d)}return f}return this.dataview.loadedrecords},getrowid:function(d){if(d==undefined)d=0;if(this.virtualmode){var f=
this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[f];if(e)return e.uid}else{var e=null;if(d>=0&&d<this.dataview.bounditems.length){if(this.groupable&&this.groups.length>0){var f=this.getrowvisibleindex(d);var e=this.dataview.loadedrecords[f]}else var e=this.dataview.loadedrecords[d];if(e)return e.uid}}return null},_updateGridData:function(){var d=false;if(this.filterable&&this._initfilterpanel&&this.dataview.filters.length)d=true;if(d){this.dataview.refresh();this.render()}else if(this.sortcolumn||
this.groupable&&this.groups.length>0){this.dataview.reloaddata();this.render()}else{this._cellscache=new Array;this._pagescache=new Array;this._renderrows(this.virtualsizeinfo)}},updaterow:function(i,k,g){if(i!=undefined&&k!=undefined){var h=this;var j=false;h._datachanged=true;var e=function(o,n,s){var q=false;if(!b.isArray(n))q=o.dataview.updaterow(n,s);else{b.each(n,function(t,u){q=o.dataview.updaterow(this,s[t],false)});o.dataview.refresh()}var r=o.vScrollInstance.value;if(g==undefined||g==true)if(o._updating==
undefined||o._updating==false)o._updateGridData();if(o.showaggregates&&o._updatecolumnsaggregates)o._updatecolumnsaggregates();if(o.source&&o.source._knockoutdatasource&&!o._updateFromAdapter&&o.autokoupdates)if(o.source._source._localdata){var m=o.dataview.recordsbyid["id"+n];var p=o.dataview.records.indexOf(m);var l=o.source._source._localdata()[p];o.source.suspendKO=true;o.source._source._localdata.replace(l,b.extend({},m));o.source.suspendKO=false}o.vScrollInstance.setPosition(r);return q};if(this.source.updaterow){var d=
function(l){if(l==true||l==undefined)e(h,i,k)};try{j=this.source.updaterow(i,k,d);if(j==undefined)j=true}catch(f){j=false}}else j=e(h,i,k);return j}return false},deleterow:function(h){if(h!=undefined){this._datachanged=true;var i=false;var g=this;var e=function(k,j){var l=false;var m=k.vScrollInstance.value;if(!b.isArray(j))var l=k.dataview.deleterow(j);else{b.each(j,function(){l=k.dataview.deleterow(this,false)});k.dataview.refresh()}if(k._updating==undefined||k._updating==false){k._render(true,
true,false,false);if(k.vScrollBar.css("visibility")!="visible"){k._arrange();k._updatecolumnwidths();k._updatecellwidths();k._renderrows(k.virtualsizeinfo)}}if(k.source&&k.source._knockoutdatasource&&!k._updateFromAdapter&&k.autokoupdates)if(k.source._source._localdata){k.source.suspendKO=true;k.source._source._localdata.pop(rowdata);k.source.suspendKO=false}k.vScrollInstance.setPosition(m);return l};if(this.source.deleterow){var d=function(j){if(j==true||j==undefined)e(g,h)};try{this.source.deleterow(h,
d);if(i==undefined)i=true}catch(f){i=false}}else i=e(g,h);return i}return false},addrow:function(i,l,d){if(l!=undefined){this._datachanged=true;if(d==undefined)d="last";var k=false;var h=this;var g=function(n,m,q,e){var p=n.vScrollInstance.value;var o=false;if(!b.isArray(q))o=n.dataview.addrow(m,q,e);else{b.each(q,function(r,s){var t=null;if(m!=null&&m[r]!=null)t=m[r];o=n.dataview.addrow(t,this,e,false)});n.dataview.refresh()}if(n._updating==undefined||n._updating==false)n._render(true,true,false,
false);if(n.source&&n.source._knockoutdatasource&&!n._updateFromAdapter&&n.autokoupdates)if(n.source._source._localdata){n.source.suspendKO=true;n.source._source._localdata.push(q);n.source.suspendKO=false}n.vScrollInstance.setPosition(p);return o};if(this.source.addrow){var f=function(e){if(e==true||e==undefined)g(h,i,l,d)};try{k=this.source.addrow(l.uid,l,d,f);if(k==undefined)k=true}catch(j){k=false}if(k==false)return false}else g(this,i,l,d);return k}return false},_findvisiblerow:function(g,h){if(g==
undefined)g=parseInt(this.vScrollInstance.value);var e=0;if(h==undefined||h==null)h=this.rows.records;var d=h.length;while(e<=d){mid=parseInt((e+d)/2);var f=h[mid];if(f==undefined)break;if(f.top>g&&f.top+f.height>g)d=mid-1;else if(f.top<g&&f.top+f.height<g)e=mid+1;else{return mid;break}}return-1},_updatecellwidths:function(){var f=this.virtualsizeinfo;var p=this;if(this.gridcontent==undefined)return;if(this.table==undefined)this.table=this.gridcontent.find("#contenttable"+this.element.id);var k=this.groupable&&
this.groups.length>0;var q=0;var l=f.visiblerecords;if(this.pageable&&this.autoheight){l=this.dataview.pagesize;if(this.groupable){this.dataview.updateview();l=this.dataview.rows.length}}if(!this.pageable&&this.autoheight)l=this.dataview.totalrecords;if(this.rowdetails)l+=this.dataview.pagesize;var r=this.columns.records.length;var t=this.table[0].rows;for(var n=0;n<l;n++){var d=t[n];if(!d)break;var s=d.cells;var h=0;for(var m=0;m<r;m++){var g=this.columns.records[m];var e=g.width;var o=b(s[m]);if(parseInt(o[0].style.left)!=
h)o.css("left",h);if(parseInt(o[0].style.width)!=e)o.width(e);o[0].left=h;if(!(g.hidden&&g.hideable))h+=e;else o.css("display","none")}if(q==0){this.table.width(parseInt(h)+2);q=h}}if(this.showaggregates&&this._updateaggregates)this._updateaggregates();if(this.showfilterrow&&this.filterable&&this._updatefilterrowui)this._updatefilterrowui();this._updatescrollbarsafterrowsprerender()},_updatescrollbarsafterrowsprerender:function(){var d=this.hScrollBar.css("visibility");var f=0;if(this.vScrollBar.css("visibility")==
"visible")f=this.scrollbarsize+3;if(this.table.width()-2>this.host.width()-f){if(d!="visible"){this.hScrollBar.css("visibility","visible");this._arrange()}if(this.vScrollBar.css("visibility")=="visible"){var e=this.vScrollBar.jqxScrollBar("max");this.vScrollBar.jqxScrollBar("max",e+this.scrollbarsize+4)}this.hScrollBar.jqxScrollBar("max",f+this.table.width()-this.host.width())}else if(d!="hidden"){this.hScrollBar.css("visibility","hidden");this._arrange()}this._renderhorizontalscroll()},_prerenderrows:function(f){var s=
this;if(this.prerenderrequired==true){this.prerenderrequired=false;if(this.editable&&this._destroyeditors)this._destroyeditors();if(this.gridcontent==undefined)return;this.gridcontent.find("#contenttable"+this.element.id).remove();if(this.table!=null){this.table.remove();this.table=null}this.table=b('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>');this.gridcontent.addClass(this.toTP("jqx-grid-content"));this.gridcontent.addClass(this.toTP("jqx-widget-content"));
this.gridcontent.append(this.table);var k=this.groupable&&this.groups.length>0;var t=0;this.table[0].rows=new Array;var r=this.toTP("jqx-grid-cell");if(k)r=" "+this.toTP("jqx-grid-group-cell");var m=f.visiblerecords;if(this.pageable&&this.autoheight){m=this.dataview.pagesize;if(this.groupable){this.dataview.updateview();m=this.dataview.rows.length}}if(!this.pageable&&this.autoheight)m=this.dataview.totalrecords;if(this.groupable&&this.autoheight&&!this.pageable)m=this.dataview.rows.length;if(this.rowdetails)m+=
this.dataview.pagesize;var u=this.columns.records.length;if(b.browser.msie&&b.browser.version>8)this.table.css("opacity","0.99");if(b.browser.mozilla)this.table.css("opacity","0.99");if(navigator.userAgent.indexOf("Safari")!=-1)this.table.css("opacity","0.99");var l=b.browser.msie&&b.browser.version<8;if(l)this.host.attr("hideFocus","true");var v=this.tableZIndex;if(m*u>v)v=m*u;var q=this.dataview.records.length==0;for(var o=0;o<m;o++){var d=b('<div style="position: relative;" id="row'+o+this.element.id+
'"></div>');var h=0;this.table[0].rows[o]=d[0];this.table[0].rows[o].cells=new Array;for(var n=0;n<u;n++){var g=this.columns.records[n];var e=g.width;if(e<g.minwidth)e=g.minwidth;if(e>g.maxwidth)e=g.maxwidth;var p=b('<div style="overflow: hidden; position: absolute; height: 100%; left: '+h+"px; z-index: "+v--+"; width:"+e+'px;" class="'+r+'"></div>');d.append(p);if(!(g.hidden&&g.hideable))h+=e;else{p.css("display","none");v++}this.table[0].rows[o].cells[n]=p[0]}if(l)d.css("z-index",v--);if(t==0){this.table.width(parseInt(h)+
2);t=h}this.table.append(d);d.height(this.rowsheight)}if(m==0){var h=0;if(this.showemptyrow){var d=b('<div style="position: relative;" id="row0'+this.element.id+'"></div>');this.table.append(d);d.height(this.rowsheight);this.table[0].rows[0]=d[0];this.table[0].rows[0].cells=new Array}for(var n=0;n<u;n++){var g=this.columns.records[n];var e=g.width;if(this.showemptyrow){var p=b('<div style="position: absolute; height: 100%; left: '+h+"px; z-index: "+v--+"; width:"+e+'px;" class="'+r+'"></div>');p.height(this.rowsheight);
d.append(p);this.table[0].rows[0].cells[n]=p[0]}if(e<g.minwidth)e=g.minwidth;if(e>g.maxwidth)e=g.maxwidth;if(!(g.hidden&&g.hideable))h+=e}this.table.width(parseInt(h)+2);t=h}this._updatescrollbarsafterrowsprerender();if(this.rendered)this.rendered("rows")}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var t=null;var q=null;this.tableheight=null;var w=this;var k=false;var j=false;if(this.width!=null&&this.width.toString().indexOf("px")!=-1)t=this.width;
else if(this.width!=undefined&&!isNaN(this.width))t=this.width;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){t=this.width;k=true}if(this.height!=null&&this.height.toString().indexOf("px")!=-1)q=this.height;else if(this.height!=undefined&&!isNaN(this.height))q=this.height;if(this.height!=null&&this.height.toString().indexOf("%")!=-1){q=this.height;j=true}var i=function(){var x=0;var y=w.showheader?w.columnsheader!=null?w.columnsheader.height()+2:0:0;x+=y;if(w.pageable)x+=w.pagerheight;
if(w._groupsheader())x+=w.groupsheaderheight;if(w.showtoolbar)x+=w.toolbarheight;if(w.showstatusbar)x+=w.statusbarheight;if(w.hScrollBar[0].style.visibility=="visible")x+=20;return x};if(this.autoheight&&this.virtualsizeinfo)if(this.pageable&&this.gotopage){var u=this.host.height()-this._gettableheight();q=u+(this._pageviews[0]?this._pageviews[0].height:0);if(q==0)q=i();if(this.showemptyrow&&this.dataview.totalrecords==0)q+=this.rowsheight}else{var u=this.host.height()-this._gettableheight();if(this._pageviews.length>
0){q=u+this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top;this.vScrollBar[0].style.visibility="hidden"}else{q=i();if(this.showemptyrow)q+=this.rowsheight}}else if(this.autoheight){q=this.dataview.totalrecords*this.rowsheight;if(this._loading){q=250;this.dataloadelement.height(q)}q+=i();if(q>1E4)q=1E4}var e=this.host.css("border-width");if(e==null)e=0;if(t!=null){t=parseInt(t);this.host.width(this.width);if(k){t=this.host.width();if(t<=2){t=600;this.host.width(t)}if(!this._oldWidth)this._oldWidth=
t}}else this.host.width(250);if(q!=null){if(!j)q=parseInt(q);this.host.height(q);if(j&&!this.autoheight){q=this.host.height();if(q==0){q=400;this.host.height(q)}if(!this._oldHeight)this._oldHeight=q}}else this.host.height(250);if(this.autoheight){this.tableheight=null;this._gettableheight()}var p=0;if(this.showtoolbar){this.toolbar.width(t);this.toolbar.height(this.toolbarheight-1);this.toolbar.css("top",0);p+=this.toolbarheight;q-=parseInt(this.toolbarheight)}else this.toolbar.height(0);if(this.showstatusbar){this.statusbar.width(t);
this.statusbar.height(this.statusbarheight-1)}else this.statusbar.height(0);if(this._groupsheader()){this.groupsheader.width(t);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",p);var r=this.groupsheader.height()+1;p+=r;if(q>r)q-=parseInt(r)}else{this.groupsheader.width(t);this.groupsheader.height(this.groupsheaderheight);this.groupsheader.css("top",p);this.content.css("top",p+this.groupsheader.height())}var d=this.scrollbarsize;if(isNaN(d)){d=parseInt(d);if(isNaN(d))d=
"17px";else d=d+"px"}d=parseInt(d);var m=4;var g=2;var h=0;if(this.vScrollBar[0].style.visibility=="visible")h=d+m;if(this.hScrollBar[0].style.visibility=="visible")g=d+m+2;var n=0;if(this.pageable){n=this.pagerheight;g+=this.pagerheight}if(this.showstatusbar){g+=this.statusbarheight;n+=this.statusbarheight}this.hScrollBar.height(d);this.hScrollBar.css({top:p+q-m-d-n+"px",left:"0px"});this.hScrollBar.width(t-d-m+"px");if(h==0)this.hScrollBar.width(t-2);this.vScrollBar.width(d);this.vScrollBar.height(parseInt(q)-
g+"px");this.vScrollBar.css({left:parseInt(t)-parseInt(d)-m+"px",top:p});var l=this.vScrollInstance;l.disabled=this.disabled;l.refresh();var s=this.hScrollInstance;s.disabled=this.disabled;s.refresh();var o=function(x){if(x.vScrollBar[0].style.visibility=="visible"&&x.hScrollBar[0].style.visibility=="visible"){x.bottomRight[0].style.visibility="visible";x.bottomRight.css({left:1+parseInt(x.vScrollBar.css("left")),top:parseInt(x.hScrollBar.css("top"))});x.bottomRight.width(parseInt(d)+3);x.bottomRight.height(parseInt(d)+
4);if(x.showaggregates){x.bottomRight.css("z-index",99);x.bottomRight.height(parseInt(d)+4+x.statusbarheight);x.bottomRight.css({top:parseInt(x.hScrollBar.css("top"))-x.statusbarheight})}}else x.bottomRight[0].style.visibility="hidden"};o(this);this.content.width(t-h);this.content.height(q-g+2);this.content.css("top",p);if(this.showstatusbar){this.statusbar.css("top",p+q-this.statusbarheight-(this.pageable?this.pagerheight:0));if(this.showaggregates){if(this.hScrollBar.css("visibility")=="visible"){this.hScrollBar.css({top:p+
q-m-d-n+this.statusbarheight+"px",left:"0px"});this.statusbar.css("top",1+p+q-d-5-this.statusbarheight-(this.pageable?this.pagerheight:0))}o(this)}}if(this.pageable){this.pager.width(t);this.pager.height(this.pagerheight);this.pager.css("top",p+q-this.pagerheight)}else this.pager.height(0);if(this.table!=null){var f=0;if(this.vScrollBar[0].style.visibility=="visible")f=this.scrollbarsize+4;var v=f+this.table.width()-this.host.width();this.hScrollBar.jqxScrollBar("max",v);if(this.hScrollBar[0].style.visibility==
"visible"&&v==0){this.hScrollBar[0].style.visibility="hidden";this._arrange()}}this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());this._hostwidth=this.host.width()},destroy:function(){if(this.host.jqxDropDownList){var g=b(b.find("#filterclearbutton"+this.element.id));var f=b(b.find("#filterbutton"+this.element.id));var j=b(b.find("#filter1"+this.element.id));var e=b(b.find("#filter2"+this.element.id));var i=b(b.find("#filter3"+this.element.id));var h=b(b.find(".filtertext1"+
this.element.id));var d=b(b.find(".filtertext2"+this.element.id));if(h.length>0&&d.length>0){h.removeClass();d.removeClass();h.remove();d.remove()}this.removeHandler(g,"click");this.removeHandler(f,"click");j.jqxDropDownList("destroy");e.jqxDropDownList("destroy");i.jqxDropDownList("destroy")}if(this.host.jqxMenu)if(this.gridmenu){this.removeHandler(b(document),"click.menu"+this.element.id);this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.gridmenu,"closed");this.removeHandler(this.gridmenu,
"itemclick");this.gridmenu.jqxMenu("destroy")}if(this.pagershowrowscombo)this.pagershowrowscombo.jqxDropDownList("destroy");if(this.pagerrightbutton){this.removeHandler(this.pagerrightbutton,"mousedown");this.removeHandler(this.pagerrightbutton,"mouseup");this.removeHandler(this.pagerrightbutton,"click");this.pagerrightbutton.jqxButton("destroy")}if(this.pagerleftbutton){this.removeHandler(this.pagerleftbutton,"mousedown");this.removeHandler(this.pagerleftbutton,"mouseup");this.removeHandler(this.pagerleftbutton,
"click");this.pagerleftbutton.jqxButton("destroy")}this.removeHandler(b(document),"mousedown.resize"+this.element.id);this.removeHandler(b(document),"mouseup.resize"+this.element.id);this.removeHandler(b(document),"mousemove.resize"+this.element.id);this.columns=new b.jqx.collection(this.element);this.rows=new b.jqx.collection(this.element);this.hScrollInstance.destroy();this.vScrollInstance.destroy();this.hScrollBar.remove();this.vScrollBar.remove();this._removeHandlers();this._clearcaches();this.dataview._clearcaches();
this.content.removeClass();this.content.remove();this.content=null;this.vScrollBar=null;this.hScrollBar=null;if(this.gridmenu)this.gridmenu=null;this.host.removeData();this.host.removeClass();this.host.remove();this.host=null},_initializeColumns:function(){if(this.columns&&this.columns.records)for(var e=0;e<this.columns.records.length;e++)this._removecolumnhandlers(this.columns.records[e]);var h=this;var d=new b.jqx.collection(this.element);var g=0;if(!this._columns)this._columns=this.columns;else this.columns=
this._columns;if(this.groupable)b.each(this.groups,function(i){var j=new c(h,this);j.visibleindex=g++;j.width=h.groupindentwidth;d.add(j)});if(this.rowdetails&&this.showrowdetailscolumn){var f=new c(h,this);f.visibleindex=g++;f.width=h.groupindentwidth;f.pinned=true;d.add(f)}b.each(this.columns,function(i){var j=new c(h,this);j.visibleindex=g++;d.add(j)});this.columns=d},_initializeRows:function(){var d=new b.jqx.collection(this.element);if(this.rows)this.rows.clear();this.rows=d},_raiseEvent:function(h,
e){if(e==undefined)e={owner:null};var f=this.events[h];args=e;args.owner=this;var g=new jQuery.Event(f);g.owner=this;g.args=args;var d=this.host.trigger(g);e=g.args;return d},wheel:function(f,e){if(e.autoheight){f.returnValue=true;return true}var g=0;if(!f)f=window.event;if(f.originalEvent&&f.originalEvent.wheelDelta)f.wheelDelta=f.originalEvent.wheelDelta;if(f.wheelDelta)g=f.wheelDelta/120;else if(f.detail)g=-f.detail/3;if(g){var d=e._handleDelta(g);if(d){if(f.preventDefault)f.preventDefault();if(f.originalEvent!=
null)f.originalEvent.mouseHandled=true;if(f.stopPropagation!=undefined)f.stopPropagation()}if(d){d=false;f.returnValue=d;return d}else return false}if(f.preventDefault)f.preventDefault();f.returnValue=false},_handleDelta:function(f){var e=this.vScrollInstance.value;if(f<0)this.scrollDown();else this.scrollUp();var d=this.vScrollInstance.value;if(e!=d)return true;return false},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return;var d=this.vScrollInstance;if(d.value+this.rowsheight<=
d.max)d.setPosition(parseInt(d.value)+this.rowsheight);else d.setPosition(d.max)},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return;var d=this.vScrollInstance;if(d.value-this.rowsheight>=d.min)d.setPosition(parseInt(d.value)-this.rowsheight);else d.setPosition(d.min)},_removeHandlers:function(){var d=this;this.removeHandler(this.vScrollBar,"valuechanged");this.removeHandler(this.hScrollBar,"valuechanged");this.vScrollInstance.valuechanged=null;this.hScrollInstance.valuechanged=
null;var e="mousedown";if(this.isTouchDevice())e="touchend";this.removeHandler(this.host,"dblclick");if(this.gridmenu)this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.host,e);this.removeHandler(this.content,"mousemove",this._mousemovefunc);this.removeHandler(this.host,"mouseleave");this.removeHandler(this.content,"mouseenter");this.removeHandler(this.content,"mouseleave");this.removeHandler(this.content,"selectstart."+this.element.id);this.removeHandler(this.host,"dragstart."+this.element.id);
this.removeHandler(this.host,"keydown.edit"+this.element.id);this.removeHandler(b(document),"keydown.edit"+this.element.id);this.removeHandler(b(document),"mousemove.selection"+this.element.id);this.removeHandler(b(document),"mouseup.selection"+this.element.id);if(this.editable)this.removeHandler(b(document),"click.grid"+this.element.id)},_addHandlers:function(){var e=this;this.addHandler(this.host,"dragstart."+this.element.id,function(h){return false});if(this.editable)this.addHandler(b(document),
"click.grid"+this.element.id,function(k){if(e.editable&&e.begincelledit)if(e.editcell)if(!e.vScrollInstance.isScrolling()&&!e.vScrollInstance.isScrolling()){var h=false;switch(e.editcell.columntype){case "datetimeinput":if(e.editcell.editor.jqxDateTimeInput&&e.editcell.editor.jqxDateTimeInput("container")[0].style.display=="block")h=true;break;case "combobox":if(e.editcell.editor.jqxComboBox&&e.editcell.editor.jqxComboBox("container")[0].style.display=="block")h=true;break;case "dropdownlist":if(e.editcell.editor.jqxDropDownList&&
e.editcell.editor.jqxDropDownList("container")[0].style.display=="block")h=true;break}if(h)return true;var i=e.host.offset();var l=e.host.width();var j=e.host.height();var m=false;if(k.pageY<i.top||k.pageY>i.top+j)m=true;if(k.pageX<i.left||k.pageX>i.left+l)m=true;if(m)e.endcelledit(e.editcell.row,e.editcell.column,false,true)}});var d=e.isTouchDevice();this.vScrollInstance.valuechanged=function(h){if(e.virtualsizeinfo){e._closemenu();e._renderrows(e.virtualsizeinfo);if(!e.pageable&&!e.groupable&&
e.dataview.virtualmode){if(e.loadondemandupdate)clearTimeout(e.loadondemandupdate);e.loadondemandupdate=setTimeout(function(){e.loadondemand=true;e._renderrows(e.virtualsizeinfo)},100)}if(d)e._lastScroll=new Date}};this.hScrollInstance.valuechanged=function(j){if(e.virtualsizeinfo){e._closemenu();var i=function(){e._renderhorizontalscroll();e._renderrows(e.virtualsizeinfo);if(e.editcell&&!e.editrow)if(e._showcelleditor&&e.editcell.editing)e._showcelleditor(e.editcell.row,e.getcolumn(e.editcell.column),
e.editcell.element,e.editcell.init)};var h=e._browser==undefined?e._isIE10():e._browser;if(navigator&&navigator.userAgent.indexOf("Safari")!=-1){if(this._hScrollTimer)clearTimeout(this._hScrollTimer);this._hScrollTimer=setTimeout(function(){i()},1)}else if(b.browser.mozilla||h){if(this._hScrollTimer)clearTimeout(this._hScrollTimer);this._hScrollTimer=setTimeout(function(){i()},0.01)}else i();if(d)e._lastScroll=new Date}};this._mousewheelfunc=this._mousewheelfunc||function(h){if(!e.editcell&&e.enablemousewheel){e.wheel(h,
e);return false}};this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var g="mousedown";if(this.isTouchDevice())g="touchend";this.addHandler(this.host,g,function(i){if(e.isTouchDevice()){e._newScroll=new Date;if(e._newScroll-e._lastScroll<500)return false;if(b(i.target).ischildof(e.vScrollBar))return false;if(b(i.target).ischildof(e.hScrollBar))return false}e._mousedown=new Date;var h=e._handlemousedown(i,e);if(e.isNestedGrid)if(!e.resizablecolumn)i.stopPropagation();
e._lastmousedown=new Date;return h});this.addHandler(this.host,"dblclick",function(h){if(e.editable&&e.begincelledit&&e.editmode=="dblclick")e._handledblclick(h,e);e.mousecaptured=false;return true});this._mousemovefunc=function(h){if(e._handlemousemove)return e._handlemousemove(h,e)};this.addHandler(this.content,"mousemove",this._mousemovefunc);this.addHandler(b(document),"mousemove.selection"+this.element.id,function(h){if(e._handlemousemoveselection)return e._handlemousemoveselection(h,e)});this.addHandler(b(document),
"mouseup.selection"+this.element.id,function(h){if(e._handlemouseupselection)e._handlemouseupselection(h,e)});if(document.referrer!=""||window.frameElement)if(window.top!=null){if(window.parent&&document.referrer)parentLocation=document.referrer;if(parentLocation.indexOf(document.location.host)!=-1){var f=function(h){if(e._handlemouseupselection)e._handlemouseupselection(h,e)};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",f,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",
f)}}this.focused=false;this.addHandler(this.content,"mouseenter",function(h){e.focused=true;if(e._overlayElement)if(e.vScrollInstance.isScrolling()||e.hScrollInstance.isScrolling())e._overlayElement[0].style.visibility="visible";else e._overlayElement[0].style.visibility="hidden"});this.addHandler(this.content,"mouseleave",function(h){if(e._handlemousemove)if(e.enablehover)e._clearhoverstyle();if(e._overlayElement)e._overlayElement[0].style.visibility="hidden";e.focused=false});this.addHandler(this.content,
"selectstart."+this.element.id,function(h){if(e.enablebrowserselection)return true;if(!e.editcell&&!e.showfilterrow)return false});this.addHandler(b(document),"keydown.edit"+this.element.id,function(j){var i=j.charCode?j.charCode:j.keyCode?j.keyCode:0;if(e.handlekeyboardnavigation){var k=e.handlekeyboardnavigation(j);if(k==true)return false}if(e.editable&&e.editcell)if(i==13||i==27)if(e._handleeditkeydown)h=e._handleeditkeydown(j,e);if(i==27){e.mousecaptured=false;if(e.selectionarea.css("visibility")==
"visible")e.selectionarea.css("visibility","hidden")}if(b.browser.msie&&e.focused&&!e.isNestedGrid){var h=true;var i=j.charCode?j.charCode:j.keyCode?j.keyCode:0;if(!e.editcell&&e.editable&&e.editmode!="programmatic")if(e._handleeditkeydown)h=e._handleeditkeydown(j,e);if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(j,e);if(!h){if(j.preventDefault)j.preventDefault();if(j.stopPropagation!=undefined)j.stopPropagation()}return h}}return true});this.addHandler(this.host,"keydown.edit"+
this.element.id,function(i){var h=true;if(e.handlekeyboardnavigation){var j=e.handlekeyboardnavigation(i);if(j==true)return false}if(e.editable&&e.editmode!="programmatic")if(e._handleeditkeydown)h=e._handleeditkeydown(i,e);if(!b.browser.msie){if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(i,e);if(e.isNestedGrid)i.stopPropagation()}}else if(e.isNestedGrid)if(h&&e.keyboardnavigation&&e._handlekeydown){h=e._handlekeydown(i,e);i.stopPropagation()}if(!h){if(i.preventDefault)i.preventDefault();
if(i.stopPropagation!=undefined)i.stopPropagation()}return h})},_hittestrow:function(s,q){if(this.vScrollInstance==null||this.hScrollInstance==null)return;if(s==undefined)s=0;if(q==undefined)q==0;var l=this.vScrollInstance;var k=this.hScrollInstance;var f=l.value;if(this.vScrollBar.css("visibility")!="visible")f=0;var m=k.value;if(this.hScrollBar.css("visibility")!="visible")m=0;var r=parseInt(f)+q;var j=parseInt(m)+s;if(this.visiblerows==null)return;var e=false;var i=this._findvisiblerow(r,this.visiblerows);
if(i>=0){var o=this.visiblerows[i];var d=this.rowdetails&&o.rowdetails;var n=!o.rowdetailshidden;if(d){var g=this.visiblerows[i-1];if(g==o){o=g;i--}if(n){var h=b(this.hittestinfo[i].visualrow).position().top+parseInt(this.table.css("top"));var p=b(this.hittestinfo[i].visualrow).height();if(!(q>=h&&q<=h+p)){i++;o=this.visiblerows[i];e=true}}}}return{index:i,row:o,details:e}},getcellatposition:function(j,q){var r=this;var z=this.showheader?this.columnsheader.height()+2:0;var s=this._groupsheader()?
this.groupsheader.height():0;var B=this.showtoolbar?this.toolbarheight:0;s+=B;var g=this.host.offset();if(this.hasTransform)g=b.jqx.utilities.getOffset(this.host);var p=j-g.left;var n=q-z-g.top-s;var d=this._hittestrow(p,n);var k=d.row;var l=d.index;var t=this.table[0].rows[l];if(this.dataview&&this.dataview.records.length==0){var o=this.table[0].rows;var C=0;for(var w=0;w<o.length;w++){if(n>=C&&n<C+this.rowsheight){t=o[w];break}C+=this.rowsheight}k={boundindex:w}}if(t==null)return true;var u=this.hScrollInstance;
var v=u.value;var f=0;var m=this.groupable?this.groups.length:0;for(var w=0;w<t.cells.length;w++){var h=parseInt(b(this.columnsrow[0].cells[w]).css("left"));var j=h-v;if(r.columns.records[w].pinned)j=h;var A=j+b(this.columnsrow[0].cells[w]).width();if(A>=p&&p>=j){f=w;break}}if(k!=null){var e=this._getcolumnat(f);return{row:k.boundindex,column:e.datafield,value:this.getcellvalue(k.boundindex,e.datafield)}}return null},_handlemousedown:function(F,w){if(F.target==null)return true;if(w.disabled)return true;
if(b(F.target).ischildof(this.columnsheader))return true;var I;if(F.which)I=F.which==3;else if(F.button)I=F.button==2;var N;if(F.which)N=F.which==2;else if(F.button)N=F.button==1;if(N)return true;if(this.showstatusbar){if(b(F.target).ischildof(this.statusbar))return true;if(F.target==this.statusbar[0])return true}var H=this.showheader?this.columnsheader.height()+2:0;var z=this._groupsheader()?this.groupsheader.height():0;var M=this.showtoolbar?this.toolbarheight:0;z+=M;var h=this.host.offset();if(this.hasTransform)h=
b.jqx.utilities.getOffset(this.host);var k=parseInt(F.pageX);var v=parseInt(F.pageY);if(this.isTouchDevice()){var u=w.getTouches(F);var o=u[0];k=parseInt(o.pageX);v=parseInt(o.pageY);if(w.touchmode==true){k=parseInt(o._pageX);v=parseInt(o._pageY)}}var r=k-h.left;var q=v-H-h.top-z;var d=this._hittestrow(r,q);if(!d)return;if(d.details)return;var m=d.row;var n=d.index;var C=F.target.className;var A=this.table[0].rows[n];if(A==null){if(w.editable&&w.begincelledit)if(w.editcell)w.endcelledit(w.editcell.row,
w.editcell.column,false,true);return true}w.mousecaptured=true;w.mousecaptureposition={left:F.pageX,top:F.pageY-z};var B=this.hScrollInstance;var E=B.value;var g=-1;var p=this.groupable?this.groups.length:0;for(var G=0;G<A.cells.length;G++){var j=parseInt(b(this.columnsrow[0].cells[G]).css("left"));var k=j-E;if(w.columns.records[G].pinned)k=j;var f=this._getcolumnat(G);if(f!=null&&f.hidden)continue;var L=k+b(this.columnsrow[0].cells[G]).width();if(L>=r&&r>=k){g=G;break}}if(m!=null&&g>=0){this._raiseEvent(1,
{rowindex:m.boundindex,visibleindex:m.visibleindex,group:m.group,rightclick:I,originalEvent:F});var f=this._getcolumnat(g);var t=this.getcellvalue(m.boundindex,f.datafield);this._raiseEvent(8,{rowindex:m.boundindex,column:f?f.getcolumnproperties():null,datafield:f?f.datafield:null,columnindex:g,value:t,rightclick:I,originalEvent:F});var K=false;if(this._lastmousedown!=null)if(this._mousedown-this._lastmousedown<300)if(this._clickedrowindex==m.boundindex){this._raiseEvent(22,{rowindex:m.boundindex,
visibleindex:m.visibleindex,group:m.group,rightclick:I,originalEvent:F});if(this._clickedcolumn==f.datafield)this._raiseEvent(23,{rowindex:m.boundindex,column:f?f.getcolumnproperties():null,datafield:f?f.datafield:null,columnindex:g,value:t,rightclick:I,originalEvent:F});K=true;this._clickedrowindex=-1;this._clickedcolumn=null;if(F.isPropagationStopped&&F.isPropagationStopped())return false}if(I)return true;if(!K){this._clickedrowindex=m.boundindex;this._clickedcolumn=f.datafield}var D=b.jqx.utilities.getBrowser();
if(D.browser=="msie"&&parseInt(D.version)<=7){if(g==0&&this.rowdetails)C="jqx-grid-group-collapse";if(p>0)if(g<=p)C="jqx-grid-group-collapse"}if(C.indexOf("jqx-grid-group-expand")!=-1||C.indexOf("jqx-grid-group-collapse")!=-1)if(p>0&&g<p&&this._togglegroupstate)this._togglegroupstate(m.bounddata,true);else{if(g==p&&this.rowdetails&&this.showrowdetailscolumn){this._togglerowdetails(m.bounddata,true);this.gridcontent[0].scrollTop=0;this.gridcontent[0].scrollLeft=0}}else if(m.boundindex!=-1){var J=this.selectedrowindexes.slice(0);
var l=false;if(w.selectionmode!="none"&&this._selectrowwithmouse){if(w.selectionmode=="multiplecellsextended"||w.selectionmode=="multiplerowsextended")if(!F.ctrlKey&&!F.shiftKey){w.selectedrowindexes=new Array;w.selectedcells=new Array}if(w.selectionmode.indexOf("cell")==-1){if(w.selectionmode!="singlerow"||w.selectedrowindex!=m.boundindex&&w.selectionmode=="singlerow"){this._applyrowselection(m.boundindex,true,false,null,f.datafield);this._selectrowwithmouse(w,d,J,f.datafield,F.ctrlKey,F.shiftKey)}}else if(f.datafield!=
null){this._selectrowwithmouse(w,d,J,f.datafield,F.ctrlKey,F.shiftKey);this._applycellselection(m.boundindex,f.datafield,true,false)}if(w._oldselectedcell)if(w._oldselectedcell.datafield==w.selectedcell.datafield&&w._oldselectedcell.rowindex==w.selectedcell.rowindex)l=true;w._oldselectedcell=w.selectedcell}if(w.autosavestate)if(w.savestate)w.savestate();if(w.editable&&w.begincelledit){var e=w.editmode=="click"||l&&w.editmode=="selectedcell";if(w.selectionmode.indexOf("cell")==-1)if(w.editmode!="dblclick")e=
true;if(e)if(m.boundindex!=undefined&&f.editable){var s=w.begincelledit(m.boundindex,f.datafield,f.defaulteditorvalue);if(s)return true}if(w.selectionmode.indexOf("cell")!=-1)if(w.editmode=="selectedcell"&&!l&&w.editcell)w.endcelledit(w.editcell.row,w.editcell.column,false,true);return true}}}return true},_columnPropertyChanged:function(e,d,g,f){},_rowPropertyChanged:function(g,d,f,e){},propertyChangedHandler:function(d,e,h,g){if(this.isInitialized==undefined||this.isInitialized==false)return;switch(e){case "touchmode":d._removeHandlers();
d.touchDevice=null;d.vScrollBar.jqxScrollBar({touchMode:g});d.hScrollBar.jqxScrollBar({touchMode:g});d._updateTouchScrolling();d._addHandlers();break;case "autoshowcolumnsmenubutton":d._rendercolumnheaders();break;case "rendergridrows":d.updatebounddata();break;case "editmode":d._removeHandlers();d._addHandlers();break;case "source":d.virtualsizeinfo=null;if(d.showfilterrow&&d.filterable&&d.filterrow){d.filterrow.remove();d._filterrowcache=new Array;d.filterrow=null}d.updatebounddata();if(d.virtualmode&&
!d._loading){d.loadondemand=true;d._renderrows(d.virtualsizeinfo)}break;case "horizontalscrollbarstep":case "verticalscrollbarstep":case "horizontalscrollbarlargestep":case "verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep});this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case "closeablegroups":if(d._initgroupsheader)d._initgroupsheader();break;case "showgroupsheader":d.rendergridcontent();
break;case "theme":if(g!=h){if(d.pager){d.pager.removeClass();d.pager.addClass(d.toTP("jqx-grid-pager"));d.pager.addClass(d.toTP("jqx-widget-header"));if(d.pageable&&d._updatepagertheme)d._updatepagertheme()}if(d.groupsheader){d.groupsheader.removeClass();d.groupsheader.addClass(d.toTP("jqx-grid-groups-header"));d.groupsheader.addClass(d.toTP("jqx-widget-header"))}d.toolbar.removeClass();d.toolbar.addClass(d.toTP("jqx-grid-toolbar"));d.toolbar.addClass(d.toTP("jqx-widget-header"));d.statusbar.removeClass();
d.statusbar.addClass(d.toTP("jqx-grid-statusbar"));d.statusbar.addClass(d.toTP("jqx-widget-content"));d.vScrollBar.jqxScrollBar({theme:d.theme});d.hScrollBar.jqxScrollBar({theme:d.theme});d.host.removeClass();d.host.addClass(d.toTP("jqx-grid"));d.host.addClass(d.toTP("jqx-reset"));d.host.addClass(d.toTP("jqx-rc-all"));d.host.addClass(d.toTP("jqx-widget"));d.host.addClass(d.toTP("jqx-widget-content"));d.bottomRight.removeClass();d.bottomRight.addClass(d.toTP("jqx-grid-bottomright"));d.toolbar.addClass(d.toTP("jqx-grid-toolbar"));
d.toolbar.addClass(d.toTP("jqx-widget-header"));d.statusbar.addClass(d.toTP("jqx-grid-statusbar"));d.statusbar.addClass(d.toTP("jqx-widget-header"));d.render()}break;case "showtoolbar":case "toolbarheight":d._arrange();d.refresh();break;case "showstatusbar":case "statusbarheight":d._arrange();d.refresh();break;case "filterable":if(h!=g)d.render();break;case "autoshowfiltericon":case "showfiltercolumnbackground":case "showpinnedcolumnbackground":case "showsortcolumnbackground":d.rendergridcontent();
break;case "showrowdetailscolumn":d.render();break;case "scrollbarsize":d._arrange();break;case "width":if(h!=g)if(!this._loading)if(g!=h){d._arrange();d._updatecolumnwidths();d._updatecellwidths();d._renderrows(d.virtualsizeinfo)}break;case "height":if(h!=g)if(!this._loading)if(g!=h){var i=d.groupable&&d.groups.length>0;var f=d.vScrollBar.css("visibility")!="visible";if(!i){d._arrange();d.virtualsizeinfo=d._calculatevirtualheight();if(parseInt(g)>=parseInt(h))d.prerenderrequired=true;d._renderrows(d.virtualsizeinfo)}else if(g>=
h)d._render(true,false,false);else d.rendergridcontent(true,false);if(f&&d.vScrollBar.css("visibility")=="visible"){d._arrange();d._updatecolumnwidths();d._updatecellwidths()}}break;case "altrows":case "altstart":case "altstep":d._renderrows(d.virtualsizeinfo);break;case "groupsheaderheight":d._arrange();if(d._initgroupsheader)d._initgroupsheader();break;case "pagerheight":if(h!=g)d._initpager();break;case "selectedrowindex":d.selectrow(g);break;case "selectionmode":if(h!=g){if(g=="none"){d.selectedrowindexes=
new Array;d.selectedcells=new Array;d.selectedrowindex=-1}d._renderrows(d.virtualsizeinfo)}break;case "showheader":if(g)d.columnsheader.css("display","block");else d.columnsheader.css("display","none");break;case "virtualmode":d.dataview.virtualmode=d.virtualmode;d.dataview.refresh(false);d._render(false,false,false);break;case "columnsmenu":if(h!=g)d.render();break;case "columns":d._columns=null;d._filterrowcache=[];d.render();break;case "autoheight":if(h!=g)d._render(false,false,true);break;case "pagesizeoptions":case "pageable":case "pagesize":if(h!=
g){if(d._loading){alert(d.loadingerrormessage);return}if(d._initpager){d.dataview.pageable=d.pageable;d.dataview.pagenum=0;d.dataview.pagesize=d._getpagesize();if(d.virtualmode)d.updatebounddata();d.dataview.refresh(true);d._initpager();if(e=="pagesizeoptions")if(g!=null&&g.length>0){d.pagesize=g[0];d.dataview.pagesize=g[0];d.prerenderrequired=true;d._requiresupdate=true;d.dataview.pagenum=-1;d.gotopage(0)}}d._render(false,false,false)}break;case "groups":d.updatebounddata();break;case "groupable":d.dataview.groupable=
d.groupable;d.dataview.pagenum=0;d.dataview.refresh(false);d._render(false,false,true);break;case "disabled":if(g)d.host.addClass(d.toThemeProperty("jqx-fill-state-disabled"));else d.host.removeClass(d.toThemeProperty("jqx-fill-state-disabled"));break}},getSelf:function(){return this}});function c(d,e){this.owner=d;this.datafield=null;this.text="";this.sortable=true;this.hideable=true;this.editable=true;this.hidden=false;this.groupable=true;this.renderer=null;this.cellsrenderer=null;this.checkchange=
null,this.threestatecheckbox=false;this.buttonclick=null,this.columntype=null;this.cellsformat="";this.align="left";this.cellsalign="left";this.width="auto";this.minwidth=25;this.maxwidth="auto";this.pinned=false;this.visibleindex=-1;this.filterable=true;this.filter=null;this.filteritems=[];this.resizable=true;this.initeditor=null;this.createeditor=null;this.validation=null;this.classname="";this.cellclassname="";this.cellendedit=null;this.cellbeginedit=null;this.cellvaluechanging=null;this.aggregates=
null;this.aggregatesrenderer=null;this.menu=true;this.createfilterwidget=null;this.filtertype="default";this.filtercondition=null;this.rendered=null;this.exportable=true;this.draggable=true;this.getcolumnproperties=function(){return{sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,
cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(f,g){if(this[f]){var h=this[f];this[f]=g;this.owner._columnPropertyChanged(this,f,g,h)}};this._initfields=function(f){if(f!=null){if(f.datafield!=undefined)this.datafield=f.datafield;if(f.dataField!=undefined)this.datafield=f.dataField;if(f.text!=undefined)this.text=f.text;if(f.sortable!=undefined)this.sortable=
f.sortable;if(f.hideable!=undefined)this.hideable=f.hideable;if(f.hidden!=undefined)this.hidden=f.hidden;if(f.groupable!=undefined)this.groupable=f.groupable;if(f.renderer!=undefined)this.renderer=f.renderer;if(f.align!=undefined)this.align=f.align;if(f.cellsalign!=undefined)this.cellsalign=f.cellsalign;if(f.cellsformat!=undefined)this.cellsformat=f.cellsformat;if(f.width!=undefined)this.width=f.width;if(f.minwidth!=undefined)this.minwidth=f.minwidth;if(f.maxwidth!=undefined)this.maxwidth=f.maxwidth;
if(f.cellsrenderer!=undefined)this.cellsrenderer=f.cellsrenderer;if(f.columntype!=undefined)this.columntype=f.columntype;if(f.checkchange!=undefined)this.checkchange=f.checkchange;if(f.buttonclick!=undefined)this.buttonclick=f.buttonclick;if(f.pinned!=undefined)this.pinned=f.pinned;if(f.visibleindex!=undefined)this.visibleindex=f.visibleindex;if(f.filterable!=undefined)this.filterable=f.filterable;if(f.filter!=undefined)this.filter=f.filter;if(f.resizable!=undefined)this.resizable=f.resizable;if(f.editable!=
undefined)this.editable=f.editable;if(f.initeditor!=undefined)this.initeditor=f.initeditor;if(f.createeditor!=undefined)this.createeditor=f.createeditor;if(f.validation!=undefined)this.validation=f.validation;if(f.cellbeginedit!=undefined)this.cellbeginedit=f.cellbeginedit;if(f.cellendedit!=undefined)this.cellendedit=f.cellendedit;if(f.classname!=undefined)this.classname=f.classname;if(f.cellclassname!=undefined)this.cellclassname=f.cellclassname;if(f.menu!=undefined)this.menu=f.menu;if(f.aggregates!=
undefined)this.aggregates=f.aggregates;if(f.aggregatesrenderer!=undefined)this.aggregatesrenderer=f.aggregatesrenderer;if(f.createfilterwidget!=undefined)this.createfilterwidget=f.createfilterwidget;if(f.filtertype!=undefined)this.filtertype=f.filtertype;if(f.rendered!=undefined)this.rendered=f.rendered;if(f.exportable!=undefined)this.exportable=f.exportable;if(f.filteritems!=undefined)this.filteritems=f.filteritems;if(f.cellvaluechanging!=undefined)this.cellvaluechanging=f.cellvaluechanging;if(f.draggable!=
undefined)this.draggable=f.draggable;if(f.filtercondition!=undefined)this.filtercondition=f.filtercondition;if(f.threestatecheckbox!=undefined)this.threestatecheckbox=f.threestatecheckbox}};this._initfields(e);return this}function a(d,e){this.setdata=function(f){if(f!=null){this.bounddata=f;this.boundindex=f.boundindex;this.visibleindex=f.visibleindex;this.group=f.group;this.parentbounddata=f.parentItem;this.uniqueid=f.uniqueid;this.level=f.level}};this.setdata(e);this.parentrow=null;this.subrows=
new Array;this.owner=d;this.height=25;this.hidden=false;this.rowdetails=null;this.rowdetailsheight=100;this.rowdetailshidden=true;this.top=-1;this.setrowinfo=function(f){this.hidden=f.hidden;this.rowdetails=f.rowdetails;this.rowdetailsheight=f.rowdetailsheight;this.rowdetailshidden=!f.showdetails;this.height=f.height};return this}b.jqx.collection=function(d){this.records=new Array;this.owner=d;this.updating=false;this.beginupdate=function(){this.updating=true};this.resumeupdate=function(){this.updating=
false};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(f){var e=this.length;var g=Number(arguments[1])||0;g=g<0?Math.ceil(g):Math.floor(g);if(g<0)g+=e;for(;g<e;g++)if(g in this&&this[g]===f)return g;return-1};this._raiseEvent=function(e){};this.clear=function(){this.records=new Array};this.replace=function(f,e){this.records[f]=e;if(!this.updating)this._raiseEvent({type:"replace",element:e})};this.isempty=function(e){if(this.records[e]==undefined)return true;return false};this.initialize=
function(e){if(e<1)e=1;this.records[e-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(e){return this.records.indexOf(e)};this.add=function(e){if(e==null)return false;this.records[this.records.length]=e;if(!this.updating)this._raiseEvent({type:"add",element:e});return true};this.insertAt=function(f,e){if(f==null||f==undefined)return false;if(e==null)return false;if(f>=0)if(f<this.records.length){this.records.splice(f,0,e);if(!this.updating)this._raiseEvent({type:"insert",
index:f,element:e});return true}else return this.add(e);return false};this.remove=function(f){if(f==null||f==undefined)return false;var e=this.records.indexOf(f);if(e!=-1){this.records.splice(e,1);if(!this.updating)this._raiseEvent({type:"remove",element:f});return true}return false};this.removeAt=function(f){if(f==null||f==undefined)return false;if(f<0)return false;if(f<this.records.length){var e=this.records[f];this.records.splice(f,1);if(!this.updating)this._raiseEvent({type:"removeAt",index:f,
element:e});return true}return false};return this};b.jqx.dataview=function(){this.self=this;this.grid=null;this.uniqueId="id";this.records=[];this.rows=[];this.columns=[];this.groups=[];this.filters=new Array;this.updated=null;this.update=null;this.suspend=false;this.pagesize=0;this.pagenum=0;this.totalrows=0;this.totalrecords=0;this.groupable=true;this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.virtualmode=true;this._cachegrouppages=new Array;this.source=
null;this.changedrecords=new Array;this.rowschangecallback=null;this.suspendupdate=function(){this.suspend=true},this.isupdating=function(){return this.suspend},this.resumeupdate=function(d){this.suspend=false;if(d==undefined)d=true;this.refresh(d)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array};this.databind=function(d,n){var o=d._source?true:false;var e=null;if(o){e=d;d=d._source}else e=new b.jqx.dataAdapter(d,{autoBind:false});var g=function(m){e.recordids=
[];e.records=new Array;e.cachedrecords=new Array;e.originaldata=new Array;e._options.virtualmode=m.virtualmode;e._options.totalrecords=m.totalrecords;e._options.originaldata=m.originaldata;e._options.recordids=m.recordids;e._options.cachedrecords=new Array;e._options.pagenum=m.pagenum;e._options.pageable=m.pageable;if(d.type!=undefined)e._options.type=d.type;if(d.formatdata!=undefined)e._options.formatData=d.formatdata;if(d.contenttype!=undefined)e._options.contentType=d.contenttype;if(d.async!=undefined)e._options.async=
d.async;if(d.updaterow!=undefined)e._options.updaterow=d.updaterow;if(d.addrow!=undefined)e._options.addrow=d.addrow;if(d.deleterow!=undefined)e._options.deleterow=d.deleterow;if(m.pagesize==0)m.pagesize=10;e._options.pagesize=m.pagesize};var q=function(u){u.totalrecords=e.totalrecords;if(!u.virtualmode){u.originaldata=e.originaldata;u.records=e.records;u.recordids=e.recordids;u.cachedrecords=e.cachedrecords}else{var m={startindex:u.pagenum*u.pagesize,endindex:u.pagenum*u.pagesize+u.pagesize};if(d.recordstartindex)m.startindex=
d.recordstartindex;if(d.recordendindex)m.endindex=d.recordendindex;else if(!u.grid.pageable){m.endindex=m.startindex+100;if(u.grid.autoheight)m.endindex=m.startindex+u.totalrecords}m.data=e.records;if(u.grid.rendergridrows&&u.totalrecords>0)d.records=u.grid.rendergridrows(m);if(!d.records||u.totalrecords==0)d.records=new Array;u.originaldata=d.records;u.records=d.records;u.cachedrecords=d.records}};g(this);this.source=d;if(n!==undefined)uniqueId=n;var r=this;switch(d.datatype){case "local":case "array":default:if(d.localdata==
null)d.localdata=[];if(d.localdata!=null){e.unbindBindingUpdate(r.grid.element.id);e.dataBind();var p=function(m){if(m!=undefined){var u=e._changedrecords[0];if(u)b.each(e._changedrecords,function(){var v=this.index;var w=this.record;r.grid._updateFromAdapter=true;switch(m){case "update":var x=r.grid.getrowid(v);r.grid.updaterow(x,w);r.grid._updateFromAdapter=false;return;case "add":r.grid.addrow(null,w);r.grid._updateFromAdapter=false;return;case "remove":var x=r.grid.getrowid(v);r.grid.deleterow(x);
r.grid._updateFromAdapter=false;return}})}q(r,m);if(m=="updateData"){r.refresh();r.grid._updateGridData()}else{if(d.recordstartindex&&this.virtualmode)r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize);else r.refresh();r.update()}};p();e.bindBindingUpdate(r.grid.element.id,p)}break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":case "csv":case "tab":if(d.localdata!=null){e.unbindBindingUpdate(r.grid.element.id);e.dataBind();var p=function(m){q(r);if(m=="updateData"){r.refresh();
r.grid._updateGridData()}else{if(d.recordstartindex)r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize);else r.refresh();r.update()}};p();e.bindBindingUpdate(r.grid.element.id,p);return}var l={};var i=0;var t={};for(var s=0;s<this.filters.length;s++){var j=this.filters[s].datafield;var f=this.filters[s].filter;var h=f.getfilters();t[j+"operator"]=f.operator;for(var k=0;k<h.length;k++){h[k].datafield=j;t["filtervalue"+i]=h[k].value;t["filtercondition"+i]=h[k].condition;t["filteroperator"+
i]=h[k].operator;t["filterdatafield"+i]=j;i++}}t.filterscount=i;t.groupscount=r.groups.length;for(var s=0;s<r.groups.length;s++)t["group"+s]=r.groups[s];if(d.recordstartindex==undefined)d.recordstartindex=0;if(d.recordendindex==undefined||d.recordendindex==0)if(r.grid.height&&r.grid.height.toString().indexOf("%")==-1){d.recordendindex=parseInt(r.grid.height)/r.grid.rowsheight;d.recordendindex+=2}else d.recordendindex=b(window).height()/r.grid.rowsheight;b.extend(t,{sortdatafield:r.sortfield,sortorder:r.sortfielddirection,
pagenum:r.pagenum,pagesize:r.grid.pagesize,recordstartindex:d.recordstartindex,recordendindex:d.recordendindex});if(e._options.data)b.extend(e._options.data,t);else{if(d.data)b.extend(t,d.data);e._options.data=t}var p=function(){q(r);if(d.recordstartindex)r.updateview(d.recordstartindex,d.recordstartindex+r.pagesize);else r.refresh();r.update()};e.unbindDownloadComplete(r.grid.element.id);e.bindDownloadComplete(r.grid.element.id,p);e.dataBind()}};this.getid=function(g,e,f){if(b(g,e).length>0)return b(g,
e).text();if(g)if(g.toString().length>0){var d=b(e).attr(g);if(d!=null&&d.toString().length>0)return d}return f};this.getvaluebytype=function(g,d){var e=g;if(d.type=="date"){var f=new Date(g);if(f.toString()=="NaN"||f.toString()=="Invalid Date")if(b.jqx.dataFormat)g=b.jqx.dataFormat.tryparsedate(g);else g=f;else g=f;if(g==null)g=e}else if(d.type=="float"){var g=parseFloat(g);if(isNaN(g))g=e}else if(d.type=="int"){var g=parseInt(g);if(isNaN(g))g=e}else if(d.type=="bool"){if(g!=null)if(g.toLowerCase()==
"false")g=false;else if(g.toLowerCase()=="true")g=true;if(g==1)g=true;else if(g==0)g=false;else g=""}return g};this.setpaging=function(d){if(d.pageSize!=undefined)this.pagesize=d.pageSize;if(d.pageNum!=undefined)this.pagenum=Math.min(d.pageNum,Math.ceil(this.totalrows/this.pagesize));this.refresh()};this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}};this._clearcaches=function(){this.sortcache={};this.sortdata=null;this.changedrecords=new Array;
this.records=new Array;this.rows=new Array;this.cacheddata=new Array;this.originaldata=new Array;this.bounditems=new Array;this.loadedrecords=new Array;this.loadedrootgroups=new Array;this.loadedgroups=new Array;this.loadedgroupsByKey=new Array;this._cachegrouppages=new Array;this.recordsbyid=new Array;this.cachedrecords=new Array;this.recordids=new Array};this.addfilter=function(g,f){var e=-1;for(var d=0;d<this.filters.length;d++)if(this.filters[d].datafield==g){e=d;break}if(e==-1)this.filters[this.filters.length]=
{filter:f,datafield:g};else this.filters[e]={filter:f,datafield:g}};this.removefilter=function(e){for(var d=0;d<this.filters.length;d++)if(this.filters[d].datafield==e){this.filters.splice(d,1);break}};this.getItemFromIndex=function(d){return this.records[d]};this.updaterow=function(f,h,e){if(h!=undefined&&f!=undefined){h.uid=f;if(!h[this.source.id])h[this.source.id]=h.uid;var d=this.recordsbyid["id"+f];var g=this.records.indexOf(d);this.records[g]=h;if(e==true||e==undefined)this.refresh();this.changedrecords[h.uid]=
{Type:"Update",OldData:d,Data:h};return true}return false};this.addrow=function(h,i,d,g){if(i!=undefined){if(!h){i.uid=this.getid(this.source.id,i,this.totalrecords);var e=this.recordsbyid["id"+i.uid];while(e!=null){var f=Math.floor(Math.random()*1E4).toString();i.uid=f;e=this.recordsbyid["id"+f]}}else i.uid=h;if(!i[this.source.id])if(this.source.id!=undefined)i[this.source.id]=i.uid;if(d=="last")this.records.push(i);else this.records.splice(0,0,i);this.totalrecords++;if(g==true||g==undefined)this.refresh();
this.changedrecords[i.uid]={Type:"New",Data:i};return true}return false};this.deleterow=function(f,e){if(f!=undefined){if(this.recordsbyid["id"+f]){var d=this.recordsbyid["id"+f];var g=this.records.indexOf(d);this.changedrecords[f]={Type:"Delete",Data:this.records[g]};this.records.splice(g,1);this.totalrecords--;if(e==true||e==undefined)this.refresh();return true}return false}return false};this.reload=function(f,d,r,g,h,u,t){var m=this;var l=new Array;var o=f;var i=d;var j=r;var p=g;var k=i.length;
var w=0;var e=0;var s,n;this.columns=[];this.bounditems=new Array;this.loadedrecords=new Array;this.loadedrootgroups=new Array;this.loadedgroups=new Array;this.loadedgroupsByKey=new Array;this._cachegrouppages=new Array;this.recordsbyid={};if(this.totalrecords==0){Object.size=function(z){var y=0,x;for(x in z)if(z.hasOwnProperty(x))y++;return y};var v=Object.size(o);this.totalrecords=v;b.each(this.records,function(y){var z=this;var x=0;b.each(z,function(A,B){m.columns[x++]=A});return false})}if(this.virtualmode){if(this.pageable){this.updateview();
return}var u=0;if(!this.groupable){this.updateview();return}else var t=this.totalrecords}else{var u=0;var t=this.totalrecords}if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var q=u;q=this.loadgrouprecords(0,u,t,j,e,p,i,k,l)}else w=this.loadflatrecords(u,t,j,e,p,i,k,l);if(k>e)i.splice(e,k-e);if(this.groups.length>0&&this.groupable)this.totalrows=q;else this.totalrows=w;return l};this.loadflatrecords=function(d,o,e,p,l,u,n,q){var t=this;var k=d;var m=d;o=Math.min(o,this.totalrecords);
var g=this.sortdata!=null;var f=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype=="");var j=g?this.sortdata:this.records;for(var h=d;h<o;h++){var s={};if(!g){s=b.extend({},j[h]);id=s[t.uniqueId];s.boundindex=k;t.loadedrecords[k]=s;s.uid=t.getid(t.source.id,s,k);t.recordsbyid["id"+s.uid]=j[h];s.uniqueid=t.generatekey();t.bounditems[this.bounditems.length]=s}else{s=b.extend({},j[h].value);id=s[t.uniqueId];s.boundindex=j[h].index;s.uid=t.getid(t.source.id,
s,s.boundindex);t.recordsbyid["id"+s.uid]=j[h].value;t.loadedrecords[k]=s;s.uniqueid=t.generatekey();t.bounditems[s.boundindex]=s}if(p>=n||id!=u[p][t.uniqueId]||l&&l[id])q[q.length]=p;u[p]=s;p++;s.visibleindex=m;m++;k++}if(t.grid.summaryrows){var r=k;b.each(t.grid.summaryrows,function(){var i=b.extend({},this);i.boundindex=o++;t.loadedrecords[r]=i;i.uniqueid=t.generatekey();t.bounditems[t.bounditems.length]=i;u[p]=i;p++;i.visibleindex=m;m++;r++})}return m},this.updateview=function(n,o){var q=this;
var k=this.pagesize*this.pagenum;var m=0;var r=new Array;var e=this.filters;var j=this.updated;var l=r.length;if(this.pageable){if(this.virtualmode)if(!this.groupable||this.groups.length==0){this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[]);this.totalrows=r.length}else if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize];
this.totalrows=this.rows.length;return}this.loadgrouprecords(0,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}else if(this.virtualmode&&(!this.groupable||this.groups.length==0)){var g=this.pagesize;if(g==0)g=Math.min(100,this.totalrecords);var d=g*this.pagenum;if(this.loadedrecords.length==0)d=0;if(n!=null&&o!=null)this.loadflatrecords(n,o,e,m,j,r,l,[]);else this.loadflatrecords(this.pagesize*
this.pagenum,this.pagesize*(1+this.pagenum),e,m,j,r,l,[]);this.totalrows=this.loadedrecords.length;this.rows=r;if(r.length>=g)return}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)r=this._updategroupsinpage(q,e,k,m,l,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum);h++){var p=h<this.loadedrecords.length?this.loadedrecords[h]:null;if(p==null)continue;if(!this.pagesize||k>=this.pagesize*
this.pagenum&&k<=this.pagesize*(this.pagenum+1)){r[m]=p;m++}k++}if((r.length==0||r.length<this.pagesize)&&!this.pageable&&this.virtualmode){m=r.length;var f=r.length;for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum)-f;h++){var p={};p.boundindex=h+f;p.visibleindex=h+f;p.uniqueid=q.generatekey();p.empty=true;q.bounditems[h+f]=p;r[m]=p;m++}}this.rows=r};this.generatekey=function(){var d=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return d()+d()+"-"+d()+
"-"+d()+"-"+d()+"-"+d()+d()+d()};this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,true)};this.refresh=function(h){if(this.suspend)return;if(h==undefined)h=true;var l=this.rows.length;var k=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var e="";var g=this.cachedrecords.length;var s=new Array;this.totalrecords=0;var n=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var f=this.filters.length;if(this.source!=null&&this.source.filter!=undefined&&
this.source.localdata!=undefined){s=this.source.filter(this.filters,n,g);if(s==undefined)s=new Array;this.records=s}else if(this.source.filter==null||this.source.filter==undefined){for(var u=0;u<g;u++){var o=n[u];var d=undefined;for(var m=0;m<f;m++){var e=this.filters[m].filter;var r=o[this.filters[m].datafield];var t=e.evaluate(r);if(d==undefined)d=t;else if(e.operator=="or")d=d||t;else d=d&&t}if(d){s[s.length]=b.extend({dataindex:u},o);this._dataIndexToBoundIndex[u]={boundindex:s.length-1}}else this._dataIndexToBoundIndex[u]=
null}this.records=s}if(this.sortdata){var i=this.sortfield;if(this.sortcache[i]){this.sortdata=null;var p=this.sortcache[i].direction;this.sortcache[i]=null;this.sortby(this.sortfield,p);return}}}else if(this.filters.length==0&&!this.virtualmode)if(this.cachedrecords){this.totalrecords=0;var n=this.cachedrecords;this.records=n;if(this.sortdata){var i=this.sortfield;if(this.sortcache[i]){this.sortdata=null;var p=this.sortcache[i].direction;this.sortcache[i]=null;this.sortby(this.sortfield,p);return}}}var q=
this.reload(this.records,this.rows,this.filter,this.updated,h);this.updated=null;if(this.rowschangecallback!=null){if(k!=totalrows)this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()});if(l!=rows.length)this.rowschangecallback({type:"RowsCountChanged",data:{previous:l,current:rows.length}});if(q.length>0||l!=rows.length)this.rowschangecallback({type:"RowsChanged",data:{previous:l,current:rows.length,diff:q}})}};return this}})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{selectrow:function(b,c){this._applyrowselection(b,true,c)},selectallrows:function(){this.clearselection(false);var c=this.dataview.records.length;if(c>0)for(var b=0;b<c;b++)if(b<c-1)this.selectrow(b,false);else this.selectrow(b,true)},unselectrow:function(b,c){this._applyrowselection(b,false,c)},selectcell:function(c,b){this._applycellselection(c,b,true)},unselectcell:function(c,b){this._applycellselection(c,b,false)},clearselection:function(c){this.selectedrowindex=
-1;for(var b=0;b<this.selectedrowindexes.length;b++)this._raiseEvent(3,{rowindex:this.selectedrowindexes[b]});this.selectedrowindexes=new Array;this.selectedcells=new Array;if(!c)return;this._renderrows(this.virtualsizeinfo)},getselectedrowindex:function(){return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){return this.selectedcell},getselectedcells:function(){var b=new Array;for(obj in this.selectedcells)b[b.length]=this.selectedcells[obj];
return b},_applyrowselection:function(c,b,g,e,f){if(c==null)return false;var d=this.selectedrowindex;if(this.selectionmode=="singlerow"){if(b)this._raiseEvent(2,{rowindex:c,row:this.getrowdata(c)});else this._raiseEvent(3,{rowindex:c,row:this.getrowdata(c)});this._raiseEvent(3,{rowindex:d});this.selectedrowindexes=new Array;this.selectedcells=new Array}if(e==true)this.selectedrowindexes=new Array;var h=this.selectedrowindexes.indexOf(c);if(b){this.selectedrowindex=c;if(this.selectedrowindexes.indexOf(c)==
-1){this.selectedrowindexes.push(c);if(this.selectionmode!="singlerow")this._raiseEvent(2,{rowindex:c,row:this.getrowdata(c)})}else if(this.selectionmode=="multiplerows"){this.selectedrowindexes.splice(h,1);this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(c)});this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1}}else if(h>=0||this.selectionmode=="singlerow"||this.selectionmode=="multiplerowsextended"){this.selectedrowindexes.splice(h,
1);this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(c)});this.selectedrowindex=-1}if(g==undefined||g)this._rendervisualrows();return true},_applycellselection:function(d,i,c,h){if(d==null)return false;if(i==null)return false;var e=this.selectedrowindex;if(this.selectionmode=="singlecell"){var g=this.selectedcell;if(g!=null)this._raiseEvent(16,{rowindex:g.rowindex,datafield:g.datafield});this.selectedcells=new Array}if(this.selectionmode=="multiplecellsextended"){var g=this.selectedcell;
if(g!=null)this._raiseEvent(16,{rowindex:g.rowindex,datafield:g.datafield})}var f=d+"_"+i;var b={rowindex:d,datafield:i};if(c){this.selectedcell=b;if(!this.selectedcells[f]){this.selectedcells[f]=b;this.selectedcells.length++;this._raiseEvent(15,b)}else if(this.selectionmode=="multiplecells"){this.selectedcells[f]=undefined;this.selectedcells.length--;this._raiseEvent(16,b)}}else{this.selectedcells[f]=undefined;this.selectedcells.length--;this._raiseEvent(16,b)}if(h==undefined||h)this._rendervisualrows();
return true},_getcellindex:function(b){var c=-1;a.each(this.selectedcells,function(){c++;if(this[b])return false});return c},_clearhoverstyle:function(){if(undefined==this.hoveredrow||this.hoveredrow==-1)return;if(this.vScrollInstance.isScrolling())return;if(this.hScrollInstance.isScrolling())return;var b=this.table.find(".jqx-grid-cell-hover");if(b.length>0){b.removeClass(this.toTP("jqx-grid-cell-hover"));b.removeClass(this.toTP("jqx-fill-state-hover"))}this.hoveredrow=-1},_clearselectstyle:function(){var k=
this.table[0].rows.length;var p=this.table[0].rows;var l=this.toTP("jqx-grid-cell-selected");var c=this.toTP("jqx-fill-state-pressed");var m=this.toTP("jqx-grid-cell-hover");var h=this.toTP("jqx-fill-state-hover");for(var g=0;g<k;g++){var b=p[g];var f=b.cells.length;var o=b.cells;for(var e=0;e<f;e++){var d=o[e];var n=a(d);if(d.className.indexOf("jqx-grid-cell-selected")!=-1){n.removeClass(l);n.removeClass(c)}if(d.className.indexOf("jqx-grid-cell-hover")!=-1){n.removeClass(m);n.removeClass(h)}}}},
_selectpath:function(m,e){var l=this;var i=this._lastClickedCell?Math.min(this._lastClickedCell.row,m):0;var k=this._lastClickedCell?Math.max(this._lastClickedCell.row,m):0;if(i<=k){var h=this._getcolumnindex(this._lastClickedCell.column);var g=this._getcolumnindex(e);var f=Math.min(h,g);var d=Math.max(h,g);this.selectedcells=new Array;for(var b=i;b<=k;b++)for(var j=f;j<=d;j++)this._applycellselection(b,l._getcolumnat(j).datafield,true,false);this._rendervisualrows()}},_selectrowpath:function(e){if(this.selectionmode==
"multiplerowsextended"){var c=this;var b=this._lastClickedCell?Math.min(this._lastClickedCell.row,e):0;var f=this._lastClickedCell?Math.max(this._lastClickedCell.row,e):0;if(b<=f){this.selectedrowindexes=new Array;for(var d=b;d<=f;d++)this._applyrowselection(d,true,false);this._rendervisualrows()}}},_selectrowwithmouse:function(p,l,e,f,d,j){var q=l.row;if(q==undefined)return;var g=l.index;var c=this.hittestinfo[g].visualrow;if(this.hittestinfo[g].details)return;var i=c.cells[0].className;if(q.group)return;
if(this.selectionmode=="multiplerows"||this.selectionmode=="multiplecells"||this.selectionmode.indexOf("multiple")!=-1&&(j==true||d==true)){var n=e.indexOf(q.boundindex)!=-1;var m=q.boundindex+"_"+f;if(this.selectionmode.indexOf("cell")!=-1){var o=this.selectedcells[m]!=undefined;if(this.selectedcells[m]!=undefined&&o)this._selectcellwithstyle(p,false,g,f,c);else this._selectcellwithstyle(p,true,g,f,c);if(j&&this._lastClickedCell){this._selectpath(q.boundindex,f);this.mousecaptured=false;if(this.selectionarea.css("visibility")==
"visible")this.selectionarea.css("visibility","hidden")}}else{if(n)this._selectrowwithstyle(p,c,false,f);else this._selectrowwithstyle(p,c,true,f);if(j&&this._lastClickedCell){this.selectedrowindexes=new Array;var h=this._lastClickedCell?Math.min(this._lastClickedCell.row,q.boundindex):0;var k=this._lastClickedCell?Math.max(this._lastClickedCell.row,q.boundindex):0;for(var b=h;b<=k;b++)this._applyrowselection(b,true,false,false);this._rendervisualrows()}}}else{this._clearselectstyle();this._selectrowwithstyle(p,
c,true,f);if(this.selectionmode.indexOf("cell")!=-1)this._selectcellwithstyle(p,true,g,f,c)}if(!j)this._lastClickedCell={row:q.boundindex,column:f}},_selectcellwithstyle:function(d,c,g,f,e){var b=a(e.cells[d._getcolumnindex(f)]);b.removeClass(this.toTP("jqx-grid-cell-hover"));b.removeClass(this.toTP("jqx-fill-state-hover"));if(c){b.addClass(this.toTP("jqx-grid-cell-selected"));b.addClass(this.toTP("jqx-fill-state-pressed"))}else{b.removeClass(this.toTP("jqx-grid-cell-selected"));b.removeClass(this.toTP("jqx-fill-state-pressed"))}},
_selectrowwithstyle:function(e,h,b,j){var c=h.cells.length;var f=0;if(e.rowdetails&&e.showrowdetailscolumn)f=1;for(var g=f;g<c;g++){var d=h.cells[g];if(b){a(d).removeClass(this.toTP("jqx-grid-cell-hover"));a(d).removeClass(this.toTP("jqx-fill-state-hover"));if(e.selectionmode.indexOf("cell")==-1){a(d).addClass(this.toTP("jqx-grid-cell-selected"));a(d).addClass(this.toTP("jqx-fill-state-pressed"))}}else{a(d).removeClass(this.toTP("jqx-grid-cell-hover"));a(d).removeClass(this.toTP("jqx-grid-cell-selected"));
a(d).removeClass(this.toTP("jqx-fill-state-hover"));a(d).removeClass(this.toTP("jqx-fill-state-pressed"))}}},_handlemousemoveselection:function(b,o){if((o.selectionmode=="multiplerowsextended"||o.selectionmode=="multiplecellsextended")&&o.mousecaptured){var d=this.showheader?this.columnsheader.height()+2:0;var c=this._groupsheader()?this.groupsheader.height():0;var g=this.showtoolbar?this.toolbarheight:0;c+=g;var f=this.host.offset();if(this.hasTransform)f=a.jqx.utilities.getOffset(this.host);var l=
b.pageX;var k=b.pageY-c;var n=parseInt(this.columnsheader.offset().top);if(this.hasTransform)n=a.jqx.utilities.getOffset(this.columnsheader).top;var e=d;if(k<e)k=e+5;var m=parseInt(Math.min(o.mousecaptureposition.left,l));var j=-5+parseInt(Math.min(o.mousecaptureposition.top,k));var h=parseInt(Math.abs(o.mousecaptureposition.left-l));var i=parseInt(Math.abs(o.mousecaptureposition.top-k));m-=f.left;j-=f.top;this.selectionarea.css("visibility","visible");this.selectionarea.width(h);this.selectionarea.height(i);
this.selectionarea.css("left",m);this.selectionarea.css("top",j)}},_handlemouseupselection:function(u,o){if(this.selectionarea.css("visibility")!="visible"){o.mousecaptured=false;return true}if(o.mousecaptured&&(o.selectionmode=="multiplerowsextended"||o.selectionmode=="multiplecellsextended")){o.mousecaptured=false;if(this.selectionarea.css("visibility")=="visible"){this.selectionarea.css("visibility","hidden");var w=this.showheader?this.columnsheader.height()+2:0;var p=this._groupsheader()?this.groupsheader.height():
0;var B=this.showtoolbar?this.toolbarheight:0;p+=B;var C=this.selectionarea.offset();var c=this.host.offset();if(this.hasTransform){c=a.jqx.utilities.getOffset(this.host);C=a.jqx.utilities.getOffset(this.selectionarea)}var n=C.left-c.left;var k=C.top-w-c.top-p;var s=k;var g=n+this.selectionarea.width();var D=n;var l=new Array;var e=new Array;if(o.selectionmode=="multiplerowsextended"){while(k<s+this.selectionarea.height()){var b=this._hittestrow(n,k);var f=b.row;var h=b.index;if(h!=-1)if(!e[h]){e[h]=
true;l[l.length]=b}k+=20}var s=0;a.each(l,function(){var i=this;var m=this.row;if(o.selectionmode!="none"&&o._selectrowwithmouse){if(u.ctrlKey)o._applyrowselection(m.boundindex,true,false,false);else if(s==0)o._applyrowselection(m.boundindex,true,false,true);else o._applyrowselection(m.boundindex,true,false,false);s++}})}else{var r=o.hScrollInstance;var t=r.value;var q=o.table[0].rows[0];var j=o.selectionarea.height();if(!u.ctrlKey&&j>0)o.selectedcells=new Array;var A=j;while(k<s+A){var b=o._hittestrow(n,
k);var f=b.row;var h=b.index;if(h!=-1)if(!e[h]){e[h]=true;for(var v=0;v<q.cells.length;v++){var d=parseInt(a(o.columnsrow[0].cells[v]).css("left"))-t;var z=d+a(o.columnsrow[0].cells[v]).width();if(D>=d&&D<=z||g>=d&&g<=z||d>=D&&d<=g)o._applycellselection(f.boundindex,o._getcolumnat(v).datafield,true,false)}}k+=5}}if(o.autosavestate)if(o.savestate)o.savestate();o._renderrows(o.virtualsizeinfo)}}},selectprevcell:function(e,c){var f=this._getcolumnindex(c);var b=this.columns.records.length;var d=this._getprevvisiblecolumn(f);
if(d!=null){this.clearselection();this.selectcell(e,d.datafield)}},selectnextcell:function(e,d){var f=this._getcolumnindex(d);var c=this.columns.records.length;var b=this._getnextvisiblecolumn(f);if(b!=null){this.clearselection();this.selectcell(e,b.datafield)}},_getfirstvisiblecolumn:function(){var b=this;var e=this.columns.records.length;for(var c=0;c<e;c++){var d=this.columns.records[c];if(!d.hidden&&d.datafield!=null)return d}return null},_getlastvisiblecolumn:function(){var b=this;var e=this.columns.records.length;
for(var c=e-1;c>=0;c--){var d=this.columns.records[c];if(!d.hidden&&d.datafield!=null)return d}return null},_handlekeydown:function(t,m){if(m.editcell)return true;if(m.selectionmode=="none")return true;if(m.showfilterrow&&m.filterable)if(this.filterrow)if(a(t.target).ischildof(this.filterrow))return true;if(m.pageable)if(a(t.target).ischildof(this.pager))return true;if(this.showtoolbar)if(a(t.target).ischildof(this.toolbar))return true;if(this.showstatusbar)if(a(t.target).ischildof(this.statusbar))return true;
var y=t.charCode?t.charCode:t.keyCode?t.keyCode:0;var l=false;if(t.altKey)return true;var i=Math.round(m._gettableheight());var r=Math.round(i/m.rowsheight);var e=m.getdatainformation();switch(m.selectionmode){case "singlecell":case "multiplecells":case "multiplecellsextended":var z=m.getselectedcell();if(z!=null){var d=this.getrowvisibleindex(z.rowindex);var f=d;var k=z.datafield;var o=m._getcolumnindex(k);var b=m.columns.records.length;var p=function(D,B,C){var A=function(H,E){var G=m.dataview.loadedrecords[H];
if(G!=undefined&&E!=null){if(C||C==undefined)m.clearselection();var F=G.boundindex;m.selectcell(F,E);m._oldselectedcell=m.selectedcell;l=true;m.ensurecellvisible(H,E);return true}return false};if(!A(D,B)){m.ensurecellvisible(D,B);A(D,B);if(m.virtualmode)m.host.focus()}if(t.shiftKey&&y!=9){if(m.selectionmode=="multiplecellsextended")if(m._lastClickedCell){m._selectpath(D,B);m.selectedcell={rowindex:D,datafield:B};return}}else if(!t.shiftKey)m._lastClickedCell={row:D,column:B}};var u=t.shiftKey&&m.selectionmode!=
"singlecell"&&m.selectionmode!="multiplecells";var v=function(){p(0,k,!u)};var g=function(){var A=e.rowscount-1;p(A,k,!u)};var c=y==9&&!t.shiftKey;var h=y==9&&t.shiftKey;if(c||h)u=false;var j=t.ctrlKey;if(j&&y==37){var x=m._getfirstvisiblecolumn(o);if(x!=null)p(f,x.datafield)}else if(j&&y==39){var n=m._getlastvisiblecolumn(o);if(n!=null)p(f,n.datafield)}else if(y==39||c){var q=m._getnextvisiblecolumn(o);if(q!=null)p(f,q.datafield,!u);else if(!c)l=true}else if(y==37||h){var x=m._getprevvisiblecolumn(o);
if(x!=null)p(f,x.datafield,!u);else if(!h)l=true}else if(y==36)v();else if(y==35)g();else if(y==33)if(f-r>=0){var w=f-r;p(w,k,!u)}else v();else if(y==34)if(e.rowscount>f+r){var w=f+r;p(w,k,!u)}else g();else if(y==38)if(j)v();else if(f>0)p(f-1,k,!u);else l=true;else if(y==40)if(j)g();else if(e.rowscount>f+1)p(f+1,k,!u);else l=true}break;case "singlerow":case "multiplerows":case "multiplerowsextended":var f=m.getselectedrowindex();if(f==null||f==-1)return true;f=this.getrowvisibleindex(f);var s=function(B,
C){var A=function(F){var H=m.dataview.loadedrecords[F];if(H!=undefined){var G=H.boundindex;var E=m.selectedrowindex;if(C||C==undefined)m.clearselection();m.selectedrowindex=E;m.selectrow(G,false);var D=m.ensurerowvisible(F);if(!D)m._rendervisualrows();l=true;return true}return false};if(!A(B)){m.ensurerowvisible(B);A(B,C);if(m.virtualmode)m.host.focus()}if(t.shiftKey&&y!=9){if(m.selectionmode=="multiplerowsextended")if(m._lastClickedCell){m._selectrowpath(B);m.selectedrowindex=B;return}}else if(!t.shiftKey)m._lastClickedCell=
{row:B}};var u=t.shiftKey&&m.selectionmode!="singlerow"&&m.selectionmode!="multiplerows";var v=function(){s(0,!u)};var g=function(){var A=e.rowscount-1;s(A,!u)};var j=t.ctrlKey;if(y==36||j&&y==38)v();else if(y==35||j&&y==40)g();else if(y==33)if(f-r>=0){var w=f-r;s(w,!u)}else v();else if(y==34)if(e.rowscount>f+r){var w=f+r;s(w,!u)}else g();else if(y==38)if(f>0)s(f-1,!u);else l=true;else if(y==40)if(e.rowscount>f+1)s(f+1,!u);else l=true;break}if(l){if(m.autosavestate)if(m.savestate)m.savestate();if(m.editcell!=
null&&m.endcelledit)m.endcelledit(m.editcell.row,m.editcell.column,true,true);return false}return true},_handlemousemove:function(r,m){if(m.vScrollInstance.isScrolling())return;if(m.hScrollInstance.isScrolling())return;var t;var n;var e;var l;var k;if(m.enablehover||m.selectionmode=="multiplerows"){t=this.showheader?this.columnsheader.height()+2:0;n=this._groupsheader()?this.groupsheader.height():0;var v=this.showtoolbar?this.toolbarheight:0;n+=v;e=this.host.offset();if(this.hasTransform)e=a.jqx.utilities.getOffset(this.host);
l=r.pageX-e.left;k=r.pageY-t-e.top-n}if(m.selectionmode=="multiplerowsextended"||m.selectionmode=="multiplecellsextended")if(m.mousecaptured==true)return;if(m.enablehover){if(m.disabled)return;if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())return;var c=this._hittestrow(l,k);if(!c)return;var g=c.row;var h=c.index;if(this.hoveredrow!=-1&&h!=-1&&this.hoveredrow==h&&this.selectionmode.indexOf("cell")==-1)return;this._clearhoverstyle();if(h==-1||g==undefined)return;var o=this.hittestinfo[h].visualrow;
if(o==null)return;if(this.hittestinfo[h].details)return;var w=0;if(m.rowdetails&&m.showrowdetailscolumn)w=1;if(o.cells.length==0)return;var j=o.cells[w].className;if(g.group||j.indexOf("jqx-grid-cell-selected")!=-1)return;this.hoveredrow=h;if(this.selectionmode.indexOf("cell")!=-1){var d=-1;var p=this.hScrollInstance;var q=p.value;for(var s=0;s<o.cells.length;s++){var f=parseInt(a(this.columnsrow[0].cells[s]).css("left"))-q;var u=f+a(this.columnsrow[0].cells[s]).width();if(u>=l&&l>=f){d=s;break}}if(d!=
-1){var b=o.cells[d];if(b.className.indexOf("jqx-grid-cell-selected")==-1)if(b.className.indexOf("jqx-grid-group")==-1){a(b).addClass(this.toTP("jqx-grid-cell-hover"));a(b).addClass(this.toTP("jqx-fill-state-hover"))}}return}for(var s=w;s<o.cells.length;s++){var b=o.cells[s];if(b.className.indexOf("jqx-grid-group")==-1){a(b).addClass(this.toTP("jqx-grid-cell-hover"));a(b).addClass(this.toTP("jqx-fill-state-hover"))}}}else return true}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{autoresizecolumns:function(b){if(b!="cells"&&b!="all"&&b!="column")b="all";var l=this;var r=this.getrows();if(this.pageable)r=this.dataview.rows;var e=r.length;var n=a("<span></span>");n.addClass("jqx-grid-cell");a(document.body).append(n);var s=[];var d=[];var m=[];var c=l.host.width();if(l.vScrollBar[0].style.visibility!="hidden")c-=this.scrollbarsize+5;if(c<0)c=0;for(var h=0;h<e;h++){var q=r[h];for(var g=0;g<this.columns.records.length;g++){var f=
this.columns.records[g];if(f.hidden)continue;if(d[f.datafield]==undefined)d[f.datafield]=0;if(m[f.datafield]==undefined)m[f.datafield]="";var p=q[f.datafield];if(f.cellsformat!=""){if(a.jqx.dataFormat)if(a.jqx.dataFormat.isDate(p))p=a.jqx.dataFormat.formatdate(p,f.cellsformat,this.gridlocalization);else if(a.jqx.dataFormat.isNumber(p))p=a.jqx.dataFormat.formatnumber(p,f.cellsformat,this.gridlocalization)}else if(f.cellsrenderer)p=f.cellsrenderer(q,f,p).toString();if(b==undefined||b=="cells"||b=="all"){var s=
p.toString().length;if(s>d[f.datafield]){d[f.datafield]=s;m[f.datafield]=p}}if(b=="column"||b=="all")if(f.text.toString().length>d[f.datafield])m[f.datafield]=f.text}}for(var g=0;g<this.columns.records.length;g++){var f=this.columns.records[g];if(m[f.datafield]==undefined)m[f.datafield]=f.text;n[0].innerHTML=m[f.datafield];var o=n.outerWidth()+20;if(n.children().length>0)o=n.children().outerWidth()+20;if(a.browser.msie&&a.browser.version<8)o+=10;if(o>f.maxwidth)o=f.maxwidth;if(f._width!=undefined)f.__width=
f._width;f._width=null;if(f.maxwidth=="auto"||o<=f.maxwidth){var k=f.width;f.width=o;if(f._percentagewidth!=undefined)f._percentagewidth=f.width/c*100;this._raiseEvent(14,{columntext:f.text,column:f.getcolumnproperties(),datafield:f.datafield,oldwidth:k,newwidth:o})}}n.remove();this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo);for(var g=0;g<this.columns.records.length;g++){var f=this.columns.records[g];if(f.__width!=undefined)f._width=f.__width}},autoresizecolumn:function(f,
b){if(b!="cells"&&b!="all"&&b!="column")b="all";if(f==undefined)return false;var q=this.getrows();if(this.pageable)q=this.dataview.rows;var g=this.getcolumn(f);if(g==undefined)return false;var e=q.length;var m=a("<span></span>");m.addClass("jqx-grid-cell");a(document.body).append(m);var d=0;var l="";var k=this;var c=k.host.width();if(k.vScrollBar[0].style.visibility!="hidden")c-=this.scrollbarsize+5;if(c<0)c=0;if(b==undefined||b=="cells"||b=="all")for(var h=0;h<e;h++){var o=q[h][f];if(g.cellsformat!=
""){if(a.jqx.dataFormat)if(a.jqx.dataFormat.isDate(o))o=a.jqx.dataFormat.formatdate(o,g.cellsformat,this.gridlocalization);else if(a.jqx.dataFormat.isNumber(o))o=a.jqx.dataFormat.formatnumber(o,g.cellsformat,this.gridlocalization)}else if(g.cellsrenderer)o=g.cellsrenderer(row,g,o).toString();var p=o.toString().length;if(p>d){d=p;l=o}}if(b=="column"||b=="all")if(g.text.toString().length>d)l=g.text;if(l==undefined)l=g.text;m[0].innerHTML=l;var n=m.outerWidth()+10;if(a.browser.msie&&a.browser.version<
8)n+=5;m.remove();if(n>g.maxwidth)n=g.maxwidth;if(g.maxwidth=="auto"||n<=g.maxwidth){var j=g.width;g.width=n;if(g._width!=undefined)g.__width=g._width;g._width=null;if(g._percentagewidth!=undefined)g._percentagewidth=g.width/c*100;this._updatecolumnwidths();this._updatecellwidths();this._raiseEvent(14,{columntext:g.text,column:g.getcolumnproperties(),datafield:f,oldwidth:j,newwidth:n});this._renderrows(this.virtualsizeinfo);if(g._width!=undefined)g._width=g.__width}},_handlecolumnsresize:function(){var c=
this;if(this.columnsresize){var b=false;if(c.isTouchDevice())b=true;var g="mousemove.resize"+this.element.id;var d="mousedown.resize"+this.element.id;var h="mouseup.resize"+this.element.id;if(b){var g="touchmove.resize"+this.element.id;var d="touchstart.resize"+this.element.id;var h="touchend.resize"+this.element.id}this.removeHandler(a(document),g);this.addHandler(a(document),g,function(l){var m=a.data(document.body,"contextmenu"+c.element.id);if(m!=null)return true;if(c.resizablecolumn!=null&&!c.disabled&&
c.resizing)if(c.resizeline!=null){var o=c.host.offset();var t=parseInt(c.resizestartline.offset().left);var j=t-c._startcolumnwidth;var u=c.resizablecolumn.column.minwidth;if(u=="auto")u=0;else u=parseInt(u);var k=c.resizablecolumn.column.maxwidth;if(k=="auto")k=0;else k=parseInt(k);var p=l.pageX;if(b){var r=c.getTouches(l);var q=r[0];p=q.pageX}j+=u;var s=k>0?t+k:0;var n=k==0?true:c._startcolumnwidth+p-t<k?true:false;if(n)if(p>=o.left&&p>=j&&p<=o.left+c.host.width()){if(s!=0&&l.pageX<s)c.resizeline.css("left",
p);else if(s==0)c.resizeline.css("left",p);if(b)return false}}if(!b)return false});this.removeHandler(a(document),d);this.addHandler(a(document),d,function(l){var k=a.data(document.body,"contextmenu"+c.element.id);if(k!=null)return true;if(c.resizablecolumn!=null&&!c.disabled){var j=c.resizablecolumn.columnelement;if(j.offset().top+j.height()+5<l.pageY){c.resizablecolumn=null;return}c._startcolumnwidth=c.resizablecolumn.column.width;c.resizablecolumn.column._width=null;a(document.body).addClass("jqx-disableselect");
c._mouseDownResize=new Date;c.resizing=true;c._resizecolumn=c.resizablecolumn.column;c.resizeline=c.resizeline||a('<div style="position: absolute;"></div>');c.resizestartline=c.resizestartline||a('<div style="position: absolute;"></div>');c.resizebackground=c.resizebackground||a('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>');c.resizebackground.css("opacity",0.01);c.resizebackground.css("cursor","col-resize");c.resizeline.css("cursor","col-resize");c.resizestartline.css("cursor",
"col-resize");c.resizeline.addClass(c.toThemeProperty("jqx-grid-column-resizeline"));c.resizestartline.addClass(c.toThemeProperty("jqx-grid-column-resizestartline"));a(document.body).append(c.resizeline);a(document.body).append(c.resizestartline);a(document.body).append(c.resizebackground);var m=c.resizablecolumn.columnelement.offset();c.resizebackground.css("left",c.host.offset().left);c.resizebackground.css("top",c.host.offset().top);c.resizebackground.width(c.host.width());c.resizebackground.height(c.host.height());
c.resizebackground.css("z-index",999999999);var n=function(p){p.css("left",parseInt(m.left)+c._startcolumnwidth);var s=c._groupsheader();var r=s?c.groupsheader.height():0;var u=c.showtoolbar?c.toolbarheight:0;r+=u;var o=c.showstatusbar?c.statusbarheight:0;r+=o;var q=0;if(c.pageable)q=c.pagerheight;var t=c.hScrollBar.css("visibility")=="visible"?17:0;p.css("top",parseInt(m.top));p.css("z-index",9999999999);p.height(c.host.height()-q-r-t);if(c.enableanimations)p.show("fast");else p.show()};n(c.resizeline);
n(c.resizestartline)}});var e=function(){a(document.body).removeClass("jqx-disableselect");if(!c.resizing)return;c._mouseUpResize=new Date;var n=c._mouseUpResize-c._mouseDownResize;if(n<200){c.resizing=false;if(c._resizecolumn!=null&&c.resizeline!=null&&c.resizeline.css("display")=="block"){c._resizecolumn=null;c.resizeline.hide();c.resizestartline.hide();c.resizebackground.remove()}return}c.resizing=false;if(c.disabled)return;var l=c.host.width();if(c.vScrollBar[0].style.visibility!="hidden")l-=
20;if(l<0)l=0;if(c._resizecolumn!=null&&c.resizeline!=null&&c.resizeline.css("display")=="block"){var o=parseInt(c.resizeline.css("left"));var k=parseInt(c.resizestartline.css("left"));var j=c._startcolumnwidth+o-k;var m=c._resizecolumn.width;c._closemenu();c._resizecolumn.width=j;if(c._resizecolumn._percentagewidth!=undefined)c._resizecolumn._percentagewidth=j/l*100;c._updatecolumnwidths();c._updatecellwidths();c._raiseEvent(14,{columntext:c._resizecolumn.text,column:c._resizecolumn.getcolumnproperties(),
datafield:c._resizecolumn.datafield,oldwidth:m,newwidth:j});c._renderrows(c.virtualsizeinfo);if(c.autosavestate)if(c.savestate)c.savestate();c._resizecolumn=null;c.resizeline.hide();c.resizestartline.hide();c.resizebackground.remove()}else c.resizablecolumn=null};if(window.frameElement)if(document.referrer!=""||window.top!=null){var i="";if(window.parent&&document.referrer)i=document.referrer;if(i.indexOf(document.location.host)!=-1){var f=function(j){e()};if(window.top.document.addEventListener)window.top.document.addEventListener("mouseup",
f,false);else if(window.top.document.attachEvent)window.top.document.attachEvent("onmouseup",f)}}this.removeHandler(a(document),h);this.addHandler(a(document),h,function(k){var j=a.data(document.body,"contextmenu"+c.element.id);if(j!=null)return true;e()})}}})})(jQuery);
(function(a){a.jqx.dataview.sort=function(){this.sortby=function(q,g,m){var n=Object.prototype.toString;if(g==null){this.sortdata=null;this.refresh();return}if(g==undefined)g=true;if(g=="a"||g=="asc"||g=="ascending"||g==true)g=true;else g=false;var h=q;this.sortfield=q;this.sortfielddirection=g?"asc":"desc";if(this.sortcache==undefined)this.sortcache={};this.sortdata=[];var s=[];var o=false;if(h=="constructor")h="";if(!this.virtualmode&&this.sortcache[h]!=null){var b=this.sortcache[h];s=b._sortdata;
if(b.direction==g)s.reverse();else{if(!b.direction&&g)s.reverse();o=true}if(s.length<this.totalrecords){this.sortcache={};o=false;s=[]}}Object.prototype.toString=typeof q=="function"?q:function(){return this[q]};var f=this.records;var p=this;var k="";if(this.source.datafields)a.each(this.source.datafields,function(){if(this.name==q){if(this.type)k=this.type;return false}});if(s.length==0)if(f.length){var c=f.length;for(var j=0;j<c;j++){var l=f[j];if(l!=null){var r=l;var e=r.toString();s.push({sortkey:e,
value:r,index:j})}}}else{var d=false;for(obj in f){var l=f[obj];if(l==undefined){d=true;break}var r=l;s.push({sortkey:r.toString(),value:r,index:obj})}if(d)a.each(f,function(t,u){s.push({sortkey:u.toString(),value:u,index:t})})}if(!o)if(m==null)s.sort(this._compare);else s.sort(m);if(!g)s.reverse();Object.prototype.toString=n;this.sortdata=s;this.sortcache[h]={_sortdata:s,direction:g};this.reload(this.records,this.rows,this.filters,this.updated,true)},this.clearsortdata=function(){this.sortcache=
{};this.sortdata=[]};this._compare=function(c,b){var c=c.sortkey;var b=b.sortkey;if(c===undefined)c=null;if(b===undefined)b=null;if(c===null&&b===null)return 0;if(c===null&&b!==null)return 1;if(c!==null&&b===null)return-1;if(a.jqx.dataFormat)if(a.jqx.dataFormat.isNumber(c)&&a.jqx.dataFormat.isNumber(b)){if(c<b)return-1;if(c>b)return 1;return 0}else if(a.jqx.dataFormat.isDate(c)&&a.jqx.dataFormat.isDate(b)){if(c<b)return-1;if(c>b)return 1;return 0}else if(!a.jqx.dataFormat.isNumber(c)&&!a.jqx.dataFormat.isNumber(b)){c=
String(c).toLowerCase();b=String(b).toLowerCase()}try{if(c<b)return-1;if(c>b)return 1}catch(d){var e=d}return 0};this._equals=function(c,b){return this._compare(c,b)===0}};a.extend(a.jqx._jqxGrid.prototype,{_rendersortcolumn:function(){var b=this;var c=this.getsortcolumn();if(this.sortdirection)a.each(this.columns.records,function(e,f){var d=a.data(document.body,"groupsortelements"+this.datafield);if(c==null||this.datafield!=c){a(this.sortasc).hide();a(this.sortdesc).hide();if(d!=null){d.sortasc.hide();
d.sortdesc.hide()}}else if(b.sortdirection.ascending){a(this.sortasc).show();a(this.sortdesc).hide();if(d!=null){d.sortasc.show();d.sortdesc.hide()}}else{a(this.sortasc).hide();a(this.sortdesc).show();if(d!=null){d.sortasc.hide();d.sortdesc.show()}}})},getsortcolumn:function(){if(this.sortcolumn)return this.sortcolumn;return null},removesort:function(){this.sortby(null)},sortby:function(c,e,d){if(this._loading){alert(this.loadingerrormessage);return false}if(c==null){e=null;c=this.sortcolumn}if(c){var b=
this;if(d==undefined&&b.source.sortcomparer!=null)d=b.source.sortcomparer;if(e=="a"||e=="asc"||e=="ascending"||e==true)ascending=true;else ascending=false;var f=b.getcolumn(c);if(f==undefined||f==null)return;if(e!=null)b.sortdirection={ascending:ascending,descending:!ascending};else b.sortdirection={ascending:false,descending:false};if(e!=null)b.sortcolumn=c;else b.sortcolumn=null;if(b.source.sort||b.virtualmode){b.dataview.sortfield=c;if(e==null)b.dataview.sortfielddirection="";else b.dataview.sortfielddirection=
ascending?"asc":"desc";if(b.source.sort)b.source.sort(c,e)}else b.dataview.sortby(c,e,d);if(b.groupable&&b.groups.length>0){b._render(true,false,false);if(b._updategroupheadersbounds)b._updategroupheadersbounds()}else{if(b.pageable)b.dataview.updateview();b._updaterowsproperties();b.rendergridcontent(true)}b._raiseEvent(6,{sortinformation:b.getsortinformation()})}},_togglesort:function(d){var b=this;if(d.sortable&&b.sortable){var c=b.getsortinformation();var e=null;if(c.sortcolumn!=null&&c.sortcolumn==
d.datafield){e=c.sortdirection.ascending;if(b.sorttogglestates>1)if(e==true)e=false;else e=null;else e=!e}else e=true;b.sortby(d.datafield,e,null)}}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{_updatefilterrowui:function(f){var l=this.columns.records.length;var e=0;for(var h=0;h<l;h++){var g=this.columns.records[h];var c=g.width;if(c<g.minwidth)c=g.minwidth;if(c>g.maxwidth)c=g.maxwidth;var k=a(this.filterrow[0].cells[h]);k.css("left",e);var i=true;if(k.width()==c)i=false;if(f)i=true;k.width(c);k[0].left=e;if(!(g.hidden&&g.hideable))e+=c;else k.css("display","none");if(!i)continue;if(g.createfilterwidget&&g.filtertype=="custom")g.createfilterwidget(g,
k);else if(g.filterable){var d=function(m,n){var j=a(n.children()[0]);j.width(c-10)};switch(g.filtertype){case "number":a(k.children()[0]).width(c);k.find("input").width(c-30);break;case "date":if(this.host.jqxDateTimeInput)a(k.children()[0]).jqxDateTimeInput({width:c-10});else d(this,k);break;case "textbox":case "default":d(this,k);break;case "list":case "checkedlist":if(this.host.jqxDropDownList)a(k.children()[0]).jqxDropDownList({width:c-10});else d(this,k);break;case "bool":case "boolean":if(!this.host.jqxCheckBox)d(this,
k);break}}}var b=a(this.filterrow.children()[0]);b.width(parseInt(e)+2);b.height(this.filterrowheight)},clearfilterrow:function(){this._disablefilterrow=true;var b=this.columns.records.length;var f=0;for(var d=0;d<b;d++){var c=this.columns.records[d];var g=a(this.filterrow[0].cells[d]);if(c.filterable){var e=function(i,j){var h=a(j.children()[0]);h.val("")};switch(c.filtertype){case "number":g.find("input").val("");break;case "date":if(this.host.jqxDateTimeInput)a(g.children()[0]).jqxDateTimeInput("setDate",
null);else e(this,g);break;case "textbox":case "default":e(this,g);break;case "list":if(this.host.jqxDropDownList)a(g.children()[0]).jqxDropDownList("clearSelection");else e(this,g);break;case "checkedlist":if(this.host.jqxDropDownList)a(g.children()[0]).jqxDropDownList("checkAll");else e(this,g);break;case "bool":case "boolean":if(!this.host.jqxCheckBox)e(this,g);else a(g.children()[0]).jqxCheckBox({checked:null});break}}}this._disablefilterrow=false},_applyfilterfromfilterrow:function(){if(this._disablefilterrow==
true)return;var z=this.columns.records.length;var C=this;for(var t=0;t<z;t++){var k=new a.jqx.filter;var u=this.columns.records[t];if(!u.filterable)continue;var f=C._getcolumntypebydatafield(u);var d=C._getfiltertype(f);var l=1;var D=true;var e=u.filtertype;var A=function(j,J,H){var i=true;if(j._filterwidget){var F=j._filterwidget.val();if(F!=""){var I="equal";if(J=="stringfilter")var I="contains";if(j.filtercondition!=undefined)I=j.filtercondition;var G=H.createfilter(J,F,I);H.addfilter(l,G)}else i=
false}return i};switch(u.filtertype){case "date":if(u._filterwidget.jqxDateTimeInput){var p=u._filterwidget.jqxDateTimeInput("getRange");if(p!=null&&p.from!=null&&p.to!=null){var o="GREATER_THAN_OR_EQUAL";var r=new Date(0);r.setHours(0);r.setFullYear(p.from.getFullYear(),p.from.getMonth(),p.from.getDate());var q=new Date(0);q.setHours(0);q.setFullYear(p.to.getFullYear(),p.to.getMonth(),p.to.getDate());var y=k.createfilter(d,r,o);k.addfilter(0,y);var c="LESS_THAN_OR_EQUAL";var x=k.createfilter(d,q,
c);k.addfilter(0,x)}else D=false}else D=A(u,d,k);break;case "number":if(u._filterwidget){var p=u._filterwidget.find("input").val();var h=u._filterwidget.find(".filter").jqxDropDownList("selectedIndex");var w=k.getoperatorsbyfiltertype(d)[h];if(C.updatefilterconditions){var E=C.updatefilterconditions(d,k.getoperatorsbyfiltertype(d));if(E!=undefined)k.setoperatorsbyfiltertype(d,E);var w=k.getoperatorsbyfiltertype(d)[h]}var n=w=="NULL"||w=="NOT_NULL";var s=w=="EMPTY"||w=="NOT_EMPTY";if(p!=undefined&&
p.length>0||n||s){y=k.createfilter(d,p,w,null,u.cellsformat,C.gridlocalization);k.addfilter(0,y)}else D=false}else D=false;break;case "textbox":case "default":D=A(u,d,k);break;case "bool":case "boolean":if(u._filterwidget.jqxCheckBox){var p=u._filterwidget.jqxCheckBox("checked");if(p!=null){var o="equal";var m=k.createfilter(d,p,o);k.addfilter(l,m)}else D=false}else D=A(u,d,k);break;case "list":var g=u._filterwidget.jqxDropDownList("listBox");if(g.selectedIndex>0){var b=g.getItem(g.selectedIndex);
var p=b.value;var o="equal";var m=k.createfilter(d,p,o);k.addfilter(l,m)}else D=false;break;case "checkedlist":if(u._filterwidget.jqxDropDownList){var g=u._filterwidget.jqxDropDownList("listBox");var B=g.getCheckedItems();if(B.length==0){var l=1;var p="Empty";var o="equal";var m=k.createfilter(d,p,o);k.addfilter(l,m);D=true}else if(B.length!=g.items.length)for(var v=0;v<B.length;v++){var p=B[v].value;var o="equal";var m=k.createfilter(d,p,o);k.addfilter(l,m)}else D=false}else D=A(u,d,k);break}if(D)this.addfilter(u.datafield,
k,false);else this.removefilter(u.datafield,false)}this.applyfilters()},_updatefilterrow:function(){var b=a('<div style="position: relative;" id="row00'+this.element.id+'"></div>');var f=0;var o=this.columns.records.length;var m=this.toThemeProperty("jqx-grid-cell");m+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var q=o+10;var r=new Array;var n=this;this.filterrow[0].cells=r;b.height(this.filterrowheight);this.filterrow.children().detach();this.filterrow.append(b);if(!this._filterrowcache)this._filterrowcache=
new Array;var g=false;var d=new Array;for(var h=0;h<o;h++){var e=this.columns.records[h];var c=e.width;if(c<e.minwidth)c=e.minwidth;if(c>e.maxwidth)c=e.maxwidth;var l=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+m+'"></div>');b.append(l);l.css("left",f);l.css("z-index",q--);l.width(c);l[0].left=f;if(!(e.hidden&&e.hideable))f+=c;else l.css("display","none");r[r.length]=l[0];var k=true;if(this.groupable){var p=this.rowdetails?1:0;if(this.groups.length+p>h)k=false}if(this.rowdetails&&
h==0)k=false;if(k)if(e.filtertype=="custom"&&e.createfilterwidget){var i=function(){n._applyfilterfromfilterrow()};e.createfilterwidget(e,l,i)}else if(e.filterable)if(this._filterrowcache[e.datafield]){g=true;l.append(this._filterrowcache[e.datafield]);e._filterwidget=this._filterrowcache[e.datafield]}else{this._addfilterwidget(e,l,c);d[e.datafield]=e._filterwidget}}this._filterrowcache=d;if(a.browser.msie&&a.browser.version<8)b.css("z-index",q--);b.width(parseInt(f)+2);this.filterrow.addClass(m);
this.filterrow.css("border-top-width","1px");if(g)this._updatefilterrowui(true)},_addfilterwidget:function(z,d,x){var D=this;var v="";for(var B=0;B<D.dataview.filters.length;B++){var t=D.dataview.filters[B];if(t.datafield&&t.datafield==z.datafield){v=t.filter.getfilters()[0].value;break}}var g=function(E,F){var f=a('<input autocomplete="off" type="textarea"/>');f[0].id=a.jqx.utilities.createId();f.addClass(E.toThemeProperty("jqx-input"));f.addClass(E.toThemeProperty("jqx-widget-content"));f.appendTo(F);
f.width(x-10);f.height(E.filterrowheight-10);f.css("margin","4px");if(z.createfilterwidget)z.createfilterwidget(z,F,f);z._filterwidget=f;f.bind("keydown",function(G){if(G.keyCode=="13")E._applyfilterfromfilterrow();if(f[0]._writeTimer)clearTimeout(f[0]._writeTimer);f[0]._writeTimer=setTimeout(function(){if(E["_oldWriteText"+f[0].id]!=f.val()){E._applyfilterfromfilterrow();E["_oldWriteText"+f[0].id]=f.val()}},400)});E.host.removeClass("jqx-disableselect");E.content.removeClass("jqx-disableselect");
f.val(v)};switch(z.filtertype){case "number":var k=a("<div></div>");k.width(d.width());k.height(this.filterrowheight);d.append(k);var x=d.width()-20;var o=function(F,G,f){var E=a('<input style="float: left;" autocomplete="off" type="textarea"/>');E[0].id=a.jqx.utilities.createId();E.addClass(D.toThemeProperty("jqx-input"));E.addClass(D.toThemeProperty("jqx-widget-content"));E.appendTo(F);E.width(G-10);E.height(D.filterrowheight-10);E.css("margin","4px");E.css("margin-right","2px");E.bind("keydown",
function(H){if(H.keyCode=="13")D._applyfilterfromfilterrow();if(E[0]._writeTimer)clearTimeout(E[0]._writeTimer);E[0]._writeTimer=setTimeout(function(){if(D["_oldWriteText"+E[0].id]!=E.val()){D._applyfilterfromfilterrow();D["_oldWriteText"+E[0].id]=E.val()}},400)});E.val(v);return E};o(k,x);var y=D._getfiltersbytype("number");var p=a("<div class='filter' style='float: left;'></div>");p.css("margin-top","4px");p.appendTo(k);var h=2;if(z.filtercondition!=null){var e=y.indexOf(z.filtercondition);if(e!=
-1)h=e}p.jqxDropDownList({dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:true,selectedIndex:h,width:18,height:20,dropDownHeight:150,dropDownWidth:170,source:y,theme:D.theme});p.jqxDropDownList({selectionRenderer:function(f){return""}});p.jqxDropDownList("setContent","");p.find(".jqx-dropdownlist-content").hide();if(z.createfilterwidget)z.createfilterwidget(z,d,k);z._filterwidget=k;p.bind("select",function(){if(z._filterwidget.find("input").val().length>0)D._applyfilterfromfilterrow()});
break;case "textbox":case "default":default:g(this,d);break;case "date":if(this.host.jqxDateTimeInput){var b=a("<div></div>");b.css("margin","4px");b.appendTo(d);b.jqxDateTimeInput({showFooter:true,formatString:z.cellsformat,selectionMode:"range",value:null,theme:this.theme,width:x-10,height:this.filterrowheight-10});if(z.createfilterwidget)z.createfilterwidget(z,d,b);z._filterwidget=b;b.bind("valuechanged",function(f){D._applyfilterfromfilterrow()})}else g(this,d);break;case "list":case "checkedlist":if(this.host.jqxDropDownList){var w=
this.source._source?true:false;var n=null;if(!w)n=new a.jqx.dataAdapter(this.source,{autoBind:false,uniqueDataFields:[z.datafield],async:false});else{var A={localdata:this.source.records,datatype:this.source.datatype,async:false};n=new a.jqx.dataAdapter(A,{autoBind:false,async:false,uniqueDataFields:[z.datafield]})}if(z.filteritems&&z.filteritems.length>0){var A={localdata:z.filteritems,datatype:this.source.datatype,async:false};n=new a.jqx.dataAdapter(A,{autoBind:false,async:false})}var j=true;var p=
a("<div></div>");p.css("margin","4px");var q=z.datafield;var r=z.filtertype=="checkedlist"?true:false;p.jqxDropDownList({checkboxes:r,source:n,autoDropDownHeight:j,theme:this.theme,width:x-10,height:this.filterrowheight-10,displayMember:q,valueMember:q});p.appendTo(d);var m=p.jqxDropDownList("getItems");var c=p.jqxDropDownList("listBox");if(m.length<8)p.jqxDropDownList("autoDropDownHeight",true);else p.jqxDropDownList("autoDropDownHeight",false);if(r){p.jqxDropDownList({selectionRenderer:function(){return D.gridlocalization.filterselectstring}});
var u=a('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+D.gridlocalization.filterselectstring+"</span>");u.addClass(this.toThemeProperty("jqx-item"));c.insertAt(D.gridlocalization.filterselectallstring,0);p.jqxDropDownList("setContent",u);var i=true;var C=new Array;c.checkAll();c.host.bind("checkChange",function(F){p[0]._selectionChanged=true;if(!i)return;if(F.args.label!=D.gridlocalization.filterselectallstring){i=false;c.host.jqxListBox("checkIndex",
0);var f=c.host.jqxListBox("getCheckedItems");var E=c.host.jqxListBox("getItems");if(f.length==1)c.host.jqxListBox("uncheckIndex",0);else if(E.length!=f.length)c.host.jqxListBox("indeterminateIndex",0);i=true}else{i=false;if(F.args.checked)c.host.jqxListBox("checkAll");else c.host.jqxListBox("uncheckAll");i=true}})}else{c.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0);p.jqxDropDownList({selectedIndex:0})}if(z.createfilterwidget)z.createfilterwidget(z,d,p);z._filterwidget=p;
var l=p.jqxDropDownList("dropdownlistWrapper");if(z.filtertype=="list")this.addHandler(p,"select",function(f){D._applyfilterfromfilterrow()});else this.addHandler(p,"close",function(f){if(p[0]._selectionChanged){D._applyfilterfromfilterrow();p[0]._selectionChanged=false}})}else g(this,d);break;case "bool":case "boolean":if(this.host.jqxCheckBox){var s=a('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>');s.appendTo(d);s.jqxCheckBox({enableContainerClick:false,
animationShowDelay:0,animationHideDelay:0,hasThreeStates:true,theme:this.theme,checked:null});if(z.createfilterwidget)z.createfilterwidget(z,d,s);if(v===true||v=="true")s.jqxCheckBox({checked:true});else if(v===false||v=="false")s.jqxCheckBox({checked:false});z._filterwidget=s;s.bind("change",function(f){if(f.args)D._applyfilterfromfilterrow()})}else g(this,d);break}},_renderfiltercolumn:function(){var b=this;if(this.filterable)a.each(this.columns.records,function(c,d){if(b.autoshowfiltericon)if(this.filter)a(this.filtericon).show();
else a(this.filtericon).hide();else if(this.filterable)a(this.filtericon).show()})},_getcolumntypebydatafield:function(e){var f=this;var d="string";var c=f.source.datafields||(f.source._source?f.source._source.datafields:null);if(c){var h="";a.each(c,function(){if(this.name==e.datafield){if(this.type)h=this.type;return false}});if(h)return h}if(e!=null){if(this.dataview.cachedrecords==undefined)return d;var b=null;if(!this.virtualmode){if(this.dataview.cachedrecords.length==0)return d;b=this.dataview.cachedrecords[0][e.datafield];
if(b!=null&&b.toString()=="")return"string"}else a.each(this.dataview.cachedrecords,function(){b=this[e.datafield];return false});if(b!=null)if(typeof b=="boolean")d="boolean";else if(a.jqx.dataFormat.isNumber(b))d="number";else{var g=new Date(b);if(g.toString()=="NaN"||g.toString()=="Invalid Date")if(a.jqx.dataFormat){g=a.jqx.dataFormat.tryparsedate(b);if(g!=null)return"date";else d="string"}else d="string";else d="date"}}return d},_getfiltersbytype:function(b){var c=this;var d="";switch(b){case "number":case "float":case "int":d=
c.gridlocalization.filternumericcomparisonoperators;break;case "date":d=c.gridlocalization.filterdatecomparisonoperators;break;case "boolean":case "bool":d=c.gridlocalization.filterbooleancomparisonoperators;break;case "string":default:d=c.gridlocalization.filterstringcomparisonoperators;break}return d},_updatefilterpanel:function(x,c,d){if(x==null||x==undefined)x=this;var e=x._getcolumntypebydatafield(d);var s=x._getfiltersbytype(e);if(!x.host.jqxDropDownList){alert("jqxdropdownlist is not loaded.");
return}var n=a(c).find("#filterclearbutton"+x.element.id);var h=a(c).find("#filterbutton"+x.element.id);var u=a(c).find("#filter1"+x.element.id);var r=a(c).find("#filter2"+x.element.id);var t=a(c).find("#filter3"+x.element.id);var q=a(c).find(".filtertext1"+x.element.id);var p=a(c).find(".filtertext2"+x.element.id);q.val("");p.val("");this.removeHandler(h,"click");this.addHandler(h,"click",function(){x._buildfilter(x,c,d);x._closemenu()});this.removeHandler(n,"click");this.addHandler(n,"click",function(){x._clearfilter(x,
c,d);x._closemenu()});if(u.jqxDropDownList("source")!=s){u.jqxDropDownList({enableBrowserBoundsDetection:false,source:s});t.jqxDropDownList({enableBrowserBoundsDetection:false,source:s})}if(e=="boolean"||e=="bool"){u.jqxDropDownList({autoDropDownHeight:true,selectedIndex:0});t.jqxDropDownList({autoDropDownHeight:true,selectedIndex:0})}else{u.jqxDropDownList({autoDropDownHeight:false,selectedIndex:2});t.jqxDropDownList({autoDropDownHeight:false,selectedIndex:2})}r.jqxDropDownList({selectedIndex:0});
var l=d.filter;if(l!=null){var w=l.getfilterat(0);var v=l.getfilterat(1);var k=l.getoperatorat(0);var i=[];var b="";switch(e){case "number":case "int":case "float":case "decimal":b="numericfilter";i=l.getoperatorsbyfiltertype("numericfilter");break;case "boolean":case "bool":b="booleanfilter";i=l.getoperatorsbyfiltertype("booleanfilter");break;case "date":case "time":b="datefilter";i=l.getoperatorsbyfiltertype("datefilter");break;case "string":b="stringfilter";i=l.getoperatorsbyfiltertype("stringfilter");
break}if(x.updatefilterconditions){var y=x.updatefilterconditions(b,i);if(y!=undefined){l.setoperatorsbyfiltertype(b,y);i=y}}var j=this.enableanimations?"default":"none";if(w!=null){var g=i.indexOf(w.comparisonoperator);var o=w.filtervalue;q.val(o);u.jqxDropDownList({selectedIndex:g,animationType:j})}if(v!=null){var f=i.indexOf(v.comparisonoperator);var m=v.filtervalue;p.val(m);t.jqxDropDownList({selectedIndex:f,animationType:j})}if(l.getoperatorat(0)==undefined)r.jqxDropDownList({selectedIndex:0,
animationType:j});else if(l.getoperatorat(0)=="and"||l.getoperatorat(0)==0)r.jqxDropDownList({selectedIndex:0});else r.jqxDropDownList({selectedIndex:1})}if(x.updatefilterpanel)x.updatefilterpanel(u,t,r,q,p,h,n,l,b,i);q.focus();setTimeout(function(){q.focus()},10)},_getfiltertype:function(b){var c="stringfilter";switch(b){case "number":case "int":case "float":case "decimal":c="numericfilter";break;case "boolean":case "bool":c="booleanfilter";break;case "date":case "time":c="datefilter";break;case "string":c=
"stringfilter";break}return c},_buildfilter:function(A,d,e){var x=a(d).find("#filter1"+A.element.id);var j=a(d).find("#filter2"+A.element.id);var u=a(d).find("#filter3"+A.element.id);var q=a(d).find(".filtertext1"+A.element.id);var p=a(d).find(".filtertext2"+A.element.id);var o=q.val();var m=p.val();var f=A._getcolumntypebydatafield(e);var r=A._getfiltersbytype(f);var h=x.jqxDropDownList("selectedIndex");var w=j.jqxDropDownList("selectedIndex");var g=u.jqxDropDownList("selectedIndex");var i=new a.jqx.filter;
var z=null;var y=null;var c=A._getfiltertype(f);if(A.updatefilterconditions){var B=A.updatefilterconditions(c,i.getoperatorsbyfiltertype(c));if(B!=undefined)i.setoperatorsbyfiltertype(c,B)}var b=false;var v=i.getoperatorsbyfiltertype(c)[h];var u=i.getoperatorsbyfiltertype(c)[g];var n=v=="NULL"||v=="NOT_NULL";var t=v=="EMPTY"||v=="NOT_EMPTY";if(v==undefined)v=i.getoperatorsbyfiltertype(c)[0];if(u==undefined)u=i.getoperatorsbyfiltertype(c)[0];if(o.length>0||n||t){z=i.createfilter(c,o,v,null,e.cellsformat,
A.gridlocalization);i.addfilter(w,z);b=true}var l=u=="NULL"||u=="NOT_NULL";var s=u=="EMPTY"||u=="NOT_EMPTY";if(m.length>0||l||s){y=i.createfilter(c,m,u,null,e.cellsformat,A.gridlocalization);i.addfilter(w,y);b=true}if(b){var k=e.datafield;this.addfilter(k,i,true)}else this._clearfilter(A,d,e)},_clearfilter:function(e,c,d){var b=d.datafield;this.removefilter(b,true)},addfilter:function(d,e,c){if(this._loading){alert(this.loadingerrormessage);return false}var f=this.getcolumn(d);var b=this._getcolumn(d);
if(f==undefined||f==null)return;f.filter=e;b.filter=e;this.dataview.addfilter(d,e);if(c==true&&c!=undefined)this.applyfilters()},removefilter:function(d,c){if(this._loading){alert(this.loadingerrormessage);return false}var e=this.getcolumn(d);var b=this._getcolumn(d);if(e==undefined||e==null)return;if(e.filter==null)return;this.dataview.removefilter(d,e.filter);e.filter=null;b.filter=null;if(c==true||c!=undefined)this.applyfilters()},applyfilters:function(){var c=false;if(this.dataview.filters.length>=
0&&(this.virtualmode||!this.source.localdata))if(this.source!=null&&this.source.filter){var f=-1;if(this.pageable){f=this.dataview.pagenum;this.dataview.pagenum=0}this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length);if(this.pageable)this.dataview.pagenum=f}if(!this.virtualmode){var b=this.selectedrowindexes;var d=this;if(b.length>0)if(this.dataview.filters&&this.dataview.filters.length==0){var e=new Array;a.each(b,function(){var g=d.getrowdata(this);if(g&&g.dataindex)e[e.length]=
g.dataindex});this.selectedrowindexes=e;this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[0]:-1}this.dataview.refresh();if(b.length>0)if(this.dataview.filters&&this.dataview.filters.length>0){var e=new Array;a.each(b,function(){var g=d.dataview._dataIndexToBoundIndex[this];if(g!=null)e[e.length]=g.boundindex});this.selectedrowindexes=e;this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[0]:-1}}else{if(this.pageable){this.dataview.updateview();
if(this.gotopage)this.gotopage(0)}this.rendergridcontent(false,false);this._raiseEvent(13,{filters:this.dataview.filters});return}if(this.pageable){this.dataview.updateview();if(this.gotopage){this.gotopage(0);this.updatepagerdetails()}}this._updaterowsproperties();if(!this.groupable||this.groupable&&this.groups.length==0){this._rowdetailscache=new Array;this.virtualsizeinfo=null;this._pagescache=new Array;this.rendergridcontent(true,true);this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo);
if(this.showaggregates&&this._updatecolumnsaggregates)this._updatecolumnsaggregates()}else{this._rowdetailscache=new Array;this._render(true,true,false,false)}this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){var d=new Array;for(var b=0;b<this.dataview.filters.length;b++){var c=this.getcolumn(this.dataview.filters[b].datafield);d[b]={filter:this.dataview.filters[b].filter,filtercolumn:c.datafield,filtercolumntext:c.text}}return d},clearfilters:function(b){var c=
this;if(this.showfilterrow)this.clearfilterrow();if(this.columns.records)a.each(this.columns.records,function(){c.removefilter(this.datafield)});if(b==true||b!=undefined)this.applyfilters()},_destroyfilterpanel:function(){var e=a(a.find("#filterclearbutton"+this.element.id));var d=a(a.find("#filterbutton"+this.element.id));var h=a(a.find("#filter1"+this.element.id));var c=a(a.find("#filter2"+this.element.id));var g=a(a.find("#filter3"+this.element.id));var f=a(a.find(".filtertext1"+this.element.id));
var b=a(a.find(".filtertext2"+this.element.id));if(f.length>0&&b.length>0){f.removeClass();b.removeClass();f.remove();b.remove()}if(e.length>0){e.jqxButton("destroy");d.jqxButton("destroy");this.removeHandler(e,"click");this.removeHandler(d,"click")}if(h.length>0)h.jqxDropDownList("destroy");if(c.length>0)c.jqxDropDownList("destroy");if(g>0)g.jqxDropDownList("destroy")},_initfilterpanel:function(r,b,c,k){if(r==null||r==undefined)r=this;b[0].innerHTML="";var o=a("<div class='filter' style='margin-left: 7px;'></div>");
b.append(o);var j=a("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'></div>");j.text(r.gridlocalization.filtershowrowstring);var p=a("<div class='filter' id='filter1"+r.element.id+"'></div>");var g=a("<div class='filter' id='filter2"+r.element.id+"' style='margin-bottom: 3px;'></div>");var n=a("<div class='filter' id='filter3"+r.element.id+"'></div>");var d=r._getcolumntypebydatafield(c);if(!p.jqxDropDownList){alert("jqxdropdownlist is not loaded.");return}var l=r._getfiltersbytype(d);
var h=a("<div class='filter'><input class='filtertext1"+r.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>");h.find("input").addClass(this.toThemeProperty("jqx-input"));h.find("input").addClass(this.toThemeProperty("jqx-widget-content"));h.find("input").addClass(this.toThemeProperty("jqx-rc-all"));h.find("input").width(k-15);var i=a("<div class='filter'><input class='filtertext2"+r.element.id+"' style='height: 20px; margin-top: 3px;' type='text'></input></div>");
i.find("input").addClass(this.toThemeProperty("jqx-input"));i.find("input").addClass(this.toThemeProperty("jqx-widget-content"));i.find("input").addClass(this.toThemeProperty("jqx-rc-all"));i.find("input").width(k-15);var f=a("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'></div>");var e=a('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">'+r.gridlocalization.filterstring+"</span>");f.append(e);var q=
a('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">'+r.gridlocalization.filterclearstring+"</span>");f.append(q);e.jqxButton({height:20,theme:r.theme});q.jqxButton({height:20,theme:r.theme});var s=function(u){if(u){if(u.text().indexOf("case sensitive")!=-1){var t=u.text();t=t.replace("case sensitive","match case");u.text(t)}u.css("font-family",r.host.css("font-family"));u.css("font-size",r.host.css("font-size"));return u}return""};
o.append(j);o.append(p);p.jqxDropDownList({enableBrowserBoundsDetection:false,selectedIndex:2,width:k-15,height:20,dropDownHeight:150,dropDownWidth:k-15,selectionRenderer:s,source:l,theme:r.theme});o.append(h);var m=new Array;m[0]=r.gridlocalization.filterandconditionstring;m[1]=r.gridlocalization.filterorconditionstring;g.jqxDropDownList({enableBrowserBoundsDetection:false,autoDropDownHeight:true,selectedIndex:0,width:60,height:20,source:m,selectionRenderer:s,theme:r.theme});o.append(g);n.jqxDropDownList({enableBrowserBoundsDetection:false,
selectedIndex:2,width:k-15,height:20,dropDownHeight:150,dropDownWidth:k-15,selectionRenderer:s,source:l,theme:r.theme});o.append(n);o.append(i);o.append(f);if(r.updatefilterpanel)r.updatefilterpanel(p,n,g,h,i,e,q,null,null,l)}});a.jqx.filter=function(){this.operator="and";var h=0;var e=1;var k=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE",
"NULL","NOT_NULL"];var m=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"];var n=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"];var g=["EQUAL","NOT_EQUAL"];var f=new Array;var l=new Array;this.evaluate=function(s){var q=true;for(var r=0;r<f.length;r++){var p=f[r].evaluate(s);if(r==0)q=p;else if(l[r]==e||l[r]=="or")q=q||p;else q=q&&p}return q};this.getfilterscount=function(){return f.length};
this.setoperatorsbyfiltertype=function(p,q){switch(p){case "numericfilter":m=q;break;case "stringfilter":k=q;break;case "datefilter":n=q;break;case "booleanfilter":g=q;break}};this.getoperatorsbyfiltertype=function(p){var q=new Array;switch(p){case "numericfilter":q=m.slice(0);break;case "stringfilter":q=k.slice(0);break;case "datefilter":q=n.slice(0);break;case "booleanfilter":q=g.slice(0);break}return q};var j=function(){var p=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};
return p()+"-"+p()+"-"+p()};this.createfilter=function(t,q,s,r,p,u){if(t==null||t==undefined)return null;switch(t){case "numericfilter":return new i(q,s.toUpperCase());case "stringfilter":return new o(q,s.toUpperCase());case "datefilter":return new c(q,s.toUpperCase(),p,u);case "booleanfilter":return new d(q,s.toUpperCase());case "custom":return new b(q,s.toUpperCase(),r)}return null};this.getfilters=function(){var p=new Array;for(var q=0;q<f.length;q++){var r={value:f[q].filtervalue,condition:f[q].comparisonoperator,
operator:l[q],type:f[q].type};p[q]=r}return p};this.addfilter=function(p,q){f[f.length]=q;q.key=j();l[l.length]=p};this.removefilter=function(q){for(var p=0;p<f.length;p++)if(f[p].key==q.key){f.splice(p,1);l.splice(p,1);break}};this.getoperatorat=function(p){if(p==undefined||p==null)return null;if(p<0||p>f.length)return null;return l[p]};this.setoperatorat=function(q,p){if(q==undefined||q==null)return null;if(q<0||q>f.length)return null;l[p]=p};this.getfilterat=function(p){if(p==undefined||p==null)return null;
if(p<0||p>f.length)return null;return f[p]};this.setfilterat=function(p,q){if(p==undefined||p==null)return null;if(p<0||p>f.length)return null;q.key=j();f[p]=q};this.clear=function(){f=new Array;l=new Array};var o=function(q,p){this.filtervalue=q;this.comparisonoperator=p;this.type="stringfilter";this.evaluate=function(u){var t=this.filtervalue;var r=this.comparisonoperator;if(u==null||u==undefined){if(r=="NULL")return true;return false}var v="";try{v=u.toString()}catch(s){return true}switch(r){case "EQUAL":return a.jqx.string.equalsIgnoreCase(v,
t);case "EQUAL_CASE_SENSITIVE":return a.jqx.string.equals(v,t);case "CONTAINS":return a.jqx.string.containsIgnoreCase(v,t);case "CONTAINS_CASE_SENSITIVE":return a.jqx.string.contains(v,t);case "DOES_NOT_CONTAIN":return!a.jqx.string.containsIgnoreCase(v,t);case "DOES_NOT_CONTAIN_CASE_SENSITIVE":return!a.jqx.string.contains(v,t);case "EMPTY":return v=="";case "NOT_EMPTY":return v!="";case "NOT_NULL":return v!=null;case "STARTS_WITH":return a.jqx.string.startsWithIgnoreCase(v,t);case "ENDS_WITH":return a.jqx.string.endsWithIgnoreCase(v,
t);case "ENDS_WITH_CASE_SENSITIVE":return a.jqx.string.endsWith(v,t);case "STARTS_WITH_CASE_SENSITIVE":return a.jqx.string.startsWith(v,t);default:return false}}};var d=function(q,p){this.filtervalue=q;this.comparisonoperator=p;this.type="booleanfilter";this.evaluate=function(t){var s=this.filtervalue;var r=this.comparisonoperator;if(t==null||t==undefined){if(r=="NULL")return true;return false}var u=t;switch(r){case "EQUAL":return u==s||u.toString()==s.toString();case "NOT_EQUAL":return u!=s&&u.toString()!=
s.toString();default:return false}}};var i=function(q,p){this.filtervalue=q;this.comparisonoperator=p;this.type="numericfilter";this.evaluate=function(u){var t=this.filtervalue;var r=this.comparisonoperator;if(u==null||u==undefined){if(r=="NOT_NULL")return false;if(r=="NULL")return true;else return false}else{if(r=="NULL")return false;if(r=="NOT_NULL")return true}var v=u;try{v=parseFloat(v)}catch(s){if(u.toString()!="")return false}switch(r){case "EQUAL":return v==t;case "NOT_EQUAL":return v!=t;case "GREATER_THAN":return v>
t;case "GREATER_THAN_OR_EQUAL":return v>=t;case "LESS_THAN":return v<t;case "LESS_THAN_OR_EQUAL":return v<=t;default:return true}}};var c=function(s,q,r,v){this.filtervalue=s;this.type="datefilter";if(r!=undefined&&v!=undefined){var t=a.jqx.dataFormat.parsedate(s,r,v);if(t!=null)this.filterdate=t;else{var p=a.jqx.dataFormat.tryparsedate(s,v);if(p!=null)this.filterdate=p}}else{var u=new Date(s);if(u.toString()=="NaN"||u.toString()=="Invalid Date")this.filterdate=a.jqx.dataFormat.tryparsedate(s);else this.filterdate=
u}this.comparisonoperator=q;this.evaluate=function(D){var E=this.filtervalue;var B=this.comparisonoperator;if(D==null||D==undefined){if(B=="NOT_NULL")return false;if(B=="NULL")return true;else return false}else{if(B=="NULL")return false;if(B=="NOT_NULL")return true}var w=new Date;w.setFullYear(1900,0,1);w.setHours(12,0,0,0);try{var z=new Date(D);if(z.toString()=="NaN"||z.toString()=="Invalid Date")D=a.jqx.dataFormat.tryparsedate(D);else D=z;w=D}catch(A){if(D.toString()!="")return false}if(this.filterdate!=
null)E=this.filterdate;else if(E.indexOf(":")!=-1||!isNaN(parseInt(E))){var C=new Date(w);C.setHours(12,0,0,0);var x=E.split(":");for(var y=0;y<x.length;y++){if(y==0)C.setHours(x[y]);if(y==1)C.setMinutes(x[y]);if(y==2)C.setSeconds(x[y])}E=C}switch(B){case "EQUAL":return w.toString()==E.toString();case "NOT_EQUAL":return w.toString()!=E.toString();case "GREATER_THAN":return w>E;case "GREATER_THAN_OR_EQUAL":return w>=E;case "LESS_THAN":return w<E;case "LESS_THAN_OR_EQUAL":return w<=E;default:return true}}};
var b=function(q,p,r){this.filtervalue=q;this.comparisonoperator=p;this.evaluate=function(t,s){return r(this.filtervalue,t,this.comparisonoperator)}}}})(jQuery);
(function(a){a.jqx.dataview.grouping=function(){this.loadgrouprecords=function(z,C,p,A,D,e,M,B,u){var H=z;var h=this;var L=new Array;for(var l=0;l<h.groups.length;l++)L[l]=h.generatekey();var F=new Array;var b=0;var L=L;var x=new Array;var K=C;var d=C;var y=h.groups.length;this.loadedrecords=new Array;this.bounditems=new Array;this.loadedrecords=new Array;this.loadedrootgroups=new Array;this.loadedgroups=new Array;this.loadedgroupsByKey=new Array;this.sortedgroups=new Array;var J=this.sortdata!=null;
var N=J?this.sortdata:this.records;for(var c=C;c<p;c++){var v={};if(!J)v=a.extend({},N[c]);else v=a.extend({},N[c].value);id=v[h.uniqueId];if(D>=B||id!=M[D][h.uniqueId]||e&&e[id])u[u.length]=D;var G=new Array;var t=0;for(var l=0;l<y;l++){var r=h.groups[l];var E=v[r];if(null==E)continue;G[t++]={value:E,hash:L[l]}}if(G.length!=y)break;var j=null;var k="";var f=-1;for(var I=0;I<G.length;I++){f++;var n=G[I].value;var s=G[I].hash;k=k+"_"+s+"_"+n;if(x[k]!=undefined&&x[k]!=null){j=x[k];continue}if(j==null){j=
{group:n,subItems:new Array,subGroups:new Array,level:0};F[b++]=j;j.uniqueid=h.generatekey();h.loadedgroupsByKey[n]=j}else{var m={group:n,subItems:new Array,subGroups:new Array,parentItem:j,level:j.level+1};h.loadedgroupsByKey[j.uniqueid+"_"+n]=m;m.uniqueid=h.generatekey();j.subGroups[j.subGroups.length++]=m;j=m}x[k]=j}if(j!=null){if(!v.uid)v.uid=this.getid(this.source.id,v,K);if(!J){v.boundindex=K;this.recordsbyid["id"+v.uid]=N[c]}else{v.boundindex=N[c].index;this.recordsbyid["id"+v.uid]=N[c].value}this.bounditems[v.boundindex]=
v;this.sortedgroups[K]=v;v.uniqueid=h.generatekey();v.parentItem=j;v.level=j.level+1;j.subItems[j.subItems.length++]=v}else{if(!v.uid)v.uid=this.getid(this.source.id,v,K);if(!J){v.boundindex=K;this.recordsbyid["id"+v.uid]=N[c]}else{v.boundindex=N[c].index;this.recordsbyid["id"+v.uid]=N[c].value}this.sortedgroups[K]=v;this.bounditems[v.boundindex]=v;v.uniqueid=h.generatekey()}D++;K++;d++}var g=function(q,O,P){for(var i=0;i<O.subItems.length;i++){O.subItems[i].visibleindex=z+P;q.rows[P]=O.subItems[i];
q.loadedrecords[P]=O.subItems[i];P++}return P};var o=function(i,P,Q){var q=function(T){if(i.aggregates==true){var R=T;var S={};if(R!=null){S.level=R.level;S.visibleindex=z+Q;S.uniqueid=i.generatekey();i.rows[Q]=S;i.loadedrecords[Q++]=S;S.totalsrow=true;if(T.subItems.length>0){R=T.subItems[T.subItems.length-1];S.parentItem=R.parentItem;if(S.parentItem.subItems)S.parentItem.subItems[S.parentItem.subItems.length]=S}else if(T.subGroups.length>0){R=T.subGroups[T.subGroups.length-1];S.level=R.level;S.parentItem=
T;T.subGroups[T.subGroups.length]=S}}}};for(subGroup in P.subGroups){var O=P.subGroups[subGroup];if(O.subGroups){i.loadedgroups[i.loadedgroups.length]=O;O.visibleindex=z+Q;i.rows[Q]=O;i.loadedrecords[Q]=O;Q++;if(O.subGroups.length>0)Q=o(i,O,Q);else if(O.subItems.length>0)Q=g(i,O,Q);q(O)}}if(P.subItems.length>0)Q=g(i,P,Q);q(P);return Q};var w=F.length;this.loadedgroups=new Array;this.rows=new Array;var H=0;for(var K=0;K<w;K++){var r=F[K];this.loadedrootgroups[K]=r;this.loadedgroups[this.loadedgroups.length]=
r;r.visibleindex=z+H;this.rows[H]=r;this.loadedrecords[H]=r;H++;H=o(this,r,H)}return H};this._updategroupsinpage=function(C,r,K,d,u,j,f){var p=new Array;var w=[];if(this.groupable&&this.groups.length>0){var B=0;var h=new Array;var g=new Array;for(var m=0;m<C.groups.length;m++)g[m]=C.generatekey();var F=0;var o=new Array;var k=0;if(f>this.totalrecords)f=this.totalrecords;for(var v=j;v<f;v++){var H=a.extend({},C.sortedgroups[v]);id=H[C.uniqueId];if(!C.pagesize||K>=C.pagesize*C.pagenum&&K<C.pagesize*
(C.pagenum+1)){if(d>=u||id!=p[d][C.uniqueId]||updated&&updated[id])w[w.length]=d;var e=new Array;var y=0;for(var m=0;m<C.groups.length;m++){var n=C.groups[m];var D=H[n];if(null==D)continue;e[y++]={value:D,hash:g[m]}}if(e.length!=C.groups.length)break;var z=null;var s="";var c=-1;for(var A=0;A<e.length;A++){c++;var G=e[A].value;var l=e[A].hash;s=s+"_"+l+"_"+G;if(h[s]!=undefined&&h[s]!=null){z=h[s];continue}if(z==null){z={group:G,subItems:new Array,subGroups:new Array,level:0};o[k++]=z;var E=C.loadedgroupsByKey[G];
z.visibleindex=E.visibleindex;z.uniqueid=E.uniqueid}else{var t={group:G,subItems:new Array,subGroups:new Array,parentItem:z,level:z.level+1};var E=C.loadedgroupsByKey[z.uniqueid+"_"+G];t.visibleindex=E.visibleindex;t.uniqueid=E.uniqueid;z.subGroups[z.subGroups.length++]=t;z=t}h[s]=z}if(z!=null){H.parentItem=z;H.level=z.level+1;z.subItems[z.subItems.length++]=H}d++}F++;K++}var x=function(L,M,q){for(var i=0;i<M.subItems.length;i++){p[q]=a.extend({},M.subItems[i]);q++}return q};var I=function(M){var q=
false;for(subGroup in M.subGroups){var L=M.subGroups[subGroup];if(L.subGroups){if(L.subGroups.length>0){var i=I(L);if(i){q=true;return true}}if(L.subItems.length>0){q=true;return true}}}if(M.subItems.length>0){q=true;return true}return q};var b=function(q,M,i){for(subGroup in M.subGroups){var L=M.subGroups[subGroup];if(L.subGroups)if(I(L)){p[i]=L;i++;if(L.subGroups.length>0)i=b(q,L,i);else if(L.subItems.length>0)i=x(q,L,i)}}if(M.subItems.length>0)i=x(q,M,i);return i};var J=0;for(var F=0;F<o.length;F++){var n=
o[F];if(I(n)){p[B]=n;B++;B=b(this,n,B)}}}return p}};a.extend(a.jqx._jqxGrid.prototype,{_initgroupsheader:function(){this.groupsheader.css("visibility","hidden");if(this._groupsheader()){this.groupsheader.css("visibility","inherit");var e=this;var c=this.gridlocalization.groupsheaderstring;this.groupsheaderdiv=this.groupsheaderdiv||a('<div style="width: 100%; position: relative;"></div>');this.groupsheaderdiv.height(this.groupsheaderheight);this.groupsheaderdiv.css("top",0);this.groupsheader.append(this.groupsheaderdiv);
this.groupheadersbounds=new Array;var d=this.groups.length;this.groupsheaderdiv.children().remove();this.groupsheaderdiv[0].innerHTML="";var b=new Array;if(d>0)a.each(this.groups,function(i){var n=this;var m=e._getColumnText(this);var l=m.label;var k=e._rendergroupcolumn(l,n);k.addClass(e.toThemeProperty("jqx-grid-group-column"));e.groupsheaderdiv.append(k);if(e.closeablegroups){var j=a(k.find(".icon-close"));e.addHandler(j,"click",function(){e.removegroupat(i);return false})}if(e.sortable)e.addHandler(k,
"click",function(){var o=e.getcolumn(n);if(o!=null)e._togglesort(o);return false});b[b.length]=k;e._handlegroupstocolumnsdragdrop(this,k);if(i<d-1){var g=k.height();var h=a('<div style="float: left; position: relative;"></div>');h.width(e.groupindentwidth/3);h.height(1);h.css("top",g/2);h.addClass(e.toThemeProperty("jqx-grid-group-column-line"));e.groupsheaderdiv.append(h)}});else{var f=a('<div style="position: relative;">'+c+"</div>");this.groupsheaderdiv.append(f)}this._groupheaders=b;this._updategroupheadersbounds()}},
_updategroupheadersbounds:function(){var c=this;var b=this.groupsheaderdiv.children().outerHeight();var d=(this.groupsheader.height()-b)/2;this.groupsheaderdiv.css("top",d);this.groupsheaderdiv.css("left",d);a.each(this._groupheaders,function(f){var e=this.offset();c.groupheadersbounds[f]={left:e.left,top:e.top,width:this.outerWidth(),height:this.outerHeight(),index:f}})},addgroup:function(c){if(c){var b=this;b.groups[b.groups.length]=c;b.refreshgroups();this._raiseEvent(12,{type:"Add",index:b.groups[b.groups.length],
groups:b.groups})}},insertgroup:function(d,c){if(d!=undefined&&d!=null&&d>=0&&d<=this.groups.length)if(c){var b=this;b.groups.splice(d,0,c);b.refreshgroups();this._raiseEvent(12,{type:"Insert",index:d,groups:b.groups})}},refreshgroups:function(){this._refreshdataview();this._render(true,true,true,false)},_insertaftergroup:function(d,c){var b=this._getGroupIndexByDataField(d);this.insertgroup(b+1,c)},_insertbeforegroup:function(d,c){var b=this._getGroupIndexByDataField(d);this.insertgroup(b,c)},removegroupat:function(c){if(c>=
0&&c!=null&&c!=undefined){var b=this;b.groups.splice(c,1);b.refreshgroups();this._raiseEvent(12,{type:"Remove",index:c,groups:b.groups});return true}return false},removegroup:function(c){if(c==null)return false;var b=this.groups.indexOf(c.toString());return this.removegroupat(b)},getrootgroupscount:function(){var b=this.dataview.loadedrootgroups.length;return b},collapsegroup:function(b){return this._setrootgroupstate(b,false)},expandgroup:function(b){return this._setrootgroupstate(b,true)},collapseallgroups:function(b){this._setbatchgroupstate(false,
b)},expandallgroups:function(b){this._setbatchgroupstate(true,b)},getgroup:function(e){var j=this.dataview.loadedrootgroups[e];if(j==null)return null;var f=this.expandedgroups[j.uniqueid].expanded;var g=j.group;var b=j.level;var c=new Array;this._getsubgroups(c,j);var i=this;var d={group:g,level:b,expanded:f,subgroups:c};if(j.subItems){var h=new Array;a.each(j.subItems,function(){var k=this.boundindex;h[h.length]=i.getrowdata(k)});if(h.length>0)d.subrows=h}return d},getrootgroups:function(){var d=
this.dataview.loadedrootgroups.length;var c=new Array;for(var b=0;b<d;b++)c[b]=this.getgroup(b);return c},_getsubgroups:function(c,j){var i=this;for(obj in j.subGroups){var g=j.subGroups[obj];var e=i.expandedgroups[g.uniqueid].expanded;var f=g.group;var b=g.level;c[c.length]={group:f,level:b,expanded:e};if(g.subItems){var h=new Array;a.each(g.subItems,function(){var k=this.boundindex;h[h.length]=i.getrowdata(k)});c[c.length-1].subrows=h}if(g.subGroups){var d=new Array;i._getsubgroups(d,g)}}return c},
_setbatchgroupstate:function(b,d){var c=this;for(obj in this.dataview.loadedrootgroups)c._setrootgroupstate(obj,b,false,true);if(d==false){c._requiresupdate=true;c._renderrows(c.virtualsizeinfo);return true}this.rendergridcontent(true);return true},_setrootgroupstate:function(d,b,e,c){if(d==undefined||d==null||d<0)return false;if(!this.groupable||this.groups.length==0)return false;var g=e!=undefined?e:true;if(d>=0&&d<this.dataview.loadedrootgroups.length){var f=this.dataview.loadedrootgroups[d];return this._setgroupstate(f,
b,g,c)}return false},_togglegroupstate:function(c,d){if(c==null||c==undefined)return false;var b=this.expandedgroups[c.uniqueid];if(b==undefined)b=false;else b=b.expanded;b=!b;return this._setgroupstate(c,b,d)},_setgroupstate:function(f,b,h,c){if(f==null||f==undefined)return false;var e=false;var d=this.expandedgroups[f.uniqueid];if(d==undefined){d={expanded:false};e=true}if(d.expanded!=b)e=true;if(e){this.expandedgroups[f.uniqueid]={expanded:b,group:f};this._setsubgroupsvisibility(this,f,!b,c);if(h){var g=
this.vScrollBar[0].style.visibility;this.rendergridcontent(true,false);if(g!=this.vScrollBar[0].style.visibility){this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}}if(undefined==this.suspendgroupevents||this.suspendgroupevents==false)if(b)this._raiseEvent(4,{group:f.group,parentgroup:f.parentItem?f.parentItem.group:null,level:f.level,visibleindex:f.visibleindex});else this._raiseEvent(5,{group:f.group,parentgroup:f.parentItem?f.parentItem.group:null,level:f.level,
visibleindex:f.visibleindex});return true}return false},_setgroupitemsvisibility:function(c,e,d){for(var b=0;b<e.subItems.length;b++)c._setrowvisibility(e.subItems[b].visibleindex,d,false)},_setsubgroupsvisibility:function(c,g,f,d){if(g.parentItem!=null){if(this.hiddens[g.parentItem.visibleindex])return}else if(g.parentItem==null)if(this.hiddens[g.visibleindex])return;for(subGroup in g.subGroups){var e=g.subGroups[subGroup];if(!f)c._setrowvisibility(e.visibleindex,f,false);var b=!f;if(!d)if(c.expandedgroups[e.uniqueid]==
undefined)b=false;else b=c.expandedgroups[e.uniqueid].expanded;else this.expandedgroups[e.uniqueid]={expanded:b,group:e};if(e.subGroups)if(e.subGroups.length>0)c._setsubgroupsvisibility(c,e,!b||f,d);else if(e.subItems.length>0)c._setgroupitemsvisibility(c,e,!b||f);if(f)c._setrowvisibility(e.visibleindex,f,false)}if(g.subItems&&g.subItems.length>0)c._setgroupitemsvisibility(c,g,f)},_handlecolumnsdragdrop:function(){var d=this;var g=-1;var c=false;if(!d.groupable)return;var f="mousemove.grouping"+this.element.id;
var e="mousedown.grouping"+this.element.id;var h="mouseup.grouping"+this.element.id;var b=false;if(this.isTouchDevice()){b=true;f="touchmove.grouping"+this.element.id;e="touchstart.grouping"+this.element.id;h="touchend.grouping"+this.element.id}this.removeHandler(a(document),f);this.addHandler(a(document),f,function(j){if(d.dragcolumn!=null){var l=parseInt(j.pageX);var t=parseInt(j.pageY);if(b){var q=d.getTouches(j);var p=q[0];l=parseInt(p.pageX);t=parseInt(p.pageY)}var n=d.host.offset();var u=parseInt(n.left);
var v=parseInt(n.top);if(d.dragmousedownoffset==undefined||d.dragmousedownoffset==null)d.dragmousedownoffset={left:0,top:0};var s=parseInt(l)-parseInt(d.dragmousedownoffset.left);var i=parseInt(t)-parseInt(d.dragmousedownoffset.top);d.dragcolumn.css({left:s+"px",top:i+"px"});c=false;if(l>=u&&l<=u+d.host.width())if(t>=v&&t<=v+d.host.height())c=true;g=-1;if(c){d.dragcolumnicon.removeClass(d.toThemeProperty("jqx-grid-dragcancel-icon"));d.dragcolumnicon.addClass(d.toThemeProperty("jqx-grid-drag-icon"));
var r=d.groupsheader.offset();var m=r.top+d.groupsheader.height();var k=d.groups.indexOf(a.data(d.dragcolumn[0],"datarecord").toString());var o=k==-1||d.groups.length>1&&k>-1;if(d.dropline!=null)if(t>=r.top&&t<=m){if(o)g=d._handlegroupdroplines(l)}else d.dropline.fadeOut("slow")}else{if(d.dropline!=null)d.dropline.fadeOut("slow");d.dragcolumnicon.removeClass(d.toThemeProperty("jqx-grid-drag-icon"));d.dragcolumnicon.addClass(d.toThemeProperty("jqx-grid-dragcancel-icon"))}}});this.removeHandler(a(document),
e);this.addHandler(a(document),e,function(i){a(document.body).addClass("jqx-disableselect")});this.removeHandler(a(document),h);this.addHandler(a(document),h,function(i){a(document.body).removeClass("jqx-disableselect");var m=parseInt(i.pageX);var s=parseInt(i.pageY);if(b){var p=d.getTouches(i);var o=p[0];m=parseInt(o.pageX);s=parseInt(o.pageY)}var n=d.host.offset();var t=parseInt(n.left);var u=parseInt(n.top);var k=d.groupsheader.height();if(d.showtoolbar)u+=d.toolbarheight;d.dragstarted=false;d.dragmousedown=
null;if(d.dragcolumn!=null){var l=a.data(d.dragcolumn[0],"datarecord");d.dragcolumn.remove();d.dragcolumn=null;if(l!=null){if(c)if(g!=-1){var q=g.index;var r=d.groups[q];var j=d._getGroupIndexByDataField(l);if(j!=q){if(j!=undefined&&j>=0)d.groups.splice(j,1);if(g.position=="before")d._insertbeforegroup(r,l);else d._insertaftergroup(r,l)}}else if(d.groups.length==0){if(s>u&&s<=u+k)d.addgroup(l)}else if(s>u+k){var j=d._getGroupIndexByDataField(l);d.removegroupat(j)}if(d.dropline!=null){d.dropline.remove();
d.dropline=null}}}})},_getGroupIndexByDataField:function(b){for(var c=0;c<this.groups.length;c++)if(this.groups[c]==b)return c;return-1},_isColumnInGroups:function(c){for(var b=0;b<this.groups.length;b++)if(this.groups[b]==c)return true;return false},_handlegroupdroplines:function(d){var b=this;var c=-1;a.each(b.groupheadersbounds,function(e){if(d<=this.left+this.width/2){var f=this.left-3;if(e>0)f=this.left-1-b.groupindentwidth/6;b.dropline.css("left",f);b.dropline.css("top",this.top);b.dropline.height(this.height);
b.dropline.fadeIn("slow");c={index:e,position:"before"};return false}else if(d>=this.left+this.width/2){b.dropline.css("left",1+this.left+this.width);b.dropline.css("top",this.top);b.dropline.height(this.height);b.dropline.fadeIn("slow");c={index:e,position:"after"}}});return c},_handlegroupstocolumnsdragdrop:function(c,e){this.dragmousedown=null;this.dragmousedownoffset=null;this.dragstarted=false;this.dragcolumn=null;var f=this;var d;var h="mousedown";var g="mousemove";var b=false;if(this.isTouchDevice()){b=
true;h="touchstart";g="touchmove"}else this.addHandler(e,"dragstart",function(i){return false});this.addHandler(e,h,function(i){var l=i.pageX;var k=i.pageY;f.dragmousedown={left:l,top:k};if(b){var j=f.getTouches(i);var n=j[0];l=n.pageX;k=n.pageY;f.dragmousedown={left:l,top:k}}var m=a(i.target).offset();f.dragmousedownoffset={left:parseInt(l)-parseInt(m.left),top:parseInt(k-m.top)}});this.addHandler(e,g,function(i){if(f.dragmousedown){d={left:i.pageX,top:i.pageY};if(b){var k=f.getTouches(i);var m=
k[0];d={left:m.pageX,top:m.pageY}}if(!f.dragstarted&&f.dragcolumn==null){var j=Math.abs(d.left-f.dragmousedown.left);var l=Math.abs(d.top-f.dragmousedown.top);if(j>3||l>3){f._createdragcolumn(e,d,true);a.data(f.dragcolumn[0],"datarecord",c)}}}})},_createdragcolumn:function(c,e,g){var h=this;var f=e;h.dragcolumn=a("<div></div>");var j=c.clone();h.dragcolumn.css("z-index",999999);j.css("border-width","1px");j.css("opacity","0.4");var i=a(j.find("."+h.toThemeProperty("jqx-grid-column-menubutton")));
if(i.length>0)i.css("display","none");var b=a(j.find(".icon-close"));if(b.length>0)b.css("display","none");h.dragcolumnicon=a('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>');h.dragcolumnicon.addClass(h.toThemeProperty("jqx-grid-drag-icon"));h.dragcolumn.css("float","left");h.dragcolumn.css("position","absolute");var d=h.host.offset();j.width(c.width()+16);h.dragcolumn.append(j);h.dragcolumn.height(c.height());h.dragcolumn.width(j.width());
h.dragcolumn.append(h.dragcolumnicon);a(document.body).append(h.dragcolumn);j.css("margin-left",0);j.css("left",0);j.css("top",0);h.dragcolumn.css("left",f.left+h.dragmousedown.left);h.dragcolumn.css("top",f.top+h.dragmousedown.top);if(g!=undefined&&g){h.dropline=a('<div style="display: none; position: absolute;"></div>');h.dropline.width(2);h.dropline.addClass(h.toThemeProperty("jqx-grid-group-drag-line"));a(document.body).append(h.dropline)}},iscolumngroupable:function(b){return this._getcolumnproperty(b,
"groupable")},_handlecolumnstogroupsdragdrop:function(c,f){this.dragmousedown=null;this.dragmousedownoffset=null;this.dragstarted=false;this.dragcolumn=null;var g=this;var e;var b=false;if(this.isTouchDevice())b=true;var d="mousedown.drag";var e="mousemove.drag";if(b){d="touchstart.drag";e="touchmove.drag"}else this.addHandler(f,"dragstart",function(h){return false});this.addHandler(f,d,function(j){if(g._isColumnInGroups(c.datafield))if(f.css("cursor")!="col-resize")return true;else return true;if(false==
c.groupable)return true;var i=j.pageX;var h=j.pageY;if(b){var k=g.getTouches(j);var m=k[0];i=m.pageX;h=m.pageY}g.dragmousedown={left:i,top:h};var l=a(j.target).offset();g.dragmousedownoffset={left:parseInt(i)-parseInt(l.left),top:parseInt(h-l.top)}});this.addHandler(f,e,function(j){if(g._isColumnInGroups(c.datafield))if(f.css("cursor")!="col-resize")return true;else return true;if(g.dragmousedown){var i=j.pageX;var h=j.pageY;if(b){var l=g.getTouches(j);var n=l[0];i=n.pageX;h=n.pageY}e={left:i,top:h};
if(!g.dragstarted&&g.dragcolumn==null){var k=Math.abs(e.left-g.dragmousedown.left);var m=Math.abs(e.top-g.dragmousedown.top);if(k>3||m>3){g._createdragcolumn(f,e,true);a.data(g.dragcolumn[0],"datarecord",c.datafield)}}}})},_rendergroupcolumn:function(f,g){var d=a('<div style="float: left; position: relative;"></div>');if(this.groupcolumnrenderer!=null){d[0].innerHTML=this.groupcolumnrenderer(f);d.addClass(this.toThemeProperty("jqx-grid-group-column"));d.addClass(this.toThemeProperty("jqx-fill-state-normal"))}if(this.closeablegroups){if(d[0].innerHTML==
"")d[0].innerHTML='<a style="float: left;" href="#">'+f+"</a>";var c='<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("icon-close")+'"></div></div>';if(a.browser.msie&&a.browser.version<8)c='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("icon-close")+'"></div></div>';d[0].innerHTML+=c}else if(d[0].innerHTML=="")d[0].innerHTML='<a href="#">'+f+"</a>";if(this.sortable){var e=a('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>');var b=a('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups){var e=a('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>');var b=a('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>')}e.css("display","none");b.css("display","none");if(a.browser.msie&&a.browser.version<8){e.css("float","left");b.css("float","left")}d.append(e);d.append(b);a.data(document.body,"groupsortelements"+g,{sortasc:e,sortdesc:b})}d.addClass(this.toThemeProperty("jqx-fill-state-normal"));d.addClass(this.toThemeProperty("jqx-grid-group-column"));return d},_rendergroup:function(e,b,n,h,l,o){var q=b;var g=b.cells[n.level];var k=this._findgroupstate(n.uniqueid);
if(n.bounddata.subGroups.length>0||n.bounddata.subItems.length>0)if(k)g.className+=" "+this.toThemeProperty("jqx-grid-group-expand");else g.className+=" "+this.toThemeProperty("jqx-grid-group-collapse");var m=this._getColumnText(this.groups[n.level]).label;var d=this.groupindentwidth;var f=this.rowdetails&&this.showrowdetailscolumn?(1+e)*d:e*d;var c=a(q).width()-f;a(q.cells[n.level+1]).width(c);a(q.cells[n.level+1]).removeClass(this.toThemeProperty("jqx-grid-cell-filter"));a(q.cells[n.level+1]).removeClass(this.toThemeProperty("jqx-grid-cell-sort"));
if(this.groupsrenderer!=null){var p={group:n.group,level:n.level,subGroups:n.bounddata.subGroups,subItems:n.bounddata.subItems,groupcolumn:this._getColumnText(this.groups[n.level]).column};var i=this.groupsrenderer(m+": "+n.group,n.group,k,p);if(i)q.cells[n.level+1].innerHTML=i;else{var j=n.bounddata.subItems.length>0?n.bounddata.subItems.length:n.bounddata.subGroups.length;q.cells[n.level+1].innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+
m+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+n.group+" ("+j+")</span></div>"}}else{var j=n.bounddata.subItems.length>0?n.bounddata.subItems.length:n.bounddata.subGroups.length;q.cells[n.level+1].innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+m+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+n.group+" ("+j+")</span></div>"}}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{_initpager:function(){var k=this;var c=this.gridlocalization.pagergotopagestring;var j=this.gridlocalization.pagerrangestring;var n=this.gridlocalization.pagershowrowsstring;var l=(this.pagerheight-17)/2;this.pagerdiv=this.pagerdiv||a('<div style="width: 100%; height: 100%; position: relative;"></div>');if(!this.pageable){this.pagerdiv.remove();this.vScrollBar.jqxScrollBar({thumbSize:0});return}if(!this.pagerrenderer){this.pagerdiv.css("top",l);this.pagergotoinput=
this.pagergotoinput||a('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>');this.pagergoto=this.pagergoto||a('<div style="float: right; margin-right: 7px;"></div>');this.pagerrightbutton=this.pagerrightbutton||a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>');this.pagerleftbutton=this.pagerleftbutton||a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>');
this.pagerdetails=this.pagerdetails||a('<div style="margin-right: 7px; float: right;"></div>');this.pagershowrows=this.pagershowrows||a('<div style="margin-right: 7px; float: right;"></div>');if(this.pagershowrowscombo&&this.pagershowrowscombo.jqxDropDownList){this.pagershowrowscombo.remove();this.pagershowrowscombo=null}this.pagershowrowscombo=this.pagershowrowscombo||a('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');this.pagerdiv.children().remove();this.pagershowrowscombo[0].id=
"gridpagerlist"+this.element.id;this.removeHandler(this.pagerrightbutton,"mousedown");this.removeHandler(this.pagerrightbutton,"mouseup");this.removeHandler(this.pagerrightbutton,"click");this.removeHandler(this.pagerleftbutton,"mousedown");this.removeHandler(this.pagerleftbutton,"mouseup");this.removeHandler(this.pagerleftbutton,"click");this.pagerleftbutton.attr("title",this.gridlocalization.pagerpreviousbuttonstring);this.pagerrightbutton.attr("title",this.gridlocalization.pagernextbuttonstring);
this.pagerdiv.append(this.pagerrightbutton);this.pagerdiv.append(this.pagerleftbutton);this.pagerrightbutton.jqxButton({cursor:"pointer",theme:this.theme});this.pagerleftbutton.jqxButton({cursor:"pointer",theme:this.theme});this.pagerleftbutton.find(".icon-arrow-left").remove();this.pagerrightbutton.find(".icon-arrow-right").remove();var d=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");d.addClass(this.toThemeProperty("icon-arrow-left"));this.pagerleftbutton.wrapInner(d);var h=
a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");h.addClass(this.toThemeProperty("icon-arrow-right"));this.pagerrightbutton.wrapInner(h);this.pagerdiv.append(this.pagerdetails);this.pagerdiv.append(this.pagershowrowscombo);this.pagerdiv.append(this.pagershowrows);this.pagerdiv.append(this.pagergotoinput);this.pagerdiv.append(this.pagergoto);var b=this.pagesizeoptions;if(!this.pagershowrowscombo.jqxDropDownList){alert("jqxdropdownlist is not loaded.");return}this.pagershowrowscombo.jqxDropDownList({source:b,
enableBrowserBoundsDetection:true,keyboardSelection:false,autoDropDownHeight:true,width:44,height:16,theme:this.theme});var g=0;for(var f=0;f<b.length;f++)if(this.pagesize>=b[f])g=f;this.pagershowrows[0].innerHTML=n;this.pagergoto[0].innerHTML=c;this.updatepagerdetails();this.pager.append(this.pagerdiv);this.pagershowrowscombo.jqxDropDownList({selectedIndex:g});this.pagerpageinput=this.pagergotoinput.find("input");this.pagerpageinput.addClass(this.toThemeProperty("jqx-input"));this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content"));
var k=this;this.pagershowrowscombo.unbind("select");this.pagershowrowscombo.bind("select",function(q){if(q.args){if(k.editcell!=null&&k.endcelledit)k.endcelledit(k.editcell.row,k.editcell.column,true,false);var o=q.args.index;var r=k.dataview.pagenum*k.dataview.pagesize;var p=b[o];var s=k.pagesize;k.pagesize=parseInt(p);if(isNaN(k.pagesize))k.pagesize=10;if(p>=100)k.pagershowrowscombo.jqxDropDownList({width:55});else k.pagershowrowscombo.jqxDropDownList({width:44});k.dataview.pagesize=k.pagesize;
var i=Math.floor(r/k.dataview.pagesize);k.prerenderrequired=true;k._requiresupdate=true;k._raiseEvent(10,{pagenum:i,oldpagesize:s,pagesize:k.dataview.pagesize});k.gotopage(i);if(k.autoheight&&k._updatesizeonwindowresize){k._updatesize(true);setTimeout(function(){k._updatesize(true)},500)}}});var m=this.pagergotoinput.find("input");m.addClass(this.toThemeProperty("jqx-grid-pager-input"));m.addClass(this.toThemeProperty("jqx-rc-all"));m.unbind("keydown");m.unbind("change");m.bind("keydown",function(i){if(i.keyCode>=
65&&i.keyCode<=90)return false;if(i.keyCode=="13"){var o=m.val();o=parseInt(o);if(!isNaN(o))k.gotopage(o-1);return false}});m.bind("change",function(){var i=m.val();i=parseInt(i);if(!isNaN(i))k.gotopage(i-1)});this.addHandler(this.pagerrightbutton,"mouseenter",function(){h.addClass(k.toThemeProperty("icon-arrow-right-hover"))});this.addHandler(this.pagerleftbutton,"mouseenter",function(){d.addClass(k.toThemeProperty("icon-arrow-left-hover"))});this.addHandler(this.pagerrightbutton,"mouseleave",function(){h.removeClass(k.toThemeProperty("icon-arrow-right-hover"))});
this.addHandler(this.pagerleftbutton,"mouseleave",function(){d.removeClass(k.toThemeProperty("icon-arrow-left-hover"))});this.addHandler(this.pagerrightbutton,"mousedown",function(){h.addClass(k.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerrightbutton,"mouseup",function(){h.removeClass(k.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerleftbutton,"mousedown",function(){d.addClass(k.toThemeProperty("icon-arrow-left-selected"))});this.addHandler(this.pagerleftbutton,
"mouseup",function(){d.removeClass(k.toThemeProperty("icon-arrow-left-selected"))});this.addHandler(this.pagerrightbutton,"click",function(){if(!k.pagerrightbutton.jqxButton("disabled"))k.gotonextpage()});this.addHandler(this.pagerleftbutton,"click",function(){if(!k.pagerrightbutton.jqxButton("disabled"))k.gotoprevpage()})}else{this.pagerdiv.children().remove();var e=this.pagerrenderer();if(e!=null)this.pagerdiv.append(a(e));this.pager.append(this.pagerdiv)}this.vScrollBar.jqxScrollBar({thumbSize:this.host.height()/
5});this.vScrollBar.jqxScrollBar("refresh");this._arrange()},_updatepagertheme:function(){if(this.pagershowrowscombo==null)return;this.pagershowrowscombo.jqxDropDownList({theme:this.theme});this.pagerrightbutton.jqxButton({theme:this.theme});this.pagerleftbutton.jqxButton({theme:this.theme});this.pagerpageinput.removeClass();var c=this.pagergotoinput.find("input");c.removeClass();c.addClass(this.toThemeProperty("jqx-grid-pager-input"));c.addClass(this.toThemeProperty("jqx-rc-all"));this.pagerpageinput.addClass(this.toThemeProperty("jqx-input"));
this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content"));this.pagerleftbutton.find(".icon-arrow-left").remove();this.pagerrightbutton.find(".icon-arrow-right").remove();var d=a("<div style='width: 27px; height: 15px;'></div>");d.addClass(this.toThemeProperty("icon-arrow-left"));this.pagerleftbutton.wrapInner(d);var e=a("<div style='width: 27px; height: 15px;'></div>");e.addClass(this.toThemeProperty("icon-arrow-right"));this.pagerrightbutton.wrapInner(e);var b=function(h,g){h.removeHandler(g,
"mouseenter");h.removeHandler(g,"mouseleave");h.removeHandler(g,"mousedown");h.removeHandler(g,"mouseup")};b(this,this.pagerrightbutton);b(this,this.pagerleftbutton);var f=this;this.addHandler(this.pagerrightbutton,"mouseenter",function(){e.addClass(f.toThemeProperty("icon-arrow-right-hover"))});this.addHandler(this.pagerleftbutton,"mouseenter",function(){d.addClass(f.toThemeProperty("icon-arrow-left-hover"))});this.addHandler(this.pagerrightbutton,"mouseleave",function(){e.removeClass(f.toThemeProperty("icon-arrow-right-hover"))});
this.addHandler(this.pagerleftbutton,"mouseleave",function(){d.removeClass(f.toThemeProperty("icon-arrow-left-hover"))});this.addHandler(this.pagerrightbutton,"mousedown",function(){e.addClass(f.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerrightbutton,"mouseup",function(){e.removeClass(f.toThemeProperty("icon-arrow-right-selected"))});this.addHandler(this.pagerleftbutton,"mousedown",function(){d.addClass(f.toThemeProperty("icon-arrow-left-selected"))});this.addHandler(this.pagerleftbutton,
"mouseup",function(){d.removeClass(f.toThemeProperty("icon-arrow-left-selected"))})},gotopage:function(d){if(d==null||d==undefined)d=0;if(d==-1)d=0;if(d<0)return;var c=this.dataview.totalrecords;if(this.summaryrows)c+=this.summaryrows.length;var b=Math.ceil(c/this.pagesize);if(d>=b){if(this.dataview.totalrecords==0){this.dataview.pagenum=0;this.updatepagerdetails()}if(d>0)d=b-1}if(this.dataview.pagenum!=d||this._requiresupdate)if(this.pageable){if(this.source.pager)this.source.pager(d,this.dataview.pagesize,
this.dataview.pagenum);this.dataview.pagenum=d;if(this.virtualmode){this.hiddens=new Array;this.expandedgroups=new Array;if(this.rendergridrows){var g=d*this.dataview.pagesize;var f=g+this.dataview.pagesize;if(g!=null&&f!=null){if(this.pagerrightbutton){this.pagerrightbutton.jqxButton({disabled:true});this.pagerleftbutton.jqxButton({disabled:true});this.pagershowrowscombo.jqxDropDownList({disabled:true})}this.updatebounddata("pagechanged");this._raiseEvent(9,{pagenum:d,pagesize:this.dataview.pagesize});
this.updatepagerdetails();if(this.autosavestate)if(this.savestate)this.savestate();return}}}else this.dataview.updateview();this._loadrows();this._updatepageviews();this.tableheight=null;this._renderrows(this.virtualsizeinfo);this.updatepagerdetails();if(this.autoheight){var e=this.host.height()-this._gettableheight();height=e+this._pageviews[0].height;if(height!=this.host.height()){this._arrange();this._updatepageviews()}}if(this.editcell!=null&&this.endcelledit)this.endcelledit(this.editcell.row,
this.editcell.column,true,false);this._raiseEvent(9,{pagenum:d,pagesize:this.dataview.pagesize});if(this.autosavestate)if(this.savestate)this.savestate()}},gotoprevpage:function(){if(this.dataview.pagenum>0)this.gotopage(this.dataview.pagenum-1);else{var c=this.dataview.totalrecords;if(this.summaryrows)c+=this.summaryrows.length;var b=Math.ceil(c/this.pagesize);this.gotopage(b-1)}},gotonextpage:function(){var c=this.dataview.totalrecords;if(this.summaryrows)c+=this.summaryrows.length;var b=Math.ceil(c/
this.pagesize);if(this.dataview.pagenum<b-1)this.gotopage(this.dataview.pagenum+1);else this.gotopage(0)},updatepagerdetails:function(){if(this.pagerdetails!=null&&this.pagerdetails.length>0){var f=this.dataview.pagenum*this.pagesize;var c=(this.dataview.pagenum+1)*this.pagesize;if(c>=this.dataview.totalrecords)c=this.dataview.totalrecords;var b=this.dataview.totalrecords;if(this.summaryrows){b+=this.summaryrows.length;if((this.dataview.pagenum+1)*this.pagesize>this.dataview.totalrecords)c=b}f++;
var e=this.pagergotoinput.find("input");e.val(this.dataview.pagenum+1);var d=Math.round(b/this.dataview.pagesize);if(d>1)d--;d++;this.pagergotoinput.attr("title","1 - "+d);if(c==0&&c<f)f=0;this.pagerdetails[0].innerHTML=f+"-"+c+this.gridlocalization.pagerrangestring+b;if(f>c)this.gotoprevpage()}},_updatepagedview:function(e,g,b){var j=this;var k=this.dataview.rows.length;for(var d=0;d<k;d++){var f=this.dataview.rows[d].visibleindex;var h={index:f,height:this.heights[f],hidden:this.hiddens[f],details:this.details[f]};
if(this.heights[f]==undefined){this.heights[f]=this.rowsheight;h.height=this.rowsheight}if(this.hiddens[f]==undefined){this.hiddens[f]=false;h.hidden=false}if(this.details[f]==undefined)this.details[f]=null;if(h.height!=j.rowsheight){g-=j.rowsheight;g+=h.height}if(h.hidden)g-=h.height;else{b+=h.height;var c=0;if(this.rowdetails)if(h.details&&h.details.rowdetails&&!h.details.rowdetailshidden){c=h.details.rowdetailsheight;b+=c;g+=c}}}this._pageviews[0]={top:0,height:b};return g}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{_handledblclick:function(s,m){if(s.target==null)return;if(m.disabled)return;if(a(s.target).ischildof(this.columnsheader))return;var v;if(s.which)v=s.which==3;else if(s.button)v=s.button==2;if(v)return;var z;if(s.which)z=s.which==2;else if(s.button)z=s.button==1;if(z)return;var u=this.showheader?this.columnsheader.height()+2:0;var n=this._groupsheader()?this.groupsheader.height():0;var e=this.host.offset();var l=s.pageX-e.left;var k=s.pageY-u-e.top-n;
var b=this._hittestrow(l,k);var g=b.row;var h=b.index;var p=s.target.className;var o=this.table[0].rows[h];if(o==null)return;m.mousecaptured=true;m.mousecaptureposition={left:s.pageX,top:s.pageY-n};var q=this.hScrollInstance;var r=q.value;var d=0;var j=this.groupable?this.groups.length:0;for(var t=0;t<o.cells.length;t++){var f=parseInt(a(this.columnsrow[0].cells[t]).css("left"))-r;var w=f+a(this.columnsrow[0].cells[t]).width();if(w>=l&&l>=f){d=t;break}}if(g!=null){var c=this._getcolumnat(d);if(!(p.indexOf("jqx-grid-group-expand")!=
-1||p.indexOf("jqx-grid-group-collapse")!=-1))if(g.boundindex!=-1)m.begincelledit(g.boundindex,c.datafield,c.defaulteditorvalue)}},_handleeditkeydown:function(c,s){var o=c.charCode?c.charCode:c.keyCode?c.keyCode:0;if(s.showfilterrow&&s.filterable)if(this.filterrow)if(a(c.target).ischildof(this.filterrow))return true;if(s.pageable)if(a(c.target).ischildof(this.pager))return true;if(this.showtoolbar)if(a(c.target).ischildof(this.toolbar))return true;if(this.showstatusbar)if(a(c.target).ischildof(this.statusbar))return true;
if(this.editcell){if(o==32)if(s.editcell.columntype=="checkbox"){var l=!s.getcellvalue(s.editcell.row,s.editcell.column);s.setcellvalue(s.editcell.row,s.editcell.column,l,true);s._raiseEvent(18,{rowindex:s.editcell.row,datafield:s.editcell.column,oldvalue:!l,value:l,columntype:"checkbox"});return false}if(o==9){var r=this.editcell.row;var d=this.editcell.column;var i=d;var k=s._getcolumnindex(d);var j=false;var b=s.getrowvisibleindex(r);if(this.editcell.validated!=false){if(c.shiftKey){var f=s._getprevvisiblecolumn(k);
if(f){d=f.datafield;j=true;if(s.selectionmode.indexOf("cell")!=-1){s.selectprevcell(r,i);setTimeout(function(){s.ensurecellvisible(b,d)},10)}}}else{var f=s._getnextvisiblecolumn(k);if(f){d=f.datafield;j=true;if(s.selectionmode.indexOf("cell")!=-1){s.selectnextcell(r,i);setTimeout(function(){s.ensurecellvisible(b,d)},10)}}}if(j){s.begincelledit(r,d);if(this.editcell!=null&&this.editcell.columntype=="checkbox")this._renderrows(this.virtualsizeinfo)}}return false}else if(o==13){this.endcelledit(this.editcell.row,
this.editcell.column,false,true);return false}else if(o==27){this.endcelledit(this.editcell.row,this.editcell.column,true,true);return false}}else{var g=false;if(o==113)g=true;if(o>=48&&o<=57){this.editchar=String.fromCharCode(o);g=true}if(o>=65&&o<=90){this.editchar=String.fromCharCode(o);if(!c.shiftKey)this.editchar=this.editchar.toLowerCase();g=true}else if(o>=96&&o<=105){this.editchar=o-96;this.editchar=this.editchar.toString();g=true}if(o==13||g)if(s.getselectedrowindex){var r=s.getselectedrowindex();
switch(s.selectionmode){case "singlerow":case "multiplerows":case "multiplerowsextended":if(r>=0){var d="";for(var e=0;e<s.columns.records.length;e++){var f=s.getcolumnat(e);if(f.editable){d=f.datafield;break}}s.begincelledit(r,d)}break;case "singlecell":case "multiplecells":case "multiplecellsextended":var n=s.getselectedcell();if(n!=null)s.begincelledit(n.rowindex,n.datafield);break}return false}if(o==46){var q=s.getselectedcells();if(q!=null&&q.length>0){for(var h=0;h<q.length;h++){var n=q[h];
var f=s.getcolumn(n.datafield);var p=s.getcellvalue(n.rowindex,n.datafield);s._raiseEvent(17,{rowindex:n.rowindex,datafield:n.datafield,value:p});if(h==q.length-1)s.setcellvalue(n.rowindex,n.datafield,"",true);else s.setcellvalue(n.rowindex,n.datafield,"",false);s._raiseEvent(18,{rowindex:n.rowindex,datafield:n.datafield,oldvalue:p,value:""})}return false}}if(o==32){var n=s.getselectedcell();if(n!=null){var f=s.getcolumn(n.datafield);if(f.columntype=="checkbox"){var l=!s.getcellvalue(n.rowindex,n.datafield);
s._raiseEvent(17,{rowindex:n.rowindex,datafield:n.datafield,value:!l,columntype:"checkbox"});s.setcellvalue(n.rowindex,n.datafield,l,true);s._raiseEvent(18,{rowindex:n.rowindex,datafield:n.datafield,oldvalue:!l,value:l,columntype:"checkbox"});return false}}}}return true},begincelledit:function(j,c,h){var d=this.getcolumn(c);if(c==null)return;if(d.columntype=="number"||d.columntype=="button")return;if(this.editrow!=undefined)return;if(this.editcell){if(this.editcell.row==j&&this.editcell.column==c)return true;
var b=this.endcelledit(this.editcell.row,this.editcell.column,false,true);if(false==b)return}var e=d.columntype=="checkbox"||d.columntype=="button";this.host.removeClass("jqx-disableselect");this.content.removeClass("jqx-disableselect");if(d.editable){if(d.cellbeginedit){var g=this.getcell(j,c);var i=d.cellbeginedit(j,c,d.columntype,g!=null?g.value:null);if(i==false)return}var f=this.getrowvisibleindex(j);this.editcell=this.getcell(j,c);this.editcell.visiblerowindex=f;if(!this.editcell.editing){if(!e)this.editcell.editing=
true;this.editcell.columntype=d.columntype;this.editcell.defaultvalue=h;if(d.defaultvalue!=undefined)this.editcell.defaultvalue=d.defaultvalue;this.editcell.init=true;if(d.columntype!="checkbox")this._raiseEvent(17,{rowindex:j,datafield:d.datafield,value:this.editcell.value,columntype:d.columntype});if(!e)this._renderrows(this.virtualsizeinfo);if(this.editcell)this.editcell.init=false}}else{if(!this.editcell)return;this.editcell.editor=null;this.editcell.editing=false;this._renderrows(this.virtualsizeinfo);
this.editcell=null}},endcelledit:function(p,c,j,g){var e=this.getcolumn(c);var i=this;if(i.editrow!=undefined)return;var h=function(){if(!i.isNestedGrid){i.element.focus();i.content.focus();setTimeout(function(){i.element.focus();i.content.focus()},10)}};if(e.columntype=="checkbox"||e.columntype=="button"){this.editcell.editor=null;this.editcell.editing=false;this.editcell=null;return true}var d=this._geteditorvalue(e);var k=function(q){q._hidecelleditor();q.editcell.editor=null;q.editcell.editing=
false;q.editcell=null;if(g||g==undefined)q._renderrows(q.virtualsizeinfo);h();if(!q.enablebrowserselection){q.host.addClass("jqx-disableselect");q.content.addClass("jqx-disableselect")}};if(j){k(this);return false}if(this.validationpopup){this.validationpopup.hide();this.validationpopuparrow.hide()}if(e.cellvaluechanging){var m=e.cellvaluechanging(p,c,e.columntype,this.editcell.value,d);if(m!=undefined)d=m}if(e.validation){var l=this.getcell(p,c);var o=e.validation(l,d);var f=this.gridlocalization.validationstring;
if(o.message!=undefined)f=o.message;var n=typeof o=="boolean"?o:o.result;if(!n){if(o.showmessage==undefined||o.showmessage==true)this._showvalidationpopup(p,c,f);this.editcell.validated=false;return false}}if(e.cellendedit){var b=e.cellendedit(p,c,e.columntype,this.editcell.value,d);if(b==false){this._raiseEvent(18,{rowindex:p,datafield:c,oldvalue:this.editcell.value,value:this.editcell.value,columntype:e.columntype});k(this);return false}}this._raiseEvent(18,{rowindex:p,datafield:c,oldvalue:this.editcell.value,
value:d,columntype:e.columntype});this._hidecelleditor();this.editcell.editor=null;this.editcell.editing=false;this.editcell=null;this.setcellvalue(p,c,d,g);if(!this.enablebrowserselection){this.host.addClass("jqx-disableselect");this.content.addClass("jqx-disableselect")}h();return true},beginrowedit:function(d){if(!this.editcells)this.editcells=new Array;if(this.editcells.length>0){if(this.editcells[0].row==d)return;var c=this.endrowedit(this.editcells[0].row,false,true);if(false==c)return}this.host.removeClass("jqx-disableselect");
this.content.removeClass("jqx-disableselect");var b=this;this.editcells=new Array;a.each(this.columns.records,function(){if(b.editable){var e=b.getcell(d,this.datafield);e.editing=true;if(this.defaultvalue!=undefined)e.defaultvalue=column.defaultvalue;e.init=true;b.editcells[this.datafield]=e}});b.editrow=d;b._renderrows(this.virtualsizeinfo);a.each(this.columns.records,function(){b.editcells[this.datafield].init=false})},endrowedit:function(b){if(this.editcell.editor==undefined)return false;return true},
_setSelection:function(e,b,d){if("selectionStart"in d[0]){d[0].focus();d[0].setSelectionRange(e,b)}else{var c=d[0].createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",e);c.select()}},findRecordIndex:function(g,c,b){var b=b;if(g&&c){var e=b.length;for(var h=0;h<e;h++){var f=b[h];var d=f.label;if(g==d)return h}}return-1},_destroyeditors:function(){var b=this;a.each(this.columns.records,function(f,g){switch(this.columntype){case "dropdownlist":var d=b.editors["dropdownlist_"+
this.datafield];if(d){d.jqxDropDownList("destroy");b.editors["dropdownlist_"+this.datafield]=null}break;case "combobox":var c=b.editors["combobox_"+this.datafield];if(c){c.jqxComboBox("destroy");b.editors["combobox_"+this.datafield]=null}break;case "datetimeinput":var e=b.editors["datetimeinput_"+this.datafield];if(e){e.jqxDateTimeInput("destroy");b.editors["datetimeinput_"+this.datafield]=null}break;case "numberinput":var h=b.editors["numberinput_"+this.datafield];if(h){h.jqxNumberInput("destroy");
b.editors["numberinput_"+this.datafield]=null}break}})},_showcelleditor:function(k,d,b,x){if(this.editrow!=undefined)this.editcell=this.editcells[d.datafield];if(b==undefined)return;if(this.editcell==null)return;if(d.columntype=="checkbox"&&d.editable)return;var o=d.datafield;var r=a(b);var C=this;var g=this.editcell.editor;var p=this.getcellvalue(k,o);var u=this.hScrollInstance;var w=u.value;var h=parseInt(w);this.editcell.element=b;if(this.editcell.validated==false)this._showvalidationpopup();var z=
function(D){if(!C.isNestedGrid)D.focus();if(C.gridcontent[0].scrollTop!=0){C.scrolltop(Math.abs(C.gridcontent[0].scrollTop));C.gridcontent[0].scrollTop=0}if(C.gridcontent[0].scrollLeft!=0){C.scrollleft(Math.abs(C.gridcontent[0].scrollLeft));C.gridcontent[0].scrollLeft=0}};switch(d.columntype){case "dropdownlist":if(this.host.jqxDropDownList){b.innerHTML="";var n=this.editors["dropdownlist_"+d.datafield];g=n==undefined?a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>"):
n;g.css("top",a(b).parent().position().top);g.css("left",-h+parseInt(a(b).position().left));if(n==undefined){g.prependTo(this.table);g[0].id="dropdownlisteditor"+this.element.id+d.datafield;var t=this.source._source?true:false;var m=null;if(!t)m=new a.jqx.dataAdapter(this.source,{autoBind:false,uniqueDataFields:[d.datafield],async:false});else{var y={localdata:this.source.records,datatype:this.source.datatype,async:false};m=new a.jqx.dataAdapter(y,{autoBind:false,async:false,uniqueDataFields:[d.datafield]})}var j=
true;g.jqxDropDownList({keyboardSelection:false,source:m,autoDropDownHeight:j,theme:this.theme,width:r.width()-2,height:r.height()-2,displayMember:o,valueMember:o});this.editors["dropdownlist_"+d.datafield]=g;if(d.createeditor)d.createeditor(k,p,g)}if(d._requirewidthupdate)g.jqxDropDownList({width:r.width()-2});var l=g.jqxDropDownList("getItems");if(l.length<8)g.jqxDropDownList("autoDropDownHeight",true);else g.jqxDropDownList("autoDropDownHeight",false);var e=this.findRecordIndex(p,d.datafield,l);
if(x)if(p!="")g.jqxDropDownList("selectIndex",e,true);else g.jqxDropDownList("selectIndex",-1);if(this.editcell.defaultvalue!=undefined)g.jqxDropDownList("selectIndex",this.editcell.defaultvalue,true);setTimeout(function(){z(g.jqxDropDownList("comboStructure"))},10)}break;case "combobox":if(this.host.jqxComboBox){b.innerHTML="";var B=this.editors["combobox_"+d.datafield];g=B==undefined?a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>"):B;g.css("top",
a(b).parent().position().top);g.css("left",-h+parseInt(a(b).position().left));if(B==undefined){g.prependTo(this.table);g[0].id="comboboxeditor"+this.element.id+d.datafield;var t=this.source._source?true:false;var m=null;if(!t)m=new a.jqx.dataAdapter(this.source,{autoBind:false,uniqueDataFields:[d.datafield],async:false});else{var y={localdata:this.source.records,datatype:this.source.datatype,async:false};m=new a.jqx.dataAdapter(y,{autoBind:false,async:false,uniqueDataFields:[d.datafield]})}var j=
true;g.jqxComboBox({keyboardSelection:false,source:m,autoDropDownHeight:j,theme:this.theme,width:r.width()-2,height:r.height()-2,displayMember:o,valueMember:o});this.editors["combobox_"+d.datafield]=g;if(d.createeditor)d.createeditor(k,p,g)}if(d._requirewidthupdate)g.jqxComboBox({width:r.width()-2});var l=g.jqxComboBox("getItems");if(l.length<8)g.jqxComboBox("autoDropDownHeight",true);else g.jqxComboBox("autoDropDownHeight",false);var e=this.findRecordIndex(p,d.datafield,l);if(x)if(p!="")g.jqxComboBox("selectIndex",
e,true);else g.jqxComboBox("selectIndex",-1);if(this.editcell.defaultvalue!=undefined)g.jqxComboBox("selectIndex",this.editcell.defaultvalue,true);setTimeout(function(){z(g.jqxComboBox("comboStructure"))},10)}break;case "datetimeinput":if(this.host.jqxDateTimeInput){b.innerHTML="";var f=this.editors["datetimeinput_"+d.datafield];g=f==undefined?a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>"):f;g.show();g.css("top",a(b).parent().position().top);
g.css("left",-h+parseInt(a(b).position().left));if(f==undefined){g.prependTo(this.table);g[0].id="datetimeeditor"+this.element.id+d.datafield;g.jqxDateTimeInput({theme:this.theme,width:r.width(),height:r.height(),formatString:d.cellsformat});this.editors["datetimeinput_"+d.datafield]=g;if(d.createeditor)d.createeditor(k,p,g)}if(d._requirewidthupdate)g.jqxDateTimeInput({width:r.width()-2});if(x){if(p!=""){var A=new Date(p);if(A=="Invalid Date")if(this.source.getvaluebytype)A=this.source.getvaluebytype(p,
{name:d.datafield,type:"date"});g.jqxDateTimeInput("setDate",A)}else g.jqxDateTimeInput("setDate",new Date);if(this.editcell.defaultvalue!=undefined)g.jqxDateTimeInput("setDate",this.editcell.defaultvalue)}setTimeout(function(){z(g.jqxDateTimeInput("dateTimeInput"))},10)}break;case "numberinput":if(this.host.jqxNumberInput){b.innerHTML="";var i=this.editors["numberinput_"+d.datafield];g=i==undefined?a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>"):
i;g.show();g.css("top",a(b).parent().position().top);g.css("left",-h+parseInt(a(b).position().left));if(i==undefined){g.prependTo(this.table);g[0].id="numbereditor"+this.element.id+d.datafield;var v="";var s="left";if(d.cellsformat)if(d.cellsformat.indexOf("c")!=-1)v=this.gridlocalization.currencysymbol;else if(d.cellsformat.indexOf("p")!=-1){v=this.gridlocalization.percentsymbol;s="right"}g.jqxNumberInput({inputMode:"simple",theme:this.theme,width:r.width()-1,height:r.height()-1,spinButtons:true,
symbol:v,symbolPosition:s});this.editors["numberinput_"+d.datafield]=g;if(d.createeditor)d.createeditor(k,p,g)}if(d._requirewidthupdate)g.jqxNumberInput({width:r.width()-2});if(x){if(p!=""&&p!=null){var c=p;g.jqxNumberInput("setDecimal",c)}else g.jqxNumberInput("setDecimal",0);if(this.editcell.defaultvalue!=undefined)g.jqxNumberInput("setDecimal",this.editcell.defaultvalue);if(this.editchar&&this.editchar.length>0){var q=parseInt(this.editchar);if(!isNaN(q))g.jqxNumberInput("setDecimal",q)}setTimeout(function(){z(g.jqxNumberInput("numberInput"));
g.jqxNumberInput("_setSelectionStart",0);if(C.editchar){if(d.cellsformat.length>0)g.jqxNumberInput("_setSelectionStart",2);else g.jqxNumberInput("_setSelectionStart",1);C.editchar=null}else{var D=g.jqxNumberInput("spinButtons");if(D){var E=g.jqxNumberInput("numberInput").val();C._setSelection(g.jqxNumberInput("numberInput")[0],E.length,E.length)}else{var E=g.jqxNumberInput("numberInput").val();C._setSelection(g.jqxNumberInput("numberInput")[0],0,E.length)}}},10)}}break;case "textbox":default:b.innerHTML=
"";g=this.editors["textboxeditor_"+d.datafield]||a("<input 'type='textbox' id='textboxeditor'/>");g[0].id="textboxeditor"+this.element.id+d.datafield;g.appendTo(r);if(x){g.addClass(this.toThemeProperty("jqx-input"));g.addClass(this.toThemeProperty("jqx-widget-content"));if(this.editchar&&this.editchar.length>0)g.val(this.editchar);else g.val(p);if(this.editcell.defaultvalue!=undefined)g.val(this.editcell.defaultvalue);g.width(r.width());g.height(r.height());if(d.createeditor)d.createeditor(k,p,g)}this.editors["textboxeditor_"+
d.datafield]=g;if(x)setTimeout(function(){z(g);if(C.editchar){C._setSelection(g[0],1,1);C.editchar=null}else C._setSelection(g[0],0,g.val().length)},10);break}if(x)if(d.initeditor)d.initeditor(k,p,g);if(g){g.css("display","block");this.editcell.editor=g}},_setSelection:function(d,g,b){try{if("selectionStart"in d)d.setSelectionRange(g,b);else{var c=d.createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",g);c.select()}}catch(e){var f=e}},_hideeditors:function(){if(this.editcells!=
null){var b=this;for(var c in this.editcells){b.editcell=b.editcells[c];b._hidecelleditor()}}},_hidecelleditor:function(){if(!this.editcell)return;if(this.editcell.columntype=="checkbox")return;if(this.editcell.editor){this.editcell.editor.hide();switch(this.editcell.columntype){case "dropdownlist":this.editcell.editor.jqxDropDownList({closeDelay:0});this.editcell.editor.jqxDropDownList("hideListBox");this.editcell.editor.jqxDropDownList({closeDelay:400});break;case "combobox":this.editcell.editor.jqxComboBox({closeDelay:0});
this.editcell.editor.jqxComboBox("hideListBox");this.editcell.editor.jqxComboBox({closeDelay:400});break;case "datetimeinput":var b=this.editcell.editor;if(b.jqxDateTimeInput("isOpened")){b.jqxDateTimeInput({closeDelay:0});b.jqxDateTimeInput("hideCalendar");b.jqxDateTimeInput({closeDelay:400})}break}}if(this.validationpopup){this.validationpopup.hide();this.validationpopuparrow.hide()}if(!this.isNestedGrid)this.element.focus()},_geteditorvalue:function(d){var f=new String;if(this.editcell.editor)switch(d.columntype){case "textbox":default:f=
this.editcell.editor.val();if(d.cellsformat!="")if(d.cellsformat.indexOf("p")!=-1||d.cellsformat.indexOf("c")!=-1||d.cellsformat.indexOf("n")!=-1||d.cellsformat.indexOf("f")!=-1)f=parseFloat(f);break;case "datetimeinput":if(this.editcell.editor.jqxDateTimeInput){this.editcell.editor.jqxDateTimeInput({isEditing:false});f=this.editcell.editor.jqxDateTimeInput("getDate");if(f==null)return"";f=new Date(f.toString());if(f==null)f==""}break;case "dropdownlist":if(this.editcell.editor.jqxDropDownList){var b=
this.editcell.editor.jqxDropDownList("selectedIndex");var e=this.editcell.editor.jqxDropDownList("getItem",b);if(e)f=e.label;else f="";if(f==null)f=""}break;case "combobox":if(this.editcell.editor.jqxComboBox){var b=this.editcell.editor.jqxComboBox("selectedIndex");var e=this.editcell.editor.jqxComboBox("getItem",b);if(e)f=e.label;else f="";if(f==null)f=""}break;case "numberinput":if(this.editcell.editor.jqxNumberInput){var c=this.editcell.editor.jqxNumberInput("getDecimal");f=new Number(c);f=parseFloat(f);
if(isNaN(f))f=0}break}return f},hidevalidationpopups:function(){if(this.popups){a.each(this.popups,function(){this.validation.remove();this.validationrow.remove()});this.popups=new Array}if(this.validationpopup){this.validationpopuparrow.hide();this.validationpopup.hide()}},showvalidationpopup:function(n,d,o){if(o==undefined)var o=this.gridlocalization.validationstring;var m=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>");var l=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");
m.html(o);l.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));m.addClass(this.toThemeProperty("jqx-grid-validation"));m.addClass(this.toThemeProperty("jqx-rc-all"));m.prependTo(this.table);l.prependTo(this.table);var f=this.hScrollInstance;var h=f.value;var e=parseInt(h);var j=this.getcolumn(d).uielement;var i=a(this.hittestinfo[n].visualrow);m.css("top",parseInt(i.position().top)+30+"px");var b=parseInt(m.css("top"));l.css("top",b-12);l.removeClass();l.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));
if(b>this._gettableheight()){l.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));l.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down"));b=parseInt(a(j).parent().position().top)-30;m.css("top",b+"px");l.css("top",b+m.outerHeight()-9)}var k=-e+parseInt(a(j).position().left);l.css("left",k+30);var c=m.width();if(c+k>this.host.width()-20){var g=c+k-this.host.width()+40;k-=g}m.css("left",k);m.show();l.show();if(!this.popups)this.popups=new Array;this.popups[this.popups.length]=
{validation:m,validationrow:l}},_showvalidationpopup:function(m,d,n){var i=this.editcell.editor;if(!i)return;if(!this.validationpopup){var l=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>");var k=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");l.html(n);k.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));l.addClass(this.toThemeProperty("jqx-grid-validation"));l.addClass(this.toThemeProperty("jqx-rc-all"));
l.prependTo(this.table);k.prependTo(this.table);this.validationpopup=l;this.validationpopuparrow=k}else this.validationpopup.html(n);var f=this.hScrollInstance;var h=f.value;var e=parseInt(h);this.validationpopup.css("top",parseInt(a(this.editcell.element).parent().position().top)+30+"px");var b=parseInt(this.validationpopup.css("top"));this.validationpopuparrow.css("top",b-12);this.validationpopuparrow.removeClass();this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));
if(b>this._gettableheight()){this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down"));b=parseInt(a(this.editcell.element).parent().position().top)-30;this.validationpopup.css("top",b+"px");this.validationpopuparrow.css("top",b+this.validationpopup.outerHeight()-9)}var j=-e+parseInt(a(this.editcell.element).position().left);this.validationpopuparrow.css("left",j+30);var c=this.validationpopup.width();
if(c+j>this.host.width()-20){var g=c+j-this.host.width()+40;j-=g}this.validationpopup.css("left",j);this.validationpopup.show();this.validationpopuparrow.show()}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{_calculateaggregate:function(g,j,h,c){var f=g.aggregates;if(!f)f=j;if(f){var e=new Array;for(var d=0;d<f.length;d++){if(f[d]=="count")continue;e[e.length]=g.cellsformat}if(this.source&&this.source.getAggregatedData){if(c==undefined)c=this.source.records;if(h==undefined||h==true){var b=this.source.getAggregatedData([{name:g.datafield,aggregates:f,formatStrings:e}],this.gridlocalization,c);return b}else{var b=this.source.getAggregatedData([{name:g.datafield,
aggregates:f}],this.gridlocalization,c);return b}}}return null},getcolumnaggregateddata:function(e,h,c,d){var f=this.getcolumn(e);var g=c==undefined||c==false?false:c;if(h==null)return"";var b=this._calculateaggregate(f,h,g,d)[e];return b},refreshaggregates:function(){this._updatecolumnsaggregates()},renderaggregates:function(){this._updateaggregates()},_updatecolumnaggregates:function(d,f,b){var e=this;if(!f){b.children().remove();b.html("");if(d.aggregatesrenderer){var c=d.aggregatesrenderer(d,
b);b.html(c)}return}b.children().remove();b.html("");if(d.aggregatesrenderer){if(f){var c=d.aggregatesrenderer(f[d.datafield],d,b,this.getcolumnaggregateddata(d.datafield,f[d.datafield]));b.html(c)}}else a.each(f,function(){var h=this;for(obj in h){var i=a('<div style="position: relative; margin: 4px; overflow: hidden;"></div>');var g=obj;g=e._getaggregatename(g);i.html(g+":"+h[obj]);b.append(i)}})},_getaggregatetype:function(c){switch(c){case "min":case "max":case "count":case "avg":case "product":case "var":case "varp":case "stdev":case "stdevp":case "sum":return c}var b=
c;for(var d in c){b=d;break}return b},_getaggregatename:function(c){var b=c;switch(c){case "min":b="Min";break;case "max":b="Max";break;case "count":b="Count";break;case "avg":b="Avg";break;case "product":b="Product";break;case "var":b="Var";break;case "stdevp":b="StDevP";break;case "stdev":b="StDev";break;case "varp":b="VarP";case "sum":b="Sum";break}if(c===b&&typeof b!="string")for(var d in c){b=d;break}return b},_updatecolumnsaggregates:function(){var f=this.getrows();var b=this.columns.records.length;
for(var e=0;e<b;e++){var g=a(this.statusbar[0].cells[e]);var d=this.columns.records[e];var c=this._calculateaggregate(d,null,true,f);this._updatecolumnaggregates(d,c,g)}},_updateaggregates:function(){var b=a('<div style="position: relative;" id="row0'+this.element.id+'"></div>');var d=0;var k=this.columns.records.length;var i=this.toThemeProperty("jqx-grid-cell");i+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var l=k+10;var m=new Array;this.statusbar[0].cells=m;for(var f=0;f<k;f++){var e=this.columns.records[f];
var g=this._calculateaggregate(e);var c=e.width;if(c<e.minwidth)c=e.minwidth;if(c>e.maxwidth)c=e.maxwidth;var h=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+i+'"></div>');b.append(h);h.css("left",d);h.css("z-index",l--);h.width(c);h[0].left=d;if(!(e.hidden&&e.hideable))d+=c;else h.css("display","none");m[m.length]=h[0];this._updatecolumnaggregates(e,g,h)}if(a.browser.msie&&a.browser.version<8)b.css("z-index",l--);b.width(parseInt(d)+2);b.height(this.statusbarheight);
this.statusbar.children().remove();this.statusbar.append(b);this.statusbar.removeClass(this.toThemeProperty("jqx-widget-header"));this.statusbar.addClass(i);this.statusbar.css("border-bottom-color","transparent");this.statusbar.css("border-top-width","1px")}})})(jQuery);
(function(b){var a=function(){var m={},j,k,r,g,d;function i(s){s.beginFile();f(s);o(s);s.endFile();return s.getFile()}function f(v){var t=true;b.each(k,function(){if(this.hidden){t=false;return false}});v.beginHeader(t);for(var s in k){var u=c(s,k[s]);v.appendHeaderCell(k[s],s,u,t)}v.endHeader(t)}function o(t){t.beginBody();for(var s=0;s<j.length;s+=1)q(t,j[s],s);t.endBody()}function q(v,u,w){var t;v.beginRow();for(var s in k){t=n(w,s);if(u.hasOwnProperty(s))v.appendBodyCell(u[s],k[s],t);else v.appendBodyCell("",
k[s],t)}v.endRow()}function c(t,u){if(u.style)return r[u.style];var s=p();if(s.length>0)return s[0].style;return null}function p(){if(!d){d=new Array;b.each(r,function(s,t){d[d.length]={name:s,style:t}})}return d}function n(w,v){if(k[v])if(k[v].cellStyle){var x=k[v];if(k[v].cellAltStyle){var t=w%2;if(t==0)return r[x.cellStyle];return r[x.cellAltStyle]}return r[x.cellStyle]}else{var s=p();if(s.length>0){var t=w%(s.length-1);var u=s[t+1].style;return u}}return null}function e(v,t,u){var s=document.createElement("input");
s.name=t;s.value=v;s.type="hidden";u.appendChild(s);return s}function h(u,s,t){var v=document.createElement("textarea");v.name=s;v.value=u;t.appendChild(v);return v}function l(t,w,v,s){var u=document.createElement("form");e(t,"filename",u);e(w,"format",u);h(v,"content",u);if(s==undefined||s=="")s="http://www.jqwidgets.com/export_server/save-file.php";u.action=s;u.method="post";document.body.appendChild(u);return u}g=function(v,u,t,s){if(!(this instanceof a))return new a(v,u,t);j=v;k=u;r=t;this.exportTo=
function(x){x=x.toString().toLowerCase();var w=m[x];if(typeof w==="undefined")throw"You can't export to "+x+" format.";return i(w,j,k,r)};this.exportToFile=function(z,w){var y=this.exportTo(z),x=l(w,z,y,s);x.submit();document.body.removeChild(x)};this.exportToLocalFile=function(y,w){var x=this.exportTo(y);document.location.href="data:application/octet-stream;filename="+w+","+encodeURIComponent(x)}};g.extend=function(s,t){if(t instanceof b.jqx.dataAdapter.DataExportModuleBase)m[s]=t;else throw"The module "+
s+" is not instance of DataExportModuleBase.";};return g}();b.jqx.dataAdapter.ArrayExporter=a})(jQuery);
(function(b){var a=function(){this.formatData=function(f,e,c){if(e==="date"){var d="";if(typeof f==="string"){d=b.jqx.dataFormat.tryparsedate(f);f=d}if(f===""||f==null)return"";d=b.jqx.dataFormat.formatdate(f,c);if(d.toString()=="NaN"||d==null)return"";f=d}else if(e==="number"){if(f===""||f==null)return"";if(!isNaN(new Number(f))){var g=b.jqx.dataFormat.formatnumber(f,c);if(g.toString()=="NaN")return"";else f=g}}else f=f;if(f==null)return"";return f};this.getFormat=function(e){var c=e?e.formatString:
"";var d="string";d=e?e.type:"string";if(d=="number")if(!c)c="n2";if(d=="date")if(!c)c="d";return{type:d,formatString:c}};this.beginFile=function(){throw"Not implemented!";};this.beginHeader=function(){throw"Not implemented!";};this.appendHeaderCell=function(){throw"Not implemented!";};this.endHeader=function(){throw"Not implemented!";};this.beginBody=function(){throw"Not implemented!";};this.beginRow=function(){throw"Not implemented!";};this.appendBodyCell=function(){throw"Not implemented!";};this.endRow=
function(){throw"Not implemented!";};this.endBody=function(){throw"Not implemented!";};this.endFile=function(){throw"Not implemented!";};this.getFile=function(){throw"Not implemented!";}};b.jqx.dataAdapter.DataExportModuleBase=a})(jQuery);
(function(d){var c=function(j){var e,h,g;var l=0;var i=this;this.beginFile=function(){e=""};this.beginHeader=function(){};this.appendHeaderCell=function(o,p,n,m){g=m;if(m)k(o.text)};this.endHeader=function(){this.endRow()};this.beginBody=function(){l=0};this.beginRow=function(){if(l>0||l==0&&g)e+="\n";l++};this.appendBodyCell=function(n,m){k(n,m)};this.endRow=function(){e=e.substring(0,e.length-1)};this.endBody=function(){};this.endFile=function(){};this.getFile=function(){return e};function f(m,
o){if(o){var n=i.getFormat(o);m=i.formatData(m,n.type,n.formatString)}if(m.toString().indexOf(h)>=0)m='"'+m+'"';return m}function k(m,n){m=f(m,n);e+=m+j}};c.prototype=new d.jqx.dataAdapter.DataExportModuleBase;var a=function(){};a.prototype=new c(",");var b=function(){};b.prototype=new c("\t");d.jqx.dataAdapter.ArrayExporter.extend("csv",new a);d.jqx.dataAdapter.ArrayExporter.extend("tsv",new b)})(jQuery);
(function(b){var a=function(){var d;var e;var f=0;this.beginFile=function(){d='<html>\n\t<head>\n\t\t<title></title>\n\t\t<meta http-equiv=Content-type content="text/html; charset=UTF-8">\n\t</head>\n\t<body>\n\t\t<table style="empty-cells: show;" cellspacing="0" cellpadding="2">'};this.beginHeader=function(){d+="\n\t\t\t<thead>"};this.appendHeaderCell=function(i,j,h,g){e=g;if(!g)return;if(i.width)d+='\n\t\t\t\t<th style="width: '+i.width+"px; "+c(h)+'">'+i.text+"</th>";else d+='\n\t\t\t\t<th style="'+
c(h)+'">'+i.text+"</th>"};this.endHeader=function(){d+="\n\t\t\t</thead>"};this.beginBody=function(){d+="\n\t\t\t<tbody>";f=0};this.beginRow=function(){d+="\n\t\t\t\t<tr>";f++};this.appendBodyCell=function(h,j,g){var i=this.getFormat(j);if(h==="")h="&nbsp;";if(f==1&&!e)d+='\n\t\t\t\t\t<td style="'+c(g)+' border-top-width: 1px;">'+this.formatData(h,i.type,i.formatString)+"</td>";else d+='\n\t\t\t\t\t<td style="'+c(g)+'">'+this.formatData(h,i.type,i.formatString)+"</td>"};this.endRow=function(){d+=
"\n\t\t\t\t</tr>"};this.endBody=function(){d+="\n\t\t\t</tbody>"};this.endFile=function(){d+="\n\t\t</table>\n\t</body>\n</html>\n"};this.getFile=function(){return d};function c(i){var g="";for(var h in i)if(i.hasOwnProperty(h))g+=h+":"+i[h]+";";return g}};a.prototype=new b.jqx.dataAdapter.DataExportModuleBase;b.jqx.dataAdapter.ArrayExporter.extend("html",new a)})(jQuery);
(function(b){var a=function(){var h,l,d,i,c,j,m={style:"",stylesMap:{font:{color:"Color","font-family":"FontName","font-style":"Italic","font-weight":"Bold"},interior:{"background-color":"Color",background:"Color"},alignment:{left:"Left",center:"Center",right:"Right"}},startStyle:function(p){this.style+='\n\t\t<ss:Style ss:ID="'+p+'" ss:Name="'+p+'">'},buildAlignment:function(q){if(q["text-align"]){var r=this.stylesMap.alignment[q["text-align"]];var p='\n\t\t\t<ss:Alignment ss:Vertical="Bottom" ss:Horizontal="'+
r+'"/>';this.style+=p}},buildBorder:function(s){if(s["border-color"]){var r="\n\t\t\t<ss:Borders>";var u='\n\t\t\t\t<Border ss:Position="Bottom" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="'+s["border-color"]+'"/>';var p='\n\t\t\t\t<Border ss:Position="Left" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="'+s["border-color"]+'"/>';var q='\n\t\t\t\t<Border ss:Position="Right" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="'+s["border-color"]+'"/>';var t='\n\t\t\t\t<Border ss:Position="Top" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="'+
s["border-color"]+'"/>';r+=u;r+=p;r+=q;r+=t;r+="\n\t\t\t</ss:Borders>";this.style+=r}},buildFont:function(q){var r=this.stylesMap.font,p="\n\t\t\t<ss:Font ";for(var s in r)if(typeof q[s]!=="undefined")if(s==="font-style"&&q[s].toString().toLowerCase()==="italic")p+='ss:Italic="1" ';else if(s==="font-weight"&&q[s].toString().toLowerCase()==="bold")p+='ss:Bold="1" ';else if(s==="color")p+="ss:"+r[s]+'="'+q[s]+'" ';p+="/>";this.style+=p},buildInterior:function(q){var r=this.stylesMap.interior,t="\n\t\t\t<ss:Interior ";
var p=false;for(var s in r)if(typeof q[s]!=="undefined"){t+="ss:"+r[s]+'="'+q[s]+'" ';p=true}if(p)t+='ss:Pattern="Solid"';t+="/>";this.style+=t},buildFormat:function(q){if(q.dataType=="number"){var p=q.formatString;if(p==""||p.indexOf("n")!=-1)this.style+='\n\t\t\t<ss:NumberFormat ss:Format="#,##0.00_);[Red](#,##0.00)"/>';else if(p.indexOf("p")!=-1)this.style+='\n\t\t\t<ss:NumberFormat ss:Format="Percent"/>';else if(p.indexOf("c")!=-1)this.style+='\n\t\t\t<ss:NumberFormat ss:Format="Currency"/>'}else if(q.dataType==
"date")this.style+='\n\t\t\t<ss:NumberFormat ss:Format="Short Date"/>'},closeStyle:function(){this.style+="\n\t\t</ss:Style>"},toString:function(){var p=this.style;this.style="";return p}};this.beginFile=function(){c={};j=0;h='<?xml version="1.0"?>\n\t<?mso-application progid="Excel.Sheet"?> \n\t<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" \n\txmlns:o="urn:schemas-microsoft-com:office:office" \n\txmlns:x="urn:schemas-microsoft-com:office:excel" \n\txmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" \n\txmlns:html="http://www.w3.org/TR/REC-html40"> \n\t<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> \n\t<Version>12.00</Version> \n\t</DocumentProperties> \n\t<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> \n\t<WindowHeight>8130</WindowHeight> \n\t<WindowWidth>15135</WindowWidth> \n\t<WindowTopX>120</WindowTopX> \n\t<WindowTopY>45</WindowTopY> \n\t<ProtectStructure>False</ProtectStructure> \n\t<ProtectWindows>False</ProtectWindows> \n\t</ExcelWorkbook> \n\t<ss:Styles>'};
this.beginHeader=function(){l='\n\t<ss:Worksheet ss:Name="Sheet1">\n\t\t<ss:Table>';d=[];i=[]};this.appendHeaderCell=function(r,s,q){var p=r.width!=undefined?r.width:r.text.length*10;l+='\n\t\t\t<ss:Column ss:Width="'+p+'"/>';d.push(r);i.push(q)};this.endHeader=function(p){if(p){this.beginRow();for(var q=0;q<d.length;q+=1)g.call(this,d[q]["text"],null,i[q]);this.endRow()}};this.beginBody=function(){};this.beginRow=function(){l+="\n\t\t\t<ss:Row>"};this.appendBodyCell=function(r,p,q){g.call(this,r,
p,q)};this.endRow=function(){l+="\n\t\t\t</ss:Row>"};this.endBody=function(){l+="\n\t\t</ss:Table>"};this.endFile=function(){l+="\n\t</ss:Worksheet>\n</ss:Workbook>";h+="\n\t</ss:Styles>"};this.getFile=function(){return h+l};function g(s,u,r){var q="String";var t=this.getFormat(u);s=this.formatData(s,t.type,t.formatString);var p=f(r);l+='\n\t\t\t\t<ss:Cell ss:StyleID="'+p+'"><ss:Data ss:Type="'+q+'">'+s+"</ss:Data></ss:Cell>"}function n(){j+=1;return"xls-style-"+j}function k(q){for(var p in c)if(o(q,
c[p])&&o(c[p],q))return p;return undefined}function o(t,q){var s=true;for(var r in t)if(t[r]!==q[r])s=false;return s}function e(q,p){m.startStyle(q);m.buildAlignment(p);m.buildBorder(p);m.buildFont(p);m.buildInterior(p);m.buildFormat(p);m.closeStyle();h+=m.toString()}function f(p){if(!p)return"";var q=k(p);if(typeof q==="undefined"){q=n();c[q]=p;e(q,p)}return q}};a.prototype=new b.jqx.dataAdapter.DataExportModuleBase;b.jqx.dataAdapter.ArrayExporter.extend("xls",new a)})(jQuery);
(function(b){var a=function(){var e,c,d;this.beginFile=function(){e='<?xml version="1.0" encoding="UTF-8" ?>';e+="\n<table>"};this.beginHeader=function(){c=[]};this.appendHeaderCell=function(f,g){c.push(g)};this.endHeader=function(){};this.beginBody=function(g,f){};this.beginRow=function(){e+="\n\t<row>";d=0};this.appendBodyCell=function(f,h){var g=this.getFormat(h);f=this.formatData(f,g.type,g.formatString);e+="\n\t\t<"+c[d]+">"+f+"</"+c[d]+">";d++};this.endRow=function(){e+="\n\t</row>";d=0};this.endBody=
function(){};this.endFile=function(){e+="\n</table>"};this.getFile=function(){return e}};a.prototype=new b.jqx.dataAdapter.DataExportModuleBase;b.jqx.dataAdapter.ArrayExporter.extend("xml",new a)})(jQuery);
(function(d){var j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(n){return'"'+n.replace(j,function(o){var p=l[o];return typeof p==="string"?p:"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)})+'"'}function b(o){return o<10?"0"+o:o}function e(o){var n;if(isFinite(o.valueOf()))n=o.getUTCFullYear()+"-"+b(o.getUTCMonth()+
1)+"-"+b(o.getUTCDate())+"T"+b(o.getUTCHours())+":"+b(o.getUTCMinutes())+":"+b(o.getUTCSeconds())+'Z"';else n="null";return n}function g(q){var n=q.length,o=[],p;for(p=0;p<n;p++)o.push(h(p,q)||"null");return"["+o.join(",")+"]"}function m(q){var o=[],p,n;for(p in q)if(Object.prototype.hasOwnProperty.call(q,p)){n=h(p,q);if(n)o.push(a(p)+":"+n)}return"{"+o.join(",")+"}"}function i(n){switch(Object.prototype.toString.call(n)){case "[object Date]":return e(n);case "[object Array]":return g(n)}return m(n)}
function k(o,n){switch(n){case "string":return a(o);case "number":return isFinite(o)?o:"null";case "boolean":return o}return"null"}function h(o,n){var q=n[o],p=typeof q;if(q&&typeof q==="object"&&typeof q.toJSON==="function"){q=q.toJSON(o);p=typeof q}if(/(number|string|boolean)/.test(p)||!q&&p==="object")return k(q,p);else return i(q)}function f(n){if(window.JSON&&typeof window.JSON.stringify==="function")return window.JSON.stringify(n);return h("",{"":n})}var c=function(){var n,o,p;this.beginFile=
function(){o=[]};this.beginHeader=function(){};this.appendHeaderCell=function(q){};this.endHeader=function(){};this.beginBody=function(r,q){};this.beginRow=function(){p={}};this.appendBodyCell=function(r,q){p[q.text]=r};this.endRow=function(){o.push(p)};this.endBody=function(){};this.endFile=function(){n=f(o)};this.getFile=function(){return n}};c.prototype=new d.jqx.dataAdapter.DataExportModuleBase;d.jqx.dataAdapter.ArrayExporter.extend("json",new c)})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{exportdata:function(i,o,n,h,k){if(!a.jqx.dataAdapter.ArrayExporter)throw"jqxdata.export.js is not loaded.";if(n==undefined)n=true;var s=this;if(h==undefined){var h=this.getrows();if(h.length==0)throw"No data to export.";}var q={};var g={};var l=[];var f=this.host.find(".jqx-grid-cell:first");var m=this.host.find(".jqx-grid-cell-alt:first");f.removeClass(this.toThemeProperty("jqx-grid-cell-selected"));f.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));
m.removeClass(this.toThemeProperty("jqx-grid-cell-selected"));m.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));f.removeClass(this.toThemeProperty("jqx-grid-cell-hover"));f.removeClass(this.toThemeProperty("jqx-fill-state-hover"));m.removeClass(this.toThemeProperty("jqx-grid-cell-hover"));m.removeClass(this.toThemeProperty("jqx-fill-state-hover"));var d="cell";var c=1;var r="column";var b=1;var e=[];a.each(this.columns.records,function(v){var z=a(s.table[0].rows[0].cells[v]);if(s.table[0].rows.length>
1)var w=a(s.table[0].rows[1].cells[v]);var y=function(A){A.removeClass(s.toThemeProperty("jqx-grid-cell-selected"));A.removeClass(s.toThemeProperty("jqx-fill-state-pressed"));A.removeClass(s.toThemeProperty("jqx-grid-cell-hover"));A.removeClass(s.toThemeProperty("jqx-fill-state-hover"))};y(z);if(w)y(w);if(this.datafield==null)return true;if(s.showaggregates)if(s.getcolumnaggregateddata)e.push(s.getcolumnaggregateddata(this.datafield,this.aggregates,true));var x=s._getexportcolumntype(this);if(this.exportable){q[this.datafield]=
{};q[this.datafield].text=this.text;q[this.datafield].width=this.width;q[this.datafield].formatString=this.cellsformat;q[this.datafield].type=x;q[this.datafield].cellsAlign=this.cellsalign;q[this.datafield].hidden=!n}d="cell"+c;var t=a(this.element);if(this.element==undefined)t=a(this.uielement);r="column"+b;if(i=="html"||i=="xls"){var u=function(E,B,C,A,G,F,D){g[E]={};g[E]["font-size"]=B.css("font-size");g[E]["font-weight"]=B.css("font-weight");g[E]["font-style"]=B.css("font-style");g[E]["background-color"]=
F._getexportcolor(B.css("background-color"));g[E]["color"]=F._getexportcolor(B.css("color"));g[E]["border-color"]=F._getexportcolor(B.css("border-top-color"));if(C)g[E]["text-align"]=G.align;else{g[E]["text-align"]=G.cellsalign;g[E]["formatString"]=G.cellsformat;g[E]["dataType"]=x}if(i=="html"){g[E]["border-top-width"]=B.css("border-top-width");g[E]["border-left-width"]=B.css("border-left-width");g[E]["border-right-width"]=B.css("border-right-width");g[E]["border-bottom-width"]=B.css("border-bottom-width");
g[E]["border-top-style"]=B.css("border-top-style");g[E]["border-left-style"]=B.css("border-left-style");g[E]["border-right-style"]=B.css("border-right-style");g[E]["border-bottom-style"]=B.css("border-bottom-style");if(C){if(D==0)g[E]["border-left-width"]=B.css("border-right-width");g[E]["border-top-width"]=B.css("border-right-width");g[E]["border-bottom-width"]=B.css("border-bottom-width")}else if(D==0)g[E]["border-left-width"]=B.css("border-right-width");g[E]["height"]=B.css("height")}if(G.exportable)if(C)q[G.datafield].style=
E;else if(!A)q[G.datafield].cellStyle=E;else q[G.datafield].cellAltStyle=E};u(r,t,true,false,this,s,v);b++;u(d,z,false,false,this,s,v);if(s.altrows){d="cellalt"+c;u(d,w,false,true,this,s,v)}c++}});if(this.showaggregates){var p=[];if(e.length>0){a.each(this.columns.records,function(t){if(this.aggregates)for(var v=0;v<this.aggregates.length;v++){if(!p[v])p[v]={};if(p[v]){var w=s._getaggregatename(this.aggregates[v]);var x=s._getaggregatetype(this.aggregates[v]);var u=e[t];p[v][this.datafield]=w+": "+
u[x]}}});a.each(this.columns.records,function(t){for(var u=0;u<p.length;u++)if(p[u][this.datafield]==undefined)p[u][this.datafield]=""})}a.each(p,function(){h.push(this)})}var j=a.jqx.dataAdapter.ArrayExporter(h,q,g);if(o==undefined){this._renderrows(this.virtualsizeinfo);return j.exportTo(i)}else j.exportToFile(i,o,k);if(this.showaggregates)a.each(p,function(){h.pop(this)});this._renderrows(this.virtualsizeinfo)},_getexportcolor:function(k){var f=k;if(k=="transparent")f="#FFFFFF";if(!f||!f.toString())f=
"#FFFFFF";if(f.toString().indexOf("rgb")!=-1){var i=f.split(",");var d=parseInt(i[0].substring(4));var h=parseInt(i[1]);var j=parseInt(i[2].substring(1,4));var l={r:d,g:h,b:j};var e=this._rgbToHex(l);return"#"+e}else if(f.toString().indexOf("#")!=-1)if(f.toString().length==4){var c=f.toString().substring(1,4);f+=c}return f},_rgbToHex:function(b){return this._intToHex(b.r)+this._intToHex(b.g)+this._intToHex(b.b)},_intToHex:function(c){var b=parseInt(c).toString(16);if(b.length==1)b="0"+b;return b.toUpperCase()},
_getexportcolumntype:function(e){var f=this;var d="string";var c=f.source.datafields||(f.source._source?f.source._source.datafields:null);if(c){var h="";a.each(c,function(){if(this.name==e.datafield){if(this.type)h=this.type;return false}});if(h)return h}if(e!=null){if(this.dataview.cachedrecords==undefined)return d;var b=null;if(!this.virtualmode){if(this.dataview.cachedrecords.length==0)return d;b=this.dataview.cachedrecords[0][e.datafield];if(b!=null&&b.toString()=="")return"string"}else a.each(this.dataview.cachedrecords,
function(){b=this[e.datafield];return false});if(b!=null){if(e.cellsformat.indexOf("c")!=-1)return"number";if(e.cellsformat.indexOf("n")!=-1)return"number";if(e.cellsformat.indexOf("p")!=-1)return"number";if(e.cellsformat.indexOf("d")!=-1)return"date";if(e.cellsformat.indexOf("y")!=-1)return"date";if(e.cellsformat.indexOf("M")!=-1)return"date";if(e.cellsformat.indexOf("m")!=-1)return"date";if(e.cellsformat.indexOf("t")!=-1)return"date";if(typeof b=="boolean")d="boolean";else if(a.jqx.dataFormat.isNumber(b))d=
"number";else{var g=new Date(b);if(g.toString()=="NaN"||g.toString()=="Invalid Date")if(a.jqx.dataFormat){g=a.jqx.dataFormat.tryparsedate(b);if(g!=null)return"date";else d="string"}else d="string";else d="date"}}}return d}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{savestate:function(){if(window.localStorage){var b=this.getstate();window.localStorage["jqxGrid"+this.element.id]=this._stringify(b)}else this._savedstate=this.getstate()},loadstate:function(b){var d="";if(b!=undefined)d=b;else if(window.localStorage)var d=window.localStorage["jqxGrid"+this.element.id];else if(this._savedstate)var d=this._savedstate;if(d!=null){var c=a.parseJSON(window.localStorage["jqxGrid"+this.element.id]);this.width=c.width;this.height=
c.height;if(this.pageable){if(c.pagesize!=undefined)this.pagesize=c.pagesize;if(c.pagenum!=undefined)this.dataview.pagenum=c.pagenum;if(c.pagesizeoptions!=undefined)this.pagesizeoptions=c.pagesizeoptions}if(this.sortable)if(c.sortdirection){if(c.sortdirection.ascending||c.sortdirection.descending){this.dataview.sortfield=c.sortcolumn;var e=c.sortdirection.ascending?"asc":"desc";this.dataview.sortfielddirection=e;this.source.sortcolumn=c.sortcolumn;this.source.sortdirection=e;if(!this.autoloadstate)this.sortby(c.sortcolumn,
e)}}else if(this.dataview.sortfield!=null&&(this.dataview.sortfielddirection=="asc"||this.dataview.sortfielddirection=="desc"))this.sortby(this.dataview.sortfield,null);if(this.groupable){this.dataview.groups=c.groups;this.groups=c.groups}}if(this.virtualsizeinfo)this._loadselectionandcolumnwidths()},_loadselectionandcolumnwidths:function(){var g="";if(window.localStorage)var g=window.localStorage["jqxGrid"+this.element.id];else if(this._savedstate)var g=this._savedstate;if(g!=null){var t=a.parseJSON(window.localStorage["jqxGrid"+
this.element.id]);var s=this;var d=false;a.each(this.columns.records,function(){var i=t.columns[this.datafield];if(i!=undefined){if(this.text!=i.text)d=true;if(this.hidden!=i.hidden)d=true;this.width=i.width;this.hidden=i.hidden;this.pinned=i.pinned;this.groupable=i.groupable;this.resizable=i.resizable;this.draggable=i.draggable;this.text=i.text;this.align=i.align;this.cellsalign=i.cellsalign}});if(this.filterable){if(this.clearfilters)this.clearfilters(false);for(var q=0;q<t.filters.filterscount;q++){var r=
t.filters["filtercondition"+q];var n=t.filters["filterdatafield"+q];var e=this.getcolumn(n);if(e){var p=t.filters["filtervalue"+q];var k=t.filters["filteroperator"+q];var j=new a.jqx.filter;var b=t.filters["filtertype"+q];var l=j.createfilter(b,p,r);j.addfilter(k,l);if(this.showfilterrow){var f=e._filterwidget;var c=e._filterwidget.parent();if(f!=null)switch(e.filtertype){case "number":c.find("input").val(p);break;case "date":if(this.host.jqxDateTimeInput){var m=t.filters["filtervalue"+(q+1)];var b=
t.filters["filtertype"+q];var l=j.createfilter(b,m,"LESS_THAN_OR_EQUAL");j.addfilter(k,l);a(c.children()[0]).jqxDateTimeInput("setRange",new Date(p),new Date(m));q++}else f.val(p);break;case "textbox":case "default":f.val(p);s["_oldWriteText"+f[0].id]=p;break;case "list":if(this.host.jqxDropDownList){var o=a(c.children()[0]).jqxDropDownList("getItems");var h=-1;a.each(o,function(u){if(this.value==p){h=u;return false}});a(c.children()[0]).jqxDropDownList("selectIndex",h)}else f.val(p);break;case "checkedlist":if(this.host.jqxDropDownList)a(c.children()[0]).jqxDropDownList("checkAll");
else f.val(p);break;case "bool":case "boolean":if(!this.host.jqxCheckBox)f.val(p);else a(c.children()[0]).jqxCheckBox({checked:p});break}}this.addfilter(n,j)}}if(t.filters.filterscount>0)this.applyfilters();if(this.pageable)if(this.gotopage){this.dataview.pagenum=-1;this.gotopage(t.pagenum)}}if(t.selectedrowindexes&&t.selectedrowindexes.length>0){this.selectedrowindexes=t.selectedrowindexes;this.selectedrowindex=t.selectedrowindex}if(t.selectedcells)if(this._applycellselection)a.each(t.selectedcells,
function(){s._applycellselection(this.rowindex,this.datafield,true,false)});if(this.groupable){this._refreshdataview();this.render();return}if(d){this.prerenderrequired=true;this.rendergridcontent(true);if(this.updating())return false}else{this._updatecolumnwidths();this._updatecellwidths()}this._renderrows(this.virtualsizeinfo)}},getstate:function(){var l=this.getdatainformation();var g={};g.width=this.width;g.height=this.height;g.pagenum=l.paginginformation.pagenum;g.pagesize=l.paginginformation.pagesize;
g.pagesizeoptions=this.pagesizeoptions;g.sortcolumn=l.sortinformation.sortcolumn;g.sortdirection=l.sortinformation.sortdirection;if(this.selectionmode!=null)if(this.getselectedcells)if(this.selectionmode.toString().indexOf("cell")!=-1){var k=this.getselectedcells();var n=new Array;a.each(k,function(){n.push({datafield:this.datafield,rowindex:this.rowindex})});g.selectedcells=n}else{var j=this.getselectedrowindexes();g.selectedrowindexes=j;g.selectedrowindex=this.selectedrowindex}var h={};var d=0;
if(this.dataview.filters)for(var i=0;i<this.dataview.filters.length;i++){var e=this.dataview.filters[i].datafield;var b=this.dataview.filters[i].filter;var c=b.getfilters();h[e+"operator"]=b.operator;for(var f=0;f<c.length;f++){c[f].datafield=e;h["filtervalue"+d]=c[f].value;h["filtercondition"+d]=c[f].condition;h["filteroperator"+d]=c[f].operator;h["filterdatafield"+d]=e;h["filtertype"+d]=c[f].type;d++}}h.filterscount=d;g.filters=h;g.groups=this.groups;g.columns={};a.each(this.columns.records,function(){var m=
{};m.width=this.width;m.hidden=this.hidden;m.pinned=this.pinned;m.groupable=this.groupable;m.resizable=this.resizable;m.draggable=this.draggable;m.text=this.text;m.align=this.align;m.cellsalign=this.cellsalign;g.columns[this.datafield]=m});return g},_stringify:function(e){if(window.JSON&&typeof window.JSON.stringify==="function"){var d=this;var c="";try{c=window.JSON.stringify(e)}catch(b){return d._str("",{"":e})}return c}var c=this._str("",{"":e});return c},_quote:function(b){var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return'"'+b.replace(d,function(e){var f=c[e];return typeof f==="string"?f:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},_stringifyArray:function(e){var b=e.length,c=[],d;for(var d=0;d<b;d++)c.push(this._str(d,e)||"null");return"["+c.join(",")+"]"},_stringifyObject:function(f){var c=[],d,b;var e=this;for(d in f)if(Object.prototype.hasOwnProperty.call(f,d)){b=e._str(d,f);if(b)c.push(e._quote(d)+":"+
b)}return"{"+c.join(",")+"}"},_stringifyReference:function(b){switch(Object.prototype.toString.call(b)){case "[object Array]":return this._stringifyArray(b)}return this._stringifyObject(b)},_stringifyPrimitive:function(c,b){switch(b){case "string":return this._quote(c);case "number":return isFinite(c)?c:"null";case "boolean":return c}return"null"},_str:function(c,b){var e=b[c],d=typeof e;if(e&&typeof e==="object"&&typeof e.toJSON==="function"){e=e.toJSON(c);d=typeof e}if(/(number|string|boolean)/.test(d)||
!e&&d==="object")return this._stringifyPrimitive(e,d);else return this._stringifyReference(e)}})})(jQuery);
(function(a){a.extend(a.jqx._jqxGrid.prototype,{setcolumnindex:function(c,f){var e=this.getcolumn(c);var h=this.columns.records.indexOf(e);this.columns.records.splice(h,1);this.columns.records.splice(f,0,e);var d=0;var i=this.headerZIndex;this.columnsrow.children().detach();var g=this.toThemeProperty("jqx-grid-cell");g+=" "+this.toThemeProperty("jqx-grid-cell-pinned");if(this.filterrow){a(this.filterrow.children()[0]).children().detach();this.filterrow[0].cells=[]}var j=this;var b=null;if(j.filterrow!=
undefined)var b=a(j.filterrow.children()[0]);this.columnsrow[0].cells=[];a.each(this.columns.records,function(k,n){var l=this.uielement;j.columnsrow.append(l);l.css("z-index",i--);var m=this.width;l.css("left",d);j.columnsrow[0].cells[j.columnsrow[0].cells.length]=l[0];if(j.filterrow){var o=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+g+'"></div>');b.append(o);o.css("left",d);o.css("z-index",i+1);o.width(this.width);o[0].left=d;o.append(this._filterwidget);j.filterrow[0].cells[j.filterrow[0].cells.length]=
o[0]}if(!(this.hidden&&this.hideable))d+=m});var e=this._columns[h];this._columns.splice(h,1);this._columns.splice(f,0,e);this._updatecolumnwidths();this._updatecellwidths();if(this._updatefilterrowui&&this.filterable)this._updatefilterrowui();this._renderrows(this.virtualsizeinfo)},_handlecolumnsreorder:function(){var d=this;var g=-1;var c=false;if(!d.columnsreorder)return;var f="mousemove.reorder"+this.element.id;var e="mousedown.reorder"+this.element.id;var h="mouseup.reorder"+this.element.id;
var b=false;if(this.isTouchDevice()){b=true;f="touchmove.reorder"+this.element.id;e="touchstart.reorder"+this.element.id;h="touchend.reorder"+this.element.id}this.removeHandler(a(document),f);this.addHandler(a(document),f,function(j){if(d.reordercolumn!=null){var k=parseInt(j.pageX);var r=parseInt(j.pageY);if(b){var o=d.getTouches(j);var n=o[0];k=parseInt(n.pageX);r=parseInt(n.pageY)}var m=d.host.offset();var s=parseInt(m.left);var t=parseInt(m.top);if(d.dragmousedownoffset==undefined||d.dragmousedownoffset==
null)d.dragmousedownoffset={left:0,top:0};var q=parseInt(k)-parseInt(d.dragmousedownoffset.left);var i=parseInt(r)-parseInt(d.dragmousedownoffset.top);d.reordercolumn.css({left:q+"px",top:i+"px"});c=false;if(k>=s&&k<=s+d.host.width())if(r>=t&&r<=t+d.host.height())c=true;g=-1;if(c){d.reordercolumnicon.removeClass(d.toThemeProperty("jqx-grid-dragcancel-icon"));d.reordercolumnicon.addClass(d.toThemeProperty("jqx-grid-drag-icon"));var p=d.columnsheader.offset();var l=p.top+d.columnsheader.height();if(d.columnsdropline!=
null)if(r>=p.top&&r<=l)g=d._handlereordercolumnsdroplines(k);else d.columnsdropline.fadeOut("slow")}else{if(d.columnsdropline!=null)d.columnsdropline.fadeOut("slow");d.reordercolumnicon.removeClass(d.toThemeProperty("jqx-grid-drag-icon"));d.reordercolumnicon.addClass(d.toThemeProperty("jqx-grid-dragcancel-icon"))}}});this.columnsbounds=new Array;this.removeHandler(a(document),e);this.addHandler(a(document),e,function(i){a(document.body).addClass("jqx-disableselect");d.columnsbounds=new Array;var k=
d.host.offset().left;var j=d.host.offset().top;if(d.showtoolbar)j+=d.toolbarheight;if(d.groupable)j+=d.groupsheaderheight;a.each(d.columns.records,function(l){if(l==0)k+=parseInt(this.uielement[0].style.marginLeft);d.columnsbounds[d.columnsbounds.length]={top:j,column:this,left:k,width:this.width,height:2+d.rowsheight};k+=this.width})});this.removeHandler(a(document),h);this.addHandler(a(document),h,function(i){a(document.body).removeClass("jqx-disableselect");var l=parseInt(i.pageX);var s=parseInt(i.pageY);
if(b){var o=d.getTouches(i);var n=o[0];l=parseInt(n.pageX);s=parseInt(n.pageY)}var m=d.host.offset();var u=parseInt(m.left);var v=parseInt(m.top);var j=d.groupsheader.height();if(d.showtoolbar)v+=d.toolbarheight;d.columndragstarted=false;d.dragmousedown=null;if(d.reordercolumn!=null){var k=a.data(d.reordercolumn[0],"reorderrecord");var w=d.columns.records.indexOf(d.getcolumn(k));d.reordercolumn.remove();d.reordercolumn=null;var p=d.groups.length;p+=d.rowdetails?1:0;if(k!=null){if(c)if(g!=-1){var q=
g.index;if(q>=p){var r=d.columns.records[q];if(r!=undefined){var t=d.columns.records.indexOf(d.getcolumn(r.datafield));if(w<t)if(g.position=="before")d.setcolumnindex(k,t-1);else d.setcolumnindex(k,t);else if(w>t)d.setcolumnindex(k,t)}}}if(d.columnsdropline!=null){d.columnsdropline.remove();d.columnsdropline=null}}}})},_handlereordercolumnsdroplines:function(g){var b=this;var f=-1;var d=b.groups.length;d+=b.rowdetails?1:0;var e=parseInt(b.host.offset().left);var c=e+b.host.width();a.each(b.columnsbounds,
function(h){if(h>=d)if(g<=this.left+this.width/2){if(g>c){b.columnsdropline.fadeOut();return false}b.columnsdropline.css("left",parseInt(this.left)+"px");b.columnsdropline.css("top",parseInt(this.top)+"px");b.columnsdropline.height(this.height);b.columnsdropline.fadeIn("slow");f={index:h,position:"before"};return false}else if(g>=this.left+this.width/2){if(1+this.left+this.width>c){b.columnsdropline.fadeOut();return false}b.columnsdropline.css("left",1+this.left+this.width);b.columnsdropline.css("top",
this.top);b.columnsdropline.height(this.height);b.columnsdropline.fadeIn("slow");f={index:h,position:"after"}}});return f},_createreordercolumn:function(c,e,h){var g=this;var f=e;if(g.reordercolumn)g.reordercolumn.remove();if(g.columnsdropline)g.columnsdropline.remove();g.reordercolumn=a("<div></div>");var j=c.clone();g.reordercolumn.css("z-index",999999);j.css("border-width","1px");j.css("opacity","0.4");var i=a(j.find("."+g.toThemeProperty("jqx-grid-column-menubutton")));if(i.length>0)i.css("display",
"none");var b=a(j.find(".icon-close"));if(b.length>0)b.css("display","none");g.reordercolumnicon=a('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>');g.reordercolumnicon.addClass(g.toThemeProperty("jqx-grid-drag-icon"));g.reordercolumn.css("float","left");g.reordercolumn.css("position","absolute");var d=g.host.offset();j.width(c.width()+16);g.reordercolumn.append(j);g.reordercolumn.height(c.height());g.reordercolumn.width(j.width());
g.reordercolumn.append(g.reordercolumnicon);a(document.body).append(g.reordercolumn);j.css("margin-left",0);j.css("left",0);j.css("top",0);g.reordercolumn.css("left",f.left+g.dragmousedown.left);g.reordercolumn.css("top",f.top+g.dragmousedown.top);if(h!=undefined&&h){g.columnsdropline=a('<div style="z-index: 9999; display: none; position: absolute;"></div>');g.columnsdropline.width(2);g.columnsdropline.addClass(g.toThemeProperty("jqx-grid-group-drag-line"));a(document.body).append(g.columnsdropline)}},
_handlecolumnsdragreorder:function(c,f){if(this.reordercolumn)this.reordercolumn.remove();if(this.columnsdropline)this.columnsdropline.remove();this.dragmousedown=null;this.dragmousedownoffset=null;this.columndragstarted=false;this.reordercolumn=null;var g=this;var e;var b=false;if(this.isTouchDevice())b=true;var d="mousedown.drag";var e="mousemove.drag";if(b){d="touchstart.drag";e="touchmove.drag"}else this.addHandler(f,"dragstart",function(h){return false});this.addHandler(f,d,function(j){if(false==
c.draggable)return true;var i=j.pageX;var h=j.pageY;if(b){var k=g.getTouches(j);var m=k[0];i=m.pageX;h=m.pageY}g.dragmousedown={left:i,top:h};var l=a(j.target).offset();g.dragmousedownoffset={left:parseInt(i)-parseInt(l.left),top:parseInt(h-l.top)}});this.addHandler(f,e,function(j){if(!c.draggable)return true;if(g.dragmousedown){var i=j.pageX;var h=j.pageY;if(b){var l=g.getTouches(j);var n=l[0];i=n.pageX;h=n.pageY}e={left:i,top:h};if(!g.columndragstarted&&g.reordercolumn==null){var k=Math.abs(e.left-
g.dragmousedown.left);var m=Math.abs(e.top-g.dragmousedown.top);if(k>3||m>3){g._createreordercolumn(f,e,true);a.data(g.reordercolumn[0],"reorderrecord",c.datafield)}}}})}})})(jQuery);
(function(c){c.jqx.jqxWidget("jqxListMenu","",{});var a=0,b=0;c.extend(c.jqx._jqxListMenu.prototype,{defineInstance:function(){this.filterCallback=function(f,e){var d=c.jqx.string.containsIgnoreCase(c.trim(f),e);return d};this.placeHolder="Filter list items...";this.showFilter=false;this.showHeader=true;this.showBackButton=true;this.showNavigationArrows=true;this.alwaysShowNavigationArrows=false;this.backLabel="Back";this.width="100%";this.height="auto";this.animationType="slide";this.animationDuration=
250;this.headerAnimationDuration=0;this.autoSeparators=false;this.readOnly=false;this.roundedCorners=true;this.disabled=false;this.enableScrolling=true;this.touchMode=false;this._childrenMap={};this._parentMap={};this._lock=false;this._backButton=null;this._currentPage=null;this._header=null;this._oldHost},createInstance:function(){this.host.attr("data-role","listmenu")},refresh:function(d){this._render();this._removeClasses();this._addClasses();this._currentPage=this._currentPage||this.host.children(".jqx-listmenu").first();
this._changeHeader(this._currentPage);this._removeEventHandlers();this._addEventHandlers()},_render:function(){this._renderHost();this._renderAutoSeparators();this._renderSublists();this._renderFilterBar();this._renderHeader();this.host.css({width:this.width,height:this.height});if(this.disabled)this.disable();if(this.enableScrolling&&this.host.jqxPanel&&this.panel)this.panel.jqxPanel("_arrange")},_renderHost:function(){if(!this.host.is("div")){this._oldHost=this.host;this.host.wrap("<div/>");this.host=
this.host.parent();this.element=this.host[0];if(this.host.jqxPanel&&this.enableScrolling){this.host.wrap("<div/>");this.panel=this.host.parent();this.panel[0].id="panel"+this.element.id;this.panel.jqxPanel({sizeMode:"overflowy",autoUpdate:true,width:this.width,height:this.height,touchMode:this.touchMode});this.host.css({width:"100%"});this.host.css({height:"auto"});this.host.css("border","none")}}this.element.style.overflow="hidden";if(c.browser.msie&&c.browser.version<8)this.element.style.position=
"relative"},_renderAutoSeparators:function(g){var f=this.host.find(".jqx-listmenu-auto-separator"),d=this.host.find('[data-role="listmenu"]'),g,e;f.remove();for(e=0;e<d.length;e+=1){g=c(d[e]);if(g.data("auto-separators")||this.autoSeparators)this._renderListAutoSeparators(g)}},_renderSublists:function(){var e=[this.host.find(".jqx-listmenu").first()[0]||this.host.find("ul,ol").first()[0]],g,d,k,f,j;this._refreshList(e[0]);while(e.length){k=e.pop();g=this._getChildrenByTagName(k,"li","LI");f=g.length;
for(var h=0;h<f;h+=1){d=g[h];j=this._getChildList(d);this._refreshLi(d,h,f);if(j){e.push(j);this._refreshList(j,d,true)}}}},_refreshList:function(f,e,d){f=c(f);if(f.data("role")==="listmenu"){if(!f.is(".jqx-listmenu")){this._renderList(f);this._handleListId(f);this._addListClasses(f)}if(e)this._expandHierarchy(f[0],e);if(d)this._handleSublist(f[0])}},_renderList:function(d){d=c(d);if(!d.is(".jqx-listmenu")){d.detach();d.appendTo(this.host)}},_handleListId:function(d){if(!d[0].id){d[0].id="jqx-listmenu-"+
b;b+=1}},_renderListAutoSeparators:function(h){var e=h.children("li"),k,d;var j={};for(var g=0;g<e.length;g+=1){d=c(e[g]);if(!d.data("role")){if(c.trim(d.text())[0]!==k){k=c.trim(d.text())[0];var f=c('<li data-role="separator" class="'+this.toThemeProperty("jqx-listmenu-auto-separator")+'">'+k+"</li>");f.insertBefore(d);f[0].items=new Array;j=f[0]}j.items[j.items.length]=d[0]}}},_addListClasses:function(d){d.addClass("jqx-listmenu")},_expandHierarchy:function(g,f){if(f&&g){var e=f.id,d=g.id;this._childrenMap[e]=
d;this._parentMap[d]=e}},_handleSublist:function(d){if(!this._currentPage||d!==this._currentPage[0])d.style.display="none";else d.style.display="block"},_getChildrenByTagName:function(f,e,g){var d=[],h={};h[e]=h[g]=true;f=f.firstChild;while(f){if(h[f.nodeName])d.push(f);f=f.nextSibling}return d},_renderFilterBar:function(){if(!this._filterBar){this._filterBar=c("<div/>");this._filterInput=c('<input type="text" />');this._filterBar.append(this._filterInput);this.host.prepend(this._filterBar)}this._filterInput.attr("placeholder",
this.placeHolder);if(!this.showFilter)this._filterBar.css("display","none");else this._filterBar.css("display","block")},_renderHeader:function(){if(!this._header){this._header=c("<div/>");this.host.prepend(this._header);this._renderHeaderLabel()}this._renderBackButton();if(!this.showHeader)this._header.css("display","none");else this._header.css("display","block")},_renderHeaderLabel:function(){this._headerLabel=c("<span/>");this._headerLabel.addClass(this.toThemeProperty("jqx-listmenu-header-label"));
this._header.append(this._headerLabel)},_renderBackButton:function(){if(!this._backButton){this._backButton=c('<input type="button" value="'+this.backLabel+'"/>');this._header.prepend(this._backButton);this._backButton.jqxButton({theme:this.theme})}if(!this.showBackButton)this._backButton.css("display","none");else this._backButton.css("display","inline-block")},_removeEventHandlers:function(){this.removeHandler(this._backButton,"click");this.removeHandler(this._filterInput,"keyup");this.removeHandler(this._filterInput,
"change")},_addEventHandlers:function(){var d=this;this.addHandler(this._backButton,"click",function(){d.back()});this.addHandler(this._filterInput,"keyup change",function(){d._filter(c(this).val())})},_getChildList:function(d){if(!d)return;var h=this._childrenMap[d.id],g;if(d.className.indexOf("jqx-listmenu-item")>=0&&h)return document.getElementById(h);var f=this._getChildrenByTagName(d,"ul","UL")[0],e=this._getChildrenByTagName(d,"ol","OL")[0];g=f||e;return g},_refreshLi:function(d,g,f){if(d.parentNode&&
d.parentNode.getAttribute("data-role")==="listmenu"){if(d.id=="")var e=2;this._handleLiId(d);this._renderLi(d);this._removeLiEventHandlers(d);this._addLiEventHandlers(d);this._addLiClasses(d,g,f)}},_handleLiId:function(d){if(!d.id){d.id="jqx-listmenu-item-"+a;a+=1}},_renderLi:function(d){if(/(separator|header)/.test(c(d).data("role"))||c(d).children(".jqx-listmenu-arrow-right").length>0)return;c(d).wrapInner('<span class="'+this.toThemeProperty("jqx-listmenu-item-label")+'"></span>');if(this.showNavigationArrows||
this.alwaysShowNavigationArrows){var f=c("<span/>");var g=c(d).find("ul");var e=c(d).find("ol");if(this.alwaysShowNavigationArrows||g.length>0&&/(listmenu)/.test(g.data("role"))||e.length>0&&/(listmenu)/.test(e.data("role"))){f.addClass(this.toThemeProperty("jqx-listmenu-arrow-right"));f.addClass(this.toThemeProperty("icon-arrow-right"));f.appendTo(d)}}},_removeLiEventHandlers:function(d){var f=this.isTouchDevice();var e=(!f?"mousedown":"touchstart")+".listmenu";var g=(!f?"mouseup":"touchend")+".listmenu";
this.removeHandler(c(d),e);this.removeHandler(c(document),g+"."+d.id)},isTouchDevice:function(){var d=c.jqx.mobile.isTouchDevice();if(this.touchMode==true)d=true;return d},_addLiEventHandlers:function(d){d=c(d);var f=this,k=this.toThemeProperty("jqx-listmenu-arrow-right-pressed"),j=d.children(".jqx-listmenu-arrow-right");var g=f.isTouchDevice();var e=(!g?"mousedown":"touchstart")+".listmenu";var i=(!g?"mouseup":"touchend")+".listmenu";var h=null;if(!/(separator|readonly)/.test(d.data("role"))&&!this.readOnly){this.addHandler(d,
"dragstart",function(){return false});this.addHandler(d,e,function(l){if(!f.disabled){h=l.target;if(d.find('div[data-role="content"]').length==0){d.addClass(f.toThemeProperty("jqx-fill-state-pressed"));j.addClass(k)}}});this.addHandler(d,i,function(l){if(!f.disabled)if(h==l.target||!g)f.next(d)});this.addHandler(c(document),i+"."+d[0].id,function(){if(!f.disabled){d.removeClass(f.toThemeProperty("jqx-fill-state-pressed"));j.removeClass(k)}})}},_addLiClasses:function(d,f,e){d=c(d);if(d.data("role")===
"separator")this._handleSeparatorStyle(d);else if(d.data("role")==="header")this._handleHeaderStyle(d);else{if(this.readOnly||d.data("role")==="readonly")d.addClass(this.toThemeProperty("jqx-listmenu-item-readonly"));else d.removeClass(this.toThemeProperty("jqx-listmenu-item-readonly"));this._handleItemStyle(d)}if(f===0&&!this.showHeader&&!this.showFilter)d.addClass(this.toThemeProperty("jqx-rc-t"));if(f===e-1)d.addClass(this.toThemeProperty("jqx-rc-b"))},_handleSeparatorStyle:function(d){d.addClass(this.toThemeProperty("jqx-listmenu-separator"));
d.addClass(this.toThemeProperty("jqx-fill-state-pressed"));d[0].style.listStyle="none"},_handleHeaderStyle:function(d){d.css("display","none")},_handleItemStyle:function(d){d.addClass(this.toThemeProperty("jqx-listmenu-item"));d.addClass(this.toThemeProperty("jqx-fill-state-normal"))},back:function(){var e=this._currentPage,d;if(e)d=this._parentMap[e[0].id];this._changePage(e,c("#"+d).parent(),this.animationDuration,true)},next:function(d){var h=d.attr("id"),f=this._childrenMap[h],g=c("#"+f),e=c("#"+
h).parent();6;this._changePage(e,g,this.animationDuration)},changePage:function(d){if(typeof d==="string")d=c(d);if(!d[0]||d.attr("data-role")!=="listmenu"||d.parents().index(this.host)<0)throw new Error("Invalid newPage. The chosen newPage is not listmenu or it's not part of the selected jqxListMenu hierarchy.");if(this._currentPage[0]==d[0])return;this._changePage(this._currentPage,d,this.animationDuration)},_changePage:function(h,f,g,e){if(!this._lock){var d="_"+this.animationType+"Change"+(e?
"Back":"");if(f[0]){if(this.showFilter)if(f.find('div[data-role="content"]').length>0){c.each(f.find("li"),function(){if(c(this).data("role")==="separator")c(this).hide()});this._filterBar.css("display","none")}else this._filterBar.css("display","block");this._lock=true;this[d](h,f,this.animationDuration,function(){this._lock=false;this._changeHeader(f);this._currentPage=f})}}},_changeHeader:function(e){var f=c(e).find('li[data-role="header"]').first();if(f[0]){var d=this;this._headerLabel.fadeOut(this.headerAnimationDuration/
2,function(){d._headerLabel.html(f.html());d._headerLabel.fadeIn(d.headerAnimationDuration/2)})}},_slideChange:function(g,e,f,h){var d=this;if(this.enableScrolling&&this.panel!=null)this.panel.jqxPanel("scrollTo",0,0);this._initSlide(g,e);g.animate({"margin-left":-g.width()-parseInt(g.css("margin-right"),10)||0},f,"easeInOutSine");e.animate({"margin-left":0},f,"easeInOutSine",function(){d._slideEnd(g,e);h.call(d,c(this))})},_initSlide:function(e,d){e.width(e.width());d.css({marginTop:-e.outerHeight(true),
marginLeft:e.width()+(parseInt(e.css("margin-right"),10)||0),display:"block",height:"auto",width:e.width()})},_slideEnd:function(e,d){this.host.css("height","auto");e.css({display:"none",width:"auto",height:"auto",marginTop:0,marginLeft:0});d.css({marginTop:0,marginLeft:0,height:"auto",width:"auto",display:"block"})},_slideChangeBack:function(g,e,f,h){var d=this;this._initSlideBack(g,e);g.animate({"margin-left":g.width()+parseInt(g.css("margin-right"),10)||0},f);e.animate({"margin-left":0},f,function(){d._slideEnd(g,
e);h.call(d,c(this))})},_initSlideBack:function(e,d){e.css({marginTop:-d.outerHeight(true),width:e.width()});d.css({width:e.width(),marginLeft:-e.width()-parseInt(e.css("margin-right"),10)||0,display:"block",height:"auto"})},_fadeChangeBack:function(f,d,e,g){this._fadeChange(f,d,e,g)},_fadeChange:function(g,e,f,h){var d=this;g.fadeOut(f/2,function(){e.fadeIn(f/2,function(){h.call(d,c(this))})})},_removeClasses:function(){this._filterBar.removeClass(this.toThemeProperty("jqx-listmenu-filter"));this._filterBar.removeClass(this.toThemeProperty("jqx-widget-header"));
this._filterInput.removeClass(this.toThemeProperty("jqx-listmenu-filter-input"));this._filterInput.removeClass(this.toThemeProperty("jqx-input"));this._header.removeClass(this.toThemeProperty("jqx-listmenu-header"));this._header.removeClass(this.toThemeProperty("jqx-widget-header"));this._header.removeClass(this.toThemeProperty("jqx-rc-t"));if(this.roundedCorners)this.host.removeClass(this.toThemeProperty("jqx-rc-all"));this.host.removeClass(this.toThemeProperty("jqx-widget"));this.host.removeClass(this.toThemeProperty("jqx-listmenu-widget"));
this.host.removeClass(this.toThemeProperty("jqx-fill-state-normal"));this.host.removeClass(this.toThemeProperty("jqx-reset"));if(this.host.find('div[data-role="content"]').length>0)this.host.find('div[data-role="content"]').removeClass(this.toThemeProperty("jqx-widget-content"))},_addClasses:function(){if(this.roundedCorners)this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass("jqx-widget");this.host.addClass("jqx-listmenu-widget");this.host.addClass("jqx-fill-state-normal");
this.host.addClass("jqx-reset");this._filterBar.addClass(this.toThemeProperty("jqx-listmenu-filter"));this._filterBar.addClass(this.toThemeProperty("jqx-widget-header"));this._filterInput.addClass(this.toThemeProperty("jqx-listmenu-filter-input"));this._filterInput.addClass(this.toThemeProperty("jqx-input"));this._header.addClass(this.toThemeProperty("jqx-listmenu-header"));this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._header.addClass(this.toThemeProperty("jqx-rc-t"));if(this.host.find('div[data-role="content"]').length>
0)this.host.find('div[data-role="content"]').addClass(this.toThemeProperty("jqx-widget-content"))},_raiseEvent:function(){},_filter:function(g){var f=this.host.find(".jqx-listmenu-item");for(var e=0;e<f.length;e+=1)if(!this.filterCallback(f[e].innerText,g))f[e].style.display="none";else f[e].style.display="block";var f=this.host.find(".jqx-listmenu-separator");for(var e=0;e<f.length;e+=1){var d=false;c.each(f[e].items,function(){if(c(this).css("display")!="none"){d=true;return false}});if(!d)f[e].style.display=
"none";else f[e].style.display="block"}},disable:function(){this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.disabled=true},enable:function(){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this.disabled=false},propertyChangedHandler:function(d,e,g,f){if(e=="disabled")if(f)d.disable();else d.enable();if(e==="backLabel"){d._backButton.html(f);return}else if(e==="placeHolder")d._filterInput.attr("placeholder",f);else if(/(showFilter|showHeader|showBackButton|width|height|autoSeparators|readOnly)/.test(e)){d._render();
return}}})})(jQuery);
try{(function(g,b){b.jqwidgets=b.jqwidgets||{};b.jqwidgets.knockout=function(w){var x=this;var y={},v=w.name;y.init=function(D,E,A,C){var z=b.utils.unwrapObservable(E());var G=b.toJS(z);if(w.reset)w.reset();if(g.data(D)[v]==undefined){var B=[];g(D)[v]();widget=g.data(D)[v].instance;g.each(w,function(H,I){if(widget.hasOwnProperty(H)&&G.hasOwnProperty(H))if(!widget.koupdating){widget.koupdatingFromObservable=true;if(b.toJSON(G[H])!=b.toJSON(widget[H]))w.setProperty(widget,H,widget[H],G[H]);B[H]=H;widget.koupdatingFromObservable=
false}});var F={};g.each(G,function(H,I){if(B[H]==undefined)F[H]=G[H]});widget.host[v](F)}widget=g.data(D)[v].instance;widget.koupdatingFromObservable=false;widget.koupdating=false;if(w.events)g.each(w.events,function(){var H=this;g(D).bind(H+"."+D.id,function(I){widget=g.data(D)[v].instance;if(!widget.koupdatingFromObservable){widget.koupdating=true;var K=E();var J=w.getProperty(widget,I,H,z);if(J!=undefined)if(K.hasOwnProperty(J.name)&&g.isFunction(K[J.name]))K[J.name](J.value);else if(K[J.name])E(J.value);
widget.koupdating=false}})})};y.update=function(D,E,B,C,A){var z=b.utils.unwrapObservable(E());var F=b.toJS(z);widget=g.data(D)[v].instance;if(widget.koupdating)return;g.each(w,function(G,H){if(widget.hasOwnProperty(G)&&F.hasOwnProperty(G))if(!widget.koupdating){widget.koupdatingFromObservable=true;if(b.toJSON(F[G])!=b.toJSON(widget[G]))w.setProperty(widget,G,widget[G],F[G]);widget.koupdatingFromObservable=false}})};b.bindingHandlers[w.name]=y};var r=new b.jqwidgets.knockout({name:"jqxGauge",disabled:false,
min:0,max:220,value:0,reset:function(){this.value=0;this.max=220;this.min=0;this.disabled=false},getProperty:function(w,x,v){},setProperty:function(v,w,x,y){if(w=="disabled")v.host.jqxGauge({disabled:y});if(w=="min")v.host.jqxGauge({min:y});if(w=="max")v.host.jqxGauge({max:y});if(w=="value")v.host.jqxGauge({value:y})}});var d=new b.jqwidgets.knockout({name:"jqxLinearGauge",disabled:false,min:0,max:220,value:0,reset:function(){this.value=0;this.max=220;this.min=0;this.disabled=false},getProperty:function(w,
x,v){},setProperty:function(v,w,x,y){if(w=="disabled")v.host.jqxLinearGauge({disabled:y});if(w=="min")v.host.jqxLinearGauge({min:y});if(w=="max")v.host.jqxLinearGauge({max:y});if(w=="value")v.host.jqxLinearGauge({value:y})}});var q=new b.jqwidgets.knockout({name:"jqxSlider",disabled:false,min:0,max:10,value:0,reset:function(){this.value=0;this.max=10;this.min=0;this.disabled=false},events:["change"],getProperty:function(w,x,v){if(v=="change")return{name:"value",value:x.args.value}},setProperty:function(v,
w,x,y){if(w=="disabled")v.host.jqxSlider({disabled:y});if(w=="min")v.host.jqxSlider({min:parseFloat(y)});if(w=="max")v.host.jqxSlider({max:parseFloat(y)});if(w=="value")v.host.jqxSlider({value:parseFloat(y)})}});var m=new b.jqwidgets.knockout({name:"jqxScrollBar",disabled:false,min:0,max:10,value:0,reset:function(){this.value=0;this.max=10;this.min=0;this.disabled=false},events:["valuechanged"],getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",value:parseInt(x.currentValue)}},setProperty:function(v,
w,x,y){if(w=="disabled")v.host.jqxScrollBar({disabled:y});if(w=="min")v.host.jqxScrollBar({min:parseFloat(y)});if(w=="max")v.host.jqxScrollBar({max:parseFloat(y)});if(w=="value")v.host.jqxScrollBar({value:parseFloat(y)})}});var a=new b.jqwidgets.knockout({name:"jqxProgressBar",disabled:false,value:0,reset:function(){this.value=0;this.disabled=false},events:["valuechanged"],getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",value:parseInt(x.currentValue)}},setProperty:function(v,
w,x,y){if(w=="disabled")v.host.jqxProgressBar({disabled:y});if(w=="value")v.host.jqxProgressBar({value:parseFloat(y)})}});var e=new b.jqwidgets.knockout({name:"jqxButton",disabled:false,reset:function(){this.disabled=false},getProperty:function(w,x,v){},setProperty:function(v,w,x,y){if(w=="disabled")v.host.jqxButton({disabled:y})}});var f=new b.jqwidgets.knockout({name:"jqxCheckBox",checked:false,disabled:false,reset:function(){this.checked=false;this.disabled=false},events:["change"],getProperty:function(w,
x,v){if(v=="change")return{name:"checked",value:x.args.checked}},setProperty:function(v,w,x,y){if(w=="disabled")v.host.jqxCheckBox({disabled:y});if(w=="checked")if(x!=y)v.host.jqxCheckBox({checked:y})}});var s=new b.jqwidgets.knockout({name:"jqxRadioButton",checked:false,disabled:false,reset:function(){this.checked=false;this.disabled=false},events:["change"],getProperty:function(w,x,v){if(v=="change")return{name:"checked",value:x.args.checked}},setProperty:function(v,w,x,y){if(w=="disabled")v.host.jqxRadioButton({disabled:y});
if(w=="checked")if(x!=y)v.host.jqxRadioButton({checked:y})}});var l=new b.jqwidgets.knockout({name:"jqxDateTimeInput",value:null,disabled:false,reset:function(){this.value=null;this.disabled=false},events:["valuechanged"],getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",value:x.args.date}},setProperty:function(v,w,x,y){if(w=="value")v.setDate(y);if(w=="disabled")v.host.jqxDateTimeInput({disabled:y})}});var u=new b.jqwidgets.knockout({name:"jqxCalendar",value:null,disabled:false,
reset:function(){this.value=null;this.disabled=false},events:["valuechanged"],getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",value:x.args.date}},setProperty:function(v,w,x,y){if(w=="value")v.setDate(y);if(w=="disabled")v.host.jqxCalendar({disabled:y})}});var n=new b.jqwidgets.knockout({name:"jqxNumberInput",value:null,events:["valuechanged"],disabled:false,reset:function(){this.value=null;this.disabled=false},getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",
value:w.val()}},setProperty:function(v,w,x,y){if(w=="value")v.host.jqxNumberInput("val",y);if(w=="disabled")v.host.jqxNumberInput({disabled:y})}});var i=new b.jqwidgets.knockout({name:"jqxMaskedInput",value:null,events:["valuechanged"],disabled:false,reset:function(){this.value=null;this.disabled=false},getProperty:function(w,x,v){if(v=="valuechanged")return{name:"value",value:w.val()}},setProperty:function(v,w,x,y){if(w=="value")v.host.jqxMaskedInput("val",y);if(w=="disabled")v.host.jqxMaskedInput({disabled:y})}});
var c=new b.jqwidgets.knockout({name:"jqxListBox",source:null,disabled:false,selectedIndex:-1,reset:function(){this.disabled=false;this.selectedIndex=-1;this.source=null},events:["change"],getProperty:function(w,x,v){if(v=="change"){this.selectedIndex=w.selectedIndex;return{name:"selectedIndex",value:w.selectedIndex}}},setProperty:function(v,w,y,z){if(w=="source"){v.source=z;v.refresh()}if(w=="disabled"){v.disabled=z;v._renderItems()}if(w=="selectedIndex"){var x=v.disabled;v.disabled=false;v.selectIndex(z);
v.disabled=x;if(x)v._renderItems()}}});var o=new b.jqwidgets.knockout({name:"jqxDropDownList",source:null,disabled:false,selectedIndex:-1,reset:function(){this.disabled=false;this.selectedIndex=-1;this.source=null},events:["change"],getProperty:function(w,x,v){if(v=="change"){this.selectedIndex=w.selectedIndex;return{name:"selectedIndex",value:w.selectedIndex}}},setProperty:function(v,w,x,y){if(w=="source")if(this.source!=y){this.source=y;v.host.jqxDropDownList({source:y})}if(w=="disabled")if(y!=
this.disabled){this.disabled=y;v.host.jqxDropDownList({disabled:y})}if(w=="selectedIndex")if(y!=this.selectedIndex){this.selectedIndex=y;v.host.jqxDropDownList({selectedIndex:y})}}});var h=new b.jqwidgets.knockout({name:"jqxComboBox",source:null,disabled:false,selectedIndex:-1,reset:function(){this.disabled=false;this.selectedIndex=-1;this.source=null},events:["change"],getProperty:function(w,x,v){if(v=="change"){this.selectedIndex=w.selectedIndex;return{name:"selectedIndex",value:w.selectedIndex}}},
setProperty:function(v,w,x,y){if(w=="source")if(this.source!=y){this.source=y;v.host.jqxComboBox({source:y})}if(w=="disabled")if(y!=this.disabled){this.disabled=y;v.host.jqxComboBox({disabled:y})}if(w=="selectedIndex")if(y!=this.selectedIndex){this.selectedIndex=y;v.host.jqxComboBox({selectedIndex:y})}}});var t=new b.jqwidgets.knockout({name:"jqxTree",source:null,disabled:false,reset:function(){this.disabled=false;this.source=null},getProperty:function(w,x,v){},setProperty:function(v,w,x,y){if(w==
"source")if(this.source!=y){this.source=y;v.host.jqxTree({source:y})}if(w=="disabled")if(y!=this.disabled){this.disabled=y;v.host.jqxTree({disabled:y})}}});var k=new b.jqwidgets.knockout({name:"jqxMenu",source:null,disabled:false,reset:function(){this.disabled=false;this.source=null},getProperty:function(w,x,v){},setProperty:function(v,w,x,y){if(w=="source")if(this.source!=y){this.source=y;v.host.jqxMenu({source:y})}if(w=="disabled")if(y!=this.disabled){this.disabled=y;v.host.jqxMenu({disabled:y})}}});
var p=new b.jqwidgets.knockout({name:"jqxChart",source:null,disabled:false,reset:function(){this.disabled=false;this.source=null},getProperty:function(w,x,v){},setProperty:function(v,w,x,y){if(w=="source")if(y!=this.source){this.source=y;var z=v.host.jqxChart("enableAnimations");v.host.jqxChart({enableAnimations:false});v.host.jqxChart({source:y});setTimeout(function(){v.host.jqxChart({enableAnimations:z})},1E3)}if(w=="disabled")if(y!=this.disabled){this.disabled=y;v.host.jqxChart({disabled:y})}}});
var j=new b.jqwidgets.knockout({name:"jqxGrid",source:null,disabled:false,selectedRowIndex:-1,reset:function(){this.disabled=false;this.source=null;this.selectedRowIndex=-1},events:["cellvaluechanged","cellselect","rowselect"],getProperty:function(w,x,v,B){if(v=="cellvaluechanged"){var z=w.host.jqxGrid("getrowid",x.args.rowindex);var A=w.host.jqxGrid("getrowdata",z);var y=B.source;if(y!=undefined){y.replace(y()[z],A);return{name:"source",value:b.toJS(y)}}}},setProperty:function(y,F,E,w){if(F=="selectedRowIndex")y.host.jqxGrid("selectrow",
w);if(F=="source")if(this.source==null||w==null){if(this.source!=w){this.source=w;var v={localdata:w,datatype:"local"};var D=new g.jqx.dataAdapter(v);y.host.jqxGrid({source:D})}}else{var v={localdata:w,datatype:"local"};var D=new g.jqx.dataAdapter(v);D.dataBind();if(!E.records||!D.records)return;var G=Math.max(E.records.length,D.records.length);var C=Math.abs(E.records.length-D.records.length);if(C>1)y.host.jqxGrid("beginupdate");for(var A=0;A<G;A++){var B=D.records[A];if(B==undefined){var x=y.host.jqxGrid("getrowid",
A);y.host.jqxGrid("deleterow",x)}else{var z=E.records[A]!=undefined;if(z){if(b.toJSON(B)!=b.toJSON(E.records[A])){if(E.records[A].uid!=undefined){B.uid=E.records[A].uid;if(b.toJSON(B)==b.toJSON(E.records[A]))continue}var x=y.host.jqxGrid("getrowid",A);y.host.jqxGrid("updaterow",x,B)}}else y.host.jqxGrid("addrow",null,B)}}if(C>1)y.host.jqxGrid("endupdate")}if(F=="disabled")if(w!=this.disabled){this.disabled=w;y.host.jqxGrid({disabled:w})}}})})(jQuery,ko)}catch(error){}
(function(b){var a=0;b.jqx.jqxWidget("jqxScrollView","",{});b.extend(b.jqx._jqxScrollView.prototype,{defineInstance:function(){this.width=320;this.height=320;this.buttonsOffset=[0,0];this.moveThreshold=0.5;this.currentPage=0;this.animationDuration=300;this.showButtons=true;this.bounceEnabled=true;this.slideShow=false;this.slideDuration=3E3;this.disabled=false;this._mouseDown=false;this._movePermited=false;this._startX=-1;this._startOffset=-1;this._lastOffset=-1;this._events=["pageChanged"];this._eventsMap=
{mousemove:"touchmove",mouseup:"touchend",mousedown:"touchstart"}},createInstance:function(){a+=1;this._instanceId=a;this._isTouchDevice=b.jqx.mobile.isTouchDevice()},refresh:function(){this._render();this._performLayout();if(this.moveThreshold.toString().indexOf("%")>=0)this.moveThreshold=parseInt(this.moveThreshold,10)/100;this._refreshPages();this._refreshButtons();this._removeEventListeners();this._addEventListeners();this._changePage(this.currentPage,false,0);if(this.slideShow){var c=this;this.slideShowTimer=
setInterval(function(){if(c.currentPage>=c._pages.length-1)c._changePage(0,true,c.animationDuration);else c._changePage(c.currentPage+1,true,c.animationDuration)},this.slideDuration)}else if(this.slideShowTimer!=undefined)clearInterval(this.slideShowTimer)},_getEvent:function(c){if(this._isTouchDevice)return this._eventsMap[c];return c},_eventNamespace:function(){return".scrollview"+this._instanceId},_removeEventListeners:function(){this.removeHandler(this._innerWrapper);this.removeHandler(this.host,
this._getEvent("mousemove")+this._eventNamespace());this.removeHandler(b(document),this._getEvent("mouseup")+this._eventNamespace())},_getCoordinate:function(c,d){if(this._isTouchDevice)return c.originalEvent.touches[0][d];return c[d]},_draggedRight:function(){if(this.currentPage>0){var e=this.currentPage-1,d=b(this._pages[e]),c=d.offset().left+d.outerWidth(),f=c-this.host.offset().left;if(f>=this.host.width()*this.moveThreshold){this.changePage(e);return true}}return false},_draggedLeft:function(){if(this.currentPage+
1<this._pages.length){var d=this.currentPage+1,c=b(this._pages[d]),e=this.host.width()-(c.offset().left-this.host.offset().left);if(e>=this.host.width()*this.moveThreshold){this.changePage(d);return true}}return false},_dropTarget:function(){var c;if(this._movedLeft)c=this._draggedLeft();else c=this._draggedRight();if(!c)this.changePage(this.currentPage,false)},_scrollEnabled:function(c){if(!this._mouseDown)return false;if(!this._movePermited)if(this._isTouchDevice||Math.abs(this._getCoordinate(c,
"pageX")-this._startX)>=5)this._movePermited=true;return this._movePermited},_setMoveDirection:function(c){if(this._lastOffset>c)this._movedLeft=true;else this._movedLeft=false},_getBounceOffset:function(d){var c=-(this._innerWrapper.width()-this.host.width());if(d>0)d=0;else if(d<c)d=c;return d},_addEventListeners:function(){var c=this;this.addHandler(this._innerWrapper,this._getEvent("mousedown")+this._eventNamespace(),function(d){c._mouseDown=true;c._startX=c._getCoordinate(d,"pageX");c._startOffset=
c._lastOffset=parseInt(c._innerWrapper.css("margin-left"),10)});this.addHandler(this.host,"dragstart",function(){return false});this.addHandler(this.host,this._getEvent("mousemove")+this._eventNamespace(),function(d){if(c._scrollEnabled(d)){var f=c._startOffset+c._getCoordinate(d,"pageX")-c._startX;if(!c.bounceEnabled)f=c._getBounceOffset(f);c._innerWrapper.css("margin-left",f);c._setMoveDirection(f);c._lastOffset=f;d.preventDefault();return false}return true});this.addHandler(b(document),this._getEvent("mouseup")+
this._eventNamespace(),function(d){if(c._movePermited)c._dropTarget();c._movePermited=false;c._mouseDown=false})},_render:function(){this.host.addClass(this.toThemeProperty("jqx-scrollview"));this.host.css({overflow:"hidden",position:"relative"})},_performLayout:function(){this.host.css({width:this.width,height:this.height})},_renderPages:function(){if(!this._innerWrapper){this._innerWrapper=b("<div/>");this.host.wrapInner(this._innerWrapper);this._innerWrapper=this.host.children().first()}this._innerWrapper.addClass(this.toThemeProperty("jqx-scrollview-inner-wrapper"));
this._innerWrapper.height(this.host.height())},_refreshPage:function(c){c.addClass(this.toThemeProperty("jqx-scrollview-page"));this._performPageLayout(c)},_refreshPages:function(){var c=this,d=0;this._renderPages();this._pages=this._innerWrapper.children();this._pages.each(function(){c._refreshPage(b(this));d+=b(this).outerWidth(true)});this._innerWrapper.width(d)},_performPageLayout:function(c){c.css("float","left");c.width(this.host.width());c.height(this.host.height())},_refreshButtons:function(){this._renderButtons();
this._removeButtonsEventListeners();this._addButtonsEventListeners();this._performButtonsLayout()},_removeButtonsEventListeners:function(){var c=this;this._buttonsContainer.children().each(function(){c.removeHandler(b(this))})},_addButtonsEventListeners:function(){var c=this;this._buttonsContainer.children().each(function(d){c.addHandler(b(this),"click",function(){c.changePage(d)})})},_performButtonsLayout:function(){var c=(this.host.width()-this._buttonsContainer.width())/2;this._buttonsContainer.css({position:"absolute",
left:c+parseInt(this.buttonsOffset[0],10),top:this.host.height()-2*this._buttonsContainer.outerHeight()+parseInt(this.buttonsOffset[1],10)})},_renderButtons:function(){if(this._buttonsContainer)this._buttonsContainer.remove();var e,d;this._buttons=[];this._buttonsContainer=b("<span/>");for(var c=0;c<this._pages.length;c+=1){d=b('<span class="'+this.toThemeProperty("jqx-scrollview-button")+" "+this.toThemeProperty("jqx-fill-state-normal")+'"></span>');this._buttonsContainer.append(d);this._buttons[c]=
d}this._buttonsContainer.appendTo(this.host)},_raiseEvent:function(c,e){var d=new b.Event(this._events[c]);d.args=e;return this.host.trigger(d)},_swapButtons:function(c,d){this._buttons[c].removeClass(this.toThemeProperty("jqx-scrollview-button-selected"));this._buttons[c].removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._buttons[d].addClass(this.toThemeProperty("jqx-scrollview-button-selected"));this._buttons[d].addClass(this.toThemeProperty("jqx-fill-state-pressed"))},_changePage:function(d,
f,i){if(this.disabled)return;var h=b(this._pages[d]),g=(this.host.width()-h.width())/2,e=h.offset().left-this._innerWrapper.offset().left-g,j=this.currentPage,c=this;if(typeof i==="undefined")i=this.animationDuration;this._innerWrapper.stop();this._swapButtons(this.currentPage,d);this.currentPage=d;this._innerWrapper.animate({marginLeft:-e},i,function(){if(f)c._raiseEvent(0,{currentPage:d,oldPage:j})})},propertyChangedHandler:function(c,d,f,e){if(d==="currentPage"){c.currentPage=f;c.changePage(e)}else if(/(buttonsOffset|width|height)/.test(d))c.refresh();
else if(d==="showButtons"){if(!e)c._buttonsContainer.css("display","none");else c._buttonsContainer.css("display","block");return}else if(d=="slideShow")c.refresh()},changePage:function(c){if(c>=this._pages.length||c<0)throw new Error("Invalid index!");this._changePage(c,true)},forward:function(){if(this.currentPage+1<this._pages.length)this.changePage(this.currentPage+1)},back:function(){if(this.currentPage-1>=0)this.changePage(this.currentPage-1)}})})(jQuery);
(function(b){var a=0;b.jqx.jqxWidget("jqxTouch","",{});b.extend(b.jqx._jqxTouch.prototype,{defineInstance:function(){this.swipeMin=50;this.swipeMax=500;this.swipeDelay=1E3;this.tapHoldDelay=750;this.swipeMaxVerticalDisance=100;this.swipeMaxHorizontalDisance=100;this.orientationChangeEnabled=true;this._eventsMap={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};this._swipeLocked=false;this._rotationInterval=200;this._events=["tap","taphold","swipe","swipeleft","swiperight","swipetop",
"swipebottom","orientationchange"];this._instanceId=-1},createInstance:function(){a+=1;this._instanceId=a;this._isTouchDevice=b.jqx.mobile.isTouchDevice();this._defineRotateHandler()},refresh:function(){this._removeEventListeners();this._addEventListeners()},_defineRotateHandler:function(){var c=this;if(!this._rotateHandler)this._rotateHandler=function(){c._checkOrientation()}},_getEvent:function(c){if(this._isTouchDevice)c=this._eventsMap[c];return c+this._getEventNamespace()},_getEventNamespace:function(){return".swipe"+
this._instanceId},_removeEventListeners:function(){clearInterval(this._rotateInterval);this.removeHandler(b(document),this._getEvent("mouseup"));this.removeHandler(this.host,this._getEvent("mousedown"));this.removeHandler(this.host,this._getEvent("mousemove"));if(window.removeEventListener){window.removeEventListener("resize",this._rotateHandler);window.removeEventListener("orientationchange",this._rotateHandler)}},_addEventListeners:function(){var c=this;this.addHandler(this.host,this._getEvent("mouseup"),
function(d){c._resetSwipe();c._resetTap()});this.addHandler(this.host,this._getEvent("mousedown"),function(d){c._initSwipe(d);c._initTap(d)});this.addHandler(this.host,this._getEvent("mousemove"),function(d){c._maxSwipeVerticalDistance=Math.max(c._maxSwipeVerticalDistance,Math.abs(c._startY-c._getCoordinates(d).y));c._maxSwipeHorizontalDistance=Math.max(c._maxSwipeHorizontalDistance,Math.abs(c._startX-c._getCoordinates(d).x));c._mouseMoved=true;return c._handleSwipeEvents(d)});this._rotationListeners()},
_handleSwipeEvents:function(d){var c=true;if(this._mouseDown&&!this._tapHoldFired){c=this._handleVerticalSwipeEvents(d);c=this._handleHorizontalSwipeEvents(d)}this._lastPosition=this._getCoordinates(d);return c},_handleVerticalSwipeEvents:function(f){var d,c;d=this._getCoordinates(f).y;c=d-this._startY;if(this._maxSwipeHorizontalDistance<this.swipeMaxHorizontalDisance)return this._swiped(f,c,2);return true},_handleHorizontalSwipeEvents:function(f){var d,c;d=this._getCoordinates(f).x;c=d-this._startX;
if(this._maxSwipeVerticalDistance<this.swipeMaxVerticalDisance)return this._swiped(f,c);return true},_swiped:function(f,d,c){c=c||0;if(Math.abs(d)>=this.swipeMin&&!this._swipeEvent&&!this._swipeLocked)this._swipeEvent=this._getSwipeEvent(d,c);if(Math.abs(d)<=this.swipeMax){f.stopImmediatePropagation();return false}return true},_getSwipeEvent:function(e,d){var c;if(e<0)c={eventId:3+d,data:{target:this.host}};else c={eventId:4+d,data:{target:this.host}};return c},_resetSwipe:function(){if(this._swipeEvent&&
!this._swipeLocked){this._raiseEvent(2,this._swipeEvent.data);this._raiseEvent(this._swipeEvent.eventId,this._swipeEvent.data)}clearTimeout(this._swipeTimeout);this._mouseDown=false},_resetTap:function(){clearTimeout(this._tapHoldTimeout);if(!this._tapHoldFired&&!this._mouseMoved)this._raiseEvent(0,{target:this.host})},_initTap:function(d){var c=this;this._mouseMoved=false;this._tapHoldFired=false;this._tapHoldTimeout=setTimeout(function(){if(!c._mouseMoved){c._raiseEvent(1,{target:this.host});c._tapHoldFired=
true}},this.tapHoldDelay)},_initSwipe:function(d){var c=this;this._mouseDown=true;this._maxSwipeVerticalDistance=0;this._maxSwipeHorizontalDistance=0;this._startX=this._getCoordinates(d).x;this._startY=this._getCoordinates(d).y;this._swipeLocked=false;this._swipeEvent=null;this._swipeTimeout=setTimeout(function(){c._swipeLocked=true},this.swipeDelay)},_rotationListeners:function(){var c=this;this._previousOrientation=window.orientation;this._previousWidth=screen.width;if(this.orientationChangeEnabled){if(window.addEventListener){window.addEventListener("resize",
this._rotateHandler,false);window.addEventListener("orientationchange",this._rotateHandler,false)}this._rotateInterval=setInterval(function(){c._checkOrientation()},this._rotationInterval)}},_checkOrientation:function(){var c="vertical";if(window.orientation!==this._previousOrientation||this._previousWidth!==screen.width){if(window.orientation===90||screen.width>screen.height)c="horizontal";this._raiseEvent(7,{orientation:c})}this._previousOrientation=window.orientation;this._previousWidth=screen.width},
_raiseEvent:function(d,c){var e=b.Event(this._events[d]);e.args=c;return this.host.trigger(e)},_getCoordinates:function(d){var f={x:d.pageX,y:d.pageY};if(this._isTouchDevice){f.x=d.originalEvent.touches[0].pageX;f.y=d.originalEvent.touches[0].pageY}return f},propertyChangedHandler:function(c,d,f,e){if(d==="orientationChangeEnabled")this.refresh();else return},isTouchDevice:function(){return false}})})(jQuery);!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=
b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d,e;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),e=c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),void 0!==e?e:!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=
!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c;return a(this[0]).is("form")?b=this.validate().form():(b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b})),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),
b){case "add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case "remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,
delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=
a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",
ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){(9!==b.which||""!==this.elementValue(a))&&(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in
this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",
url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),
range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!this.is(e.ignore)&&e[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&
this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",
"focusin focusout keyup",b).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",
[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c=this.clean(b),d=this.validationTargetFor(c),e=!0;return this.lastElement=d,void 0===d?delete this.invalid[c.name]:(this.prepareElement(d),this.currentElements=a(d),e=this.check(d)!==!1,e?delete this.invalid[d.name]:this.invalid[d.name]=!0),a(b).attr("aria-invalid",!e),this.numberOfInvalids()||(this.toHide=
this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=
null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||
this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",
this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),
this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d=a(b),e=b.type;return"radio"===e||"checkbox"===e?a("input[name='"+b.name+"']:checked").val():"number"===e&&"undefined"!=typeof b.validity?b.validity.badInput?!1:d.val():(c=d.val(),"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);for(d in f){e={method:d,parameters:f[d]};try{if(c=a.validator.methods[d].call(this,
i,b,e.parameters),"dependency-mismatch"===c&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j;}}if(!h)return this.objectLength(f)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||
a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,
c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b,method:c.method}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,
c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},
validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g=this.errorsFor(b),h=this.idOrName(b),i=a(b).attr("aria-describedby");g.length?(g.removeClass(this.settings.validClass).addClass(this.settings.errorClass),g.html(c)):(g=a("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(c||""),d=g,this.settings.wrapper&&
(d=g.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b),g.is("label")?g.attr("for",h):0===g.parents("label[for='"+h+"']").length&&(f=g.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),i?i.match(new RegExp("\\b"+f+"\\b"))||(i+=" "+f):i=f,a(b).attr("aria-describedby",i),e=this.groups[b.name],e&&a.each(this.groups,function(b,c){c===e&&a("[name='"+b+"']",this.currentForm).attr("aria-describedby",
g.attr("id"))}))),!c&&this.settings.success&&(g.text(""),"string"==typeof this.settings.success?g.addClass(this.settings.success):this.settings.success(g,b)),this.toShow=this.toShow.add(g)},errorsFor:function(b){var c=this.idOrName(b),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+d.replace(/\s+/g,", #")),this.errors().filter(e)},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&
(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case "select":return a("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},
dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&
this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},
creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),/min|max/.test(c)&&
(null===g||/number|range|text/.test(g))&&(d=Number(d)),d||0===d?e[c]=d:g===c&&"range"!==g&&(e[c]=!0);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),void 0!==d&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||
{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case "string":f=!!a(e.depends,c.form).length;break;case "function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?
b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},
addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c,d,e=0,f=0,g=!1;if(a=
a.replace(/\D/g,""),a.length<13||a.length>19)return!1;for(c=a.length-1;c>=0;c--)d=a.charAt(c),f=parseInt(d,10),g&&(f*=2)>9&&(f-=9),e+=f,g=!g;return e%10===0},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,
b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e,f,g=this.previousValue(c);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),g.originalMessage=
this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=g.message,d="string"==typeof d&&{url:d}||d,g.old===b?g.valid:(g.old=b,e=this,this.startRequest(c),f={},f[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:e.currentForm,success:function(d){var f,h,i,j=d===!0||"true"===d;e.settings.messages[c.name].remote=g.originalMessage,j?(i=e.formSubmitted,e.prepareElement(c),e.formSubmitted=i,e.successList.push(c),delete e.invalid[c.name],
e.showErrors()):(f={},h=d||e.defaultMessage(c,"remote"),f[c.name]=g.message=a.isFunction(h)?h(b):h,e.invalid[c.name]=!0,e.showErrors(f)),g.valid=j,e.stopRequest(c,j)}},d)),"pending")}}}),a.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead.";};var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;
return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})});!function(a,b,c){function d(a,b){this._defaults=e,this.element=a,this.setOptions(b),this.init()}var e={tagName:"a",newLine:"\n",target:"_blank",linkClass:null,linkClasses:[],linkAttributes:null};d.prototype={constructor:d,init:function(){1===this.element.nodeType?d.linkifyNode.call(this,this.element):this.element=d.linkify.call(this,this.element.toString())},setOptions:function(a){this.settings=d.extendSettings(a,this.settings)},toString:function(){return this.element.toString()}},d.extendSettings=
function(a,b){var c;b=b||{};for(c in e)b[c]||(b[c]=e[c]);for(c in a)b[c]=a[c];return b},d.linkMatch=new RegExp(["(",'\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^',")(?:","(","[a-zA-Z0-9\\+_\\-]+","(?:","\\.[a-zA-Z0-9\\+_\\-]+",")*@",")?(","http:\\/\\/|https:\\/\\/|ftp:\\/\\/",")?(","(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)",")(","(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})",")(","(?::\\d{1,5})",")?(","(?:","[\\/|\\?]","(?:","[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*",
")*",")","[\\-\\/a-zA-Z0-9_%#*&+=~]","|","\\/?",")?",")(",'[^a-zA-Z0-9\\+_\\/"\\<\\-]|$',")"].join(""),"g"),d.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g,d.linkify=function(a,b){var c,e,f,g=[];this.constructor===d&&this.settings?(e=this.settings,b&&(e=d.extendSettings(b,e))):e=d.extendSettings(b),f=e.linkClass?e.linkClass.split(/\s+/):[],f.push.apply(f,e.linkClasses),a=a.replace(/</g,"&lt;").replace(/(\s)/g,"$1$1"),g.push("$1<"+e.tagName,'href="http://$2$4$5$6$7"'),
g.push('class="linkified'+(f.length>0?" "+f.join(" "):"")+'"'),e.target&&g.push('target="'+e.target+'"');for(c in e.linkAttributes)g.push([c,'="',e.linkAttributes[c].replace(/\"/g,"&quot;").replace(/\$/g,"&#36;"),'"'].join(""));return g.push(">$2$3$4$5$6$7</"+e.tagName+">$8"),a=a.replace(d.linkMatch,g.join(" ")),a=a.replace(d.emailLinkMatch,"$1mailto:$3"),a=a.replace(/(\s){2}/g,"$1"),a=a.replace(/\n/g,e.newLine)},d.linkifyNode=function(a){var b,e,f,g,h;if(a&&"object"==typeof a&&1===a.nodeType&&"a"!==
a.tagName.toLowerCase()&&!/[^\s]linkified[\s$]/.test(a.className)){for(b=[],g=d._dummyElement||c.createElement("div"),e=a.firstChild,f=a.childElementCount;e;){if(3===e.nodeType){for(;g.firstChild;)g.removeChild(g.firstChild);for(g.innerHTML=d.linkify.call(this,e.textContent||e.innerText||e.nodeValue),b.push.apply(b,g.childNodes);g.firstChild;)g.removeChild(g.firstChild)}else 1===e.nodeType?b.push(d.linkifyNode(e)):b.push(e);e=e.nextSibling}for(;a.firstChild;)a.removeChild(a.firstChild);for(h=0;h<
b.length;h++)a.appendChild(b[h])}return a},d._dummyElement=c.createElement("div"),a.fn.linkify=function(b){return this.each(function(){var c;(c=a.data(this,"plugin-linkify"))?(c.setOptions(b),c.init()):a.data(this,"plugin-linkify",new d(this,b))})},a.fn.linkify.Constructor=d,a(b).on("load",function(){a("[data-linkify]").each(function(){var b,c=a(this),d=c.attr("data-linkify"),e={tagName:c.attr("data-linkify-tagname"),newLine:c.attr("data-linkify-newline"),target:c.attr("data-linkify-target"),linkClass:c.attr("data-linkify-linkclass")};
for(var f in e)"undefined"==typeof e[f]&&delete e[f];b="this"===d?c:c.find(d),b.linkify(e)})}),a("body").on("click",".linkified",function(){var c=a(this),d=c.attr("href"),e=/^mailto:/i.test(d),f=c.attr("target");return e?b.location.href=d:b.open(d,f),!1})}(jQuery,window,document);$.fn.togglepanels=function(){return this.each(function(){$(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find("h3").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover(function(){$(this).toggleClass("ui-state-hover")}).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click(function(){var that=$(this);$(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().slideToggle(400,
function(){});return false}).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide()})};String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:"{"+number+"}"})};$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(title){if(!this.options.title)title.html("&#160;");else title.html(this.options.title)}}));
Element.prototype.ex_HasClassName=function(strClass){if(this.className){var arrList=this.className.split(" ");var strClassUpper=strClass.toUpperCase();for(var i=0;i<arrList.length;i++)if(arrList[i].toUpperCase()==strClassUpper)return true}return false};Element.prototype.ex_AddClassName=function(strClass){if(this.className){var arrList=this.className.split(" ");if(!this.ex_HasClassName(strClass)){arrList[arrList.length]=strClass;this.className=arrList.join(" ")}}else this.className=strClass};
$.extend({keys:function(obj){var a=[];$.each(obj,function(k){a.push(k)});return a}});Element.prototype.ex_RemoveClassName=function(strClass){if(this.className){var arrList=this.className.split(" ");var strClassUpper=strClass.toUpperCase();for(var i=0;i<arrList.length;i++)if(arrList[i].toUpperCase()==strClassUpper){arrList.splice(i,1);i--}this.className=arrList.join(" ")}};
(function(window,$){window.dnnModal={load:function(){try{if(parent.location.href!==undefined){var windowTop=parent;var parentTop=windowTop.parent;if(typeof parentTop.$find!="undefined")if(location.href.indexOf("popUp")==-1||windowTop.location.href.indexOf("popUp")>-1){var popup=windowTop.jQuery("#iPopUp");var refresh=popup.dialog("option","refresh");var closingUrl=popup.dialog("option","closingUrl");var width=popup.dialog("option","minWidth");var height=popup.dialog("option","minHeight");var showReturn=
popup.dialog("option","showReturn");if(!closingUrl)closingUrl=location.href;if(popup.dialog("isOpen")===true)popup.dialog("option",{close:function(event,ui){dnnModal.refreshPopup({url:closingUrl,width:width,height:height,showReturn:showReturn,refresh:refresh})}}).dialog("close")}else windowTop.jQuery("#iPopUp").dialog({autoOpen:false,title:document.title})}return true}catch(err){return false}},show:function(url,showReturn,height,width,refresh,closingUrl){var $modal=$("#iPopUp");if($modal.length==
0){$modal=$('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>');$(document.body).append($modal)}else $modal.attr("src","about:blank");$(document).find("html").css("overflow","hidden");$modal.dialog({modal:true,autoOpen:true,dialogClass:"dnnFormPopup",position:"center",width:screenwidth(70,width),height:screenheight(70,height),resizable:true,closeOnEscape:true,refresh:refresh,showReturn:showReturn,closingUrl:closingUrl,close:function(event,ui){dnnModal.closePopUp(refresh,
closingUrl)}});var mask=dnn.addIframeMask($(".ui-widget-overlay")[0]);if(mask!=null)mask.style.zIndex=1;if($modal.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length===0){var $dnnModalCtrl=$('<a class="dnnModalCtrl"></a>');$modal.parent().find(".ui-dialog-titlebar-close").wrap($dnnModalCtrl);var $dnnToggleMax=$('<a href="#" class="dnnToggleMax"><span>Max</span></a>');$modal.parent().find(".ui-dialog-titlebar-close").before($dnnToggleMax);$dnnToggleMax.click(function(e){e.preventDefault();
var $window=$(window),newHeight,newWidth;if($modal.data("isMaximized")){newHeight=$modal.data("height");newWidth=$modal.data("width");$modal.data("isMaximized",false)}else{$modal.data("height",$modal.dialog("option","minHeight")).data("width",$modal.dialog("option","minWidth")).data("position",$modal.dialog("option","position"));newHeight=$window.height()-46;newWidth=$window.width()-40;$modal.data("isMaximized",true)}$modal.dialog({height:newHeight,width:newWidth});$modal.dialog({position:"center"})})}var showLoading=
function(){var loading=$('<div class="dnnLoading"></div>');loading.css({width:$modal.width(),height:$modal.height()});$modal.before(loading)};var hideLoading=function(){$modal.prev(".dnnLoading").remove()};showLoading();$modal[0].src=url;$modal.bind("load",function(){hideLoading()});if(showReturn.toString()=="true")return false},closePopUp:function(refresh,url){var windowTop=parent;var popup=windowTop.jQuery("#iPopUp");if(typeof refresh==="undefined"||refresh==null)refresh=true;if(refresh.toString()==
"true"){if(typeof url==="undefined"||url=="")url=windowTop.location.href;windowTop.location.href=url;if($(".ui-widget-overlay").length>0)dnn.removeIframeMask($(".ui-widget-overlay")[0]);popup.hide()}else{if($(".ui-widget-overlay").length>0)dnn.removeIframeMask($(".ui-widget-overlay")[0]);popup.dialog("option","close",null).dialog("close")}$(windowTop.document).find("html").css("overflow","")},refreshPopup:function(options){var windowTop=parent;var windowTopTop=windowTop.parent;if(windowTop.location.href!==
windowTopTop.location.href&&windowTop.location.href!==options.url)windowTopTop.dnnModal.show(options.url,options.showReturn,options.height,options.width,options.refresh,options.closingUrl);else dnnModal.closePopUp(options.refresh,options.url)}};window.dnnModal.load()})(window,jQuery);function screenheight(perc,preferredheight){av=$(window).height();perc="."+perc;pix=av*perc;if(preferredheight)if(av-50>preferredheight)return preferredheight;if(pix<350)return 350;else return pix}
function screenwidth(perc,preferredwidth){av=$(window).width();perc="."+perc;pix=av*perc;if(preferredwidth)if(av-50>preferredwidth)return preferredwidth;if(pix<350)return 350;else return pix};(function($){var $o,$i,i,$b,div="<div>",img="<img>",span="<span>",$document=$(document),$mColorPicker=$(div),$mColorPickerBg=$(div),$mColorPickerTest=$(div),$mColorPickerInput=$("<input>"),rRGB=/^rgb[a]?\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d+\.\d+)*)?\)/,rHEX=/([a-f0-9])([a-f0-9])([a-f0-9])/,rHEX3=/#[a-f0-9]{3}/,rHEX6=/#[a-f0-9]{6}/;$.fn.mColorPicker=function(options){var swatches=$.fn.mColorPicker.getCookie("swatches");$o=$.extend($.fn.mColorPicker.defaults,options);$.fn.mColorPicker.defaults.swatches.concat($o.swatches).slice(-10);
if($i.enhancedSwatches&&swatches)$o.swatches=swatches.split("||").concat($o.swatches).slice(0,10)||$o.swatches;if(!$("div#mColorPicker").length)$.fn.mColorPicker.drawPicker();if(!$("#css_disabled_color_picker").length)$("head").prepend('<meta data-remove-me="true"/><style id="css_disabled_color_picker" type="text/css">.mColorPicker[disabled] + span, .mColorPicker[disabled="disabled"] + span, .mColorPicker[disabled="true"] + span {filter:alpha(opacity=50);-moz-opacity:0.5;-webkit-opacity:0.5;-khtml-opacity: 0.5;opacity: 0.5;cursor:default;}</style>');
$("meta[data-remove-me=true]").remove();this.each($.fn.mColorPicker.drawPickerTriggers);return this};$.fn.mColorPicker.init={replace:"[type=color]",index:0,enhancedSwatches:true,allowTransparency:true,slogan:"Meta100 - Designing Fun",showLogo:false};$.fn.mColorPicker.defaults={currentId:false,currentInput:false,currentColor:false,changeColor:false,color:false,imageFolder:"/DesktopModules/AVMap.MapDigitizer_v2/Scripts/mColorPicker/images/",swatches:["#ffffff","#ffff00","#00ff00","#00ffff","#0000ff",
"#ff00ff","#ff0000","#4c2b11","#3b3b3b","#000000"]};$.fn.mColorPicker.start=function(){$('input[data-mcolorpicker!="true"]').filter(function(){return $i.replace=="[type=color]"?this.getAttribute("type")=="color":$(this).is($i.replace)}).mColorPicker()};$.fn.mColorPicker.events=function(){$("#mColorPickerBg").live("click",$.fn.mColorPicker.closePicker);$(".mColorPicker").live("keyup",function(){try{$(this).css({"background-color":$(this).val()}).css({"color":$.fn.mColorPicker.textColor($(this).css("background-color"))}).trigger("change")}catch(r){}});
$(".mColorPickerTrigger").live("click",$.fn.mColorPicker.colorShow);$(".mColor, .mPastColor").live("mousemove",function(e){if(!$o.changeColor)return false;var $t=$(this),offset=$t.offset(),$e=$o.currentInput,hex=$e.attr("data-hex")||$e.attr("hex");$o.color=$t.css("background-color");if($t.hasClass("mPastColor"))$o.color=$.fn.mColorPicker.setColor($o.color,hex);else if($t.hasClass("mColorTransparent"))$o.color="transparent";else if(!$t.hasClass("mPastColor"))$o.color=$.fn.mColorPicker.whichColor(e.pageX-
offset.left,e.pageY-offset.top,hex);$o.currentInput.mSetInputColor($o.color)}).live("click",$.fn.mColorPicker.colorPicked);$("#mColorPickerInput").live("keyup",function(e){try{$o.color=$(this).val();$o.currentInput.mSetInputColor($o.color);if(e.which==13)$.fn.mColorPicker.colorPicked()}catch(r){}}).live("blur",function(){$o.currentInput.mSetInputColor($o.color)});$("#mColorPickerWrapper").live("mouseleave",function(){if(!$o.changeColor)return false;var $e=$o.currentInput;$o.currentInput.mSetInputColor($.fn.mColorPicker.setColor($o.currentColor,
$e.attr("data-hex")||$e.attr("hex")))})};$.fn.mColorPicker.drawPickerTriggers=function(){var $t=$(this),id=$t.attr("id")||"color_"+$i.index++,hidden=$t.attr("text")=="hidden"||$t.attr("data-text")=="hidden"?true:false,color=$.fn.mColorPicker.setColor($t.val(),$t.attr("data-hex")||$t.attr("hex")),width=$t.width(),height=$t.height(),flt=$t.css("float"),$c=$(span),$trigger=$(span),colorPicker="",$e;$c.attr({"id":"color_work_area","class":"mColorPickerInput"}).appendTo($b);$trigger.attr({"id":"mcp_"+
id,"class":"mColorPickerTrigger"}).css({"display":"inline-block","cursor":"pointer"}).insertAfter($t);$(img).attr({"src":$o.imageFolder+"color.png"}).css({"border":0,"margin":"0 0 0 3px","vertical-align":"text-bottom"}).appendTo($trigger);$c.append($t);colorPicker=$c.html().replace(/type=[^a-z ]*color[^a-z //>]*/gi,'type="'+(hidden?"hidden":"text")+'"');$c.html("").remove();$e=$(colorPicker).attr("id",id).addClass("mColorPicker").val(color).insertBefore($trigger);if(hidden)$trigger.css({"border":"1px solid black",
"float":flt,"width":width,"height":height}).addClass($e.attr("class")).html("&nbsp;");$e.mSetInputColor(color);return $e};$.fn.mColorPicker.drawPicker=function(){var $s=$(div),$l=$("<a>"),$f=$(div),$w=$(div);$mColorPickerBg.attr({"id":"mColorPickerBg"}).css({"display":"none","background":"black","opacity":0.01,"position":"absolute","top":0,"right":0,"bottom":0,"left":0}).appendTo($b);$mColorPicker.attr({"id":"mColorPicker","data-mcolorpicker":true}).css({"position":"absolute","border":"1px solid #ccc",
"color":"#fff","width":"194px","height":"184px","font-size":"12px","font-family":"times","display":"none"}).appendTo($b);$mColorPickerTest.attr({"id":"mColorPickerTest"}).css({"display":"none"}).appendTo($b);$w.attr({"id":"mColorPickerWrapper"}).css({"position":"relative","border":"solid 1px gray"}).appendTo($mColorPicker);$(div).attr({"id":"mColorPickerImg","class":"mColor"}).css({"height":"136px","width":"192px","border":0,"cursor":"crosshair","background-image":"url("+$o.imageFolder+"picker.png)"}).appendTo($w);
$s.attr({"id":"mColorPickerSwatches"}).css({"border-right":"1px solid #000"}).appendTo($w);$(div).addClass("mClear").css({"clear":"both"}).appendTo($s);for(i=9;i>-1;i--)$(div).attr({"id":"cell"+i,"class":"mPastColor"+(i>0?" mNoLeftBorder":"")}).css({"background-color":$o.swatches[i].toLowerCase(),"height":"18px","width":"18px","border":"1px solid #000","float":"left"}).html("&nbsp;").prependTo($s);$f.attr({"id":"mColorPickerFooter"}).css({"background-image":"url("+$o.imageFolder+"grid.gif)","position":"relative",
"height":"26px"}).appendTo($w);$mColorPickerInput.attr({"id":"mColorPickerInput","type":"text"}).css({"border":"solid 1px gray","font-size":"10pt","margin":"3px","width":"80px"}).appendTo($f);if($i.allowTransparency)$(span).attr({"id":"mColorPickerTransparent","class":"mColor mColorTransparent"}).css({"font-size":"15px","color":"#000","padding-right":"30px","padding-top":"3px","cursor":"pointer","overflow":"hidden","float":"right"}).text("transparent").appendTo($f);if($i.showLogo)$l.attr({"href":"http://meta100.com/",
"title":$i.slogan,"alt":$i.slogan,"target":"_blank"}).css({"float":"right"}).appendTo($f);$(img).attr({"src":$o.imageFolder+"meta100.png","title":$i.slogan,"alt":$i.slogan}).css({"border":0,"border-left":"1px solid #aaa","right":0,"position":"absolute"}).appendTo($l);$(".mNoLeftBorder").css({"border-left":0})};$.fn.mColorPicker.closePicker=function(){$mColorPickerBg.hide();$mColorPicker.fadeOut()};$.fn.mColorPicker.colorShow=function(){var $t=$(this),id=$t.attr("id").replace("mcp_",""),pos=$t.offset(),
$i=$("#"+id),pickerTop=pos.top+$t.outerHeight(),pickerLeft=pos.left;if($i.attr("disabled"))return false;$o.currentColor=$i.css("background-color");$o.changeColor=true;$o.currentInput=$i;$o.currentId=id;if(pickerTop+$mColorPicker.height()>$document.height())pickerTop=pos.top-$mColorPicker.height();if(pickerLeft+$mColorPicker.width()>$document.width())pickerLeft=pos.left-$mColorPicker.width()+$t.outerWidth();$mColorPicker.css({"top":pickerTop+"px","left":pickerLeft+"px"}).fadeIn("fast");$mColorPickerBg.show();
if($("#"+id).attr("data-text"))$o.color=$t.css("background-color");else $o.color=$i.css("background-color");$o.color=$.fn.mColorPicker.setColor($o.color,$i.attr("data-hex")||$i.attr("hex"));$mColorPickerInput.val($o.color)};$.fn.mColorPicker.setInputColor=function(id,color){$("#"+id).mSetInputColor(color)};$.fn.mSetInputColor=function(color){var $t=$(this),css={"background-color":color,"background-image":color=="transparent"?"url('"+$o.imageFolder+"grid.gif')":"","color":$.fn.mColorPicker.textColor(color)};
if($t.attr("data-text")||$t.attr("text"))$t.next().css(css);$t.val(color).css(css).trigger("change");$mColorPickerInput.val(color)};$.fn.mColorPicker.textColor=function(val){val=$.fn.mColorPicker.RGBtoHex(val);if(typeof val=="undefined"||val=="transparent")return"black";return parseInt(val.substr(1,2),16)+parseInt(val.substr(3,2),16)+parseInt(val.substr(5,2),16)<400?"white":"black"};$.fn.mColorPicker.setCookie=function(name,value,days){var cookie_string=name+"="+escape(value),expires=new Date;expires.setDate(expires.getDate()+
days);cookie_string+="; expires="+expires.toGMTString();document.cookie=cookie_string};$.fn.mColorPicker.getCookie=function(name){var results=document.cookie.match("(^|;) ?"+name+"=([^;]*)(;|$)");if(results)return unescape(results[2]);else return null};$.fn.mColorPicker.colorPicked=function(){$o.changeColor=false;$.fn.mColorPicker.closePicker();$.fn.mColorPicker.addToSwatch();$o.currentInput.trigger("colorpicked")};$.fn.mColorPicker.addToSwatch=function(color){if(!$i.enhancedSwatches)return false;
var swatch=[];i=0;if(typeof color=="string")$o.color=color;if($o.color!="transparent")swatch[0]=$.fn.mColorPicker.hexToRGB($o.color);$(".mPastColor").each(function(){var $t=$(this);$o.color=$.fn.mColorPicker.hexToRGB($t.css("background-color"));if($o.color!=swatch[0]&&swatch.length<10)swatch[swatch.length]=$o.color;$t.css("background-color",swatch[i++])});if($i.enhancedSwatches)$.fn.mColorPicker.setCookie("swatches",swatch.join("||"),365)};$.fn.mColorPicker.whichColor=function(x,y,hex){var color=
[255,255,255];if(x<32){color[1]=x*8;color[2]=0}else if(x<64){color[0]=256-(x-32)*8;color[2]=0}else if(x<96){color[0]=0;color[2]=(x-64)*8}else if(x<128){color[0]=0;color[1]=256-(x-96)*8}else if(x<160){color[0]=(x-128)*8;color[1]=0}else{color[1]=0;color[2]=256-(x-160)*8}for(var n=0;n<3;n++){if(y<64)color[n]+=(256-color[n])*(64-y)/64;else if(y<=128)color[n]-=color[n]*(y-64)/64;else if(y>128)color[n]=256-x/192*256;color[n]=Math.round(Math.min(color[n],255));if(hex=="true")color[n]=$.fn.mColorPicker.decToHex(color[n])}if(hex==
"true")return"#"+color.join("");return"rgb("+color.join(", ")+")"};$.fn.mColorPicker.setColor=function(color,hex){if(hex=="true")return $.fn.mColorPicker.RGBtoHex(color);return $.fn.mColorPicker.hexToRGB(color)};$.fn.mColorPicker.colorTest=function(color){$mColorPickerTest.css("background-color",color);return $mColorPickerTest.css("background-color")};$.fn.mColorPicker.decToHex=function(color){var hex_char="0123456789ABCDEF";color=parseInt(color);return String(hex_char.charAt(Math.floor(color/16)))+
String(hex_char.charAt(color-Math.floor(color/16)*16))};$.fn.mColorPicker.RGBtoHex=function(color){var decToHex="#",rgb;color=color?color.toLowerCase():false;if(!color)return"";if(rHEX6.test(color))return color.substr(0,7);if(rHEX3.test(color))return color.replace(rHEX,"$1$1$2$2$3$3").substr(0,7);if(rgb=color.match(rRGB)){for(var n=1;n<4;n++)decToHex+=$.fn.mColorPicker.decToHex(rgb[n]);return decToHex}return $.fn.mColorPicker.colorTest(color)};$.fn.mColorPicker.hexToRGB=function(color){color=color?
color.toLowerCase():false;if(!color)return"";if(rRGB.test(color))return color;if(rHEX3.test(color)){if(!rHEX6.test(color))color=color.replace(rHEX,"$1$1$2$2$3$3");return"rgb("+parseInt(color.substr(1,2),16)+", "+parseInt(color.substr(3,2),16)+", "+parseInt(color.substr(5,2),16)+")"}return $.fn.mColorPicker.colorTest(color)};$i=$.fn.mColorPicker.init;$document.ready(function(){$b=$("body");$.fn.mColorPicker.events();if($i.replace)if(typeof $.fn.mDOMupdate=="function")$("input").mDOMupdate($.fn.mColorPicker.start);
else if(typeof $.fn.livequery=="function")$("input").livequery($.fn.mColorPicker.start);else{$.fn.mColorPicker.start();$document.live("ajaxSuccess.mColorPicker",$.fn.mColorPicker.start)}})})(jQuery);(function($){if(!$.curCSS)$.curCSS=$.css})(jQuery);
(function(B){B.linkselect={version:"1.5.13"};B.fn.linkselect=function(F){var G=typeof arguments[0]=="string"&&arguments[0];var E=G&&Array.prototype.slice.call(arguments,1)||arguments;if(G&&this.length){var D=B.data(this[0],"linkselect");if(G.toLowerCase()=="object")return D;else if(D[G]){var C;this.each(function(H){var I=B.data(this,"linkselect")[G].apply(D,E);if(H==0&&I)if(!!I.jquery)C=B([]).add(I);else{C=I;return false}else if(!!I&&!!I.jquery)C=C.add(I)});return C||this}else return this}else return this.each(function(){new B.LinkSelect(this,
F)})};var A=0;B.LinkSelect=function(u,W){W=B.extend({},B.LinkSelect.defaults,W);if(W.style.length==0)W.style=B.LinkSelect.defaults.style;W.classes={link:W.style+"-link",linkText:W.style+"-link-text",linkOpen:W.style+"-link-open",linkIcon:W.style+"-link-icon",linkFocus:W.style+"-link-focus",container:W.style+"-container",selected:W.style+"-selected",current:W.style+"-current",disabled:W.style+"-disabled",scrollable:W.style+"-scrollable",title:W.style+"-title",value:W.style+"-value",placeholder:"placeholder"};
var K=this,L=++A,n=u,v=B(u),b={},e=false,O=0,d,G=false,c;this.id=v.attr("id");this.val=function(AA,z){if(arguments.length>0){o(AA,z);return N}else return f.val()};this.text=function(){return V().find("span."+W.classes.value).text()};this.change=function(){V().trigger("click.linkselect",[true,true]);return N};this.focus=function(){setTimeout(function(){N.focus()},1);return N};this.blur=function(){setTimeout(function(){N.blur()},1);return N};this.open=function(AA,z){if(e)return N;B(document).triggerHandler("click.linkselect");
if(z!==false)N.trigger("focus");setTimeout(function(){m(AA)},1);return N};this.disable=function(z){e=z;N.parent().find("span."+W.classes.disabled).remove();N[e?"hide":"show"]();if(e)N.after('<span class="'+W.classes.disabled+'">'+N.html()+"</span>");return N};this.destroy=function(){X.undelegate("li","*");N.unbind("*");s();N.before(v);h.remove()};this.replaceOptions=function(AB,AD,AC){var z=typeof AD==="string";if(!z&&!AC)AC=AD;var AA=v.children("option");if(z&&AD.length)AA=AA.not(AD);AA.remove();
B.each(AB,function(AE){var AF=B("<option/>").attr("value",this.value).html(this.text);if(this.selected==true)AF.attr("selected","selected");if(this.className)AF.addClass(this.className);AF.appendTo(v)});R();V().trigger("click.linkselect",[true,AC])};var q;function g(z,AA){f.val(z);y.html(AA);f.triggerHandler("update",[z,AA,K]);v.triggerHandler("update",[z,AA,K]);q=z}var h=w();v.after(h).remove();var f=h.filter("input"),N=h.filter("a"),y=N.find("> span."+W.classes.linkText),I=h.filter("div"),S=h.find("."+
W.classes.scrollable),J=h.find("."+W.classes.title),X=I.find("ul"),Z;T();f.addClass(v.attr("class"));B.data(f[0],"linkselect",this);I.appendTo("body").bind("mousemove.linkselect",function(z){Z=z});X.delegate("li","mouseover.linkselect",function(z){if(Z&&Z.type=="keydown")return;k(B(this));Z=z}).delegate("li","click.linkselect",function(AF,AA,AE){AF.preventDefault();var z=E(q).removeClass(W.classes.selected),AB=B(this).addClass(W.classes.selected),AD=AB.attr("data-value")||"",AG=AB.find("."+W.classes.value).html(),
AC={value:q||"",text:z.find("."+W.classes.value).html()};H(AA);g(AD,AG);if(AE!==false&&(B.isFunction(W.change)&&W.change.apply(K,[this,AD,AG,AE])===false||B.isFunction(v[0].onchange)&&v[0].onchange.apply(K,[this,AD,AG,AE])===false)){z.addClass(W.classes.selected);AB.removeClass(W.classes.selected);g(AC.value,AC.text);return}N[AA!==true?"trigger":"triggerHandler"]("focus",[AA]);if(e)N.parent().find("span."+W.classes.disabled).html(AG)});N.bind("click.linkselect",function(z){z.preventDefault();l();
setTimeout(function(){N.trigger("focus.linkselect")},0)}).bind("focus.linkselect",function(AA,z){if(!I.is(":visible")&&z!==true)N.addClass(W.classes.linkFocus)}).bind("blur.linkselect",function(z){if(x(z))H();N.removeClass(W.classes.linkFocus)}).bind((B.browser.safari?"keydown":"keypress")+".linkselect",function(AE,AD){if(!!AD)var AE=AD;var AA=AE.keyCode||AE.charCode,AC=String.fromCharCode(AA).toLowerCase();switch(AA){case 38:case 40:AE.preventDefault();i(AA==38?-1:1,true);Z=AE;break;case 13:AE.preventDefault();
if(I.is(":visible"))I.find("li."+W.classes.current).trigger("click.linkselect");else N.trigger("click.linkselect");break;case 9:case 27:H();break;case 35:AE.preventDefault();P();Z=AE;break;case 36:AE.preventDefault();a();Z=AE;break;case 33:case 34:AE.preventDefault();var z=I.is(":visible");if(!z)I.show();var AB=parseInt(S.height()/X.find("li:not(."+W.classes.placeholder+"):first").outerHeight(),10);if(!z)I.hide();i(AB*(AA==33?-1:1));break}if(AC!=d)O=0;d=AC;if(typeof b[AC]!="undefined"){if(O>=b[AC].length)O=
0;X.find("#"+K.id+"_li_"+b[AC][O]).trigger("click.linkselect");AE.preventDefault();AE.stopPropagation();O++}});if(B.browser.msie)N.bind("keydown.linkselect",function(z){if(",8,9,33,34,35,36,37,38,39,40,".indexOf(","+z.keyCode+",")>-1)return B(this).triggerHandler("keypress.linkselect",[z])});function U(){B(document).bind("click.linkselect-"+L,function(AA){var AB=B(AA.target);if(AB.closest("a")[0]!==N[0]&&AB[0]!==S[0]&&I.is(":visible")){H();if(c&&AB.closest("."+W.classes.title)[0]===J[0])M();var z=
AB.closest(I);if(z.length)setTimeout(function(){N.trigger("focus.linkselect")},13);else N.removeClass(W.classes.linkFocus)}});B(window).bind("resize.linkselect-"+L,function(){Q(N,I)})}function s(){B(document).unbind("click.linkselect-"+L);B(window).unbind("resize.linkselect-"+L)}function w(){var AE=K.id,AA=v.attr("name")||AE,AD=n.selectedIndex==-1?"":n[n.selectedIndex].text,AC=n.selectedIndex==-1?"":n[n.selectedIndex][B.browser.msie&&B.browser.version<=7&&!n[n.selectedIndex].attributes.value.specified?
"text":"value"],AB=v.attr("tabindex");var z=['<a href="#'+K.id+'" id="'+K.id+'_link" class="'+B.trim(W.classes.link+" "+W.classLink)+'"'+(AB?' tabindex="'+AB+'"':"")+">",'<span class="'+W.classes.linkText+'">',AD,"</span>",'<span class="'+W.classes.linkIcon+'"><span></span></span>',"</a>",'<input type="hidden" name="'+AA+'" id="'+K.id+'" value="'+AC+'" />','<div class="'+W.classes.container+'">','<div class="'+W.classes.title+'"><span></span></div>','<div class="'+W.classes.scrollable+'"><ul id="'+
K.id+'_list">',p(v.children("option")),"</ul></div>","</div>"];return B(z.join(""))}function p(z){b=[],c=z.filter("."+W.classes.placeholder).eq(0);if(c.length==0)c=null;var AA=[];z.each(function(AD){var AH=B(this);var AF=AH.is(":selected");var AB=B.trim(AH.text());var AC='<span class="'+W.classes.value+'">'+AB+"</span>";var AG=B.browser.msie&&B.browser.version<=7&&!this.attributes.value.specified?this.text:this.value;if(B.isFunction(W.format))AC=W.format.apply(K,[AC,AG,AB,AD,AH,W])||AC;if(!c||c[0]!==
AH[0]){var AE=AB.length>1?AB.substring(0,1).toLowerCase():"";if(!b[AE])b[AE]=[];b[AE].push(AD)}var AI=B.trim(this.className+" "+(AF?W.classes.selected:""));AA.push('<li id="'+K.id+"_li_"+AD+'" data-value="'+AG+(AI.length>0?'" class="'+AI:"")+'">'+AC+"</li>")});return AA.join("")}function R(){F=false;I[0].style.width="";if(J.length){J[0].style.width="";J.css("float","")}X.html(p(v.children("option")));if(c)T()}function T(){var z=B.trim(v.attr("title")||c&&c.text()||"");J[z.length?"show":"hide"]()[c?
"addClass":"removeClass"](W.classes.placeholder).find("span").text(z)}function M(){if(c)X.find("li."+W.classes.placeholder).trigger("click.linkselect")}function E(z){return X.find("li[data-value='"+(z||"")+"']")}function o(AB,AA){var z=E(AB);if(z.length==0)z=X.find("li:eq(0)");return z.trigger("click.linkselect",[true,AA])}function V(){var z=X.find("li."+W.classes.selected);if(z.length==0)z=X.find("li:eq(0)");return z}function Y(){var z=X.find("li."+W.classes.current);if(z.length==0)z=V();return z}
function k(z){I.find("."+W.classes.current).removeClass(W.classes.current);return r(z)}function r(z){z.addClass(W.classes.current);if(c)J[z.hasClass(W.classes.placeholder)?"addClass":"removeClass"](W.classes.current);return z}function i(AA,AB){var z=Y();var AC=parseInt(z.attr("id").replace(/(.+)(_(\d+$))/gi,"$3"),10);if(c&&AB!==true&&z.hasClass(W.classes.placeholder))AC++;D(AC+AA,AB)}function D(AD,AB){var AC=I.find("li"),z;if(!AC||AC.length==0)return false;var AA=Y().removeClass(W.classes.current);
if(isNaN(AD)||AD<0)AD=0;else if(AD>AC.length-1)AD=AC.length-1;z=AC.eq(AD);if(c&&AB!==true&&z.hasClass(W.classes.placeholder))z=AC.eq(AD+1);if(I.is(":visible")){r(z);C(z)}else if(AA[0]!==z[0])z.trigger("click.linkselect")}function a(){D(0)}function P(){D(I.find("li").length-1)}function C(AA,z){var AC=AA[0];var AD=S[0];var AB={pTop:parseInt(S.css("paddingTop"),10)||0,pBottom:parseInt(S.css("paddingBottom"),10)||0,bTop:parseInt(S.css("borderTopWidth"),10)||0,bBottom:parseInt(S.css("borderBottomWidth"),
10)||0};if(AC.offsetTop+AC.offsetHeight>AD.scrollTop+AD.clientHeight)AD.scrollTop=AA.offset().top+(AD.scrollTop-S.offset().top)-(AD.clientHeight/(z==true?2:1)-(AA.outerHeight()+AB.pBottom));else if(AC.offsetTop-AB.bTop-AB.bBottom<=AD.scrollTop+AB.pTop+AB.pBottom)AD.scrollTop=AA.offset().top+(AD.scrollTop-S.offset().top)-AB.pTop}function l(){var z=I.is(":visible");if(z)H();else m();return z}var F=false;function m(AG){U();var AB=V(),AA=!F;N.removeClass(W.classes.linkFocus).addClass(W.classes.linkOpen);
I.show();if(!F){var AF=N.css("display").indexOf("inline")>-1?N.parent().outerWidth(true):N.outerWidth(true);var AC=W.fixedWidth?AF:I.outerWidth(true);if(AC<AF)AC=AF;var AE=parseInt(S.css("max-height"),10);if(B.browser.msie&&B.browser.version<=6)if(AE>0&&S.height()>AE)S.height(AE);if(X.height()>AE)AC+=25;var AD=parseInt("0"+I.css("max-width"),10);if(AD>0&&AC>AD)AC=AF=AD;I.width(AC);if(B.browser.safari){var z=I.width();if(AF>z)AC=AF=z}AF=AF-((parseInt(J.css("marginRight"),10)||0)-(parseInt(J.css("marginLeft"),
10)||0));J.width(AF);if(J.outerWidth()>AF)J.width(AF-(J.outerWidth()-AF));if(W.titleAlign.toLowerCase()=="right"&&!W.fixedWidth)J.css("float","right");F=true}Q(N,I,AA);if(!!B.fn.bgIframe)I.bgIframe();C(AB,true);k(AB);if(B.isFunction(W.open))W.open.apply(this,[I,N,AB,J]);if(B.isFunction(AG))AG.apply(this,[I,N,AB,J]);G=true}function H(z){s();if(z!==true)N.addClass(W.classes.linkFocus).removeClass(W.classes.linkOpen);I.hide();if(B.isFunction(W.close))W.close.apply(this,[I,N,V(),J]);G=false}function j(z){var AA=
false;if(z.is(":hidden"))AA=!!z.css("visibility","hidden").show();var AB=B.extend(z.offset(),{width:z.outerWidth(),height:z.outerHeight(),marginLeft:parseInt(B.curCSS(z[0],"marginLeft",true),10)||0,marginRight:parseInt(B.curCSS(z[0],"marginRight",true),10)||0,marginTop:parseInt(B.curCSS(z[0],"marginTop",true),10)||0,marginBottom:parseInt(B.curCSS(z[0],"marginBottom",true),10)||0,paddingLeft:parseInt(B.curCSS(z[0],"paddingLeft",true),10)||0,paddingRight:parseInt(B.curCSS(z[0],"paddingRight",true),
10)||0,borderLeftWidth:parseInt(B.curCSS(z[0],"borderLeftWidth",true),10)||0,borderRightWidth:parseInt(B.curCSS(z[0],"borderRightWidth",true),10)||0});if(AB.marginTop<0)AB.top+=AB.marginTop;if(AB.marginLeft<0)AB.left+=AB.marginLeft;AB.bottom=AB.top+AB.height;AB.right=AB.left+AB.width;if(AA)z.hide().css("visibility","visible");return AB}function Q(AH,z,AC){var AE=j(AH);var AB=t();var AG=I.outerWidth()+AE.left;if(AG>AB.x){var AD=AE.paddingLeft+AE.paddingRight+AE.borderLeftWidth+AE.borderRightWidth;
if(AC)J.width(J.width()-AD);AE.left=AE.left+AD-I.outerWidth()+J.outerWidth(true)}else{var AF=I.width(),AA=J.outerWidth(true);if(AF>AA)J.width(AF-(AA-J.width()))}z.css({position:"absolute",top:AE[W.yAxis],left:AE.left});return AE.bottom}function t(){var z={scrollLeft:B(window).scrollLeft(),scrollTop:B(window).scrollTop(),width:B("body").width(),height:B("body").height()};z.x=z.scrollLeft+z.width;z.y=z.scrollTop+z.height;return z}function x(z){return!("bubbles"in z||"cancelBubble"in z)}this.$select=
v;this.$input=f;this.$container=I;q=this.val();if(B.isFunction(W.init))W.init.apply(this,[v,f,N,I,S,J,X])};B.LinkSelect.defaults={style:"linkselect",classLink:"",yAxis:"top",titleAlign:"right",fixedWidth:false,init:null,change:null,format:null,open:null,close:null}})(jQuery);(function($){if(/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery)||/^1.1/.test($.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+$.fn.jquery);return}$.fn._fadeIn=$.fn.fadeIn;var noOp=function(){};var mode=document.documentMode||0;var setExpr=$.browser.msie&&($.browser.version<8&&!mode||mode<8);var ie6=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!mode;$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,
message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append("<h1>"+title+"</h1>");if(message)$m.append("<h2>"+message+"</h2>");if(timeout==undefined)timeout=3E3;$.blockUI({message:$m,fadeIn:700,fadeOut:1E3,centerY:false,timeout:timeout,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};$.fn.block=function(opts){return this.unblock({fadeOut:0}).each(function(){if($.css(this,"position")=="static")this.style.position="relative";if($.browser.msie)this.style.zoom=
1;install(this,opts)})};$.fn.unblock=function(opts){return this.each(function(){remove(this,opts)})};$.blockUI.version=2.39;$.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"auto",top:"20%",textAlign:"center",color:"#000",border:"none",backgroundColor:"transparent",cursor:"wait",margin:"0 auto"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#FFF",opacity:1,cursor:"wait",customTop:0},growlCSS:{width:"350px",
top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1E3,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:0,fadeOut:0,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,
onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var full=el==window;var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});var css=$.extend({},$.blockUI.defaults.css,opts.css||{});var themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:
msg;if(full&&pageBlock)remove(window,{fadeOut:0});if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};if(node){$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)data.parent.removeChild(node)}else throw new Error("omg");}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1=$.browser.msie||opts.forceIframe?$('<iframe class="blockUI" style="z-index:'+
z++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>'):$('<div class="blockUI" style="display:none"></div>');var lyr2=opts.theme?$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z++ +';display:none"></div>'):$('<div class="blockUI blockOverlay" style="z-index:'+z++ +";display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:"+opts.overlayCSS.customTop+'px;left:0"></div>');var lyr3,
s;if(opts.theme&&full)s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>";else if(opts.theme)s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">'+
'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>";else if(full)s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:relative"></div>';else s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';lyr3=$(s);if(msg)if(opts.theme){lyr3.css(themedCSS);lyr3.addClass("ui-widget-content")}else lyr3.css(css);
if(!opts.theme&&(!opts.applyPlatformOpacityRules||!($.browser.mozilla&&/Linux/.test(navigator.platform))))lyr2.css(opts.overlayCSS);lyr2.css("position",full?"fixed":"absolute");if($.browser.msie||opts.forceIframe)lyr1.css("opacity",0);var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable)lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var expr=setExpr&&(!$.boxModel||$("object,embed",full?null:el).length>
0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.boxModel)$("html,body").css("height","100%");if((ie6||!$.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each([lyr1,lyr2,lyr3],function(i,o){var s=o[0].style;s.position="absolute";if(i<2){full?s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"'):s.setExpression("height",
'this.parentNode.offsetHeight + "px"');full?s.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression("width",'this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression("left",fixL);if(fixT)s.setExpression("top",fixT)}else if(opts.centerY){if(full)s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');
s.marginTop=0}else if(!opts.centerY&&full){var top=opts.css&&opts.css.top?parseInt(opts.css.top):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}})}if(msg){if(opts.theme)lyr3.find(".ui-widget-content").append(msg);else lyr3.append(msg);if(msg.jquery||msg.nodeType)$(msg).show()}if(($.browser.msie||opts.forceIframe)&&opts.showOverlay)lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?
opts.onBlock:noOp;var cb1=opts.showOverlay&&!msg?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)lyr2._fadeIn(opts.fadeIn,cb1);if(msg)lyr3._fadeIn(opts.fadeIn,cb2)}else{if(opts.showOverlay)lyr2.show();if(msg)lyr3.show();if(opts.onBlock)opts.onBlock()}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(":input:enabled:visible",pageBlock);if(opts.focusInput)setTimeout(focus,20)}else center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){full?$.unblockUI(opts):
$(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var full=el==window;var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data("blockUI.onUnblock");$el.removeData("blockUI.onUnblock")}var els;if(full)els=$("body").children().filter(".blockUI").add("body > .blockUI");
else els=$(".blockUI",el);if(full)pageBlock=pageBlockEls=null;if(opts.fadeOut){els.fadeOut(opts.fadeOut);setTimeout(function(){reset(els,data,opts,el)},opts.fadeOut)}else reset(els,data,opts,el)}function reset(els,data,opts,el){els.each(function(i,o){if(this.parentNode)this.parentNode.removeChild(this)});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent)data.parent.appendChild(data.el);$(el).removeData("blockUI.history")}if(typeof opts.onUnblock==
"function")opts.onUnblock(el,opts)}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked")))return;if(!full)$el.data("blockUI.isBlocked",b);if(!opts.bindEvents||b&&!opts.showOverlay)return;var events="mousedown mouseup keydown keypress";b?$(document).bind(events,opts,handler):$(document).unbind(events,handler)}function handler(e){if(e.keyCode&&e.keyCode==9)if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&
e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}var opts=e.data;if($(e.target).parents("div."+opts.blockMsgClass).length>0)return true;return $(e.target).parents().children().filter("div.blockUI").length==0}function focus(back){if(!pageBlockEls)return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)e.focus()}function center(el,x,y){var p=el.parentNode,s=el.style;var l=(p.offsetWidth-el.offsetWidth)/
2-sz(p,"borderLeftWidth");var t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");if(x)s.left=l>0?l+"px":"0";if(y)s.top=t>0?t+"px":"0"}function sz(el,p){return parseInt($.css(el,p))||0}})(jQuery);
